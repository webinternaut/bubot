(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[497],{40010:function(Ct,S,p){"use strict";p.d(S,{sg:function(){return p0},yi:function(){return x0},x1:function(){return L0},Ex:function(){return N0},TZ:function(){return V0},m:function(){return q0},cQ:function(){return em}});var b={};p.r(b),p.d(b,{Base:function(){return Ta},Circle:function(){return Db},Ellipse:function(){return Rb},Image:function(){return Gb},Line:function(){return zb},Marker:function(){return Hb},Path:function(){return qu},Polygon:function(){return ew},Polyline:function(){return nw},Rect:function(){return sw},Text:function(){return uw}});var I={};p.r(I),p.d(I,{Canvas:function(){return Kc},Event:function(){return ze.Event},Group:function(){return $u},Shape:function(){return b},__esModule:function(){return fw.X},version:function(){return pw}});var P={};p.r(P),p.d(P,{Base:function(){return Ca},Circle:function(){return ww},Dom:function(){return Cw},Ellipse:function(){return Ew},Image:function(){return Aw},Line:function(){return Pw},Marker:function(){return Ow},Path:function(){return kw},Polygon:function(){return Dw},Polyline:function(){return Rw},Rect:function(){return Xw},Text:function(){return Zw}});var O={};p.r(O),p.d(O,{Canvas:function(){return iv},Event:function(){return ze.Event},Group:function(){return ef},Shape:function(){return P},version:function(){return gS}});var L={};p.r(L),p.d(L,{Chart:function(){return R1},ComponentController:function(){return zo},DIRECTION:function(){return _t},Event:function(){return Hr},Facet:function(){return Nr},Geometry:function(){return Ka},GeometryLabel:function(){return Ks},Interaction:function(){return et},InteractionAction:function(){return hn},LAYER:function(){return yt},Types:function(){return cb},Util:function(){return Wv},VERSION:function(){return vb},View:function(){return Nu},getActionClass:function(){return Mi},getAnimation:function(){return Yu},getEngine:function(){return tt},getFacet:function(){return Qr},getGeometryLabel:function(){return xc},getGeometryLabelLayout:function(){return bc},getInteraction:function(){return he},getShapeFactory:function(){return Xu},getTheme:function(){return gt},registerAction:function(){return Fr},registerAnimation:function(){return hi},registerComponentController:function(){return sn},registerEngine:function(){return q},registerFacet:function(){return Zr},registerGeometry:function(){return Aa},registerGeometryLabel:function(){return cs},registerGeometryLabelLayout:function(){return Mo},registerInteraction:function(){return Se},registerShape:function(){return xn},registerShapeFactory:function(){return so},registerTheme:function(){return kt}});var A={};p.r(A),p.d(A,{EVENT_MAP:function(){return dn},onEvent:function(){return ai}});var _={};p.r(_),p.d(_,{EVENT_MAP:function(){return dn},onEvent:function(){return ai}});var E={};p.r(E),p.d(E,{EVENT_MAP:function(){return dn},onEvent:function(){return ai}});var g={};p.r(g),p.d(g,{EVENT_MAP:function(){return dn},onEvent:function(){return ai}});var w={};p.r(w),p.d(w,{EVENT_MAP:function(){return dn},onEvent:function(){return ai}});var d={};p.r(d),p.d(d,{EVENT_MAP:function(){return dn},onEvent:function(){return ai}});var y={};p.r(y),p.d(y,{EVENT_MAP:function(){return dn},onEvent:function(){return ai}});var m={};p.r(m),p.d(m,{EVENT_MAP:function(){return dn},onEvent:function(){return ai}});var C={};p.r(C),p.d(C,{EVENT_MAP:function(){return dn},onEvent:function(){return ai}});var T={};p.r(T),p.d(T,{EVENT_MAP:function(){return dn},onEvent:function(){return ai}});var B={};p.r(B),p.d(B,{EVENT_MAP:function(){return dn},onEvent:function(){return ai}});var D={};p.r(D),p.d(D,{EVENT_MAP:function(){return dn},onEvent:function(){return ai}});var Y={};p.r(Y),p.d(Y,{EVENT_MAP:function(){return dn},onEvent:function(){return ai}});var K={};p.r(K),p.d(K,{EVENT_MAP:function(){return dn},onEvent:function(){return ai}});var H={};p.r(H),p.d(H,{EVENT_MAP:function(){return dn},onEvent:function(){return ai}});var st={};p.r(st),p.d(st,{EVENT_MAP:function(){return dn},onEvent:function(){return ai}});var pt={};p.r(pt),p.d(pt,{EVENT_MAP:function(){return dn},onEvent:function(){return ai}});var ct={};p.r(ct),p.d(ct,{EVENT_MAP:function(){return dn},onEvent:function(){return ai}});var Ot={};p.r(Ot),p.d(Ot,{EVENT_MAP:function(){return dn},onEvent:function(){return ai}});var Rt={};p.r(Rt),p.d(Rt,{EVENT_MAP:function(){return dn},onEvent:function(){return ai}});var Qt={};p.r(Qt),p.d(Qt,{EVENT_MAP:function(){return dn},onEvent:function(){return ai}});var Gt={};p.r(Gt),p.d(Gt,{calculationItemsBBox:function(){return om},cloneEvent:function(){return jl},formatPadding:function(){return Sh},isNaN:function(){return ro},isViewportChanged:function(){return am},processParallelEdges:function(){return rR}});var Z={};p.r(Z),p.d(Z,{getColorsWithSubjectColor:function(){return dm},mixColor:function(){return Ga}});var nt={};p.r(nt),p.d(nt,{Line:function(){return Do},applyMatrix:function(){return Ls},distance:function(){return Os},floydWarshall:function(){return Ah},fractionToLine:function(){return Oh},getAdjMatrix:function(){return Th},getBBoxBoundLine:function(){return Lh},getCircleCenterByPoints:function(){return _h},getCircleIntersectByPoint:function(){return Tm},getDegree:function(){return Ql},getEllipseIntersectByPoint:function(){return Pm},getLineIntersect:function(){return Ps},getPointsCenter:function(){return Fm},getRectIntersectByPoint:function(){return Am},intersectBBox:function(){return Bm},invertMatrix:function(){return Lm},isPointInPolygon:function(){return Is},isPointsOverlap:function(){return Ih},isPolygonsIntersect:function(){return Ph},itemIntersectByLine:function(){return Dm},move:function(){return km},pointLineSquareDist:function(){return Rm},pointRectSquareDist:function(){return Nm},rotate:function(){return FR},scale:function(){return DR},scaleMatrix:function(){return Om},squareDist:function(){return Jl},translate:function(){return Im}});var Q={};p.r(Q),p.d(Q,{getClosedSpline:function(){return kh},getControlPoint:function(){return ql},getSpline:function(){return Gm},paddedHull:function(){return Wm},pathToPoints:function(){return tu},pointsToPolygon:function(){return Ym},roundedHull:function(){return Hm}});var dt={};p.r(dt),p.d(dt,{getBBox:function(){return ru},getChartRegion:function(){return sN},getComboBBox:function(){return Nh},getLabelPosition:function(){return nu},getLetterWidth:function(){return ix},getLoopCfgs:function(){return ex},getTextSize:function(){return ax},plainCombosToTrees:function(){return Fh},radialLayout:function(){return nx},reconstructTree:function(){return Rh},traverseTree:function(){return Ji},traverseTreeUp:function(){return Ea}});var lt={};p.r(lt),p.d(lt,{adjMatrix:function(){return xu},breadthFirstSearch:function(){return Q8},degree:function(){return Gx},depthFirstSearch:function(){return x1},detectAllCycles:function(){return t9},detectAllDirectedCycle:function(){return C1},detectAllUndirectedCycle:function(){return S1},detectDirectedCycle:function(){return e9},findAllPath:function(){return o9},findShortestPath:function(){return a9},floydWarshall:function(){return Vx},getConnectedComponents:function(){return w1},getPageRank:function(){return p9},minimumSpanningTree:function(){return v9}});var z=p(67294),$=p(45687),j=p(60517),f=p(49242),yt;(function(i){i.FORE="fore",i.MID="mid",i.BG="bg"})(yt||(yt={}));var _t;(function(i){i.TOP="top",i.TOP_LEFT="top-left",i.TOP_RIGHT="top-right",i.RIGHT="right",i.RIGHT_TOP="right-top",i.RIGHT_BOTTOM="right-bottom",i.LEFT="left",i.LEFT_TOP="left-top",i.LEFT_BOTTOM="left-bottom",i.BOTTOM="bottom",i.BOTTOM_LEFT="bottom-left",i.BOTTOM_RIGHT="bottom-right",i.RADIUS="radius",i.CIRCLE="circle",i.NONE="none"})(_t||(_t={}));var jt;(function(i){i.AXIS="axis",i.GRID="grid",i.LEGEND="legend",i.TOOLTIP="tooltip",i.ANNOTATION="annotation",i.OTHER="other"})(jt||(jt={}));var qt={FORE:3,MID:2,BG:1},Vt;(function(i){i.BEFORE_RENDER="beforerender",i.AFTER_RENDER="afterrender",i.BEFORE_PAINT="beforepaint",i.AFTER_PAINT="afterpaint",i.BEFORE_CHANGE_DATA="beforechangedata",i.AFTER_CHANGE_DATA="afterchangedata",i.BEFORE_CLEAR="beforeclear",i.AFTER_CLEAR="afterclear",i.BEFORE_DESTROY="beforedestroy"})(Vt||(Vt={}));var re;(function(i){i.MOUSE_ENTER="plot:mouseenter",i.MOUSE_DOWN="plot:mousedown",i.MOUSE_MOVE="plot:mousemove",i.MOUSE_UP="plot:mouseup",i.MOUSE_LEAVE="plot:mouseleave",i.TOUCH_START="plot:touchstart",i.TOUCH_MOVE="plot:touchmove",i.TOUCH_END="plot:touchend",i.TOUCH_CANCEL="plot:touchcancel",i.CLICK="plot:click",i.DBLCLICK="plot:dblclick",i.CONTEXTMENU="plot:contextmenu",i.LEAVE="plot:leave",i.ENTER="plot:enter"})(re||(re={}));var ae;(function(i){i.ACTIVE="active",i.INACTIVE="inactive",i.SELECTED="selected",i.DEFAULT="default"})(ae||(ae={}));var Nt=["color","shape","size"],Lt="_origin",bt=1,at=1,rt=.25,vt={};function tt(i){var r=vt[i];if(!r)throw new Error("G engine '"+i+"' is not exist, please register it at first.");return r}function q(i,r){vt[i]=r}var Et=p(6056),It=p(45442);function Kt(i){var r=getComputedStyle(i);return{width:(i.clientWidth||parseInt(r.width,10))-parseInt(r.paddingLeft,10)-parseInt(r.paddingRight,10),height:(i.clientHeight||parseInt(r.height,10))-parseInt(r.paddingTop,10)-parseInt(r.paddingBottom,10)}}function ue(i){return typeof i=="number"&&!isNaN(i)}function we(i,r,t,e){var n=t,a=e;if(r){var o=Kt(i);n=o.width?o.width:n,a=o.height?o.height:a}return{width:Math.max(ue(n)?n:bt,bt),height:Math.max(ue(a)?a:at,at)}}function Ye(i){var r=i.parentNode;r&&r.removeChild(i)}var te=p(90494),pe=function(i){(0,j.__extends)(r,i);function r(t){var e=i.call(this)||this;e.destroyed=!1;var n=t.visible,a=n===void 0?!0:n;return e.visible=a,e}return r.prototype.show=function(){var t=this.visible;t||this.changeVisible(!0)},r.prototype.hide=function(){var t=this.visible;t&&this.changeVisible(!1)},r.prototype.destroy=function(){this.off(),this.destroyed=!0},r.prototype.changeVisible=function(t){this.visible!==t&&(this.visible=t)},r}(te.default),Te=pe,ze=p(39014),ur=p(28014),Ze=p(24796),pr=p(21392),Pr=p(50782),Or=p(2443),nn=p(51441),kn=nn.Axis.Line,ii=nn.Axis.Circle,gi=nn.Grid.Line,Si=nn.Grid.Circle,Zt=nn.Legend.Category,ne=nn.Legend.Continuous,ve=nn.Tooltip.Html,ge=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function Ae(i){var r="linear";return ge.test(i)?r="time":(0,f.isString)(i)&&(r="cat"),r}function Pe(i,r,t){var e=r||[];if((0,f.isNumber)(i)||(0,f.isNil)((0,f.firstValue)(e,i))&&(0,f.isEmpty)(t)){var n=(0,Or.getScale)("identity");return new n({field:i.toString(),values:[i]})}var a=(0,f.valuesOfKey)(e,i),o=(0,f.get)(t,"type",Ae(a[0])),s=(0,Or.getScale)(o);return new s((0,j.__assign)({field:i,values:a},t))}function Ie(i,r){if(i.type!=="identity"&&r.type!=="identity"){var t={};for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e]);i.change(t)}}function De(i){return i.alias||i.field}var Ce=p(31437);function er(i){var r,t;switch(i){case _t.TOP:r={x:0,y:1},t={x:1,y:1};break;case _t.RIGHT:r={x:1,y:0},t={x:1,y:1};break;case _t.BOTTOM:r={x:0,y:0},t={x:1,y:0};break;case _t.LEFT:r={x:0,y:0},t={x:0,y:1};break;default:r=t={x:0,y:0}}return{start:r,end:t}}function je(i){var r,t;return i.isTransposed?(r={x:0,y:0},t={x:1,y:0}):(r={x:0,y:0},t={x:0,y:1}),{start:r,end:t}}function fr(i,r){var t={start:{x:0,y:0},end:{x:0,y:0}};i.isRect?t=er(r):i.isPolar&&(t=je(i));var e=t.start,n=t.end;return{start:i.convert(e),end:i.convert(n)}}function Sr(i,r){if(i.isRect)return i.isTransposed?[DIRECTION.RIGHT,DIRECTION.BOTTOM].includes(r)?1:-1:[DIRECTION.BOTTOM,DIRECTION.RIGHT].includes(r)?-1:1;if(i.isPolar){var t=i.x.start;return t<0?-1:1}return 1}function hr(i){var r=i.start,t=i.end;return r.x===t.x}function gr(i,r){var t=i.start,e=i.end,n=hr(i);return n?(t.y-e.y)*(r.x-t.x)>0?1:-1:(e.x-t.x)*(t.y-r.y)>0?-1:1}function vr(i,r){return(0,f.get)(i,["components","axis",r],{})}function Cr(i){var r=i.x,t=i.y,e=i.circleCenter,n=t.start>t.end,a=i.isTransposed?i.convert({x:n?0:1,y:0}):i.convert({x:0,y:n?0:1}),o=[a.x-e.x,a.y-e.y],s=[1,0],l=a.y>e.y?Ce.angle(o,s):Ce.angle(o,s)*-1,u=l+(r.end-r.start),h=Math.sqrt(Math.pow(a.x-e.x,2)+Math.pow(a.y-e.y,2));return{center:e,radius:h,startAngle:l,endAngle:u}}function or(i,r){return(0,f.isBoolean)(i)?i===!1?!1:{}:(0,f.get)(i,[r])}function Ir(i,r){return(0,f.get)(i,"position",r)}function Wr(i,r){return(0,f.get)(r,["title","text"],De(i))}var Nr=function(){function i(r,t){this.destroyed=!1,this.facets=[],this.view=r,this.cfg=(0,f.deepMix)({},this.getDefaultCfg(),t)}return i.prototype.init=function(){this.container||(this.container=this.createContainer());var r=this.view.getData();this.facets=this.generateFacets(r)},i.prototype.render=function(){this.renderViews()},i.prototype.update=function(){},i.prototype.clear=function(){this.clearFacetViews()},i.prototype.destroy=function(){this.clear(),this.container&&(this.container.remove(!0),this.container=void 0),this.destroyed=!0,this.view=void 0,this.facets=[]},i.prototype.facetToView=function(r){var t=r.region,e=r.data,n=r.padding,a=n===void 0?this.cfg.padding:n,o=this.view.createView({region:t,padding:a});o.data(e||[]),r.view=o,this.beforeEachView(o,r);var s=this.cfg.eachView;return s&&s(o,r),this.afterEachView(o,r),o},i.prototype.createContainer=function(){var r=this.view.getLayer(yt.FORE);return r.addGroup()},i.prototype.renderViews=function(){this.createFacetViews()},i.prototype.createFacetViews=function(){var r=this;return this.facets.map(function(t){return r.facetToView(t)})},i.prototype.clearFacetViews=function(){var r=this;(0,f.each)(this.facets,function(t){t.view&&(r.view.removeView(t.view),t.view=void 0)})},i.prototype.getFieldValues=function(r,t){var e=[],n={};return(0,f.each)(r,function(a){var o=a[t];!(0,f.isNil)(o)&&!n[o]&&(e.push(o),n[o]=!0)}),e},i.prototype.getRegion=function(r,t,e,n){var a=1/(t===0?1:t),o=1/(r===0?1:r),s={x:a*e,y:o*n},l={x:a*(e+1),y:o*(n+1)};return{start:s,end:l}},i.prototype.getDefaultCfg=function(){return{eachView:void 0,showTitle:!0,padding:10,fields:[]}},i.prototype.getDefaultTitleCfg=function(){var r=this.view.getTheme().fontFamily;return{style:{fontSize:14,fill:"#666",fontFamily:r}}},i.prototype.processAxis=function(r,t){var e=r.getOptions(),n=e.coordinate,a=r.geometries,o=(0,f.get)(n,"type","rect");if(o==="rect"&&a.length){(0,f.isNil)(e.axes)&&(e.axes={});var s=e.axes,l=a[0].getXYFields(),u=l[0],h=l[1],c=or(s,u),v=or(s,h);c!==!1&&(e.axes[u]=this.getXAxisOption(u,s,c,t)),v!==!1&&(e.axes[h]=this.getYAxisOption(h,s,v,t))}},i.prototype.getFacetDataFilter=function(r){return function(t){return(0,f.every)(r,function(e){var n=e.field,a=e.value;return!(0,f.isNil)(a)&&n?t[n]===a:!0})}},i}(),jr={},Qr=function(i){return jr[(0,f.lowerCase)(i)]},Zr=function(i,r){jr[(0,f.lowerCase)(i)]=r},Bn=function(){function i(r,t){this.context=r,this.cfg=t,r.addAction(this)}return i.prototype.applyCfg=function(r){(0,f.assign)(this,r)},i.prototype.init=function(){this.applyCfg(this.cfg)},i.prototype.destroy=function(){this.context.removeAction(this),this.context=null},i}(),hn=Bn,Hn=function(i){(0,j.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.execute=function(){this.callback&&this.callback(this.context)},r.prototype.destroy=function(){i.prototype.destroy.call(this),this.callback=null},r}(hn),yi=Hn,Jn={};function Ci(i,r){var t=Jn[i],e=null;if(t){var n=t.ActionClass,a=t.cfg;e=new n(r,a),e.name=i,e.init()}return e}function Mi(i){var r=Jn[i];return(0,f.get)(r,"ActionClass")}function Fr(i,r,t){Jn[i]={ActionClass:r,cfg:t}}function oi(i){delete Jn[i]}function Oi(i,r){var t=new yi(r);return t.callback=i,t.name="callback",t}function ci(i){if((0,f.isEmpty)(i))return null;var r=i[0].x,t=i[0].x,e=i[0].y,n=i[0].y;return(0,f.each)(i,function(a){r=r>a.x?a.x:r,t=t<a.x?a.x:t,e=e>a.y?a.y:e,n=n<a.y?a.y:n}),{minX:r,maxX:t,minY:e,maxY:n,centerX:(r+t)/2,centerY:(e+n)/2}}function Mn(i,r,t,e){return{x:i+t*Math.cos(e),y:r+t*Math.sin(e)}}function vi(i,r,t,e,n,a){a===void 0&&(a=0);var o=Mn(i,r,t,e),s=Mn(i,r,t,n),l=Mn(i,r,a,e),u=Mn(i,r,a,n);if(n-e==Math.PI*2){var h=Mn(i,r,t,e+Math.PI),c=Mn(i,r,a,e+Math.PI),v=[["M",o.x,o.y],["A",t,t,0,1,1,h.x,h.y],["A",t,t,0,1,1,s.x,s.y],["M",l.x,l.y]];return a&&(v.push(["A",a,a,0,1,0,c.x,c.y]),v.push(["A",a,a,0,1,0,u.x,u.y])),v.push(["M",o.x,o.y]),v.push(["Z"]),v}var x=n-e<=Math.PI?0:1,M=[["M",o.x,o.y],["A",t,t,0,x,1,s.x,s.y],["L",u.x,u.y]];return a&&M.push(["A",a,a,0,x,0,l.x,l.y]),M.push(["L",o.x,o.y]),M.push(["Z"]),M}function Xi(i,r,t,e,n){var a=Mn(i,r,t,e),o=Mn(i,r,t,n);if((0,f.isNumberEqual)(n-e,Math.PI*2)){var s=Mn(i,r,t,e+Math.PI);return[["M",a.x,a.y],["A",t,t,0,1,1,s.x,s.y],["A",t,t,0,1,1,a.x,a.y],["A",t,t,0,1,0,s.x,s.y],["A",t,t,0,1,0,a.x,a.y],["Z"]]}var l=n-e<=Math.PI?0:1;return[["M",a.x,a.y],["A",t,t,0,l,1,o.x,o.y]]}function Ii(i,r){var t=i.points,e=ci(t),n,a,o=r.startAngle,s=r.endAngle,l=s-o;return r.isTransposed?(n=e.maxY*l,a=e.minY*l):(n=e.maxX*l,a=e.minX*l),n+=o,a+=o,{startAngle:a,endAngle:n}}function si(i,r){if((0,f.isNumber)(i)&&(0,f.isNumber)(r))return[i,r];for(var t=-1,e=0,n=0,a,o=i.length-1,s,l=0;++t<i.length;)a=o,o=t,l+=s=i[a]*r[o]-i[o]*r[a],e+=(i[a]+i[o])*s,n+=(r[a]+r[o])*s;return l*=3,[e/l,n/l]}function Zn(i,r){var t=i.attr(),e=r.attr();return(0,f.each)(t,function(n,a){e[a]===void 0&&(e[a]=void 0)}),e}function Vi(i,r,t){var e=Math.min(r,t),n=Math.max(r,t);return i>=e&&i<=n}function ua(i,r,t){if((0,f.isString)(i))return i.padEnd(r,t);if((0,f.isArray)(i)){var e=i.length;if(e<r)for(var n=r-e,a=0;a<n;a++)i.push(t)}return i}function Ft(i,r){return r.forEach(function(t){delete i[t]}),i}function At(i,r,t){r===void 0&&(r=[]),t===void 0&&(t={});for(var e=0,n=i;e<n.length;e++){var a=n[e];t[a]||(r.push(a),t[a]=!0)}return r}function ht(i){if(i.isPolar&&!i.isTransposed)return(i.endAngle-i.startAngle)*i.getRadius();var r=i.convert({x:0,y:0}),t=i.convert({x:1,y:0});return Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))}function wt(i){if(i.isPolar){var r=i.startAngle,t=i.endAngle;return t-r==Math.PI*2}return!1}function Xt(i,r){var t=i.getCenter();return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))}function it(i,r){var t=!1;if(i)if(i.type==="theta"){var e=i.start,n=i.end;t=Vi(r.x,e.x,n.x)&&Vi(r.y,e.y,n.y)}else{var a=i.invert(r);t=Vi(a.x,0,1)&&Vi(a.y,0,1)}return t}function mt(i,r){var t=i.getCenter();return Math.atan2(r.y-t.y,r.x-t.x)}function St(i,r){r===void 0&&(r=0);var t=i.start,e=i.end,n=i.getWidth(),a=i.getHeight();if(i.isPolar){var o=i.startAngle,s=i.endAngle,l=i.getCenter(),u=i.getRadius();return{type:"path",startState:{path:vi(l.x,l.y,u+r,o,o)},endState:function(c){var v=(s-o)*c+o,x=vi(l.x,l.y,u+r,o,v);return{path:x}},attrs:{path:vi(l.x,l.y,u+r,o,s)}}}var h;return i.isTransposed?h={height:a+r*2}:h={width:n+r*2},{type:"rect",startState:{x:t.x-r,y:e.y-r,width:i.isTransposed?n+r*2:0,height:i.isTransposed?0:a+r*2},endState:h,attrs:{x:t.x-r,y:e.y-r,width:n+r*2,height:a+r*2}}}function Pt(i,r){var t=[];if(i.length){t.push(["M",i[0].x,i[0].y]);for(var e=1,n=i.length;e<n;e+=1){var a=i[e];t.push(["L",a.x,a.y])}r&&t.push(["Z"])}return t}function Wt(i,r){for(var t=[i[0]],e=1,n=i.length;e<n;e=e+2){var a=r.convert({x:i[e],y:i[e+1]});t.push(a.x,a.y)}return t}function Jt(i,r,t){var e=t.isTransposed,n=t.startAngle,a=t.endAngle,o={x:i[1],y:i[2]},s={x:r[1],y:r[2]},l=[],u=e?"y":"x",h=Math.abs(s[u]-o[u])*(a-n),c=s[u]>=o[u]?1:0,v=h>Math.PI?1:0,x=t.convert(s),M=Xt(t,x);if(M>=.5)if(h===Math.PI*2){var k={x:(s.x+o.x)/2,y:(s.y+o.y)/2},R=t.convert(k);l.push(["A",M,M,0,v,c,R.x,R.y]),l.push(["A",M,M,0,v,c,x.x,x.y])}else l.push(["A",M,M,0,v,c,x.x,x.y]);return l}function de(i){(0,f.each)(i,function(r,t){var e=r;if(e[0].toLowerCase()==="a"){var n=i[t-1],a=i[t+1];a&&a[0].toLowerCase()==="a"?n&&n[0].toLowerCase()==="l"&&(n[0]="M"):n&&n[0].toLowerCase()==="a"&&a&&a[0].toLowerCase()==="l"&&(a[0]="M")}})}var Ee=function(i,r,t,e){var n=[],a,o,s=!!e,l,u;if(s){l=[Infinity,Infinity],u=[-Infinity,-Infinity];for(var h=0,c=i.length;h<c;h++){var v=i[h];l=Ce.min([0,0],l,v),u=Ce.max([0,0],u,v)}l=Ce.min([0,0],l,e[0]),u=Ce.max([0,0],u,e[1])}for(var h=0,x=i.length;h<x;h++){var v=i[h];if(t)a=i[h?h-1:x-1],o=i[(h+1)%x];else if(h===0||h===x-1){n.push(v);continue}else a=i[h-1],o=i[h+1];var M=[0,0];M=Ce.sub(M,o,a),M=Ce.scale(M,M,r);var k=Ce.distance(v,a),R=Ce.distance(v,o),G=k+R;G!==0&&(k/=G,R/=G);var N=Ce.scale([0,0],M,-k),ot=Ce.scale([0,0],M,R),ut=Ce.add([0,0],v,N),Mt=Ce.add([0,0],v,ot);s&&(ut=Ce.max([0,0],ut,l),ut=Ce.min([0,0],ut,u),Mt=Ce.max([0,0],Mt,l),Mt=Ce.min([0,0],Mt,u)),n.push(ut),n.push(Mt)}return t&&n.push(n.shift()),n};function Fe(i,r,t){for(var e=!!r,n=[],a=0,o=i.length;a<o;a+=2)n.push([i[a],i[a+1]]);for(var s=Ee(n,.4,e,t),l=n.length,u=[],h,c,v,a=0;a<l-1;a++)h=s[a*2],c=s[a*2+1],v=n[a+1],u.push(["C",h[0],h[1],c[0],c[1],v[0],v[1]]);return e&&(h=s[l],c=s[l+1],v=n[0],u.push(["C",h[0],h[1],c[0],c[1],v[0],v[1]])),u}function me(i,r){return Pt(i,r)}function Xe(i,r,t){var e=[],n=i[0],a=null;if(i.length<=2)return me(i,r);for(var o=0,s=i.length;o<s;o++){var l=i[o];(!a||!(a.x===l.x&&a.y===l.y))&&(e.push(l.x),e.push(l.y),a=l)}var u=t||[[0,0],[1,1]],h=Fe(e,r,u);return h.unshift(["M",n.x,n.y]),h}function dr(i,r){var t=[];return(0,f.each)(r,function(e){var n=e[0];switch(n.toLowerCase()){case"m":case"l":case"c":t.push(Wt(e,i));break;case"z":default:t.push(e);break}}),t}function mr(i,r){var t=[],e,n,a,o;return(0,f.each)(r,function(s,l){var u=s[0];switch(u.toLowerCase()){case"m":case"c":case"q":t.push(Wt(s,i));break;case"l":e=r[l-1],n=s,a=i.isTransposed,o=a?e[e.length-2]===n[1]:e[e.length-1]===n[2],o?t=t.concat(Jt(e,n,i)):t.push(Wt(s,i));break;case"z":default:t.push(s);break}}),de(t),t}var Ar=function(){function i(r,t,e,n){r===void 0&&(r=0),t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=0),this.x=r,this.y=t,this.height=n,this.width=e}return i.fromRange=function(r,t,e,n){return new i(r,t,e-r,n-t)},Object.defineProperty(i.prototype,"minX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxX",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minY",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxY",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tl",{get:function(){return{x:this.x,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tr",{get:function(){return{x:this.maxX,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bl",{get:function(){return{x:this.x,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"br",{get:function(){return{x:this.maxX,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"top",{get:function(){return{x:this.x+this.width/2,y:this.minY}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"right",{get:function(){return{x:this.maxX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bottom",{get:function(){return{x:this.x+this.width/2,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"left",{get:function(){return{x:this.minX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),i.prototype.isEqual=function(r){return this.x===r.x&&this.y===r.y&&this.width===r.width&&this.height===r.height},i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height)},i.prototype.add=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=this.clone();return(0,f.each)(r,function(n){e.x=Math.min(n.x,e.x),e.y=Math.min(n.y,e.y),e.width=Math.max(n.maxX,e.maxX)-e.x,e.height=Math.max(n.maxY,e.maxY)-e.y}),e},i.prototype.merge=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=this.clone();return(0,f.each)(r,function(n){e.x=Math.max(n.x,e.x),e.y=Math.max(n.y,e.y),e.width=Math.min(n.maxX,e.maxX)-e.x,e.height=Math.min(n.maxY,e.maxY)-e.y}),e},i.prototype.cut=function(r,t){var e=r.width,n=r.height;switch(t){case _t.TOP:case _t.TOP_LEFT:case _t.TOP_RIGHT:return i.fromRange(this.minX,this.minY+n,this.maxX,this.maxY);case _t.RIGHT:case _t.RIGHT_TOP:case _t.RIGHT_BOTTOM:return i.fromRange(this.minX,this.minY,this.maxX-e,this.maxY);case _t.BOTTOM:case _t.BOTTOM_LEFT:case _t.BOTTOM_RIGHT:return i.fromRange(this.minX,this.minY,this.maxX,this.maxY-n);case _t.LEFT:case _t.LEFT_TOP:case _t.LEFT_BOTTOM:return i.fromRange(this.minX+e,this.minY,this.maxX,this.maxY);default:return this}},i.prototype.shrink=function(r){var t=r[0],e=r[1],n=r[2],a=r[3];return new i(this.x+a,this.y+t,this.width-a-e,this.height-t-n)},i.prototype.exceed=function(r){return[Math.max(-this.minY+r.minY,0),Math.max(this.maxX-r.maxX,0),Math.max(this.maxY-r.maxY,0),Math.max(-this.minX+r.minX,0)]},i.prototype.size=function(){return this.width*this.height},i}(),sr=function(i,r){var t=r.start,e=r.end;return new Ar(i.x+i.width*t.x,i.y+i.height*t.y,i.width*Math.abs(e.x-t.x),i.height*Math.abs(e.y-t.y))};function nr(i){return[[i.minX,i.minY],[i.maxX,i.minY],[i.maxX,i.maxY],[i.minX,i.maxY]]}var Gr=p(70146);function gn(i,r){var t=i.event,e=t.target,n=e.getCanvasBBox();return n.width>=r||n.height>=r?n:null}function vn(i,r){var t=i.event,e=t.target,n=e.getCanvasBBox();return n.width>=r||n.height>=r?e.attr("path"):null}function Ln(i){var r=i.event,t,e=r.target;return e&&(t=e.get("element")),t}function qn(i){var r=i.event,t=r.target,e;return t&&(e=t.get("delegateObject")),e}function ki(i){var r=i.event.gEvent;return!(r&&r.fromShape&&r.toShape&&r.fromShape.get("element")===r.toShape.get("element"))}function li(i){return i&&i.component&&i.component.isList()}function Wn(i){return i&&i.component&&i.component.isSlider()}function ti(i){var r=i.event,t=r.target;return t&&t.get("name")==="mask"}function ei(i,r){var t=i.event.target;if(t.get("type")==="path"){var e=vn(i,r);return e?fa(i.view,e):void 0}var n=gn(i,r);return n?mi(i.view,n):null}function Bi(i,r,t){var e=gn(i,t);if(!e)return null;var n=i.view,a=Wi(n,r,{x:e.x,y:e.y}),o=Wi(n,r,{x:e.maxX,y:e.maxY}),s={minX:a.x,minY:a.y,maxX:o.x,maxY:o.y};return mi(r,s)}function cn(i){var r=i.geometries,t=[];return(0,f.each)(r,function(e){var n=e.elements;t=t.concat(n)}),i.views&&i.views.length&&(0,f.each)(i.views,function(e){t=t.concat(cn(e))}),t}function Hi(i,r,t){var e=cn(i);return e.filter(function(n){return ui(n,r)===t})}function ta(i,r){var t=i.geometries,e=[];return(0,f.each)(t,function(n){var a=n.getElementsBy(function(o){return o.hasState(r)});e=e.concat(a)}),e}function ui(i,r){var t=i.getModel(),e=t.data,n;return(0,f.isArray)(e)?n=e[0][r]:n=e[r],n}function pa(i,r){return!(r.minX>i.maxX||r.maxX<i.minX||r.minY>i.maxY||r.maxY<i.minY)}function mi(i,r){var t=cn(i),e=[];return(0,f.each)(t,function(n){var a=n.shape,o=a.getCanvasBBox();pa(r,o)&&e.push(n)}),e}function ea(i){var r=[];return(0,f.each)(i,function(t){var e=t[0];if(e!=="A")for(var n=1;n<t.length;n=n+2)r.push([t[n],t[n+1]]);else{var a=t.length;r.push([t[a-2],t[a-1]])}}),r}function fa(i,r){var t=cn(i),e=ea(r),n=t.filter(function(a){var o=a.shape,s;if(o.get("type")==="path")s=ea(o.attr("path"));else{var l=o.getCanvasBBox();s=nr(l)}return(0,Gr.default)(e,s)});return n}function ha(i){return i.getComponents().map(function(r){return r.component})}function Kn(i,r){var t=r.x-i.x,e=r.y-i.y;return Math.sqrt(t*t+e*e)}function ga(i,r){if(i.length<=2)return me(i,!1);var t=i[0],e=[];(0,f.each)(i,function(a){e.push(a.x),e.push(a.y)});var n=Fe(e,r,null);return n.unshift(["M",t.x,t.y]),n}function Di(i,r){return i.x<=r.x&&i.maxX>=r.x&&i.y<=r.y&&i.maxY>r.y}function xi(i){var r=i.parent,t=null;return r&&(t=r.views.filter(function(e){return e!==i})),t}function xa(i,r){var t=i.getCoordinate();return t.invert(r)}function Wi(i,r,t){var e=xa(i,t);return r.getCoordinate().convert(e)}function Ra(i,r,t,e){var n=!1;return(0,f.each)(i,function(a){if(a[t]===r[t]&&a[e]===r[e])return n=!0,!1}),n}function ba(i,r){var t=i.getScaleByField(r);return!t&&i.views&&(0,f.each)(i.views,function(e){if(t=ba(e,r),t)return!1}),t}var So=function(){function i(r){this.actions=[],this.event=null,this.cacheMap={},this.view=r}return i.prototype.cache=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(r.length===1)return this.cacheMap[r[0]];r.length===2&&(this.cacheMap[r[0]]=r[1])},i.prototype.getAction=function(r){return this.actions.find(function(t){return t.name===r})},i.prototype.addAction=function(r){this.actions.push(r)},i.prototype.removeAction=function(r){var t=this.actions,e=this.actions.indexOf(r);e>=0&&t.splice(e,1)},i.prototype.getCurrentPoint=function(){var r=this.event;if(r)if(r.target instanceof HTMLElement){var t=this.view.getCanvas(),e=t.getPointByClient(r.clientX,r.clientY);return e}else return{x:r.x,y:r.y};return null},i.prototype.getCurrentShape=function(){return(0,f.get)(this.event,["gEvent","shape"])},i.prototype.isInPlot=function(){var r=this.getCurrentPoint();return r?this.view.isPointInPlot(r):!1},i.prototype.isInShape=function(r){var t=this.getCurrentShape();return t?t.get("name")===r:!1},i.prototype.isInComponent=function(r){var t=ha(this.view),e=this.getCurrentPoint();return e?!!t.find(function(n){var a=n.getBBox();return r?n.get("name")===r&&Di(a,e):Di(a,e)}):!1},i.prototype.destroy=function(){this.view=null,this.event=null,(0,f.each)(this.actions.slice(),function(r){r.destroy()}),this.actions=null,this.cacheMap=null},i}(),oo=So,xt=function(){function i(r,t){this.view=r,this.cfg=t}return i.prototype.init=function(){this.initEvents()},i.prototype.initEvents=function(){},i.prototype.clearEvents=function(){},i.prototype.destroy=function(){this.clearEvents()},i}(),et=xt;function W(i,r){var t=i.split(":"),e=t[0],n=r.getAction(e)||Ci(e,r);if(!n)throw new Error("There is no action named "+e);var a=t[1];return{action:n,methodName:a}}function J(i){var r=i.action,t=i.methodName;if(r[t])r[t]();else throw new Error("Action("+r.name+") doesn't have a method called "+t)}var Tt={START:"start",SHOW_ENABLE:"showEnable",END:"end",ROLLBACK:"rollback",PROCESSING:"processing"},Dt=function(i){(0,j.__extends)(r,i);function r(t,e){var n=i.call(this,t,e)||this;return n.callbackCaches={},n.emitCaches={},n.steps=e,n}return r.prototype.init=function(){this.initContext(),i.prototype.init.call(this)},r.prototype.destroy=function(){i.prototype.destroy.call(this),this.steps=null,this.context&&(this.context.destroy(),this.context=null),this.callbackCaches=null,this.view=null},r.prototype.initEvents=function(){var t=this;(0,f.each)(this.steps,function(e,n){(0,f.each)(e,function(a){var o=t.getActionCallback(n,a);o&&t.bindEvent(a.trigger,o)})})},r.prototype.clearEvents=function(){var t=this;(0,f.each)(this.steps,function(e,n){(0,f.each)(e,function(a){var o=t.getActionCallback(n,a);o&&t.offEvent(a.trigger,o)})})},r.prototype.initContext=function(){var t=this.view,e=new oo(t);this.context=e;var n=this.steps;(0,f.each)(n,function(a){(0,f.each)(a,function(o){if((0,f.isFunction)(o.action))o.actionObject={action:Oi(o.action,e),methodName:"execute"};else if((0,f.isString)(o.action))o.actionObject=W(o.action,e);else if((0,f.isArray)(o.action)){var s=o.action;o.actionObject=[],(0,f.each)(s,function(l){o.actionObject.push(W(l,e))})}})})},r.prototype.isAllowStep=function(t){var e=this.currentStepName,n=this.steps;if(e===t||t===Tt.SHOW_ENABLE)return!0;if(t===Tt.PROCESSING)return e===Tt.START;if(t===Tt.START)return e!==Tt.PROCESSING;if(t===Tt.END)return e===Tt.PROCESSING||e===Tt.START;if(t===Tt.ROLLBACK){if(n[Tt.END])return e===Tt.END;if(e===Tt.START)return!0}return!1},r.prototype.isAllowExcute=function(t,e){if(this.isAllowStep(t)){var n=this.getKey(t,e);return e.once&&this.emitCaches[n]?!1:e.isEnable?e.isEnable(this.context):!0}return!1},r.prototype.enterStep=function(t){this.currentStepName=t,this.emitCaches={}},r.prototype.afterExecute=function(t,e){t!==Tt.SHOW_ENABLE&&this.currentStepName!==t&&this.enterStep(t);var n=this.getKey(t,e);this.emitCaches[n]=!0},r.prototype.getKey=function(t,e){return t+e.trigger+e.action},r.prototype.getActionCallback=function(t,e){var n=this,a=this.context,o=this.callbackCaches,s=e.actionObject;if(e.action&&s){var l=this.getKey(t,e);if(!o[l]){var u=function(h){a.event=h,n.isAllowExcute(t,e)?((0,f.isArray)(s)?(0,f.each)(s,function(c){a.event=h,J(c)}):(a.event=h,J(s)),n.afterExecute(t,e),e.callback&&(a.event=h,e.callback(a))):a.event=null};e.debounce?o[l]=(0,f.debounce)(u,e.debounce.wait,e.debounce.immediate):e.throttle?o[l]=(0,f.throttle)(u,e.throttle.wait,{leading:e.throttle.leading,trailing:e.throttle.trailing}):o[l]=u}return o[l]}return null},r.prototype.bindEvent=function(t,e){var n=t.split(":");n[0]==="window"?window.addEventListener(n[1],e):n[0]==="document"?document.addEventListener(n[1],e):this.view.on(t,e)},r.prototype.offEvent=function(t,e){var n=t.split(":");n[0]==="window"?window.removeEventListener(n[1],e):n[0]==="document"?document.removeEventListener(n[1],e):this.view.off(t,e)},r}(et),ie=Dt,fe={};function he(i){return fe[(0,f.lowerCase)(i)]}function Se(i,r){fe[(0,f.lowerCase)(i)]=r}function ke(i,r,t){var e=he(i);if(!e)return null;if((0,f.isPlainObject)(e)){var n=(0,f.mix)((0,f.clone)(e),t);return new ie(r,n)}else{var a=e;return new a(r,t)}}var Be=p(7755),Ve=p(31506);function ar(i){var r,t={point:{default:{fill:i.pointFillColor,r:i.pointSize,stroke:i.pointBorderColor,lineWidth:i.pointBorder,fillOpacity:i.pointFillOpacity},active:{stroke:i.pointActiveBorderColor,lineWidth:i.pointActiveBorder},selected:{stroke:i.pointSelectedBorderColor,lineWidth:i.pointSelectedBorder},inactive:{fillOpacity:i.pointInactiveFillOpacity,strokeOpacity:i.pointInactiveBorderOpacity}},hollowPoint:{default:{fill:i.hollowPointFillColor,lineWidth:i.hollowPointBorder,stroke:i.hollowPointBorderColor,strokeOpacity:i.hollowPointBorderOpacity,r:i.hollowPointSize},active:{stroke:i.hollowPointActiveBorderColor,strokeOpacity:i.hollowPointActiveBorderOpacity},selected:{lineWidth:i.hollowPointSelectedBorder,stroke:i.hollowPointSelectedBorderColor,strokeOpacity:i.hollowPointSelectedBorderOpacity},inactive:{strokeOpacity:i.hollowPointInactiveBorderOpacity}},area:{default:{fill:i.areaFillColor,fillOpacity:i.areaFillOpacity,stroke:null},active:{fillOpacity:i.areaActiveFillOpacity},selected:{fillOpacity:i.areaSelectedFillOpacity},inactive:{fillOpacity:i.areaInactiveFillOpacity}},hollowArea:{default:{fill:null,stroke:i.hollowAreaBorderColor,lineWidth:i.hollowAreaBorder,strokeOpacity:i.hollowAreaBorderOpacity},active:{fill:null,lineWidth:i.hollowAreaActiveBorder},selected:{fill:null,lineWidth:i.hollowAreaSelectedBorder},inactive:{strokeOpacity:i.hollowAreaInactiveBorderOpacity}},interval:{default:{fill:i.intervalFillColor,fillOpacity:i.intervalFillOpacity},active:{stroke:i.intervalActiveBorderColor,lineWidth:i.intervalActiveBorder},selected:{stroke:i.intervalSelectedBorderColor,lineWidth:i.intervalSelectedBorder},inactive:{fillOpacity:i.intervalInactiveFillOpacity,strokeOpacity:i.intervalInactiveBorderOpacity}},hollowInterval:{default:{fill:i.hollowIntervalFillColor,stroke:i.hollowIntervalBorderColor,lineWidth:i.hollowIntervalBorder,strokeOpacity:i.hollowIntervalBorderOpacity},active:{stroke:i.hollowIntervalActiveBorderColor,lineWidth:i.hollowIntervalActiveBorder,strokeOpacity:i.hollowIntervalActiveBorderOpacity},selected:{stroke:i.hollowIntervalSelectedBorderColor,lineWidth:i.hollowIntervalSelectedBorder,strokeOpacity:i.hollowIntervalSelectedBorderOpacity},inactive:{stroke:i.hollowIntervalInactiveBorderColor,lineWidth:i.hollowIntervalInactiveBorder,strokeOpacity:i.hollowIntervalInactiveBorderOpacity}},line:{default:{stroke:i.lineBorderColor,lineWidth:i.lineBorder,strokeOpacity:i.lineBorderOpacity,fill:null,lineAppendWidth:10},active:{lineWidth:i.lineActiveBorder},selected:{lineWidth:i.lineSelectedBorder},inactive:{strokeOpacity:i.lineInactiveBorderOpacity}}},e={title:{autoRotate:!0,position:"center",style:{fill:i.axisTitleTextFillColor,fontSize:i.axisTitleTextFontSize,lineHeight:i.axisTitleTextLineHeight,textBaseline:"middle",fontFamily:i.fontFamily}},label:{autoRotate:!0,autoEllipsis:!0,autoHide:!0,offset:16,style:{fill:i.axisLabelFillColor,fontSize:i.axisLabelFontSize,lineHeight:i.axisLabelLineHeight,textBaseline:"middle",fontFamily:i.fontFamily}},line:{style:{lineWidth:i.axisLineBorder,stroke:i.axisLineBorderColor}},tickLine:{style:{lineWidth:i.axisTickLineBorder,stroke:i.axisTickLineBorderColor},alignTick:!0,length:i.axisTickLineLength},subTickLine:null,animate:!0},n={line:{type:"line",style:{stroke:i.axisGridBorderColor,lineWidth:i.axisGridBorder,lineDash:i.axisGridLineDash}},alignTick:!0,animate:!0},a={title:null,marker:{symbol:"circle",style:{r:i.legendCircleMarkerSize,fill:i.legendMarkerColor}},itemName:{spacing:5,style:{fill:i.legendItemNameFillColor,fontFamily:i.fontFamily,fontSize:i.legendItemNameFontSize,lineHeight:i.legendItemNameLineHeight,fontWeight:i.legendItemNameFontWeight,textAlign:"start",textBaseline:"middle"}},flipPage:!0,animate:!1,maxItemWidth:.2};return{background:i.backgroundColor,defaultColor:i.brandColor,padding:"auto",fontFamily:i.fontFamily,columnWidthRatio:1/2,maxColumnWidth:null,minColumnWidth:null,roseWidthRatio:.9999999,multiplePieWidthRatio:1/1.3,colors10:i.paletteQualitative10,colors20:i.paletteQualitative20,shapes:{point:["hollow-circle","hollow-square","hollow-bowtie","hollow-diamond","hollow-hexagon","hollow-triangle","hollow-triangle-down","circle","square","bowtie","diamond","hexagon","triangle","triangle-down","cross","tick","plus","hyphen","line"],line:["line","dash","dot","smooth"],area:["area","smooth","line","smooth-line"],interval:["rect","hollow-rect","line","tick"]},sizes:[1,10],geometries:{interval:{rect:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:function(o){var s=o.geometry.coordinate;if(s.isPolar&&s.isTransposed){var l=Ii(o.getModel(),s),u=l.startAngle,h=l.endAngle,c=(u+h)/2,v=7.5,x=v*Math.cos(c),M=v*Math.sin(c);return{matrix:Ve.transform(null,[["t",x,M]])}}return t.interval.selected}}},"hollow-rect":{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},line:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},tick:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},funnel:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}},pyramid:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}}},line:{line:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},dot:{default:{style:(0,j.__assign)((0,j.__assign)({},t.line.default),{lineDash:[1,1]})},active:{style:(0,j.__assign)((0,j.__assign)({},t.line.active),{lineDash:[1,1]})},inactive:{style:(0,j.__assign)((0,j.__assign)({},t.line.inactive),{lineDash:[1,1]})},selected:{style:(0,j.__assign)((0,j.__assign)({},t.line.selected),{lineDash:[1,1]})}},dash:{default:{style:(0,j.__assign)((0,j.__assign)({},t.line.default),{lineDash:[5.5,1]})},active:{style:(0,j.__assign)((0,j.__assign)({},t.line.active),{lineDash:[5.5,1]})},inactive:{style:(0,j.__assign)((0,j.__assign)({},t.line.inactive),{lineDash:[5.5,1]})},selected:{style:(0,j.__assign)((0,j.__assign)({},t.line.selected),{lineDash:[5.5,1]})}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vh:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hvh:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vhv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}}},polygon:{polygon:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}}},point:{circle:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},square:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},bowtie:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},diamond:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},hexagon:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},triangle:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},"triangle-down":{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},"hollow-circle":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-square":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-bowtie":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-diamond":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-hexagon":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-triangle":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-triangle-down":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},cross:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},tick:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},plus:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},hyphen:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},line:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}}},area:{area:{default:{style:t.area.default},active:{style:t.area.active},inactive:{style:t.area.inactive},selected:{style:t.area.selected}},smooth:{default:{style:t.area.default},active:{style:t.area.active},inactive:{style:t.area.inactive},selected:{style:t.area.selected}},line:{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}},"smooth-line":{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}}},schema:{candle:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},box:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}}},edge:{line:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vhv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},arc:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}}}},components:{axis:{top:(0,f.deepMix)({},e,{position:"top",grid:null,title:null,verticalLimitLength:1/2}),bottom:(0,f.deepMix)({},e,{position:"bottom",grid:null,title:null,verticalLimitLength:1/2}),left:(0,f.deepMix)({},e,{position:"left",label:{offset:8},title:null,line:null,tickLine:null,grid:n,verticalLimitLength:1/3}),right:(0,f.deepMix)({},e,{position:"right",label:{offset:8},title:null,line:null,tickLine:null,grid:n,verticalLimitLength:1/3}),circle:(0,f.deepMix)({},e,{title:null,label:{offset:8},grid:(0,f.deepMix)({},n,{line:{type:"line"}})}),radius:(0,f.deepMix)({},e,{title:null,label:{offset:8},grid:(0,f.deepMix)({},n,{line:{type:"circle"}})})},legend:{right:(0,f.deepMix)({},a,{layout:"vertical"}),left:(0,f.deepMix)({},a,{layout:"vertical"}),top:(0,f.deepMix)({},a,{layout:"horizontal"}),bottom:(0,f.deepMix)({},a,{layout:"horizontal"}),continuous:{title:null,background:null,track:{},rail:{type:"color",size:i.sliderRailHeight,defaultLength:i.sliderRailWidth,style:{fill:i.sliderRailFillColor,stroke:i.sliderRailBorderColor,lineWidth:i.sliderRailBorder}},label:{align:"rail",spacing:4,formatter:null,style:{fill:i.sliderLabelTextFillColor,fontSize:i.sliderLabelTextFontSize,lineHeight:i.sliderLabelTextLineHeight,textBaseline:"middle",fontFamily:i.fontFamily}},handler:{size:i.sliderHandlerWidth,style:{fill:i.sliderHandlerFillColor,stroke:i.sliderHandlerBorderColor}},slidable:!0},margin:[0,0,0,0]},tooltip:{showContent:!0,follow:!0,showCrosshairs:!1,showMarkers:!0,shared:!1,enterable:!1,position:"auto",marker:{symbol:"circle",stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffSetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,r:4},crosshairs:{line:{style:{stroke:i.tooltipCrosshairsBorderColor,lineWidth:i.tooltipCrosshairsBorder}},text:null,textBackground:{padding:2,style:{fill:"rgba(0, 0, 0, 0.25)",lineWidth:0,stroke:null}},follow:!1},domStyles:(r={},r[""+Be.CONTAINER_CLASS]={position:"absolute",visibility:"hidden",zIndex:8,transition:"left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s",backgroundColor:i.tooltipContainerFillColor,opacity:i.tooltipContainerFillOpacity,boxShadow:i.tooltipContainerShadow,borderRadius:i.tooltipContainerBorderRadius+"px",color:i.tooltipTextFillColor,fontSize:i.tooltipTextFontSize+"px",fontFamily:i.fontFamily,lineHeight:i.tooltipTextLineHeight+"px",padding:"0 12px 0 12px"},r[""+Be.TITLE_CLASS]={marginBottom:"12px",marginTop:"12px"},r[""+Be.LIST_CLASS]={margin:0,listStyleType:"none",padding:0},r[""+Be.LIST_ITEM_CLASS]={listStyleType:"none",padding:0,marginBottom:"12px",marginTop:"12px",marginLeft:0,marginRight:0},r[""+Be.MARKER_CLASS]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},r[""+Be.VALUE_CLASS]={display:"inline-block",float:"right",marginLeft:"30px"},r)},annotation:{arc:{style:{stroke:i.annotationArcBorderColor,lineWidth:i.annotationArcBorder},animate:!0},line:{style:{stroke:i.annotationLineBorderColor,lineDash:i.annotationLineDash,lineWidth:i.annotationLineBorder},text:{position:"start",autoRotate:!0,style:{fill:i.annotationTextFillColor,stroke:i.annotationTextBorderColor,lineWidth:i.annotationTextBorder,fontSize:i.annotationTextFontSize,textAlign:"start",fontFamily:i.fontFamily,textBaseline:"bottom"}},animate:!0},text:{style:{fill:i.annotationTextFillColor,stroke:i.annotationTextBorderColor,lineWidth:i.annotationTextBorder,fontSize:i.annotationTextFontSize,textBaseline:"middle",textAlign:"start",fontFamily:i.fontFamily},animate:!0},region:{top:!1,style:{lineWidth:i.annotationRegionBorder,stroke:i.annotationRegionBorderColor,fill:i.annotationRegionFillColor,fillOpacity:i.annotationRegionFillOpacity},animate:!0},image:{top:!1,animate:!0},dataMarker:{top:!0,point:{style:{r:3,stroke:i.brandColor,lineWidth:2}},line:{style:{stroke:i.annotationLineBorderColor,lineWidth:i.annotationLineBorder},length:i.annotationDataMarkerLineLength},text:{style:{textAlign:"start",fill:i.annotationTextFillColor,stroke:i.annotationTextBorderColor,lineWidth:i.annotationTextBorder,fontSize:i.annotationTextFontSize,fontFamily:i.fontFamily}},direction:"upward",autoAdjust:!0,animate:!0},dataRegion:{style:{region:{fill:i.annotationRegionFillColor,fillOpacity:i.annotationRegionFillOpacity},text:{textAlign:"center",textBaseline:"bottom",fill:i.annotationTextFillColor,stroke:i.annotationTextBorderColor,lineWidth:i.annotationTextBorder,fontSize:i.annotationTextFontSize,fontFamily:i.fontFamily}},animate:!0}}},labels:{offset:12,style:{fill:i.labelFillColor,fontSize:i.labelFontSize,fontFamily:i.fontFamily,stroke:i.labelBorderColor,lineWidth:i.labelBorder},autoRotate:!0},innerLabels:{style:{fill:i.innerLabelFillColor,fontSize:i.innerLabelFontSize,fontFamily:i.fontFamily,stroke:i.innerLabelBorderColor,lineWidth:i.innerLabelBorder},autoRotate:!0},pieLabels:{labelHeight:14,offset:30,labelLine:{style:{lineWidth:i.labelLineBorder}},autoRotate:!0}}}var Re={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},Tr={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},Yt=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],ft=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],F={backgroundColor:"transparent",brandColor:Yt[0],paletteQualitative10:Yt,paletteQualitative20:ft,paletteSemanticRed:"#F4664A",paletteSemanticGreen:"#30BF78",paletteSemanticYellow:"#FAAD14",fontFamily:`"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,
  "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
  "Noto Color Emoji"`,axisLineBorderColor:Re[25],axisLineBorder:.5,axisLineDash:null,axisTitleTextFillColor:Re[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTickLineBorderColor:Re[25],axisTickLineLength:4,axisTickLineBorder:.5,axisSubTickLineBorderColor:Re[15],axisSubTickLineLength:2,axisSubTickLineBorder:.5,axisLabelFillColor:Re[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisGridBorderColor:Re[15],axisGridBorder:.5,axisGridLineDash:null,legendTitleTextFillColor:Re[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:Yt[0],legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:Re[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",sliderRailFillColor:Re[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:Re[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:Re[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:Re[25],annotationArcBorderColor:Re[15],annotationArcBorder:.5,annotationLineBorderColor:Re[25],annotationLineBorder:.5,annotationLineDash:null,annotationTextFillColor:Re[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:Tr[95],annotationTextBorder:1.5,annotationRegionFillColor:Re[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:Re[25],tooltipCrosshairsBorder:.5,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"rgb(255, 255, 255)",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 0px 10px #aeaeae",tooltipContainerBorderRadius:3,tooltipTextFillColor:Re[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:Re[65],labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:Tr[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,labelLineBorder:.5,labelLineBorderColor:Re[25],pointFillColor:Yt[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:Tr[100],pointBorderOpacity:1,pointActiveBorderColor:Re[100],pointSelectedBorder:2,pointSelectedBorderColor:Re[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:Yt[0],hollowPointBorderOpacity:.95,hollowPointFillColor:Tr[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:Re[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:Re[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:Yt[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:Yt[0],areaFillOpacity:.25,areaActiveFillColor:Yt[0],areaActiveFillOpacity:.5,areaSelectedFillColor:Yt[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:Yt[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:Re[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:Re[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:Yt[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:Re[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:Re[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:Yt[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:Tr[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:Re[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:Re[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3},X=ar(F),U={default:X};function gt(i){return(0,f.get)(U,(0,f.lowerCase)(i),U.default)}function kt(i,r){U[(0,f.lowerCase)(i)]=(0,f.deepMix)({},U.default,r)}function Ht(i,r,t){var e=t.translate(i),n=t.translate(r);return(0,f.isNumberEqual)(e,n)}function se(i,r){var t=r.coordinate,e=r.getXScale(),n=e.range,a=n[n.length-1],o=n[0],s=t.invert(i),l=s.x;return t.isPolar&&l>(1+a)/2&&(l=o),e.translate(e.invert(l))}function ce(i,r,t){var e=t.coordinate,n=t.getYScale(),a=n.field,o=e.invert(r),s=n.invert(o.y),l=(0,f.find)(i,function(u){var h=u[Lt];return h[a][0]<=s&&h[a][1]>=s});return l||i[i.length-1]}var Me=(0,f.memoize)(function(i){if(i.isCategory)return 1;for(var r=i.values,t=r.length,e=i.translate(r[0]),n=e,a=0;a<t;a++){var o=r[a],s=i.translate(o);s<e&&(e=s),s>n&&(n=s)}return(n-e)/(t-1)});function Le(i,r,t){var e=t;if(!t){var n=r.getAttribute("position"),a=n.getFields();e=a[0]}var o=r.scales;return o[e]?o[e].getText(i[e]):(0,f.hasKey)(i,e)?i[e]:e}function Ue(i){var r=(0,f.values)(i.attributes);return(0,f.filter)(r,function(t){return(0,f.contains)(Nt,t.type)})}function Je(i){for(var r=Ue(i),t,e=0,n=r;e<n.length;e++){var a=n[e],o=a.getScale(a.type);if(o&&o.isLinear){t=o;break}}var s=i.getXScale(),l=i.getYScale();return t||l||s}function xr(i,r){var t=r.field,e=i[t];if((0,f.isArray)(e)){var n=e.map(function(a){return r.getText(a)});return n.join("-")}return r.getText(e)}function Yr(i,r){var t,e=r.getGroupScales();if(e.length&&(t=e[0]),t){var n=t.field;return t.getText(i[n])}var a=Je(r);return De(a)}function kr(i,r,t){if(r.length===0)return null;var e=t.type,n=t.getXScale(),a=t.getYScale(),o=n.field,s=a.field,l=null;if(e==="heatmap"||e==="point"){for(var u=t.coordinate,h=u.invert(i),c=n.invert(h.x),v=a.invert(h.y),x=Infinity,M=0;M<r.length;M++){var k=r[M],R=k[Lt],G=Math.pow(R[o]-c,2)+Math.pow(R[s]-v,2);G<x&&(x=G,l=k)}return l}var N=r[0],ot=r[r.length-1],ut=se(i,t),Mt=N[Lt][o],zt=N[Lt][s],$t=ot[Lt][o],ee=a.isLinear&&(0,f.isArray)(zt);if((0,f.isArray)(Mt)){for(var M=0;M<r.length;M++){var Ut=r[M],R=Ut[Lt];if(n.translate(R[o][0])<=ut&&n.translate(R[o][1])>=ut)if(ee)(0,f.isArray)(l)||(l=[]),l.push(Ut);else{l=Ut;break}}(0,f.isArray)(l)&&(l=ce(l,i,t))}else{var le=void 0;if(!n.isLinear&&n.type!=="timeCat"){for(var M=0;M<r.length;M++){var Ut=r[M],R=Ut[Lt];if(Ht(R[o],ut,n))if(ee)(0,f.isArray)(l)||(l=[]),l.push(Ut);else{l=Ut;break}else n.translate(R[o])<=ut&&(ot=Ut,le=r[M+1])}(0,f.isArray)(l)&&(l=ce(l,i,t))}else{if((ut>n.translate($t)||ut<n.translate(Mt))&&(ut>n.max||ut<n.min))return null;for(var xe=0,ye=r.length-1,Oe=void 0;xe<=ye;){Oe=Math.floor((xe+ye)/2);var Ge=r[Oe][Lt][o];if(Ht(Ge,ut,n))return r[Oe];n.translate(Ge)<=n.translate(ut)?(xe=Oe+1,ot=r[Oe],le=r[Oe+1]):(ye===0&&(ot=r[0]),ye=Oe-1)}}ot&&le&&Math.abs(n.translate(ot[Lt][o])-ut)>Math.abs(n.translate(le[Lt][o])-ut)&&(ot=le)}var Ne=Me(t.getXScale());return!l&&Math.abs(n.translate(ot[Lt][o])-ut)<=Ne/2&&(l=ot),l}function on(i,r,t){t===void 0&&(t="");var e=i[Lt],n=Le(e,r,t),a=r.tooltipOption,o=r.theme.defaultColor,s=[],l,u;function h(zt,$t){if(!(0,f.isNil)($t)&&$t!==""){var ee={title:n,data:e,mappingData:i,name:zt,value:$t,color:i.color||o,marker:!0};s.push(ee)}}if((0,f.isObject)(a)){var c=a.fields,v=a.callback;if(v){var x=c.map(function(zt){return i[Lt][zt]}),M=v.apply(void 0,x),k=(0,j.__assign)({data:i[Lt],mappingData:i,title:n,color:i.color||o,marker:!0},M);s.push(k)}else for(var R=r.scales,G=0,N=c;G<N.length;G++){var ot=N[G];if(!(0,f.isNil)(e[ot])){var ut=R[ot];l=De(ut),u=ut.getText(e[ot]),h(l,u)}}}else{var Mt=Je(r);(0,f.isNil)(e[Mt.field])||(u=xr(e,Mt),l=Yr(e,r),h(l,u))}return s}var un={};function sn(i,r){un[i]=r}function Bt(i){delete un[i]}function oe(){return Object.keys(un)}function be(i){return un[i]}var _e=function(){function i(r){this.option=this.wrapperOption(r)}return i.prototype.update=function(r){return this.option=this.wrapperOption(r),this},i.prototype.hasAction=function(r){var t=this.option.actions;return(0,f.some)(t,function(e){return e[0]===r})},i.prototype.create=function(r,t){var e=this.option,n=e.type,a=e.cfg,o=n==="theta",s=(0,j.__assign)({start:r,end:t},a),l=(0,Pr.getCoordinate)(o?"polar":n);return this.coordinate=new l(s),this.coordinate.type=n,o&&(this.hasAction("transpose")||this.transpose()),this.execActions(),this.coordinate},i.prototype.adjust=function(r,t){return this.coordinate.update({start:r,end:t}),this.coordinate.resetMatrix(),this.execActions(["scale","rotate","translate"]),this.coordinate},i.prototype.rotate=function(r){return this.option.actions.push(["rotate",r]),this},i.prototype.reflect=function(r){return this.option.actions.push(["reflect",r]),this},i.prototype.scale=function(r,t){return this.option.actions.push(["scale",r,t]),this},i.prototype.transpose=function(){return this.option.actions.push(["transpose"]),this},i.prototype.getOption=function(){return this.option},i.prototype.getCoordinate=function(){return this.coordinate},i.prototype.wrapperOption=function(r){return(0,j.__assign)({type:"rect",actions:[],cfg:{}},r)},i.prototype.execActions=function(r){var t=this,e=this.option.actions;(0,f.each)(e,function(n){var a,o=n[0],s=n.slice(1),l=(0,f.isNil)(r)?!0:r.includes(o);l&&(a=t.coordinate)[o].apply(a,s)})},i}(),He=_e,cr=function(){function i(r,t,e){this.view=r,this.gEvent=t,this.data=e,this.type=t.type}return Object.defineProperty(i.prototype,"target",{get:function(){return this.gEvent.target},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"event",{get:function(){return this.gEvent.originalEvent},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"x",{get:function(){return this.gEvent.x},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this.gEvent.y},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clientX",{get:function(){return this.gEvent.clientX},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clientY",{get:function(){return this.gEvent.clientY},enumerable:!1,configurable:!0}),i.prototype.toString=function(){return"[Event (type="+this.type+")]"},i.prototype.clone=function(){return new i(this.view,this.gEvent,this.data)},i}(),Hr=cr;function mn(i){return!(0,f.isNumber)(i)&&!(0,f.isArray)(i)}function fi(i){i===void 0&&(i=0);var r=(0,f.isArray)(i)?i:[i];switch(r.length){case 0:r=[0,0,0,0];break;case 1:r=new Array(4).fill(r[0]);break;case 2:r=(0,j.__spreadArrays)(r,r);break;case 3:r=(0,j.__spreadArrays)(r,[r[1]]);break;default:r=r.slice(0,4);break}return r}var Ei=function(){function i(r,t,e,n){r===void 0&&(r=0),t===void 0&&(t=0),e===void 0&&(e=0),n===void 0&&(n=0),this.top=r,this.right=t,this.bottom=e,this.left=n}return i.prototype.shrink=function(r){var t=r[0],e=r[1],n=r[2],a=r[3];return this.top+=t,this.right+=e,this.bottom+=n,this.left+=a,this},i.prototype.inc=function(r,t){var e=r.width,n=r.height;switch(t){case _t.TOP:case _t.TOP_LEFT:case _t.TOP_RIGHT:this.top+=n;break;case _t.RIGHT:case _t.RIGHT_TOP:case _t.RIGHT_BOTTOM:this.right+=e;break;case _t.BOTTOM:case _t.BOTTOM_LEFT:case _t.BOTTOM_RIGHT:this.bottom+=n;break;case _t.LEFT:case _t.LEFT_TOP:case _t.LEFT_BOTTOM:this.left+=e;break;default:break}return this},i.prototype.getPadding=function(){return[this.top,this.right,this.bottom,this.left]},i}();function ra(i){var r=i.padding;if(!mn(r))return fi(r);var t=i.viewBBox,e=i.autoPadding,n=new Ei;(0,f.each)(i.getComponents(),function(s){var l=s.component,u=s.type;if(!(u===jt.GRID||u===jt.TOOLTIP)){var h=l.getLayoutBBox(),c=new Ar(h.x,h.y,h.width,h.height);if(u===jt.AXIS){var v=c.exceed(t);n.shrink(v)}else{var x=s.direction;n.inc(c,x)}}});var a=n.getPadding();if(e){var o=fi(i.appendPadding);return[Math.max(e[0]-o[0],a[0]),Math.max(e[1]-o[1],a[1]),Math.max(e[2]-o[2],a[2]),Math.max(e[3]-o[3],a[3])]}return a}function Co(i){var r=i.getController("axis"),t=i.getController("legend"),e=i.getController("annotation"),n=i.getController("slider"),a=ra(i);i.coordinateBBox=i.viewBBox.shrink(a).shrink(fi(i.appendPadding)),i.adjustCoordinate(),[r,n,t,e].forEach(function(o){o&&o.layout()})}var D1=function(){function i(){this.scales=new Map,this.syncScales=new Map}return i.prototype.createScale=function(r,t,e,n){var a=e,o=this.getScaleMeta(n);if(t.length===0&&o){var s=o.scale,l={type:s.type};s.isCategory&&(l.values=s.values),a=(0,f.deepMix)(l,o.scaleDef,e)}var u=Pe(r,t,a);return this.cacheScale(u,e,n),u},i.prototype.sync=function(){var r=this;this.syncScales.forEach(function(t,e){var n=Number.MAX_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER,o=[];(0,f.each)(t,function(s){var l=r.getScale(s);a=(0,f.isNumber)(l.max)?Math.max(a,l.max):a,n=(0,f.isNumber)(l.min)?Math.min(n,l.min):n,(0,f.each)(l.values,function(u){o.includes(u)||o.push(u)})}),(0,f.each)(t,function(s){var l=r.getScale(s);l.isContinuous?l.change({min:n,max:a,values:o}):l.isCategory&&l.change({values:o})})})},i.prototype.cacheScale=function(r,t,e){var n=this.getScaleMeta(e);n&&n.scale.type===r.type?(Ie(n.scale,r),n.scaleDef=t):(n={key:e,scale:r,scaleDef:t},this.scales.set(e,n));var a=this.getSyncKey(n);if(n.syncKey=a,this.removeFromSyncScales(e),a){var o=this.syncScales.get(a);o||(o=[],this.syncScales.set(a,o)),o.push(e)}},i.prototype.getScale=function(r){var t=this.getScaleMeta(r);if(!t){var e=(0,f.last)(r.split("-")),n=this.syncScales.get(e);n&&n.length&&(t=this.getScaleMeta(n[0]))}return t&&t.scale},i.prototype.deleteScale=function(r){var t=this.getScaleMeta(r);if(t){var e=t.syncKey,n=this.syncScales.get(e);if(n&&n.length){var a=n.indexOf(r);a!==-1&&n.splice(a,1)}}this.scales.delete(r)},i.prototype.clear=function(){this.scales.clear(),this.syncScales.clear()},i.prototype.removeFromSyncScales=function(r){var t=this;this.syncScales.forEach(function(e,n){var a=e.indexOf(r);if(a!==-1)return e.splice(a,1),e.length===0&&t.syncScales.delete(n),!1})},i.prototype.getSyncKey=function(r){var t=r.scale,e=r.scaleDef,n=t.field,a=(0,f.get)(e,["sync"]);return a===!0?n:a===!1?void 0:a},i.prototype.getScaleMeta=function(r){return this.scales.get(r)},i}(),uc=function(i){(0,j.__extends)(r,i);function r(t){var e=i.call(this,{visible:t.visible})||this;e.id=(0,f.uniqueId)("view"),e.views=[],e.geometries=[],e.controllers=[],e.interactions={},e.limitInPlot=!1,e.options={data:[],animate:!0},e.usedControllers=oe(),e.scalePool=new D1,e.layoutFunc=Co,e.isPreMouseInPlot=!1,e.isDataChanged=!1,e.isCoordinateChanged=!1,e.createdScaleKeys=new Map,e.onCanvasEvent=function(R){var G=R.name;if(!G.includes(":")){var N=e.createViewEvent(R);e.doPlotEvent(N),e.emit(G,N)}},e.onDelegateEvents=function(R){var G=R.name;if(!!G.includes(":")){var N=e.createViewEvent(R);e.emit(G,N)}};var n=t.parent,a=t.canvas,o=t.backgroundGroup,s=t.middleGroup,l=t.foregroundGroup,u=t.region,h=u===void 0?{start:{x:0,y:0},end:{x:1,y:1}}:u,c=t.padding,v=t.appendPadding,x=t.theme,M=t.options,k=t.limitInPlot;return e.parent=n,e.canvas=a,e.backgroundGroup=o,e.middleGroup=s,e.foregroundGroup=l,e.region=h,e.padding=c,e.appendPadding=v,e.options=(0,j.__assign)((0,j.__assign)({},e.options),M),e.limitInPlot=k,e.themeObject=(0,f.isObject)(x)?(0,f.deepMix)({},gt("default"),x):gt(x),e.init(),e}return r.prototype.setLayout=function(t){this.layoutFunc=t},r.prototype.init=function(){this.calculateViewBBox(),this.initEvents(),this.initComponentController(),this.coordinateController=new He(this.options.coordinate),this.initOptions();for(var t=this.views,e=0;e<t.length;e++)t[e].init()},r.prototype.render=function(t){t===void 0&&(t=!1),this.emit(Vt.BEFORE_RENDER),this.paint(t),this.emit(Vt.AFTER_RENDER),this.visible===!1&&this.changeVisible(!1)},r.prototype.clear=function(){var t=this;this.emit(Vt.BEFORE_CLEAR),this.filteredData=[],this.coordinateInstance=void 0,this.isDataChanged=!1,this.isCoordinateChanged=!1;for(var e=this.geometries,n=0;n<e.length;n++)e[n].clear();this.geometries=[];for(var a=this.controllers,n=0;n<a.length;n++)a[n].clear();this.createdScaleKeys.forEach(function(s,l){t.getRootView().scalePool.deleteScale(l)}),this.createdScaleKeys.clear();for(var o=this.views,n=0;n<o.length;n++)o[n].clear();this.emit(Vt.AFTER_CLEAR)},r.prototype.destroy=function(){this.emit(Vt.BEFORE_DESTROY);var t=this.interactions;(0,f.each)(t,function(s){s&&s.destroy()}),this.clear();for(var e=this.controllers,n=0,a=e.length;n<a;n++){var o=e[n];o.destroy()}this.backgroundGroup.remove(!0),this.middleGroup.remove(!0),this.foregroundGroup.remove(!0),i.prototype.destroy.call(this)},r.prototype.changeVisible=function(t){i.prototype.changeVisible.call(this,t);for(var e=this.geometries,n=0,a=e.length;n<a;n++){var o=e[n];o.changeVisible(t)}for(var s=this.controllers,n=0,a=s.length;n<a;n++){var l=s[n];l.changeVisible(t)}return this.foregroundGroup.set("visible",t),this.middleGroup.set("visible",t),this.backgroundGroup.set("visible",t),this.getCanvas().draw(),this},r.prototype.data=function(t){return(0,f.set)(this.options,"data",t),this.isDataChanged=!0,this},r.prototype.source=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.data() instead."),this.data(t)},r.prototype.filter=function(t,e){return(0,f.isFunction)(e)?((0,f.set)(this.options,["filters",t],e),this):(!e&&(0,f.get)(this.options,["filters",t])&&delete this.options.filters[t],this)},r.prototype.axis=function(t,e){return(0,f.isBoolean)(t)?(0,f.set)(this.options,["axes"],t):(0,f.set)(this.options,["axes",t],e),this},r.prototype.legend=function(t,e){return(0,f.isBoolean)(t)?(0,f.set)(this.options,["legends"],t):(0,f.isString)(t)?(0,f.set)(this.options,["legends",t],e):(0,f.set)(this.options,["legends"],t),this},r.prototype.scale=function(t,e){var n=this;return(0,f.isString)(t)?(0,f.set)(this.options,["scales",t],e):(0,f.isObject)(t)&&(0,f.each)(t,function(a,o){(0,f.set)(n.options,["scales",o],a)}),this},r.prototype.tooltip=function(t){return(0,f.set)(this.options,"tooltip",t),this},r.prototype.annotation=function(){return this.getController("annotation")},r.prototype.guide=function(){return console.warn("This method will be removed at G2 V4.1. Please use chart.annotation() instead."),this.annotation()},r.prototype.coordinate=function(t,e){return(0,f.isString)(t)?(0,f.set)(this.options,"coordinate",{type:t,cfg:e}):(0,f.set)(this.options,"coordinate",t),this.coordinateController.update(this.options.coordinate),this.coordinateController},r.prototype.coord=function(t,e){return console.warn("This method will be removed at G2 V4.1. Please use chart.coordinate() instead."),this.coordinate(t,e)},r.prototype.facet=function(t,e){this.facetInstance&&this.facetInstance.destroy();var n=Qr(t);if(!n)throw new Error("facet '"+t+"' is not exist!");return this.facetInstance=new n(this,(0,j.__assign)((0,j.__assign)({},e),{type:t})),this},r.prototype.animate=function(t){return(0,f.set)(this.options,"animate",t),this},r.prototype.updateOptions=function(t){return this.clear(),(0,f.mix)(this.options,t),this.initOptions(),this},r.prototype.option=function(t,e){if(r.prototype[t])throw new Error(`Can't use built in variable name "`+t+'", please change another one.');return(0,f.set)(this.options,t,e),this},r.prototype.theme=function(t){return this.themeObject=(0,f.isObject)(t)?(0,f.deepMix)({},this.themeObject,t):gt(t),this},r.prototype.interaction=function(t,e){var n=this.interactions[t];n&&n.destroy();var a=ke(t,this,e);return a&&(a.init(),this.interactions[t]=a),this},r.prototype.removeInteraction=function(t){var e=this.interactions[t];e&&(e.destroy(),this.interactions[t]=void 0)},r.prototype.changeData=function(t){this.isDataChanged=!0,this.emit(Vt.BEFORE_CHANGE_DATA),this.data(t),this.paint(!0);for(var e=this.views,n=0,a=e.length;n<a;n++){var o=e[n];o.changeData(t)}this.emit(Vt.AFTER_CHANGE_DATA)},r.prototype.createView=function(t){var e={data:this.options.data,scales:(0,f.clone)(this.options.scales),axes:(0,f.clone)(this.options.axes),coordinate:(0,f.clone)(this.coordinateController.getOption()),tooltip:(0,f.clone)(this.options.tooltip),legends:(0,f.clone)(this.options.legends),animate:this.options.animate,visible:this.visible},n=new r((0,j.__assign)((0,j.__assign)({parent:this,canvas:this.canvas,backgroundGroup:this.backgroundGroup.addGroup({zIndex:qt.BG}),middleGroup:this.middleGroup.addGroup({zIndex:qt.MID}),foregroundGroup:this.foregroundGroup.addGroup({zIndex:qt.FORE}),theme:this.themeObject,padding:this.padding},t),{options:(0,j.__assign)((0,j.__assign)({},e),(0,f.get)(t,"options",{}))}));return this.views.push(n),n},r.prototype.view=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.createView() instead."),this.createView(t)},r.prototype.removeView=function(t){var e=(0,f.remove)(this.views,function(n){return n===t})[0];return e&&e.destroy(),e},r.prototype.getCoordinate=function(){return this.coordinateInstance},r.prototype.getTheme=function(){return this.themeObject},r.prototype.getXScale=function(){var t=this.geometries[0];return t?t.getXScale():null},r.prototype.getYScales=function(){var t={};return this.geometries.map(function(e){var n=e.getYScale(),a=n.field;if(!t[a])return t[a]=!0,n})},r.prototype.getScalesByDim=function(t){for(var e=this.geometries,n={},a=0,o=e.length;a<o;a++){var s=e[a],l=t==="x"?s.getXScale():s.getYScale();l&&!n[l.field]&&(n[l.field]=l)}return n},r.prototype.getScaleByField=function(t,e){var n=e||this.getScaleKey(t);return this.getRootView().scalePool.getScale(n)},r.prototype.getOptions=function(){return this.options},r.prototype.getData=function(){return this.filteredData},r.prototype.getLayer=function(t){return t===yt.BG?this.backgroundGroup:t===yt.MID?this.middleGroup:t===yt.FORE?this.foregroundGroup:this.foregroundGroup},r.prototype.isPointInPlot=function(t){return it(this.getCoordinate(),t)},r.prototype.getLegendAttributes=function(){return(0,f.flatten)(this.geometries.map(function(t){return t.getGroupAttributes()}))},r.prototype.getGroupScales=function(){var t=this.geometries.map(function(e){return e.getGroupScales()});return At((0,f.flatten)(t))},r.prototype.getCanvas=function(){return this.getRootView().canvas},r.prototype.getRootView=function(){for(var t=this;;){if(t.parent){t=t.parent;continue}break}return t},r.prototype.getXY=function(t){var e=this.getCoordinate(),n=this.getScalesByDim("x"),a=this.getScalesByDim("y"),o,s;if((0,f.each)(t,function(l,u){n[u]&&(o=n[u].scale(l)),a[u]&&(s=a[u].scale(l))}),!(0,f.isNil)(o)&&!(0,f.isNil)(s))return e.convert({x:o,y:s})},r.prototype.getController=function(t){return(0,f.find)(this.controllers,function(e){return e.name===t})},r.prototype.showTooltip=function(t){var e=this.getController("tooltip");return e&&e.showTooltip(t),this},r.prototype.hideTooltip=function(){var t=this.getController("tooltip");return t&&t.hideTooltip(),this},r.prototype.lockTooltip=function(){var t=this.getController("tooltip");return t&&t.lockTooltip(),this},r.prototype.unlockTooltip=function(){var t=this.getController("tooltip");return t&&t.unlockTooltip(),this},r.prototype.isTooltipLocked=function(){var t=this.getController("tooltip");return t&&t.isTooltipLocked()},r.prototype.getTooltipItems=function(t){var e=this.getController("tooltip");return e?e.getTooltipItems(t):[]},r.prototype.getSnapRecords=function(t){for(var e=this.geometries,n=[],a=0,o=e.length;a<o;a++){var s=e[a],l=s.dataArray;s.sort(l);for(var u=void 0,h=0,c=l.length;h<c;h++){var v=l[h];u=kr(t,v,s),u&&n.push(u)}}for(var x=this.views,a=0,o=x.length;a<o;a++){var M=x[a],k=M.getSnapRecords(t);n=n.concat(k)}return n},r.prototype.getComponents=function(){for(var t=[],e=this.controllers,n=0,a=e.length;n<a;n++){var o=e[n];t=t.concat(o.getComponents())}return t},r.prototype.filterData=function(t){var e=this.options.filters;return(0,f.size)(e)===0?t:(0,f.filter)(t,function(n,a){var o=Object.keys(e);return o.every(function(s){var l=e[s];return l(n[s],n,a)})})},r.prototype.filterFieldData=function(t,e){var n=this.options.filters,a=(0,f.get)(n,t);return(0,f.isUndefined)(a)?e:e.filter(function(o,s){return a(o[t],o,s)})},r.prototype.adjustCoordinate=function(){var t=this.getCoordinate(),e=t.start,n=t.end,a=this.coordinateBBox.bl,o=this.coordinateBBox.tr;if((0,f.isEqual)(e,a)&&(0,f.isEqual)(n,o)){this.isCoordinateChanged=!1;return}this.isCoordinateChanged=!0,this.coordinateInstance=this.coordinateController.adjust(a,o)},r.prototype.paint=function(t){this.renderDataRecursive(t),this.syncScale(),this.emit(Vt.BEFORE_PAINT),this.renderBackgroundStyleShape(),this.renderLayoutRecursive(t),this.renderPaintRecursive(t),this.emit(Vt.AFTER_PAINT),this.isDataChanged=!1},r.prototype.renderBackgroundStyleShape=function(){if(!this.parent){var t=(0,f.get)(this.themeObject,"background");if(t){this.backgruondStyleRectShape||(this.backgruondStyleRectShape=this.backgroundGroup.addShape("rect",{attrs:{zIndex:-1}}));var e=this.viewBBox,n=e.x,a=e.y,o=e.width,s=e.height;this.backgruondStyleRectShape.attr({fill:t,x:n,y:a,width:o,height:s})}else this.backgruondStyleRectShape&&(this.backgruondStyleRectShape.remove(!0),this.backgruondStyleRectShape=void 0)}},r.prototype.renderLayoutRecursive=function(t){this.calculateViewBBox(),this.adjustCoordinate(),this.initComponents(t),this.doLayout();var e=this.viewBBox,n=this.coordinateBBox;mn(this.padding)&&(this.autoPadding=[n.tl.y-e.tl.y,e.tr.x-n.tr.x,e.bl.y-n.bl.y,n.tl.x-e.tl.x]);for(var a=this.views,o=0,s=a.length;o<s;o++){var l=a[o];l.renderLayoutRecursive(t)}},r.prototype.renderPaintRecursive=function(t){if(this.limitInPlot){var e=this.middleGroup,n=St(this.coordinateInstance),a=n.type,o=n.attrs;e.setClip({type:a,attrs:o})}this.paintGeometries(t),this.renderComponents(t);for(var s=this.views,l=0,u=s.length;l<u;l++){var h=s[l];h.renderPaintRecursive(t)}},r.prototype.createScale=function(t,e,n,a){var o=(0,f.get)(this.options.scales,[t]),s=(0,j.__assign)((0,j.__assign)({},o),n);return this.parent?this.parent.createScale(t,e,s,a):this.scalePool.createScale(t,e,s,a)},r.prototype.renderDataRecursive=function(t){this.doFilterData(),this.createCoordinate(),this.initGeometries(t),this.renderFacet(t);for(var e=this.views,n=0,a=e.length;n<a;n++){var o=e[n];o.renderDataRecursive(t)}},r.prototype.calculateViewBBox=function(){var t,e,n,a;if(this.parent){var o=this.parent.coordinateBBox;t=o.x,e=o.y,n=o.width,a=o.height}else t=0,e=0,n=this.canvas.get("width"),a=this.canvas.get("height");var s=this.region,l=s.start,u=s.end,h=new Ar(t+n*l.x,e+a*l.y,n*(u.x-l.x),a*(u.y-l.y));(!this.viewBBox||!this.viewBBox.isEqual(h))&&(this.viewBBox=new Ar(t+n*l.x,e+a*l.y,n*(u.x-l.x),a*(u.y-l.y)),this.coordinateBBox=this.viewBBox)},r.prototype.initEvents=function(){this.foregroundGroup.on("*",this.onDelegateEvents),this.middleGroup.on("*",this.onDelegateEvents),this.backgroundGroup.on("*",this.onDelegateEvents),this.canvas.on("*",this.onCanvasEvent)},r.prototype.initComponentController=function(){for(var t=this.usedControllers,e=0,n=t.length;e<n;e++){var a=t[e],o=be(a);o&&this.controllers.push(new o(this))}},r.prototype.createViewEvent=function(t){var e=t.shape,n=t.name,a=e?e.get("origin"):null,o=new Hr(this,t,a);return o.type=n,o},r.prototype.doPlotEvent=function(t){var e=t.type,n=t.x,a=t.y,o={x:n,y:a},s=["mousedown","mouseup","mousemove","mouseleave","mousewheel","touchstart","touchmove","touchend","touchcancel","click","dblclick","contextmenu"];if(s.includes(e)){var l=this.isPointInPlot(o);if(l){var u="plot:"+e;t.type=u,this.emit(u,t),(e==="mouseleave"||e==="touchend")&&(this.isPreMouseInPlot=!1)}e==="mousemove"||e==="touchmove"?(this.isPreMouseInPlot&&!l?(e==="mousemove"&&(t.type=re.MOUSE_LEAVE,this.emit(re.MOUSE_LEAVE,t)),t.type=re.LEAVE,this.emit(re.LEAVE,t)):!this.isPreMouseInPlot&&l&&(e==="mousemove"&&(t.type=re.MOUSE_ENTER,this.emit(re.MOUSE_ENTER,t)),t.type=re.ENTER,this.emit(re.ENTER,t)),this.isPreMouseInPlot=l):(e==="mouseleave"||e==="touchend")&&this.isPreMouseInPlot&&(e==="mouseleave"&&(t.type=re.MOUSE_LEAVE,this.emit(re.MOUSE_LEAVE,t)),t.type=re.LEAVE,this.emit(re.LEAVE,t),this.isPreMouseInPlot=!1)}},r.prototype.doFilterData=function(){var t=this.options.data;this.filteredData=this.filterData(t)},r.prototype.initGeometries=function(t){this.createOrUpdateScales();for(var e=this.getCoordinate(),n=(0,f.get)(this.options,"scales",{}),a=this.geometries,o=0,s=a.length;o<s;o++){var l=a[o];l.scales=this.getGeometryScales();var u={coordinate:e,scaleDefs:n,data:this.filteredData,theme:this.themeObject,isDataChanged:this.isDataChanged,isCoordinateChanged:this.isCoordinateChanged};t?l.update(u):l.init(u)}this.adjustScales()},r.prototype.createOrUpdateScales=function(){for(var t=this.getScaleFields(),e=this.getGroupedFields(),n=this.getOptions(),a=n.data,o=n.scales,s=o===void 0?{}:o,l=this.filteredData,u=0,h=t.length;u<h;u++){var c=t[u],v=s[c],x=this.getScaleKey(c);this.createScale(c,e.includes(c)?a:l,v,x),this.createdScaleKeys.set(x,!0)}},r.prototype.syncScale=function(){this.getRootView().scalePool.sync()},r.prototype.getGeometryScales=function(){for(var t=this.getScaleFields(),e={},n=0;n<t.length;n++){var a=t[n];e[a]=this.getScaleByField(a)}return e},r.prototype.getScaleFields=function(){for(var t=[],e={},n=this.geometries,a=0;a<n.length;a++){var o=n[a],s=o.getScaleFields();At(s,t,e)}return t},r.prototype.getGroupedFields=function(){for(var t=[],e={},n=this.geometries,a=0;a<n.length;a++){var o=n[a],s=o.getGroupFields();At(s,t,e)}return t},r.prototype.adjustScales=function(){this.adjustCategoryScaleRange()},r.prototype.adjustCategoryScaleRange=function(){var t=this,e=(0,j.__spreadArrays)([this.getXScale()],this.getYScales()).filter(function(o){return!!o}),n=this.getCoordinate(),a=this.options.scales;(0,f.each)(e,function(o){var s=o.field,l=o.values,u=o.isCategory,h=o.isIdentity;if((u||h)&&l&&!(0,f.get)(a,[s,"range"])){var c=l.length,v=void 0;if(c===1)v=[.5,1];else{var x=1,M=0;wt(n)?n.isTransposed?(x=(0,f.get)(t.theme,"widthRatio.multiplePie",1/1.3),M=1/c*x,v=[M/2,1-M/2]):v=[0,1-1/c]:(M=1/c/2,v=[M,1-M])}o.range=v}})},r.prototype.initComponents=function(t){for(var e=this.controllers,n=0;n<e.length;n++){var a=e[n];t?a.update():(a.clear(),a.render())}},r.prototype.doLayout=function(){this.layoutFunc(this)},r.prototype.createCoordinate=function(){var t=this.coordinateBBox.bl,e=this.coordinateBBox.tr;this.coordinateInstance=this.coordinateController.create(t,e)},r.prototype.paintGeometries=function(t){for(var e=this.options.animate,n=this.getCoordinate(),a={x:this.viewBBox.x,y:this.viewBBox.y,minX:this.viewBBox.minX,minY:this.viewBBox.minY,maxX:this.viewBBox.maxX,maxY:this.viewBBox.maxY,width:this.viewBBox.width,height:this.viewBBox.height},o=this.geometries,s=0;s<o.length;s++){var l=o[s];l.coordinate=n,l.canvasRegion=a,e||l.animate(!1),l.paint(t)}},r.prototype.renderComponents=function(t){for(var e=0;e<this.getComponents().length;e++){var n=this.getComponents()[e];n.component.render()}},r.prototype.renderFacet=function(t){this.facetInstance&&(t?this.facetInstance.update():(this.facetInstance.clear(),this.facetInstance.init(),this.facetInstance.render()))},r.prototype.initOptions=function(){for(var t=this.options,e=t.geometries,n=e===void 0?[]:e,a=t.interactions,o=a===void 0?[]:a,s=t.views,l=s===void 0?[]:s,u=t.annotations,h=u===void 0?[]:u,c=0;c<n.length;c++){var v=n[c];this.createGeometry(v)}for(var x=0;x<o.length;x++){var M=o[x],k=M.type,R=M.cfg;this.interaction(k,R)}for(var G=0;G<l.length;G++){var N=l[G];this.createView(N)}for(var ot=this.getController("annotation"),ut=0;ut<h.length;ut++){var Mt=h[ut];ot.annotation(Mt)}},r.prototype.createGeometry=function(t){var e=t.type,n=t.cfg,a=n===void 0?{}:n;if(this[e]){var o=this[e](a);(0,f.each)(t,function(s,l){(0,f.isFunction)(o[l])&&o[l](s)})}},r.prototype.getScaleKey=function(t){return this.id+"-"+t},r}(Te);function Aa(i,r){uc.prototype[i.toLowerCase()]=function(t){t===void 0&&(t={});var e=(0,j.__assign)({container:this.middleGroup.addGroup(),labelsContainer:this.foregroundGroup.addGroup()},t),n=new r(e);return this.geometries.push(n),n}}var Nu=uc,F1=function(i){(0,j.__extends)(r,i);function r(t){var e=this,n=t.container,a=t.width,o=t.height,s=t.autoFit,l=s===void 0?!1:s,u=t.padding,h=t.appendPadding,c=t.renderer,v=c===void 0?"canvas":c,x=t.pixelRatio,M=t.localRefresh,k=M===void 0?!0:M,R=t.visible,G=R===void 0?!0:R,N=t.defaultInteractions,ot=N===void 0?["tooltip","legend-filter","legend-active","continuous-filter","ellipsis-text"]:N,ut=t.options,Mt=t.limitInPlot,zt=t.theme,$t=(0,f.isString)(n)?document.getElementById(n):n,ee=(0,Et.Z)('<div style="position:relative;"></div>');$t.appendChild(ee);var Ut=we($t,l,a,o),le=tt(v),xe=new le.Canvas((0,j.__assign)({container:ee,pixelRatio:x,localRefresh:k},Ut));return e=i.call(this,{parent:null,canvas:xe,backgroundGroup:xe.addGroup({zIndex:qt.BG}),middleGroup:xe.addGroup({zIndex:qt.MID}),foregroundGroup:xe.addGroup({zIndex:qt.FORE}),padding:u,appendPadding:h,visible:G,options:ut,limitInPlot:Mt,theme:zt})||this,e.onResize=(0,f.debounce)(function(){e.forceFit()},300),e.ele=$t,e.canvas=xe,e.width=Ut.width,e.height=Ut.height,e.autoFit=l,e.localRefresh=k,e.renderer=v,e.wrapperElement=ee,e.updateCanvasStyle(),e.bindAutoFit(),e.initDefaultInteractions(ot),e}return r.prototype.initDefaultInteractions=function(t){var e=this;(0,f.each)(t,function(n){e.interaction(n)})},r.prototype.changeSize=function(t,e){return this.width===t&&this.height===e?this:(this.width=t,this.height=e,this.canvas.changeSize(t,e),this.render(!0),this)},r.prototype.destroy=function(){i.prototype.destroy.call(this),this.unbindAutoFit(),this.canvas.destroy(),Ye(this.wrapperElement),this.wrapperElement=null},r.prototype.changeVisible=function(t){return i.prototype.changeVisible.call(this,t),this.wrapperElement.style.display=t?"":"none",this},r.prototype.forceFit=function(){if(!this.destroyed){var t=we(this.ele,!0,this.width,this.height),e=t.width,n=t.height;this.changeSize(e,n)}},r.prototype.updateCanvasStyle=function(){(0,It.Z)(this.canvas.get("el"),{display:"inline-block",verticalAlign:"middle"})},r.prototype.bindAutoFit=function(){this.autoFit&&window.addEventListener("resize",this.onResize)},r.prototype.unbindAutoFit=function(){this.autoFit&&window.removeEventListener("resize",this.onResize)},r}(Nu),R1=F1,zo=function(){function i(r){this.visible=!0,this.components=[],this.view=r}return i.prototype.clear=function(){(0,f.each)(this.components,function(r){r.component.destroy()}),this.components=[]},i.prototype.destroy=function(){this.clear()},i.prototype.getComponents=function(){return this.components},i.prototype.changeVisible=function(r){this.visible!==r&&(this.components.forEach(function(t){r?t.component.show():t.component.hide()}),this.visible=r)},i}(),fc=0,N1=1/2,G1=1/2,Y1=.05,z1=function(){function i(r){var t=r.xField,e=r.yField,n=r.adjustNames,a=n===void 0?["x","y"]:n,o=r.dimValuesMap;this.adjustNames=a,this.xField=t,this.yField=e,this.dimValuesMap=o}return i.prototype.isAdjust=function(r){return this.adjustNames.indexOf(r)>=0},i.prototype.getAdjustRange=function(r,t,e){var n=this.yField,a=e.indexOf(t),o=e.length,s,l;return!n&&this.isAdjust("y")?(s=0,l=1):o>1?(s=e[a===0?0:a-1],l=e[a===o-1?o-1:a+1],a!==0?s+=(t-s)/2:s-=(l-t)/2,a!==o-1?l-=(l-t)/2:l+=(t-e[o-2])/2):(s=t===0?0:t-.5,l=t===0?1:t+.5),{pre:s,next:l}},i.prototype.adjustData=function(r,t){var e=this,n=this.getDimValues(t);f.each(r,function(a,o){f.each(n,function(s,l){e.adjustDim(l,s,a,o)})})},i.prototype.groupData=function(r,t){return f.each(r,function(e){e[t]===void 0&&(e[t]=fc)}),f.groupBy(r,t)},i.prototype.adjustDim=function(r,t,e,n){},i.prototype.getDimValues=function(r){var t=this,e=t.xField,n=t.yField,a=f.assign({},this.dimValuesMap),o=[];if(e&&this.isAdjust("x")&&o.push(e),n&&this.isAdjust("y")&&o.push(n),o.forEach(function(l){a&&a[l]||(a[l]=f.valuesOfKey(r,l).sort(function(u,h){return u-h}))}),!n&&this.isAdjust("y")){var s="y";a[s]=[fc,1]}return a},i}(),Ws=z1,hc={},cc=function(i){return hc[i.toLowerCase()]},js=function(i,r){if(cc(i))throw new Error("Adjust type '"+i+"' existed.");hc[i.toLowerCase()]=r},V=p(60153),X1=function(i){(0,V.__extends)(r,i);function r(t){var e=i.call(this,t)||this;e.cacheMap={},e.adjustDataArray=[],e.mergeData=[];var n=t.marginRatio,a=n===void 0?N1:n,o=t.dodgeRatio,s=o===void 0?G1:o,l=t.dodgeBy,u=t.intervalPadding,h=t.dodgePadding,c=t.xDimensionLength,v=t.groupNum,x=t.defaultSize,M=t.maxColumnWidth,k=t.minColumnWidth,R=t.columnWidthRatio,G=t.customOffset;return e.marginRatio=a,e.dodgeRatio=s,e.dodgeBy=l,e.intervalPadding=u,e.dodgePadding=h,e.xDimensionLegenth=c,e.groupNum=v,e.defaultSize=x,e.maxColumnWidth=M,e.minColumnWidth=k,e.columnWidthRatio=R,e.customOffset=G,e}return r.prototype.process=function(t){var e=f.clone(t),n=f.flatten(e),a=this.dodgeBy,o=a?f.group(n,a):e;return this.cacheMap={},this.adjustDataArray=o,this.mergeData=n,this.adjustData(o,n),this.adjustDataArray=[],this.mergeData=[],e},r.prototype.adjustDim=function(t,e,n,a){var o=this,s=this.customOffset,l=this.getDistribution(t),u=this.groupData(n,t);return f.each(u,function(h,c){var v;e.length===1?v={pre:e[0]-1,next:e[0]+1}:v=o.getAdjustRange(t,parseFloat(c),e),f.each(h,function(x){var M=x[t],k=l[M],R=k.indexOf(a);if(f.isNil(s))x[t]=o.getDodgeOffset(v,R,k.length);else{var G=v.pre,N=v.next;x[t]=f.isFunction(s)?s(x,v):(G+N)/2+s}})}),[]},r.prototype.getDodgeOffset=function(t,e,n){var a=this,o=a.dodgeRatio,s=a.marginRatio,l=a.intervalPadding,u=a.dodgePadding,h=t.pre,c=t.next,v=c-h,x;if(!f.isNil(l)&&f.isNil(u)&&l>=0){var M=this.getIntervalOnlyOffset(n,e);x=h+M}else if(!f.isNil(u)&&f.isNil(l)&&u>=0){var M=this.getDodgeOnlyOffset(n,e);x=h+M}else if(!f.isNil(l)&&!f.isNil(u)&&l>=0&&u>=0){var M=this.getIntervalAndDodgeOffset(n,e);x=h+M}else{var k=v*o/n,R=s*k,M=1/2*(v-n*k-(n-1)*R)+((e+1)*k+e*R)-1/2*k-1/2*v;x=(h+c)/2+M}return x},r.prototype.getIntervalOnlyOffset=function(t,e){var n=this,a=n.defaultSize,o=n.intervalPadding,s=n.xDimensionLegenth,l=n.groupNum,u=n.dodgeRatio,h=n.maxColumnWidth,c=n.minColumnWidth,v=n.columnWidthRatio,x=o/s,M=(1-(l-1)*x)/l*u/(t-1),k=((1-x*(l-1))/l-M*(t-1))/t;if(k=f.isNil(v)?k:1/l/t*v,!f.isNil(h)){var R=h/s;k=Math.min(k,R)}if(!f.isNil(c)){var G=c/s;k=Math.max(k,G)}k=a?a/s:k,M=((1-(l-1)*x)/l-t*k)/(t-1);var N=((1/2+e)*k+e*M+1/2*x)*l-x/2;return N},r.prototype.getDodgeOnlyOffset=function(t,e){var n=this,a=n.defaultSize,o=n.dodgePadding,s=n.xDimensionLegenth,l=n.groupNum,u=n.marginRatio,h=n.maxColumnWidth,c=n.minColumnWidth,v=n.columnWidthRatio,x=o/s,M=1*u/(l-1),k=((1-M*(l-1))/l-x*(t-1))/t;if(k=v?1/l/t*v:k,!f.isNil(h)){var R=h/s;k=Math.min(k,R)}if(!f.isNil(c)){var G=c/s;k=Math.max(k,G)}k=a?a/s:k,M=(1-(k*t+x*(t-1))*l)/(l-1);var N=((1/2+e)*k+e*x+1/2*M)*l-M/2;return N},r.prototype.getIntervalAndDodgeOffset=function(t,e){var n=this,a=n.intervalPadding,o=n.dodgePadding,s=n.xDimensionLegenth,l=n.groupNum,u=a/s,h=o/s,c=((1-u*(l-1))/l-h*(t-1))/t,v=((1/2+e)*c+e*h+1/2*u)*l-u/2;return v},r.prototype.getDistribution=function(t){var e=this.adjustDataArray,n=this.cacheMap,a=n[t];return a||(a={},f.each(e,function(o,s){var l=f.valuesOfKey(o,t);l.length||l.push(0),f.each(l,function(u){a[u]||(a[u]=[]),a[u].push(s)})}),n[t]=a),a},r}(Ws),V1=X1;function H1(i,r){return(r-i)*Math.random()+i}var W1=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.process=function(t){var e=f.clone(t),n=f.flatten(e);return this.adjustData(e,n),e},r.prototype.adjustDim=function(t,e,n){var a=this,o=this.groupData(n,t);return f.each(o,function(s,l){return a.adjustGroup(s,t,parseFloat(l),e)})},r.prototype.getAdjustOffset=function(t){var e=t.pre,n=t.next,a=(n-e)*Y1;return H1(e+a,n-a)},r.prototype.adjustGroup=function(t,e,n,a){var o=this,s=this.getAdjustRange(e,n,a);return f.each(t,function(l){l[e]=o.getAdjustOffset(s)}),t},r}(Ws),j1=W1,Gu=f.Cache,U1=function(i){(0,V.__extends)(r,i);function r(t){var e=i.call(this,t)||this,n=t.adjustNames,a=n===void 0?["y"]:n,o=t.height,s=o===void 0?NaN:o,l=t.size,u=l===void 0?10:l,h=t.reverseOrder,c=h===void 0?!1:h;return e.adjustNames=a,e.height=s,e.size=u,e.reverseOrder=c,e}return r.prototype.process=function(t){var e=this,n=e.yField,a=e.reverseOrder,o=n?this.processStack(t):this.processOneDimStack(t);return a?this.reverse(o):o},r.prototype.reverse=function(t){return t.slice(0).reverse()},r.prototype.processStack=function(t){var e=this,n=e.xField,a=e.yField,o=e.reverseOrder,s=o?this.reverse(t):t,l=new Gu,u=new Gu;return s.map(function(h){return h.map(function(c){var v,x=f.get(c,n,0),M=f.get(c,[a]),k=x.toString();if(M=f.isArray(M)?M[1]:M,!f.isNil(M)){var R=M>=0?l:u;R.has(k)||R.set(k,0);var G=R.get(k),N=M+G;return R.set(k,N),(0,V.__assign)((0,V.__assign)({},c),(v={},v[a]=[G,N],v))}return c})})},r.prototype.processOneDimStack=function(t){var e=this,n=this,a=n.xField,o=n.height,s=n.reverseOrder,l="y",u=s?this.reverse(t):t,h=new Gu;return u.map(function(c){return c.map(function(v){var x,M=e.size,k=v[a],R=M*2/o;h.has(k)||h.set(k,R/2);var G=h.get(k);return h.set(k,G+R),(0,V.__assign)((0,V.__assign)({},v),(x={},x[l]=G,x))})})},r}(Ws),Z1=U1,K1=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.process=function(t){var e=f.flatten(t),n=this,a=n.xField,o=n.yField,s=this.getXValuesMaxMap(e),l=Math.max.apply(Math,Object.keys(s).map(function(u){return s[u]}));return f.map(t,function(u){return f.map(u,function(h){var c,v,x=h[o],M=h[a];if(f.isArray(x)){var k=(l-s[M])/2;return(0,V.__assign)((0,V.__assign)({},h),(c={},c[o]=f.map(x,function(G){return k+G}),c))}var R=(l-x)/2;return(0,V.__assign)((0,V.__assign)({},h),(v={},v[o]=[R,x+R],v))})})},r.prototype.getXValuesMaxMap=function(t){var e=this,n=this,a=n.xField,o=n.yField,s=f.groupBy(t,function(l){return l[a]});return f.mapValues(s,function(l){return e.getDimMaxValue(l,o)})},r.prototype.getDimMaxValue=function(t,e){var n=f.map(t,function(o){return f.get(o,e,[])}),a=f.flatten(n);return Math.max.apply(Math,a)},r}(Ws),$1=K1;js("Dodge",V1),js("Jitter",j1),js("Stack",Z1),js("Symmetric",$1);var vc={};function Yu(i){return vc[i.toLowerCase()]}function hi(i,r){vc[i.toLowerCase()]=r}var Xo={appear:{duration:450,easing:"easeQuadOut"},update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},Q1={interval:function(i){return{enter:{animation:i.isRect?i.isTransposed?"scale-in-x":"scale-in-y":"fade-in"},update:{animation:i.isPolar&&i.isTransposed?"sector-path-update":null},leave:{animation:"fade-out"}}},line:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},path:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},point:{appear:{animation:"zoom-in"},enter:{animation:"zoom-in"},leave:{animation:"zoom-out"}},area:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},polygon:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},schema:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},edge:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},label:{appear:{animation:"fade-in",delay:450},enter:{animation:"fade-in"},update:{animation:"position-update"},leave:{animation:"fade-out"}}},dc={line:function(){return{animation:"wave-in"}},area:function(){return{animation:"wave-in"}},path:function(){return{animation:"fade-in"}},interval:function(i){var r;return i.isRect?r=i.isTransposed?"grow-in-x":"grow-in-y":(r="grow-in-xy",i.isPolar&&i.isTransposed&&(r="wave-in")),{animation:r}},schema:function(i){var r;return i.isRect?r=i.isTransposed?"grow-in-x":"grow-in-y":r="grow-in-xy",{animation:r}},polygon:function(){return{animation:"fade-in",duration:500}},edge:function(){return{animation:"fade-in"}}};function J1(i,r){return{delay:(0,f.isFunction)(i.delay)?i.delay(r):i.delay,easing:(0,f.isFunction)(i.easing)?i.easing(r):i.easing,duration:(0,f.isFunction)(i.duration)?i.duration(r):i.duration,callback:i.callback}}function pc(i,r,t){var e=Q1[i];return e&&((0,f.isFunction)(e)&&(e=e(r)),e=(0,f.deepMix)({},Xo,e),t)?e[t]:e}function Vo(i,r,t){var e=(0,f.get)(i.get("origin"),"data",Lt),n=r.animation,a=J1(r,e);if(n){var o=Yu(n);o&&o(i,a,t)}else i.animate(t.toAttrs,a)}function q1(i,r,t,e,n){if(dc[t]){var a=dc[t](e),o=Yu((0,f.get)(a,"animation",""));if(o){var s=(0,j.__assign)((0,j.__assign)((0,j.__assign)({},Xo.appear),a),r);i.stopAnimate(),o(i,s,{coordinate:e,minYPoint:n,toAttrs:null})}}}var tb=p(31207),eb=function(i){(0,j.__extends)(r,i);function r(t){var e=i.call(this,t)||this;e.states=[];var n=t.shapeFactory,a=t.container,o=t.offscreenGroup,s=t.visible,l=s===void 0?!0:s;return e.shapeFactory=n,e.container=a,e.offscreenGroup=o,e.visible=l,e}return r.prototype.draw=function(t,e){e===void 0&&(e=!1),this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.drawShape(t,e),this.visible===!1&&this.changeVisible(!1)},r.prototype.update=function(t){var e=this,n=e.shapeFactory,a=e.shape;if(!!a){this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.setShapeInfo(a,t);var o=this.getOffscreenGroup(),s=n.drawShape(this.shapeType,t,o);s.cfg.data=this.data,s.cfg.origin=t,this.syncShapeStyle(a,s,"",this.getAnimateCfg("update"))}},r.prototype.destroy=function(){var t=this,e=t.shapeFactory,n=t.shape;if(n){var a=this.getAnimateCfg("leave");a?Vo(n,a,{coordinate:e.coordinate,toAttrs:(0,j.__assign)({},n.attr())}):n.remove(!0)}this.states=[],this.shapeFactory=void 0,this.container=void 0,this.shape=void 0,this.animate=void 0,this.geometry=void 0,this.labelShape=void 0,this.model=void 0,this.data=void 0,this.offscreenGroup=void 0,this.statesStyle=void 0,i.prototype.destroy.call(this)},r.prototype.changeVisible=function(t){i.prototype.changeVisible.call(this,t),t?(this.shape&&this.shape.show(),this.labelShape&&this.labelShape.forEach(function(e){e.show()})):(this.shape&&this.shape.hide(),this.labelShape&&this.labelShape.forEach(function(e){e.hide()}))},r.prototype.setState=function(t,e){var n=this,a=this,o=a.states,s=a.shapeFactory,l=a.model,u=a.shape,h=a.shapeType,c=o.indexOf(t);if(e){if(c>-1)return;o.push(t),(t==="active"||t==="selected")&&u.toFront()}else{if(c===-1)return;o.splice(c,1),(t==="active"||t==="selected")&&u.toBack()}var v=s.drawShape(h,l,this.getOffscreenGroup());o.length?o.forEach(function(M){n.syncShapeStyle(u,v,M,null)}):this.syncShapeStyle(u,v,"reset",null),v.remove(!0);var x={state:t,stateStatus:e,element:this,target:this.container};this.container.emit("statechange",x),(0,tb.propagationDelegate)(this.shape,"statechange",x)},r.prototype.clearStates=function(){var t=this,e=this.states;(0,f.each)(e,function(n){t.setState(n,!1)}),this.states=[]},r.prototype.hasState=function(t){return this.states.includes(t)},r.prototype.getStates=function(){return this.states},r.prototype.getData=function(){return this.data},r.prototype.getModel=function(){return this.model},r.prototype.getBBox=function(){var t=this,e=t.shape,n=t.labelShape,a={x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};return e&&(a=e.getCanvasBBox()),n&&n.forEach(function(o){var s=o.getCanvasBBox();a.x=Math.min(s.x,a.x),a.y=Math.min(s.y,a.y),a.minX=Math.min(s.minX,a.minX),a.minY=Math.min(s.minY,a.minY),a.maxX=Math.max(s.maxX,a.maxX),a.maxY=Math.max(s.maxY,a.maxY)}),a.width=a.maxX-a.minX,a.height=a.maxY-a.minY,a},r.prototype.getStatesStyle=function(){if(!this.statesStyle){var t=this,e=t.shapeType,n=t.geometry,a=t.shapeFactory,o=n.stateOption,s=a.defaultShapeType,l=a.theme[e]||a.theme[s];this.statesStyle=(0,f.deepMix)({},l,o)}return this.statesStyle},r.prototype.getStateStyle=function(t,e){var n=this.getStatesStyle(),a=(0,f.get)(n,[t,"style"],{}),o=a[e]||a;return(0,f.isFunction)(o)?o(this):o},r.prototype.getAnimateCfg=function(t){var e=this.animate;return e?e[t]:null},r.prototype.drawShape=function(t,e){e===void 0&&(e=!1);var n=this,a=n.shapeFactory,o=n.container,s=n.shapeType;if(this.shape=a.drawShape(s,t,o),this.shape){this.setShapeInfo(this.shape,t);var l=this.shape.cfg.name;l?(0,f.isString)(l)&&(this.shape.cfg.name=["element",l]):this.shape.cfg.name=["element",this.shapeFactory.geometryType];var u=e?"enter":"appear",h=this.getAnimateCfg(u);h&&Vo(this.shape,h,{coordinate:a.coordinate,toAttrs:(0,j.__assign)({},this.shape.attr())})}},r.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},r.prototype.setShapeInfo=function(t,e){var n=this;if(t.cfg.origin=e,t.cfg.element=this,t.isGroup()){var a=t.get("children");a.forEach(function(o){n.setShapeInfo(o,e)})}},r.prototype.syncShapeStyle=function(t,e,n,a,o){if(n===void 0&&(n=""),o===void 0&&(o=0),t.isGroup())for(var s=t.get("children"),l=e.get("children"),u=0;u<s.length;u++)this.syncShapeStyle(s[u],l[u],n,a,o+u);else{if(n&&n!=="reset"){var h=t.get("name");(0,f.isArray)(h)&&(h=h[1]);var c=this.getStateStyle(n,h||o);e.attr(c)}var v=Zn(t,e);this.animate?a?Vo(t,a,{coordinate:this.shapeFactory.coordinate,toAttrs:v,shapeModel:this.model}):n?(t.stopAnimate(),t.animate(v,{duration:300})):t.attr(v):t.attr(v)}},r.prototype.getShapeType=function(t){var e=(0,f.get)(t,"shape");return(0,f.isArray)(e)?e[0]:e},r}(Te),gc=eb,yc={},mc={};function xc(i){return yc[i.toLowerCase()]}function cs(i,r){yc[i.toLowerCase()]=r}function bc(i){return mc[i.toLowerCase()]}function Mo(i,r){mc[i.toLowerCase()]=r}var Us=p(57350),rb={coordinate:null,defaultShapeType:null,theme:null,getShapePoints:function(i,r){var t=this.getShape(i);return t.getPoints?t.getPoints(r):this.getDefaultPoints(r)},getShape:function(i){var r=this[i]||this[this.defaultShapeType];return r.coordinate=this.coordinate,r},getDefaultPoints:function(){return[]},getMarker:function(i,r){var t=this.getShape(i);if(!t.getMarker){var e=this.defaultShapeType;t=this.getShape(e)}var n=this.theme,a=(0,f.get)(n,[i,"default"],{}),o=t.getMarker(r);return(0,f.deepMix)({},a,o)},drawShape:function(i,r,t){var e=this.getShape(i);return e.draw(r,t)}},nb={coordinate:null,parsePath:function(i){var r=this.coordinate,t=(0,Us.parsePathString)(i);return r.isPolar?t=mr(r,t):t=dr(r,t),t},parsePoint:function(i){var r=this.coordinate;return r.convert(i)},parsePoints:function(i){var r=this.coordinate;return i.map(function(t){return r.convert(t)})},draw:function(i,r){}},zu={};function so(i,r){var t=(0,f.upperFirst)(i),e=(0,j.__assign)((0,j.__assign)((0,j.__assign)({},rb),r),{geometryType:i});return zu[t]=e,e}function xn(i,r,t){var e=(0,f.upperFirst)(i),n=zu[e],a=(0,j.__assign)((0,j.__assign)({},nb),t);return n[r]=a,a}function Xu(i){var r=(0,f.upperFirst)(i);return zu[r]}function ib(i,r,t){if(t===void 0&&(t={}),!r)return[i];var e=(0,f.groupToMap)(i,r),n=[];if(r.length===1&&t[r[0]])for(var a=t[r[0]],o=0,s=a;o<s.length;o++){var l=s[o],u=e["_"+l];u&&n.push(u)}else for(var h in e)if(e.hasOwnProperty(h)){var c=e[h];n.push(c)}return n}function wc(i,r){return(0,f.some)(["color","shape","size","x","y","isInCircle","data","style","defaultStyle","points","mappingData"],function(t){return!(0,f.isEqual)(i[t],r[t])})}function vs(i){return(0,f.isArray)(i)?i:i.split("*")}function ab(i,r){var t=[];return(0,f.each)(r,function(e,n){var a=n.split(" ")[0];a===i&&t.push(e)}),t}var ob=function(i){(0,j.__extends)(r,i);function r(t){var e=i.call(this,t)||this;e.type="base",e.attributes={},e.elements=[],e.elementsMap={},e.animateOption=!0,e.attributeOption={},e.lastElementsMap={},e.generatePoints=!1,e.beforeMappingData=null,e.adjusts={},e.idFields=[],e.hasSorted=!1,e.isCoordinateChanged=!1;var n=t.container,a=t.labelsContainer,o=t.coordinate,s=t.data,l=t.sortable,u=l===void 0?!1:l,h=t.visible,c=h===void 0?!0:h,v=t.theme,x=t.scales,M=x===void 0?{}:x,k=t.scaleDefs,R=k===void 0?{}:k;return e.container=n,e.labelsContainer=a,e.coordinate=o,e.data=s,e.sortable=u,e.visible=c,e.userTheme=v,e.scales=M,e.scaleDefs=R,e}return r.prototype.position=function(t){var e=t;(0,f.isPlainObject)(t)||(e={fields:vs(t)});var n=(0,f.get)(e,"fields");return n.length===1&&(n.unshift("1"),(0,f.set)(e,"fields",n)),(0,f.set)(this.attributeOption,"position",e),this},r.prototype.color=function(t,e){return this.createAttrOption("color",t,e),this},r.prototype.shape=function(t,e){return this.createAttrOption("shape",t,e),this},r.prototype.size=function(t,e){return this.createAttrOption("size",t,e),this},r.prototype.adjust=function(t){var e=t;return((0,f.isString)(t)||(0,f.isPlainObject)(t))&&(e=[t]),(0,f.each)(e,function(n,a){(0,f.isObject)(n)||(e[a]={type:n})}),this.adjustOption=e,this},r.prototype.style=function(t,e){if((0,f.isString)(t)){var n=vs(t);this.styleOption={fields:n,callback:e}}else{var a=t,n=a.fields,o=a.callback,s=a.cfg;n||o||s?this.styleOption=t:this.styleOption={cfg:t}}return this},r.prototype.tooltip=function(t,e){if((0,f.isString)(t)){var n=vs(t);this.tooltipOption={fields:n,callback:e}}else this.tooltipOption=t;return this},r.prototype.animate=function(t){return this.animateOption=t,this},r.prototype.label=function(t,e,n){if((0,f.isString)(t)){var a={},o=vs(t);a.fields=o,(0,f.isFunction)(e)?a.callback=e:(0,f.isPlainObject)(e)&&(a.cfg=e),n&&(a.cfg=n),this.labelOption=a}else this.labelOption=t;return this},r.prototype.state=function(t){return this.stateOption=t,this},r.prototype.init=function(t){t===void 0&&(t={}),this.setCfg(t),this.initAttributes(),this.processData(this.data),this.adjustScale()},r.prototype.update=function(t){t===void 0&&(t={});var e=t.data,n=t.isDataChanged,a=t.isCoordinateChanged,o=this,s=o.attributeOption,l=o.lastAttributeOption;(0,f.isEqual)(s,l)?e&&(n||!(0,f.isEqual)(e,this.data))?(this.setCfg(t),this.processData(e)):this.setCfg(t):this.init(t),this.adjustScale(),this.isCoordinateChanged=a},r.prototype.paint=function(t){var e=this;t===void 0&&(t=!1),this.animateOption&&(this.animateOption=(0,f.deepMix)({},pc(this.type,this.coordinate),this.animateOption)),this.defaultSize=void 0,this.elements=[],this.elementsMap={};var n=this.getOffscreenGroup();n.clear();for(var a=this.beforeMappingData,o=this.beforeMapping(a),s=[],l=0,u=o.length;l<u;l++){var h=o[l],c=this.mapping(h);s.push(c),this.createElements(c,l,t)}if(this.canDoGroupAnimation(t)){var v=this.container,x=this.type,M=this.coordinate,k=(0,f.get)(this.animateOption,"appear"),R=this.getYScale(),G=M.convert({x:0,y:R.scale(this.getYMinValue())});q1(v,k,x,M,G)}this.labelOption&&this.renderLabels((0,f.flatten)(s),t),this.dataArray=s,(0,f.each)(this.lastElementsMap,function(N){N.animate=e.animateOption,N.destroy()}),this.lastElementsMap=this.elementsMap,this.lastAttributeOption=(0,j.__assign)({},this.attributeOption),this.visible===!1&&this.changeVisible(!1)},r.prototype.clear=function(){var t=this,e=t.container,n=t.geometryLabel,a=t.offscreenGroup;e&&e.clear(),n&&n.clear(),a&&a.clear(),this.scaleDefs=void 0,this.attributes={},this.scales={},this.elementsMap={},this.lastElementsMap={},this.elements=[],this.adjusts={},this.dataArray=null,this.beforeMappingData=null,this.lastAttributeOption=void 0,this.defaultSize=void 0,this.idFields=[],this.groupScales=void 0,this.hasSorted=!1,this.isCoordinateChanged=!1},r.prototype.destroy=function(){this.clear();var t=this.container;t.remove(!0),this.offscreenGroup&&(this.offscreenGroup.remove(!0),this.offscreenGroup=null),this.geometryLabel&&(this.geometryLabel.destroy(),this.geometryLabel=null),this.theme=void 0,this.shapeFactory=void 0,i.prototype.destroy.call(this)},r.prototype.getGroupScales=function(){return this.groupScales},r.prototype.getAttribute=function(t){return this.attributes[t]},r.prototype.getXScale=function(){return this.getAttribute("position").scales[0]},r.prototype.getYScale=function(){return this.getAttribute("position").scales[1]},r.prototype.getGroupAttributes=function(){var t=[];return(0,f.each)(this.attributes,function(e){Nt.includes(e.type)&&t.push(e)}),t},r.prototype.getDefaultValue=function(t){var e,n=this.getAttribute(t);return n&&(0,f.isEmpty)(n.scales)&&(e=n.values[0]),e},r.prototype.getAttributeValues=function(t,e){for(var n=[],a=t.scales,o=0,s=a.length;o<s;o++){var l=a[o],u=l.field;l.isIdentity?n.push(l.values):n.push(e[u])}return t.mapping.apply(t,n)},r.prototype.getAdjust=function(t){return this.adjusts[t]},r.prototype.getShapeMarker=function(t,e){var n=this.getShapeFactory();return n.getMarker(t,e)},r.prototype.getElementsBy=function(t){return this.elements.filter(function(e){return t(e)})},r.prototype.getElementId=function(t){t=(0,f.isArray)(t)?t[0]:t;var e=t[Lt];if(this.idFields.length){for(var n=e[this.idFields[0]],a=1;a<this.idFields.length;a++)n+="-"+e[this.idFields[a]];return n}var o=this.type,s=this.getXScale(),l=this.getYScale(),u=s.field||"x",h=l.field||"y",c=e[h],v;s.type==="identity"?v=s.values[0]:v=e[u];var x;o==="interval"||o==="schema"?x=v:o==="line"||o==="area"||o==="path"?x=o:x=v+"-"+c;for(var M=this.groupScales,a=0,k=M.length;a<k;a++){var R=M[a],G=R.field;x=x+"-"+e[G]}var N=this.getAdjust("dodge");if(N){var ot=N.dodgeBy;ot&&(x=x+"-"+e[ot])}return this.getAdjust("jitter")&&(x=x+"-"+t.x+"-"+t.y),x},r.prototype.getScaleFields=function(){var t=[],e={},n=this,a=n.attributeOption,o=n.labelOption,s=n.tooltipOption;for(var l in a)if(a.hasOwnProperty(l)){var u=a[l];u.fields?At(u.fields,t,e):u.values&&At(u.values,t,e)}return o&&o.fields&&At(o.fields,t,e),(0,f.isObject)(s)&&s.fields&&At(s.fields,t,e),t},r.prototype.changeVisible=function(t){i.prototype.changeVisible.call(this,t);for(var e=this.elements,n=0,a=e.length;n<a;n++){var o=e[n];o.changeVisible(t)}t?(this.container&&this.container.show(),this.labelsContainer&&this.labelsContainer.show()):(this.container&&this.container.hide(),this.labelsContainer&&this.labelsContainer.hide())},r.prototype.getGroupFields=function(){for(var t=[],e={},n=0,a=Nt.length;n<a;n++){var o=Nt[n],s=this.attributeOption[o];s&&s.fields&&At(s.fields,t,e)}return t},r.prototype.getXYFields=function(){var t=this.attributeOption.position.fields,e=t[0],n=t[1];return[e,n]},r.prototype.getShapes=function(){return this.elements.map(function(t){return t.shape})},r.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},r.prototype.sort=function(t){if(!this.hasSorted)for(var e=this.getXScale(),n=e.field,a=0;a<t.length;a++){var o=t[a];o.sort(function(s,l){return e.translate(s[Lt][n])-e.translate(l[Lt][n])})}this.hasSorted=!0},r.prototype.adjustScale=function(){var t=this.getYScale();t&&this.getAdjust("stack")&&this.updateStackRange(t,this.beforeMappingData)},r.prototype.getShapeFactory=function(){var t=this.shapeType;if(!!Xu(t))return this.shapeFactory||(this.shapeFactory=(0,f.clone)(Xu(t))),this.shapeFactory.coordinate=this.coordinate,this.shapeFactory.theme=this.theme.geometries[t]||{},this.shapeFactory},r.prototype.createShapePointsCfg=function(t){var e=this.getXScale(),n=this.getYScale(),a=this.normalizeValues(t[e.field],e),o;return n?o=this.normalizeValues(t[n.field],n):o=t.y?t.y:.1,{x:a,y:o,y0:n?n.scale(this.getYMinValue()):void 0}},r.prototype.createElement=function(t,e){e===void 0&&(e=!1);var n=this.container,a=this.getDrawCfg(t),o=this.getShapeFactory(),s=new gc({shapeFactory:o,container:n,offscreenGroup:this.getOffscreenGroup()});return s.animate=this.animateOption,s.geometry=this,s.draw(a,e),s},r.prototype.getDrawCfg=function(t){var e=t[Lt],n={mappingData:t,data:e,x:t.x,y:t.y,color:t.color,size:t.size,isInCircle:this.coordinate.isPolar},a=t.shape;!a&&this.getShapeFactory()&&(a=this.getShapeFactory().defaultShapeType),n.shape=a;var o=this.theme.geometries[this.shapeType];n.defaultStyle=(0,f.get)(o,[a,"default"],{}).style;var s=this.styleOption;return s&&(n.style=this.getStyleCfg(s,e)),this.generatePoints&&(n.points=t.points,n.nextPoints=t.nextPoints),n},r.prototype.createElements=function(t,e,n){n===void 0&&(n=!1);for(var a=this,o=a.lastElementsMap,s=a.elementsMap,l=a.elements,u=0,h=t.length;u<h;u++){var c=t[u],v=this.getElementId(c);s[v]&&(v=v+"-"+e+"-"+u);var x=o[v];if(!x)x=this.createElement(c,n);else{var M=this.getDrawCfg(c),k=x.getModel();(this.isCoordinateChanged||wc(M,k))&&(x.animate=this.animateOption,x.update(M)),delete o[v]}l.push(x),s[v]=x}return l},r.prototype.getLabelType=function(){var t=this,e=t.labelOption,n=t.coordinate,a=t.type,o=n.type,s=(0,f.get)(e,["cfg","type"]);return s||(o==="polar"?s="polar":o==="theta"?s="pie":a==="interval"||a==="polygon"?s="interval":s="base"),s},r.prototype.getYMinValue=function(){var t=this.getYScale(),e=t.min,n=t.max,a;return e>=0?a=e:n<=0?a=n:a=0,a},r.prototype.createAttrOption=function(t,e,n){if((0,f.isNil)(e)||(0,f.isObject)(e))(0,f.isObject)(e)&&(0,f.isEqual)(Object.keys(e),["values"])?(0,f.set)(this.attributeOption,t,{fields:e.values}):(0,f.set)(this.attributeOption,t,e);else{var a={};(0,f.isNumber)(e)?a.values=[e]:a.fields=vs(e),n&&((0,f.isFunction)(n)?a.callback=n:a.values=n),(0,f.set)(this.attributeOption,t,a)}},r.prototype.initAttributes=function(){var t=this,e=this,n=e.attributes,a=e.attributeOption,o=e.theme,s=e.shapeType;this.groupScales=[];var l={},u=function(v){if(a.hasOwnProperty(v)){var x=a[v];if(!x)return{value:void 0};var M=(0,j.__assign)({},x),k=M.callback,R=M.values,G=M.fields,N=G===void 0?[]:G,ot=N.map(function(Mt){var zt=t.scales[Mt];return zt.isCategory&&!l[Mt]&&Nt.includes(v)&&(t.groupScales.push(zt),l[Mt]=!0),zt});M.scales=ot,v!=="position"&&ot.length===1&&ot[0].type==="identity"?M.values=ot[0].values:!k&&!R&&(v==="size"?M.values=o.sizes:v==="shape"?M.values=o.shapes[s]||[]:v==="color"&&(ot.length?M.values=ot[0].values.length<=10?o.colors10:o.colors20:M.values=o.colors10));var ut=(0,pr.getAttribute)(v);n[v]=new ut(M)}};for(var h in a){var c=u(h);if(typeof c=="object")return c.value}},r.prototype.processData=function(t){this.hasSorted=!1;for(var e=this.getAttribute("position").scales,n=e.filter(function(Mt){return Mt.isCategory}),a=this.groupData(t),o=[],s=0,l=a.length;s<l;s++){for(var u=a[s],h=[],c=0,v=u.length;c<v;c++){var x=u[c],M={};for(var k in x)M[k]=x[k];M[Lt]=x;for(var R=0,G=n;R<G.length;R++){var N=G[R],ot=N.field;M[ot]=N.translate(M[ot])}h.push(M)}o.push(h)}var ut=this.adjustData(o);return this.beforeMappingData=ut,ut},r.prototype.adjustData=function(t){var e=this.adjustOption,n=t;if(e)for(var a=this.getXScale(),o=this.getYScale(),s=a.field,l=o?o.field:null,u=0,h=e.length;u<h;u++){var c=e[u],v=(0,j.__assign)({xField:s,yField:l},c),x=c.type;if(x==="dodge"){var M=[];if(a.isCategory||a.type==="identity")M.push("x");else if(!o)M.push("y");else throw new Error("dodge is not support linear attribute, please use category attribute!");v.adjustNames=M,v.dodgeRatio=this.theme.columnWidthRatio}else if(x==="stack"){var k=this.coordinate;if(!o){v.height=k.getHeight();var R=this.getDefaultValue("size")||3;v.size=R}!k.isTransposed&&(0,f.isNil)(v.reverseOrder)&&(v.reverseOrder=!0)}var G=cc(x),N=new G(v);n=N.process(n),this.adjusts[x]=N}return n},r.prototype.groupData=function(t){for(var e=this.getGroupScales(),n=this.scaleDefs,a={},o=[],s=0;s<e.length;s++){var l=e[s],u=l.field;o.push(u),(0,f.get)(n,[u,"values"])&&(a[u]=n[u].values)}return ib(t,o,a)},r.prototype.updateStackRange=function(t,e){for(var n=(0,f.flatten)(e),a=t.field,o=t.min,s=t.max,l=0;l<n.length;l++){var u=n[l],h=Math.min.apply(null,u[a]),c=Math.max.apply(null,u[a]);h<o&&(o=h),c>s&&(s=c)}var v=this.scaleDefs,x={};o<t.min&&!(0,f.get)(v,[a,"min"])&&(x.min=o),s>t.max&&!(0,f.get)(v,[a,"max"])&&(x.max=s),t.change(x)},r.prototype.beforeMapping=function(t){var e=t;if(this.sortable&&this.sort(e),this.generatePoints)for(var n=0,a=e.length;n<a;n++){var o=e[n];this.generateShapePoints(o);var s=e[n+1];s&&(this.generateShapePoints(s),o[0].nextPoints=s[0].points)}return e},r.prototype.generateShapePoints=function(t){for(var e=this.getShapeFactory(),n=this.getAttribute("shape"),a=0;a<t.length;a++){var o=t[a],s=this.createShapePointsCfg(o),l=n?this.getAttributeValues(n,o):null,u=e.getShapePoints(l,s);o.points=u}},r.prototype.normalizeValues=function(t,e){var n=[];if((0,f.isArray)(t))for(var a=0;a<t.length;a++){var o=t[a];n.push(e.scale(o))}else n=e.scale(t);return n},r.prototype.mapping=function(t){for(var e=this.attributes,n=[],a=0;a<t.length;a++){var o=t[a],s={_origin:o[Lt],points:o.points,nextPoints:o.nextPoints};for(var l in e)if(e.hasOwnProperty(l)){var u=e[l],h=u.names,c=this.getAttributeValues(u,o);if(h.length>1)for(var v=0;v<c.length;v+=1){var x=c[v],M=h[v];s[M]=(0,f.isArray)(x)&&x.length===1?x[0]:x}else s[h[0]]=c.length===1?c[0]:c}this.convertPoint(s),n.push(s)}return n},r.prototype.convertPoint=function(t){var e=t.x,n=t.y,a,o,s,l=this.coordinate;if((0,f.isArray)(e)&&(0,f.isArray)(n)){a=[],o=[];for(var u=0,h=0,c=e.length,v=n.length;u<c&&h<v;u+=1,h+=1)s=l.convert({x:e[u],y:n[h]}),a.push(s.x),o.push(s.y)}else if((0,f.isArray)(n)){o=[];for(var x=0;x<n.length;x++){var M=n[x];s=l.convert({x:e,y:M}),a&&a!==s.x?((0,f.isArray)(a)||(a=[a]),a.push(s.x)):a=s.x,o.push(s.y)}}else if((0,f.isArray)(e)){a=[];for(var x=0;x<e.length;x++){var k=e[x];s=l.convert({x:k,y:n}),o&&o!==s.y?((0,f.isArray)(o)||(o=[o]),o.push(s.y)):o=s.y,a.push(s.x)}}else{var R=l.convert({x:e,y:n});a=R.x,o=R.y}t.x=a,t.y=o},r.prototype.getStyleCfg=function(t,e){var n=t.fields,a=n===void 0?[]:n,o=t.callback,s=t.cfg;if(s)return s;var l=a.map(function(u){return e[u]});return o.apply(void 0,l)},r.prototype.setCfg=function(t){var e=this,n=t.coordinate,a=t.data,o=t.theme,s=t.scaleDefs;n&&(this.coordinate=n),a&&(this.data=a),s&&(this.scaleDefs=s,this.idFields=[],(0,f.each)(s,function(l,u){l&&l.key&&e.idFields.push(u)})),o&&(this.theme=this.userTheme?(0,f.deepMix)({},o,this.userTheme):o)},r.prototype.renderLabels=function(t,e){e===void 0&&(e=!1);var n=this.geometryLabel;if(!n){var a=this.getLabelType(),o=xc(a);n=new o(this),this.geometryLabel=n}n.render(t,e);var s=n.labelsRenderer.shapesMap;(0,f.each)(this.elementsMap,function(l,u){var h=ab(u,s);if(h.length){l.labelShape=h;for(var c=0;c<h.length;c++)for(var v=h[c],x=v.getChildren(),M=0;M<x.length;M++){var k=x[M];k.cfg.name=["element","label"],k.cfg.element=l}}})},r.prototype.canDoGroupAnimation=function(t){return!t&&this.animateOption&&((0,f.get)(this.animateOption,"appear")===void 0||(0,f.get)(this.animateOption,"appear")&&(0,f.get)(this.animateOption,["appear","animation"])===void 0)},r}(Te),Ka=ob,Zs=Ve.transform;function Vu(i,r,t){var e=Zs(i.getMatrix(),[["t",r,t]]);i.setMatrix(e)}function Sc(i,r){var t=i.attr(),e=t.x,n=t.y,a=Zs(i.getMatrix(),[["t",-e,-n],["r",r],["t",e,n]]);i.setMatrix(a)}function tG(){return[1,0,0,0,1,0,0,0,1]}function sb(i,r){var t=i.getBBox(),e=(t.minX+t.maxX)/2,n=(t.minY+t.maxY)/2;i.applyToMatrix([e,n,1]);var a=Zs(i.getMatrix(),[["t",-e,-n],["s",r,r],["t",e,n]]);i.setMatrix(a)}var lb=function(){function i(r){this.shapesMap={},this.lastShapesMap={};var t=r.layout,e=r.container;this.layout=t,this.container=e}return i.prototype.render=function(r,t,e){var n=this;e===void 0&&(e=!1),this.shapesMap={};var a=this.container,o=this.createOffscreenGroup();if(r.length){for(var s=0,l=r;s<l.length;s++){var u=l[s];u&&this.renderLabel(u,o)}this.doLayout(r,t),this.renderLabelLine(r),this.adjustLabel(r)}var h=this.lastShapesMap,c=this.shapesMap;(0,f.each)(c,function(v,x){if(v.destroyed)delete c[x];else{if(h[x]){var M=v.get("data"),k=v.get("origin"),R=v.get("coordinate"),G=h[x],N=v.get("animateCfg");G.set("data",M),G.set("origin",k),G.set("animateCfg",N),G.set("coordinate",R);var ot=(0,f.get)(N,"update"),ut=G.getChildren();v.getChildren().map(function(zt,$t){var ee=ut[$t];ee.set("data",M),ee.set("origin",k),ee.set("animateCfg",N),ee.set("coordinate",R);var Ut=Zn(ee,zt);ot?Vo(ee,ot,{toAttrs:Ut,coordinate:R}):ee.attr(Ut)}),n.shapesMap[x]=G}else{a.add(v);var Mt=(0,f.get)(v.get("animateCfg"),e?"enter":"appear");Mt&&Vo(v,Mt,{toAttrs:(0,j.__assign)({},v.attr()),coordinate:v.get("coordinate")})}delete h[x]}}),(0,f.each)(h,function(v){var x=(0,f.get)(v.get("animateCfg"),"leave");x?Vo(v,x,{toAttrs:null,coordinate:v.get("coordinate")}):v.remove(!0)}),this.lastShapesMap=c,o.destroy()},i.prototype.clear=function(){this.container.clear(),this.shapesMap={},this.lastShapesMap={}},i.prototype.destroy=function(){this.container.destroy(),this.shapesMap=null,this.lastShapesMap=null},i.prototype.renderLabel=function(r,t){var e=r.id,n=r.data,a=r.mappingData,o=r.coordinate,s=r.animate,l=r.content,u={id:e,data:n,origin:a,coordinate:o},h=t.addGroup((0,j.__assign)({name:"label",animateCfg:this.animate===!1||s===null||s===!1?!1:(0,f.deepMix)({},this.animate,s)},u)),c;if(l.isGroup&&l.isGroup()||l.isShape&&l.isShape()){var v=l.getCanvasBBox(),x=v.width,M=v.height,k=(0,f.get)(r,"textAlign","left"),R=r.x,G=r.y-M/2;k==="center"?R=R-x/2:(k==="right"||k==="end")&&(R=R-x),Vu(l,R,G),c=l,h.add(l)}else c=h.addShape("text",(0,j.__assign)({attrs:(0,j.__assign)({x:r.x,y:r.y,textAlign:r.textAlign,textBaseline:(0,f.get)(r,"textBaseline","middle"),text:r.content},r.style)},u));r.rotate&&Sc(c,r.rotate),this.shapesMap[e]=h},i.prototype.doLayout=function(r,t){var e=this;if(this.layout){var n=(0,f.isArray)(this.layout)?this.layout:[this.layout];(0,f.each)(n,function(a){var o=bc((0,f.get)(a,"type",""));if(o){var s=[],l=[];(0,f.each)(e.shapesMap,function(u,h){s.push(u),l.push(t[h])}),o(r,s,l,e.region,a.cfg)}})}},i.prototype.renderLabelLine=function(r){var t=this;(0,f.each)(r,function(e){var n=(0,f.get)(e,"coordinate");if(!(!e||!n)){var a=n.getCenter(),o=n.getRadius();if(!!e.labelLine){var s=(0,f.get)(e,"labelLine",{}),l=e.id,u=s.path;if(!u){var h=Mn(a.x,a.y,o,e.angle);u=[["M",h.x,h.y],["L",e.x,e.y]]}var c=t.shapesMap[l];c.destroyed||c.addShape("path",{capture:!1,attrs:(0,j.__assign)({path:u,stroke:e.color?e.color:(0,f.get)(e,["style","fill"],"#000"),fill:null},s.style),id:l,origin:e.mappingData,data:e.data,coordinate:e.coordinate})}}})},i.prototype.createOffscreenGroup=function(){var r=this.container,t=r.getGroupBase(),e=new t({});return e},i.prototype.adjustLabel=function(r){var t=this;(0,f.each)(r,function(e){if(e){var n=e.id,a=t.shapesMap[n];if(!a.destroyed){var o=a.find(function(s){return s.get("type")==="text"});o&&(e.offsetX&&o.attr("x",o.attr("x")+e.offsetX),e.offsetY&&o.attr("y",o.attr("y")+e.offsetY))}}})},i}(),ub=lb;function fb(i){var r=0;return(0,f.each)(i,function(t){r+=t}),r/i.length}var hb=function(){function i(r){this.geometry=r}return i.prototype.getLabelItems=function(r){var t=this,e=[],n=this.getLabelCfgs(r);return(0,f.each)(r,function(a,o){var s=n[o];if(!s||(0,f.isNil)(a.x)||(0,f.isNil)(a.y)){e.push(null);return}var l=(0,f.isArray)(s.content)?s.content:[s.content];s.content=l;var u=l.length;(0,f.each)(l,function(h,c){if((0,f.isNil)(h)||h===""){e.push(null);return}var v=(0,j.__assign)((0,j.__assign)({},s),t.getLabelPoint(s,a,c));v.textAlign||(v.textAlign=t.getLabelAlign(v,c,u)),v.offset<=0&&(v.labelLine=null),e.push(v)})}),e},i.prototype.render=function(r,t){t===void 0&&(t=!1);var e=this.getLabelItems(r),n=this.getLabelsRenderer(),a=this.getGeometryShapes();n.render(e,a,t)},i.prototype.clear=function(){var r=this.labelsRenderer;r&&r.clear()},i.prototype.destroy=function(){var r=this.labelsRenderer;r&&r.destroy(),this.labelsRenderer=null},i.prototype.getCoordinate=function(){return this.geometry.coordinate},i.prototype.getDefaultLabelCfg=function(){return(0,f.get)(this.geometry.theme,"labels",{})},i.prototype.setLabelPosition=function(r,t,e,n){},i.prototype.getDefaultOffset=function(r){var t=this.getCoordinate(),e=this.getOffsetVector(r);return t.isTransposed?e[0]:e[1]},i.prototype.getLabelOffset=function(r,t,e){var n=this.getDefaultOffset(r.offset),a=this.getCoordinate(),o=a.isTransposed,s=o?"x":"y",l=o?1:-1,u={x:0,y:0};return t>0||e===1?u[s]=n*l:u[s]=n*l*-1,u},i.prototype.getLabelPoint=function(r,t,e){var n=this.getCoordinate(),a=r.content.length;function o(k,R){var G=k;return(0,f.isArray)(G)&&(r.content.length===1?G.length<=2?G=G[k.length-1]:G=fb(G):G=G[R]),G}var s={content:r.content[e],x:0,y:0,start:{x:0,y:0},color:"#fff"};if(t&&this.geometry.type==="polygon"){var l=si(t.x,t.y);s.x=l[0],s.y=l[1]}else s.x=o(t.x,e),s.y=o(t.y,e);var u=(0,f.isArray)(t.shape)?t.shape[0]:t.shape;if(u==="funnel"||u==="pyramid"){var h=(0,f.get)(t,"nextPoints"),c=(0,f.get)(t,"points");if(h){var v=n.convert(c[1]),x=n.convert(h[1]);s.x=(v.x+x.x)/2,s.y=(v.y+x.y)/2}else if(u==="pyramid"){var v=n.convert(c[1]),x=n.convert(c[2]);s.x=(v.x+x.x)/2,s.y=(v.y+x.y)/2}}r.position&&this.setLabelPosition(s,t,e,r.position);var M=this.getLabelOffset(r,e,a);return s.start={x:s.x,y:s.y},s.x+=M.x,s.y+=M.y,s.color=t.color,s},i.prototype.getLabelAlign=function(r,t,e){var n="center",a=this.getCoordinate();if(a.isTransposed){var o=this.getDefaultOffset(r.offset);o<0?n="right":o===0?n="center":n="left",e>1&&t===0&&(n==="right"?n="left":n==="left"&&(n="right"))}return n},i.prototype.getLabelId=function(r){var t=this.geometry,e=t.type,n=t.getXScale(),a=t.getYScale(),o=r[Lt],s=t.getElementId(r);return e==="line"||e==="area"?s+=" "+o[n.field]:e==="path"&&(s+=" "+o[n.field]+"-"+o[a.field]),s},i.prototype.getLabelsRenderer=function(){var r=this.geometry,t=r.labelsContainer,e=r.labelOption,n=r.canvasRegion,a=r.animateOption,o=this.geometry.coordinate,s=this.labelsRenderer;return s||(s=new ub({container:t,layout:(0,f.get)(e,["cfg","layout"],{type:this.defaultLayout})}),this.labelsRenderer=s),s.region=n,s.animate=a?pc("label",o):!1,s},i.prototype.getLabelCfgs=function(r){var t=this,e=this.geometry,n=this.getDefaultLabelCfg(),a=e.type,o=e.theme,s=e.labelOption,l=e.scales,u=e.coordinate,h=s,c=h.fields,v=h.callback,x=h.cfg,M=c.map(function(R){return l[R]}),k=[];return(0,f.each)(r,function(R,G){var N=R[Lt],ot=t.getLabelText(N,M),ut;if(v){var Mt=c.map(function(ee){return N[ee]});if(ut=v.apply(void 0,Mt),(0,f.isNil)(ut)){k.push(null);return}}var zt=(0,j.__assign)((0,j.__assign)({id:t.getLabelId(R),data:N,mappingData:R,coordinate:u},x),ut),$t=zt.content;(0,f.isFunction)($t)?zt.content=$t(N,R,G):(0,f.isUndefined)($t)&&(zt.content=ot[0]),(0,f.isFunction)(zt.position)&&(zt.position=zt.position(N,R,G)),a==="polygon"||zt.offset<0&&!["line","point","path"].includes(a)?zt=(0,f.deepMix)({},n,o.innerLabels,zt):zt=(0,f.deepMix)({},n,o.labels,zt),k.push(zt)}),k},i.prototype.getLabelText=function(r,t){var e=[];return(0,f.each)(t,function(n){var a=r[n.field];(0,f.isArray)(a)?a=a.map(function(o){return n.getText(o)}):a=n.getText(a),(0,f.isNil)(a)||a===""?e.push(null):e.push(a)}),e},i.prototype.getOffsetVector=function(r){r===void 0&&(r=0);var t=this.getCoordinate();return t.isTransposed?t.applyMatrix(r,0):t.applyMatrix(0,r)},i.prototype.getGeometryShapes=function(){var r=this.geometry,t={};return(0,f.each)(r.elementsMap,function(e,n){t[n]=e.shape}),(0,f.each)(r.getOffscreenGroup().getChildren(),function(e){var n=r.getElementId(e.get("origin").mappingData);t[n]=e}),t},i}(),Ks=hb,cb=p(66002),vb="4.0.15",Eo={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},Nn={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},wa=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],db=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],pb={backgroundColor:"#141414",brandColor:wa[0],paletteQualitative10:wa,paletteQualitative20:db,paletteSemanticRed:"#F4664A",paletteSemanticGreen:"#30BF78",paletteSemanticYellow:"#FAAD14",fontFamily:`"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,
  "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
  "Noto Color Emoji"`,axisLineBorderColor:Nn[25],axisLineBorder:.5,axisLineDash:null,axisTitleTextFillColor:Nn[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTickLineBorderColor:Nn[25],axisTickLineLength:4,axisTickLineBorder:.5,axisSubTickLineBorderColor:Nn[15],axisSubTickLineLength:2,axisSubTickLineBorder:.5,axisLabelFillColor:Nn[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisGridBorderColor:Nn[15],axisGridBorder:.5,axisGridLineDash:null,legendTitleTextFillColor:Nn[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:wa[0],legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:Nn[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",sliderRailFillColor:Nn[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:Nn[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:Eo[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:Eo[25],annotationArcBorderColor:Nn[15],annotationArcBorder:.5,annotationLineBorderColor:Nn[25],annotationLineBorder:.5,annotationLineDash:null,annotationTextFillColor:Nn[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:Eo[95],annotationTextBorder:1.5,annotationRegionFillColor:Nn[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:Nn[25],tooltipCrosshairsBorder:.5,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"#1f1f1f",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 2px 4px rgba(0,0,0,.5)",tooltipContainerBorderRadius:3,tooltipTextFillColor:Nn[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:Nn[65],labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:Eo[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,labelLineBorder:.5,labelLineBorderColor:Nn[25],pointFillColor:wa[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:Eo[100],pointBorderOpacity:1,pointActiveBorderColor:Nn[100],pointSelectedBorder:2,pointSelectedBorderColor:Nn[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:wa[0],hollowPointBorderOpacity:.95,hollowPointFillColor:Eo[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:Nn[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:Nn[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:wa[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:wa[0],areaFillOpacity:.25,areaActiveFillColor:wa[0],areaActiveFillOpacity:.5,areaSelectedFillColor:wa[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:wa[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:Nn[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:Nn[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:wa[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:Nn[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:Nn[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:wa[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:Eo[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:Nn[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:Nn[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3},Fi=p(73890),Cn=p(21830),$s=p(46812),Ri=p(66631),Tn=p(27154),gb=p(9217),yb=p(5253),eG=p(39984),mb=p(98229),xb=p(35755);function bb(){return window?window.devicePixelRatio:1}function Cc(i,r,t,e){var n=i-t,a=r-e;return Math.sqrt(n*n+a*a)}function _o(i,r,t,e,n,a){return n>=i&&n<=i+t&&a>=r&&a<=r+e}function Hu(i,r){return!(r.minX>i.maxX||r.maxX<i.minX||r.minY>i.maxY||r.maxY<i.minY)}function wb(i,r){return!i||!r?i||r:{minX:Math.min(i.minX,r.minX),minY:Math.min(i.minY,r.minY),maxX:Math.max(i.maxX,r.maxX),maxY:Math.max(i.maxY,r.maxY)}}function Mc(i,r){return i[0]===r[0]&&i[1]===r[1]}var rG=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,nG=/[^\s\,]+/gi,Sb=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Cb=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Mb=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Ec=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function _c(i,r){var t=i.match(Ec);(0,Tn.default)(t,function(e){var n=e.split(":");r.addColorStop(n[0],n[1])})}function Eb(i,r,t){var e=Sb.exec(t),n=parseFloat(e[1])%360*(Math.PI/180),a=e[2],o=r.getBBox(),s,l;n>=0&&n<1/2*Math.PI?(s={x:o.minX,y:o.minY},l={x:o.maxX,y:o.maxY}):1/2*Math.PI<=n&&n<Math.PI?(s={x:o.maxX,y:o.minY},l={x:o.minX,y:o.maxY}):Math.PI<=n&&n<3/2*Math.PI?(s={x:o.maxX,y:o.maxY},l={x:o.minX,y:o.minY}):(s={x:o.minX,y:o.maxY},l={x:o.maxX,y:o.minY});var u=Math.tan(n),h=u*u,c=(l.x-s.x+u*(l.y-s.y))/(h+1)+s.x,v=u*(l.x-s.x+u*(l.y-s.y))/(h+1)+s.y,x=i.createLinearGradient(s.x,s.y,c,v);return _c(a,x),x}function _b(i,r,t){var e=Cb.exec(t),n=parseFloat(e[1]),a=parseFloat(e[2]),o=parseFloat(e[3]),s=e[4];if(o===0){var l=s.match(Ec);return l[l.length-1].split(":")[1]}var u=r.getBBox(),h=u.maxX-u.minX,c=u.maxY-u.minY,v=Math.sqrt(h*h+c*c)/2,x=i.createRadialGradient(u.minX+h*n,u.minY+c*a,0,u.minX+h/2,u.minY+c/2,o*v);return _c(s,x),x}function Ab(i,r,t){if(r.get("patternSource")&&r.get("patternSource")===t)return r.get("pattern");var e,n,a=Mb.exec(t),o=a[1],s=a[2];function l(){e=i.createPattern(n,o),r.set("pattern",e),r.set("patternSource",t)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return n=new Image,s.match(/^data:/i)||(n.crossOrigin="Anonymous"),n.src=s,n.complete?l():(n.onload=l,n.src=n.src),e}function Tb(i,r,t){if((0,Cn.default)(t)){if(t[1]==="("||t[2]==="("){if(t[0]==="l")return Eb(i,r,t);if(t[0]==="r")return _b(i,r,t);if(t[0]==="p")return Ab(i,r,t)}return t}}function Pb(i){var r=0,t=0,e=0,n=0;return(0,Ri.default)(i)?i.length===1?r=t=e=n=i[0]:i.length===2?(r=e=i[0],t=n=i[1]):i.length===3?(r=i[0],t=n=i[1],e=i[2]):(r=i[0],t=i[1],e=i[2],n=i[3]):r=t=e=n=i,[r,t,e,n]}function Qs(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function Wu(i,r){return Qs(i)*Qs(r)?(i[0]*r[0]+i[1]*r[1])/(Qs(i)*Qs(r)):1}function Ac(i,r){return(i[0]*r[1]<i[1]*r[0]?-1:1)*Math.acos(Wu(i,r))}function Tc(i,r){var t=r[1],e=r[2],n=(0,yb.default)((0,gb.default)(r[3]),Math.PI*2),a=r[4],o=r[5],s=i[0],l=i[1],u=r[6],h=r[7],c=Math.cos(n)*(s-u)/2+Math.sin(n)*(l-h)/2,v=-1*Math.sin(n)*(s-u)/2+Math.cos(n)*(l-h)/2,x=c*c/(t*t)+v*v/(e*e);x>1&&(t*=Math.sqrt(x),e*=Math.sqrt(x));var M=t*t*(v*v)+e*e*(c*c),k=M?Math.sqrt((t*t*(e*e)-M)/M):1;a===o&&(k*=-1),isNaN(k)&&(k=0);var R=e?k*t*v/e:0,G=t?k*-e*c/t:0,N=(s+u)/2+Math.cos(n)*R-Math.sin(n)*G,ot=(l+h)/2+Math.sin(n)*R+Math.cos(n)*G,ut=[(c-R)/t,(v-G)/e],Mt=[(-1*c-R)/t,(-1*v-G)/e],zt=Ac([1,0],ut),$t=Ac(ut,Mt);return Wu(ut,Mt)<=-1&&($t=Math.PI),Wu(ut,Mt)>=1&&($t=0),o===0&&$t>0&&($t=$t-2*Math.PI),o===1&&$t<0&&($t=$t+2*Math.PI),{cx:N,cy:ot,rx:Mc(i,[u,h])?0:t,ry:Mc(i,[u,h])?0:e,startAngle:zt,endAngle:zt+$t,xRotation:n,arcFlag:a,sweepFlag:o}}var Js=Math.sin,qs=Math.cos,ju=Math.atan2,tl=Math.PI;function Pc(i,r,t,e,n,a,o){var s=r.stroke,l=r.lineWidth,u=t-n,h=e-a,c=ju(h,u),v=new qu({type:"path",canvas:i.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*qs(tl/6)+","+10*Js(tl/6)+" L0,0 L"+10*qs(tl/6)+",-"+10*Js(tl/6),stroke:s,lineWidth:l}});v.translate(n,a),v.rotateAtPoint(n,a,c),i.set(o?"startArrowShape":"endArrowShape",v)}function Lc(i,r,t,e,n,a,o){var s=r.startArrow,l=r.endArrow,u=r.stroke,h=r.lineWidth,c=o?s:l,v=c.d,x=c.fill,M=c.stroke,k=c.lineWidth,R=(0,V.__rest)(c,["d","fill","stroke","lineWidth"]),G=t-n,N=e-a,ot=ju(N,G);v&&(n=n-qs(ot)*v,a=a-Js(ot)*v);var ut=new qu({type:"path",canvas:i.get("canvas"),isArrowShape:!0,attrs:(0,V.__assign)((0,V.__assign)({},R),{stroke:M||u,lineWidth:k||h,fill:x})});ut.translate(n,a),ut.rotateAtPoint(n,a,ot),i.set(o?"startArrowShape":"endArrowShape",ut)}function Ao(i,r,t,e,n){var a=ju(e-r,t-i);return{dx:qs(a)*n,dy:Js(a)*n}}function Uu(i,r,t,e,n,a){typeof r.startArrow=="object"?Lc(i,r,t,e,n,a,!0):r.startArrow?Pc(i,r,t,e,n,a,!0):i.set("startArrowShape",null)}function Zu(i,r,t,e,n,a){typeof r.endArrow=="object"?Lc(i,r,t,e,n,a,!1):r.endArrow?Pc(i,r,t,e,n,a,!1):i.set("startArrowShape",null)}var Oc={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function Ho(i,r){var t=r.attr();for(var e in t){var n=t[e],a=Oc[e]?Oc[e]:e;a==="matrix"&&n?i.transform(n[0],n[1],n[3],n[4],n[6],n[7]):a==="lineDash"&&i.setLineDash?(0,f.isArray)(n)&&i.setLineDash(n):(a==="strokeStyle"||a==="fillStyle"?n=Tb(i,r,n):a==="globalAlpha"&&(n=n*i.globalAlpha),i[a]=n)}}function Ku(i,r,t){for(var e=0;e<r.length;e++){var n=r[e];n.get("visible")?n.draw(i,t):n.skipDraw()}}function Ic(i,r,t,e){var n=t.path,a=t.startArrow,o=t.endArrow,s=[0,0],l=[0,0],u={dx:0,dy:0};r.beginPath();for(var h=0;h<n.length;h++){var c=n[h],v=c[0];if(h===0&&a&&a.d){var x=i.getStartTangent();u=Ao(x[0][0],x[0][1],x[1][0],x[1][1],a.d)}else if(h===n.length-2&&n[h+1][0]==="Z"&&o&&o.d){var M=n[h+1];if(M[0]==="Z"){var x=i.getEndTangent();u=Ao(x[0][0],x[0][1],x[1][0],x[1][1],o.d)}}else if(h===n.length-1&&o&&o.d&&n[0]!=="Z"){var x=i.getEndTangent();u=Ao(x[0][0],x[0][1],x[1][0],x[1][1],o.d)}var k=u.dx,R=u.dy;switch(v){case"M":r.moveTo(c[1]-k,c[2]-R),l=[c[1],c[2]];break;case"L":r.lineTo(c[1]-k,c[2]-R);break;case"Q":r.quadraticCurveTo(c[1],c[2],c[3]-k,c[4]-R);break;case"C":r.bezierCurveTo(c[1],c[2],c[3],c[4],c[5]-k,c[6]-R);break;case"A":{var G=void 0;e?(G=e[h],G||(G=Tc(s,c),e[h]=G)):G=Tc(s,c);var N=G.cx,ot=G.cy,ut=G.rx,Mt=G.ry,zt=G.startAngle,$t=G.endAngle,ee=G.xRotation,Ut=G.sweepFlag;if(r.ellipse)r.ellipse(N,ot,ut,Mt,ee,zt,$t,1-Ut);else{var le=ut>Mt?ut:Mt,xe=ut>Mt?1:ut/Mt,ye=ut>Mt?Mt/ut:1;r.translate(N,ot),r.rotate(ee),r.scale(xe,ye),r.arc(0,0,le,zt,$t,1-Ut),r.scale(1/xe,1/ye),r.rotate(-ee),r.translate(-N,-ot)}break}case"Z":r.closePath();break;default:break}if(v==="Z")s=l;else{var Oe=c.length;s=[c[Oe-2],c[Oe-1]]}}}function kc(i,r){var t=i.get("canvas");t&&(r==="remove"&&(i._cacheCanvasBBox=i.get("cacheCanvasBBox")),i.get("hasChanged")||(t.refreshElement(i,r,t),t.get("autoDraw")&&t.draw(),i.set("hasChanged",!0)))}function Lb(i){var r;if(i.destroyed)r=i._cacheCanvasBBox;else{var t=i.get("cacheCanvasBBox"),e=t&&!!(t.width&&t.height),n=i.getCanvasBBox(),a=n&&!!(n.width&&n.height);e&&a?r=wb(t,n):e?r=t:a&&(r=n)}return r}function Bc(i){if(!i.length)return null;var r=[],t=[],e=[],n=[];return(0,f.each)(i,function(a){var o=Lb(a);o&&(r.push(o.minX),t.push(o.minY),e.push(o.maxX),n.push(o.maxY))}),{minX:Math.min.apply(null,r),minY:Math.min.apply(null,t),maxX:Math.max.apply(null,e),maxY:Math.max.apply(null,n)}}function Ob(i,r){return!i||!r||!Hu(i,r)?null:{minX:Math.max(i.minX,r.minX),minY:Math.max(i.minY,r.minY),maxX:Math.min(i.maxX,r.maxX),maxY:Math.min(i.maxY,r.maxY)}}var Dc=p(41056),Ib=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.onCanvasChange=function(t){kc(this,t)},r.prototype.getShapeBase=function(){return b},r.prototype.getGroupBase=function(){return r},r.prototype._applyClip=function(t,e){e&&(t.save(),Ho(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},r.prototype.draw=function(t,e){var n=this.getChildren();n.length&&(t.save(),Ho(t,this),this._applyClip(t,this.getClip()),Ku(t,n,e),t.restore()),this.set("cacheCanvasBBox",this.getCanvasBBox()),this.set("hasChanged",!1)},r.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},r}(ze.AbstractGroup),$u=Ib,kb=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,V.__assign)((0,V.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},r.prototype.getShapeBase=function(){return b},r.prototype.getGroupBase=function(){return $u},r.prototype.onCanvasChange=function(t){kc(this,t)},r.prototype.calculateBBox=function(){var t=this.get("type"),e=this.getHitLineWidth(),n=(0,Dc.b)(t),a=n(this),o=e/2,s=a.x-o,l=a.y-o,u=a.x+a.width+o,h=a.y+a.height+o;return{x:s,minX:s,y:l,minY:l,width:a.width+e,height:a.height+e,maxX:u,maxY:h}},r.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},r.prototype.isStroke=function(){return!!this.attrs.stroke},r.prototype._applyClip=function(t,e){e&&(t.save(),Ho(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},r.prototype.draw=function(t,e){var n=this.getClip();if(e){var a=n?Bc([this,n]):this.getCanvasBBox();if(!Hu(e,a)){this.set("hasChanged",!1);return}}t.save(),Ho(t,this),this._applyClip(t,this.getClip()),this.drawPath(t),t.restore(),this._afterDraw()},r.prototype._afterDraw=function(){var t=this.getCanvasBBox(),e=this.getCanvas();if(this.set("cacheCanvasBBox",t),e){var n=e.getViewRange();this.set("isInView",Hu(t,n))}this.set("hasChanged",!1)},r.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},r.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},r.prototype.fill=function(t){t.fill()},r.prototype.stroke=function(t){t.stroke()},r.prototype.strokeAndFill=function(t){var e=this.attrs,n=e.lineWidth,a=e.opacity,o=e.strokeOpacity,s=e.fillOpacity;this.isFill()&&(!(0,Fi.default)(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.isStroke()&&n>0&&(!(0,Fi.default)(o)&&o!==1&&(t.globalAlpha=o),this.stroke(t)),this.afterDrawPath(t)},r.prototype.createPath=function(t){},r.prototype.afterDrawPath=function(t){},r.prototype.isInShape=function(t,e){var n=this.isStroke(),a=this.isFill(),o=this.getHitLineWidth();return this.isInStrokeOrPath(t,e,n,a,o)},r.prototype.isInStrokeOrPath=function(t,e,n,a,o){return!1},r.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},r}(ze.AbstractShape),Ta=kb,Bb=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,V.__assign)((0,V.__assign)({},t),{x:0,y:0,r:0})},r.prototype.isInStrokeOrPath=function(t,e,n,a,o){var s=this.attr(),l=s.x,u=s.y,h=s.r,c=o/2,v=Cc(l,u,t,e);return a&&n?v<=h+c:a?v<=h:n?v>=h-c&&v<=h+c:!1},r.prototype.createPath=function(t){var e=this.attr(),n=e.x,a=e.y,o=e.r;t.beginPath(),t.arc(n,a,o,0,Math.PI*2,!1),t.closePath()},r}(Ta),Db=Bb;function el(i,r,t,e){return i/(t*t)+r/(e*e)}var Fb=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,V.__assign)((0,V.__assign)({},t),{x:0,y:0,rx:0,ry:0})},r.prototype.isInStrokeOrPath=function(t,e,n,a,o){var s=this.attr(),l=o/2,u=s.x,h=s.y,c=s.rx,v=s.ry,x=(t-u)*(t-u),M=(e-h)*(e-h);return a&&n?el(x,M,c+l,v+l)<=1:a?el(x,M,c,v)<=1:n?el(x,M,c-l,v-l)>=1&&el(x,M,c+l,v+l)<=1:!1},r.prototype.createPath=function(t){var e=this.attr(),n=e.x,a=e.y,o=e.rx,s=e.ry;if(t.beginPath(),t.ellipse)t.ellipse(n,a,o,s,0,0,Math.PI*2,!1);else{var l=o>s?o:s,u=o>s?1:o/s,h=o>s?s/o:1;t.save(),t.translate(n,a),t.scale(u,h),t.arc(0,0,l,0,Math.PI*2),t.restore(),t.closePath()}},r}(Ta),Rb=Fb;function Fc(i){return i instanceof HTMLElement&&(0,Cn.default)(i.nodeName)&&i.nodeName.toUpperCase()==="CANVAS"}var Nb=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,V.__assign)((0,V.__assign)({},t),{x:0,y:0,width:0,height:0})},r.prototype.initAttrs=function(t){this._setImage(t.img)},r.prototype.isStroke=function(){return!1},r.prototype.isOnlyHitBox=function(){return!0},r.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},r.prototype._setImage=function(t){var e=this,n=this.attrs;if((0,Cn.default)(t)){var a=new Image;a.onload=function(){if(e.destroyed)return!1;e.attr("img",a),e.set("loading",!1),e._afterLoading();var o=e.get("callback");o&&o.call(e)},a.crossOrigin="Anonymous",a.src=t,this.set("loading",!0)}else t instanceof Image?(n.width||(n.width=t.width),n.height||(n.height=t.height)):Fc(t)&&(n.width||(n.width=Number(t.getAttribute("width"))),n.height||(n.height,Number(t.getAttribute("height"))))},r.prototype.onAttrChange=function(t,e,n){i.prototype.onAttrChange.call(this,t,e,n),t==="img"&&this._setImage(e)},r.prototype.createPath=function(t){if(this.get("loading")){this.set("toDraw",!0),this.set("context",t);return}var e=this.attr(),n=e.x,a=e.y,o=e.width,s=e.height,l=e.sx,u=e.sy,h=e.swidth,c=e.sheight,v=e.img;(v instanceof Image||Fc(v))&&(!(0,Fi.default)(l)&&!(0,Fi.default)(u)&&!(0,Fi.default)(h)&&!(0,Fi.default)(c)?t.drawImage(v,l,u,h,c,n,a,o,s):t.drawImage(v,n,a,o,s))},r}(Ta),Gb=Nb,$a=p(23646);function lo(i,r,t,e,n,a,o){var s=Math.min(i,t),l=Math.max(i,t),u=Math.min(r,e),h=Math.max(r,e),c=n/2;return a>=s-c&&a<=l+c&&o>=u-c&&o<=h+c?$a.default.pointToLine(i,r,t,e,a,o)<=n/2:!1}var Yb=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,V.__assign)((0,V.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},r.prototype.initAttrs=function(t){this.setArrow()},r.prototype.onAttrChange=function(t,e,n){i.prototype.onAttrChange.call(this,t,e,n),this.setArrow()},r.prototype.setArrow=function(){var t=this.attr(),e=t.x1,n=t.y1,a=t.x2,o=t.y2,s=t.startArrow,l=t.endArrow;s&&Uu(this,t,a,o,e,n),l&&Zu(this,t,e,n,a,o)},r.prototype.isInStrokeOrPath=function(t,e,n,a,o){if(!n||!o)return!1;var s=this.attr(),l=s.x1,u=s.y1,h=s.x2,c=s.y2;return lo(l,u,h,c,o,t,e)},r.prototype.createPath=function(t){var e=this.attr(),n=e.x1,a=e.y1,o=e.x2,s=e.y2,l=e.startArrow,u=e.endArrow,h={dx:0,dy:0},c={dx:0,dy:0};l&&l.d&&(h=Ao(n,a,o,s,e.startArrow.d)),u&&u.d&&(c=Ao(n,a,o,s,e.endArrow.d)),t.beginPath(),t.moveTo(n+h.dx,a+h.dy),t.lineTo(o-c.dx,s-c.dy)},r.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},r.prototype.getTotalLength=function(){var t=this.attr(),e=t.x1,n=t.y1,a=t.x2,o=t.y2;return $a.default.length(e,n,a,o)},r.prototype.getPoint=function(t){var e=this.attr(),n=e.x1,a=e.y1,o=e.x2,s=e.y2;return $a.default.pointAt(n,a,o,s,t)},r}(Ta),zb=Yb,Rc=p(74479),Xb={circle:function(i,r,t){return[["M",i-t,r],["A",t,t,0,1,0,i+t,r],["A",t,t,0,1,0,i-t,r]]},square:function(i,r,t){return[["M",i-t,r-t],["L",i+t,r-t],["L",i+t,r+t],["L",i-t,r+t],["Z"]]},diamond:function(i,r,t){return[["M",i-t,r],["L",i,r-t],["L",i+t,r],["L",i,r+t],["Z"]]},triangle:function(i,r,t){var e=t*Math.sin(1/3*Math.PI);return[["M",i-t,r+e],["L",i,r-e],["L",i+t,r+e],["Z"]]},"triangle-down":function(i,r,t){var e=t*Math.sin(1/3*Math.PI);return[["M",i-t,r-e],["L",i+t,r-e],["L",i,r+e],["Z"]]}},Vb=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.initAttrs=function(t){this._resetParamsCache()},r.prototype._resetParamsCache=function(){this.set("paramsCache",{})},r.prototype.onAttrChange=function(t,e,n){i.prototype.onAttrChange.call(this,t,e,n),["symbol","x","y","r","radius"].indexOf(t)!==-1&&this._resetParamsCache()},r.prototype.isOnlyHitBox=function(){return!0},r.prototype._getR=function(t){return(0,f.isNil)(t.r)?t.radius:t.r},r.prototype._getPath=function(){var t=this.attr(),e=t.x,n=t.y,a=t.symbol||"circle",o=this._getR(t),s,l;return(0,$s.default)(a)?(s=a,l=s(e,n,o),l=(0,Rc.Z)(l)):(s=r.Symbols[a],l=s(e,n,o)),s?l:(console.warn(a+" marker is not supported."),null)},r.prototype.createPath=function(t){var e=this._getPath(),n=this.get("paramsCache");Ic(this,t,{path:e},n)},r.Symbols=Xb,r}(Ta),Hb=Vb,rl=p(15730),Wb=p(49274),jb=p(26632);function Nc(i,r,t){var e=(0,jb.getOffScreenContext)();return i.createPath(e),e.isPointInPath(r,t)}var Ub=1e-6;function Qu(i){return Math.abs(i)<Ub?0:i<0?-1:1}function Zb(i,r,t){return(t[0]-i[0])*(r[1]-i[1])==(r[0]-i[0])*(t[1]-i[1])&&Math.min(i[0],r[0])<=t[0]&&t[0]<=Math.max(i[0],r[0])&&Math.min(i[1],r[1])<=t[1]&&t[1]<=Math.max(i[1],r[1])}function Gc(i,r,t){var e=!1,n=i.length;if(n<=2)return!1;for(var a=0;a<n;a++){var o=i[a],s=i[(a+1)%n];if(Zb(o,s,[r,t]))return!0;Qu(o[1]-t)>0!=Qu(s[1]-t)>0&&Qu(r-(t-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(e=!e)}return e}var Kb=p(2879);function ds(i,r,t,e,n,a,o,s){var l=(Math.atan2(s-r,o-i)+Math.PI*2)%(Math.PI*2);if(l<e||l>n)return!1;var u={x:i+t*Math.cos(l),y:r+t*Math.sin(l)};return Cc(u.x,u.y,o,s)<=a/2}var Ju=p(35600),Yc=p(77160);function $b(i){for(var r=!1,t=i.length,e=0;e<t;e++){var n=i[e],a=n[0];if(a==="C"||a==="A"||a==="Q"){r=!0;break}}return r}function Qb(i,r,t,e){for(var n=!1,a=r/2,o=0;o<i.length;o++){var s=i[o],l=s.currentPoint,u=s.params,h=s.prePoint,c=s.box;if(!(c&&!_o(c.x-a,c.y-a,c.width+r,c.height+r,t,e))){switch(s.command){case"L":case"Z":n=lo(h[0],h[1],l[0],l[1],r,t,e);break;case"Q":var v=Kb.default.pointDistance(h[0],h[1],u[1],u[2],u[3],u[4],t,e);n=v<=r/2;break;case"C":var x=rl.default.pointDistance(h[0],h[1],u[1],u[2],u[3],u[4],u[5],u[6],t,e);n=x<=r/2;break;case"A":var M=s.arcParams,k=M.cx,R=M.cy,G=M.rx,N=M.ry,ot=M.startAngle,ut=M.endAngle,Mt=M.xRotation,zt=[t,e,1],$t=[1,0,0,0,1,0,0,0,1],ee=G>N?G:N,Ut=G>N?1:G/N,le=G>N?N/G:1;Ju.translate($t,$t,[-k,-R]),Ju.rotate($t,$t,-Mt),Ju.scale($t,$t,[1/Ut,1/le]),Yc.transformMat3(zt,zt,$t),n=ds(0,0,ee,ot,ut,r,zt[0],zt[1]);break;default:break}if(n)break}}return n}function Jb(i){for(var r=i.length,t=[],e=[],n=[],a=0;a<r;a++){var o=i[a],s=o[0];s==="M"?(n.length&&(e.push(n),n=[]),n.push([o[1],o[2]])):s==="Z"?n.length&&(t.push(n),n=[]):n.push([o[1],o[2]])}return n.length>0&&e.push(n),{polygons:t,polylines:e}}var nl=(0,V.__assign)({hasArc:$b,extractPolygons:Jb,isPointInStroke:Qb},ze.PathUtil);function zc(i,r,t){for(var e=!1,n=0;n<i.length;n++){var a=i[n];if(e=Gc(a,r,t),e)break}return e}var qb=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,V.__assign)((0,V.__assign)({},t),{startArrow:!1,endArrow:!1})},r.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},r.prototype.onAttrChange=function(t,e,n){i.prototype.onAttrChange.call(this,t,e,n),t==="path"&&this._setPathArr(e),this.setArrow()},r.prototype._setPathArr=function(t){this.attrs.path=(0,Rc.Z)(t);var e=nl.hasArc(t);this.set("hasArc",e),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},r.prototype.getSegments=function(){var t=this.get("segements");return t||(t=(0,Wb.default)(this.attr("path")),this.set("segments",t)),t},r.prototype.setArrow=function(){var t=this.attr(),e=t.startArrow,n=t.endArrow;if(e){var a=this.getStartTangent();Uu(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}if(n){var a=this.getEndTangent();Zu(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}},r.prototype.isInStrokeOrPath=function(t,e,n,a,o){var s=this.getSegments(),l=this.get("hasArc"),u=!1;if(n&&(u=nl.isPointInStroke(s,o,t,e)),!u&&a)if(l)u=Nc(this,t,e);else{var h=this.attr("path"),c=nl.extractPolygons(h);u=zc(c.polygons,t,e)||zc(c.polylines,t,e)}return u},r.prototype.createPath=function(t){var e=this.attr(),n=this.get("paramsCache");Ic(this,t,e,n)},r.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},r.prototype.getTotalLength=function(){var t=this.get("totalLength");return(0,f.isNil)(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},r.prototype.getPoint=function(t){var e=this.get("tCache");e||(this._calculateCurve(),this._setTcache(),e=this.get("tCache"));var n,a,o=this.get("curve");if(!e||e.length===0)return o?{x:o[0][1],y:o[0][2]}:null;(0,f.each)(e,function(h,c){t>=h[0]&&t<=h[1]&&(n=(t-h[0])/(h[1]-h[0]),a=c)});var s=o[a];if((0,f.isNil)(s)||(0,f.isNil)(a))return null;var l=s.length,u=o[a+1];return rl.default.pointAt(s[l-2],s[l-1],u[1],u[2],u[3],u[4],u[5],u[6],n)},r.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",nl.pathToCurve(t))},r.prototype._setTcache=function(){var t=0,e=0,n=[],a,o,s,l,u=this.get("curve");if(!!u){if((0,f.each)(u,function(h,c){s=u[c+1],l=h.length,s&&(t+=rl.default.length(h[l-2],h[l-1],s[1],s[2],s[3],s[4],s[5],s[6])||0)}),this.set("totalLength",t),t===0){this.set("tCache",[]);return}(0,f.each)(u,function(h,c){s=u[c+1],l=h.length,s&&(a=[],a[0]=e/t,o=rl.default.length(h[l-2],h[l-1],s[1],s[2],s[3],s[4],s[5],s[6]),e+=o||0,a[1]=e/t,n.push(a))}),this.set("tCache",n)}},r.prototype.getStartTangent=function(){var t=this.getSegments(),e;if(t.length>1){var n=t[0].currentPoint,a=t[1].currentPoint,o=t[1].startTangent;e=[],o?(e.push([n[0]-o[0],n[1]-o[1]]),e.push([n[0],n[1]])):(e.push([a[0],a[1]]),e.push([n[0],n[1]]))}return e},r.prototype.getEndTangent=function(){var t=this.getSegments(),e=t.length,n;if(e>1){var a=t[e-2].currentPoint,o=t[e-1].currentPoint,s=t[e-1].endTangent;n=[],s?(n.push([o[0]-s[0],o[1]-s[1]]),n.push([o[0],o[1]])):(n.push([a[0],a[1]]),n.push([o[0],o[1]]))}return n},r}(Ta),qu=qb;function Xc(i,r,t,e,n){var a=i.length;if(a<2)return!1;for(var o=0;o<a-1;o++){var s=i[o][0],l=i[o][1],u=i[o+1][0],h=i[o+1][1];if(lo(s,l,u,h,r,t,e))return!0}if(n){var c=i[0],v=i[a-1];if(lo(c[0],c[1],v[0],v[1],r,t,e))return!0}return!1}var tw=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.isInStrokeOrPath=function(t,e,n,a,o){var s=this.attr().points,l=!1;return n&&(l=Xc(s,o,t,e,!0)),!l&&a&&(l=Gc(s,t,e)),l},r.prototype.createPath=function(t){var e=this.attr(),n=e.points;if(!(n.length<2)){t.beginPath();for(var a=0;a<n.length;a++){var o=n[a];a===0?t.moveTo(o[0],o[1]):t.lineTo(o[0],o[1])}t.closePath()}},r}(Ta),ew=tw,Vc=p(65386),rw=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,V.__assign)((0,V.__assign)({},t),{startArrow:!1,endArrow:!1})},r.prototype.initAttrs=function(t){this.setArrow()},r.prototype.onAttrChange=function(t,e,n){i.prototype.onAttrChange.call(this,t,e,n),this.setArrow(),["points"].indexOf(t)!==-1&&this._resetCache()},r.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},r.prototype.setArrow=function(){var t=this.attr(),e=this.attrs,n=e.points,a=e.startArrow,o=e.endArrow,s=n.length,l=n[0][0],u=n[0][1],h=n[s-1][0],c=n[s-1][1];a&&Uu(this,t,n[1][0],n[1][1],l,u),o&&Zu(this,t,n[s-2][0],n[s-2][1],h,c)},r.prototype.isFill=function(){return!1},r.prototype.isInStrokeOrPath=function(t,e,n,a,o){if(!n||!o)return!1;var s=this.attr().points;return Xc(s,o,t,e,!1)},r.prototype.isStroke=function(){return!0},r.prototype.createPath=function(t){var e=this.attr(),n=e.points,a=e.startArrow,o=e.endArrow,s=n.length;if(!(n.length<2)){var l=n[0][0],u=n[0][1],h=n[s-1][0],c=n[s-1][1];if(a&&a.d){var v=Ao(l,u,n[1][0],n[1][1],a.d);l+=v.dx,u+=v.dy}if(o&&o.d){var v=Ao(n[s-2][0],n[s-2][1],h,c,o.d);h-=v.dx,c-=v.dy}t.beginPath(),t.moveTo(l,u);for(var x=0;x<s-1;x++){var M=n[x];t.lineTo(M[0],M[1])}t.lineTo(h,c)}},r.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),n=this.get("endArrowShape");e&&e.draw(t),n&&n.draw(t)},r.prototype.getTotalLength=function(){var t=this.attr().points,e=this.get("totalLength");return(0,f.isNil)(e)?(this.set("totalLength",Vc.Z.length(t)),this.get("totalLength")):e},r.prototype.getPoint=function(t){var e=this.attr().points,n=this.get("tCache");n||(this._setTcache(),n=this.get("tCache"));var a,o;return(0,f.each)(n,function(s,l){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=l)}),$a.default.pointAt(e[o][0],e[o][1],e[o+1][0],e[o+1][1],a)},r.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var e=this.getTotalLength();if(!(e<=0)){var n=0,a=[],o,s;(0,f.each)(t,function(l,u){t[u+1]&&(o=[],o[0]=n/e,s=$a.default.length(l[0],l[1],t[u+1][0],t[u+1][1]),n+=s,o[1]=n/e,a.push(o))}),this.set("tCache",a)}}},r.prototype.getStartTangent=function(){var t=this.attr().points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},r.prototype.getEndTangent=function(){var t=this.attr().points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n},r}(Ta),nw=rw;function iw(i,r,t,e,n,a,o){var s=n/2;return _o(i-s,r-s,t,n,a,o)||_o(i+t-s,r-s,n,e,a,o)||_o(i+s,r+e-s,t,n,a,o)||_o(i-s,r+s,n,e,a,o)}function aw(i,r,t,e,n,a,o,s){var l=a/2;return lo(i+n,r,i+t-n,r,a,o,s)||lo(i+t,r+n,i+t,r+e-n,a,o,s)||lo(i+t-n,r+e,i+n,r+e,a,o,s)||lo(i,r+e-n,i,r+n,a,o,s)||ds(i+t-n,r+n,n,1.5*Math.PI,2*Math.PI,a,o,s)||ds(i+t-n,r+e-n,n,0,.5*Math.PI,a,o,s)||ds(i+n,r+e-n,n,.5*Math.PI,Math.PI,a,o,s)||ds(i+n,r+n,n,Math.PI,1.5*Math.PI,a,o,s)}var ow=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,V.__assign)((0,V.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},r.prototype.isInStrokeOrPath=function(t,e,n,a,o){var s=this.attr(),l=s.x,u=s.y,h=s.width,c=s.height,v=s.radius;if(v){var M=!1;return n&&(M=aw(l,u,h,c,v,o,t,e)),!M&&a&&(M=Nc(this,t,e)),M}else{var x=o/2;if(a&&n)return _o(l-x,u-x,h+x,c+x,t,e);if(a)return _o(l,u,h,c,t,e);if(n)return iw(l,u,h,c,o,t,e)}},r.prototype.createPath=function(t){var e=this.attr(),n=e.x,a=e.y,o=e.width,s=e.height,l=e.radius;if(t.beginPath(),l===0)t.rect(n,a,o,s);else{var u=Pb(l),h=u[0],c=u[1],v=u[2],x=u[3];t.moveTo(n+h,a),t.lineTo(n+o-c,a),c!==0&&t.arc(n+o-c,a+c,c,-Math.PI/2,0),t.lineTo(n+o,a+s-v),v!==0&&t.arc(n+o-v,a+s-v,v,0,Math.PI/2),t.lineTo(n+x,a+s),x!==0&&t.arc(n+x,a+s-x,x,Math.PI/2,Math.PI),t.lineTo(n,a+h),h!==0&&t.arc(n+h,a+h,h,Math.PI,Math.PI*1.5),t.closePath()}},r}(Ta),sw=ow,Hc=p(8914),lw=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,V.__assign)((0,V.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},r.prototype.isOnlyHitBox=function(){return!0},r.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},r.prototype._assembleFont=function(){var t=this.attrs;t.font=(0,Hc.assembleFont)(t)},r.prototype._setText=function(t){var e=null;(0,Cn.default)(t)&&t.indexOf(`
`)!==-1&&(e=t.split(`
`)),this.set("textArr",e)},r.prototype.onAttrChange=function(t,e,n){i.prototype.onAttrChange.call(this,t,e,n),t.startsWith("font")&&this._assembleFont(),t==="text"&&this._setText(e)},r.prototype._getSpaceingY=function(){var t=this.attrs,e=t.lineHeight,n=t.fontSize*1;return e?e-n:n*.14},r.prototype._drawTextArr=function(t,e,n){var a=this.attrs,o=a.textBaseline,s=a.x,l=a.y,u=a.fontSize*1,h=this._getSpaceingY(),c=(0,Hc.getTextHeight)(a.text,a.fontSize,a.lineHeight),v;(0,Tn.default)(e,function(x,M){v=l+M*(h+u)-c+u,o==="middle"&&(v+=c-u-(c-u)/2),o==="top"&&(v+=c-u),n?t.fillText(x,s,v):t.strokeText(x,s,v)})},r.prototype._drawText=function(t,e){var n=this.attr(),a=n.x,o=n.y,s=this.get("textArr");if(s)this._drawTextArr(t,s,e);else{var l=n.text;e?t.fillText(l,a,o):t.strokeText(l,a,o)}},r.prototype.strokeAndFill=function(t){var e=this.attrs,n=e.lineWidth,a=e.opacity,o=e.strokeOpacity,s=e.fillOpacity;this.isStroke()&&n>0&&(!(0,Fi.default)(o)&&o!==1&&(t.globalAlpha=a),this.stroke(t)),this.isFill()&&(!(0,Fi.default)(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.afterDrawPath(t)},r.prototype.fill=function(t){this._drawText(t,!0)},r.prototype.stroke=function(t){this._drawText(t,!1)},r}(Ta),uw=lw,fw=p(4555),iG=p(85424),hw=p(22487),Wc=p(6052);function cw(i,r){if(r){var t=(0,Wc.U_)(r);return(0,Wc.rG)(t,i)}return i}function jc(i,r,t){var e=i.getTotalMatrix();if(e){var n=cw([r,t,1],e),a=n[0],o=n[1];return[a,o]}return[r,t]}function Uc(i,r,t){if(i.isCanvas&&i.isCanvas())return!0;if(!(0,hw.isAllowCapture)(i)&&i.cfg.isInView===!1)return!1;if(i.cfg.clipShape){var e=jc(i,r,t),n=e[0],a=e[1];if(i.isClipped(n,a))return!1}var o=i.cfg.cacheCanvasBBox;return o||(o=i.getCanvasBBox()),r>=o.minX&&r<=o.maxX&&t>=o.minY&&t<=o.maxY}function Zc(i,r,t){if(!Uc(i,r,t))return null;for(var e=null,n=i.getChildren(),a=n.length,o=a-1;o>=0;o--){var s=n[o];if(s.isGroup())e=Zc(s,r,t);else if(Uc(s,r,t)){var l=s,u=jc(s,r,t),h=u[0],c=u[1];l.isInShape(h,c)&&(e=s)}if(e)break}return e}var vw=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},r.prototype.onCanvasChange=function(t){(t==="attr"||t==="sort"||t==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},r.prototype.getShapeBase=function(){return b},r.prototype.getGroupBase=function(){return $u},r.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||bb();return t>=1?Math.ceil(t):1},r.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.get("width"),maxY:this.get("height")}},r.prototype.createDom=function(){var t=document.createElement("canvas"),e=t.getContext("2d");return this.set("context",e),t},r.prototype.setDOMSize=function(t,e){i.prototype.setDOMSize.call(this,t,e);var n=this.get("context"),a=this.get("el"),o=this.getPixelRatio();a.width=o*t,a.height=o*e,o>1&&n.scale(o,o)},r.prototype.clear=function(){i.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),e=this.get("el");t.clearRect(0,0,e.width,e.height)},r.prototype.getShape=function(t,e){return this.get("quickHit")?Zc(this,t,e):i.prototype.getShape.call(this,t,e,null)},r.prototype._getRefreshRegion=function(){var t=this.get("refreshElements"),e=this.getViewRange(),n;if(t.length&&t[0]===this)n=e;else if(n=Bc(t),n){n.minX=Math.floor(n.minX),n.minY=Math.floor(n.minY),n.maxX=Math.ceil(n.maxX),n.maxY=Math.ceil(n.maxY);var a=this.get("clipView");a&&(n=Ob(n,e))}return n},r.prototype.refreshElement=function(t){var e=this.get("refreshElements");e.push(t)},r.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&((0,xb.default)(t),this.set("drawFrame",null),this.set("refreshElements",[]))},r.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},r.prototype._drawAll=function(){var t=this.get("context"),e=this.get("el"),n=this.getChildren();t.clearRect(0,0,e.width,e.height),Ho(t,this),Ku(t,n),this.set("refreshElements",[])},r.prototype._drawRegion=function(){var t=this.get("context"),e=this.get("refreshElements"),n=this.getChildren(),a=this._getRefreshRegion();a&&(t.clearRect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.save(),t.beginPath(),t.rect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.clip(),Ho(t,this),Ku(t,n,a),t.restore()),(0,Tn.default)(e,function(o){o.get("hasChanged")&&o.set("hasChanged",!1)}),this.set("refreshElements",[])},r.prototype._startDraw=function(){var t=this,e=this.get("drawFrame");e||(e=(0,mb.default)(function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)}),this.set("drawFrame",e))},r.prototype.skipDraw=function(){},r}(ze.AbstractCanvas),Kc=vw,dw=p(71270),pw=dw.version,tf={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},bn={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},aG=null;function Sa(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function $c(i){var r=tf[i.type],t=i.getParent();if(!r)throw new Error("the type "+i.type+" is not supported by svg");var e=Sa(r);if(i.get("id")&&(e.id=i.get("id")),i.set("el",e),i.set("attrs",{}),t){var n=t.get("el");n||(n=t.createDom(),t.set("el",n)),n.appendChild(e)}return e}function Qc(i,r){var t=i.get("el"),e=(0,f.toArray)(t.children).sort(r),n=document.createDocumentFragment();e.forEach(function(a){n.appendChild(a)}),t.appendChild(n)}function gw(i,r){var t=i.parentNode,e=Array.from(t.childNodes).filter(function(s){return s.nodeType===1&&s.nodeName.toLowerCase()!=="defs"}),n=e[r],a=e.indexOf(i);if(n){if(a>r)t.insertBefore(i,n);else if(a<r){var o=e[r+1];o?t.insertBefore(i,o):t.appendChild(i)}}else t.appendChild(i)}function yw(i,r){var t=i.cfg.el,e=i.attr(),n={dx:e.shadowOffsetX,dy:e.shadowOffsetY,blur:e.shadowBlur,color:e.shadowColor};if(!n.dx&&!n.dy&&!n.blur&&!n.color)t.removeAttribute("filter");else{var a=r.find("filter",n);a||(a=r.addShadow(n)),t.setAttribute("filter","url(#"+a+")")}}function ps(i){var r=i.attr().matrix;if(r){for(var t=i.cfg.el,e=[],n=0;n<9;n+=3)e.push(r[n]+","+r[n+1]);e=e.join(","),e.indexOf("NaN")===-1?t.setAttribute("transform","matrix("+e+")"):console.warn("invalid matrix:",r)}}function gs(i,r){var t=i.getClip(),e=i.get("el");if(!t)e.removeAttribute("clip-path");else if(t&&!e.hasAttribute("clip-path")){$c(t),t.createPath(r);var n=r.addClip(t);e.setAttribute("clip-path","url(#"+n+")")}}function Jc(i,r){r.forEach(function(t){t.draw(i)})}function qc(i,r){var t=i.get("canvas");if(t&&t.get("autoDraw")){var e=t.get("context"),n=i.getParent(),a=n?n.getChildren():[t],o=i.get("el");if(r==="remove"){var s=i.get("isClipShape");if(s){var l=o&&o.parentNode,u=l&&l.parentNode;l&&u&&u.removeChild(l)}else o&&o.parentNode&&o.parentNode.removeChild(o)}else if(r==="show")o.setAttribute("visibility","visible");else if(r==="hide")o.setAttribute("visibility","hidden");else if(r==="zIndex")gw(o,a.indexOf(i));else if(r==="sort"){var h=i.get("children");h&&h.length&&Qc(i,function(c,v){return h.indexOf(c)-h.indexOf(v)?1:0})}else r==="clear"?o&&(o.innerHTML=""):r==="matrix"?ps(i):r==="clip"?gs(i,e):r==="attr"||r==="add"&&i.draw(e)}}var mw=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.isEntityGroup=function(){return!0},r.prototype.createDom=function(){var t=Sa("g");this.set("el",t);var e=this.getParent();if(e){var n=e.get("el");n||(n=e.createDom(),e.set("el",n)),n.appendChild(t)}return t},r.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t);var e=this.get("canvas");if(e&&e.get("autoDraw")){var n=e.get("context");this.createPath(n,t)}},r.prototype.onCanvasChange=function(t){qc(this,t)},r.prototype.getShapeBase=function(){return P},r.prototype.getGroupBase=function(){return r},r.prototype.draw=function(t){var e=this.getChildren(),n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||this.createDom(),gs(this,t),this.createPath(t),e.length&&Jc(t,e))},r.prototype.createPath=function(t,e){var n=this.attr(),a=this.get("el");(0,f.each)(e||n,function(o,s){bn[s]&&a.setAttribute(bn[s],o)}),ps(this)},r}(ze.AbstractGroup),ef=mw,xw=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return r.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,V.__assign)((0,V.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},r.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t);var e=this.get("canvas");if(e&&e.get("autoDraw")){var n=e.get("context");this.draw(n,t)}},r.prototype.getShapeBase=function(){return P},r.prototype.getGroupBase=function(){return ef},r.prototype.onCanvasChange=function(t){qc(this,t)},r.prototype.calculateBBox=function(){var t=this.get("el"),e=null;if(t)e=t.getBBox();else{var n=(0,Dc.b)(this.get("type"));n&&(e=n(this))}if(e){var a=e.x,o=e.y,s=e.width,l=e.height,u=this.getHitLineWidth(),h=u/2,c=a-h,v=o-h,x=a+s+h,M=o+l+h;return{x:c,y:v,minX:c,minY:v,maxX:x,maxY:M,width:s+u,height:l+u}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},r.prototype.isFill=function(){var t=this.attr(),e=t.fill,n=t.fillStyle;return(e||n||this.isClipShape())&&this.canFill},r.prototype.isStroke=function(){var t=this.attr(),e=t.stroke,n=t.strokeStyle;return(e||n)&&this.canStroke},r.prototype.draw=function(t,e){var n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||$c(this),gs(this,t),this.createPath(t,e),this.shadow(t,e),this.strokeAndFill(t,e),this.transform(e))},r.prototype.createPath=function(t,e){},r.prototype.strokeAndFill=function(t,e){var n=e||this.attr(),a=n.fill,o=n.fillStyle,s=n.stroke,l=n.strokeStyle,u=n.fillOpacity,h=n.strokeOpacity,c=n.lineWidth,v=this.get("el");this.canFill&&(e?"fill"in n?this._setColor(t,"fill",a):"fillStyle"in n&&this._setColor(t,"fill",o):this._setColor(t,"fill",a||o),u&&v.setAttribute(bn.fillOpacity,u)),this.canStroke&&c>0&&(e?"stroke"in n?this._setColor(t,"stroke",s):"strokeStyle"in n&&this._setColor(t,"stroke",l):this._setColor(t,"stroke",s||l),h&&v.setAttribute(bn.strokeOpacity,h),c&&v.setAttribute(bn.lineWidth,c))},r.prototype._setColor=function(t,e,n){var a=this.get("el");if(!n){a.setAttribute(bn[e],"none");return}if(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n)){var o=t.find("gradient",n);o||(o=t.addGradient(n)),a.setAttribute(bn[e],"url(#"+o+")")}else if(/^[p,P]{1}[\s]*\(/.test(n)){var o=t.find("pattern",n);o||(o=t.addPattern(n)),a.setAttribute(bn[e],"url(#"+o+")")}else a.setAttribute(bn[e],n)},r.prototype.shadow=function(t,e){var n=this.attr(),a=e||n,o=a.shadowOffsetX,s=a.shadowOffsetY,l=a.shadowBlur,u=a.shadowColor;(o||s||l||u)&&yw(this,t)},r.prototype.transform=function(t){var e=this.attr(),n=(t||e).matrix;n&&ps(this)},r.prototype.isInShape=function(t,e){return this.isPointInPath(t,e)},r.prototype.isPointInPath=function(t,e){var n=this.get("el"),a=this.get("canvas"),o=a.get("el").getBoundingClientRect(),s=t+o.left,l=e+o.top,u=document.elementFromPoint(s,l);return!!(u&&u.isEqualNode(n))},r.prototype.getHitLineWidth=function(){var t=this.attrs,e=t.lineWidth,n=t.lineAppendWidth;return this.isStroke()?e+n:0},r}(ze.AbstractShape),Ca=xw,bw=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return r.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,V.__assign)((0,V.__assign)({},t),{x:0,y:0,r:0})},r.prototype.createPath=function(t,e){var n=this.attr(),a=this.get("el");(0,f.each)(e||n,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):bn[s]&&a.setAttribute(bn[s],o)})},r}(Ca),ww=bw,Sw=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return r.prototype.createPath=function(t,e){var n=this.attr(),a=this.get("el");(0,f.each)(e||n,function(o,s){bn[s]&&a.setAttribute(bn[s],o)}),a.innerHTML=n.html},r}(Ca),Cw=Sw,Mw=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return r.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,V.__assign)((0,V.__assign)({},t),{x:0,y:0,rx:0,ry:0})},r.prototype.createPath=function(t,e){var n=this.attr(),a=this.get("el");(0,f.each)(e||n,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):bn[s]&&a.setAttribute(bn[s],o)})},r}(Ca),Ew=Mw,_w=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return r.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,V.__assign)((0,V.__assign)({},t),{x:0,y:0,width:0,height:0})},r.prototype.createPath=function(t,e){var n=this,a=this.attr(),o=this.get("el");(0,f.each)(e||a,function(s,l){l==="img"?n._setImage(a.img):bn[l]&&o.setAttribute(bn[l],s)})},r.prototype.setAttr=function(t,e){this.attrs[t]=e,t==="img"&&this._setImage(e)},r.prototype._setImage=function(t){var e=this.attr(),n=this.get("el");if((0,f.isString)(t))n.setAttribute("href",t);else if(t instanceof window.Image)e.width||(n.setAttribute("width",t.width),this.attr("width",t.width)),e.height||(n.setAttribute("height",t.height),this.attr("height",t.height)),n.setAttribute("href",t.src);else if(t instanceof HTMLElement&&(0,f.isString)(t.nodeName)&&t.nodeName.toUpperCase()==="CANVAS")n.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var a=document.createElement("canvas");a.setAttribute("width",""+t.width),a.setAttribute("height",""+t.height),a.getContext("2d").putImageData(t,0,0),e.width||(n.setAttribute("width",""+t.width),this.attr("width",t.width)),e.height||(n.setAttribute("height",""+t.height),this.attr("height",t.height)),n.setAttribute("href",a.toDataURL())}},r}(Ca),Aw=_w,Tw=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return r.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,V.__assign)((0,V.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},r.prototype.createPath=function(t,e){var n=this.attr(),a=this.get("el");(0,f.each)(e||n,function(o,s){if(s==="startArrow"||s==="endArrow")if(o){var l=(0,f.isObject)(o)?t.addArrow(n,bn[s]):t.getDefaultArrow(n,bn[s]);a.setAttribute(bn[s],"url(#"+l+")")}else a.removeAttribute(bn[s]);else bn[s]&&a.setAttribute(bn[s],o)})},r.prototype.getTotalLength=function(){var t=this.attr(),e=t.x1,n=t.y1,a=t.x2,o=t.y2;return $a.default.length(e,n,a,o)},r.prototype.getPoint=function(t){var e=this.attr(),n=e.x1,a=e.y1,o=e.x2,s=e.y2;return $a.default.pointAt(n,a,o,s,t)},r}(Ca),Pw=Tw,il={circle:function(i,r,t){return[["M",i,r],["m",-t,0],["a",t,t,0,1,0,t*2,0],["a",t,t,0,1,0,-t*2,0]]},square:function(i,r,t){return[["M",i-t,r-t],["L",i+t,r-t],["L",i+t,r+t],["L",i-t,r+t],["Z"]]},diamond:function(i,r,t){return[["M",i-t,r],["L",i,r-t],["L",i+t,r],["L",i,r+t],["Z"]]},triangle:function(i,r,t){var e=t*Math.sin(1/3*Math.PI);return[["M",i-t,r+e],["L",i,r-e],["L",i+t,r+e],["z"]]},triangleDown:function(i,r,t){var e=t*Math.sin(1/3*Math.PI);return[["M",i-t,r-e],["L",i+t,r-e],["L",i,r+e],["Z"]]}},tv={get:function(i){return il[i]},register:function(i,r){il[i]=r},remove:function(i){delete il[i]},getAll:function(){return il}},Lw=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return r.prototype.createPath=function(t){var e=this.get("el");e.setAttribute("d",this._assembleMarker())},r.prototype._assembleMarker=function(){var t=this._getPath();return(0,f.isArray)(t)?t.map(function(e){return e.join(" ")}).join(""):t},r.prototype._getPath=function(){var t=this.attr(),e=t.x,n=t.y,a=t.r||t.radius,o=t.symbol||"circle",s;return(0,f.isFunction)(o)?s=o:s=tv.get(o),s?s(e,n,a):(console.warn(s+" symbol is not exist."),null)},r.symbolsFactory=tv,r}(Ca),Ow=Lw,Iw=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return r.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,V.__assign)((0,V.__assign)({},t),{startArrow:!1,endArrow:!1})},r.prototype.createPath=function(t,e){var n=this,a=this.attr(),o=this.get("el");(0,f.each)(e||a,function(s,l){if(l==="path"&&(0,f.isArray)(s))o.setAttribute("d",n._formatPath(s));else if(l==="startArrow"||l==="endArrow")if(s){var u=(0,f.isObject)(s)?t.addArrow(a,bn[l]):t.getDefaultArrow(a,bn[l]);o.setAttribute(bn[l],"url(#"+u+")")}else o.removeAttribute(bn[l]);else bn[l]&&o.setAttribute(bn[l],s)})},r.prototype._formatPath=function(t){var e=t.map(function(n){return n.join(" ")}).join("");return~e.indexOf("NaN")?"":e},r.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},r.prototype.getPoint=function(t){var e=this.get("el"),n=this.getTotalLength(),a=e?e.getPointAtLength(t*n):null;return a?{x:a.x,y:a.y}:null},r}(Ca),kw=Iw,Bw=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return r.prototype.createPath=function(t,e){var n=this.attr(),a=this.get("el");(0,f.each)(e||n,function(o,s){s==="points"&&(0,f.isArray)(o)&&o.length>=2?a.setAttribute("points",o.map(function(l){return l[0]+","+l[1]}).join(" ")):bn[s]&&a.setAttribute(bn[s],o)})},r}(Ca),Dw=Bw,Fw=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return r.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,V.__assign)((0,V.__assign)({},t),{startArrow:!1,endArrow:!1})},r.prototype.onAttrChange=function(t,e,n){i.prototype.onAttrChange.call(this,t,e,n),["points"].indexOf(t)!==-1&&this._resetCache()},r.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},r.prototype.createPath=function(t,e){var n=this.attr(),a=this.get("el");(0,f.each)(e||n,function(o,s){s==="points"&&(0,f.isArray)(o)&&o.length>=2?a.setAttribute("points",o.map(function(l){return l[0]+","+l[1]}).join(" ")):bn[s]&&a.setAttribute(bn[s],o)})},r.prototype.getTotalLength=function(){var t=this.attr().points,e=this.get("totalLength");return(0,f.isNil)(e)?(this.set("totalLength",Vc.Z.length(t)),this.get("totalLength")):e},r.prototype.getPoint=function(t){var e=this.attr().points,n=this.get("tCache");n||(this._setTcache(),n=this.get("tCache"));var a,o;return(0,f.each)(n,function(s,l){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=l)}),$a.default.pointAt(e[o][0],e[o][1],e[o+1][0],e[o+1][1],a)},r.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var e=this.getTotalLength();if(!(e<=0)){var n=0,a=[],o,s;(0,f.each)(t,function(l,u){t[u+1]&&(o=[],o[0]=n/e,s=$a.default.length(l[0],l[1],t[u+1][0],t[u+1][1]),n+=s,o[1]=n/e,a.push(o))}),this.set("tCache",a)}}},r.prototype.getStartTangent=function(){var t=this.attr().points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},r.prototype.getEndTangent=function(){var t=this.attr().points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n},r}(Ca),Rw=Fw,Nw=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,Gw=/[^\s\,]+/gi;function Yw(i){var r=0,t=0,e=0,n=0;return(0,f.isArray)(i)?i.length===1?r=t=e=n=i[0]:i.length===2?(r=e=i[0],t=n=i[1]):i.length===3?(r=i[0],t=n=i[1],e=i[2]):(r=i[0],t=i[1],e=i[2],n=i[3]):r=t=e=n=i,{r1:r,r2:t,r3:e,r4:n}}function oG(i){if(i=i||[],isArray(i))return i;if(isString(i))return i=i.match(Nw),each(i,function(r,t){if(r=r.match(Gw),r[0].length>1){var e=r[0].charAt(0);r.splice(1,0,r[0].substr(1)),r[0]=e}each(r,function(n,a){isNaN(n)||(r[a]=+n)}),i[t]=r}),i}var zw=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return r.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,V.__assign)((0,V.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},r.prototype.createPath=function(t,e){var n=this,a=this.attr(),o=this.get("el"),s=!1,l=["x","y","width","height","radius"];(0,f.each)(e||a,function(u,h){l.indexOf(h)!==-1&&!s?(o.setAttribute("d",n._assembleRect(a)),s=!0):l.indexOf(h)===-1&&bn[h]&&o.setAttribute(bn[h],u)})},r.prototype._assembleRect=function(t){var e=t.x,n=t.y,a=t.width,o=t.height,s=t.radius;if(!s)return"M "+e+","+n+" l "+a+",0 l 0,"+o+" l"+-a+" 0 z";var l=Yw(s);(0,f.isArray)(s)?s.length===1?l.r1=l.r2=l.r3=l.r4=s[0]:s.length===2?(l.r1=l.r3=s[0],l.r2=l.r4=s[1]):s.length===3?(l.r1=s[0],l.r2=l.r4=s[1],l.r3=s[2]):(l.r1=s[0],l.r2=s[1],l.r3=s[2],l.r4=s[3]):l.r1=l.r2=l.r3=l.r4=s;var u=[["M "+(e+l.r1)+","+n],["l "+(a-l.r1-l.r2)+",0"],["a "+l.r2+","+l.r2+",0,0,1,"+l.r2+","+l.r2],["l 0,"+(o-l.r2-l.r3)],["a "+l.r3+","+l.r3+",0,0,1,"+-l.r3+","+l.r3],["l "+(l.r3+l.r4-a)+",0"],["a "+l.r4+","+l.r4+",0,0,1,"+-l.r4+","+-l.r4],["l 0,"+(l.r4+l.r1-o)],["a "+l.r1+","+l.r1+",0,0,1,"+l.r1+","+-l.r1],["z"]];return u.join(" ")},r}(Ca),Xw=zw,Vw=p(56463),ev=.3,Hw={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},Ww={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},jw={left:"left",start:"left",center:"middle",right:"end",end:"end"},Uw=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return r.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,V.__assign)((0,V.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},r.prototype.createPath=function(t,e){var n=this,a=this.attr(),o=this.get("el");this._setFont(),(0,f.each)(e||a,function(s,l){l==="text"?n._setText(""+s):l==="matrix"&&s?ps(n):bn[l]&&o.setAttribute(bn[l],s)}),o.setAttribute("paint-order","stroke"),o.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},r.prototype._setFont=function(){var t=this.get("el"),e=this.attr(),n=e.textBaseline,a=e.textAlign,o=(0,Vw.detect)();o&&o.name==="firefox"?t.setAttribute("dominant-baseline",Ww[n]||"alphabetic"):t.setAttribute("alignment-baseline",Hw[n]||"baseline"),t.setAttribute("text-anchor",jw[a]||"left")},r.prototype._setText=function(t){var e=this.get("el"),n=this.attr(),a=n.x,o=n.textBaseline,s=o===void 0?"bottom":o;if(!t)e.innerHTML="";else if(~t.indexOf(`
`)){var l=t.split(`
`),u=l.length-1,h="";(0,f.each)(l,function(c,v){v===0?s==="alphabetic"?h+='<tspan x="'+a+'" dy="'+-u+'em">'+c+"</tspan>":s==="top"?h+='<tspan x="'+a+'" dy="0.9em">'+c+"</tspan>":s==="middle"?h+='<tspan x="'+a+'" dy="'+-(u-1)/2+'em">'+c+"</tspan>":s==="bottom"?h+='<tspan x="'+a+'" dy="-'+(u+ev)+'em">'+c+"</tspan>":s==="hanging"&&(h+='<tspan x="'+a+'" dy="'+(-(u-1)-ev)+'em">'+c+"</tspan>"):h+='<tspan x="'+a+'" dy="1em">'+c+"</tspan>"}),e.innerHTML=h}else e.innerHTML=t},r}(Ca),Zw=Uw,Kw=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,$w=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Qw=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function rv(i){var r=i.match(Qw);if(!r)return"";var t="";return r.sort(function(e,n){return e=e.split(":"),n=n.split(":"),Number(e[0])-Number(n[0])}),(0,f.each)(r,function(e){e=e.split(":"),t+='<stop offset="'+e[0]+'" stop-color="'+e[1]+'"></stop>'}),t}function Jw(i,r){var t=Kw.exec(i),e=(0,f.mod)((0,f.toRadian)(parseFloat(t[1])),Math.PI*2),n=t[2],a,o;e>=0&&e<.5*Math.PI?(a={x:0,y:0},o={x:1,y:1}):.5*Math.PI<=e&&e<Math.PI?(a={x:1,y:0},o={x:0,y:1}):Math.PI<=e&&e<1.5*Math.PI?(a={x:1,y:1},o={x:0,y:0}):(a={x:0,y:1},o={x:1,y:0});var s=Math.tan(e),l=s*s,u=(o.x-a.x+s*(o.y-a.y))/(l+1)+a.x,h=s*(o.x-a.x+s*(o.y-a.y))/(l+1)+a.y;r.setAttribute("x1",a.x),r.setAttribute("y1",a.y),r.setAttribute("x2",u),r.setAttribute("y2",h),r.innerHTML=rv(n)}function qw(i,r){var t=$w.exec(i),e=parseFloat(t[1]),n=parseFloat(t[2]),a=parseFloat(t[3]),o=t[4];r.setAttribute("cx",e),r.setAttribute("cy",n),r.setAttribute("r",a),r.innerHTML=rv(o)}var tS=function(){function i(r){this.cfg={};var t=null,e=(0,f.uniqueId)("gradient_");return r.toLowerCase()[0]==="l"?(t=Sa("linearGradient"),Jw(r,t)):(t=Sa("radialGradient"),qw(r,t)),t.setAttribute("id",e),this.el=t,this.id=e,this.cfg=r,this}return i.prototype.match=function(r,t){return this.cfg===t},i}(),eS=tS,rS={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},nS={x:"-40%",y:"-40%",width:"200%",height:"200%"},iS=function(){function i(r){this.type="filter",this.cfg={},this.type="filter";var t=Sa("filter");return(0,f.each)(nS,function(e,n){t.setAttribute(n,e)}),this.el=t,this.id=(0,f.uniqueId)("filter_"),this.el.id=this.id,this.cfg=r,this._parseShadow(r,t),this}return i.prototype.match=function(r,t){if(this.type!==r)return!1;var e=!0,n=this.cfg;return(0,f.each)(Object.keys(n),function(a){if(n[a]!==t[a])return e=!1,!1}),e},i.prototype.update=function(r,t){var e=this.cfg;return e[rS[r]]=t,this._parseShadow(e,this.el),this},i.prototype._parseShadow=function(r,t){var e=`<feDropShadow
      dx="`+(r.dx||0)+`"
      dy="`+(r.dy||0)+`"
      stdDeviation="`+(r.blur?r.blur/10:0)+`"
      flood-color="`+(r.color?r.color:"#000")+`"
      flood-opacity="`+(r.opacity?r.opacity:1)+`"
      />`;t.innerHTML=e},i}(),aS=iS,oS=function(){function i(r,t){this.cfg={};var e=Sa("marker"),n=(0,f.uniqueId)("marker_");e.setAttribute("id",n);var a=Sa("path");a.setAttribute("stroke",r.stroke||"none"),a.setAttribute("fill",r.fill||"none"),e.appendChild(a),e.setAttribute("overflow","visible"),e.setAttribute("orient","auto-start-reverse"),this.el=e,this.child=a,this.id=n;var o=r[t==="marker-start"?"startArrow":"endArrow"];return this.stroke=r.stroke||"#000",o===!0?this._setDefaultPath(t,a):(this.cfg=o,this._setMarker(r.lineWidth,a)),this}return i.prototype.match=function(){return!1},i.prototype._setDefaultPath=function(r,t){var e=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),e.setAttribute("refX",""+10*Math.cos(Math.PI/6)),e.setAttribute("refY",""+5)},i.prototype._setMarker=function(r,t){var e=this.el,n=this.cfg.path,a=this.cfg.d;(0,f.isArray)(n)&&(n=n.map(function(o){return o.join(" ")}).join("")),t.setAttribute("d",n),e.appendChild(t),a&&e.setAttribute("refX",""+a/r)},i.prototype.update=function(r){var t=this.child;t.attr?t.attr("fill",r):t.setAttribute("fill",r)},i}(),nv=oS,sS=function(){function i(r){this.type="clip",this.cfg={};var t=Sa("clipPath");this.el=t,this.id=(0,f.uniqueId)("clip_"),t.id=this.id;var e=r.cfg.el;return t.appendChild(e),this.cfg=r,this}return i.prototype.match=function(){return!1},i.prototype.remove=function(){var r=this.el;r.parentNode.removeChild(r)},i}(),lS=sS,uS=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,fS=function(){function i(r){this.cfg={};var t=Sa("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var e=Sa("image");t.appendChild(e);var n=(0,f.uniqueId)("pattern_");t.id=n,this.el=t,this.id=n,this.cfg=r;var a=uS.exec(r),o=a[2];e.setAttribute("href",o);var s=new Image;o.match(/^data:/i)||(s.crossOrigin="Anonymous"),s.src=o;function l(){t.setAttribute("width",""+s.width),t.setAttribute("height",""+s.height)}return s.complete?l():(s.onload=l,s.src=s.src),this}return i.prototype.match=function(r,t){return this.cfg===t},i}(),hS=fS,cS=function(){function i(r){var t=Sa("defs"),e=(0,f.uniqueId)("defs_");t.id=e,r.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=r}return i.prototype.find=function(r,t){for(var e=this.children,n=null,a=0;a<e.length;a++)if(e[a].match(r,t)){n=e[a].id;break}return n},i.prototype.findById=function(r){for(var t=this.children,e=null,n=0;n<t.length;n++)if(t[n].id===r){e=t[n];break}return e},i.prototype.add=function(r){this.children.push(r),r.canvas=this.canvas,r.parent=this},i.prototype.getDefaultArrow=function(r,t){var e=r.stroke||r.strokeStyle;if(this.defaultArrow[e])return this.defaultArrow[e].id;var n=new nv(r,t);return this.defaultArrow[e]=n,this.el.appendChild(n.el),this.add(n),n.id},i.prototype.addGradient=function(r){var t=new eS(r);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addArrow=function(r,t){var e=new nv(r,t);return this.el.appendChild(e.el),this.add(e),e.id},i.prototype.addShadow=function(r){var t=new aS(r);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addPattern=function(r){var t=new hS(r);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addClip=function(r){var t=new lS(r);return this.el.appendChild(t.el),this.add(t),t.id},i}(),vS=cS,dS=function(i){(0,V.__extends)(r,i);function r(t){return i.call(this,(0,V.__assign)((0,V.__assign)({},t),{autoDraw:!0,renderer:"svg"}))||this}return r.prototype.getShapeBase=function(){return P},r.prototype.getGroupBase=function(){return ef},r.prototype.getShape=function(t,e,n){var a=n.target||n.srcElement;if(!tf[a.tagName]){for(var o=a.parentNode;o&&!tf[o.tagName];)o=o.parentNode;a=o}return this.find(function(s){return s.get("el")===a})},r.prototype.createDom=function(){var t=Sa("svg"),e=new vS(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",e),t},r.prototype.onCanvasChange=function(t){var e=this.get("context"),n=this.get("el");if(t==="sort"){var a=this.get("children");a&&a.length&&Qc(this,function(s,l){return a.indexOf(s)-a.indexOf(l)?1:0})}else if(t==="clear"){if(n){n.innerHTML="";var o=e.el;o.innerHTML="",n.appendChild(o)}}else t==="matrix"?ps(this):t==="clip"?gs(this,e):t==="changeSize"&&(n.setAttribute("width",""+this.get("width")),n.setAttribute("height",""+this.get("height")))},r.prototype.draw=function(){var t=this.get("context"),e=this.getChildren();gs(this,t),e.length&&Jc(t,e)},r}(ze.AbstractCanvas),iv=dS,pS=p(23231),gS=pS.version;function rf(i){return i?!1:i==null||isNaN(i)}function av(i){if((0,f.isArray)(i))return rf(i[1].y);var r=i.y;return(0,f.isArray)(r)?rf(r[0]):rf(r)}function nf(i,r,t){if(r===void 0&&(r=!1),t===void 0&&(t=!0),!i.length||i.length===1&&!t)return[];if(r){for(var e=[],n=0,a=i.length;n<a;n++){var o=i[n];av(o)||e.push(o)}return[e]}for(var s=[],l=[],n=0,a=i.length;n<a;n++){var o=i[n];av(o)?l.length&&(l.length===1&&!t||s.push(l),l=[]):l.push(o)}return l.length&&s.push(l),s}function _i(i,r,t,e){e===void 0&&(e="");var n=i.style,a=n===void 0?{}:n,o=i.defaultStyle,s=i.color,l=i.size,u=(0,j.__assign)((0,j.__assign)({},o),a);return s&&(r&&(a.stroke||(u.stroke=s)),t&&(a.fill||(u.fill=s))),e&&(0,f.isNil)(a[e])&&!(0,f.isNil)(l)&&(u[e]=l),u}function af(i){var r=i.x,t=(0,f.isArray)(i.y)?i.y:[i.y];return t.map(function(e,n){return{x:(0,f.isArray)(r)?r[n]:r,y:e}})}var yS={line:function(i,r,t){return[["M",i-t,r],["L",i+t,r]]},dot:function(i,r,t){return[["M",i-t,r],["L",i+t,r]]},dash:function(i,r,t){return[["M",i-t,r],["L",i+t,r]]},smooth:function(i,r,t){return[["M",i-t,r],["A",t/2,t/2,0,1,1,i,r],["A",t/2,t/2,0,1,0,i+t,r]]},hv:function(i,r,t){return[["M",i-t-1,r-2.5],["L",i,r-2.5],["L",i,r+2.5],["L",i+t+1,r+2.5]]},vh:function(i,r,t){return[["M",i-t-1,r+2.5],["L",i,r+2.5],["L",i,r-2.5],["L",i+t+1,r-2.5]]},hvh:function(i,r,t){return[["M",i-(t+1),r+2.5],["L",i-t/2,r+2.5],["L",i-t/2,r-2.5],["L",i+t/2,r-2.5],["L",i+t/2,r+2.5],["L",i+t+1,r+2.5]]},vhv:function(i,r){return[["M",i-5,r+2.5],["L",i-5,r],["L",i,r],["L",i,r-3],["L",i,r+3],["L",i+6.5,r+3]]}};function ov(i,r){var t=i.color;return{symbol:yS[r],style:{lineWidth:2,r:6,stroke:t}}}function mS(i,r,t){for(var e=i.isStack,n=i.connectNulls,a=i.isInCircle,o=i.showSinglePoint,s=_i(i,!0,!1,"lineWidth"),l=nf(i.points,n,o),u=[],h=0,c=l.length;h<c;h++){var v=l[h];u=u.concat(bS(v,a,e,r,t,s))}return s.path=u,s}function of(i,r,t,e,n){if(i.length===1)return[["M",i[0].x,i[0].y-n.lineWidth/2],["L",i[0].x,i[0].y],["L",i[0].x,i[0].y+n.lineWidth/2]];var a;return t?(r&&i.length&&i.push({x:i[0].x,y:i[0].y}),a=Xe(i,!1,e)):(a=me(i,!1),r&&a.push(["Z"])),a}function xS(i,r,t,e,n,a){var o=[],s=[];(0,f.each)(i,function(h){var c=af(h);o.push(c[1]),s.push(c[0])});var l=of(o,r,e,n,a),u=of(s,r,e,n,a);return t?l:l.concat(u)}function bS(i,r,t,e,n,a){if(i.length){var o=i[0];return(0,f.isArray)(o.y)?xS(i,r,t,e,n,a):of(i,r,e,n,a)}return[]}var sG=so("line",{defaultShapeType:"line"});(0,f.each)(["line","dot","dash","smooth"],function(i){xn("line",i,{draw:function(r,t){var e=i==="smooth",n;if(e){var a=this.coordinate,o=a.start,s=a.end;n=[[o.x,s.y],[s.x,o.y]]}var l=mS(r,e,n),u=t.addShape({type:"path",attrs:l,name:"line"});return u},getMarker:function(r){return ov(r,i)}})});var lG=null,wS=function(i){(0,j.__extends)(r,i);function r(t){var e=i.call(this,t)||this;e.type="path",e.shapeType="line";var n=t.connectNulls,a=n===void 0?!1:n,o=t.showSinglePoint,s=o===void 0?!0:o;return e.connectNulls=a,e.showSinglePoint=s,e}return r.prototype.createElements=function(t,e,n){n===void 0&&(n=!1);var a=this,o=a.lastElementsMap,s=a.elementsMap,l=a.elements,u=a.container,h=this.getElementId(t),c=this.getShapeInfo(t),v=o[h];if(v){var M=v.getModel();(this.isCoordinateChanged||wc(M,c))&&(v.animate=this.animateOption,v.update(c)),delete o[h]}else{var x=this.getShapeFactory();v=new gc({shapeFactory:x,container:u,offscreenGroup:this.getOffscreenGroup()}),v.geometry=this,v.animate=this.animateOption,v.draw(c,n)}return l.push(v),s[h]=v,l},r.prototype.getPointsAndData=function(t){for(var e=[],n=[],a=0,o=t.length;a<o;a++){var s=t[a];e.push({x:s.x,y:s.y}),n.push(s[Lt])}return{points:e,data:n}},r.prototype.getShapeInfo=function(t){var e=this.getDrawCfg(t[0]),n=this.getPointsAndData(t),a=n.points,o=n.data;return e.mappingData=t,e.data=o,e.isStack=!!this.getAdjust("stack"),e.points=a,e.connectNulls=this.connectNulls,e.showSinglePoint=this.showSinglePoint,e},r}(Ka),sf=wS;function SS(i,r,t,e,n){var a=[];if(i.length){for(var o=[],s=[],l=0,u=i.length;l<u;l++){var h=i[l];o.push(h[1]),s.push(h[0])}s=s.reverse(),(0,f.each)([o,s],function(c,v){var x=[],M=e.parsePoints(c),k=M[0];o.length===1&&s.length===1?x=v===0?[["M",k.x-.5,k.y],["L",k.x+.5,k.y]]:[["L",k.x+.5,k.y],["L",k.x-.5,k.y]]:(r&&M.push({x:k.x,y:k.y}),t?x=Xe(M,!1,n):x=me(M,!1),v>0&&(x[0][0]="L")),a=a.concat(x)}),a.push(["Z"])}return a}function al(i,r,t,e,n){for(var a=_i(i,r,!r,"lineWidth"),o=i.connectNulls,s=i.isInCircle,l=i.points,u=i.showSinglePoint,h=nf(l,o,u),c=[],v=0,x=h.length;v<x;v++){var M=h[v];c=c.concat(SS(M,s,t,e,n))}return a.path=c,a}function sv(i){var r=i.start,t=i.end;return[[r.x,t.y],[t.x,r.y]]}var uG=so("area",{defaultShapeType:"area",getDefaultPoints:function(i){var r=i.x,t=i.y0,e=(0,f.isArray)(i.y)?i.y:[t,i.y];return e.map(function(n){return{x:r,y:n}})}});xn("area","area",{draw:function(i,r){var t=al(i,!1,!1,this),e=r.addShape({type:"path",attrs:t,name:"area"});return e},getMarker:function(i){var r=i.color;return{symbol:function(t,e,n){return n===void 0&&(n=5.5),[["M",t-n,e-4],["L",t+n,e-4],["L",t+n,e+4],["L",t-n,e+4],["Z"]]},style:{r:5,fill:r}}}});var fG=null,CS=function(i){(0,j.__extends)(r,i);function r(t){var e=i.call(this,t)||this;e.type="area",e.shapeType="area",e.generatePoints=!0,e.startOnZero=!0;var n=t.startOnZero,a=n===void 0?!0:n,o=t.sortable,s=o===void 0?!0:o,l=t.showSinglePoint,u=l===void 0?!1:l;return e.startOnZero=a,e.sortable=s,e.showSinglePoint=u,e}return r.prototype.getPointsAndData=function(t){for(var e=[],n=[],a=0,o=t.length;a<o;a++){var s=t[a];e.push(s.points),n.push(s[Lt])}return{points:e,data:n}},r.prototype.getYMinValue=function(){if(this.startOnZero)return i.prototype.getYMinValue.call(this);var t=this.getYScale();return t.min},r}(sf),MS=CS,hG=so("edge",{defaultShapeType:"line",getDefaultPoints:function(i){return af(i)}});xn("edge","line",{draw:function(i,r){var t=_i(i,!0,!1,"lineWidth"),e=me(this.parsePoints(i.points),this.coordinate.isPolar);return r.addShape("path",{attrs:(0,j.__assign)((0,j.__assign)({},t),{path:e})})},getMarker:function(i){return{symbol:"circle",style:{r:4.5,fill:i.color}}}});var cG=null,ES=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="edge",t.shapeType="edge",t.generatePoints=!0,t}return r}(Ka),_S=ES,AS=p(55223),TS=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="heatmap",t.paletteCache={},t}return r.prototype.createElements=function(t,e,n){n===void 0&&(n=!1);var a=this.prepareRange(t),o=this.prepareSize(),s=(0,f.get)(this.styleOption,["style","shadowBlur"]);return(0,f.isNumber)(s)||(s=o/2),this.prepareGreyScaleBlurredCircle(o,s),this.drawWithRange(t,a,o,s),null},r.prototype.clear=function(){i.prototype.clear.call(this),this.clearShadowCanvasCtx(),this.paletteCache={}},r.prototype.prepareRange=function(t){var e=this.getAttribute("color"),n=e.getFields()[0],a=Infinity,o=-Infinity;return t.forEach(function(s){var l=s[Lt][n];l>o&&(o=l),l<a&&(a=l)}),a===o&&(a=o-1),[a,o]},r.prototype.prepareSize=function(){var t=this.getDefaultValue("size");return(0,f.isNumber)(t)||(t=this.getDefaultSize()),t},r.prototype.prepareGreyScaleBlurredCircle=function(t,e){var n=this.getGrayScaleBlurredCanvas(),a=t+e,o=n.getContext("2d");n.width=n.height=a*2,o.clearRect(0,0,n.width,n.height),o.shadowOffsetX=o.shadowOffsetY=a*2,o.shadowBlur=e,o.shadowColor="black",o.beginPath(),o.arc(-a,-a,t,0,Math.PI*2,!0),o.closePath(),o.fill()},r.prototype.drawWithRange=function(t,e,n,a){var o=this.coordinate,s=o.start,l=o.end,u=this.coordinate.getWidth(),h=this.coordinate.getHeight(),c=this.getAttribute("color"),v=c.getFields()[0];this.clearShadowCanvasCtx();var x=this.getShadowCanvasCtx();e&&(t=t.filter(function(ee){return ee[Lt][v]<=e[1]&&ee[Lt][v]>=e[0]}));for(var M=this.scales[v],k=0,R=t;k<R.length;k++){var G=R[k],N=this.getDrawCfg(G),ot=N.x,ut=N.y,Mt=M.scale(G[Lt][v]);this.drawGrayScaleBlurredCircle(ot-s.x,ut-l.y,n+a,Mt,x)}var zt=x.getImageData(0,0,u,h);this.clearShadowCanvasCtx(),this.colorize(zt),x.putImageData(zt,0,0);var $t=this.getImageShape();$t.attr("x",s.x),$t.attr("y",l.y),$t.attr("width",u),$t.attr("height",h),$t.attr("img",x.canvas),$t.set("origin",this.getShapeInfo(t))},r.prototype.getDefaultSize=function(){var t=this.getAttribute("position"),e=this.coordinate;return Math.min(e.getWidth()/(t.scales[0].ticks.length*4),e.getHeight()/(t.scales[1].ticks.length*4))},r.prototype.clearShadowCanvasCtx=function(){var t=this.getShadowCanvasCtx();t.clearRect(0,0,t.canvas.width,t.canvas.height)},r.prototype.getShadowCanvasCtx=function(){var t=this.shadowCanvas;return t||(t=document.createElement("canvas"),this.shadowCanvas=t),t.width=this.coordinate.getWidth(),t.height=this.coordinate.getHeight(),t.getContext("2d")},r.prototype.getGrayScaleBlurredCanvas=function(){return this.grayScaleBlurredCanvas||(this.grayScaleBlurredCanvas=document.createElement("canvas")),this.grayScaleBlurredCanvas},r.prototype.drawGrayScaleBlurredCircle=function(t,e,n,a,o){var s=this.getGrayScaleBlurredCanvas();o.globalAlpha=a,o.drawImage(s,t-n,e-n)},r.prototype.colorize=function(t){for(var e=this.getAttribute("color"),n=t.data,a=this.paletteCache,o=3;o<n.length;o+=4){var s=n[o];if((0,f.isNumber)(s)){var l=a[s]?a[s]:AS.default.rgb2arr(e.gradient(s/256));n[o-3]=l[0],n[o-2]=l[1],n[o-1]=l[2],n[o]=s}}},r.prototype.getImageShape=function(){var t=this.imageShape;if(t)return t;var e=this.container;return t=e.addShape({type:"image",attrs:{}}),this.imageShape=t,t},r.prototype.getShapeInfo=function(t){var e=this.getDrawCfg(t[0]);return(0,j.__assign)((0,j.__assign)({},e),{mappingData:t,data:this.getData(t)})},r.prototype.getData=function(t){return t.map(function(e){return e[Lt]})},r}(Ka),PS=TS;function lf(i,r){r===void 0&&(r=!1);var t=i.x,e=i.y,n=i.y0,a=i.size,o,s;(0,f.isArray)(e)?(o=e[0],s=e[1]):(o=n,s=e);var l,u;(0,f.isArray)(t)?(l=t[0],u=t[1]):(l=t-a/2,u=t+a/2);var h=[{x:l,y:o},{x:l,y:s}];return r?h.push({x:u,y:(s+o)/2}):h.push({x:u,y:s},{x:u,y:o}),h}function uf(i,r){r===void 0&&(r=!0);var t=[],e=i[0];t.push(["M",e.x,e.y]);for(var n=1,a=i.length;n<a;n++)t.push(["L",i[n].x,i[n].y]);return r&&(t.push(["L",e.x,e.y]),t.push(["z"])),t}function lv(i,r,t){var e=[];return(0,f.isNil)(r)?t?e.push(["M",i[0].x,i[0].y],["L",i[1].x,i[1].y],["L",i[2].x,i[2].y],["L",i[2].x,i[2].y],["Z"]):e.push(["M",i[0].x,i[0].y],["L",i[1].x,i[1].y],["L",i[2].x,i[2].y],["L",i[3].x,i[3].y],["Z"]):e.push(["M",i[0].x,i[0].y],["L",i[1].x,i[1].y],["L",r[1].x,r[1].y],["L",r[0].x,r[0].y],["Z"]),e}var vG=so("interval",{defaultShapeType:"rect",getDefaultPoints:function(i){return lf(i)}});xn("interval","rect",{draw:function(i,r){var t=_i(i,!1,!0),e=this.parsePath(uf(i.points)),n=r.addShape("path",{attrs:(0,j.__assign)((0,j.__assign)({},t),{path:e}),name:"interval"});return n},getMarker:function(i){var r=i.color,t=i.isInPolar;return t?{symbol:"circle",style:{r:4.5,fill:r}}:{symbol:"square",style:{r:4,fill:r}}}});var dG=null;function LS(i,r){var t=i.length,e=i;(0,f.isString)(e[0])&&(e=i.map(function(s){return r.translate(s)}));for(var n=e[1]-e[0],a=2;a<t;a++){var o=e[a]-e[a-1];n>o&&(n=o)}return n}function OS(i,r){if(r){var t=(0,f.flatten)(i),e=(0,f.valuesOfKey)(t,r);return e.length}return i.length}function uv(i){var r=i.theme,t=i.coordinate,e=i.getXScale(),n=e.values,a=i.beforeMappingData,o=n.length;if(e.isLinear&&n.length>1){n.sort();var s=LS(n,e);o=(e.max-e.min)/s,n.length>o&&(o=n.length)}var l=e.range,u=1/o,h=1;if(t.isPolar?t.isTransposed&&o>1?h=r.multiplePieWidthRatio:h=r.roseWidthRatio:(e.isLinear&&(u*=l[1]-l[0]),h=r.columnWidthRatio),u*=h,i.getAdjust("dodge")){var c=i.getAdjust("dodge"),v=c.dodgeBy,x=OS(a,v);u=u/x}var M=r.maxColumnWidth,k=r.minColumnWidth,R=ht(i.coordinate);if(M){var G=M/R;u>G&&(u=G)}if(k){var N=k/R;u<N&&(u=N)}return u}var IS=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="interval",t.shapeType="interval",t.generatePoints=!0,t}return r.prototype.createShapePointsCfg=function(t){var e=i.prototype.createShapePointsCfg.call(this,t),n,a=this.getAttribute("size");if(a){n=this.getAttributeValues(a,t)[0];var o=this.coordinate,s=ht(o);n=n/s}else this.defaultSize||(this.defaultSize=uv(this)),n=this.defaultSize;return e.size=n,e},r.prototype.adjustScale=function(){i.prototype.adjustScale.call(this);var t=this.getYScale();if(this.coordinate.type==="theta")t.change({nice:!1,min:0,max:Math.max(Math.max.apply(null,t.values),t.max)});else{var e=this.scaleDefs,n=t.field,a=t.min,o=t.max,s=t.type;s!=="time"&&(a>0&&!(0,f.get)(e,[n,"min"])&&t.change({min:0}),o<=0&&!(0,f.get)(e,[n,"max"])&&t.change({max:0}))}},r}(Ka),kS=IS,BS=function(i){(0,j.__extends)(r,i);function r(t){var e=i.call(this,t)||this;e.type="line";var n=t.sortable,a=n===void 0?!0:n;return e.sortable=a,e}return r}(sf),DS=BS,To={hexagon:function(i,r,t){var e=t/2*Math.sqrt(3);return[["M",i,r-t],["L",i+e,r-t/2],["L",i+e,r+t/2],["L",i,r+t],["L",i-e,r+t/2],["L",i-e,r-t/2],["Z"]]},bowtie:function(i,r,t){var e=t-1.5;return[["M",i-t,r-e],["L",i+t,r+e],["L",i+t,r-e],["L",i-t,r+e],["Z"]]},cross:function(i,r,t){return[["M",i-t,r-t],["L",i+t,r+t],["M",i+t,r-t],["L",i-t,r+t]]},tick:function(i,r,t){return[["M",i-t/2,r-t],["L",i+t/2,r-t],["M",i,r-t],["L",i,r+t],["M",i-t/2,r+t],["L",i+t/2,r+t]]},plus:function(i,r,t){return[["M",i-t,r],["L",i+t,r],["M",i,r-t],["L",i,r+t]]},hyphen:function(i,r,t){return[["M",i-t,r],["L",i+t,r]]},line:function(i,r,t){return[["M",i,r-t],["L",i,r+t]]}},fv=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"],FS=["cross","tick","plus","hyphen","line"];function ff(i,r,t,e,n){var a=_i(r,n,!n,"r"),o=i.parsePoints(r.points),s=o[0];if(r.isStack)s=o[1];else if(o.length>1){for(var l=t.addGroup(),u=0,h=o;u<h.length;u++){var c=h[u];l.addShape({type:"marker",attrs:(0,j.__assign)((0,j.__assign)((0,j.__assign)({},a),{symbol:To[e]||e}),c)})}return l}return t.addShape({type:"marker",attrs:(0,j.__assign)((0,j.__assign)((0,j.__assign)({},a),{symbol:To[e]||e}),s)})}var pG=so("point",{defaultShapeType:"hollow-circle",getDefaultPoints:function(i){return af(i)}});(0,f.each)(fv,function(i){xn("point","hollow-"+i,{draw:function(r,t){return ff(this,r,t,i,!0)},getMarker:function(r){var t=r.color;return{symbol:To[i]||i,style:{r:4.5,stroke:t,fill:null}}}})});var gG=null,RS=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="point",t.shapeType="point",t.generatePoints=!0,t}return r.prototype.getDrawCfg=function(t){var e=i.prototype.getDrawCfg.call(this,t);return(0,j.__assign)((0,j.__assign)({},e),{isStack:!!this.getAdjust("stack")})},r}(Ka),NS=RS;function GS(i){for(var r=i[0],t=1,e=[["M",r.x,r.y]];t<i.length;){var n=i[t];(n.x!==i[t-1].x||n.y!==i[t-1].y)&&(e.push(["L",n.x,n.y]),n.x===r.x&&n.y===r.y&&t<i.length-1&&(r=i[t+1],e.push(["Z"]),e.push(["M",r.x,r.y]),t++)),t++}return(0,f.isEqual)((0,f.last)(e),r)||e.push(["L",r.x,r.y]),e.push(["Z"]),e}var yG=so("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(i){var r=[];return(0,f.each)(i.x,function(t,e){var n=i.y[e];r.push({x:t,y:n})}),r}});xn("polygon","polygon",{draw:function(i,r){if(!(0,f.isEmpty)(i.points)){var t=_i(i,!0,!0),e=this.parsePath(GS(i.points));return r.addShape("path",{attrs:(0,j.__assign)((0,j.__assign)({},t),{path:e}),name:"polygon"})}},getMarker:function(i){var r=i.color;return{symbol:"square",style:{r:4,fill:r}}}});var mG=null,YS=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polygon",t.shapeType="polygon",t.generatePoints=!0,t}return r.prototype.createShapePointsCfg=function(t){var e=i.prototype.createShapePointsCfg.call(this,t),n=e.x,a=e.y,o;if(!((0,f.isArray)(n)&&(0,f.isArray)(a))){var s=this.getXScale(),l=this.getYScale(),u=s.values.length,h=l.values.length,c=.5*1/u,v=.5*1/h;s.isCategory&&l.isCategory?(n=[n-c,n-c,n+c,n+c],a=[a-v,a+v,a+v,a-v]):(0,f.isArray)(n)?(o=n,n=[o[0],o[0],o[1],o[1]],a=[a-v/2,a+v/2,a+v/2,a-v/2]):(0,f.isArray)(a)&&(o=a,a=[o[0],o[1],o[1],o[0]],n=[n-c/2,n-c/2,n+c/2,n+c/2]),e.x=n,e.y=a}return e},r}(Ka),zS=YS,xG=so("schema",{defaultShapeType:""}),bG=null,XS=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="schema",t.shapeType="schema",t.generatePoints=!0,t}return r.prototype.createShapePointsCfg=function(t){var e=i.prototype.createShapePointsCfg.call(this,t),n,a=this.getAttribute("size");if(a){n=this.getAttributeValues(a,t)[0];var o=this.coordinate,s=ht(o);n=n/s}else this.defaultSize||(this.defaultSize=uv(this)),n=this.defaultSize;return e.size=n,e},r}(Ka),VS=XS;xn("area","line",{draw:function(i,r){var t=al(i,!0,!1,this),e=r.addShape({type:"path",attrs:t,name:"area"});return e},getMarker:function(i){var r=i.color;return{symbol:function(t,e,n){return n===void 0&&(n=5.5),[["M",t-n,e-4],["L",t+n,e-4],["L",t+n,e+4],["L",t-n,e+4],["Z"]]},style:{r:5,stroke:r,fill:null}}}}),xn("area","smooth",{draw:function(i,r){var t=this.coordinate,e=al(i,!1,!0,this,sv(t)),n=r.addShape({type:"path",attrs:e,name:"area"});return n},getMarker:function(i){var r=i.color;return{symbol:function(t,e,n){return n===void 0&&(n=5.5),[["M",t-n,e-4],["L",t+n,e-4],["L",t+n,e+4],["L",t-n,e+4],["Z"]]},style:{r:5,fill:r}}}}),xn("area","smooth-line",{draw:function(i,r){var t=this.coordinate,e=al(i,!0,!0,this,sv(t)),n=r.addShape({type:"path",attrs:e,name:"area"});return n},getMarker:function(i){var r=i.color;return{symbol:function(t,e,n){return n===void 0&&(n=5.5),[["M",t-n,e-4],["L",t+n,e-4],["L",t+n,e+4],["L",t-n,e+4],["Z"]]},style:{r:5,stroke:r,fill:null}}}});function hf(i,r){var t=[];t.push({x:i.x,y:i.y*1/2+r.y*1/2}),t.push({x:r.x,y:i.y*1/2+r.y*1/2}),t.push(r);var e=["C"];return(0,f.each)(t,function(n){e.push(n.x,n.y)}),e}function cf(i,r){var t=[];t.push({x:r.x,y:r.y}),t.push(i);var e=["Q"];return(0,f.each)(t,function(n){e.push(n.x,n.y)}),e}function HS(i,r,t){var e=cf(r,t),n=[["M",i.x,i.y]];return n.push(e),n}function WS(i,r){var t=cf(i[1],r),e=cf(i[3],r),n=[["M",i[0].x,i[0].y]];return n.push(e),n.push(["L",i[3].x,i[3].y]),n.push(["L",i[2].x,i[2].y]),n.push(t),n.push(["L",i[1].x,i[1].y]),n.push(["L",i[0].x,i[0].y]),n.push(["Z"]),n}xn("edge","arc",{draw:function(i,r){var t=_i(i,!0,!1,"lineWidth"),e=i.points,n=e.length>2?"weight":"normal",a;if(i.isInCircle){var o={x:0,y:1};return n==="normal"?a=HS(e[0],e[1],o):(t.fill=t.stroke,a=WS(e,o)),a=this.parsePath(a),r.addShape("path",{attrs:(0,j.__assign)((0,j.__assign)({},t),{path:a})})}else{if(n==="normal")return e=this.parsePoints(e),a=Xi((e[1].x+e[0].x)/2,e[0].y,Math.abs(e[1].x-e[0].x)/2,Math.PI,Math.PI*2),r.addShape("path",{attrs:(0,j.__assign)((0,j.__assign)({},t),{path:a})});var s=hf(e[1],e[3]),l=hf(e[2],e[0]);return a=[["M",e[0].x,e[0].y],["L",e[1].x,e[1].y],s,["L",e[3].x,e[3].y],["L",e[2].x,e[2].y],l,["Z"]],a=this.parsePath(a),t.fill=t.stroke,r.addShape("path",{attrs:(0,j.__assign)((0,j.__assign)({},t),{path:a})})}},getMarker:function(i){return{symbol:"circle",style:{r:4.5,fill:i.color}}}});function jS(i,r){var t=hf(i,r),e=[["M",i.x,i.y]];return e.push(t),e}xn("edge","smooth",{draw:function(i,r){var t=_i(i,!0,!1,"lineWidth"),e=i.points,n=this.parsePath(jS(e[0],e[1]));return r.addShape("path",{attrs:(0,j.__assign)((0,j.__assign)({},t),{path:n})})},getMarker:function(i){return{symbol:"circle",style:{r:4.5,fill:i.color}}}});var ol=1/3;function US(i,r){var t=[];t.push({x:i.x,y:i.y*(1-ol)+r.y*ol}),t.push({x:r.x,y:i.y*(1-ol)+r.y*ol}),t.push(r);var e=[["M",i.x,i.y]];return(0,f.each)(t,function(n){e.push(["L",n.x,n.y])}),e}xn("edge","vhv",{draw:function(i,r){var t=_i(i,!0,!1,"lineWidth"),e=i.points,n=this.parsePath(US(e[0],e[1]));return r.addShape("path",{attrs:(0,j.__assign)((0,j.__assign)({},t),{path:n})})},getMarker:function(i){return{symbol:"circle",style:{r:4.5,fill:i.color}}}}),xn("interval","funnel",{getPoints:function(i){return i.size=i.size*2,lf(i)},draw:function(i,r){var t=_i(i,!1,!0),e=this.parsePath(lv(i.points,i.nextPoints,!1)),n=r.addShape("path",{attrs:(0,j.__assign)((0,j.__assign)({},t),{path:e}),name:"interval"});return n},getMarker:function(i){var r=i.color;return{symbol:"square",style:{r:4,fill:r}}}}),xn("interval","hollow-rect",{draw:function(i,r){var t=_i(i,!0,!1),e=this.parsePath(uf(i.points)),n=r.addShape("path",{attrs:(0,j.__assign)((0,j.__assign)({},t),{path:e}),name:"interval"});return n},getMarker:function(i){var r=i.color,t=i.isInPolar;return t?{symbol:"circle",style:{r:4.5,stroke:r,fill:null}}:{symbol:"square",style:{r:4,stroke:r,fill:null}}}});function ZS(i){var r=i.x,t=i.y,e=i.y0;return(0,f.isArray)(t)?t.map(function(n,a){return{x:(0,f.isArray)(r)?r[a]:r,y:n}}):[{x:r,y:e},{x:r,y:t}]}xn("interval","line",{getPoints:function(i){return ZS(i)},draw:function(i,r){var t=_i(i,!0,!1,"lineWidth"),e=this.parsePath(uf(i.points,!1)),n=r.addShape("path",{attrs:(0,j.__assign)((0,j.__assign)({},t),{path:e}),name:"interval"});return n},getMarker:function(i){var r=i.color;return{symbol:function(t,e,n){return[["M",t,e-n],["L",t,e+n]]},style:{r:5,stroke:r}}}}),xn("interval","pyramid",{getPoints:function(i){return i.size=i.size*2,lf(i,!0)},draw:function(i,r){var t=_i(i,!1,!0),e=this.parsePath(lv(i.points,i.nextPoints,!0)),n=r.addShape("path",{attrs:(0,j.__assign)((0,j.__assign)({},t),{path:e}),name:"interval"});return n},getMarker:function(i){var r=i.color;return{symbol:"square",style:{r:4,fill:r}}}});function KS(i){var r=i.x,t=i.y,e=i.y0,n=i.size,a,o;(0,f.isArray)(t)?(a=t[0],o=t[1]):(a=e,o=t);var s=r+n/2,l=r-n/2;return[{x:r,y:a},{x:r,y:o},{x:l,y:a},{x:s,y:a},{x:l,y:o},{x:s,y:o}]}function $S(i){return[["M",i[0].x,i[0].y],["L",i[1].x,i[1].y],["M",i[2].x,i[2].y],["L",i[3].x,i[3].y],["M",i[4].x,i[4].y],["L",i[5].x,i[5].y]]}xn("interval","tick",{getPoints:function(i){return KS(i)},draw:function(i,r){var t=_i(i,!0,!1),e=this.parsePath($S(i.points)),n=r.addShape("path",{attrs:(0,j.__assign)((0,j.__assign)({},t),{path:e}),name:"interval"});return n},getMarker:function(i){var r=i.color;return{symbol:function(t,e,n){return[["M",t-n/2,e-n],["L",t+n/2,e-n],["M",t,e-n],["L",t,e+n],["M",t-n/2,e+n],["L",t+n/2,e+n]]},style:{r:5,stroke:r}}}});var QS=function(i,r,t){var e=i.x,n=i.y,a=r.x,o=r.y,s;switch(t){case"hv":s=[{x:a,y:n}];break;case"vh":s=[{x:e,y:o}];break;case"hvh":var l=(a+e)/2;s=[{x:l,y:n},{x:l,y:o}];break;case"vhv":var u=(n+o)/2;s=[{x:e,y:u},{x:a,y:u}];break;default:break}return s};function JS(i,r){var t=[];return(0,f.each)(i,function(e,n){var a=i[n+1];if(t.push(e),a){var o=QS(e,a,r);t=t.concat(o)}}),t}function qS(i){return i.map(function(r,t){return t===0?["M",r.x,r.y]:["L",r.x,r.y]})}function t2(i,r){var t=nf(i.points,i.connectNulls,i.showSinglePoint),e=[];return(0,f.each)(t,function(n){var a=JS(n,r);e=e.concat(qS(a))}),(0,j.__assign)((0,j.__assign)({},_i(i,!0,!1,"lineWidth")),{path:e})}(0,f.each)(["hv","vh","hvh","vhv"],function(i){xn("line",i,{draw:function(r,t){var e=t2(r,i),n=t.addShape({type:"path",attrs:e,name:"line"});return n},getMarker:function(r){return ov(r,i)}})}),(0,f.each)(FS,function(i){xn("point",i,{draw:function(r,t){return ff(this,r,t,i,!0)},getMarker:function(r){var t=r.color;return{symbol:To[i],style:{r:4.5,stroke:t,fill:null}}}})}),xn("point","image",{draw:function(i,r){var t=_i(i,!1,!1,"r").r,e=this.parsePoints(i.points),n=e[0];if(i.isStack)n=e[1];else if(e.length>1){for(var a=r.addGroup(),o=0,s=e;o<s.length;o++){var l=s[o];a.addShape("image",{attrs:{x:l.x-t/2,y:l.y-t,width:t,height:t,img:i.shape[1]}})}return a}return r.addShape("image",{attrs:{x:n.x-t/2,y:n.y-t,width:t,height:t,img:i.shape[1]}})},getMarker:function(i){var r=i.color;return{symbol:"circle",style:{r:4.5,fill:r}}}}),(0,f.each)(fv,function(i){xn("point",i,{draw:function(r,t){return ff(this,r,t,i,!1)},getMarker:function(r){var t=r.color;return{symbol:To[i]||i,style:{r:4.5,fill:t}}}})});function hv(i){var r=(0,f.isArray)(i)?i:[i],t=r[0],e=r[r.length-1],n=r.length>1?r[1]:t,a=r.length>3?r[3]:e,o=r.length>2?r[2]:n;return{min:t,max:e,min1:n,max1:a,median:o}}function cv(i,r,t){var e=t/2,n;if((0,f.isArray)(r)){var a=hv(r),o=a.min,s=a.max,l=a.median,u=a.min1,h=a.max1,c=i-e,v=i+e;n=[[c,s],[v,s],[i,s],[i,h],[c,u],[c,h],[v,h],[v,u],[i,u],[i,o],[c,o],[v,o],[c,l],[v,l]]}else{r=(0,f.isNil)(r)?.5:r;var x=hv(i),o=x.min,s=x.max,l=x.median,u=x.min1,h=x.max1,M=r-e,k=r+e;n=[[o,M],[o,k],[o,r],[u,r],[u,M],[u,k],[h,k],[h,M],[h,r],[s,r],[s,M],[s,k],[l,M],[l,k]]}return n.map(function(R){return{x:R[0],y:R[1]}})}function e2(i){return[["M",i[0].x,i[0].y],["L",i[1].x,i[1].y],["M",i[2].x,i[2].y],["L",i[3].x,i[3].y],["M",i[4].x,i[4].y],["L",i[5].x,i[5].y],["L",i[6].x,i[6].y],["L",i[7].x,i[7].y],["L",i[4].x,i[4].y],["Z"],["M",i[8].x,i[8].y],["L",i[9].x,i[9].y],["M",i[10].x,i[10].y],["L",i[11].x,i[11].y],["M",i[12].x,i[12].y],["L",i[13].x,i[13].y]]}xn("schema","box",{getPoints:function(i){var r=i.x,t=i.y,e=i.size;return cv(r,t,e)},draw:function(i,r){var t=_i(i,!0,!1),e=this.parsePath(e2(i.points)),n=r.addShape("path",{attrs:(0,j.__assign)((0,j.__assign)({},t),{path:e,name:"schema"})});return n},getMarker:function(i){var r=i.color;return{symbol:function(t,e,n){var a=[e-6,e-3,e,e+3,e+6],o=cv(t,a,n);return[["M",o[0].x+1,o[0].y],["L",o[1].x-1,o[1].y],["M",o[2].x,o[2].y],["L",o[3].x,o[3].y],["M",o[4].x,o[4].y],["L",o[5].x,o[5].y],["L",o[6].x,o[6].y],["L",o[7].x,o[7].y],["L",o[4].x,o[4].y],["Z"],["M",o[8].x,o[8].y],["L",o[9].x,o[9].y],["M",o[10].x+1,o[10].y],["L",o[11].x-1,o[11].y],["M",o[12].x,o[12].y],["L",o[13].x,o[13].y]]},style:{r:6,lineWidth:1,stroke:r}}}});function r2(i){var r=(0,f.isArray)(i)?i:[i],t=r.sort(function(e,n){return n-e});return ua(t,4,t[t.length-1])}function vv(i,r,t){var e=r2(r);return[{x:i,y:e[0]},{x:i,y:e[1]},{x:i-t/2,y:e[2]},{x:i-t/2,y:e[1]},{x:i+t/2,y:e[1]},{x:i+t/2,y:e[2]},{x:i,y:e[2]},{x:i,y:e[3]}]}function n2(i){return[["M",i[0].x,i[0].y],["L",i[1].x,i[1].y],["M",i[2].x,i[2].y],["L",i[3].x,i[3].y],["L",i[4].x,i[4].y],["L",i[5].x,i[5].y],["Z"],["M",i[6].x,i[6].y],["L",i[7].x,i[7].y]]}xn("schema","candle",{getPoints:function(i){var r=i.x,t=i.y,e=i.size;return vv(r,t,e)},draw:function(i,r){var t=_i(i,!0,!0),e=this.parsePath(n2(i.points)),n=r.addShape("path",{attrs:(0,j.__assign)((0,j.__assign)({},t),{path:e,name:"schema"})});return n},getMarker:function(i){var r=i.color;return{symbol:function(t,e,n){var a=[e+7.5,e+3,e-3,e-7.5],o=vv(t,a,n);return[["M",o[0].x,o[0].y],["L",o[1].x,o[1].y],["M",o[2].x,o[2].y],["L",o[3].x,o[3].y],["L",o[4].x,o[4].y],["L",o[5].x,o[5].y],["Z"],["M",o[6].x,o[6].y],["L",o[7].x,o[7].y]]},style:{lineWidth:1,stroke:r,fill:r,r:6}}}});function i2(i,r){var t=Math.abs(i[0].x-i[2].x),e=Math.abs(i[0].y-i[2].y),n=Math.min(t,e);r&&(n=(0,f.clamp)(r,0,Math.min(t,e))),n=n/2;var a=(i[0].x+i[2].x)/2,o=(i[0].y+i[2].y)/2;return{x:a-n,y:o-n,width:n*2,height:n*2}}xn("polygon","square",{draw:function(i,r){if(!(0,f.isEmpty)(i.points)){var t=_i(i,!0,!0),e=this.parsePoints(i.points);return r.addShape("rect",{attrs:(0,j.__assign)((0,j.__assign)({},t),i2(e,i.size)),name:"polygon"})}},getMarker:function(i){var r=i.color;return{symbol:"square",style:{r:4,fill:r}}}});var a2=function(i){(0,j.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.setLabelPosition=function(t,e,n,a){var o=this.getCoordinate(),s=o.isTransposed,l=e.points,u=o.convert(l[0]),h=o.convert(l[2]),c=s?-1:1,v=(u.x-h.x)/2*c,x=(u.y-h.y)/2*c;switch(a){case"right":s||(t.x-=v,t.y+=x),t.textAlign=(0,f.get)(t,"textAlign","left");break;case"left":s?t.x-=v*2:(t.x+=v,t.y+=x),t.textAlign=(0,f.get)(t,"textAlign","right");break;case"bottom":s?(t.x-=v,t.y-=x):t.y+=x*2,t.textAlign=(0,f.get)(t,"textAlign","center"),t.textBaseline=(0,f.get)(t,"textBaseline","top");break;case"middle":s?t.x-=v:t.y+=x,t.textAlign=(0,f.get)(t,"textAlign","center");break;case"top":s&&(t.x-=v,t.y+=x),t.textAlign=(0,f.get)(t,"textAlign","center"),t.textBaseline=(0,f.get)(t,"textBaseline","bottom");break;default:break}},r}(Ks),o2=a2,sl=Math.PI/2,s2=function(i){(0,j.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getLabelAlign=function(t){var e=this.getCoordinate(),n;if(t.labelEmit)n=t.angle<=Math.PI/2&&t.angle>=-Math.PI/2?"left":"right";else if(!e.isTransposed)n="center";else{var a=e.getCenter(),o=this.getDefaultOffset(t.offset);Math.abs(t.x-a.x)<1?n="center":t.angle>Math.PI||t.angle<=0?n=o>0?"left":"right":n=o>0?"right":"left"}return n},r.prototype.getLabelPoint=function(t,e,n){var a=1,o,s=t.content[n];this.isToMiddle(e)?o=this.getMiddlePoint(e.points):(t.content.length===1&&n===0?n=1:n===0&&(a=-1),o=this.getArcPoint(e,n));var l=this.getDefaultOffset(t.offset)*a,u=this.getPointAngle(o),h=t.labelEmit,c=this.getCirclePoint(u,l,o,h);return c.r===0?c.content="":(c.content=s,c.angle=u,c.color=e.color),c.rotate=t.autoRotate?this.getLabelRotate(u,l,h):t.rotate,c.start={x:o.x,y:o.y},c},r.prototype.getArcPoint=function(t,e){return e===void 0&&(e=0),!(0,f.isArray)(t.x)&&!(0,f.isArray)(t.y)?{x:t.x,y:t.y}:{x:(0,f.isArray)(t.x)?t.x[e]:t.x,y:(0,f.isArray)(t.y)?t.y[e]:t.y}},r.prototype.getPointAngle=function(t){return mt(this.getCoordinate(),t)},r.prototype.getCirclePoint=function(t,e,n,a){var o=this.getCoordinate(),s=o.getCenter(),l=Xt(o,n);if(l===0)return(0,j.__assign)((0,j.__assign)({},s),{r:l});var u=t;if(o.isTransposed&&l>e&&!a){var h=Math.asin(e/(2*l));u=t+h*2}else l=l+e;return{x:s.x+l*Math.cos(u),y:s.y+l*Math.sin(u),r:l}},r.prototype.getLabelRotate=function(t,e,n){var a=t+sl;return n&&(a-=sl),a&&(a>sl?a=a-Math.PI:a<-sl&&(a=a+Math.PI)),a},r.prototype.getMiddlePoint=function(t){var e=this.getCoordinate(),n=t.length,a={x:0,y:0};return(0,f.each)(t,function(o){a.x+=o.x,a.y+=o.y}),a.x/=n,a.y/=n,a=e.convert(a),a},r.prototype.isToMiddle=function(t){return t.x.length>2},r}(Ks),dv=s2,l2=function(i){(0,j.__extends)(r,i);function r(t){var e=i.call(this,t)||this;return e.defaultLayout="distribute",e}return r.prototype.getDefaultLabelCfg=function(){return(0,f.get)(this.geometry.theme,"pieLabels",{})},r.prototype.getDefaultOffset=function(t){return t||0},r.prototype.getLabelRotate=function(t,e,n){var a;return e<0&&(a=t,a>Math.PI/2&&(a=a-Math.PI),a<-Math.PI/2&&(a=a+Math.PI)),a},r.prototype.getLabelAlign=function(t){var e=this.getCoordinate(),n=e.getCenter(),a;t.angle<=Math.PI/2&&t.x>=n.x?a="left":a="right";var o=this.getDefaultOffset(t.offset);return o<=0&&(a==="right"?a="left":a="right"),a},r.prototype.getArcPoint=function(t){return t},r.prototype.getPointAngle=function(t){var e=this.getCoordinate(),n={x:(0,f.isArray)(t.x)?t.x[0]:t.x,y:t.y[0]},a={x:(0,f.isArray)(t.x)?t.x[1]:t.x,y:t.y[1]},o,s=mt(e,n);if(t.points&&t.points[0].y===t.points[1].y)o=s;else{var l=mt(e,a);s>=l&&(l=l+Math.PI*2),o=s+(l-s)/2}return o},r.prototype.getCirclePoint=function(t,e,n){var a=this.getCoordinate(),o=a.getCenter(),s=a.getRadius()+e;return(0,j.__assign)((0,j.__assign)({},Mn(o.x,o.y,s,t)),{angle:t,r:s})},r}(dv),u2=l2,pv=4;function f2(i,r,t,e,n,a){var o=!0,s=e.start,l=e.end,u=Math.min(s.y,l.y),h=Math.abs(s.y-l.y),c,v=0,x=Number.MIN_VALUE,M=r.map(function(Mt){return Mt.y>v&&(v=Mt.y),Mt.y<x&&(x=Mt.y),{size:t,targets:[Mt.y-u]}});for(x-=u,v-u>h&&(h=v-u);o;)for(M.forEach(function(Mt){var zt=(Math.min.apply(x,Mt.targets)+Math.max.apply(x,Mt.targets))/2;Mt.pos=Math.min(Math.max(x,zt-Mt.size/2),h-Mt.size)}),o=!1,c=M.length;c--;)if(c>0){var k=M[c-1],R=M[c];k.pos+k.size>R.pos&&(k.size+=R.size,k.targets=k.targets.concat(R.targets),k.pos+k.size>h&&(k.pos=h-k.size),M.splice(c,1),o=!0)}c=0,M.forEach(function(Mt){var zt=u+t/2;Mt.targets.forEach(function(){r[c].y=Mt.pos+zt,zt+=t,c++})});for(var G={},N=0,ot=i;N<ot.length;N++){var ut=ot[N];G[ut.get("id")]=ut}r.forEach(function(Mt){var zt=Mt.r*Mt.r,$t=Math.pow(Math.abs(Mt.y-n.y),2);if(zt<$t)Mt.x=n.x;else{var ee=Math.sqrt(zt-$t);a?Mt.x=n.x+ee:Mt.x=n.x-ee}var Ut=G[Mt.id];Ut.attr("x",Mt.x),Ut.attr("y",Mt.y);var le=(0,f.find)(Ut.getChildren(),function(xe){return xe.get("type")==="text"});le&&(le.attr("y",Mt.y),le.attr("x",Mt.x))})}function h2(i,r,t,e){var n=i[0]?i[0].offset:0,a=r[0].get("coordinate"),o=a.getRadius(),s=a.getCenter();if(n>0){var l=14,u=o+n,h=u*2+l*2,c={start:a.start,end:a.end},v=[[],[]];i.forEach(function(x){!x||(x.textAlign==="right"?v[0].push(x):v[1].push(x))}),v.forEach(function(x,M){var k=h/l;x.length>k&&(x.sort(function(R,G){return G["..percent"]-R["..percent"]}),x.splice(k,x.length-k)),x.sort(function(R,G){return R.y-G.y}),f2(r,x,l,c,s,M)})}(0,f.each)(i,function(x){if(x&&x.labelLine){var M=x.offset,k=x.angle,R=Mn(s.x,s.y,o,k),G=Mn(s.x,s.y,o+M/2,k),N=x.x+(0,f.get)(x,"offsetX",0),ot=x.y+(0,f.get)(x,"offsetY",0),ut={x:N-Math.cos(k)*pv,y:ot-Math.sin(k)*pv};(0,f.isObject)(x.labelLine)||(x.labelLine={}),x.labelLine.path=["M "+R.x,R.y+" Q"+G.x,G.y+" "+ut.x,ut.y].join(",")}})}var gv=4;function c2(i,r,t,e,n,a,o){r.sort(function(Ut,le){return Ut.y-le.y});var s=e.start,l=e.end,u=Math.min(s.y,l.y),h=Math.max(s.y,l.y),c,v=r.map(function(Ut){return{content:Ut.content,size:t,pos:Ut.y,targets:[Ut.y]}}),x=Math.max.apply(Math,v.map(function(Ut){return Ut.pos})),M=Math.min.apply(Math,v.map(function(Ut){return Ut.pos}));if(o){for(var k=Math.min(M,h-(v.length-1)*t),R=Math.max(k+v.length*t,x+t),G=!0;G;)for(G=!1,c=v.length;c--;)if(c>0){var N=v[c-1],ot=v[c];N.pos+N.size>ot.pos&&(ot.pos+c*t<R?(N.size+=ot.size,N.targets=N.targets.concat(ot.targets),v.splice(c,1)):N.pos=ot.pos-N.size,G=!0)}}else for(var R=Math.max(u+(v.length-1)*t,x),k=Math.min(M,R-(v.length-1)*t),G=!0;G;)for(G=!1,c=v.length;c--;)if(c>0){var N=v[c-1],ot=v[c];N.pos+N.size>ot.pos&&(N.pos-k>c*t?N.pos-=N.size:(N.size+=ot.size,N.targets=N.targets.concat(ot.targets),v.splice(c,1)),G=!0)}c=0,v.forEach(function(Ut){var le=Ut.pos;Ut.targets.forEach(function(){r[c].y=le,le+=t,c++})});for(var ut={},Mt=0,zt=i;Mt<zt.length;Mt++){var $t=zt[Mt];ut[$t.get("id")]=$t}var ee=(Math.max.apply(Math,r.map(function(Ut){return Ut.y}))-Math.min.apply(Math,r.map(function(Ut){return Ut.y})))/2;ee=Math.max(ee,a),r.forEach(function(Ut){var le=ut[Ut.id],xe=le.find(function(Ne){return Ne.get("type")==="text"});if(xe&&xe.attr("y")!==Ut.y){var ye=ee*ee,Oe=Math.pow(Math.abs(Ut.y-n.y),2);if(ye<Oe)Ut.x=n.x;else{var Ge=Math.sqrt(ye-Oe);o?Ut.x=n.x+Ge:Ut.x=n.x-Ge}}le.attr("x",Ut.x),le.attr("y",Ut.y),xe&&(xe.attr("y",Ut.y),xe.attr("x",Ut.x))})}function v2(i,r,t,e){var n=i[0]?i[0].offset:0,a=r[0].get("coordinate"),o=a.getRadius(),s=a.getCenter();if(n>0){var l=(0,f.get)(i[0],"labelHeight",14),u=o+n,h=u*2+l*2,c={start:a.start,end:a.end},v=[[],[]];i.forEach(function(x){!x||(x.x<s.x?v[0].push(x):v[1].push(x))}),v.forEach(function(x,M){var k=h/l;if(x.length>k){x.sort(function(G,N){return N["data.percent"]-G["data.percent"]});var R=x.splice(k,x.length-k+1);R.forEach(function(G){var N=r.findIndex(function(ot){return ot.get("id")===G.id});r[N]&&(r[N].remove(!0),r.splice(N,1))})}c2(r,x,l,c,s,u,M===1)})}(0,f.each)(i,function(x){if(x&&x.labelLine){var M=x.angle,k=Mn(s.x,s.y,o,M),R=x.x+(0,f.get)(x,"offsetX",0)*(Math.cos(M)>0?1:-1),G=x.y+(0,f.get)(x,"offsetY",0)*(Math.sin(M)>0?1:-1),N={x:R-Math.cos(M)*gv,y:G-Math.sin(M)*gv},ot=x.labelLine.smooth,ut=[],Mt=N.x-s.x,zt=N.y-s.y,$t=Math.atan(zt/Mt);if(Mt<0&&($t+=Math.PI),ot===!1){(0,f.isObject)(x.labelLine)||(x.labelLine={});var ee=0;(M<0&&M>-Math.PI/2||M>Math.PI*1.5)&&N.y>k.y&&(ee=1),M>=0&&M<Math.PI/2&&N.y>k.y&&(ee=1),M>=Math.PI/2&&M<Math.PI&&k.y>N.y&&(ee=1),(M<-Math.PI/2||M>=Math.PI&&M<Math.PI*1.5)&&k.y>N.y&&(ee=1);var Ut=n/2>4?4:Math.max(n/2-1,0),le=Mn(s.x,s.y,o+Ut,M),xe=Mn(s.x,s.y,o+n/2,$t),ye=0;ut.push("M "+k.x+" "+k.y),ut.push("L "+le.x+" "+le.y),ut.push("A "+s.x+" "+s.y+" 0 "+ye+" "+ee+" "+xe.x+" "+xe.y),ut.push("L "+N.x+" "+N.y)}else{var le=Mn(s.x,s.y,o+(n/2>4?4:Math.max(n/2-1,0)),M),Oe=k.x<s.x?1:-1;ut.push("M "+N.x+" "+N.y);var Ge=(k.y-s.y)/(k.x-s.x),Ne=(N.y-s.y)/(N.x-s.x);Math.abs(Ge-Ne)>Math.pow(Math.E,-16)&&ut.push.apply(ut,["C",N.x+Oe*4,N.y,2*le.x-k.x,2*le.y-k.y,k.x,k.y]),ut.push("L "+k.x+" "+k.y)}x.labelLine.path=ut.join(" ")}})}function d2(i,r,t,e){(0,f.each)(r,function(n){var a=e.minX,o=e.minY,s=e.maxX,l=e.maxY,u=n.getCanvasBBox(),h=u.minX,c=u.minY,v=u.maxX,x=u.maxY,M=u.x,k=u.y,R=u.width,G=u.height,N=M,ot=k;(h<a||v<a)&&(N=a),(c<o||x<o)&&(ot=o),h>s?N=s-R:v>s&&(N=N-(v-s)),c>l?ot=l-G:x>l&&(ot=ot-(x-l)),(N!==M||ot!==k)&&Vu(n,N-M,ot-k)})}function p2(i,r,t,e){(0,f.each)(r,function(n,a){var o=n.getCanvasBBox(),s=t[a].getBBox();(o.minX<s.minX||o.minY<s.minY||o.maxX>s.maxX||o.maxY>s.maxY)&&n.remove(!0)})}var g2=100,yv=function(){function i(r){r===void 0&&(r={}),this.bitmap={};var t=r.xGap,e=t===void 0?1:t,n=r.yGap,a=n===void 0?8:n;this.xGap=e,this.yGap=a}return i.prototype.hasGap=function(r){for(var t=!0,e=this.bitmap,n=Math.round(r.minX),a=Math.round(r.maxX),o=Math.round(r.minY),s=Math.round(r.maxY),l=n;l<=a;l+=1){if(!e[l]){e[l]={};continue}if(l===n||l===a){for(var u=o;u<=s;u++)if(e[l][u]){t=!1;break}}else if(e[l][o]||e[l][s]){t=!1;break}}return t},i.prototype.fillGap=function(r){for(var t=this.bitmap,e=Math.round(r.minX),n=Math.round(r.maxX),a=Math.round(r.minY),o=Math.round(r.maxY),s=e;s<=n;s+=1)t[s]||(t[s]={});for(var s=e;s<=n;s+=this.xGap){for(var l=a;l<=o;l+=this.yGap)t[s][l]=!0;t[s][o]=!0}if(this.yGap!==1)for(var s=a;s<=o;s+=1)t[e][s]=!0,t[n][s]=!0;if(this.xGap!==1)for(var s=e;s<=n;s+=1)t[s][a]=!0,t[s][o]=!0},i.prototype.destroy=function(){this.bitmap={}},i}();function y2(i,r,t){t===void 0&&(t=g2);var e=-1,n=i.attr(),a=n.x,o=n.y,s=i.getCanvasBBox(),l=Math.sqrt(s.width*s.width+s.height*s.height),u,h=-e,c=0,v=0,x=function(G){var N=G*.1;return[N*Math.cos(N),N*Math.sin(N)]};if(r.hasGap(s))return r.fillGap(s),!0;for(var M=!1,k=0,R={};Math.min(Math.abs(c),Math.abs(v))<l&&k<t;)if(u=x(h+=e),c=~~u[0],v=~~u[1],!(!c&&!v||R[c+"-"+v])&&(i.attr({x:a+c,y:o+v}),c+v<0&&i.attr("textAlign","right"),k++,r.hasGap(i.getCanvasBBox()))){r.fillGap(i.getCanvasBBox()),M=!0,R[c+"-"+v]=!0;break}return M}function m2(i,r,t,e){var n=i.getCanvasBBox(),a=n.width,o=n.height,s={x:r,y:t,textAlign:"center"};switch(e){case 0:s.y-=o+1,s.x+=1,s.textAlign="left";break;case 1:s.y-=o+1,s.x-=1,s.textAlign="right";break;case 2:s.y+=o+1,s.x-=1,s.textAlign="right";break;case 3:s.y+=o+1,s.x+=1,s.textAlign="left";break;case 5:s.y-=o*2+2;break;case 6:s.y+=o*2+2;break;case 7:s.x+=a+1,s.textAlign="left";break;case 8:s.x-=a+1,s.textAlign="right";break;default:break}return i.attr(s),i.getCanvasBBox()}function x2(i,r,t,e){var n=new yv;(0,f.each)(r,function(a){var o=a.find(function(s){return s.get("type")==="text"});y2(o,n)||a.remove(!0)}),n.destroy()}function b2(i,r,t,e){var n=new yv;(0,f.each)(r,function(a){for(var o=a.find(function(x){return x.get("type")==="text"}),s=o.attr(),l=s.x,u=s.y,h=!1,c=0;c<=8;c++){var v=m2(o,l,u,c);if(n.hasGap(v)){n.fillGap(v),h=!0;break}}h||a.remove(!0)}),n.destroy()}function w2(i,r,t){var e={fillOpacity:(0,f.isNil)(i.attr("fillOpacity"))?1:i.attr("fillOpacity"),strokeOpacity:(0,f.isNil)(i.attr("strokeOpacity"))?1:i.attr("strokeOpacity"),opacity:(0,f.isNil)(i.attr("opacity"))?1:i.attr("opacity")};i.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),i.animate(e,r)}function S2(i,r,t){var e={fillOpacity:0,strokeOpacity:0,opacity:0},n=r.easing,a=r.duration,o=r.delay;i.animate(e,a,n,function(){i.remove(!0)},o)}function C2(i,r,t){var e,n=r[0],a=r[1];return i.applyToMatrix([n,a,1]),t==="x"?(i.setMatrix(Ve.transform(i.getMatrix(),[["t",-n,-a],["s",.01,1],["t",n,a]])),e=Ve.transform(i.getMatrix(),[["t",-n,-a],["s",100,1],["t",n,a]])):t==="y"?(i.setMatrix(Ve.transform(i.getMatrix(),[["t",-n,-a],["s",1,.01],["t",n,a]])),e=Ve.transform(i.getMatrix(),[["t",-n,-a],["s",1,100],["t",n,a]])):t==="xy"&&(i.setMatrix(Ve.transform(i.getMatrix(),[["t",-n,-a],["s",.01,.01],["t",n,a]])),e=Ve.transform(i.getMatrix(),[["t",-n,-a],["s",100,100],["t",n,a]])),e}function vf(i,r,t,e,n){var a=t.start,o=t.end,s=t.getWidth(),l=t.getHeight(),u,h;n==="y"?(u=a.x+s/2,h=e.y<a.y?e.y:a.y):n==="x"?(u=e.x>a.x?e.x:a.x,h=a.y+l/2):n==="xy"&&(t.isPolar?(u=t.getCenter().x,h=t.getCenter().y):(u=(a.x+o.x)/2,h=(a.y+o.y)/2));var c=C2(i,[u,h],n);i.animate({matrix:c},r)}function M2(i,r,t){var e=t.coordinate,n=t.minYPoint;vf(i,r,e,n,"x")}function E2(i,r,t){var e=t.coordinate,n=t.minYPoint;vf(i,r,e,n,"y")}function _2(i,r,t){var e=t.coordinate,n=t.minYPoint;vf(i,r,e,n,"xy")}function A2(i,r,t){var e=i.getTotalLength();i.attr("lineDash",[e]),i.animate(function(n){return{lineDashOffset:(1-n)*e}},r)}function T2(i,r,t){var e=t.toAttrs,n=e.x,a=e.y;delete e.x,delete e.y,i.attr(e),i.animate({x:n,y:a},r)}function P2(i,r,t){var e=i.getBBox(),n=i.get("origin").mappingData,a=n.points,o=a[0].y-a[1].y>0?e.maxX:e.minX,s=(e.minY+e.maxY)/2;i.applyToMatrix([o,s,1]);var l=Ve.transform(i.getMatrix(),[["t",-o,-s],["s",.01,1],["t",o,s]]);i.setMatrix(l),i.animate({matrix:Ve.transform(i.getMatrix(),[["t",-o,-s],["s",100,1],["t",o,s]])},r)}function L2(i,r,t){var e=i.getBBox(),n=i.get("origin").mappingData,a=(e.minX+e.maxX)/2,o=n.points,s=o[0].y-o[1].y<=0?e.maxY:e.minY;i.applyToMatrix([a,s,1]);var l=Ve.transform(i.getMatrix(),[["t",-a,-s],["s",1,.01],["t",a,s]]);i.setMatrix(l),i.animate({matrix:Ve.transform(i.getMatrix(),[["t",-a,-s],["s",1,100],["t",a,s]])},r)}var O2=p(84909);function mv(i,r){var t,e=(0,O2.Z)(i,r),n=e.startAngle,a=e.endAngle;return!(0,f.isNumberEqual)(n,-Math.PI*.5)&&n<-Math.PI*.5&&(n+=Math.PI*2),!(0,f.isNumberEqual)(a,-Math.PI*.5)&&a<-Math.PI*.5&&(a+=Math.PI*2),r[5]===0&&(t=[a,n],n=t[0],a=t[1]),(0,f.isNumberEqual)(n,Math.PI*1.5)&&(n=Math.PI*-.5),(0,f.isNumberEqual)(a,Math.PI*-.5)&&(a=Math.PI*1.5),{startAngle:n,endAngle:a}}function xv(i){var r;return i[0]==="M"||i[0]==="L"?r=[i[1],i[2]]:(i[0]==="a"||i[0]==="A")&&(r=[i[i.length-2],i[i.length-1]]),r}function bv(i){var r,t,e,n=i.filter(function(ot){return ot[0]==="A"||ot[0]==="a"}),a=n[0],o=n.length>1?n[1]:n[0],s=i.indexOf(a),l=i.indexOf(o),u=xv(i[s-1]),h=xv(i[l-1]),c=mv(u,a),v=c.startAngle,x=c.endAngle,M=mv(h,o),k=M.startAngle,R=M.endAngle;(0,f.isNumberEqual)(v,k)&&(0,f.isNumberEqual)(x,R)?(t=v,e=x):(t=Math.min(v,k),e=Math.max(x,R));var G=a[1],N=n[n.length-1][1];return G<N?(r=[N,G],G=r[0],N=r[1]):G===N&&(N=0),{startAngle:t,endAngle:e,radius:G,innerRadius:N}}function I2(i,r,t){var e=t.toAttrs,n=t.coordinate,a=e.path,o=a.map(function(N){return N[0]}),s=bv(a),l=s.startAngle,u=s.endAngle,h=s.radius,c=s.innerRadius,v=bv(i.attr("path")),x=v.startAngle,M=v.endAngle,k=n.getCenter(),R=l-x,G=u-M;i.animate(function(N){var ot=x+N*R,ut=M+N*G;return(0,j.__assign)((0,j.__assign)({},e),{path:(0,f.isEqual)(o,["M","A","A","Z"])?Xi(k.x,k.y,h,ot,ut):vi(k.x,k.y,h,ot,ut,c)})},(0,j.__assign)((0,j.__assign)({},r),{callback:function(){i.attr("path",a)}}))}function k2(i,r,t){var e=St(t.coordinate,20),n=e.type,a=e.startState,o=e.endState,s=i.setClip({type:n,attrs:a});s.animate(o,(0,j.__assign)((0,j.__assign)({},r),{callback:function(){i&&!i.get("destroyed")&&i.set("clipShape",null),s.remove(!0)}}))}function df(i,r,t){if(i.isGroup())(0,f.each)(i.getChildren(),function(s){df(s,r,t)});else{var e=i.getBBox(),n=(e.minX+e.maxX)/2,a=(e.minY+e.maxY)/2;if(i.applyToMatrix([n,a,1]),t==="zoomIn"){var o=Ve.transform(i.getMatrix(),[["t",-n,-a],["s",.01,.01],["t",n,a]]);i.setMatrix(o),i.animate({matrix:Ve.transform(i.getMatrix(),[["t",-n,-a],["s",100,100],["t",n,a]])},r)}else i.animate({matrix:Ve.transform(i.getMatrix(),[["t",-n,-a],["s",.01,.01],["t",n,a]])},(0,j.__assign)((0,j.__assign)({},r),{callback:function(){i.remove(!0)}}))}}function B2(i,r,t){df(i,r,"zoomIn")}function D2(i,r,t){df(i,r,"zoomOut")}function Qa(i){return[_t.TOP,_t.BOTTOM].includes(i)?{offsetX:0,offsetY:i===_t.TOP?-8:8,style:{textAlign:"center",textBaseline:i===_t.TOP?"bottom":"top"}}:[_t.LEFT,_t.RIGHT].includes(i)?{offsetX:i===_t.LEFT?-8:8,offsetY:0,style:{textAlign:i===_t.LEFT?"right":"left",textBaseline:"middle",rotate:Math.PI/2}}:{}}function pf(i,r,t){return{x:i.x+r*Math.cos(t),y:i.y+r*Math.sin(t)}}var F2=function(i){(0,j.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){return(0,f.deepMix)({},i.prototype.getDefaultCfg.call(this),{type:"circle",showTitle:!0,title:i.prototype.getDefaultTitleCfg.call(this)})},r.prototype.render=function(){i.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},r.prototype.getRegion=function(t,e){var n=1/2,a={x:.5,y:.5},o=Math.PI*2/t,s=-1*Math.PI/2+o*e,l=n/(1+1/Math.sin(o/2)),u=pf(a,n-l,s),h=Math.PI*5/4,c=Math.PI*1/4;return{start:pf(u,l,h),end:pf(u,l,c)}},r.prototype.afterEachView=function(t,e){this.processAxis(t,e)},r.prototype.beforeEachView=function(t,e){},r.prototype.generateFacets=function(t){var e=this,n=this.cfg,a=n.fields,o=n.type,s=a[0];if(!s)throw new Error("No `fields` specified!");var l=this.getFieldValues(t,s),u=l.length,h=[];return l.forEach(function(c,v){var x=[{field:s,value:c,values:l}],M=(0,f.filter)(t,e.getFacetDataFilter(x)),k={type:o,data:M,region:e.getRegion(u,v),columnValue:c,columnField:s,columnIndex:v,columnValuesLength:u,rowValue:null,rowField:null,rowIndex:0,rowValuesLength:1};h.push(k)}),h},r.prototype.getXAxisOption=function(t,e,n,a){return n},r.prototype.getYAxisOption=function(t,e,n,a){return n},r.prototype.renderTitle=function(){var t=this;(0,f.each)(this.facets,function(e){var n=e.columnValue,a=e.view,o=(0,f.get)(t.cfg.title,"formatter"),s=(0,f.deepMix)({position:["50%","0%"],content:o?o(n):n},Qa(_t.TOP),t.cfg.title);a.annotation().text(s)})},r}(Nr),R2=F2,N2=function(i){(0,j.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){return(0,f.deepMix)({},i.prototype.getDefaultCfg.call(this),{type:"list",cols:null,showTitle:!0,title:i.prototype.getDefaultTitleCfg.call(this)})},r.prototype.render=function(){i.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},r.prototype.afterEachView=function(t,e){this.processAxis(t,e)},r.prototype.beforeEachView=function(t,e){},r.prototype.generateFacets=function(t){var e=this,n=this.cfg.fields,a=this.cfg.cols,o=n[0];if(!o)throw new Error("No `fields` specified!");var s=this.getFieldValues(t,o),l=s.length;a=a||l;var u=this.getPageCount(l,a),h=[];return s.forEach(function(c,v){var x=e.getRowCol(v,a),M=x.row,k=x.col,R=[{field:o,value:c,values:s}],G=(0,f.filter)(t,e.getFacetDataFilter(R)),N={type:e.cfg.type,data:G,region:e.getRegion(u,a,k,M),columnValue:c,rowValue:c,columnField:o,rowField:null,columnIndex:k,rowIndex:M,columnValuesLength:a,rowValuesLength:u,total:l};h.push(N)}),h},r.prototype.getXAxisOption=function(t,e,n,a){return a.rowIndex!==a.rowValuesLength-1&&a.columnValuesLength*a.rowIndex+a.columnIndex+1+a.columnValuesLength<=a.total?(0,j.__assign)((0,j.__assign)({},n),{label:null,title:null}):n},r.prototype.getYAxisOption=function(t,e,n,a){return a.columnIndex!==0?(0,j.__assign)((0,j.__assign)({},n),{title:null,label:null}):n},r.prototype.renderTitle=function(){var t=this;(0,f.each)(this.facets,function(e){var n=e.columnValue,a=e.view,o=(0,f.get)(t.cfg.title,"formatter"),s=(0,f.deepMix)({position:["50%","0%"],content:o?o(n):n},Qa(_t.TOP),t.cfg.title);a.annotation().text(s)})},r.prototype.getPageCount=function(t,e){return Math.floor((t+e-1)/e)},r.prototype.getRowCol=function(t,e){var n=Math.floor(t/e),a=t%e;return{row:n,col:a}},r}(Nr),G2=N2,Y2=function(i){(0,j.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){return(0,f.deepMix)({},i.prototype.getDefaultCfg.call(this),{type:"matrix",showTitle:!1,columnTitle:(0,j.__assign)({},i.prototype.getDefaultTitleCfg.call(this)),rowTitle:(0,j.__assign)({},i.prototype.getDefaultTitleCfg.call(this))})},r.prototype.render=function(){i.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},r.prototype.afterEachView=function(t,e){this.processAxis(t,e)},r.prototype.beforeEachView=function(t,e){},r.prototype.generateFacets=function(t){for(var e=this.cfg,n=e.fields,a=e.type,o=n.length,s=o,l=[],u=0;u<s;u++)for(var h=n[u],c=0;c<o;c++){var v=n[c],x={type:a,data:t,region:this.getRegion(o,s,u,c),columnValue:h,rowValue:v,columnField:h,rowField:v,columnIndex:u,rowIndex:c,columnValuesLength:s,rowValuesLength:o};l.push(x)}return l},r.prototype.getXAxisOption=function(t,e,n,a){return a.rowIndex!==a.rowValuesLength-1?(0,j.__assign)((0,j.__assign)({},n),{label:null,title:null}):n},r.prototype.getYAxisOption=function(t,e,n,a){return a.columnIndex!==0?(0,j.__assign)((0,j.__assign)({},n),{title:null,label:null}):n},r.prototype.renderTitle=function(){var t=this;(0,f.each)(this.facets,function(e,n){var a=e.columnIndex,o=e.rowIndex,s=e.columnValuesLength,l=e.rowValuesLength,u=e.columnValue,h=e.rowValue,c=e.view;if(o===0){var v=(0,f.get)(t.cfg.columnTitle,"formatter"),x=(0,f.deepMix)({position:["50%","0%"],content:v?v(u):u},Qa(_t.TOP),t.cfg.columnTitle);c.annotation().text(x)}if(a===s-1){var v=(0,f.get)(t.cfg.rowTitle,"formatter"),x=(0,f.deepMix)({position:["100%","50%"],content:v?v(h):h},Qa(_t.RIGHT),t.cfg.rowTitle);c.annotation().text(x)}})},r}(Nr),z2=Y2,X2=function(i){(0,j.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){return(0,f.deepMix)({},i.prototype.getDefaultCfg.call(this),{type:"mirror",showTitle:!0,title:i.prototype.getDefaultTitleCfg.call(this),transpose:!1})},r.prototype.render=function(){i.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},r.prototype.beforeEachView=function(t,e){this.cfg.transpose?e.columnIndex%2==0?t.coordinate().transpose().reflect("x"):t.coordinate().transpose():e.rowIndex%2!=0&&t.coordinate().reflect("y")},r.prototype.afterEachView=function(t,e){this.processAxis(t,e)},r.prototype.generateFacets=function(t){var e=this,n=this.cfg.fields[0],a=[],o=1,s=1,l=[""],u=[""],h,c;return this.cfg.transpose?(h=n,l=this.getFieldValues(t,h).slice(0,2),o=l.length):(c=n,u=this.getFieldValues(t,c).slice(0,2),s=u.length),l.forEach(function(v,x){u.forEach(function(M,k){var R=[{field:h,value:v,values:l},{field:c,value:M,values:u}],G=(0,f.filter)(t,e.getFacetDataFilter(R)),N={type:e.cfg.type,data:G,region:e.getRegion(s,o,x,k),columnValue:v,rowValue:M,columnField:h,rowField:c,columnIndex:x,rowIndex:k,columnValuesLength:o,rowValuesLength:s};a.push(N)})}),a},r.prototype.getXAxisOption=function(t,e,n,a){return a.columnIndex===1||a.rowIndex===1?(0,j.__assign)((0,j.__assign)({},n),{label:null,title:null}):n},r.prototype.getYAxisOption=function(t,e,n,a){return n},r.prototype.renderTitle=function(){var t=this;(0,f.each)(this.facets,function(e,n){var a=e.columnValue,o=e.rowValue,s=e.view,l=(0,f.get)(t.cfg.title,"formatter");if(t.cfg.transpose){var u=(0,f.deepMix)({position:["50%","0%"],content:l?l(a):a},Qa(_t.TOP),t.cfg.title);s.annotation().text(u)}else{var u=(0,f.deepMix)({position:["100%","50%"],content:l?l(o):o},Qa(_t.RIGHT),t.cfg.title);s.annotation().text(u)}})},r}(Nr),V2=X2,H2=function(i){(0,j.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.afterEachView=function(t,e){this.processAxis(t,e)},r.prototype.beforeEachView=function(t,e){},r.prototype.getDefaultCfg=function(){return(0,f.deepMix)({},i.prototype.getDefaultCfg.call(this),{type:"rect",columnTitle:(0,j.__assign)({},i.prototype.getDefaultTitleCfg.call(this)),rowTitle:(0,j.__assign)({},i.prototype.getDefaultTitleCfg.call(this))})},r.prototype.render=function(){i.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},r.prototype.generateFacets=function(t){var e=this,n=this.cfg.fields,a=n[0],o=n[1],s=[],l=1,u=1,h=[""],c=[""];return a&&(h=this.getFieldValues(t,a),l=h.length),o&&(c=this.getFieldValues(t,o),u=c.length),h.forEach(function(v,x){c.forEach(function(M,k){var R=[{field:a,value:v,values:h},{field:o,value:M,values:c}],G=(0,f.filter)(t,e.getFacetDataFilter(R)),N={type:e.cfg.type,data:G,region:e.getRegion(u,l,x,k),columnValue:v,rowValue:M,columnField:a,rowField:o,columnIndex:x,rowIndex:k,columnValuesLength:l,rowValuesLength:u};s.push(N)})}),s},r.prototype.renderTitle=function(){var t=this;(0,f.each)(this.facets,function(e,n){var a=e.columnIndex,o=e.rowIndex,s=e.columnValuesLength,l=e.columnValue,u=e.rowValue,h=e.view;if(o===0){var c=(0,f.get)(t.cfg.columnTitle,"formatter"),v=(0,f.deepMix)({position:["50%","0%"],content:c?c(l):l},Qa(_t.TOP),t.cfg.columnTitle);h.annotation().text(v)}if(a===s-1){var c=(0,f.get)(t.cfg.rowTitle,"formatter"),v=(0,f.deepMix)({position:["100%","50%"],content:c?c(u):u},Qa(_t.RIGHT),t.cfg.rowTitle);h.annotation().text(v)}})},r.prototype.getXAxisOption=function(t,e,n,a){return a.rowIndex!==a.rowValuesLength-1?(0,j.__assign)((0,j.__assign)({},n),{title:null,label:null}):a.columnIndex!==Math.floor((a.columnValuesLength-1)/2)?(0,j.__assign)((0,j.__assign)({},n),{title:null}):n},r.prototype.getYAxisOption=function(t,e,n,a){return a.columnIndex!==0?(0,j.__assign)((0,j.__assign)({},n),{title:null,label:null}):a.rowIndex!==Math.floor((a.rowValuesLength-1)/2)?(0,j.__assign)((0,j.__assign)({},n),{title:null}):n},r}(Nr),W2=H2,j2=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.afterChartRender=function(){t.facets&&t.cfg.line&&(t.container.clear(),t.drawLines(t.facets))},t}return r.prototype.afterEachView=function(t,e){this.processAxis(t,e)},r.prototype.beforeEachView=function(t,e){},r.prototype.init=function(){i.prototype.init.call(this),this.view.on(Vt.AFTER_RENDER,this.afterChartRender)},r.prototype.getDefaultCfg=function(){return(0,f.deepMix)({},i.prototype.getDefaultCfg.call(this),{type:"tree",line:{style:{lineWidth:1,stroke:"#ddd"},smooth:!1},showTitle:!0,title:i.prototype.getDefaultTitleCfg.call(this)})},r.prototype.generateFacets=function(t){var e=this.cfg.fields;if(!e.length)throw new Error("Please specify for the fields for rootFacet!");var n=[],a={type:this.cfg.type,data:t,region:null,rowValuesLength:this.getRows(),columnValuesLength:1,rowIndex:0,columnIndex:0,rowField:"",columnField:"",rowValue:"",columnValue:""};return n.push(a),a.children=this.getChildFacets(t,1,n),this.setRegion(n),n},r.prototype.setRegion=function(t){var e=this;this.forceColIndex(t),t.forEach(function(n){n.region=e.getRegion(n.rowValuesLength,n.columnValuesLength,n.columnIndex,n.rowIndex)})},r.prototype.getRegion=function(t,e,n,a){var o=1/e,s=1/t,l={x:o*n,y:s*a},u={x:l.x+o,y:l.y+s*2/3};return{start:l,end:u}},r.prototype.forceColIndex=function(t){var e=this,n=[],a=0;t.forEach(function(v){e.isLeaf(v)&&(n.push(v),v.columnIndex=a,a++)}),n.forEach(function(v){v.columnValuesLength=n.length});for(var o=this.cfg.fields.length,s=o-1;s>=0;s--)for(var l=this.getFacetsByLevel(t,s),u=0,h=l;u<h.length;u++){var c=h[u];this.isLeaf(c)||(c.originColIndex=c.columnIndex,c.columnIndex=this.getRegionIndex(c.children),c.columnValuesLength=n.length)}},r.prototype.getFacetsByLevel=function(t,e){var n=[];return t.forEach(function(a){a.rowIndex===e&&n.push(a)}),n},r.prototype.getRegionIndex=function(t){var e=t[0],n=t[t.length-1];return(n.columnIndex-e.columnIndex)/2+e.columnIndex},r.prototype.isLeaf=function(t){return!t.children||!t.children.length},r.prototype.getRows=function(){return this.cfg.fields.length+1},r.prototype.getChildFacets=function(t,e,n){var a=this,o=this.cfg.fields,s=o.length;if(!(s<e)){var l=[],u=o[e-1],h=this.getFieldValues(t,u);return h.forEach(function(c,v){var x=[{field:u,value:c,values:h}],M=t.filter(a.getFacetDataFilter(x));if(M.length){var k={type:a.cfg.type,data:M,region:null,columnValue:c,rowValue:"",columnField:u,rowField:"",columnIndex:v,rowValuesLength:a.getRows(),columnValuesLength:1,rowIndex:e,children:a.getChildFacets(M,e+1,n)};l.push(k),n.push(k)}}),l}},r.prototype.render=function(){i.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},r.prototype.renderTitle=function(){var t=this;(0,f.each)(this.facets,function(e){var n=e.columnValue,a=e.view,o=(0,f.get)(t.cfg.title,"formatter"),s=(0,f.deepMix)({position:["50%","0%"],content:o?o(n):n},Qa(_t.TOP),t.cfg.title);a.annotation().text(s)})},r.prototype.drawLines=function(t){var e=this;t.forEach(function(n){if(!e.isLeaf(n)){var a=n.children;e.addFacetLines(n,a)}})},r.prototype.addFacetLines=function(t,e){var n=this,a=t.view,o=a.coordinateBBox,s={x:o.x+o.width/2,y:o.y+o.height};e.forEach(function(l){var u=l.view.coordinateBBox,h={x:u.bl.x+(u.tr.x-u.bl.x)/2,y:u.tr.y},c={x:s.x,y:s.y+(h.y-s.y)/2},v={x:h.x,y:c.y};n.drawLine([s,c,v,h])})},r.prototype.getPath=function(t){var e=[],n=this.cfg.line.smooth;return n?(e.push(["M",t[0].x,t[0].y]),e.push(["C",t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y])):t.forEach(function(a,o){o===0?e.push(["M",a.x,a.y]):e.push(["L",a.x,a.y])}),e},r.prototype.drawLine=function(t){var e=this.getPath(t),n=this.cfg.line.style;this.container.addShape("path",{attrs:(0,f.assign)({path:e},n)})},r.prototype.getXAxisOption=function(t,e,n,a){return a.rowIndex!==a.rowValuesLength-1?(0,j.__assign)((0,j.__assign)({},n),{title:null,label:null}):n},r.prototype.getYAxisOption=function(t,e,n,a){return a.originColIndex!==0&&a.columnIndex!==0?(0,j.__assign)((0,j.__assign)({},n),{title:null,label:null}):n},r}(Nr),U2=j2,Z2=function(i){(0,j.__extends)(r,i);function r(t){var e=i.call(this,t)||this;return e.cache=new Map,e.foregroundContainer=e.view.getLayer(yt.FORE).addGroup(),e.backgroundContainer=e.view.getLayer(yt.BG).addGroup(),e.option=[],e}return Object.defineProperty(r.prototype,"name",{get:function(){return"annotation"},enumerable:!1,configurable:!0}),r.prototype.init=function(){},r.prototype.layout=function(){var t=this,e=this.getComponents(),n=function(o){var s=o.component,l=o.extra,u=l.type,h=t.getAnnotationTheme(u);s.update(t.getAnnotationCfg(u,l,h))},a=function(o){var s=t.createAnnotation(o);s&&(s.component.init(),o.type==="regionFilter"&&s.component.render(),t.cache.set(o,s))};e.length?(0,f.each)(e,function(o){var s=o.component;s.get("type")==="regionFilter"?t.view.getRootView().once(Vt.AFTER_RENDER,function(){n(o)}):n(o)}):(0,f.each)(this.option,function(o){o.type==="regionFilter"?t.view.getRootView().once(Vt.AFTER_RENDER,function(){a(o)}):a(o)})},r.prototype.render=function(){},r.prototype.update=function(){var t=this,e=new WeakMap,n=function(a){var o=a.type,s=t.getAnnotationTheme(o),l=t.getAnnotationCfg(o,a,s),u=t.cache.get(a);if(u)Ft(l,["container"]),u.component.update(l),e.set(a,!0);else{var h=t.createAnnotation(a);h&&(h.component.init(),a.type==="regionFilter"&&h.component.render(),t.cache.set(a,h),e.set(a,!0))}};this.view.once(Vt.AFTER_RENDER,function(){(0,f.each)(t.option,function(o){o.type==="regionFilter"&&n(o)});var a=new Map;t.cache.forEach(function(o,s){e.has(s)?a.set(s,o):o.component.destroy()}),t.cache=a}),(0,f.each)(this.option,function(a){a.type!=="regionFilter"&&n(a)})},r.prototype.clear=function(t){t===void 0&&(t=!1),i.prototype.clear.call(this),this.cache.clear(),this.foregroundContainer.clear(),this.backgroundContainer.clear(),t&&(this.option=[])},r.prototype.destroy=function(){this.clear(!0),this.foregroundContainer.remove(!0),this.backgroundContainer.remove(!0)},r.prototype.getComponents=function(){var t=[];return this.cache.forEach(function(e){t.push(e)}),t},r.prototype.createAnnotation=function(t){var e=t.type,n=nn.Annotation[(0,f.upperFirst)(e)];if(n){var a=this.getAnnotationTheme(e),o=this.getAnnotationCfg(e,t,a),s=new n(o);return{component:s,layer:this.isTop(o)?yt.FORE:yt.BG,direction:_t.NONE,type:jt.ANNOTATION,extra:t}}},r.prototype.annotation=function(t){this.option.push(t)},r.prototype.arc=function(t){return this.annotation((0,j.__assign)({type:"arc"},t)),this},r.prototype.image=function(t){return this.annotation((0,j.__assign)({type:"image"},t)),this},r.prototype.line=function(t){return this.annotation((0,j.__assign)({type:"line"},t)),this},r.prototype.region=function(t){return this.annotation((0,j.__assign)({type:"region"},t)),this},r.prototype.text=function(t){return this.annotation((0,j.__assign)({type:"text"},t)),this},r.prototype.dataMarker=function(t){return this.annotation((0,j.__assign)({type:"dataMarker"},t)),this},r.prototype.dataRegion=function(t){this.annotation((0,j.__assign)({type:"dataRegion"},t))},r.prototype.regionFilter=function(t){this.annotation((0,j.__assign)({type:"regionFilter"},t))},r.prototype.parsePosition=function(t){var e=this.view.getXScale(),n=this.view.getScalesByDim("y"),a=(0,f.isFunction)(t)?t.call(null,e,n):t,o=0,s=0;if((0,f.isArray)(a)){var l=a[0],u=a[1];if((0,f.isString)(l)&&l.indexOf("%")!==-1&&!isNaN(l.slice(0,-1)))return this.parsePercentPosition(a);o=this.getNormalizedValue(l,e),s=this.getNormalizedValue(u,Object.values(n)[0])}else if(!(0,f.isNil)(a))for(var h=0,c=(0,f.keys)(a);h<c.length;h++){var v=c[h],x=a[v];v===e.field&&(o=this.getNormalizedValue(x,e)),n[v]&&(s=this.getNormalizedValue(x,n[v]))}return this.view.getCoordinate().convert({x:o,y:s})},r.prototype.getRegionPoints=function(t,e){var n=this,a=this.view.getXScale(),o=this.view.getScalesByDim("y"),s=Object.values(o)[0],l=a.field,u=this.view.getData(),h=(0,f.isArray)(t)?t[0]:t[l],c=(0,f.isArray)(e)?e[0]:e[l],v=[],x;return(0,f.each)(u,function(M,k){if(M[l]===h&&(x=k),k>=x){var R=n.parsePosition([M[l],M[s.field]]);R&&v.push(R)}if(M[l]===c)return!1}),v},r.prototype.getNormalizedValue=function(t,e){var n,a;switch(t){case"start":n=0;break;case"end":n=1;break;case"median":{a=e.isCategory?(e.values.length-1)/2:(e.min+e.max)/2,n=e.scale(a);break}case"min":case"max":e.isCategory?a=t==="min"?0:e.values.length-1:a=e[t],n=e.scale(a);break;default:n=e.scale(t)}return n},r.prototype.parsePercentPosition=function(t){var e=parseFloat(t[0])/100,n=parseFloat(t[1])/100,a=this.view.getCoordinate(),o=a.start,s=a.end,l={x:Math.min(o.x,s.x),y:Math.min(o.y,s.y)},u=a.getWidth()*e+l.x,h=a.getHeight()*n+l.y;return{x:u,y:h}},r.prototype.getCoordinateBBox=function(){var t=this.view.getCoordinate(),e=t.start,n=t.end,a=t.getWidth(),o=t.getHeight(),s={x:Math.min(e.x,n.x),y:Math.min(e.y,n.y)};return{x:s.x,y:s.y,minX:s.x,minY:s.y,maxX:s.x+a,maxY:s.y+o,width:a,height:o}},r.prototype.getAnnotationCfg=function(t,e,n){var a=this.view.getCoordinate(),o={};if((0,f.isNil)(e))return null;if(t==="arc"){var s=e,l=s.start,u=s.end,h=this.parsePosition(l),c=this.parsePosition(u),v=mt(a,h),x=mt(a,c);v>x&&(x=Math.PI*2+x),o={center:a.getCenter(),radius:Xt(a,h),startAngle:v,endAngle:x}}else if(t==="image"){var M=e,l=M.start,u=M.end;o={start:this.parsePosition(l),end:this.parsePosition(u),src:e.src}}else if(t==="line"){var k=e,l=k.start,u=k.end;o={start:this.parsePosition(l),end:this.parsePosition(u),text:(0,f.get)(e,"text",null)}}else if(t==="region"){var R=e,l=R.start,u=R.end;o={start:this.parsePosition(l),end:this.parsePosition(u)}}else if(t==="text"){var G=this.view.getData(),N=e,ot=N.position,ut=N.content,Mt=(0,j.__rest)(N,["position","content"]),zt=ut;(0,f.isFunction)(ut)&&(zt=ut(G)),o=(0,j.__assign)((0,j.__assign)((0,j.__assign)({},this.parsePosition(ot)),Mt),{content:zt})}else if(t==="dataMarker"){var $t=e,ot=$t.position,ee=$t.point,Ut=$t.line,le=$t.text,xe=$t.autoAdjust,ye=$t.direction;o=(0,j.__assign)((0,j.__assign)({},this.parsePosition(ot)),{coordinateBBox:this.getCoordinateBBox(),point:ee,line:Ut,text:le,autoAdjust:xe,direction:ye})}else if(t==="dataRegion"){var Oe=e,l=Oe.start,u=Oe.end,Ge=Oe.region,le=Oe.text,Ne=Oe.lineLength;o={points:this.getRegionPoints(l,u),region:Ge,text:le,lineLength:Ne}}else if(t==="regionFilter"){var qe=e,l=qe.start,u=qe.end,tr=qe.apply,rr=qe.color,$e=this.view.geometries,Qe=[],br=function(wr){!wr||(wr.isGroup()?wr.getChildren().forEach(function(Dr){return br(Dr)}):Qe.push(wr))};(0,f.each)($e,function(wr){tr?(0,f.contains)(tr,wr.type)&&(0,f.each)(wr.elements,function(Dr){br(Dr.shape)}):(0,f.each)(wr.elements,function(Dr){br(Dr.shape)})}),o={color:rr,shapes:Qe,start:this.parsePosition(l),end:this.parsePosition(u)}}var yr=(0,f.deepMix)({},n,(0,j.__assign)((0,j.__assign)({},o),{top:e.top,style:e.style,offsetX:e.offsetX,offsetY:e.offsetY}));return yr.container=this.getComponentContainer(yr),yr.animate=this.view.getOptions().animate&&yr.animate&&(0,f.get)(e,"animate",yr.animate),yr.animateOption=(0,f.deepMix)({},Xo,yr.animateOption,e.animateOption),yr},r.prototype.isTop=function(t){return(0,f.get)(t,"top",!0)},r.prototype.getComponentContainer=function(t){return this.isTop(t)?this.foregroundContainer:this.backgroundContainer},r.prototype.getAnnotationTheme=function(t){return(0,f.get)(this.view.getTheme(),["components","annotation",t],{})},r}(zo),K2=Z2;function wv(i,r){return(0,f.get)(i,["components","axis",r,"grid"],{})}function ll(i,r,t,e){var n=[],a=r.getTicks();return i.isPolar&&a.push({value:1,text:"",tickValue:""}),a.reduce(function(o,s,l){var u=s.value;if(e)n.push({points:[i.convert(t==="y"?{x:0,y:u}:{x:u,y:0}),i.convert(t==="y"?{x:1,y:u}:{x:u,y:1})]});else if(l){var h=o.value,c=(h+u)/2;n.push({points:[i.convert(t==="y"?{x:0,y:c}:{x:c,y:0}),i.convert(t==="y"?{x:1,y:c}:{x:c,y:1})]})}return s},a[0]),n}function gf(i,r,t,e,n){var a=r.values.length,o=[],s=t.getTicks();return s.reduce(function(l,u){var h=l?l.value:u.value,c=u.value,v=(h+c)/2;return n==="x"?o.push({points:[i.convert({x:e?c:v,y:0}),i.convert({x:e?c:v,y:1})]}):o.push({points:(0,f.map)(Array(a+1),function(x,M){return i.convert({x:M/a,y:e?c:v})})}),u},s[0]),o}function Sv(i,r){var t=(0,f.get)(r,"grid");if(t===null)return!1;var e=(0,f.get)(i,"grid");return!(t===void 0&&e===null)}var uo=["container"],Cv=(0,j.__assign)((0,j.__assign)({},Xo),{appear:null}),$2=function(i){(0,j.__extends)(r,i);function r(t){var e=i.call(this,t)||this;return e.cache=new Map,e.gridContainer=e.view.getLayer(yt.BG).addGroup(),e.axisContainer=e.view.getLayer(yt.BG).addGroup(),e}return Object.defineProperty(r.prototype,"name",{get:function(){return"axis"},enumerable:!1,configurable:!0}),r.prototype.init=function(){},r.prototype.render=function(){this.update()},r.prototype.layout=function(){var t=this,e=this.view.getCoordinate();(0,f.each)(this.getComponents(),function(n){var a=n.component,o=n.direction,s=n.type,l=n.extra,u=l.dim,h=l.scale,c=l.alignTick,v;if(s===jt.AXIS)e.isPolar?u==="x"?v=e.isTransposed?fr(e,o):Cr(e):u==="y"&&(v=e.isTransposed?Cr(e):fr(e,o)):v=fr(e,o);else if(s===jt.GRID)if(e.isPolar){var x=void 0;e.isTransposed?x=u==="x"?gf(e,t.view.getYScales()[0],h,c,u):ll(e,h,u,c):x=u==="x"?ll(e,h,u,c):gf(e,t.view.getXScale(),h,c,u),v={items:x,center:t.view.getCoordinate().getCenter()}}else v={items:ll(e,h,u,c)};a.update(v)})},r.prototype.update=function(){this.option=this.view.getOptions().axes;var t=new Map;this.updateXAxes(t),this.updateYAxes(t);var e=new Map;this.cache.forEach(function(n,a){t.has(a)?e.set(a,n):n.component.destroy()}),this.cache=e},r.prototype.clear=function(){i.prototype.clear.call(this),this.cache.clear(),this.gridContainer.clear(),this.axisContainer.clear()},r.prototype.destroy=function(){i.prototype.destroy.call(this),this.gridContainer.remove(!0),this.axisContainer.remove(!0)},r.prototype.getComponents=function(){var t=[];return this.cache.forEach(function(e){t.push(e)}),t},r.prototype.updateXAxes=function(t){var e=this.view.getXScale();if(!(!e||e.isIdentity)){var n=or(this.option,e.field);if(n!==!1){var a=Ir(n,_t.BOTTOM),o=yt.BG,s="x",l=this.view.getCoordinate(),u=this.getId("axis",e.field),h=this.getId("grid",e.field);if(l.isRect){var c=this.cache.get(u);if(c){var v=this.getLineAxisCfg(e,n,a);Ft(v,uo),c.component.update(v),t.set(u,c)}else c=this.createLineAxis(e,n,o,a,s),this.cache.set(u,c),t.set(u,c);var x=this.cache.get(h);if(x){var v=this.getLineGridCfg(e,n,a,s);Ft(v,uo),x.component.update(v),t.set(h,x)}else x=this.createLineGrid(e,n,o,a,s),x&&(this.cache.set(h,x),t.set(h,x))}else if(l.isPolar){var c=this.cache.get(u);if(c){var v=l.isTransposed?this.getLineAxisCfg(e,n,_t.RADIUS):this.getCircleAxisCfg(e,n,a);Ft(v,uo),c.component.update(v),t.set(u,c)}else{if(l.isTransposed){if((0,f.isUndefined)(n))return;c=this.createLineAxis(e,n,o,_t.RADIUS,s)}else c=this.createCircleAxis(e,n,o,a,s);this.cache.set(u,c),t.set(u,c)}var x=this.cache.get(h);if(x){var v=l.isTransposed?this.getCircleGridCfg(e,n,_t.RADIUS,s):this.getLineGridCfg(e,n,_t.CIRCLE,s);Ft(v,uo),x.component.update(v),t.set(h,x)}else{if(l.isTransposed){if((0,f.isUndefined)(n))return;x=this.createCircleGrid(e,n,o,_t.RADIUS,s)}else x=this.createLineGrid(e,n,o,_t.CIRCLE,s);x&&(this.cache.set(h,x),t.set(h,x))}}}}},r.prototype.updateYAxes=function(t){var e=this,n=this.view.getYScales();(0,f.each)(n,function(a,o){if(!(!a||a.isIdentity)){var s=a.field,l=or(e.option,s);if(l!==!1){var u=yt.BG,h="y",c=e.getId("axis",s),v=e.getId("grid",s),x=e.view.getCoordinate();if(x.isRect){var M=Ir(l,o===0?_t.LEFT:_t.RIGHT),k=e.cache.get(c);if(k){var R=e.getLineAxisCfg(a,l,M);Ft(R,uo),k.component.update(R),t.set(c,k)}else k=e.createLineAxis(a,l,u,M,h),e.cache.set(c,k),t.set(c,k);var G=e.cache.get(v);if(G){var R=e.getLineGridCfg(a,l,M,h);Ft(R,uo),G.component.update(R),t.set(v,G)}else G=e.createLineGrid(a,l,u,M,h),G&&(e.cache.set(v,G),t.set(v,G))}else if(x.isPolar){var k=e.cache.get(c);if(k){var R=x.isTransposed?e.getCircleAxisCfg(a,l,_t.CIRCLE):e.getLineAxisCfg(a,l,_t.RADIUS);Ft(R,uo),k.component.update(R),t.set(c,k)}else{if(x.isTransposed){if((0,f.isUndefined)(l))return;k=e.createCircleAxis(a,l,u,_t.CIRCLE,h)}else k=e.createLineAxis(a,l,u,_t.RADIUS,h);e.cache.set(c,k),t.set(c,k)}var G=e.cache.get(v);if(G){var R=x.isTransposed?e.getLineGridCfg(a,l,_t.CIRCLE,h):e.getCircleGridCfg(a,l,_t.RADIUS,h);Ft(R,uo),G.component.update(R),t.set(v,G)}else{if(x.isTransposed){if((0,f.isUndefined)(l))return;G=e.createLineGrid(a,l,u,_t.CIRCLE,h)}else G=e.createCircleGrid(a,l,u,_t.RADIUS,h);G&&(e.cache.set(v,G),t.set(v,G))}}}}})},r.prototype.createLineAxis=function(t,e,n,a,o){var s={component:new kn(this.getLineAxisCfg(t,e,a)),layer:n,direction:a===_t.RADIUS?_t.NONE:a,type:jt.AXIS,extra:{dim:o,scale:t}};return s.component.set("field",t.field),s.component.init(),s},r.prototype.createLineGrid=function(t,e,n,a,o){var s=this.getLineGridCfg(t,e,a,o);if(s){var l={component:new gi(s),layer:n,direction:_t.NONE,type:jt.GRID,extra:{dim:o,scale:t,alignTick:(0,f.get)(s,"alignTick",!0)}};return l.component.init(),l}},r.prototype.createCircleAxis=function(t,e,n,a,o){var s={component:new ii(this.getCircleAxisCfg(t,e,a)),layer:n,direction:a,type:jt.AXIS,extra:{dim:o,scale:t}};return s.component.set("field",t.field),s.component.init(),s},r.prototype.createCircleGrid=function(t,e,n,a,o){var s=this.getCircleGridCfg(t,e,a,o);if(s){var l={component:new Si(s),layer:n,direction:_t.NONE,type:jt.GRID,extra:{dim:o,scale:t,alignTick:(0,f.get)(s,"alignTick",!0)}};return l.component.init(),l}},r.prototype.getLineAxisCfg=function(t,e,n){var a=this.axisContainer,o=this.view.getCoordinate(),s=fr(o,n),l=Wr(t,e),u=vr(this.view.getTheme(),n),h=(0,f.get)(e,["title"])?(0,f.deepMix)({title:{style:{text:l}}},e):e,c=(0,f.deepMix)((0,j.__assign)((0,j.__assign)({container:a},s),{ticks:t.getTicks().map(function(ot){return{id:""+ot.tickValue,name:ot.text,value:ot.value}}),verticalFactor:o.isPolar?gr(s,o.getCenter())*-1:gr(s,o.getCenter())}),u,h),v=this.getAnimateCfg(c),x=v.animate,M=v.animateOption;c.animateOption=M,c.animate=x;var k=hr(s),R=(0,f.get)(c,"verticalLimitLength",k?1/3:1/2);if(R<=1){var G=this.view.getCanvas().get("width"),N=this.view.getCanvas().get("height");c.verticalLimitLength=R*(k?G:N)}return c},r.prototype.getLineGridCfg=function(t,e,n,a){if(!!Sv(vr(this.view.getTheme(),n),e)){var o=wv(this.view.getTheme(),n),s=(0,f.deepMix)({container:this.gridContainer},o,(0,f.get)(e,"grid"),this.getAnimateCfg(e));return s.items=ll(this.view.getCoordinate(),t,a,(0,f.get)(s,"alignTick",!0)),s}},r.prototype.getCircleAxisCfg=function(t,e,n){var a=this.axisContainer,o=this.view.getCoordinate(),s=t.getTicks().map(function(k){return{id:""+k.tickValue,name:k.text,value:k.value}});!t.isCategory&&Math.abs(o.endAngle-o.startAngle)===Math.PI*2&&s.pop();var l=Wr(t,e),u=vr(this.view.getTheme(),_t.CIRCLE),h=(0,f.get)(e,["title"])?(0,f.deepMix)({title:{style:{text:l}}},e):e,c=(0,f.deepMix)((0,j.__assign)((0,j.__assign)({container:a},Cr(this.view.getCoordinate())),{ticks:s,verticalFactor:1}),u,h),v=this.getAnimateCfg(c),x=v.animate,M=v.animateOption;return c.animate=x,c.animateOption=M,c},r.prototype.getCircleGridCfg=function(t,e,n,a){if(!!Sv(vr(this.view.getTheme(),n),e)){var o=wv(this.view.getTheme(),_t.RADIUS),s=(0,f.deepMix)({container:this.gridContainer,center:this.view.getCoordinate().getCenter()},o,(0,f.get)(e,"grid"),this.getAnimateCfg(e)),l=(0,f.get)(s,"alignTick",!0),u=a==="x"?this.view.getYScales()[0]:this.view.getXScale();return s.items=gf(this.view.getCoordinate(),u,t,l,a),s}},r.prototype.getId=function(t,e){var n=this.view.getCoordinate();return t+"-"+e+"-"+n.type},r.prototype.getAnimateCfg=function(t){return{animate:this.view.getOptions().animate&&(0,f.get)(t,"animate"),animateOption:t&&t.animateOption?(0,f.deepMix)({},Cv,t.animateOption):Cv}},r}(zo),Q2=$2;function ul(i,r,t){return t===_t.TOP?[i.minX+i.width/2-r.width/2,i.minY]:t===_t.BOTTOM?[i.minX+i.width/2-r.width/2,i.maxY-r.height]:t===_t.LEFT?[i.minX,i.minY+i.height/2-r.height/2]:t===_t.RIGHT?[i.maxX-r.width,i.minY+i.height/2-r.height/2]:t===_t.TOP_LEFT||t===_t.LEFT_TOP?[i.tl.x,i.tl.y]:t===_t.TOP_RIGHT||t===_t.RIGHT_TOP?[i.tr.x-r.width,i.tr.y]:t===_t.BOTTOM_LEFT||t===_t.LEFT_BOTTOM?[i.bl.x,i.bl.y-r.height]:t===_t.BOTTOM_RIGHT||t===_t.RIGHT_BOTTOM?[i.br.x-r.width,i.br.y-r.height]:[0,0]}function J2(i,r){if(r.isTransposed)switch(i){case DIRECTION.BOTTOM:return DIRECTION.LEFT;case DIRECTION.LEFT:return DIRECTION.BOTTOM;case DIRECTION.RIGHT:return DIRECTION.TOP;case DIRECTION.TOP:return DIRECTION.RIGHT}return i}function Mv(i){return i===DIRECTION.LEFT?DIRECTION.RIGHT:i===DIRECTION.RIGHT?DIRECTION.LEFT:i}function Ev(i){return i===DIRECTION.TOP?DIRECTION.BOTTOM:i===DIRECTION.BOTTOM?DIRECTION.TOP:i}function q2(i,r){var t=r.matrix[0],e=r.matrix[4],n=i;return t<0&&(n=Mv(n)),e<0&&(n=Ev(n)),n}function tC(i,r){var t=i;return r.isReflect("x")&&(t=Mv(t)),r.isReflect("y")&&(t=Ev(t)),t}function wG(i,r){var t=i;return t=J2(t,r),t=q2(t,r),t=tC(t,r),t}function _v(i,r,t){if(!i)return t;var e;if(i.callback&&i.callback.length>1){var n=Array(i.callback.length-1).fill("");e=i.mapping.apply(i,(0,j.__spreadArrays)([r],n)).join("")}else e=i.mapping(r).join("");return e||t}function Av(i){var r=i.symbol;(0,f.isString)(r)&&To[r]&&(i.symbol=To[r])}function yf(i){return i.startsWith(_t.LEFT)||i.startsWith(_t.RIGHT)?"vertical":"horizontal"}function eC(i,r,t,e,n){var a=t.getScale(t.type);if(a.isCategory){var o=a.field,s=r.getAttribute("color"),l=r.getAttribute("shape"),u=i.getTheme().defaultColor,h=r.coordinate.isPolar;return a.getTicks().map(function(c){var v,x=c.text,M=c.value,k=x,R=a.invert(M),G=i.filterFieldData(o,[(v={},v[o]=R,v)]).length===0,N=_v(s,R,u),ot=_v(l,R,"point"),ut=r.getShapeMarker(ot,{color:N,isInPolar:h});return ut=(0,f.deepMix)({},e,ut,n),Av(ut),{id:R,name:k,value:R,marker:ut,unchecked:G}})}return[]}function rC(i,r,t){return t.map(function(e){var n=(0,f.deepMix)({},i,r,e.marker);return Av(n),e.marker=n,e})}function Tv(i,r){return(0,f.isBoolean)(i)?i===!1?!1:{}:(0,f.get)(i,[r],i)}function ys(i){return(0,f.get)(i,"position",_t.BOTTOM)}var nC=function(i){(0,j.__extends)(r,i);function r(t){var e=i.call(this,t)||this;return e.container=e.view.getLayer(yt.FORE).addGroup(),e}return Object.defineProperty(r.prototype,"name",{get:function(){return"legend"},enumerable:!1,configurable:!0}),r.prototype.init=function(){},r.prototype.render=function(){var t=this;this.option=this.view.getOptions().legends;var e=function(s,l,u){var h=t.createFieldLegend(s,l,u);h&&(h.component.init(),t.components.push(h))};if((0,f.get)(this.option,"custom")){var n=this.createCustomLegend(void 0,void 0,void 0,this.option);if(n){n.init();var a=yt.FORE,o=ys(this.option);this.components.push({id:"global-custom",component:n,layer:a,direction:o,type:jt.LEGEND,extra:void 0})}}else this.loopLegends(e)},r.prototype.layout=function(){var t=this;this.layoutBBox=this.view.viewBBox;var e=(0,f.get)(this.view.getTheme(),["components","legend","margin"],[0,0,0,0]);(0,f.each)(this.components,function(n){var a=n.component,o=n.direction,s=yf(o),l=t.getCategoryLegendSizeCfg(s),u=a.get("maxWidth"),h=a.get("maxHeight");a.update({maxWidth:Math.min(l.maxWidth,u||0),maxHeight:Math.min(l.maxHeight,h||0)});var c=a.getLayoutBBox(),v=new Ar(c.x,c.y,c.width,c.height),x=ul(t.view.viewBBox,v,o),M=x[0],k=x[1],R=ul(t.layoutBBox,v,o),G=R[0],N=R[1],ot=0,ut=0;o.startsWith("top")||o.startsWith("bottom")?(ot=M,ut=N):(ot=G,ut=k),o.indexOf("left")>=0&&(ot+=e[3]),o.indexOf("right")>=0&&(ot-=e[1]),o.indexOf("top")>=0&&(ut+=e[0]),o.indexOf("bottom")>=0&&(ut-=e[2]),a.update({x:ot,y:ut}),t.layoutBBox=t.layoutBBox.cut(v,o)})},r.prototype.update=function(){var t=this;this.option=this.view.getOptions().legends;var e={},n=function(v,x,M){var k=t.getId(M.field),R=t.getComponentById(k);if(R){var G=void 0,N=Tv(t.option,M.field);N!==!1&&((0,f.get)(N,"custom")?G=t.getCategoryCfg(v,x,M,N,!0):M.isLinear?G=t.getContinuousCfg(v,x,M,N):M.isCategory&&(G=t.getCategoryCfg(v,x,M,N))),G&&(Ft(G,["container"]),R.direction=ys(N),R.component.update(G),e[k]=!0)}else{var ot=t.createFieldLegend(v,x,M);ot&&(ot.component.init(),t.components.push(ot),e[k]=!0)}};if((0,f.get)(this.option,"custom")){var a="global-custom",o=this.getComponentById(a);if(o){var s=this.getCategoryCfg(void 0,void 0,void 0,this.option,!0);Ft(s,["container"]),o.component.update(s),e[a]=!0}else{var l=this.createCustomLegend(void 0,void 0,void 0,this.option);if(l){l.init();var u=yt.FORE,h=ys(this.option);this.components.push({id:a,component:l,layer:u,direction:h,type:jt.LEGEND,extra:void 0}),e[a]=!0}}}else this.loopLegends(n);var c=[];(0,f.each)(this.getComponents(),function(v){e[v.id]?c.push(v):v.component.destroy()}),this.components=c},r.prototype.clear=function(){i.prototype.clear.call(this),this.container.clear()},r.prototype.destroy=function(){i.prototype.destroy.call(this),this.container.remove(!0)},r.prototype.getGeometries=function(t){var e=this,n=t.geometries;return(0,f.each)(t.views,function(a){n=n.concat(e.getGeometries(a))}),n},r.prototype.loopLegends=function(t){var e=this.view.getRootView()===this.view;if(!!e){var n=this.getGeometries(this.view),a={};(0,f.each)(n,function(o){var s=o.getGroupAttributes();(0,f.each)(s,function(l){var u=l.getScale(l.type);!u||u.type==="identity"||a[u.field]||(t(o,l,u),a[u.field]=!0)})})}},r.prototype.createFieldLegend=function(t,e,n){var a,o=Tv(this.option,n.field),s=yt.FORE,l=ys(o);if(o!==!1&&((0,f.get)(o,"custom")?a=this.createCustomLegend(t,e,n,o):n.isLinear?a=this.createContinuousLegend(t,e,n,o):n.isCategory&&(a=this.createCategoryLegend(t,e,n,o))),a)return a.set("field",n.field),{id:this.getId(n.field),component:a,layer:s,direction:l,type:jt.LEGEND,extra:{scale:n}}},r.prototype.createCustomLegend=function(t,e,n,a){var o=this.getCategoryCfg(t,e,n,a,!0);return new Zt(o)},r.prototype.createContinuousLegend=function(t,e,n,a){var o=this.getContinuousCfg(t,e,n,a);return new ne(o)},r.prototype.createCategoryLegend=function(t,e,n,a){var o=this.getCategoryCfg(t,e,n,a);return new Zt(o)},r.prototype.getContinuousCfg=function(t,e,n,a){var o=n.getTicks(),s=(0,f.find)(o,function(k){return k.value===0}),l=(0,f.find)(o,function(k){return k.value===1}),u=o.map(function(k){var R=k.value,G=k.tickValue,N=e.mapping(n.invert(R)).join("");return{value:G,attrValue:N,color:N,scaleValue:R}});s||u.push({value:n.min,attrValue:e.mapping(n.invert(0)).join(""),color:e.mapping(n.invert(0)).join(""),scaleValue:0}),l||u.push({value:n.max,attrValue:e.mapping(n.invert(1)).join(""),color:e.mapping(n.invert(1)).join(""),scaleValue:1}),u.sort(function(k,R){return k.value-R.value});var h={min:(0,f.head)(u).value,max:(0,f.last)(u).value,colors:[],rail:{type:e.type},track:{}};e.type==="size"&&(h.track={style:{fill:e.type==="size"?this.view.getTheme().defaultColor:void 0}}),e.type==="color"&&(h.colors=u.map(function(k){return k.attrValue}));var c=this.container,v=ys(a),x=yf(v),M=(0,f.get)(a,"title");return M&&(M=(0,f.deepMix)({text:De(n)},M)),h.container=c,h.layout=x,h.title=M,h.animateOption=Xo,this.mergeLegendCfg(h,a,"continuous")},r.prototype.getCategoryCfg=function(t,e,n,a,o){var s=this.container,l=(0,f.get)(a,"position",_t.BOTTOM),u=(0,f.get)(this.view.getTheme(),["components","legend",l,"marker"]),h=(0,f.get)(a,"marker"),c=yf(l),v=o?rC(u,h,a.items):eC(this.view,t,e,u,h),x=(0,f.get)(a,"title");x&&(x=(0,f.deepMix)({text:n?De(n):""},x));var M=this.getCategoryLegendSizeCfg(c);M.container=s,M.layout=c,M.items=v,M.title=x,M.animateOption=Xo;var k=this.mergeLegendCfg(M,a,l);k.reversed&&k.items.reverse();var R=(0,f.get)(k,"maxItemWidth");return R&&R<=1&&(k.maxItemWidth=this.view.viewBBox.width*R),k},r.prototype.mergeLegendCfg=function(t,e,n){var a=n.split("-")[0],o=(0,f.get)(this.view.getTheme(),["components","legend",a],{});return(0,f.deepMix)({},o,t,e)},r.prototype.getId=function(t){return this.name+"-"+t},r.prototype.getComponentById=function(t){return(0,f.find)(this.components,function(e){return e.id===t})},r.prototype.getCategoryLegendSizeCfg=function(t){var e=this.view.viewBBox,n=e.width,a=e.height;return t==="vertical"?{maxWidth:n*rt,maxHeight:a}:{maxWidth:n,maxHeight:a*rt}},r}(zo),iC=nC,aC=function(i){(0,j.__extends)(r,i);function r(t){var e=i.call(this,t)||this;return e.onValueChanged=function(n){var a=n[0],o=n[1];e.updateMinMaxText(a,o),e.view.render(!0)},e.container=e.view.getLayer(yt.FORE).addGroup(),e}return Object.defineProperty(r.prototype,"name",{get:function(){return"slider"},enumerable:!1,configurable:!0}),r.prototype.init=function(){},r.prototype.render=function(){if(this.option=this.view.getOptions().slider,this.option){this.slider?this.slider=this.updateSlider():(this.slider=this.createSlider(),this.slider.component.on("sliderchange",this.onValueChanged));var t=this.slider.component.get("start")||0,e=this.slider.component.get("end")||1;this.updateMinMaxText(t,e)}else this.slider&&(this.slider.component.destroy(),this.slider=void 0)},r.prototype.layout=function(){if(this.slider){var t=this.view.coordinateBBox.width,e=this.slider.component.getLayoutBBox(),n=new Ar(e.x,e.y,Math.min(e.width,t),e.height),a=ul(this.view.viewBBox,n,_t.BOTTOM),o=a[0],s=a[1],l=ul(this.view.coordinateBBox,n,_t.BOTTOM),u=l[0],h=l[1];this.slider.component.update({x:u,y:s,width:t})}},r.prototype.update=function(){this.render()},r.prototype.createSlider=function(){var t=this.getSliderCfg(),e=new nn.Slider((0,j.__assign)({container:this.container},t));return e.init(),{component:e,layer:yt.FORE,direction:_t.BOTTOM,type:jt.OTHER}},r.prototype.updateSlider=function(){var t=this.getSliderCfg();return Ft(t,["x","y","width","start","end","minText","maxText"]),this.slider.component.update(t),this.slider},r.prototype.getSliderCfg=function(){if((0,f.isObject)(this.option)){var t=(0,j.__assign)({data:this.getData()},(0,f.get)(this.option,"trendCfg",{})),e=0,n=0,a=this.view.coordinateBBox.width,o=(0,f.deepMix)({},{x:e,y:n,width:a},this.option);return(0,j.__assign)((0,j.__assign)({},o),{trendCfg:t})}return{}},r.prototype.getData=function(){var t=this.view.getOptions().data,e=this.view.getYScales()[0],n=this.view.getGroupScales();if(n.length){var a=n[0],o=a.field,s=a.ticks;return t.reduce(function(l,u){return u[o]===s[0]&&l.push(u[e.field]),l},[])}return t.map(function(l){return l[e.field]||0})},r.prototype.updateMinMaxText=function(t,e){var n=this.view.getOptions().data,a=this.view.getXScale(),o=(0,f.size)(n);if(!(!a||!o)){var s=a.field,l=n.reduce(function(k,R){return k.includes(R[s])||k.push(R[s]),k},[]),u=(0,f.size)(l),h=Math.floor(t*(u-1)),c=Math.floor(e*(u-1)),v=(0,f.get)(l,[h]),x=(0,f.get)(l,[c]),M=this.getSliderCfg().formatter;M&&(v=M(v,n[h],h),x=M(x,n[c],c)),this.slider.component.update({minText:v,maxText:x,start:t,end:e}),this.view.filter(a.field,function(k,R){var G=l.indexOf(k);return G>-1?Vi(G,h,c):!0})}},r.prototype.getComponents=function(){return this.slider?[this.slider]:[]},r}(zo),oC=aC;function sC(i){for(var r=[],t=function(n){var a=i[n],o=(0,f.find)(r,function(s){return s.color===a.color&&s.name===a.name&&s.value===a.value&&s.title===a.title});o||r.push(a)},e=0;e<i.length;e++)t(e);return r}var lC=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.isLocked=!1,t}return Object.defineProperty(r.prototype,"name",{get:function(){return"tooltip"},enumerable:!1,configurable:!0}),r.prototype.init=function(){},r.prototype.isVisible=function(){var t=this.view.getOptions().tooltip;return t!==!1},r.prototype.render=function(){},r.prototype.showTooltip=function(t){if(this.point=t,!!this.isVisible()){var e=this.view,n=this.getTooltipItems(t);if(!n.length){this.hideTooltip();return}var a=this.getTitle(n),o={x:n[0].x,y:n[0].y};e.emit("tooltip:show",(0,j.__assign)({items:n,title:a},t));var s=this.getTooltipCfg(),l=s.follow,u=s.showMarkers,h=s.showCrosshairs,c=s.showContent,v=s.marker,x=this.items,M=this.title;if(!(0,f.isEqual)(M,a)||!(0,f.isEqual)(x,n)?(e.emit("tooltip:change",(0,j.__assign)({items:n,title:a},t)),c&&(this.tooltip||this.renderTooltip(),this.tooltip.update((0,f.mix)({},s,{items:n,title:a},l?t:{})),this.tooltip.show()),u&&this.renderTooltipMarkers(n,v)):(this.tooltip&&l&&(this.tooltip.update(t),this.tooltip.show()),this.tooltipMarkersGroup&&this.tooltipMarkersGroup.show()),this.items=n,this.title=a,h){var k=(0,f.get)(s,["crosshairs","follow"],!1);this.renderCrosshairs(k?t:o,s)}}},r.prototype.hideTooltip=function(){var t=this.getTooltipCfg().follow;if(!t){this.point=null;return}var e=this.tooltipMarkersGroup;e&&e.hide();var n=this.xCrosshair,a=this.yCrosshair;n&&n.hide(),a&&a.hide();var o=this.tooltip;o&&o.hide(),this.view.emit("tooltip:hide",{}),this.point=null},r.prototype.lockTooltip=function(){this.isLocked=!0,this.tooltip&&this.tooltip.setCapture(!0)},r.prototype.unlockTooltip=function(){this.isLocked=!1;var t=this.getTooltipCfg();this.tooltip&&this.tooltip.setCapture(t.capture)},r.prototype.isTooltipLocked=function(){return this.isLocked},r.prototype.clear=function(){var t=this,e=t.tooltip,n=t.xCrosshair,a=t.yCrosshair,o=t.tooltipMarkersGroup;e&&(e.hide(),e.clear()),n&&n.clear(),a&&a.clear(),o&&o.clear()},r.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.xCrosshair&&this.xCrosshair.destroy(),this.yCrosshair&&this.yCrosshair.destroy(),this.guideGroup&&this.guideGroup.remove(!0),this.items=null,this.title=null,this.tooltipMarkersGroup=null,this.tooltipCrosshairsGroup=null,this.xCrosshair=null,this.yCrosshair=null,this.tooltip=null,this.guideGroup=null,this.isLocked=!1,this.point=null},r.prototype.changeVisible=function(t){if(this.visible!==t){var e=this,n=e.tooltip,a=e.tooltipMarkersGroup,o=e.xCrosshair,s=e.yCrosshair;t?(n&&n.show(),a&&a.show(),o&&o.show(),s&&s.show()):(n&&n.hide(),a&&a.hide(),o&&o.hide(),s&&s.hide()),this.visible=t}},r.prototype.getTooltipItems=function(t){var e=this.findItemsFromView(this.view,t);if(e.length){e=(0,f.flatten)(e);for(var n=0,a=e;n<a.length;n++)for(var o=a[n],s=0,l=o;s<l.length;s++){var u=l[s],h=u.mappingData,c=h.x,v=h.y;u.x=(0,f.isArray)(c)?c[c.length-1]:c,u.y=(0,f.isArray)(v)?v[v.length-1]:v}var x=this.getTooltipCfg().shared;if(x===!1&&e.length>1){for(var M=e[0],k=Math.abs(t.y-M[0].y),R=0,G=e;R<G.length;R++){var N=G[R],ot=Math.abs(t.y-N[0].y);ot<=k&&(M=N,k=ot)}e=[M]}return sC((0,f.flatten)(e))}return[]},r.prototype.layout=function(){},r.prototype.update=function(){if(this.point&&this.showTooltip(this.point),this.tooltip){var t=this.view.getCanvas();this.tooltip.set("region",{start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}})}},r.prototype.getTooltipCfg=function(){var t=this.view,e=t.getOptions().tooltip,n=t.getTheme(),a=(0,f.get)(n,["components","tooltip"],{}),o=(0,f.isUndefined)((0,f.get)(e,"enterable"))?a.enterable:(0,f.get)(e,"enterable");return(0,f.deepMix)({},a,e,{capture:!!(o||this.isLocked)})},r.prototype.getTitle=function(t){var e=t[0].title||t[0].name;return this.title=e,e},r.prototype.renderTooltip=function(){var t=this.view.getCanvas(),e={start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}},n=this.getTooltipCfg(),a=new ve((0,j.__assign)((0,j.__assign)({parent:t.get("el").parentNode,region:e},n),{visible:!1,crosshairs:null}));a.init(),this.tooltip=a},r.prototype.renderTooltipMarkers=function(t,e){for(var n=this.getTooltipMarkersGroup(),a=0,o=t;a<o.length;a++){var s=o[a],l=s.x,u=s.y,h=(0,j.__assign)((0,j.__assign)({fill:s.color,symbol:"circle",shadowColor:s.color},e),{x:l,y:u});n.addShape("marker",{attrs:h})}},r.prototype.renderCrosshairs=function(t,e){var n=(0,f.get)(e,["crosshairs","type"],"x");n==="x"?(this.yCrosshair&&this.yCrosshair.hide(),this.renderXCrosshairs(t,e)):n==="y"?(this.xCrosshair&&this.xCrosshair.hide(),this.renderYCrosshairs(t,e)):n==="xy"&&(this.renderXCrosshairs(t,e),this.renderYCrosshairs(t,e))},r.prototype.renderXCrosshairs=function(t,e){var n=this.getViewWithGeometry(this.view).getCoordinate();if(!!it(n,t)){var a,o;if(n.isRect)n.isTransposed?(a={x:n.start.x,y:t.y},o={x:n.end.x,y:t.y}):(a={x:t.x,y:n.end.y},o={x:t.x,y:n.start.y});else{var s=mt(n,t),l=n.getCenter(),u=n.getRadius();o=Mn(l.x,l.y,u,s),a=l}var h=(0,f.deepMix)({start:a,end:o,container:this.getTooltipCrosshairsGroup()},(0,f.get)(e,"crosshairs",{}),this.getCrosshairsText("x",t,e));delete h.type;var c=this.xCrosshair;c?c.update(h):(c=new nn.Crosshair.Line(h),c.init()),c.render(),c.show(),this.xCrosshair=c}},r.prototype.renderYCrosshairs=function(t,e){var n=this.getViewWithGeometry(this.view).getCoordinate();if(!!it(n,t)){var a,o;if(n.isRect){var s=void 0,l=void 0;n.isTransposed?(s={x:t.x,y:n.end.y},l={x:t.x,y:n.start.y}):(s={x:n.start.x,y:t.y},l={x:n.end.x,y:t.y}),a={start:s,end:l},o="Line"}else a={center:n.getCenter(),radius:Xt(n,t),startAngle:n.startAngle,endAngle:n.endAngle},o="Circle";a=(0,f.deepMix)({container:this.getTooltipCrosshairsGroup()},a,(0,f.get)(e,"crosshairs",{}),this.getCrosshairsText("y",t,e)),delete a.type;var u=this.yCrosshair;u?n.isRect&&u.get("type")==="circle"||!n.isRect&&u.get("type")==="line"?(u=new nn.Crosshair[o](a),u.init()):u.update(a):(u=new nn.Crosshair[o](a),u.init()),u.render(),u.show(),this.yCrosshair=u}},r.prototype.getCrosshairsText=function(t,e,n){var a=(0,f.get)(n,["crosshairs","text"]),o=(0,f.get)(n,["crosshairs","follow"]),s=this.items;if(a){var l=this.getViewWithGeometry(this.view),u=s[0],h=l.getXScale(),c=l.getYScales()[0],v=void 0,x=void 0;if(o){var M=this.view.getCoordinate().invert(e);v=h.invert(M.x),x=c.invert(M.y)}else v=u.data[h.field],x=u.data[c.field];var k=t==="x"?v:x;return(0,f.isFunction)(a)?a=a(t,k,s,e):a.content=k,{text:a}}},r.prototype.getGuideGroup=function(){if(!this.guideGroup){var t=this.view.foregroundGroup;this.guideGroup=t.addGroup({name:"tooltipGuide",capture:!1})}return this.guideGroup},r.prototype.getTooltipMarkersGroup=function(){var t=this.tooltipMarkersGroup;return t&&!t.destroyed?(t.clear(),t.show()):(t=this.getGuideGroup().addGroup({name:"tooltipMarkersGroup"}),t.toFront(),this.tooltipMarkersGroup=t),t},r.prototype.getTooltipCrosshairsGroup=function(){var t=this.tooltipCrosshairsGroup;return t||(t=this.getGuideGroup().addGroup({name:"tooltipCrosshairsGroup",capture:!1}),t.toBack(),this.tooltipCrosshairsGroup=t),t},r.prototype.getTooltipItemsByHitShape=function(t,e,n){var a=[],o=t.container,s=o.getShape(e.x,e.y);if(s&&s.get("visible")&&s.get("origin")){var l=s.get("origin").mappingData,u=on(l,t,n);u.length&&a.push(u)}return a},r.prototype.getTooltipItemsByFindData=function(t,e,n){var a=[],o=t.dataArray;t.sort(o);for(var s=0,l=o;s<l.length;s++){var u=l[s],h=kr(e,u,t);if(h){var c=t.getElementId(h),v=t.elementsMap[c];if(t.type==="heatmap"||v.visible){var x=on(h,t,n);x.length&&a.push(x)}}}return a},r.prototype.findItemsFromView=function(t,e){if(t.getOptions().tooltip===!1)return[];for(var n=[],a=t.geometries,o=this.getTooltipCfg(),s=o.shared,l=o.title,u=0,h=a;u<h.length;u++){var c=h[u];if(c.visible&&c.tooltipOption!==!1){var v=c.type,x=void 0;["point","edge","polygon"].includes(v)?x=this.getTooltipItemsByHitShape(c,e,l):["area","line","path","heatmap"].includes(v)?x=this.getTooltipItemsByFindData(c,e,l):s!==!1?x=this.getTooltipItemsByFindData(c,e,l):x=this.getTooltipItemsByHitShape(c,e,l),x.length&&n.push(x)}}for(var M=0,k=t.views;M<k.length;M++){var R=k[M];n=n.concat(this.findItemsFromView(R,e))}return n},r.prototype.getViewWithGeometry=function(t){var e=this;return t.geometries.length?t:(0,f.find)(t.views,function(n){return e.getViewWithGeometry(n)})},r}(zo),uC=lC,fC=function(i){(0,j.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.show=function(){var t=this.context.view,e=this.context.event,n=t.getTooltipItems({x:e.x,y:e.y});if(!(0,f.isEqual)(n,this.items)&&(this.items=n,n.length)){var a=t.getXScale().field,o=n[0].data[a],s=[],l=t.geometries;if((0,f.each)(l,function(Oe){if(Oe.type==="interval"||Oe.type==="schema"){var Ge=Oe.getElementsBy(function(Ne){var qe=Ne.getData();return qe[a]===o});s=s.concat(Ge)}}),s.length){var u=t.getCoordinate(),h=s[0].shape.getCanvasBBox(),c=s[0].shape.getCanvasBBox(),v=h;(0,f.each)(s,function(Oe){var Ge=Oe.shape.getCanvasBBox();u.isTransposed?(Ge.minY<h.minY&&(h=Ge),Ge.maxY>c.maxY&&(c=Ge)):(Ge.minX<h.minX&&(h=Ge),Ge.maxX>c.maxX&&(c=Ge)),v.x=Math.min(Ge.minX,v.minX),v.y=Math.min(Ge.minY,v.minY),v.width=Math.max(Ge.maxX,v.maxX)-v.x,v.height=Math.max(Ge.maxY,v.maxY)-v.y});var x=t.backgroundGroup,M=t.coordinateBBox,k=void 0;if(u.isRect){var R=t.getXScale(),G=R.isLinear?0:.25,N=void 0,ot=void 0,ut=void 0,Mt=void 0;u.isTransposed?(N=M.minX,ot=Math.min(c.minY,h.minY)-G*c.height,ut=M.width,Mt=v.height+G*2*c.height):(N=Math.min(h.minX,c.minX)-G*h.width,ot=Math.min(M.minY,h.minY),ut=v.width+G*2*h.width,Mt=M.height),k=[["M",N,ot],["L",N+ut,ot],["L",N+ut,ot+Mt],["L",N,ot+Mt],["Z"]]}else{var zt=(0,f.head)(s),$t=(0,f.last)(s),ee=Ii(zt.getModel(),u).startAngle,Ut=Ii($t.getModel(),u).endAngle,le=u.getCenter(),xe=u.getRadius(),ye=u.innerRadius*xe;k=vi(le.x,le.y,xe,ee,Ut,ye)}this.regionPath?(this.regionPath.attr("path",k),this.regionPath.show()):this.regionPath=x.addShape({type:"path",name:"active-region",capture:!1,attrs:{path:k,fill:"#CCD6EC",opacity:.3}})}}},r.prototype.hide=function(){this.regionPath&&this.regionPath.hide(),this.items=null},r.prototype.destroy=function(){this.hide(),this.regionPath&&this.regionPath.remove(!0),i.prototype.destroy.call(this)},r}(hn),hC=fC,cC=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.timeStamp=0,t}return r.prototype.show=function(){var t=this.context,e=t.event,n=t.view,a=n.isTooltipLocked();if(!a){var o=this.timeStamp,s=+new Date;if(s-o>16){var l=this.location,u={x:e.x,y:e.y};(!l||!(0,f.isEqual)(l,u))&&this.showTooltip(n,u),this.timeStamp=s,this.location=u}}},r.prototype.hide=function(){var t=this.context.view,e=t.isTooltipLocked();e||(this.hideTooltip(t),this.location=null)},r.prototype.showTooltip=function(t,e){t.showTooltip(e)},r.prototype.hideTooltip=function(t){t.hideTooltip()},r}(hn),Pv=cC,vC=function(i){(0,j.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.showTooltip=function(t,e){var n=xi(t);(0,f.each)(n,function(a){var o=Wi(t,a,e);a.showTooltip(o)})},r.prototype.hideTooltip=function(t){var e=xi(t);(0,f.each)(e,function(n){n.hideTooltip()})},r}(Pv),dC=vC,pC=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.timeStamp=0,t}return r.prototype.destroy=function(){i.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},r.prototype.show=function(){var t=this.context,e=t.event,n=this.timeStamp,a=+new Date;if(a-n>16){var o=this.location,s={x:e.x,y:e.y};(!o||!(0,f.isEqual)(o,s))&&this.showTooltip(s),this.timeStamp=a,this.location=s}},r.prototype.hide=function(){this.hideTooltip(),this.location=null},r.prototype.showTooltip=function(t){var e=this.context,n=e.event,a=n.target;if(a&&a.get("tip")){this.tooltip||this.renderTooltip();var o=a.get("tip");this.tooltip.update((0,j.__assign)({title:o},t)),this.tooltip.show()}},r.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},r.prototype.renderTooltip=function(){var t=this.context.view,e=t.canvas,n={start:{x:0,y:0},end:{x:e.get("width"),y:e.get("height")}},a=t.getTheme(),o=(0,f.get)(a,["components","tooltip","domStyles"],{}),s=new ve({parent:e.get("el").parentNode,region:n,visible:!1,crosshairs:null,domStyles:o});s.init(),s.setCapture(!1),this.tooltip=s},r}(hn),gC=pC,yC=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="",t}return r.prototype.hasState=function(t){return t.hasState(this.stateName)},r.prototype.setElementState=function(t,e){t.setState(this.stateName,e)},r.prototype.setState=function(){this.setStateEnable(!0)},r.prototype.clear=function(){var t=this.context.view;this.clearViewState(t)},r.prototype.clearViewState=function(t){var e=this,n=ta(t,this.stateName);(0,f.each)(n,function(a){e.setElementState(a,!1)})},r}(hn),mf=yC;function Lv(i){return(0,f.get)(i.get("delegateObject"),"item")}var mC=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.ignoreListItemStates=["unchecked"],t}return r.prototype.isItemIgnore=function(t,e){var n=this.ignoreListItemStates,a=n.filter(function(o){return e.hasState(t,o)});return!!a.length},r.prototype.setStateByComponent=function(t,e,n){var a=this.context.view,o=t.get("field"),s=cn(a);this.setElementsStateByItem(s,o,e,n)},r.prototype.setStateByElement=function(t,e){this.setElementState(t,e)},r.prototype.isMathItem=function(t,e,n){var a=this.context.view,o=ba(a,e),s=ui(t,e);return!(0,f.isNil)(s)&&n.name===o.getText(s)},r.prototype.setElementsStateByItem=function(t,e,n,a){var o=this;(0,f.each)(t,function(s){o.isMathItem(s,e,n)&&s.setState(o.stateName,a)})},r.prototype.setStateEnable=function(t){var e=Ln(this.context);if(e)ki(this.context)&&this.setStateByElement(e,t);else{var n=qn(this.context);if(li(n)){var a=n.item,o=n.component;if(a&&o&&!this.isItemIgnore(a,o)){var s=this.context.event.gEvent;if(s&&s.fromShape&&s.toShape&&Lv(s.fromShape)===Lv(s.toShape))return;this.setStateByComponent(o,a,t)}}}},r.prototype.toggle=function(){var t=Ln(this.context);if(t){var e=t.hasState(this.stateName);this.setElementState(t,!e)}},r.prototype.reset=function(){this.setStateEnable(!1)},r}(mf),xf=mC,xC=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="active",t}return r.prototype.active=function(){this.setState()},r}(xf),bC=xC,wC=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.cache={},t}return r.prototype.getColorScale=function(t,e){var n=e.geometry.getAttribute("color");if(!n)return null;var a=t.getScaleByField(n.getFields()[0]);return a},r.prototype.getLinkPath=function(t,e){var n=t.shape.getCanvasBBox(),a=e.shape.getCanvasBBox(),o=[["M",n.maxX,n.minY],["L",a.minX,a.minY],["L",a.minX,a.maxY],["L",n.maxX,n.maxY],["Z"]];return o},r.prototype.addLinkShape=function(t,e,n){t.addShape({type:"path",attrs:{opacity:.4,fill:e.shape.attr("fill"),path:this.getLinkPath(e,n)}})},r.prototype.linkByElement=function(t){var e=this,n=this.context.view,a=this.getColorScale(n,t);if(!!a){var o=ui(t,a.field);if(!this.cache[o]){var s=Hi(n,a.field,o),l=this.linkGroup,u=l.addGroup();this.cache[o]=u;var h=s.length;(0,f.each)(s,function(c,v){if(v<h-1){var x=s[v+1];e.addLinkShape(u,c,x)}})}}},r.prototype.removeLink=function(t){var e=this.getColorScale(this.context.view,t);if(!!e){var n=ui(t,e.field);this.cache[n]&&(this.cache[n].remove(),this.cache[n]=null)}},r.prototype.link=function(){var t=this.context;this.linkGroup||(this.linkGroup=t.view.foregroundGroup.addGroup({capture:!1}));var e=Ln(t);e&&this.linkByElement(e)},r.prototype.unlink=function(){var t=Ln(this.context);t&&this.removeLink(t)},r.prototype.clear=function(){this.linkGroup&&this.linkGroup.clear()},r.prototype.destroy=function(){i.prototype.destroy.call(this),this.linkGroup&&this.linkGroup.remove()},r}(hn),SC=wC,CC=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.startPoint=null,t.endPoint=null,t.isStarted=!1,t.effectSiblings=!1,t.effectByRecord=!1,t}return r.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},r.prototype.start=function(){this.clear(),this.startPoint=this.getCurrentPoint(),this.isStarted=!0},r.prototype.getIntersectElements=function(){var t=null;if(ti(this.context))t=ei(this.context,10);else{var e=this.startPoint,n=this.isStarted?this.getCurrentPoint():this.endPoint;if(!e||!n)return;var a={minX:Math.min(e.x,n.x),minY:Math.min(e.y,n.y),maxX:Math.max(e.x,n.x),maxY:Math.max(e.y,n.y)},o=this.context.view;t=mi(o,a)}return t},r.prototype.setStateEnable=function(t){if(this.effectSiblings&&!this.effectByRecord)this.setSiblingsState(t);else{var e=cn(this.context.view),n=this.getIntersectElements();n&&n.length?this.effectByRecord?this.setSiblingsStateByRecord(n,t):this.setElementsState(n,t,e):this.clear()}},r.prototype.setSiblingsStateByRecord=function(t,e){var n=this,a=this.context.view,o=xi(a),s=t.map(function(h){return h.getModel().data}),l=a.getXScale().field,u=a.getYScales()[0].field;(0,f.each)(o,function(h){var c=cn(h),v=c.filter(function(x){var M=x.getModel().data;return Ra(s,M,l,u)});n.setElementsState(v,e,c)})},r.prototype.setSiblingsState=function(t){var e=this,n=this.context.view,a=xi(n);ti(this.context)&&(0,f.each)(a,function(o){var s=cn(o),l=Bi(e.context,o,10);l&&l.length?e.setElementsState(l,t,s):e.clearViewState(o)})},r.prototype.setElementsState=function(t,e,n){var a=this;(0,f.each)(n,function(o){t.includes(o)?a.setElementState(o,e):a.setElementState(o,!1)})},r.prototype.end=function(){this.isStarted=!1,this.endPoint=this.getCurrentPoint()},r.prototype.clear=function(){var t=this,e=this.context.view;if(this.effectSiblings){var n=xi(e);(0,f.each)(n,function(a){t.clearViewState(a)})}else this.clearViewState(e)},r}(mf),bf=CC,MC=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="active",t}return r.prototype.active=function(){this.setState()},r}(bf),EC=MC,_C=function(i){(0,j.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.setStateEnable=function(t){var e=Ln(this.context);if(e){if(!ki(this.context))return;t?(this.clear(),this.setElementState(e,!0)):this.hasState(e)&&this.setElementState(e,!1)}},r.prototype.toggle=function(){var t=Ln(this.context);if(t){var e=this.hasState(t);e||this.clear(),this.setElementState(t,!e)}},r.prototype.reset=function(){this.setStateEnable(!1)},r}(mf),wf=_C,AC=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="active",t}return r.prototype.active=function(){this.setState()},r}(wf),TC=AC,ms="inactive",xs="active";function Sf(i){var r=cn(i);(0,f.each)(r,function(t){t.hasState(xs)&&t.setState(xs,!1),t.hasState(ms)&&t.setState(ms,!1)})}function Ov(i,r,t){(0,f.each)(i,function(e){r(e)?(e.hasState(ms)&&e.setState(ms,!1),e.setState(xs,t)):(e.hasState(xs)&&e.setState(xs,!1),e.setState(ms,t))})}var Po=ae.INACTIVE,Ja=ae.ACTIVE,PC=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName=Ja,t}return r.prototype.setElementsStateByItem=function(t,e,n,a){var o=this,s=function(l){return o.isMathItem(l,e,n)};this.setHighlightBy(t,s,a)},r.prototype.setElementHighlight=function(t,e){e(t)?(t.hasState(Po)&&t.setState(Po,!1),t.setState(Ja,!0)):t.hasState(Ja)||t.setState(Po,!0)},r.prototype.setHighlightBy=function(t,e,n){var a=this;if(n)(0,f.each)(t,function(l){a.setElementHighlight(l,e)});else{var o=ta(this.context.view,Ja),s=!0;(0,f.each)(o,function(l){if(!e(l))return s=!1,!1}),s?this.clear():(0,f.each)(t,function(l){e(l)&&(l.hasState(Ja)&&l.setState(Ja,!1),l.setState(Po,!0))})}},r.prototype.setElementState=function(t,e){var n=this.context.view,a=cn(n);this.setHighlightBy(a,function(o){return t===o},e)},r.prototype.highlight=function(){this.setState()},r.prototype.clear=function(){var t=this.context.view;Sf(t)},r}(xf),Cf=PC,LC=function(i){(0,j.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.setStateByElement=function(t,e){var n=this.context.view,a=t.geometry.getAttribute("color");if(!!a){var o=n.getScaleByField(a.getFields()[0]),s=ui(t,o.field),l=cn(n),u=l.filter(function(h){return ui(h,o.field)===s});this.setHighlightBy(l,function(h){return u.includes(h)},e)}},r}(Cf),OC=LC,IC=function(i){(0,j.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.setElementHighlight=function(t,e){e(t)?(t.hasState(Po)&&t.setState(Po,!1),t.setState(Ja,!0)):(t.setState(Po,!0),t.hasState(Ja)&&t.setState(Ja,!1))},r.prototype.setStateByElement=function(t,e){var n=this.context.view,a=n.getXScale(),o=ui(t,a.field),s=cn(n),l=s.filter(function(u){return ui(u,a.field)===o});this.setHighlightBy(s,function(u){return l.includes(u)},e)},r.prototype.toggle=function(){var t=Ln(this.context);if(t){var e=t.hasState(this.stateName);this.setStateByElement(t,!e)}},r}(Cf),kC=IC,BC=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="active",t}return r.prototype.clearViewState=function(t){Sf(t)},r.prototype.highlight=function(){this.setState()},r.prototype.setElementsState=function(t,e,n){Ov(n,function(a){return t.indexOf(a)>=0},e)},r}(bf),Iv=BC,DC=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="active",t}return r.prototype.highlight=function(){this.setState()},r.prototype.setElementState=function(t,e){var n=this.context.view,a=cn(n);Ov(a,function(o){return t===o},e)},r.prototype.clear=function(){var t=this.context.view;Sf(t)},r}(wf),FC=DC,RC=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="selected",t}return r.prototype.selected=function(){this.setState()},r}(bf),NC=RC,GC=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="selected",t}return r.prototype.selected=function(){this.setState()},r}(xf),YC=GC,zC=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="selected",t}return r.prototype.selected=function(){this.setState()},r}(wf),XC=zC,VC=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="",t.ignoreItemStates=[],t}return r.prototype.getTriggerListInfo=function(){var t=qn(this.context),e=null;return li(t)&&(e={item:t.item,list:t.component}),e},r.prototype.getAllowComponents=function(){var t=this,e=this.context.view,n=ha(e),a=[];return(0,f.each)(n,function(o){o.isList()&&t.allowSetStateByElement(o)&&a.push(o)}),a},r.prototype.hasState=function(t,e){return t.hasState(e,this.stateName)},r.prototype.clearAllComponentsState=function(){var t=this,e=this.getAllowComponents();(0,f.each)(e,function(n){n.clearItemsState(t.stateName)})},r.prototype.allowSetStateByElement=function(t){var e=t.get("field");if(!e)return!1;if(this.cfg&&this.cfg.componentNames){var n=t.get("name");if(this.cfg.componentNames.indexOf(n)===-1)return!1}var a=this.context.view,o=ba(a,e);return o&&o.isCategory},r.prototype.allowSetStateByItem=function(t,e){var n=this.ignoreItemStates;if(n.length){var a=n.filter(function(o){return e.hasState(t,o)});return a.length===0}return!0},r.prototype.setStateByElement=function(t,e,n){var a=t.get("field"),o=this.context.view,s=ba(o,a),l=ui(e,a),u=s.getText(l);this.setItemsState(t,u,n)},r.prototype.setStateEnable=function(t){var e=this,n=Ln(this.context);if(n){var a=this.getAllowComponents();(0,f.each)(a,function(u){e.setStateByElement(u,n,t)})}else{var o=qn(this.context);if(li(o)){var s=o.item,l=o.component;this.allowSetStateByElement(l)&&this.allowSetStateByItem(s,l)&&this.setItemState(l,s,t)}}},r.prototype.setItemsState=function(t,e,n){var a=this,o=t.getItems();(0,f.each)(o,function(s){s.name===e&&a.setItemState(t,s,n)})},r.prototype.setItemState=function(t,e,n){t.setItemState(e,this.stateName,n)},r.prototype.setState=function(){this.setStateEnable(!0)},r.prototype.reset=function(){this.setStateEnable(!1)},r.prototype.toggle=function(){var t=this.getTriggerListInfo();if(t&&t.item){var e=t.list,n=t.item,a=this.hasState(e,n);this.setItemState(e,n,!a)}},r.prototype.clear=function(){var t=this.getTriggerListInfo();t?t.list.clearItemsState(this.stateName):this.clearAllComponentsState()},r}(hn),fl=VC,HC=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="active",t}return r.prototype.active=function(){this.setState()},r}(fl),WC=HC,kv="inactive",Bv="active";function jC(i){var r=i.getItems();(0,f.each)(r,function(t){i.hasState(t,Bv)&&i.setItemState(t,Bv,!1),i.hasState(t,kv)&&i.setItemState(t,kv,!1)})}var bs="inactive",Lo="active",UC=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName=Lo,t.ignoreItemStates=["unchecked"],t}return r.prototype.setItemsState=function(t,e,n){this.setHighlightBy(t,function(a){return a.name===e},n)},r.prototype.setItemState=function(t,e,n){var a=t.getItems();this.setHighlightBy(t,function(o){return o===e},n)},r.prototype.setHighlightBy=function(t,e,n){var a=t.getItems();if(n)(0,f.each)(a,function(l){e(l)?(t.hasState(l,bs)&&t.setItemState(l,bs,!1),t.setItemState(l,Lo,!0)):t.hasState(l,Lo)||t.setItemState(l,bs,!0)});else{var o=t.getItemsByState(Lo),s=!0;(0,f.each)(o,function(l){if(!e(l))return s=!1,!1}),s?this.clear():(0,f.each)(a,function(l){e(l)&&(t.hasState(l,Lo)&&t.setItemState(l,Lo,!1),t.setItemState(l,bs,!0))})}},r.prototype.highlight=function(){this.setState()},r.prototype.clear=function(){var t=this.getTriggerListInfo();if(t)jC(t.list);else{var e=this.getAllowComponents();(0,f.each)(e,function(n){n.clearItemsState(Lo),n.clearItemsState(bs)})}},r}(fl),Mf=UC,ZC=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="selected",t}return r.prototype.selected=function(){this.setState()},r}(fl),KC=ZC,$C=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.stateName="unchecked",t}return r.prototype.unchecked=function(){this.setState()},r}(fl),QC=$C,JC=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.maskShape=null,t.points=[],t.starting=!1,t.moving=!1,t.preMovePoint=null,t.shapeType="path",t}return r.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},r.prototype.emitEvent=function(t){var e="mask:"+t,n=this.context.view,a=this.context.event;n.emit(e,{target:this.maskShape,shape:this.maskShape,points:this.points,x:a.x,y:a.y})},r.prototype.createMask=function(){var t=this.context.view,e=this.getMaskAttrs(),n=t.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:(0,j.__assign)({fill:"#C5D4EB",opacity:.3},e)});return n},r.prototype.getMaskPath=function(){return[]},r.prototype.show=function(){this.maskShape&&(this.maskShape.show(),this.emitEvent("show"))},r.prototype.start=function(){this.starting=!0,this.moving=!1,this.points=[this.getCurrentPoint()],this.maskShape||(this.maskShape=this.createMask(),this.maskShape.set("capture",!1)),this.updateMask(),this.emitEvent("start")},r.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint()},r.prototype.move=function(){if(!(!this.moving||!this.maskShape)){var t=this.getCurrentPoint(),e=this.preMovePoint,n=t.x-e.x,a=t.y-e.y,o=this.points;(0,f.each)(o,function(s){s.x+=n,s.y+=a}),this.updateMask(),this.emitEvent("change"),this.preMovePoint=t}},r.prototype.updateMask=function(){var t=this.getMaskAttrs();this.maskShape.attr(t)},r.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null},r.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.maskShape&&this.maskShape.set("capture",!0)},r.prototype.hide=function(){this.maskShape&&(this.maskShape.hide(),this.emitEvent("hide"))},r.prototype.resize=function(){this.starting&&this.maskShape&&(this.points.push(this.getCurrentPoint()),this.updateMask(),this.emitEvent("change"))},r.prototype.destroy=function(){this.points=[],this.maskShape&&this.maskShape.remove(),this.maskShape=null,this.preMovePoint=null,i.prototype.destroy.call(this)},r}(hn),Ef=JC,qC=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.shapeType="circle",t}return r.prototype.getMaskAttrs=function(){var t=this.points,e=(0,f.last)(this.points),n=0,a=0,o=0;if(t.length){var s=t[0];n=Kn(s,e)/2,a=(e.x+s.x)/2,o=(e.y+s.y)/2}return{x:a,y:o,r:n}},r}(Ef),tM=qC,eM=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.shapeType="rect",t}return r.prototype.getRegion=function(){var t=this.points;return{start:(0,f.head)(t),end:(0,f.last)(t)}},r.prototype.getMaskAttrs=function(){var t=this.getRegion(),e=t.start,n=t.end,a=Math.min(e.x,n.x),o=Math.min(e.y,n.y),s=Math.abs(n.x-e.x),l=Math.abs(n.y-e.y);return{x:a,y:o,width:s,height:l}},r}(Ef),Dv=eM;function Fv(i){i.x=(0,f.clamp)(i.x,0,1),i.y=(0,f.clamp)(i.y,0,1)}var rM=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.dim="x",t.inPlot=!0,t}return r.prototype.getRegion=function(){var t=null,e=null,n=this.points,a=this.dim,o=this.context.view.getCoordinate(),s=o.invert((0,f.head)(n)),l=o.invert((0,f.last)(n));return this.inPlot&&(Fv(s),Fv(l)),a==="x"?(t=o.convert({x:s.x,y:0}),e=o.convert({x:l.x,y:1})):(t=o.convert({x:0,y:s.y}),e=o.convert({x:1,y:l.y})),{start:t,end:e}},r}(Dv),Rv=rM,nM=function(i){(0,j.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getMaskPath=function(){var t=this.points,e=[];return t.length&&((0,f.each)(t,function(n,a){a===0?e.push(["M",n.x,n.y]):e.push(["L",n.x,n.y])}),e.push(["L",t[0].x,t[0].y])),e},r.prototype.getMaskAttrs=function(){return{path:this.getMaskPath()}},r.prototype.addPoint=function(){this.resize()},r}(Ef),Nv=nM,iM=function(i){(0,j.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getMaskPath=function(){var t=this.points;return ga(t,!0)},r}(Nv),aM=iM,oM=function(i){(0,j.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.setCursor=function(t){var e=this.context.view;e.getCanvas().setCursor(t)},r.prototype.default=function(){this.setCursor("default")},r.prototype.pointer=function(){this.setCursor("pointer")},r.prototype.move=function(){this.setCursor("move")},r.prototype.crosshair=function(){this.setCursor("crosshair")},r.prototype.wait=function(){this.setCursor("wait")},r.prototype.help=function(){this.setCursor("help")},r.prototype.text=function(){this.setCursor("text")},r.prototype.eResize=function(){this.setCursor("e-resize")},r.prototype.wResize=function(){this.setCursor("w-resize")},r.prototype.nResize=function(){this.setCursor("n-resize")},r.prototype.sResize=function(){this.setCursor("s-resize")},r.prototype.neResize=function(){this.setCursor("ne-resize")},r.prototype.nwResize=function(){this.setCursor("nw-resize")},r.prototype.seResize=function(){this.setCursor("se-resize")},r.prototype.swResize=function(){this.setCursor("sw-resize")},r.prototype.nsResize=function(){this.setCursor("ns-resize")},r.prototype.ewResize=function(){this.setCursor("ew-resize")},r}(hn),sM=oM,lM=function(i){(0,j.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.filterView=function(t,e,n){var a=this;t.getScaleByField(e)&&t.filter(e,n),t.views&&t.views.length&&(0,f.each)(t.views,function(o){a.filterView(o,e,n)})},r.prototype.filter=function(){var t=qn(this.context);if(t){var e=this.context.view,n=t.component,a=n.get("field");if(li(t)){if(a){var o=n.getItemsByState("unchecked"),s=ba(e,a),l=o.map(function(v){return v.name});l.length?this.filterView(e,a,function(v){var x=s.getText(v);return!l.includes(x)}):this.filterView(e,a,null),e.render(!0)}}else if(Wn(t)){var u=n.getValue(),h=u[0],c=u[1];this.filterView(e,a,function(v){return v>=h&&v<=c}),e.render(!0)}}},r}(hn),uM=lM;function Gv(i,r,t,e){var n=Math.min(t[r],e[r]),a=Math.max(t[r],e[r]),o=i.range,s=o[0],l=o[1];if(n<s&&(n=s),a>l&&(a=l),n===l&&a===l)return null;var u=i.invert(n),h=i.invert(a);if(i.isCategory){var c=i.values.indexOf(u),v=i.values.indexOf(h),x=i.values.slice(c,v+1);return function(M){return x.includes(M)}}else return function(M){return M>=u&&M<=h}}var fM=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.dims=["x","y"],t.startPoint=null,t.isStarted=!1,t}return r.prototype.hasDim=function(t){return this.dims.includes(t)},r.prototype.start=function(){var t=this.context;this.isStarted=!0,this.startPoint=t.getCurrentPoint()},r.prototype.filter=function(){var t,e;if(ti(this.context)){var n=this.context.event.target,a=n.getCanvasBBox();t={x:a.x,y:a.y},e={x:a.maxX,y:a.maxY}}else{if(!this.isStarted)return;t=this.startPoint,e=this.context.getCurrentPoint()}if(!(Math.abs(t.x-e.x)<5||Math.abs(t.x-e.y)<5)){var o=this.context.view,s=o.getCoordinate(),l=s.invert(e),u=s.invert(t);if(this.hasDim("x")){var h=o.getXScale(),c=Gv(h,"x",l,u);this.filterView(o,h.field,c)}if(this.hasDim("y")){var v=o.getYScales()[0],c=Gv(v,"y",l,u);this.filterView(o,v.field,c)}this.reRender(o)}},r.prototype.end=function(){this.isStarted=!1},r.prototype.reset=function(){var t=this.context.view;if(this.isStarted=!1,this.hasDim("x")){var e=t.getXScale();this.filterView(t,e.field,null)}if(this.hasDim("y")){var n=t.getYScales()[0];this.filterView(t,n.field,null)}this.reRender(t)},r.prototype.filterView=function(t,e,n){t.filter(e,n)},r.prototype.reRender=function(t){t.render(!0)},r}(hn),hl=fM,hM=function(i){(0,j.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.filterView=function(t,e,n){var a=xi(t);(0,f.each)(a,function(o){o.filter(e,n)})},r.prototype.reRender=function(t){var e=xi(t);(0,f.each)(e,function(n){n.render(!0)})},r}(hl),_f=hM,cM=function(i){(0,j.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.filter=function(){var t=qn(this.context),e=this.context.view,n=cn(e);if(ti(this.context)){var a=ei(this.context,10);a&&(0,f.each)(n,function(M){a.includes(M)?M.show():M.hide()})}else if(t){var o=t.component,s=o.get("field");if(li(t)){if(s){var l=o.getItemsByState("unchecked"),u=ba(e,s),h=l.map(function(M){return M.name});(0,f.each)(n,function(M){var k=ui(M,s),R=u.getText(k);h.indexOf(R)>=0?M.hide():M.show()})}}else if(Wn(t)){var c=o.getValue(),v=c[0],x=c[1];(0,f.each)(n,function(M){var k=ui(M,s);k>=v&&k<=x?M.show():M.hide()})}}},r.prototype.clear=function(){var t=cn(this.context.view);(0,f.each)(t,function(e){e.show()})},r.prototype.reset=function(){this.clear()},r}(hn),vM=cM,dM=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.byRecord=!1,t}return r.prototype.filter=function(){ti(this.context)&&(this.byRecord?this.filterByRecord():this.filterByBBox())},r.prototype.filterByRecord=function(){var t=this.context.view,e=ei(this.context,10);if(!!e){var n=t.getXScale().field,a=t.getYScales()[0].field,o=e.map(function(l){return l.getModel().data}),s=xi(t);(0,f.each)(s,function(l){var u=cn(l);(0,f.each)(u,function(h){var c=h.getModel().data;Ra(o,c,n,a)?h.show():h.hide()})})}},r.prototype.filterByBBox=function(){var t=this,e=this.context.view,n=xi(e);(0,f.each)(n,function(a){var o=Bi(t.context,a,10),s=cn(a);o&&(0,f.each)(s,function(l){o.includes(l)?l.show():l.hide()})})},r.prototype.reset=function(){var t=xi(this.context.view);(0,f.each)(t,function(e){var n=cn(e);(0,f.each)(n,function(a){a.show()})})},r}(hn),Yv=dM,pM=10,gM=5,yM=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.buttonGroup=null,t.buttonCfg={name:"button",text:"button",textStyle:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"},padding:[8,10],style:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},activeStyle:{fill:"#e6e6e6"}},t}return r.prototype.getButtonCfg=function(){return(0,f.deepMix)(this.buttonCfg,this.cfg)},r.prototype.drawButton=function(){var t=this.getButtonCfg(),e=this.context.view.foregroundGroup.addGroup({name:t.name}),n=e.addShape({type:"text",name:"button-text",attrs:(0,j.__assign)({text:t.text},t.textStyle)}),a=n.getBBox(),o=fi(t.padding),s=e.addShape({type:"rect",name:"button-rect",attrs:(0,j.__assign)({x:a.x-o[3],y:a.y-o[0],width:a.width+o[1]+o[3],height:a.height+o[0]+o[2]},t.style)});s.toBack(),e.on("mouseenter",function(){s.attr(t.activeStyle)}),e.on("mouseleave",function(){s.attr(t.style)}),this.buttonGroup=e},r.prototype.resetPosition=function(){var t=this.context.view,e=t.getCoordinate(),n=e.convert({x:1,y:1}),a=this.buttonGroup,o=a.getBBox(),s=Ve.transform(null,[["t",n.x-o.width-pM,n.y+o.height+gM]]);a.setMatrix(s)},r.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},r.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},r.prototype.destroy=function(){var t=this.buttonGroup;t&&t.remove(),i.prototype.destroy.call(this)},r}(hn),mM=yM,xM=4,bM=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.starting=!1,t.dragStart=!1,t}return r.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint()},r.prototype.drag=function(){if(!!this.startPoint){var t=this.context.getCurrentPoint(),e=this.context.view,n=this.context.event;this.dragStart?e.emit("drag",{target:n.target,x:n.x,y:n.y}):Kn(t,this.startPoint)>xM&&(e.emit("dragstart",{target:n.target,x:n.x,y:n.y}),this.dragStart=!0)}},r.prototype.end=function(){if(this.dragStart){var t=this.context.view,e=this.context.event;t.emit("dragend",{target:e.target,x:e.x,y:e.y})}this.starting=!1,this.dragStart=!1},r}(hn),wM=bM,SM=5,CM=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.starting=!1,t.isMoving=!1,t.startPoint=null,t.startMatrix=null,t}return r.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint(),this.startMatrix=this.context.view.middleGroup.getMatrix()},r.prototype.move=function(){if(!!this.starting){var t=this.startPoint,e=this.context.getCurrentPoint(),n=Kn(t,e);if(n>SM&&!this.isMoving&&(this.isMoving=!0),this.isMoving){var a=this.context.view,o=Ve.transform(this.startMatrix,[["t",e.x-t.x,e.y-t.y]]);a.backgroundGroup.setMatrix(o),a.foregroundGroup.setMatrix(o),a.middleGroup.setMatrix(o)}}},r.prototype.end=function(){this.isMoving&&(this.isMoving=!1),this.startMatrix=null,this.starting=!1,this.startPoint=null},r.prototype.reset=function(){this.starting=!1,this.startPoint=null,this.isMoving=!1;var t=this.context.view;t.backgroundGroup.resetMatrix(),t.foregroundGroup.resetMatrix(),t.middleGroup.resetMatrix(),this.isMoving=!1},r}(hn),MM=CM,zv="x",Xv="y",EM=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.dims=[zv,Xv],t.cfgFields=["dims"],t.cacheScaleDefs={},t}return r.prototype.hasDim=function(t){return this.dims.includes(t)},r.prototype.getScale=function(t){var e=this.context.view;return t==="x"?e.getXScale():e.getYScales()[0]},r.prototype.resetDim=function(t){var e=this.context.view;if(this.hasDim(t)&&this.cacheScaleDefs[t]){var n=this.getScale(t);e.scale(n.field,this.cacheScaleDefs[t]),this.cacheScaleDefs[t]=null}},r.prototype.reset=function(){this.resetDim(zv),this.resetDim(Xv);var t=this.context.view;t.render(!0)},r}(hn),Vv=EM,_M=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.startPoint=null,t.starting=!1,t.startCache={},t}return r.prototype.start=function(){var t=this;this.startPoint=this.context.getCurrentPoint(),this.starting=!0;var e=this.dims;(0,f.each)(e,function(n){var a=t.getScale(n),o=a.min,s=a.max,l=a.values;t.startCache[n]={min:o,max:s,values:l}})},r.prototype.end=function(){this.startPoint=null,this.starting=!1,this.startCache={}},r.prototype.translate=function(){var t=this;if(!!this.starting){var e=this.startPoint,n=this.context.view.getCoordinate(),a=this.context.getCurrentPoint(),o=n.invert(e),s=n.invert(a),l=s.x-o.x,u=s.y-o.y,h=this.context.view,c=this.dims;(0,f.each)(c,function(v){t.translateDim(v,{x:l*-1,y:u*-1})}),h.render(!0)}},r.prototype.translateDim=function(t,e){if(this.hasDim(t)){var n=this.getScale(t);n.isLinear&&this.translateLinear(t,n,e)}},r.prototype.translateLinear=function(t,e,n){var a=this.context.view,o=this.startCache[t],s=o.min,l=o.max,u=l-s,h=n[t]*u;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:e.nice,min:s,max:l}),a.scale(e.field,{nice:!1,min:s+h,max:l+h})},r.prototype.reset=function(){i.prototype.reset.call(this),this.startPoint=null,this.starting=!1},r}(Vv),AM=_M,TM=function(i){(0,j.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.zoomRatio=.05,t}return r.prototype.zoomIn=function(){this.zoom(this.zoomRatio)},r.prototype.zoom=function(t){var e=this,n=this.dims;(0,f.each)(n,function(a){e.zoomDim(a,t)}),this.context.view.render(!0)},r.prototype.zoomOut=function(){this.zoom(-1*this.zoomRatio)},r.prototype.zoomDim=function(t,e){if(this.hasDim(t)){var n=this.getScale(t);n.isLinear&&this.zoomLinear(t,n,e)}},r.prototype.zoomLinear=function(t,e,n){var a=this.context.view;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:e.nice,min:e.min,max:e.max});var o=this.cacheScaleDefs[t],s=o.max-o.min,l=e.min,u=e.max,h=n*s,c=l-h,v=u+h,x=v-c,M=x/s;v>c&&M<100&&M>.01&&a.scale(e.field,{nice:!1,min:l-h,max:u+h})},r}(Vv),PM=TM;kt("dark",ar(pb)),q("canvas",I),q("svg",O),Aa("Polygon",zS),Aa("Interval",kS),Aa("Schema",VS),Aa("Path",sf),Aa("Point",NS),Aa("Line",DS),Aa("Area",MS),Aa("Edge",_S),Aa("Heatmap",PS),cs("base",Ks),cs("interval",o2),cs("pie",u2),cs("polar",dv),Mo("overlap",b2),Mo("distribute",h2),Mo("fixed-overlap",x2),Mo("limit-in-shape",p2),Mo("limit-in-canvas",d2),Mo("pie-outer",v2),hi("fade-in",w2),hi("fade-out",S2),hi("grow-in-x",M2),hi("grow-in-xy",_2),hi("grow-in-y",E2),hi("scale-in-x",P2),hi("scale-in-y",L2),hi("wave-in",k2),hi("zoom-in",B2),hi("zoom-out",D2),hi("position-update",T2),hi("sector-path-update",I2),hi("path-in",A2),Zr("rect",W2),Zr("mirror",V2),Zr("list",G2),Zr("matrix",z2),Zr("circle",R2),Zr("tree",U2),sn("axis",Q2),sn("legend",iC),sn("tooltip",uC),sn("annotation",K2),sn("slider",oC),Fr("tooltip",Pv),Fr("sibling-tooltip",dC),Fr("ellipsis-text",gC),Fr("element-active",bC),Fr("element-single-active",TC),Fr("element-range-active",EC),Fr("element-highlight",Cf),Fr("element-highlight-by-x",kC),Fr("element-highlight-by-color",OC),Fr("element-single-highlight",FC),Fr("element-range-highlight",Iv),Fr("element-sibling-highlight",Iv,{effectSiblings:!0,effectByRecord:!0}),Fr("element-selected",YC),Fr("element-single-selected",XC),Fr("element-range-selected",NC),Fr("element-link-by-color",SC),Fr("active-region",hC),Fr("list-active",WC),Fr("list-selected",KC),Fr("list-highlight",Mf),Fr("list-unchecked",QC),Fr("legend-item-highlight",Mf,{componentNames:["legend"]}),Fr("axis-label-highlight",Mf,{componentNames:["axis"]}),Fr("rect-mask",Dv),Fr("x-rect-mask",Rv,{dim:"x"}),Fr("y-rect-mask",Rv,{dim:"y"}),Fr("circle-mask",tM),Fr("path-mask",Nv),Fr("smooth-path-mask",aM),Fr("cursor",sM),Fr("data-filter",uM),Fr("brush",hl),Fr("brush-x",hl,{dims:["x"]}),Fr("brush-y",hl,{dims:["y"]}),Fr("sibling-filter",_f),Fr("sibling-x-filter",_f),Fr("sibling-y-filter",_f),Fr("element-filter",vM),Fr("element-sibling-filter",Yv),Fr("element-sibling-filter-record",Yv,{byRecord:!0}),Fr("view-drag",wM),Fr("view-move",MM),Fr("scale-translate",AM),Fr("scale-zoom",PM),Fr("reset-button",mM,{name:"reset-button",text:"reset"});function fo(i){return i.isInPlot()}Se("tooltip",{start:[{trigger:"plot:mousemove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseleave",action:"tooltip:hide"},{trigger:"plot:leave",action:"tooltip:hide"},{trigger:"plot:touchend",action:"tooltip:hide"}]}),Se("ellipsis-text",{start:[{trigger:"legend-item-name:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"legend-item-name:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"legend-item-name:mouseleave",action:"ellipsis-text:hide"},{trigger:"legend-item-name:touchend",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseleave",action:"ellipsis-text:hide"},{trigger:"axis-label:touchend",action:"ellipsis-text:hide"}]}),Se("element-active",{start:[{trigger:"element:mouseenter",action:"element-active:active"}],end:[{trigger:"element:mouseleave",action:"element-active:reset"}]}),Se("element-selected",{start:[{trigger:"element:click",action:"element-selected:toggle"}]}),Se("element-highlight",{start:[{trigger:"element:mouseenter",action:"element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight:reset"}]}),Se("element-highlight-by-x",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-x:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-x:reset"}]}),Se("element-highlight-by-color",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-color:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-color:reset"}]}),Se("legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","element-active:reset"]}]}),Se("legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","element-highlight:reset"]}]}),Se("axis-label-highlight",{start:[{trigger:"axis-label:mouseenter",action:["axis-label-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"axis-label:mouseleave",action:["axis-label-highlight:reset","element-highlight:reset"]}]}),Se("element-list-highlight",{start:[{trigger:"element:mouseenter",action:["list-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"element:mouseleave",action:["list-highlight:reset","element-highlight:reset"]}]}),Se("element-range-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(i){return!i.isInShape("mask")},action:["rect-mask:start","rect-mask:show"]},{trigger:"mask:dragstart",action:["rect-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:drag",action:["rect-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end"]},{trigger:"mask:dragend",action:["rect-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(i){return!i.isInPlot()},action:["element-range-highlight:clear","rect-mask:end","rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","rect-mask:hide"]}]}),Se("brush",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:fo,action:["brush:start","rect-mask:start","rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:fo,action:["rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:fo,action:["brush:filter","brush:end","rect-mask:end","rect-mask:hide","reset-button:show"]}],rollback:[{trigger:"reset-button:click",action:["brush:reset","reset-button:hide","cursor:crosshair"]}]}),Se("brush-visible",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"plot:mousedown",action:["rect-mask:start","rect-mask:show"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end","rect-mask:hide","element-filter:filter","element-range-highlight:clear"]}],rollback:[{trigger:"dblclick",action:["element-filter:clear"]}]}),Se("brush-x",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:fo,action:["brush-x:start","x-rect-mask:start","x-rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:fo,action:["x-rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:fo,action:["brush-x:filter","brush-x:end","x-rect-mask:end","x-rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]}),Se("element-path-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:fo,action:"path-mask:start"},{trigger:"mousedown",isEnable:fo,action:"path-mask:show"}],processing:[{trigger:"mousemove",action:"path-mask:addPoint"}],end:[{trigger:"mouseup",action:"path-mask:end"}],rollback:[{trigger:"dblclick",action:"path-mask:hide"}]}),Se("element-single-selected",{start:[{trigger:"element:click",action:"element-single-selected:toggle"}]}),Se("legend-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","data-filter:filter"]}]}),Se("continuous-filter",{start:[{trigger:"legend:valuechanged",action:"data-filter:filter"}]}),Se("continuous-visible-filter",{start:[{trigger:"legend:valuechanged",action:"element-filter:filter"}]}),Se("legend-visible-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","element-filter:filter"]}]}),Se("active-region",{start:[{trigger:"plot:mousemove",action:"active-region:show"}],end:[{trigger:"plot:mouseleave",action:"active-region:hide"}]});function Hv(i){return i.gEvent.preventDefault(),i.gEvent.originalEvent.deltaY>0}Se("view-zoom",{start:[{trigger:"plot:mousewheel",isEnable:function(i){return Hv(i.event)},action:"scale-zoom:zoomOut",throttle:{wait:100,leading:!0,trailing:!1}},{trigger:"plot:mousewheel",isEnable:function(i){return!Hv(i.event)},action:"scale-zoom:zoomIn",throttle:{wait:100,leading:!0,trailing:!1}}]}),Se("sibling-tooltip",{start:[{trigger:"plot:mousemove",action:"sibling-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"sibling-tooltip:hide"}]});var Wv={translate:Vu,rotate:Sc,zoom:sb,transform:Zs,getAngle:Ii,polarToCartesian:Mn},cl=function(){function i(r){this.EVENT="gesture",this.gm=r}return i.prototype.do=function(r){var t=r.type;switch(t){case"touchstart":this.onTouchStart(r);break;case"touchmove":this.onTouchMove(r);break;case"touchend":this.onTouchEnd(r);break;case"touchcancel":this.onTouchCancel(r);break;default:return}},i.prototype.emit=function(r){this.gm.emit(this.EVENT,r)},i}(),LM=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.EVENT="pan",t}return r.prototype.onTouchCancel=function(t){},r.prototype.onTouchEnd=function(t){},r.prototype.onTouchMove=function(t){var e=t.x,n=t.y,a=e-this.preX,o=n-this.preY;this.preX=e,this.preY=n,this.emit({x:e,y:n,deltaX:a,deltaY:o,event:t})},r.prototype.onTouchStart=function(t){var e=t.x,n=t.y;this.preX=e,this.preY=n},r}(cl),ho=typeof performance=="object"&&performance.now?performance:Date,OM=300,jv=10,IM=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.EVENT="press",t}return r.prototype.onTouchCancel=function(t){this.clearTimeout()},r.prototype.onTouchEnd=function(t){this.clearTimeout()},r.prototype.onTouchMove=function(t){var e=t.x,n=t.y;(e-this.touchStartX>jv||n-this.touchStartY>jv)&&this.clearTimeout()},r.prototype.onTouchStart=function(t){var e=this;this.clearTimeout();var n=t.x,a=t.y;this.touchStartTime=ho.now(),this.touchStartX=n,this.touchStartY=a,this.pressTimeout=window.setTimeout(function(){e.emit({x:n,y:a,event:t})},OM)},r.prototype.clearTimeout=function(){window.clearTimeout(this.pressTimeout)},r}(cl),kM=100,BM=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.EVENT="swipe",t.latestMoveTime=0,t.ms=0,t.speedX=0,t.speedY=0,t.preX=0,t.preY=0,t}return r.prototype.onTouchCancel=function(t){},r.prototype.onTouchEnd=function(t){var e=this.speedX,n=this.speedY;if(ho.now()-this.latestMoveTime<kM){var a=t.x,o=t.y;this.emit({x:a,y:o,speedX:e,speedY:n,event:t})}},r.prototype.onTouchMove=function(t){var e=t.x,n=t.y,a=ho.now(),o=e-this.preX,s=n-this.preY,l=a-this.ms;this.speedX=o/l,this.speedY=s/l,this.latestMoveTime=a},r.prototype.onTouchStart=function(t){var e=t.x,n=t.y;this.speedX=this.speedY=0,this.preX=e,this.preY=n,this.ms=ho.now()},r}(cl),DM=300,Uv=2,FM=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.EVENT="tap",t}return r.prototype.onTouchCancel=function(t){},r.prototype.onTouchEnd=function(t){var e=t.x,n=t.y;e-this.touchStartX<Uv&&n-this.touchStartY<Uv&&ho.now()-this.touchStartTime<DM&&this.emit({x:e,y:n,event:t})},r.prototype.onTouchMove=function(t){},r.prototype.onTouchStart=function(t){var e=t.x,n=t.y;this.touchStartTime=ho.now(),this.touchStartX=e,this.touchStartY=n},r}(cl),RM={Pan:LM,Press:IM,Swipe:BM,Tap:FM},NM=function(i){return RM[i]},Zv=function(i){(0,V.__extends)(r,i);function r(t,e){e===void 0&&(e={});var n=i.call(this)||this;return n.onTouchStart=function(a){n.preventEvent(a),n.element.on("touchmove",n.onTouchMove),n.element.on("touchend",n.onTouchEnd),n.element.on("touchcancel",n.onTouchCancel),n.emit("touchdown",a),n.doGestures(a)},n.onTouchMove=function(a){n.preventEvent(a),n.emit("touchmove",a),n.doGestures(a)},n.onTouchEnd=function(a){n.preventEvent(a),n.emit("touchend",a),n.element.off("touchmove",n.onTouchMove),n.element.off("touchend",n.onTouchEnd),n.element.off("touchcancel",n.onTouchCancel),n.doGestures(a)},n.onTouchCancel=function(a){n.preventEvent(a),n.emit("touchcancel",a),n.element.off("touchmove",n.onTouchMove),n.element.off("touchend",n.onTouchEnd),n.element.off("touchcancel",n.onTouchCancel),n.doGestures(a)},n.element=t,n.options=e,n.initialGestures(),n.bindTouchStart(),n}return r.prototype.destroy=function(){this.element.off("touchstart",this.onTouchStart),this.off()},r.prototype.initialGestures=function(){var t=this,e=this.options.gestures||["Pan","Press","Swipe","Tap"];this.gestures=e.map(function(n){var a=NM(n);return new a(t)})},r.prototype.bindTouchStart=function(){this.element.on("touchstart",this.onTouchStart)},r.prototype.preventEvent=function(t){var e=t.type,n=this.options.prevents||[];n.includes(e)&&t.preventDefault()},r.prototype.doGestures=function(t){this.gestures.forEach(function(e){e.do(t)})},r}(te.default),GM=p(68716),YM=GM.yD,zM=800,XM="swipe",VM="pan",Kv="wheel",HM=function(i){(0,V.__extends)(r,i);function r(t){var e=i.call(this)||this;return e.rafMs=0,e.onPan=function(n){e.raf&&cancelAnimationFrame(e.raf);var a=n.deltaX,o=n.deltaY,s=e.getWrapperEvent(n,a,o);e.emit(Kv,s)},e.onSwipe=function(n){var a=n.speedX,o=n.speedY;e.rafMs=ho.now(),e.ms=e.rafMs,(a!==0||o!==0)&&e.rafInertia(n)},e.element=t,e.gm=new Zv(t,{gestures:["Pan","Swipe"]}),e.gm.on(XM,e.onSwipe),e.gm.on(VM,e.onPan),e}return r.prototype.destroy=function(){window.cancelAnimationFrame(this.raf),this.gm.destroy(),this.off()},r.prototype.rafInertia=function(t){var e=this,n=t.speedX,a=t.speedY;this.raf=window.requestAnimationFrame(function(){var o=ho.now(),s=(o-e.ms)/zM;if(s<1){s=YM(1-s);var l=o-e.rafMs,u=n*s*l,h=a*s*l,c=e.getWrapperEvent(t,u,h);e.emit(Kv,c),e.rafMs=o,e.rafInertia(t)}})},r.prototype.getWrapperEvent=function(t,e,n){return(0,V.__assign)((0,V.__assign)({},t),{deltaX:-e,deltaY:-n})},r}(te.default),wn=p(29583),$v=p(64815),WM=p(6750),SG=p(61058),jM=p(31882),co=p(27978),CG=p(38700),UM=p(88373),Oo=p(55225);sn("gesture",$.Z);var ca="origin",ws="_origin",Qv=1e3,Jv=60*Qv,qv=60*Jv,vl=24*qv,ZM=vl*7,KM=vl*30,$M=vl*365,QM={second:{value:Qv,format:"HH:mm:ss"},miniute:{value:Jv,format:"HH:mm"},hour:{value:qv,format:"HH"},day:{value:vl,format:"YYYY-MM-DD"},week:{value:ZM,format:"YYYY-MM-DD"},month:{value:KM,format:"YYYY-MM"},year:{value:$M,format:"YYYY"}},dl=["click","dblclick","mousemove","mouseenter","mouseleave","mousedown","mouseup","contextmenu"],JM=[],qM={axis:"axis-label",label:"label",legend:"legend-item"},tE={title:"title",description:"description",breadcrumb:"breadcrumb"},td=(0,f.deepMix)(Ai(tE),Af("Plot",dl)),ed=Af("Layer",dl),dn=(0,f.deepMix)({},Ai(qM),Af("View",dl),eE());function ai(i,r,t){i.view.on(r,function(e){var n={x:e==null?void 0:e.x,y:e==null?void 0:e.y,clientX:e==null?void 0:e.clientX,clientY:e==null?void 0:e.clientY,target:e==null?void 0:e.target,data:(e==null?void 0:e.data)?e.data.data:null,plot:i,canvas:i.canvas,gEvent:e==null?void 0:e.gEvent};t(n)})}function Ai(i){var r={};return(0,f.each)(i,function(t,e){var n=(0,f.upperFirst)(e),a="on"+n,o=t+":";(0,f.each)(dl,function(s){var l=(0,f.upperFirst)(s),u=""+a+l,h=""+o+s;r[u]=h})}),r}function Af(i,r){var t={},e="on";return(0,f.each)(r,function(n){var a=(0,f.upperFirst)(n),o=""+e+i+a;t[o]=n}),t}function eE(){var i={},r="on";return(0,f.each)(JM,function(t){var e=(0,f.upperFirst)(t),n=""+r+e;i[n]=t}),i}var rE=p(85800),nE=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.fromBBoxObject=function(t){return new r(t.x,t.y,t.width,t.height)},r}(rE.BBox),Jr=nE,iE=function(i){(0,V.__extends)(r,i);function r(t){var e=i.call(this)||this;return e.layers=[],e.destroyed=!1,e.visibility=!0,e.rendered=!1,e.eventHandlers=[],e.options=e.getOptions(t),e.processOptions(e.options),e}return r.prototype.processOptions=function(t){this.id=t.id,this.x=t.x||0,this.y=t.y||0,this.width=t.width,this.height=t.height,this.canvas=t.canvas,this.parent=t.parent},r.prototype.updateConfig=function(t){this.options=(0,f.deepMix)({},this.options,t),this.processOptions(this.options)},r.prototype.beforeInit=function(){return null},r.prototype.init=function(){this.layerBBox=this.getLayerBBox(),this.layerRegion=this.getLayerRegion(),this.eachLayer(function(t){t.init()})},r.prototype.afterInit=function(){return null},r.prototype.render=function(){this.rendered||(this.container=this.parent?this.parent.container.addGroup():this.canvas.addGroup()),this.rendered=!0,this.beforeInit(),this.init(),this.afterInit(),this.eachLayer(function(t){t.render()}),this.canvas.draw()},r.prototype.clear=function(){this.eachLayer(function(t){t.destroy()}),this.layers=[],this.container.clear()},r.prototype.destroy=function(){var t=this;this.eachLayer(function(e){e.destroy()}),(0,f.each)(this.eventHandlers,function(e){t.off(e.eventName,e.handler)}),this.container.remove(!0),this.destroyed=!0},r.prototype.show=function(){this.container.attr("visible",!0),this.container.set("visible",!0),this.visibility=!0,this.canvas.draw()},r.prototype.hide=function(){this.container.attr("visible",!1),this.container.set("visible",!1),this.visibility=!1,this.canvas.draw()},r.prototype.addLayer=function(t){var e=(0,f.findIndex)(this.layers,function(n){return n===t});e<0&&(t.parent!==this&&(t.parent=this,t.init()),this.layers.push(t))},r.prototype.removeLayer=function(t){var e=(0,f.findIndex)(this.layers,function(n){return n===t});e>=0&&this.layers.splice(e,1)},r.prototype.updateBBox=function(t,e){e===void 0&&(e=!1);var n={x:this.x,y:this.y,width:this.width,height:this.height},a=(0,f.deepMix)({},n,t);this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height,this.layerBBox=this.getLayerBBox(),this.layerRegion=this.getLayerRegion(),this.render(),e&&this.eachLayer(function(o){o.updateBBoxByParent(),o.render()}),this.canvas.draw()},r.prototype.updateBBoxByParent=function(){var t=this.layerRegion;this.x=this.parent.x+this.parent.width*t.start.x,this.y=this.parent.y+this.parent.height*t.start.y,this.width=this.parent.width*(t.end.x-t.start.x),this.height=this.parent.height*(t.end.y-t.start.y),this.layerBBox=this.getLayerBBox()},r.prototype.getGlobalPosition=function(){for(var t=this.x,e=this.y,n=this.parent;n;)t+=n.x,e+=n.y,n=n.parent;return{x:t,y:e}},r.prototype.getGlobalBBox=function(){var t=this.getGlobalPosition();return new Jr(t.x,t.y,this.width,this.height)},r.prototype.getOptions=function(t){var e=0,n=0;t.parent&&(e=t.parent.width,n=t.parent.height);var a={x:0,y:0,width:e,height:n};return(0,f.deepMix)({},a,t)},r.prototype.eachLayer=function(t){(0,f.each)(this.layers,t)},r.prototype.parseEvents=function(t){var e=this,n=(0,f.keys)(ed);(0,f.each)(t,function(a,o){if((0,f.contains)(n,o)&&(0,f.isFunction)(a)){var s=ed[o]||o,l=a;e.on(s,l),e.eventHandlers.push({name:s,handler:l})}})},r.prototype.getLayerBBox=function(){return new Jr(this.x,this.y,this.width,this.height)},r.prototype.getLayerRegion=function(){if(this.parent){var t=this.parent.width,e=this.parent.height,n=this.parent.x,a=this.parent.y,o=(this.x-n)/t,s=(this.y-a)/e,l=(this.x+this.width-n)/t,u=(this.y+this.height-a)/e;return{start:{x:o,y:s},end:{x:l,y:u}}}return{start:{x:0,y:0},end:{x:1,y:1}}},r}(te.default),pl=iE;function Wo(i){return i?!!(i.visible===!0&&typeof i.text=="string"&&i.text.trim()):!1}function rd(i,r){var t=(0,V.__spreadArrays)(i);return r.forEach(function(e,n){t.splice(e+n,0,`
`)}),t.join("")}function aE(i){return i.getComponents().filter(function(r){return r.type===wn.COMPONENT_TYPE.AXIS}).map(function(r){return r.component})}function oE(i){return i.getComponents().filter(function(r){return r.type===wn.COMPONENT_TYPE.LEGEND}).map(function(r){return r.component})}function MG(i){var r=i.backgroundGroup.findAll(function(t){if(t.get("name")){var e=t.get("name").split("-");return e[0]==="axis"}});return r}function EG(i){var r=i.foregroundGroup.findAll(function(t){if(t.get("name"))return t.get("name")==="legend-item-group"});return r}function sE(i,r){for(var t=i.length;t>0&&!(r>=i[t-1]);)t-=1;return t}function nd(i,r){return!(i.maxY<r.minY||r.maxY<i.minY||i.maxX<r.minX||r.maxX<i.minX)}function _G(){return!!navigator.userAgent.match(/(Mobile)|(Android)|(WebOS)|(iPhone)|(iPad)/)}var lE=function(){function i(r){this.position="top",this.destroyed=!1,(0,f.assign)(this,r),this.init()}return i.prototype.getBBox=function(){var r=this;if(this.shape){var t=this.shape.getBBox();if(this.index===0)return Jr.fromBBoxObject(t);var e=this.plot.theme.description.padding;return(0,f.isArray)(e)&&(0,f.each)(e,function(n,a){typeof e[a]=="function"&&(e[a]=e[a](r.plot.options.legend.position))}),new Jr(t.maxX,t.minY,t.width,t.height)}return null},i.prototype.clear=function(){this.shape&&this.shape.attr("text","")},i.prototype.destroy=function(){this.shape&&this.shape.remove(),this.destroyed=!0},i.prototype.init=function(){var r=this.textWrapper(),t=this.getPosition(),e=t.x,n=t.y;this.shape=this.container.addShape("text",{attrs:(0,f.mix)({x:e,y:n,text:r},this.style,{textAlign:this.getTextAlign()})}),this.shape.name=this.name},i.prototype.getPosition=function(){return this.alignTo==="left"?{x:this.leftMargin,y:this.topMargin}:this.alignTo==="middle"?{x:this.leftMargin+this.wrapperWidth/2,y:this.topMargin}:{x:this.rightMargin,y:this.topMargin}},i.prototype.getTextAlign=function(){return this.alignTo==="left"?"left":this.alignTo==="middle"?"center":"right"},i.prototype.textWrapper=function(){var r=this.wrapperWidth,t=this.style,e=this.text,n=this.container.addShape("text",{attrs:(0,V.__assign)({text:"",x:0,y:0},t)}),a=e.split(`
`),o=a.map(function(s){for(var l="",u=s.split(""),h=[],c=0;c<u.length;c++){var v=u[c];n.attr("text",l+=v);var x=n.getBBox().width-1;if(x>r){if(c===0)break;h.push(c),l=""}}return rd(u,h)});return n.remove(),o.join(`
`)},i}(),gl=lE,uE=function(i){(0,V.__extends)(r,i);function r(t){var e=i.call(this)||this;return e.container=t.container,e.destroyed=!1,e.config=t,e.disposables=[],e}return r.prototype.init=function(){this.group||this.initGroup(),this.initConfig(this.config)},r.prototype.getGroup=function(){return this.group},r.prototype.getConfig=function(){return this.config},r.prototype.getBBox=function(){return this.getGroup().getBBox()},r.prototype.clear=function(){this.group.clear()},r.prototype.render=function(){this.group.clear(),this.renderInner(this.group),this.getCanvas().draw()},r.prototype.update=function(t){this.config=(0,V.__assign)((0,V.__assign)({},this.config),t),this.initConfig(this.config)},r.prototype.destroy=function(){(0,f.each)(this.disposables,function(t){t()}),this.disposables=[],this.group.remove(!0),this.destroyed=!0},r.prototype.initGroup=function(){this.group=this.container.addGroup()},r.prototype.getCanvas=function(){return this.container.get("canvas")},r.prototype.addDisposable=function(t){this.disposables.push(t)},r.prototype.initConfig=function(t){},r}(te.default),Ss=uE,fE=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.labelsCfgMap={},t.lastLabelsCfgMap={},t}return r.prototype.getGeometry=function(){return this.geometry},r.prototype.getLabels=function(){return this.labels},r.prototype.show=function(){this.container.show()},r.prototype.hide=function(){this.container.hide()},r.prototype.initConfig=function(t){var e=this;this.layer=t.layer;var n=this.layer.view;this.view=n,this.geometry=t.geometry,this.coord=n.getCoordinate(),this.options=(0,f.deepMix)(this.getDefaultOptions(),t.label);var a=function(){e.clear(),e.labelsCfgMap={},e.lastLabelsCfgMap={},e.render()};n.on(wn.VIEW_LIFE_CIRCLE.AFTER_PAINT,a),this.addDisposable(function(){n.off(wn.VIEW_LIFE_CIRCLE.AFTER_PAINT,a)})},r.prototype.renderInner=function(t){var e=this;this.labels=[],this.labelsCfgMap={},(0,f.each)(this.geometry.elements,function(s,l){var u=[].concat(e.drawLabelItem(t,s,l));(0,f.each)(u,function(h,c){e.adjustLabel(h,s,c),h.destroyed||(e.labels.push(h),e.labelsCfgMap[h.get("id")]=(0,f.clone)(h.attrs))})}),this.layoutLabels(this.geometry,this.labels);var n=this.lastLabelsCfgMap,a=this.labelsCfgMap,o=this.geometry.animateOption?(0,co.getDefaultAnimateCfg)("label",this.coord):!1;(0,f.each)(a,function(s,l){var u=t.findById(l);if(u)if(n[l]){var h=n[l],c=(0,f.get)(o,"update");c&&(u.stopAnimate(),u.attr(h),(0,co.doAnimate)(u,c,{toAttrs:(0,V.__assign)({},s),coordinate:e.coord}))}else{var v=(0,f.get)(o,"appear");v&&(u.stopAnimate(),(0,co.doAnimate)(u,v,{toAttrs:(0,V.__assign)({},u.attr()),coordinate:e.coord}))}delete n[l]}),(0,f.each)(n,function(s,l){var u=(0,f.get)(o,"leave");if(u){var h=t.addShape("text",{attrs:s,id:l,name:"label"});h.stopAnimate(),(0,co.doAnimate)(h,u,{toAttrs:null,coordinate:e.coord})}}),this.lastLabelsCfgMap=this.labelsCfgMap},r.prototype.drawLabelText=function(t,e,n){return n===void 0&&(n={}),t.addShape("text",(0,V.__assign)({attrs:e},n))},r.prototype.drawLabelItem=function(t,e,n){var a=this,o=e.getModel(),s=[].concat(this.getLabelItemAttrs(e,n)),l=this.getDefaultOffset(),u=this.getLabelOffset();return(0,f.map)(s,function(h,c){var v,x={x:h.x+u.x,y:h.y+u.y},M=(0,f.isArray)(o.mappingData)?o.mappingData[c]:o.mappingData,k=a.getLabelId(M);return a.drawLabelText(t,(0,V.__assign)((0,V.__assign)({},h),x),(v={id:k,name:"label",offset:l,element:e},v[ca]=M,v))})},r.prototype.getDefaultOffset=function(){return Number(this.options.offset)},r.prototype.getLabelOffset=function(){var t=this.options,e=t.offsetX,n=t.offsetY;return{x:(0,f.isNumber)(e)?e:0,y:(0,f.isNumber)(n)?n:0}},r.prototype.getLabelOffsetByDimAndFactor=function(t,e){var n=this.options,a=n.offsetX,o=n.offsetY,s=this.getDefaultOffset(),l={x:0,y:0};return l[t]=s*e,(0,f.isNumber)(a)&&(l.x+=a),(0,f.isNumber)(o)&&(l.y+=o),l},r.prototype.getDefaultOptions=function(){return{}},r.prototype.layoutLabels=function(t,e){},r.prototype.getLabelId=function(t){var e=t._origin,n=this.geometry.type,a=this.geometry.getXScale(),o=this.geometry.getYScale(),s=this.geometry.getElementId(t);return n==="line"||n==="area"?s+=" "+e[a.field]:n==="path"&&(s+=" "+e[a.field]+"-"+e[o.field]),s},r.prototype.getCoordinateBBox=function(){var t=this.coord,e=t.start,n=t.end;return new Jr(Math.min(e.x,n.x),Math.min(e.y,n.y),t.getWidth(),t.getHeight())},r}(Ss),Tf=fE,id={};function na(i,r){id[i]=r}function hE(i){return id[i]}var Pf=function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];return function(t,e,n){return i.reduce(function(a,o){return o(a,e,n)},t)}},Lf=function(){return function(i){return i}},ad=function(i){return function(r){var t=Number(r);return isNaN(t)||(0,f.isNil)(i)?r:t.toFixed(i)}},od=function(i){return function(r){return(0,f.isNil)(i)?r:r+" "+i}};function Of(i,r,t){i[t]&&(r[t]=i[t])}var cE=function(){function i(r){this.config=!1,this.plot=r.plot,this.dim=r.dim,this.init()}return i.prototype.init=function(){this.config=!1;var r=this.plot.getPlotTheme();this.themeConfig=r&&r.axis&&r.axis[this.dim],this._needDraw()&&this._styleParser()},i.prototype._styleParser=function(){this.config=(0,V.__assign)({},this.localProps),this._isVisible("line")?this._lineParser():this.config.line=null,this._isVisible("grid")?this._gridParser():this.config.grid=null,this._isVisible("tickLine")?this._tickLineParser():this.config.tickLine=null,this._isVisible("label")?this._labelParser():this.config.label=null,this._isVisible("title")?this._titleParser():this.config.title=null,Of(this.localProps,this.config,"autoHideLabel"),Of(this.localProps,this.config,"autoRotateLabel"),Of(this.localProps,this.config,"autoRotateTitle")},i.prototype._needDraw=function(){var r=this.plot.options,t=r[this.dim+"Axis"]?r[this.dim+"Axis"]:{},e=(0,f.deepMix)({},this.themeConfig,t);return this.localProps=e,!!e.visible},i.prototype._lineParser=function(){this.config.line=this.localProps.line,this.localProps.line.style&&(this.config.line={style:this.localProps.line.style}),this.applyThemeConfig("line")},i.prototype._gridParser=function(){var r=this,t,e,n,a,o,s=(e=(t=this.localProps.grid)===null||t===void 0?void 0:t.line)===null||e===void 0?void 0:e.style,l=(a=(n=this.localProps.grid)===null||n===void 0?void 0:n.line)===null||a===void 0?void 0:a.type,u=(o=this.localProps.grid)===null||o===void 0?void 0:o.alternateColor;(0,f.isFunction)(s)?this.config.grid=function(h,c,v){var x=s(h,c,v);return{line:{type:l,style:(0,f.deepMix)({},(0,f.get)(r.themeConfig,"grid.line.style"),x)},alternateColor:u}}:s&&(this.config.grid={line:{type:l,style:s},alternateColor:u},this.applyThemeConfig("grid"))},i.prototype._tickLineParser=function(){this.config.tickLine=this.localProps.tickLine,this.localProps.tickLine.style&&(this.config.tickLine={style:this.localProps.tickLine.style}),this.applyThemeConfig("tickLine")},i.prototype._labelParser=function(){var r=this.localProps.label,t=r.style,e=(0,V.__rest)(r,["style"]),n=(0,V.__assign)({},e);t&&(n.style=(0,V.__assign)({},this.localProps.label.style)),n.style=(0,f.deepMix)({},(0,f.get)(this.themeConfig,"label.style"),n.style);var a=this.parseFormatter(n);n.formatter=a,this.config.label=n},i.prototype._titleParser=function(){var r=(0,V.__assign)({},this.localProps.title),t=this.localProps.title,e=t.visible,n=t.style,a=t.text;e?(this.config.showTitle=!0,n&&(r.style=n),r.style=(0,f.deepMix)({},(0,f.get)(this.config,"title.style"),r.textStyle),a&&(r.text=a)):this.config.showTitle=!1,this.config.title=r},i.prototype._isVisible=function(r){return!!(this.localProps[r]&&this.localProps[r].visible)},i.prototype.applyThemeConfig=function(r){this.config[r]=(0,f.deepMix)({},(0,f.get)(this.themeConfig,r+".style"),this.config[r])},i.prototype.parseFormatter=function(r){var t=Pf(Lf(),ad(r.precision),od(r.suffix));return r.formatter&&(t=Pf(t,r.formatter)),t},i}(),vE=cE;function yl(i){var r=0;return each(i,function(t){r+=t*t}),Math.sqrt(r)}function If(i,r){return i.x*r.y+i.y*r.x}function AG(i,r){var t=yl(i),e=yl(r),n=If(i,r),a=Math.acos(n/t/e);return a}function TG(i,r){var t=yl(i),e=yl(r),n=If(i,r),a=Math.acos(n/t/e);return t*e*Math.sin(a)}function PG(i,r){var t=i.x,e=i.y,n=i.z,a=r.x,o=r.y,s=r.z,l=e*s-n*o,u=n*a-t*s,h=t*o-e*a;return{x:l,y:u,z:h}}function LG(i,r){return{x:i.x-r.x,y:i.y-r.y}}function ml(i,r,t){t===void 0&&(t=1);var e=[i.x,i.y,t];return Yc.transformMat3(e,e,r),{x:e[0],y:e[1]}}function sd(i,r,t){return i>=r&&i<=t}var dE=.001;function OG(i,r,t,e){var n={x:t.x-i.x,y:t.y-i.y},a={x:r.x-i.x,y:r.y-i.y},o={x:e.x-t.x,y:e.y-t.y},s=a.x*o.y-a.y*o.x,l=s*s,u=a.x*a.x+a.y*a.y,h=o.x*o.x+o.y*o.y,c=null;if(l>dE*u*h){var v=(n.x*o.y-n.y*o.x)/s,x=(n.x*a.y-n.y*a.x)/s;sd(v,0,1)&&sd(x,0,1)&&(c={x:i.x+v*a.x,y:i.y+v*a.y})}return c}function pE(i,r){for(var t=!1,e=0,n=r.length-1;e<r.length;n=e++){var a=r[e].x,o=r[e].y,s=r[n].x,l=r[n].y,u=o>i.y!=l>i.y&&i.x<=(s-a)*(i.y-o)/(l-o)+a;u&&(t=!t)}return t}function xl(i){return i*i}function bl(i,r){return Math.sqrt(xl(i.x-r.x)+xl(i.y-r.y))}function ld(i,r){return Math.sqrt(xl(i.x-r.x)+xl(i.y-r.y))}function ud(i,r,t){var e=bl(r,t);if(e===0)return bl(i,r);var n=((i.x-r.x)*(t.x-r.x)+(i.y-r.y)*(t.y-r.y))/e;n=Math.max(0,Math.min(1,n));var a=bl(i,{x:r.x+n*(t.x-r.x),y:r.y+n*(t.y-r.y)});return Math.sqrt(a)}function fd(i,r){var t=Infinity;(0,f.each)(r,function(h){var c=Math.sqrt(bl(h,i));t>c&&(t=c)});for(var e=0,n=r.length-1;e<r.length;n=e++){var a=r[e].x,o=r[e].y,s=r[n].x,l=r[n].y,u=ud(i,{x:a,y:o},{x:s,y:l});t>u&&(t=u)}return t}function gE(i,r){for(var t=0,e=i;t<e.length;t++){var n=e[t],a=pE(n,r);if(a)return!0}return!1}function hd(i,r){if(gE(i,r))return 0;var t=Infinity,e=Infinity;return(0,f.each)(i,function(n){var a=fd(n,r);t>a&&(t=a)}),(0,f.each)(r,function(n){var a=fd(n,i);e>a&&(e=a)}),Math.min(t,e)}function yE(i){var r=i.getBBox(),t=r.minX,e=r.minY,n=r.maxX-r.minX,a=r.maxY-r.minY,o=i.attr("matrix"),s;o?s=[o[0],o[1],0,o[3],o[4],0,0,0,1]:s=[1,0,0,0,1,0,0,0,1];var l=ml({x:0,y:0},s);l.x+=t,l.y+=e;var u=ml({x:n,y:0},s);u.x+=t,u.y+=e;var h=ml({x:0,y:a},s);h.x+=t,h.y+=e;var c=ml({x:n,y:a},s);c.x+=t,c.y+=e;var v=[l,u,h,c];v.sort(function(ee,Ut){return ee.y-Ut.y});var x=v[0].y,M=v[v.length-1].y,k=[v[0],v[1]],R=[v[2],v[3]],G=k[0].x<k[1].x?k[0]:k[1],N=k[0].x<k[1].x?k[1]:k[0],ot=R[0].x<R[1].x?R[0]:R[1],ut=R[0].x<R[1].x?R[1]:R[0];v.sort(function(ee,Ut){return ee.x-Ut.x});var Mt=v[0].x,zt=v[v.length-1].x,$t={width:zt-Mt,height:M-x,left:Mt,right:zt,top:x,bottom:M,topLeft:G,topRight:N,bottomLeft:ot,bottomRight:ut,centerX:Mt+(zt-Mt)/2,centerY:x+(M-x)/2};return $t}var mE=2;function kf(i){return i.length<5?i:Bf(i,mE)}function Bf(i,r){for(var t,e=-Infinity,n=0,a=i.length-1,o=1;o<a;o++){var s=i[o],l={start:i[0],end:i[a]},u=ud(s,l.start,l.end);u>e&&(e=u,n=o)}if(e>r){var h=Bf(i.slice(0,n+1),r),c=Bf(i.slice(n,i.length),r);t=h.concat(c)}else t=[i[0],i[i.length-1]];return t}function cd(i){var r=(0,f.clone)(i);r.sort(function(e,n){return e-n});var t=Math.floor(r.length/2);return r.length%2?r[t]:(r[t-1]+r[t])/2}function xE(i){var r=0;return(0,f.each)(i,function(t){r+=t}),r/i.length}function vd(i){return Math.ceil(Math.log(i.length)/Math.LN2)+1}function bE(i,r,t,e,n){n===void 0&&(n=2);for(var a=[],o=i;o<=i+t;o+=n)a.push([o,r]);for(var s=r;s<=r+e;s+=n)a.push([i+t,s]);for(var o=i+t;o>=i;o-=n)a.push([o,r+e]);for(var s=r+e;s>=r;s-=n)a.push([i,s]);return a}var wE=function(){function i(r){(0,f.assign)(this,r),this._init()}return i.prototype._init=function(){var r=this.plot.options,t=r.yField,e=r.data,n=this.plot.processData(e);if(!((0,f.isEmpty)(n)||!(0,f.isNumber)(n[0][t]))){var a=this.getDefaultStyle(),o={type:"line",top:!0,start:this.cfg.start,end:this.cfg.end};if(o.style=(0,f.deepMix)({},a.line.style,this.cfg.lineStyle),o.text=(0,f.deepMix)({},a.text,this.cfg.text),this.cfg.type){var s=this._getState(this.cfg.type),l=this.getYScale(),u=(1-l.scale(s))*100+"%",h=["0%",u],c=["100%",u];this.config=(0,f.mix)({start:h,end:c},o)}else{var v=this.cfg,x=v.start,M=v.end;this.config=(0,f.clone)(o);var k=this.getXScale(),R=this.getYScale(),G=(0,f.clone)(x),N=(0,f.clone)(M);(0,f.each)(x,function(ot,ut){(!(0,f.contains)((0,f.toArray)(x[ut]),"%")||(0,f.isNumber)(x[ut]))&&(ut===0?G[ut]=k.scale(x[0])*100+"%":G[ut]=(1-R.scale(x[1]))*100+"%")}),(0,f.each)(M,function(ot,ut){(!(0,f.contains)((0,f.toArray)(M[ut]),"%")||(0,f.isNumber)(M[ut]))&&(ut===0?N[ut]=k.scale(M[0])*100+"%":N[ut]=(1-R.scale(M[1]))*100+"%")}),this.config.start=G,this.config.end=N}}},i.prototype.getYScale=function(){var r=this._getState("min"),t=this._getState("max"),e=(0,Or.getScale)("linear"),n=new e((0,f.mix)({},{min:this.plot.type==="column"?0:r,max:t,nice:!0,values:this.values},this.plot.config.scales[this.plot.options.yField]));return n},i.prototype.getXScale=function(){var r=this.extractXValue();if((0,f.isString)(r[0])){var t=(0,Or.getScale)("cat"),e=new t((0,f.mix)({},{values:r},this.plot.config.scales[this.plot.options.xField]));return e}else{var n=Math.min.apply(Math,r),a=Math.max.apply(Math,r),t=(0,Or.getScale)("linear"),e=new t((0,f.mix)({},{min:n,max:a,nice:!0,values:r},this.plot.config.scales[this.plot.options.xField]));return e}},i.prototype._getState=function(r){if(this.values=this._extractValues(),r==="median")return cd(this.values);if(r==="mean")return xE(this.values);if(r==="max")return Math.max.apply(Math,this.values);if(r==="min")return Math.min.apply(Math,this.values)},i.prototype._extractValues=function(){var r=this.plot.options,t=r.yField,e=[],n=this.plot.processData(r.data);return(0,f.each)(n,function(a){(0,f.isArray)(a[t])?e.push.apply(e,a[t]):e.push(a[t])}),e},i.prototype.extractXValue=function(){var r=this.plot.options,t=r.xField,e=[],n=this.plot.processData(r.data);return(0,f.each)(n,function(a){(0,f.isArray)(a[t])?e.push.apply(e,a[t]):e.push(a[t])}),e},i.prototype.getDefaultStyle=function(){return this.getDefaultTextAlign(),{line:{style:{lineWidth:2,stroke:"#333333",opacity:.7,lineDash:[0,0]}},text:{content:"",offsetY:-5,style:{fontSize:14,stroke:"white",lineWidth:2,textAlign:this.getDefaultTextAlign()}}}},i.prototype.getDefaultTextAlign=function(){var r=this.cfg.text;if(r){if(!r.position||r.position==="start")return"left";if(r.position==="center")return"center";if(r.position==="end")return"right"}},i}(),SE=wE,CE=function(){function i(r){this.config={};var t=r.plot,e=(0,V.__rest)(r,["plot"]);this.plot=t,this.originConfig=e,this.init(r)}return i.prototype.getConfig=function(){return this.config},i.prototype.init=function(r){var t=this;(0,f.assign)(this.config,r),this.config.callback=function(e){return t.parseCallBack(e)}},i.prototype.parseCallBack=function(r){var t=this.originConfig,e=this.plot.getPlotTheme(),n=(0,V.__assign)({},t);return this.parseOffset(t,n),t.position&&((0,f.isFunction)(t.position)?n.position=t.position(r):n.position=t.position),this.parseFormatter(n),t.style&&((0,f.isFunction)(t.style)?n.textStyle=t.style(r):n.textStyle=t.style),n.textStyle=(0,f.deepMix)({},(0,f.get)(e,"label.style"),n.textStyle),t.autoRotate&&(n.autoRotate=t.autoRotate),n},i.prototype.parseOffset=function(r,t){var e=["offset","offsetX","offsetY"],n=0;(0,f.each)(e,function(a){(0,f.has)(r,a)&&(t[a]=r[a],n++)}),n===0&&(0,f.get)(r,"position")==="middle"&&(t.offset=0)},i.prototype.parseFormatter=function(r){var t=this.originConfig;r.content=function(e,n){var a=e[t.fields[0]];return Pf(Lf(),ad(t.precision),od(t.suffix),t.formatter?t.formatter:Lf())(a,e,n)}},i}(),ME=CE,Io,Df;function dd(i,r){Io||pd(i),(0,f.each)(Io,function(t){var e=gd(t,r),n=e.labelData,a=e.con;if(yd(n,a)){var o=TE();t.shape.attr(o)}})}function EE(i,r){Io||pd(i),(0,f.each)(Io,function(t,e){var n=gd(t,r),a=n.labelData,o=n.con;if(yd(a,o)){var s=Df[e],l=AE(s);t.shape.attr(l)}})}function pd(i){var r;Io=[],Df=[];var t=(r=i.view.getController("axis"))===null||r===void 0?void 0:r.getComponents();(0,f.each)(t,function(e){var n=e.component,a=[],o=_E(i,n),s=n.get("labelRenderer").get("group").get("children");if((0,f.each)(s,function(h){h.type==="text"&&(a.push({shape:h}),Df.push(h.attr()))}),o){var l=o.ticks,u=o.field;(0,f.each)(a,function(h,c){h.value=l[c],h.scaleField=u,h.type=o.type})}Io.push.apply(Io,a)})}function _E(i,r){var t=i.options,e="y",n=r.get("position");(n==="bottom"||n==="top")&&(e="x");var a=t[e+"Field"];return i.view.get("scales")[a]}function gd(i,r){var t,e=(t={},t[i.scaleField]=i.value,t),n=(0,f.clone)(r);return i.type==="time"&&(0,f.isObject)(r)&&!(0,f.isFunction)(n.exp)&&(n.exp=new Date(n.exp).getTime()),{labelData:e,con:n}}function AE(i){var r=i.opacity||1;return{opacity:r*.2}}function TE(){return{opacity:1,fontWeight:600,fill:"red"}}function yd(i,r){if(!(0,f.isFunction)(r)){var t=r.name,e=r.exp;return i[t]?(0,f.isFunction)(e)?e(i[t]):i[t]===e:!1}return r(i)}var PE={active:dd,selected:dd,disable:EE},LE=function(i){(0,V.__extends)(r,i);function r(){var t=i.call(this)||this;return t._states={},t._stateStack={},t}return r.prototype.setState=function(t,e){this._stateStack[t]=e,this._onUpdate()},r.prototype.getState=function(t){return this._states[t]},r.prototype.getAllStates=function(){return this._states},r.prototype.clear=function(){this._states={},this._stateStack={},this._changeTimer&&(clearTimeout(this._changeTimer),this._changeTimer=null)},r.prototype._onUpdate=function(){var t=this,e=this._stateStack;this._changeTimer&&(clearTimeout(this._changeTimer),this._changeTimer=null),this._changeTimer=setTimeout(function(){(0,f.each)(e,function(n,a){var o=e[a];(!t._states[a]||t._states[a]!==n)&&(t._states[a]=n,t._triggerEvent(a,o))}),t._stateStack={}},16)},r.prototype._triggerEvent=function(t,e){this.emit(t+":change",{name:t,exp:e})},r}(te.default),OE=LE;function qa(i,r){if(!(0,f.isFunction)(r)){var t=r.name,e=r.exp;return(0,f.isFunction)(e)?e(i[t]):i[t]===e}return r(i)}var IE=function(){function i(r){this.shapeContainers=[],(0,f.assign)(this,r)}return i.prototype.createStateManager=function(){this.stateManager=new OE},i.prototype.bindStateManager=function(r,t){this.stateManager=r,t.setState&&this._updateStateProcess(t.setState),t.onStateChange&&this._stateChangeProcess(t.onStateChange)},i.prototype.defaultStates=function(r){var t=this;(0,f.each)(r,function(e,n){var a=e.condition,o=e.related;t.setState({type:n,condition:a,related:o})})},i.prototype.setState=function(r){var t=this,e=r.type,n=r.condition,a=r.related;this.shapes=this._getShapes(),this.originAttrs=this._getOriginAttrs(),(0,f.each)(this.shapes,function(o,s){var l=o.get("origin").data,u=(0,f.isArray)(l)?l[0]:l;if(qa(u,n)){var h=r.style?r.style:t._getDefaultStateStyle(e,o),c=t.originAttrs[s],v=void 0;(0,f.isFunction)(h)?v=h(c):v=(0,f.mix)({},c,h),o.attr(v),t.setZIndex(e,o)}}),a&&this._parserRelated(e,a,n),this.plot.canvas.draw()},i.prototype._updateStateProcess=function(r){var t=this;(0,f.each)(r,function(e){var n=e.state,a;(0,f.isFunction)(n)?a=function(o){var s=n(o);t.stateManager.setState(s.name,s.exp)}:a=function(){t.stateManager.setState(n.name,n.exp)},e.event?ai(t.plot,t._eventParser(e.event),a):a()})},i.prototype._stateChangeProcess=function(r){var t=this;(0,f.each)(r,function(e){t.stateManager.on(e.name+":change",function(n){e.callback(n,t.plot)})})},i.prototype._getShapes=function(){var r=this,t=[],e=this.plot.view.geometries;return(0,f.each)(e,function(n){var a=n.container;r.shapeContainers.push(a),n.destroyed||t.push.apply(t,n.getShapes())}),t},i.prototype._getOriginAttrs=function(){var r=[];return(0,f.each)(this.shapes,function(t){r.push((0,f.clone)(t.attr()))}),r},i.prototype._eventParser=function(r){var t=r.split(":"),e=this.plot.geometryParser("g2",t[0]),n=t[1];return e+":"+n},i.prototype._getDefaultStateStyle=function(r,t){var e=this.plot.theme,n=this.plot.geometryParser("plot",t.name),a=n+"Style";if(e[a]){var o=e[a][r];return(0,f.isFunction)(o)&&(o=o(t.attr())),o}return{}},i.prototype._parserRelated=function(r,t,e){var n=this;(0,f.each)(t,function(a){if(n.plot[a]){var o=HE(a,r);o(n.plot,e)}})},i.prototype.setZIndex=function(r,t){if(r==="active"||r==="selected"){var e=t.get("parent").get("children");e[e.length-1].setZIndex(0),t.setZIndex(1)}},i.prototype.resetZIndex=function(){(0,f.each)(this.shapeContainers,function(r){var t=r.get("children");t.sort(function(e,n){return e._INDEX-n._INDEX})})},i}(),kE=IE,jo,wl;function md(i,r){jo||xd(i),(0,f.each)(jo,function(t,e){var n=t.get("origin");if(qa(n,r)){var a=wl[e],o=(0,f.mix)({},a,{opacity:1});t.attr(o)}})}function BE(i,r){jo||xd(i),(0,f.each)(jo,function(t,e){var n=t.get("origin");if(qa(n,r)){var a=wl[e],o=DE(a);t.attr(o)}})}function xd(i){jo=[],wl=[];var r=i.view.get("elements");(0,f.each)(r,function(t){var e=t.get("labels");e&&(0,f.each)(e,function(n){jo.push(n),wl.push(n.attr())})})}function DE(i){var r=i.opacity||1;return{opacity:r*.2}}var FE={active:md,selected:md,disable:BE},RE=["xField","yField","angleField"];function bd(i,r){var t=i.options;if(GE(t,r)){var e=t.data;(0,f.each)(e,function(n){if(qa(n,r)){var a=i.view.getXY(n);i.view.on("tooltip:create",function(o){wd(r,o,!1)}),i.view.showTooltip(a)}})}}function NE(i,r){i.view.on("tooltip:change",function(t){wd(r,t,!0)})}function wd(i,r,t){var e=!t,n=(0,f.clone)(r.items);r.items.splice(0),(0,f.each)(n,function(a){var o=a.point._origin;qa(o,i)===e&&r.items.push(a)})}function GE(i,r){var t=YE(i);return!(0,f.isFunction)(r)&&t.indexOf(r.name)}function YE(i){var r=[];return(0,f.each)(RE,function(t){(0,f.has)(i,t)&&r.push(t)}),r}var zE={active:bd,selected:bd,disable:NE},XE={axis:vE,label:ME,guideLine:SE},VE={tooltip:zE,label:FE,axis:PE};function Ni(i,r){var t=XE[i];return new t(r).config}function HE(i,r){return VE[i][r]}var WE=["start","process","end","reset"],jE=function(){function i(r){var t=this.getDefaultCfg();(0,f.assign)(this,t,r),this.canvas=this.view.canvas,this._eventHandlers=[],this._bindEvents()}return i.prototype.getDefaultCfg=function(){return{startEvent:"mousedown",processEvent:"mousemove",endEvent:"mouseup",resetEvent:"dblclick"}},i.prototype._start=function(r){this.preStart(r),this.start(r),this.afterStart(r)},i.prototype.preStart=function(r){},i.prototype.afterStart=function(r){},i.prototype._process=function(r){this.preProcess(r),this.process(r),this.afterProcess(r)},i.prototype.preProcess=function(r){},i.prototype.process=function(r){},i.prototype.afterProcess=function(r){},i.prototype._end=function(r){this.preEnd(r),this.end(r),this.afterEnd(r)},i.prototype.preEnd=function(r){},i.prototype.end=function(r){},i.prototype.afterEnd=function(r){},i.prototype._reset=function(r){this.preReset(r),this.reset(r),this.afterReset(r)},i.prototype.preReset=function(r){},i.prototype.reset=function(r){},i.prototype.afterReset=function(r){},i.prototype._bindEvents=function(){var r=this;(0,f.each)(WE,function(t){var e=r[t+"Event"],n=(0,f.wrapBehavior)(r,"_"+t);r.view.on(e,n),r._eventHandlers.push({type:e,handler:n})})},i.prototype._unbindEvents=function(){var r=this,t=this._eventHandlers;(0,f.each)(t,function(e){r.view.off(e.type,e.handler)})},i.prototype.destroy=function(){this._unbindEvents(),this._reset()},i}(),Ff=jE,UE=function(i){(0,V.__extends)(r,i);function r(t,e,n,a){var o=i.call(this,t)||this;return o.viewLayer=e,o.interactionRange=n,o.interactionConfig=a,o.disposables=[],o}return r.registerInteraction=function(t,e){r.GLOBAL_INTERACTION_MAP[t]=e},r.registerPlotInteraction=function(t,e,n){r.PLOT_INTERACTION_MAP[t]||(r.PLOT_INTERACTION_MAP[t]={}),r.PLOT_INTERACTION_MAP[t][e]=n},r.getInteraction=function(t,e){return e&&r.PLOT_INTERACTION_MAP[e]&&r[e][t]?r.PLOT_INTERACTION_MAP[e][t]:r.GLOBAL_INTERACTION_MAP[t]},r.getInteractionRange=function(t,e){},r.prototype.destroy=function(){(0,f.each)(this.disposables,function(t){t()}),this.disposables=[],this.clear(),i.prototype.destroy.call(this)},r.prototype.getViewLayer=function(){return this.viewLayer},r.prototype.getRange=function(){return this.interactionRange},r.prototype.getInteractionConfig=function(){return this.interactionConfig},r.prototype.addDisposable=function(t){this.disposables.push(t)},r.prototype.render=function(){},r.prototype.start=function(t){},r.GLOBAL_INTERACTION_MAP={},r.PLOT_INTERACTION_MAP={},r}(Ff),Pa=UE,Sd=function(i,r,t,e,n){var a=e[0],o=e[1];n===void 0&&(n=!1);var s=(0,f.groupBy)(t,i),l=n?r.slice(r.length-o,r.length-a):r.slice(a,o);return(0,f.flatten)((0,f.map)(l,function(u){return s[u]||[]}))},Na;(function(i){i.BEFORE_INIT="beforeinit",i.AFTER_INIT="afterinit",i.BEFORE_RENDER="beforerender",i.AFTER_RENDER="afterrender",i.BEFORE_CHANGE_DATA="beforechangedata",i.AFTER_CHANGE_DATA="afterchangedata"})(Na||(Na={}));var Sl=4,Cd=8,ZE=32,KE=20,$E=999,Cl=function(i){i===void 0&&(i={});var r=(0,V.__assign)({type:"horizontal",categorySize:ZE,width:Cd,height:Cd,padding:[0,0,0,0]},i);return i.padding||(r.padding=r.type==="horizontal"?[Sl,0,Sl,0]:[0,Sl,0,Sl]),r},QE=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.onChangeFn=(0,f.throttle)(t.onChange.bind(t),20,{leading:!0}),t}return r.getInteractionRange=function(t,e){var n=Cl(e),a=n.padding,o=a[0],s=a[1],l=a[2],u=a[3];return n.type==="horizontal"?new Jr(t.minX,t.maxY-n.height-o-l,t.width,n.height+o+l):new Jr(t.maxX-n.width-u-s,t.minY,n.width+u+s,t.height)},r.prototype.render=function(){var t=this,e=this.getViewLayer(),n=this.view;this.ratio=0,this.thumbOffset=0;var a=function(){var s=t.view.padding;s==="auto"||(0,f.isEqual)(s,[0,0,0,1])||(t.trackLen?t.renderScrollbar():(t.measureScrollBar(),t.changeViewData(t.getScrollRange(),!0)))},o=function(){t.trackLen=0};n.on(wn.VIEW_LIFE_CIRCLE.AFTER_PAINT,a),this.addDisposable(function(){return n.off(wn.VIEW_LIFE_CIRCLE.AFTER_PAINT,a)}),n.on(wn.VIEW_LIFE_CIRCLE.AFTER_RENDER,a),this.addDisposable(function(){return n.off(wn.VIEW_LIFE_CIRCLE.AFTER_RENDER,a)}),e.on(Na.BEFORE_CHANGE_DATA,o),this.addDisposable(function(){return e.off(Na.BEFORE_CHANGE_DATA,o)})},r.prototype.start=function(){},r.prototype.clear=function(){this.scrollbar&&(this.scrollbar.destroy(),this.scrollbar=null),this.container&&(this.container.remove(!0),this.container=null),this.trackLen=null,this.thumbLen=null},r.prototype.renderScrollbar=function(){var t=Cl(this.getInteractionConfig()),e=this.getRange(),n=t.type!=="vertical",a=this.view.coordinateBBox,o=t.padding,s=o[0],l=o[3],u=n?{x:a.minX+l,y:e.minY+s}:{x:e.minX+l,y:a.minY+s};this.scrollbar?(this.scrollbar.update({trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:this.thumbOffset,x:u.x,y:u.y}),this.scrollbar.render()):(this.container=this.canvas.addGroup(),this.scrollbar=new nn.Scrollbar({container:this.container,x:u.x,y:u.y,isHorizontal:n,trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:this.ratio*this.trackLen}),this.scrollbar.init(),this.scrollbar.render(),this.scrollbar.get("group").set("zIndex",$E),this.scrollbar.on("scrollchange",this.onChangeFn))},r.prototype.measureScrollBar=function(){var t=Cl(this.getInteractionConfig()),e=t.padding,n=e[0],a=e[1],o=e[2],s=e[3],l=t.type!=="vertical",u=this.view.coordinateBBox,h=this.view.getXScale(),c=this.view.getYScales().filter(function(v){return v});this.cnt=h.values.length,this.xScaleCfg={field:h.field,values:h.values||[]},this.yScalesCfg=c,this.step=Math.floor((l?u.width:u.height)/t.categorySize),this.trackLen=l?u.width-s-a:u.height-n-o,this.thumbLen=Math.max(this.trackLen*(0,f.clamp)(this.step/h.values.length,0,1),KE)},r.prototype.getScrollRange=function(){var t=Math.floor((this.cnt-this.step)*(0,f.clamp)(this.ratio,0,1)),e=Math.min(t+this.step,this.cnt);return[t,e]},r.prototype.changeViewData=function(t,e){var n=this,a=t[0],o=t[1],s=Cl(this.getInteractionConfig()),l=this.getViewLayer(),u=l.options.meta,h=l.getData(),c=Sd(this.xScaleCfg.field,this.xScaleCfg.values,h,[a,o],s.type==="vertical");this.yScalesCfg.forEach(function(v){var x=(0,f.get)(u,v.field)||{};n.view.scale(v.field,(0,V.__assign)((0,V.__assign)({formatter:v.formatter},x),{type:v.type,min:v.min,max:v.max}))}),e?(this.view.data(c),this.view.render()):this.view.changeData(c)},r.prototype.onChange=function(t){var e=t.ratio,n=t.thumbOffset;this.ratio=e,this.thumbOffset=n;var a=this.view.getOptions().animate;this.view.animate(!1),this.changeViewData(this.getScrollRange(),!0),this.view.animate(a),this.renderScrollbar()},r}(Pa),JE=QE,Ml=4,Md=16,Rf=function(i){i===void 0&&(i={});var r=(0,V.__assign)({type:"horizontal",start:0,end:1,width:void 0,height:void 0,padding:[0,0,0,0],backgroundStyle:{},foregroundStyle:{},handlerStyle:{},textStyle:{},trendCfg:{}},i);i.padding||(r.padding=r.type==="horizontal"?[Ml,0,Ml,0]:[0,Ml,0,Ml]),i.height||(r.height=Md),i.width||(r.width=Md);var t=(0,f.clamp)(Math.min(r.start,r.end),0,1),e=(0,f.clamp)(Math.max(r.start,r.end),0,1);return r.start=t,r.end=e,r},qE=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.onChangeFn=(0,f.throttle)(t.onChange.bind(t),20,{leading:!0}),t}return r.getInteractionRange=function(t,e){var n=Rf(e),a=n.padding||[0,0,0,0],o=a[0],s=a[1],l=a[2],u=a[3];if(n.type==="horizontal"){var h=new Jr(t.minX,t.maxY-n.height-o-l,t.width,n.height+o+l);return h}else return new Jr(t.maxX-n.width-u-s,t.minY,n.width+u+s,t.height)},r.prototype.render=function(){var t=this,e=this.getViewLayer(),n=this.view,a=Rf(this.getInteractionConfig());this.curStart=a.start,this.curEnd=a.end,this.xScaleCfg=void 0;var o=function(){var s=t.view.padding;if(!(s==="auto"||(0,f.isEqual)(s,[0,0,0,1]))&&!(0,f.isEmpty)(e.options.data))if(t.xScaleCfg)t.renderSlider();else{var l=n.getXScale();t.xScaleCfg={field:l.field,values:l.values||[]},n.data(t.getSliderData(t.curStart,t.curEnd)),n.render()}};n.on(wn.VIEW_LIFE_CIRCLE.AFTER_PAINT,o),this.addDisposable(function(){return n.off(wn.VIEW_LIFE_CIRCLE.AFTER_PAINT,o)}),n.on(wn.VIEW_LIFE_CIRCLE.AFTER_RENDER,o),this.addDisposable(function(){return n.off(wn.VIEW_LIFE_CIRCLE.AFTER_RENDER,o)})},r.prototype.start=function(){},r.prototype.clear=function(){this.slider&&(this.slider.destroy(),this.slider=null),this.container&&(this.container.remove(!0),this.container=null)},r.prototype.renderSlider=function(){this.slider?(this.slider.update(this.getSliderConfig()),this.slider.render()):(this.container=this.canvas.addGroup(),this.slider=new nn.Slider((0,V.__assign)((0,V.__assign)({},this.getSliderConfig()),{container:this.container})),this.slider.init(),this.slider.render(),this.slider.on("sliderchange",this.onChangeFn))},r.prototype.getSliderConfig=function(){var t=this.view,e=t.coordinateBBox,n=this.getRange(),a=Rf(this.getInteractionConfig()),o=a||{},s=o.padding,l=s===void 0?[0,0,0,0]:s,u=o.backgroundStyle,h=o.foregroundStyle,c=o.handlerStyle,v=o.textStyle,x=o.trendCfg,M=x===void 0?{}:x,k=l[0],R=l[1],G=l[2],N=l[3],ot=this.getSliderMinMaxText(this.curStart,this.curEnd),ut=ot.minText,Mt=ot.maxText,zt={x:e.minX+N,y:n.minY+k,width:e.width-N-R,height:n.height-k-G,start:this.curStart,end:this.curEnd,minText:ut,maxText:Mt,backgroundStyle:u,foregroundStyle:h,handlerStyle:c,textStyle:v,trendCfg:(0,V.__assign)((0,V.__assign)({isArea:!1,smooth:!1},M),{data:this.getSliderTrendData()})};return zt},r.prototype.getSliderTrendData=function(){var t=this.getViewLayer().options,e=t.data,n=t.yField;return(0,f.map)(e,function(a){return a[n]})},r.prototype.getSliderData=function(t,e){var n=this.getViewLayer().getData(),a=(0,f.size)(this.xScaleCfg.values),o=Math.round(t*a),s=Math.max(o+1,Math.round(e*a));return Sd(this.xScaleCfg.field,this.xScaleCfg.values,n,[o,s])},r.prototype.getSliderMinMaxText=function(t,e){var n=this.getViewLayer().options,a=n.data,o=a===void 0?[]:a,s=n.xField,l=(0,f.size)(o),u=Math.round(t*l),h=Math.max(u+1,Math.round(e*l)),c=o.slice(u,h);return{minText:c.length>0?(0,f.head)(c)[s]:"",maxText:c.length>0?(0,f.last)(c)[s]:""}},r.prototype.onChange=function(t){var e=this.view,n=(0,f.clamp)(Math.min(t[0],t[1]),0,1),a=(0,f.clamp)(Math.max(t[0],t[1]),0,1),o=this.getSliderData(n,a),s=this.getSliderMinMaxText(n,a),l=s.minText,u=s.maxText;this.curStart=n,this.curEnd=a,this.slider.update({start:n,end:a,minText:l,maxText:u}),this.slider.render();var h=e.getOptions().animate;e.animate(!1),e.data(o),e.render(),e.animate(h)},r}(Pa),t_=qE,e_=function(i){(0,V.__extends)(r,i);function r(t){return i.call(this,(0,f.deepMix)({},t))||this}return r.prototype.renderInner=function(t){var e=this;this.initElement(t),this.updateElement(),this.renderMarker(),t.off("click"),t.on("click",function(){e.emit("click")})},r.prototype.destroy=function(){this.group.off(),i.prototype.destroy.call(this)},r.prototype.initElement=function(t){this.circle=t.addShape("circle",{attrs:{x:this.config.x,y:this.config.y,r:this.config.r,fill:"#607889"}}),this.startMarker=t.addShape("path",{attrs:{path:this.getStartMarkerPath(),fill:"#ffffff"}}),this.pauseGroupMarker=t.addGroup();var e=1/4*this.config.r,n=.5*this.config.r*Math.sqrt(3);this.pauseLeftMarker=this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x-(1/4+1/8)*this.config.r,y:this.config.y-n/2,width:e,height:n,fill:"#ffffff"}}),this.pauseRightMarker=this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x+1/8*this.config.r,y:this.config.y-n/2,width:e,height:n,fill:"#ffffff"}})},r.prototype.updateElement=function(){this.circle.attr("x",this.config.x),this.circle.attr("y",this.config.y),this.circle.attr("r",this.config.r),this.startMarker.attr("path",this.getStartMarkerPath());var t=1/4*this.config.r,e=.5*this.config.r*Math.sqrt(3);this.pauseLeftMarker.attr("x",this.config.x-(1/4+1/8)*this.config.r),this.pauseLeftMarker.attr("y",this.config.y-e/2),this.pauseLeftMarker.attr("width",t),this.pauseLeftMarker.attr("height",e),this.pauseRightMarker.attr("x",this.config.x+1/8*this.config.r),this.pauseRightMarker.attr("y",this.config.y-e/2),this.pauseRightMarker.attr("width",t),this.pauseRightMarker.attr("height",e)},r.prototype.renderMarker=function(){this.config.isPlay?(this.startMarker.hide(),this.pauseGroupMarker.show()):(this.startMarker.show(),this.pauseGroupMarker.hide())},r.prototype.getStartMarkerPath=function(){var t=.5*this.config.r*Math.sqrt(3);return[["M",this.config.x-t/Math.sqrt(3)/2,this.config.y-t/2],["L",this.config.x+t/Math.sqrt(3),this.config.y],["L",this.config.x-t/Math.sqrt(3)/2,this.config.y+t/2]]},r}(Ss),r_=e_,Ed="timelinestart",n_="timelinechange",_d="timelineend",i_="timelineupdate",a_=20,o_=20,s_=function(i){(0,V.__extends)(r,i);function r(t){var e=i.call(this,(0,f.deepMix)({},{speed:1,loop:!1},t))||this;return e.onTimeSelectMouseMove=function(n){n.stopPropagation(),n.preventDefault();var a=(0,f.get)(n,"touches.0.pageX",n.pageX),o=a-e.prevX;e.setTimeSelectX(o),e.prevX=a},e.onTimeSelectMouseUp=function(){e.syncCurrnentTick(),e.emit(_d,null);var n=e.getCanvas().get("container");n&&(n.removeEventListener("mousemove",e.onTimeSelectMouseMove),n.removeEventListener("mouseup",e.onTimeSelectMouseUp),n.removeEventListener("mouseleave",e.onTimeSelectMouseUp),n.removeEventListener("touchmove",e.onTimeSelectMouseMove),n.removeEventListener("touchend",e.onTimeSelectMouseUp),n.removeEventListener("touchcancel",e.onTimeSelectMouseUp))},e.onTimeSelectMouseDown=function(n){var a=n.originalEvent;a.stopPropagation(),a.preventDefault(),e.isPlay===!1?e.emit(Ed,null):(e.isPlay=!1,e.changePlayStatus(!1)),e.prevX=(0,f.get)(a,"touches.0.pageX",a.pageX);var o=e.getCanvas().get("container");o.addEventListener("mousemove",e.onTimeSelectMouseMove),o.addEventListener("mouseup",e.onTimeSelectMouseUp),o.addEventListener("mouseleave",e.onTimeSelectMouseUp),o.addEventListener("touchmove",e.onTimeSelectMouseMove),o.addEventListener("touchend",e.onTimeSelectMouseUp),o.addEventListener("touchcancel",e.onTimeSelectMouseUp)},e}return r.prototype.renderInner=function(t){var e=this.config,n=e.ticks,a=e.defaultCurrentTick;n&&n.length&&(this.currentTick=this.config.ticks.includes(a)?a:n[0],this.renderPlayButton(t),this.renderTimeLine(t),this.renderTimeSelect(t,this.currentTick),this.initEvent())},r.prototype.update=function(t){i.prototype.update.call(this,t),this.emit(i_,this.currentTick)},r.prototype.destroy=function(){i.prototype.destroy.call(this),this.timeLineButton.destroy(),this.timeLineButton.off(),this.timeSelect.off(),this.playHandler&&window.cancelAnimationFrame(this.playHandler)},r.prototype.renderPlayButton=function(t){var e=this.config,n=e.height,a=e.x,o=e.y,s=.8,l=n/2*s;this.timeLineButton?this.timeLineButton.update({x:a+l,y:o+l+n*(1-s)/2,r:l}):(this.timeLineButton=new r_({container:t,x:a+l,y:o+l+n*(1-s)/2,r:l,isPlay:this.isPlay}),this.timeLineButton.init()),this.timeLineButton.render()},r.prototype.getTimeLinePath=function(){var t=this.timeLine,e=t.x,n=t.y,a=t.width,o=t.height,s=o/2;return a>0?"M"+e+", "+n+("A"+s+","+s+" 90 0,0 "+e+","+(n+o))+("L"+(e+a)+", "+(n+o))+("A"+s+","+s+" 90 0,0 "+(e+a)+","+n)+("L"+e+", "+n):[]},r.prototype.renderTimeLine=function(t){var e=this,n=this.config,a=n.width,o=n.height,s=n.ticks,l=n.x,u=n.y;this.timeLine||(this.timeLine={}),this.timeLine.height=o*.15,this.timeLine.x=l+o+a_,this.timeLine.y=u+(o/2-this.timeLine.height/2),this.timeLine.width=a-this.timeLine.x-o_,this.timeLine&&this.timeLine.shape?this.timeLine.shape.attr("path",this.getTimeLinePath()):this.timeLine.shape=t.addShape("path",{attrs:{path:this.getTimeLinePath(),fill:"#607889",opacity:.2}});var h=this.timeLine.width/(s.length-1);this.tickPosList=[],this.timeLine.textList&&this.timeLine.textList.length&&this.timeLine.textList.forEach(function(v){v.destroy()});var c=-Infinity;this.timeLine.textList=s.map(function(v,x){e.tickPosList.push(e.timeLine.x+x*h);var M=t.addShape("text",{attrs:{x:e.timeLine.x+x*h,y:e.timeLine.y+e.timeLine.height+5,text:v,textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35}}),k=M.getBBox();return k.minX>c?(M.show(),c=k.minX+k.width+10):M.hide(),M})},r.prototype.renderTimeSelect=function(t,e){var n=this.config,a=n.ticks,o=n.height,s=this.timeLine.width/(a.length-1),l=(0,f.findIndex)(a,function(v){return v===e}),u=this.timeLine.x+l*s,h=this.config.y+o/2,c=o*.15;this.timeSelect?(this.timeSelect.attr("x",u),this.timeSelect.attr("y",h),this.timeSelect.attr("r",c)):this.timeSelect=t.addShape("circle",{attrs:{x:u,y:h,r:c,fill:"#607889"}}),this.timeSelectText?(this.timeSelectText.attr("x",u),this.timeSelectText.attr("y",h-o*.15-14),this.timeSelectText.attr("text",this.currentTick)):this.timeSelectText=t.addShape("text",{attrs:{x:u,y:h-o*.15-14,text:this.currentTick,textAlign:"center",textBaseline:"top",fill:"#607889"}})},r.prototype.adjustTickIndex=function(t){for(var e=0;e<this.tickPosList.length-1;e++)if(this.tickPosList[e]<=t&&t<=this.tickPosList[e+1])return Math.abs(this.tickPosList[e]-t)<Math.abs(t-this.tickPosList[e+1])?e:e+1},r.prototype.setTimeSelectX=function(t){var e=this.timeSelect.attr("x")+t;e<this.timeLine.x&&(e=this.timeLine.x),e>this.timeLine.x+this.timeLine.width&&(e=this.timeLine.x+this.timeLine.width,this.isPlay&&(this.config.loop?this.timeSelect.attr("x")===this.timeLine.x+this.timeLine.width&&(e=this.timeLine.x):(this.isPlay=!1,this.changePlayStatus()))),this.timeSelect.attr("x",e),this.timeSelectText.attr("x",e);var n=this.adjustTickIndex(e);this.currentTick!==this.config.ticks[n]&&(this.currentTick=this.config.ticks[n],this.timeSelectText.attr("text",this.currentTick),this.emit(n_,this.currentTick)),this.getCanvas().draw()},r.prototype.syncCurrnentTick=function(){var t=this,e=this.config.ticks,n=this.timeLine.width/(e.length-1),a=(0,f.findIndex)(e,function(s){return s===t.currentTick}),o=this.timeLine.x+a*n;this.timeSelect.attr("x",o),this.timeSelectText.attr("x",o),this.getCanvas().draw()},r.prototype.startPlay=function(){var t=this;return window.requestAnimationFrame(function(){var e=t.config,n=e.speed,a=e.ticks,o=t.timeLine.width,s=o/a.length,l=s/(n*1e3/60);t.setTimeSelectX(l),t.isPlay&&(t.playHandler=t.startPlay())})},r.prototype.changePlayStatus=function(t){t===void 0&&(t=!0),this.timeLineButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.emit(Ed,null)):this.playHandler&&(window.cancelAnimationFrame(this.playHandler),t&&(this.syncCurrnentTick(),this.emit(_d,null))),this.getCanvas().draw()},r.prototype.initEvent=function(){var t=this;this.timeLineButton.off("click"),this.timeLineButton.on("click",function(){t.isPlay=!t.isPlay,t.changePlayStatus()}),this.timeSelect.off("mousedown"),this.timeSelect.on("mousedown",function(e){t.onTimeSelectMouseDown(e)})},r}(Ss),l_=s_,u_=40;function Ad(i){return(0,V.__assign)({loop:!1,auto:!0,height:u_,padding:[0,20,0,0],speed:2},i)}var f_=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.onChangeFn=(0,f.throttle)(t.onChange.bind(t),20,{leading:!0}),t}return r.getInteractionRange=function(t,e){var n=Ad(e),a=n.padding[0],o=n.padding[2];return new Jr(t.minX,t.maxY-n.height-a-o,t.width,n.height+a+o)},r.prototype.setAnimate=function(t){var e=this.view.geometries;this.view.animate(t),e.forEach(function(n){n.animate(t)})},r.prototype.start=function(){},r.prototype.renderTimeLine=function(){var t=this;this.config=Ad(this.getInteractionConfig());var e=this.view.viewBBox,n=this.config,a=n.loop,o=n.padding,s=n.speed,l=o[0],u=o[1],h=o[2],c=o[3],v=this.getRange(),x=this.getTicks(),M=e.width-c-u,k={x:e.minX+c,y:v.tl.y+l,width:M,height:v.height-l-h,loop:a,ticks:x,speed:s,defaultCurrentTick:x[0]};this.timeline?(0,f.isEqual)(k,this.timeLineConfig)||(this.timeLineConfig=k,this.timeline.update(k)):(this.container=this.canvas.addGroup(),this.timeline=new l_((0,V.__assign)({container:this.container},k)),this.timeline.init(),this.timeline.render(),this.timeline.on("timelinestart",function(){t.originAnimation=t.view.getOptions().animate,t.setAnimate(!0)}),this.timeline.on("timelineend",function(){t.setAnimate(t.originAnimation)}),this.timeline.on("timelinechange",this.onChangeFn),this.timeline.on("timelineupdate",this.onChange.bind(this)),this.view.data(this.getFilterData(x[0])),this.timeLineConfig=k)},r.prototype.onChange=function(t){var e=this.getFilterData(t);this.view.changeData(e)},r.prototype.getFilterData=function(t){var e=this.config.field,n=this.getViewLayer().options.data;return n.filter(function(a){return a[e]===t})},r.prototype.getTicks=function(){var t=this.config.field,e=this.getViewLayer().options.data;return(0,f.uniq)(e.map(function(n){return n[t]}))},r.prototype.render=function(){var t=this;this.firstRender=!0,this.view.on(wn.VIEW_LIFE_CIRCLE.BEFORE_RENDER,function(){t.renderTimeLine()}),this.view.on(wn.VIEW_LIFE_CIRCLE.BEFORE_PAINT,function(){t.renderTimeLine()}),this.view.on(wn.VIEW_LIFE_CIRCLE.AFTER_PAINT,function(){t.config.auto&&t.firstRender&&(t.timeline.isPlay=!0,t.timeline.changePlayStatus()),t.firstRender=!1}),this.view.on(wn.VIEW_LIFE_CIRCLE.AFTER_RENDER,function(){t.config.auto&&t.firstRender&&(t.timeline.isPlay=!0,t.timeline.changePlayStatus()),t.firstRender=!1})},r.prototype.clear=function(){this.timeline&&(this.timeline.destroy(),this.timeline=null),this.container&&(this.container.remove(!0),this.container=null)},r}(Pa),h_=f_;function c_(i,r){var t=[1,0,0,0,1,0,0,0,1],e=Ve.transform(t,r);i.setMatrix(e)}function Uo(i,r){var t=r?(0,f.clone)(r):[1,0,0,0,1,0,0,0,1];return Ve.transform(t,i)}function Td(i,r,t,e){var n=e?(0,f.clone)(e):[1,0,0,0,1,0,0,0,1];n[6]=r,n[7]=t,i.setMatrix(n)}function v_(i,r,t){Wv.translate(i,r,t)}function IG(i,r){Util.rotate(i,r)}var d_=document.createElement("canvas"),Pd=d_.getContext("2d"),El=(0,f.memoize)(function(i,r){r===void 0&&(r={});var t=r.fontSize,e=r.fontFamily,n=r.fontWeight,a=r.fontStyle,o=r.fontVariant;return Pd.font=[a,o,n,t+"px",e].join(" "),Pd.measureText((0,f.isString)(i)?i:"").width},function(i,r){return r?(0,V.__spreadArrays)([i],(0,f.values)(r)).join(""):i}),Ld=function(i,r,t){var e=16,n=El("...",t),a;(0,f.isString)(i)?a=i:a=(0,f.toString)(i);var o=r,s=[],l,u;if(El(i,t)<=r)return i;for(;l=a.substr(0,e),u=El(l,t),!(u+n>o&&u>o);)if(s.push(l),o-=u,a=a.substr(e),!a)return s.join("");for(;l=a.substr(0,1),u=El(l,t),!(u+n>o);)if(s.push(l),o-=u,a=a.substr(1),!a)return s.join("");return s.join("")+"..."},jn;(function(i){i.TOOLTIP_INDICATOR_INNER="tooltip_indicator-inner",i.TOOLTIP_INDICATOR_TITLE="tooltip_indicator-title",i.TOOLTIP_INDICATOR_BODY="tooltip_indicator-body",i.TOOLTIP_INDICATOR_ITEM_GROUP="tooltip_indicator-item-group",i.TOOLTIP_INDICATOR_ITEM_BACKGROUND="tooltip_indicator-item-background",i.TOOLTIP_INDICATOR_ITEM_LINE="tooltip_indicator-item-line",i.TOOLTIP_INDICATOR_ITEM_TITLE="tooltip_indicator-item-title",i.TOOLTIP_INDICATOR_ITEM_BODY="tooltip_indicator-item-body",i.TOOLTIP_INDICATOR_ITEM_VALUE_GROUP="tooltip_indicator-item-value-group",i.TOOLTIP_INDICATOR_ITEM_NAME="tooltip_indicator-item-name",i.TOOLTIP_INDICATOR_ITEM_VALUE="tooltip_indicator-item-value"})(jn||(jn={}));var _l;(function(i){i.ON_SELECT_ITEM="onSelectItem"})(_l||(_l={}));var vo;(function(i){i[i.LARGE=12]="LARGE",i[i.NORMAL=8]="NORMAL",i[i.SMALL=4]="SMALL"})(vo||(vo={}));var p_=160,g_=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.curX=0,t.curY=0,t.offsetX=0,t.scrollWidth=0,t.onBodyGroupMousemove=function(e){var n=m_(e.target,function(o){return o.get("name")===jn.TOOLTIP_INDICATOR_ITEM_GROUP});if(n){var a=n.get("delegateObject");t.doSelectItem(a.item.id)}},t.onWheel=function(e){var n=t.config.width,a=n===void 0?0:n,o=e.deltaX,s=Math.min(t.scrollWidth-a,0)-(t.scrollWidth/2+Math.max(0,(t.scrollWidth-a)/2)),l=Math.max(t.scrollWidth-a,0)+t.scrollWidth/2+Math.max(0,(t.scrollWidth-a)/2),u=(0,f.clamp)(t.offsetX+o,s,l);u!==t.offsetX&&(v_(t.bodyGroup,t.offsetX-u,0),t.offsetX=u)},t}return r.prototype.destroy=function(){this.offEvents(),i.prototype.destroy.call(this)},r.prototype.selectItem=function(t){this.doSelectItem(t)},r.prototype.resetSelect=function(){this.doSelectItem(this.selectedItemId)},r.prototype.initConfig=function(t){var e,n=t.theme,a=n===void 0?{}:n,o={x:0,y:0,title:{text:"",spacingY:vo.NORMAL,style:{}},line:{spacingX:vo.SMALL,width:2,style:{}},itemTitle:{spacingX:0,spacingY:vo.SMALL,style:{}},itemName:{spacingX:vo.NORMAL,spacingY:vo.SMALL,style:{}},itemValue:{style:{}},itemBackground:{style:{opacity:0,fill:"#000"}},itemSpacing:vo.LARGE};this.config=(0,f.deepMix)({},(e=a==null?void 0:a.components)===null||e===void 0?void 0:e.tooltipIndicator,o,t),this.selectedItemId=this.config.selectedItem},r.prototype.renderInner=function(t){var e=this;this.resetRender();var n=this.config,a=n.items,o=n.x,s=n.y,l=[],u=t.addGroup({name:jn.TOOLTIP_INDICATOR_INNER});this.renderTitle(u),this.bodyGroup=u.addGroup({name:jn.TOOLTIP_INDICATOR_BODY}),a==null||a.forEach(function(h,c){l.push(e.renderItem(e.bodyGroup,h,c))}),this.layoutItems(u),Td(u,o,s),this.applyClip(t),this.bindEvents(u)},r.prototype.renderTitle=function(t){var e=this.config.title;if(e==null?void 0:e.text){var n=t.addShape({type:"text",name:jn.TOOLTIP_INDICATOR_TITLE,attrs:(0,V.__assign)({text:e==null?void 0:e.text,textAlign:"left",textBaseline:"top"},(e==null?void 0:e.style)||{})}),a=n.getBBox();return this.curY+=a.height,this.curY+=e.spacingY||0,n}},r.prototype.renderItem=function(t,e,n){var a=this.config.itemBackground,o=t.addGroup({name:jn.TOOLTIP_INDICATOR_ITEM_GROUP,delegateObject:{item:e,index:n}}),s=this.curX,l=this.curY,u=o.addShape({name:jn.TOOLTIP_INDICATOR_ITEM_BACKGROUND,type:"rect",attrs:(0,V.__assign)({x:this.curX,y:this.curY,width:1,height:1},a.style||{})}),h=this.renderLine(o,e);this.renderItemTitle(o,e),this.renderItemValues(o,e);var c=o.getBBox();return h.attr({y2:h.attr("y1")+c.height}),this.curX=s+c.width,this.curX+=this.config.itemSpacing||0,u.attr({width:this.curX-s-u.attr("lineWidth")*2,height:this.curY-l-u.attr("lineWidth")*2}),this.curY=l,o},r.prototype.renderLine=function(t,e){var n=this.config.line,a=n.width||2,o=(0,V.__assign)({x1:this.curX+a/2,y1:this.curY,x2:this.curX+a/2,y2:this.curY,lineWidth:a,stroke:e.color},(n==null?void 0:n.style)||{}),s=t.addShape({name:jn.TOOLTIP_INDICATOR_ITEM_LINE,type:"line",attrs:o}),l=s.getBBox();return this.curX+=l.width,this.curX+=n.spacingX||0,s},r.prototype.renderItemTitle=function(t,e){var n=this.config.itemTitle,a=Ld(e.title,p_,n.style||{}),o=t.addShape({name:jn.TOOLTIP_INDICATOR_ITEM_TITLE,type:"text",attrs:(0,V.__assign)({x:this.curX,y:this.curY,textAlign:"left",textBaseline:"top",text:a},n.style||{})}),s=o.getBBox();return this.curY+=s.height,this.curY+=n.spacingY||0,o},r.prototype.renderItemValues=function(t,e){var n=this,a,o=t.addGroup({name:jn.TOOLTIP_INDICATOR_ITEM_BODY}),s=this.curX;return(a=e.values)===null||a===void 0||a.forEach(function(l,u){var h=o.addGroup({name:jn.TOOLTIP_INDICATOR_ITEM_VALUE_GROUP,delegateObject:{item:e,valueIndex:u}});n.curX=s,n.renderItemValueName(h,l),n.renderItemValueValue(h,l)}),this.layoutItemValues(o),o},r.prototype.renderItemValueName=function(t,e){var n=this.config.itemName;if(e.name){var a=t.addShape({name:jn.TOOLTIP_INDICATOR_ITEM_NAME,type:"text",attrs:(0,V.__assign)({x:this.curX,y:this.curY,textAlign:"left",textBaseline:"top",text:e.name},n.style||{})}),o=a.getBBox();return e.wrapLine?(this.curY+=o.height,this.curY+=n.spacingY||0):(this.curX+=o.width,this.curX+=n.spacingX||0),a}},r.prototype.renderItemValueValue=function(t,e){var n=this.config,a=n.itemName,o=n.itemValue,s=t.addShape({name:jn.TOOLTIP_INDICATOR_ITEM_VALUE,type:"text",attrs:(0,V.__assign)({x:this.curX,y:this.curY,textAlign:"left",textBaseline:"top",text:e.value},o.style||{})}),l=s.getBBox();return this.curY+=l.height,this.curY+=a.spacingY||0,s},r.prototype.layoutItems=function(t){var e=t.findAllByName(jn.TOOLTIP_INDICATOR_BODY)[0],n=t.findAllByName(jn.TOOLTIP_INDICATOR_ITEM_GROUP);if(!(!e||n.length===0)){var a=e.getBBox();this.scrollWidth=a.width}},r.prototype.layoutItemValues=function(t){var e=t.findAllByName(jn.TOOLTIP_INDICATOR_ITEM_VALUE_GROUP),n=e.map(function(l){return Jr.fromBBoxObject(l.getBBox())}),a=t.findAllByName(jn.TOOLTIP_INDICATOR_ITEM_VALUE),o=a.map(function(l){return Jr.fromBBoxObject(l.getBBox())}),s=Math.max.apply(Math,o.map(function(l){return l.maxX}));e.forEach(function(l,u){var h=n[u],c=l.findAllByName(jn.TOOLTIP_INDICATOR_ITEM_NAME)[0],v=l.findAllByName(jn.TOOLTIP_INDICATOR_ITEM_VALUE)[0];if(c&&v){var x=Jr.fromBBoxObject(c.getBBox()),M=Jr.fromBBoxObject(v.getBBox());x.height<h.height&&c.attr("y",c.attr("y")+(h.height-x.height)/2),M.height<h.height&&v.attr("y",v.attr("y")+(h.height-M.height)/2),M.maxX<s&&v.attr("x",v.attr("x")+s-M.maxX)}})},r.prototype.applyClip=function(t){var e=this.config,n=e.x,a=e.y,o=e.width,s=e.height,l=t.getBBox();(o||s)&&t.setClip({type:"rect",attrs:{x:n,y:a,width:o||l.width,height:s||l.height}})},r.prototype.doSelectItem=function(t){var e=this,n=this.getGroup(),a=n.findAllByName(jn.TOOLTIP_INDICATOR_ITEM_GROUP);t!==this.selectedItemId?(a.forEach(function(o){var s=o.get("delegateObject");s&&e.applyItemStyle(o,s.item.id===t?"selected":"inactive")}),this.selectedItemId=t):(a.forEach(function(o){e.applyItemStyle(o)}),this.selectedItemId=void 0),this.emit(_l.ON_SELECT_ITEM,this.selectedItemId)},r.prototype.applyItemStyle=function(t,e){var n=this.config,a=n.line,o=n.itemTitle,s=n.itemName,l=n.itemValue,u=t.findAllByName(jn.TOOLTIP_INDICATOR_ITEM_LINE)[0],h=t.findAllByName(jn.TOOLTIP_INDICATOR_ITEM_TITLE)[0],c=t.findAllByName(jn.TOOLTIP_INDICATOR_ITEM_NAME),v=t.findAllByName(jn.TOOLTIP_INDICATOR_ITEM_VALUE),x=e&&e+"Style";u&&(u.attr(a.style),u.attr(a[x]||{})),h&&(h.attr(o.style),h.attr(o[x]||{})),c.forEach(function(M){M.attr(s.style),M.attr(s[x]||{})}),v.forEach(function(M){M.attr(l.style),M.attr(l[x]||{})})},r.prototype.bindEvents=function(t){var e=this;this.offEvents();var n=t.findAllByName(jn.TOOLTIP_INDICATOR_BODY)[0];n.on("mousemove",this.onBodyGroupMousemove),this.addDisposable(function(){n.off("mousemove",e.onBodyGroupMousemove)}),this.gm=new Zv(n),this.wheel=new HM(n),this.wheel.on("wheel",this.onWheel)},r.prototype.offEvents=function(){this.gm&&this.gm.destroy(),this.wheel&&this.wheel.destroy()},r.prototype.resetRender=function(){this.curX=0,this.curY=0,this.offsetX=0},r}(Ss),y_=g_;function m_(i,r){for(var t=i;t;){if(r(t))return t;t=t.getParent()}}function x_(i,r){return(0,f.filter)(i.geometries,function(t){return t.type===r})}function po(i,r){return(0,f.head)(x_(i,r))}function b_(i){return(0,f.map)(i.elements,function(r){return r.shape})}function kG(i,r){i.geometries.forEach(r)}function Nf(i,r){i.geometries.forEach(function(t){t.elements.forEach(function(e){r(e)})})}function w_(i,r,t){return(0,f.some)(r,function(e){return t(e.get(ca),i.get(ca))})}function Al(i,r){var t=i.getBBox(),e=0,n=0;t.minX<r.minX?e=t.minX-r.minX:t.maxX>r.maxX&&(e=t.maxX-r.maxX),e&&i.attr("x",i.attr("x")-e),t.minY<r.minY?n=t.minY-r.minY:t.maxY>r.maxY&&(n=t.maxY-r.maxY),n&&i.attr("y",i.attr("y")-n)}function Gf(i,r,t){t===void 0&&(t=0);var e=Math.max(0,Math.min(i.x+i.width+t,r.x+r.width+t)-Math.max(i.x-t,r.x-t)),n=Math.max(0,Math.min(i.y+i.height+t,r.y+r.height+t)-Math.max(i.y-t,r.y-t));return e*n}function Tl(i,r){var t=i.getBBox();return(0,f.some)(r,function(e){var n=e.getBBox();return Gf(t,n,2)>0})}var Od=8,Id=function(i){i===void 0&&(i={});var r=(0,V.__assign)({showTotal:!1,showPercent:!1,padding:[Od,24,Od,24],height:i.showPercent?72:54},i);return r},Zo;(function(i){i.ACTIVE_ELEMENT="tooltip_indicator_active_element",i.ACTIVE_ELEMENT_BY_X="tooltip_indicator_active_element_by_x"})(Zo||(Zo={}));var S_=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.state="selected",t.isSingle=!1,t}return r.prototype.active=function(){var t=jM.getCurrentElement(this.context);t.hasState("selected")?this.isSingle?this.setStateByX(t):this.setState(t):this.setStateByX(t)},r.prototype.setState=function(t){var e=this;Nf(this.getView(),function(n){n===t?n.hasState(e.state)||n.setState(e.state,!0):n.setState(e.state,!1)}),this.isSingle=!0,this.getView().emit(Zo.ACTIVE_ELEMENT,{element:t,isSingle:!0})},r.prototype.setStateByX=function(t){var e=this,n=this.getXField(),a=t.getData()[n];Nf(this.getView(),function(o){o.getData()[n]===a?o.hasState(e.state)||o.setState(e.state,!0):o.setState(e.state,!1)}),this.isSingle=!1,this.getView().emit(Zo.ACTIVE_ELEMENT_BY_X,{element:t,isSingle:!1})},r.prototype.setStateByField=function(t,e){var n=this,a=this.getView().getXScale().field,o=this.getView().getGroupScales()[0].field;Nf(this.getView(),function(s){var l=s.getData();s.setState(n.state,l[a]===t&&(e===void 0||l[o]===e))})},r.prototype.getView=function(){return this.context.view},r.prototype.getXField=function(){var t=this.context.view;return t.getXScale().field},r}(hn);Fr("tooltip-indicator",S_),Se("element-tooltip-indicator",{start:[{trigger:"element:mousemove",action:"tooltip-indicator:active",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"element:touchmove",action:"tooltip-indicator:active",throttle:{wait:50,leading:!0,trailing:!1}}]});var C_=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.onElementActive=function(e){var n=e.element,a=e.isSingle,o=t.view.getXScale(),s=t.view.getXScale().field,l=t.view.getGroupScales()[0].field,u=n.getData(),h=u[s],c=t.getLegendItems(h);t.component.update({items:c,title:{text:o.getText(h)}}),t.component.render(),a&&t.component.selectItem(u[l]),t.curX=h},t.onSelectTooltipIndicatorItem=function(e){t.component&&e&&t.getInteractionAction().setStateByField(t.curX,e)},t}return r.getInteractionRange=function(t,e){var n=Id(e),a=n.padding,o=a[0],s=a[2];return new Jr(t.minX,t.minY,t.width,n.height+o+s)},r.prototype.clear=function(){this.component&&this.component.destroy(),this.container&&this.container.remove(!0),this.component=null,this.container=null},r.prototype.render=function(){var t=this,e=this.view,n=function(){var a=t.view.getXScale(),o=(0,f.last)(a.getTicks()).tickValue,s=t.view.padding;(0,f.isEqual)([0,0,0,0],s)||(t.component?t.updateComponent():(t.createComponent(),t.component.on(_l.ON_SELECT_ITEM,t.onSelectTooltipIndicatorItem)),t.curX=o,t.component.update({title:{text:a.getText(t.curX)}}),t.component.render(),t.getInteractionAction().setStateByField(o))};e.legend(!1),e.removeInteraction("active-region"),e.removeInteraction("tooltip"),e.interaction("element-tooltip-indicator"),e.on(wn.VIEW_LIFE_CIRCLE.AFTER_PAINT,n),e.on(wn.VIEW_LIFE_CIRCLE.AFTER_RENDER,n),e.on(Zo.ACTIVE_ELEMENT,this.onElementActive),e.on(Zo.ACTIVE_ELEMENT_BY_X,this.onElementActive)},r.prototype.getInteractionAction=function(){var t=this.view.interactions["element-tooltip-indicator"];return t&&t.context.getAction("tooltip-indicator")},r.prototype.createComponent=function(){var t=Id(this.getInteractionConfig()).padding,e=t[0],n=t[1],a=t[2],o=t[3],s=this.getLegendItems(),l=this.getRange(),u=this.view.getXScale(),h=(0,f.last)(u.getTicks()).tickValue;this.container=this.canvas.addGroup(),this.component=new y_({container:this.container,x:l.x+o,y:l.y+e,width:l.width-o-n,height:l.height-e-a,theme:this.getViewLayer().getPlotTheme(),items:s}),this.component.init(),this.getInteractionAction().setStateByField(h)},r.prototype.updateComponent=function(){var t=this.getLegendItems();this.component.update({items:t})},r.prototype.getLegendItems=function(t){var e=this.view,n=e.getData(),a=e.getTheme().defaultColor,o=e.getXScale(),s=e.getYScales()[0],l=t||(0,f.last)(o.getTicks()).tickValue,u=e.getLegendAttributes(),h=u.find(function(k){return k.type==="color"}),c=[],v=e.getGroupScales()[0],x=v.field;v&&v.isCategory&&v.getTicks().forEach(function(k){var R=k.text,G=k.tickValue,N=h.mapping(G).join("")||a;c.push({id:G,title:R,color:N,values:[]})});var M=(n==null?void 0:n.filter(function(k){return k[o.field]===l}))||[];return c.forEach(function(k){var R=M.find(function(G){return G[x]===k.id});k.values.push({value:s.formatter?s.formatter(R[s.field]):R[s.field]})}),c},r}(Pa),M_=C_;Pa.registerInteraction("slider",t_),Pa.registerInteraction("scrollbar",JE),Pa.registerInteraction("timeline",h_),Pa.registerInteraction("tooltip-indicator",M_);var kd=Pa,E_=function(){function i(r){this.innerPaddingComponents=[],this.outerPaddingComponents=[],this.plot=r.plot}return i.prototype.registerPadding=function(r,t,e){t===void 0&&(t="outer"),e===void 0&&(e=!1),t==="inner"?e?this.innerPaddingComponents.find(function(n){return n==r})||this.innerPaddingComponents.push(r):this.innerPaddingComponents.push(r):e?this.outerPaddingComponents.find(function(n){return n==r})||this.outerPaddingComponents.push(r):this.outerPaddingComponents.push(r)},i.prototype.getPaddingComponents=function(r){return r===void 0&&(r="outer"),(r==="outer"?this.outerPaddingComponents:this.innerPaddingComponents)||[]},i.prototype.clear=function(){this.innerPaddingComponents=[],this.outerPaddingComponents=(0,f.filter)(this.outerPaddingComponents,function(r){return r.afterRender})},i.prototype.clearOuterComponents=function(){(0,f.each)(this.outerPaddingComponents,function(r){r.afterRender&&r.destroy()}),this.outerPaddingComponents=[]},i.prototype.getPadding=function(){var r=this.plot.options,t=r.padding?r.padding:this.plot.config.theme.padding;return t==="auto"?[0,0,0,1]:t},i.prototype.processAutoPadding=function(){var r=this._getInnerAutoPadding();this.plot.updateConfig({padding:r}),this.plot.render()},i.prototype.processOuterPadding=function(){this.plot.layerBBox||(this.plot.layerBBox=new Jr(this.plot.x,this.plot.y,this.plot.width,this.plot.height));var r=this.plot.layerBBox.minX,t=this.plot.layerBBox.maxX,e=this.plot.layerBBox.minY,n=this.plot.layerBBox.maxY;return(0,f.each)(this.outerPaddingComponents,function(a){var o=a.position;if(!a.destroyed){var s=a.getBBox(),l=s.minX,u=s.maxX,h=s.minY,c=s.maxY;c>=e&&c<=n&&o==="top"&&(e=c),h>=e&&h<=n&&o==="bottom"&&(n=h),u>r&&u<=t&&o==="left"&&(r=u),l>=r&&u<=t&&o==="right"&&(t=l)}}),new Jr(r,e,t-r,n-e)},i.prototype._getInnerAutoPadding=function(){var r,t=this.plot.options,e=this.plot.view,n=e.coordinateBBox,a=n.maxX,o=n.maxY,s=n.minY,l=n.minX,u=this.plot.config.theme.bleeding;(0,f.isArray)(u)&&(0,f.each)(u,function(k,R){typeof u[R]=="function"&&(u[R]=u[R](t))}),this.bleeding=(0,f.clone)(u);var h=[new Jr(n.minX,n.minY,n.width,n.height)];((r=this.plot.config.coordinate)===null||r===void 0?void 0:r.type)==="cartesian"&&this._getCartesianAxis(e,h[0],h);var c=this._mergeBBox(h);this._getLegend(e,c,h),c=this._mergeBBox(h);var v=this.innerPaddingComponents;(0,f.each)(v,function(k){var R=k,G=R.getBBox();h.push(G)}),c=this._mergeBBox(h);var x=[s-c.minY+this.bleeding[0],c.maxX-a+this.bleeding[1],c.maxY-o+this.bleeding[2],l-c.minX+this.bleeding[3]],M=this._getPanel(e);return x[0]+=M[0],x[1]+=M[1],x[2]+=M[2],x[3]+=M[3],x},i.prototype._getCartesianAxis=function(r,t,e){var n=aE(r),a=r.getCoordinate().isTransposed;(0,f.each)(n,function(o){if(o.get("group").get("children").length!==0){var s=o.get("position"),l=o.getLayoutBBox(),u=l.minX,h=l.minY,c=l.width,v=l.height;a?s==="bottom"?e.push(new Jr(t.minX-c,h,c,v)):s==="left"?e.push(new Jr(u,t.maxY,c,v)):s==="top"&&e.push(new Jr(t.maxX,h,c,v)):s==="left"?e.push(new Jr(t.minX-c,h,c,v)):s==="bottom"?e.push(new Jr(u,t.maxY,c,v)):s==="right"&&e.push(new Jr(t.maxX,h,c,v))}})},i.prototype._getLegend=function(r,t,e){var n=oE(r);(0,f.each)(n,function(a){var o=a.get("position").split("-")[0],s=a.getLayoutBBox(),l=s.minX,u=s.minY,h=s.width,c=s.height;o==="top"?e.push(new Jr(l,t.minY-c,h,c)):o==="bottom"?e.push(new Jr(l,t.maxY,h,c)):o==="left"?e.push(new Jr(t.minX-h,u,h,c)):e.push(new Jr(t.maxX,u,h,c))})},i.prototype._getPanel=function(r){var t=[],e=r.geometries;(0,f.each)(e,function(M){M.labelsContainer&&t.push(M.labelsContainer)});var n=Infinity,a=-Infinity,o=Infinity,s=-Infinity;(0,f.each)(t,function(M){var k=M.get("children");k.forEach(function(R){if(!(R.type==="group"&&R.get("children").length===0)){var G=R.getBBox();G.minX<n&&(n=G.minX),G.maxX>a&&(a=G.maxX),G.minY<o&&(o=G.minY),G.maxY>s&&(s=G.maxY)}})});var l=r.coordinateBBox,u=Math.max(a-parseFloat(l.maxX),0);if(u>0){var h=l.width/(l.width+u);u*=h}var c=Math.max(parseFloat(l.minX)-n,0);if(c>0){var h=l.width/(l.width+c);c*=h}var v=Math.max(parseFloat(l.minY)-o,0);if(v>0){var h=l.height/(l.height+v);v*=h}var x=Math.max(s-parseFloat(l.maxY),0);if(x>0){var h=l.height/(l.height+x);x*=h}return[v,u,x,c]},i.prototype._mergeBBox=function(r){var t=Infinity,e=-Infinity,n=Infinity,a=-Infinity;return(0,f.each)(r,function(o){var s=o;t=Math.min(s.minX,t),e=Math.max(s.maxX,e),n=Math.min(s.minY,n),a=Math.max(s.maxY,a)}),{minX:t,maxX:e,minY:n,maxY:a}},i}(),__=E_,A_="#5B8FF9",T_=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E8684A","#6DC8EC","#9270CA","#FF9D4D","#269A99","#FF99C3"],P_=["#5B8FF9","#BDD2FD","#5AD8A6","#BDEFDB","#5D7092","#C2C8D5","#F6BD16","#FBE5A2","#E8684A","#F6C3B7","#6DC8EC","#B6E3F5","#9270CA","#D3C6EA","#FF9D4D","#FFD8B8","#269A99","#AAD8D8","#FF99C3","#FFD6E7"],Bd=function(i){return i&&i.split("-")[0]==="top"?12:24},Dd=function(i){var r=i.title&&i.title.visible,t=i.description&&i.description.visible;return r||t?12:24},Fd=function(i){return(0,f.some)(i.interactions||[],function(r){return(r.type==="slider"||r.type==="scrollbar")&&(r.cfg&&r.cfg.type)!=="vertical"})?8:24},Rd={width:400,height:400,bleeding:[Dd,24,Fd,24],padding:"auto",defaultColor:A_,colors:T_,colors_20:P_,title:{padding:[24,24,24,24],fontFamily:"PingFang SC",fontSize:18,fill:"black",textAlign:"left",textBaseline:"top",lineHeight:20,alignWithAxis:!1},description:{padding:[10,24,Bd,24],fontFamily:"PingFang SC",fontSize:12,fill:"grey",textAlign:"left",textBaseline:"top",lineHeight:16,alignWithAxis:!1},axis:{y:{visible:!0,position:"left",autoRotateTitle:!0,grid:{visible:!0,line:{style:{stroke:"rgba(0, 0, 0, 0.15)",lineWidth:1,lineDash:[0,0]}}},line:{visible:!1,style:{stroke:"rgba(0, 0, 0, 0.45)",lineWidth:1}},tickLine:{visible:!1,style:{stroke:"rgba(0,0,0,0.45)",lineWidth:.5,length:4}},label:{visible:!0,offset:8,textStyle:{fill:"rgba(0,0,0,0.45)",fontSize:12},autoRotate:!1,autoHide:!0},title:{visible:!1,spacing:12,style:{fill:"rgba(0, 0, 0, 0.65)",fontSize:12,textBaseline:"bottom"}}},x:{visible:!0,position:"bottom",autoRotateTitle:!1,grid:{visible:!1,line:{style:{stroke:"rgba(0, 0, 0, 0.15)",lineWidth:1,lineDash:[0,0]}}},line:{visible:!1,style:{stroke:"rgba(0, 0, 0, 0.45)",lineWidth:1}},tickLine:{visible:!0,style:{length:4,stroke:"rgba(0, 0, 0, 0.45)",lineWidth:.5}},label:{visible:!0,textStyle:{fill:"rgba(0,0,0,0.45)",fontSize:12},offset:16,autoRotate:!0,autoHide:!0},title:{visible:!1,spacing:12,style:{fill:"rgba(0, 0, 0, 0.65)",fontSize:12}}},circle:{autoHideLabel:!1,grid:{line:{style:{lineDash:null,lineWidth:1,stroke:"rgba(0, 0, 0, 0.15)"}}},line:{style:{lineWidth:1,stroke:"rgba(0, 0, 0, 0.45)"}},tickLine:{style:{lineWidth:1,stroke:"rgba(0, 0, 0, 0.45)",length:4,alignWithLabel:!0}},label:{offset:16,textStyle:{fill:"rgba(0,0,0,0.45)",fontSize:12},autoRotate:!0,autoHide:!0},title:{offset:12,style:{fill:"rgba(0, 0, 0, 0.65)",fontSize:12}}},radius:{label:{textStyle:{fill:"rgba(0,0,0,0.45)",fontSize:12}}}},legend:{flipPage:!1,position:"bottom",innerPadding:[16,16,16,16],margin:[0,24,24,24]},label:{offset:12,textStyle:{fill:"#595959"},style:{fill:"#595959",stroke:"#ffffff",lineWidth:2}},tooltip:{"g2-tooltip":{boxShadow:"0px 0px 8px rgba(0,0,0,0.15)"},offset:10},components:{legend:{margin:[0,24,24,24]},tooltipIndicator:{title:{style:{fontSize:14,fill:"#262626"}},line:{style:{opacity:1},inactiveStyle:{opacity:.3}},itemTitle:{style:{fontSize:12,fill:"#8C8C8C",opacity:1},inactiveStyle:{opacity:.3}},itemName:{style:{fontSize:12,fill:"#8C8C8C",opacity:1},inactiveStyle:{opacity:.3}},itemValue:{style:{fontSize:14,fontWeight:"bold",fill:"#595959",opacity:1},inactiveStyle:{opacity:.3}}}}},L_={backgroundStyle:{fill:"#262626"},defaultColor:"#5B8FF9",width:400,height:400,bleeding:[Dd,24,Fd,24],padding:"auto",title:{padding:[24,24,24,24],fontFamily:"PingFang SC",fontSize:18,fontWeight:"bold",fill:"rgba(255,255,255,0.65)",stroke:"rgba(0,0,0,0.95)",textAlign:"left",textBaseline:"top",lineHeight:20,alignWithAxis:!1},description:{padding:[10,24,Bd,24],fontFamily:"PingFang SC",fontSize:12,fill:"rgba(255, 255, 255, 0.65)",stroke:"rgba(0,0,0,0.95)",textAlign:"left",textBaseline:"top",lineHeight:16,alignWithAxis:!1},axis:{y:{visible:!0,position:"left",autoRotateTitle:!0,grid:{visible:!0,line:{style:{stroke:"rgba(255, 255, 255, 0.15)",lineWidth:1,lineDash:null}}},line:{visible:!1,style:{stroke:"rgba(255, 255, 255, 0.45)",lineWidth:1}},tickLine:{visible:!1,style:{stroke:"rgba(255, 255, 255, 0.45)",lineWidth:.5,length:4}},label:{visible:!0,offset:8,autoRotate:!1,autoHide:!0,textStyle:{fill:"rgba(255, 255, 255, 0.45)",fontSize:12}},title:{visible:!1,spacing:12,style:{fill:"rgba(255, 255, 255, 0.65)",fontSize:12,textBaseline:"bottom"}}},x:{visible:!0,position:"bottom",autoRotateTitle:!1,grid:{visible:!1,line:{style:{stroke:"rgba(255, 255, 255, 0.15)",lineWidth:1,lineDash:null}}},line:{visible:!1,style:{stroke:"rgba(255, 255, 255, 0.45)"}},tickLine:{visible:!0,style:{length:4,stroke:"rgba(255, 255, 255, 0.45)",lineWidth:.5}},label:{visible:!0,textStyle:{fill:"rgba(255, 255, 255, 0.65)",fontSize:12},offset:16,autoHide:!0,autoRotate:!0},title:{visible:!1,spacing:12,style:{fill:"rgba(255, 255, 255, 0.65)",fontSize:12}}},circle:{autoRotateTitle:!0,grid:{style:{lineDash:null,lineWidth:1,stroke:"#E3E8EC"}},line:{style:{lineWidth:1,stroke:"#BFBFBF"}},tickLine:{style:{lineWidth:1,stroke:"#bdc8d3",length:4,alignWithLabel:!0}},label:{offset:16,textStyle:{fill:"#a0a4aa",fontSize:12},autoRotate:!0,autoHide:!0},title:{offset:12,style:{fill:"#767b84",fontSize:12}}},radius:{label:{offset:12,textStyle:{fill:"#a0a4aa",fontSize:12}}}},legend:{flipPage:!1,position:"bottom",innerPadding:[16,16,16,16],title:{visible:!1,style:{fill:"#bdc8d3"}},text:{style:{fill:"#bdc8d3"}}},label:{offset:12,textStyle:{fill:"rgba(255, 255, 255, 0.65)"},style:{fill:"rgba(255, 255, 255, 0.65)",lineWidth:1}},components:{tooltip:{domStyles:{"g2-tooltip":{backgroundColor:"rgba(33,33,33, 0.95)",boxShadow:"0px 0px 8px rgba(0,0,0,0.65)",color:"rgba(255, 255, 255, 0.65)"}}}}},Nd={default:Rd,dark:L_};function BG(i,r){var t=ji();Nd[i.toLowerCase()]=deepMix({},t,r)}function ji(i){i===void 0&&(i="default");var r=Nd[i.toLowerCase()];return r||(console.warn("error in theme: Can't find the theme named %s. Please register theme first.",i),Rd)}var Gd={};function Yd(i,r){var t={lineStyle:"line.line",columnStyle:"interval.rect",pointStyle:"point.circle"},e={};i==="area"&&(t={areaStyle:"area.area",lineStyle:"area.line",pointStyle:"point.circle"});var n={};return(0,f.each)(r,function(a,o){var s;if((0,f.has)(t,o)){var l=t[o];(0,f.each)(a,function(u,h){(0,f.set)(n,l+"."+[h==="normal"?"default":h==="disable"?"inactive":h]+".style",u)})}else e=(0,f.deepMix)({},e,(s={},s[o]=a,s))}),(0,f.isEmpty)(n)||(e=(0,f.deepMix)({},e,{geometries:n})),e}function ia(i,r){Gd[i.toLowerCase()]=Yd(i,r)}function zd(i){return Gd[i.toLowerCase()]||{}}function O_(i){var r=(0,f.clone)(i);return r.legend||(r.legend={}),r}var Yf={axis:{x:{category:{constraints:[{name:"elementDist"}],rules:{elementDist:[{name:"textWrapper",option:{lineNumber:2}},{name:"textRotation",option:{degree:45}},{name:"textRotation",option:{degree:90}},{name:"textAbbreviate",option:{abbreviateBy:"end"}},{name:"textHide"}]}},linear:{constraints:[{name:"elementDist"}],rules:{elementDist:[{name:"nodesResampling",option:{keep:["end"]}},{name:"textRotation",option:{degree:45}},{name:"textRotation",option:{degree:90}},{name:"robustAbbrevaite",option:{unit:"thousand",decimal:1,abbreviateBy:"end"}},{name:"textHide"}]}},dateTime:{constraints:[{name:"elementDist"}],rules:{elementDist:[{name:"datetimeStringAbbrevaite"},{name:"nodesResamplingByAbbrevate",option:{keep:["end"]}},{name:"textRotation",option:{degree:45}},{name:"textRotation",option:{degree:90}},{name:"nodesResampling"},{name:"nodesResampling"},{name:"textHide"}]}}},y:{linear:{constraints:[{name:"elementDistVertical"},{name:"elementWidth"}],rules:{elementDistVertical:[{name:"nodesResampling"},{name:"textHide"}],elementWidth:[{name:"digitsAbbreviate"},{name:"textHide"}]}},category:{constraints:[{name:"elementDistVertical"},{name:"elementWidth"}],rules:{elementDistVertical:[{name:"nodesResampling"},{name:"textHide"}],elementWidth:[{name:"textAbbreviate",option:{abbreviateBy:"end"}},{name:"textHide"}]}}}}},Xd={default:Yf};function Vd(i,r){Xd[i.toLowerCase()]=(0,f.deepMix)({},Yf,r)}function Hd(i){var r=Xd[i.toLowerCase()];return r||Yf}var I_=gt(),k_=function(){function i(){}return i.getGlobalTheme=function(r){return(0,f.isString)(r)?ji(r):(0,f.deepMix)({},ji(),r)},i.prototype.getPlotTheme=function(r,t){var e=r.theme;return(0,f.isString)(e)?(0,f.deepMix)({},ji(e),zd(t)):(0,f.deepMix)({},ji(),zd(t),Yd(t,e))},i.prototype.getTheme=function(r,t){var e=O_(this.getPlotTheme(r,t)),n=(0,f.deepMix)({},I_,e);return n},i.prototype.getResponsiveTheme=function(r){return Hd(r)||Hd("default")},i}(),zf=k_,B_=function(i){(0,V.__extends)(r,i);function r(t){var e=i.call(this,t)||this;return e.interactions=[],e.labels=[],e.options=e.getOptions(t),e.initialOptions=(0,f.deepMix)({},e.options),e.paddingController=new __({plot:e}),e.stateController=new kE({plot:e}),e.themeController=new zf,e}return r.getDefaultOptions=function(){return{renderer:"canvas",title:{visible:!1,alignTo:"left",text:""},description:{visible:!1,text:"",alignTo:"left"},padding:"auto",legend:{visible:!0,position:"bottom-center"},tooltip:{visible:!0,shared:!0,showCrosshairs:!0,crosshairs:{type:"x"},offset:20},xAxis:{visible:!0,grid:{visible:!1},line:{visible:!0},tickLine:{visible:!0},label:{visible:!0,autoRotate:!0,autoHide:!0},title:{visible:!1,spacing:12}},yAxis:{visible:!0,grid:{visible:!0},line:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoHide:!0,autoRotate:!1},title:{autoRotate:!0,visible:!1,spacing:12}},label:{visible:!1},interactions:[{type:"tooltip"},{type:"legend-active"},{type:"legend-filter"}],animation:!0}},r.prototype.getOptions=function(t){var e=this.options||{},n=i.prototype.getOptions.call(this,t),a=this.constructor.getDefaultOptions(t),o=(0,f.reduce)((0,f.flatten)((0,f.map)([n,a,(0,f.hasKey)(t,"interactions")?t:e],function(s){return(0,f.get)(s,"interactions",[])})),function(s,l){var u=(0,f.findIndex)(s,function(h){return h.type===l.type});return u>=0&&s.splice(u,1),(0,V.__spreadArrays)(s,[l])},[]);return(0,f.deepMix)({},n,a,e,t,{interactions:o})},r.prototype.beforeInit=function(){this.emit(Na.BEFORE_INIT),i.prototype.beforeInit.call(this)},r.prototype.init=function(){var t=this;i.prototype.init.call(this),this.theme=this.themeController.getTheme(this.options,this.type),this.config={data:this.processData(this.options.data),scales:{},legends:{},tooltip:{showTitle:!0},axes:{},coordinate:{type:"cartesian"},geometries:[],annotations:[],interactions:[],theme:this.theme,panelRange:{},animate:{},views:[]},this.paddingController.clear(),this.drawTitle(),this.drawDescription(),this.interaction(),this.coord(),this.scale(),this.axis(),this.tooltip(),this.legend(),this.addGeometry(),this.annotation(),this.animation(),this.viewRange=this.getViewRange();var e=this.viewRangeToRegion(this.viewRange);this.view=new Nu({parent:null,canvas:this.canvas,backgroundGroup:this.container.addGroup(),middleGroup:this.container.addGroup(),foregroundGroup:this.container.addGroup(),padding:this.paddingController.getPadding(),theme:this.theme,options:this.config,limitInPlot:this.isLimitInPlot(),region:e}),this.applyInteractions(),this.view.on(wn.VIEW_LIFE_CIRCLE.AFTER_RENDER,function(){t.afterRender()})},r.prototype.afterInit=function(){i.prototype.afterInit.call(this),!(!this.view||this.view.destroyed)&&(this.options.padding!=="auto"&&this.parseEvents(),this.emit(Na.AFTER_INIT))},r.prototype.afterRender=function(){var t,e;if(!(!this.view||this.view.destroyed)){var n=this.options,a=n.padding?n.padding:this.config.theme.padding;n.defaultState&&a!=="auto"&&this.stateController.defaultStates(n.defaultState),a==="auto"&&this.paddingController.processAutoPadding(),((e=(t=n.tooltip)===null||t===void 0?void 0:t.custom)===null||e===void 0?void 0:e.onChange)&&n.padding!=="auto"&&this.customTooltip()}},r.prototype.render=function(){this.emit(Na.BEFORE_RENDER),i.prototype.render.call(this);var t=this.options.data;(0,f.isEmpty)(t)||this.view.render(),this.emit(Na.AFTER_RENDER)},r.prototype.repaint=function(){this.canvas&&this.canvas.draw()},r.prototype.getScaleByField=function(t){return this.view.getScaleByField(t)},r.prototype.getXScale=function(){var t=this.options.xField;if(t)return this.view.getScaleByField(t)},r.prototype.getYScale=function(){var t=this.options.yField;if(t)return this.view.getScaleByField(t)},r.prototype.getColorScale=function(){var t=this.options;if((0,f.contains)(t,"colorField"))return this.view.getScaleByField(t)},r.prototype.getShapes=function(){var t=this.view.geometries,e={};return(0,f.each)(t,function(n){var a=n.type;e[a]=n.getShapes()}),e},r.prototype.destroy=function(){this.doDestroy(),i.prototype.destroy.call(this)},r.prototype.updateConfig=function(t){this.doDestroy(),!t.padding&&this.initialOptions.padding&&this.initialOptions.padding==="auto"&&(t.padding="auto"),this.options=this.getOptions(t),this.processOptions(this.options)},r.prototype.changeData=function(t){this.emit(Na.BEFORE_CHANGE_DATA);var e=(0,f.isEmpty)(this.options.data);this.options.data=this.processData(t),e?(this.options.padding=this.initialOptions.padding||"auto",this.view.data(this.options.data),this.view.render()):this.view.changeData(this.options.data),this.emit(Na.AFTER_CHANGE_DATA)},r.prototype.getPlot=function(){return this.view},r.prototype.getLabels=function(){return this.labels},r.prototype.getTheme=function(){return this.theme?this.theme:this.themeController.getTheme(this.options,this.type)},r.prototype.getResponsiveTheme=function(){return this.themeController.getResponsiveTheme(this.type)},r.prototype.getPlotTheme=function(){return this.themeController.getPlotTheme(this.options,this.type)},r.prototype.getInteractions=function(){return this.interactions},r.prototype.bindStateManager=function(t,e){this.stateController.bindStateManager(t,e)},r.prototype.setActive=function(t,e){this.stateController.setState({type:"active",condition:t,style:e})},r.prototype.setSelected=function(t,e){this.stateController.setState({type:"selected",condition:t,style:e})},r.prototype.setDisable=function(t,e){this.stateController.setState({type:"disable",condition:t,style:e})},r.prototype.setDefault=function(t,e){this.stateController.setState({type:"default",condition:t,style:e})},r.prototype.getData=function(t,e){return this.processData((this.options.data||[]).slice(t,e))},r.prototype.processData=function(t){return t},r.prototype.scale=function(){var t=(0,f.mapValues)(this.config.scales,function(n){var a=n.type;return a?{type:a}:{}}),e=(0,f.deepMix)({},this.config.scales,this.options.meta||{},t);this.setConfig("scales",e)},r.prototype.axis=function(){var t=Ni("axis",{plot:this,dim:"x"}),e=Ni("axis",{plot:this,dim:"y"}),n={};n[this.options.xField]=t,n[this.options.yField]=e,this.setConfig("axes",n)},r.prototype.tooltip=function(){var t,e;if(this.options.tooltip.visible===!1){this.setConfig("tooltip",!1);return}var n=(0,f.get)(this.options,"tooltip");((t=n.custom)===null||t===void 0?void 0:t.container)&&(n.container=n.custom.container),((e=n.custom)===null||e===void 0?void 0:e.customContent)&&(n.customContent=n.custom.customContent),this.setConfig("tooltip",(0,f.deepMix)({},n)),(0,f.deepMix)(this.config.theme.tooltip,this.options.tooltip.domStyles)},r.prototype.createTooltipContainer=function(){var t=document.createElement("div");return t.className="g2-tooltip",t},r.prototype.customTooltip=function(){var t=this.options.tooltip.custom,e;t.container&&(e=(0,f.isString)(t.container)?document.getElementById(t.container):t.container),e||(e=this.createTooltipContainer()),this.view.on("tooltip:show",function(n){(t==null?void 0:t.onChange)&&t.onChange(e,n)}),this.view.hideTooltip(),this.view.on("tooltip:change",function(n){t.onChange(e,n)})},r.prototype.getLegendPosition=function(t){var e=t.split("-");return e&&e.length>1&&e[1]==="center"?e[0]:t},r.prototype.legend=function(){var t;if(this.options.legend.visible===!1){this.setConfig("legends",!1);return}var e=(0,f.deepMix)({},this.theme.legend,this.options.legend),n={position:this.getLegendPosition((0,f.get)(e,"position")),offsetX:(0,f.get)(e,"offsetX"),offsetY:(0,f.get)(e,"offsetY"),flipPage:(0,f.get)(e,"flipPage"),marker:(0,f.get)(e,"marker"),title:((t=e.title)===null||t===void 0?void 0:t.visible)?(0,f.get)(e,"title"):null,itemName:(0,f.get)(e,"text")};this.setConfig("legends",n)},r.prototype.annotation=function(){var t=this,e=[];this.config.coordinate.type==="cartesian"&&this.options.guideLine&&(0,f.each)(this.options.guideLine,function(n){var a=Ni("guideLine",{plot:t,cfg:n});e.push(a)}),this.setConfig("annotations",e)},r.prototype.interaction=function(){var t=this,e=this.options.interactions,n=e===void 0?[]:e;(0,f.each)(n,function(a){var o=a.type;if(o==="slider"||o==="scrollbar"){var s={label:{autoHide:!0,autoRotate:!1}};t.options.xAxis=(0,f.deepMix)({},t.options.xAxis,s)}t.setConfig("interaction",a)})},r.prototype.animation=function(){this.options.animation===!1&&this.setConfig("animate",!1)},r.prototype.applyInteractions=function(){var t=this,e=Jr.fromBBoxObject(this.layerBBox),n=this.title||this.description,a=new Jr(e.minX,e.minY,e.width,n?n.getBBox().maxY:0);e=e.cut(a,wn.DIRECTION.TOP);var o=this.options.interactions,s=o===void 0?[]:o;this.interactions&&this.interactions.forEach(function(l){l.destroy()}),this.interactions=[],s.forEach(function(l){var u=kd.getInteraction(l.type,t.type);if(u){var h=new u({view:t.view},t,u.getInteractionRange(e,l.cfg),l.cfg);h.render(),t.interactions.push(h)}})},r.prototype.setConfig=function(t,e){if(t==="geometry"){this.config.geometries.push(e);return}if(t==="interaction"){this.config.interactions.push(e);return}if(e===!1){this.config[t]=!1;return}(0,f.assign)(this.config[t],e)},r.prototype.parseEvents=function(t){var e=this,n=this.options;if(n.events){i.prototype.parseEvents.call(this,n.events);var a=t?t.EVENT_MAP:dn;(0,f.each)(n.events,function(o,s){if((0,f.isFunction)(o)){var l=a[s]||s,u=o;ai(e,l,u)}})}},r.prototype.drawTitle=function(){var t=this.options,e=this.layerBBox;if(this.title&&(this.title.destroy(),this.title=null),Wo(t.title)){var n=this.width,a=this.config.theme,o=new gl({leftMargin:e.minX+a.title.padding[3],rightMargin:e.maxX-a.title.padding[1],topMargin:e.minY+a.title.padding[0],text:t.title.text,style:(0,f.mix)(a.title,t.title.style),wrapperWidth:n-a.title.padding[3]-a.title.padding[1],container:this.container.addGroup(),theme:a,index:Wo(t.description)?0:1,plot:this,alignTo:t.title.alignTo,name:"title"});this.title=o,this.paddingController.registerPadding(o,"outer")}},r.prototype.drawDescription=function(){var t=this.options,e=this.layerBBox;if(this.description&&(this.description.destroy(),this.description=null),Wo(t.description)){var n=this.width,a=this.config.theme,o=0;if(this.title){var s=this.title.getBBox();o+=s.minY+s.height,o+=a.description.padding[0]}else o+=e.minY+a.title.padding[0];var l=new gl({leftMargin:e.minX+a.description.padding[3],topMargin:o,rightMargin:e.maxX-a.title.padding[1],text:t.description.text,style:(0,f.mix)(a.description,t.description.style),wrapperWidth:n-a.description.padding[3]-a.description.padding[1],container:this.container.addGroup(),theme:a,index:1,plot:this,alignTo:t.description.alignTo,name:"description"});this.description=l,this.paddingController.registerPadding(l,"outer")}},r.prototype.doRenderLabel=function(t,e){(0,f.each)(this.labels,function(s){s.destroy()}),this.labels=[];var n={layer:this,container:t.labelsContainer,geometry:t,label:e},a=hE(e.type);if(a){var o=new a(n);o.init(),o.render(),this.labels.push(o)}},r.prototype.doDestroy=function(){this.doDestroyInteractions(),this.doDestroyLabels(),this.view.destroyed||this.view.destroy()},r.prototype.doDestroyInteractions=function(){this.interactions&&this.interactions.forEach(function(t){t.destroy()}),this.interactions=[]},r.prototype.doDestroyLabels=function(){(0,f.each)(this.labels,function(t){t.destroy()}),this.labels=[]},r.prototype.getViewRange=function(){var t=this,e=this.options.interactions,n=e===void 0?[]:e,a=this.paddingController.processOuterPadding();n.forEach(function(s){var l=kd.getInteraction(s.type,t.type),u=l&&l.getInteractionRange(a,s.cfg),h="";u&&(u.maxY===a.maxY&&u.minY>a.minY?h="bottom":u.maxX===a.maxX&&u.minX>a.minX?h="right":u.minX===a.minX&&u.maxX>a.maxX?h="left":u.minY===a.minY&&u.maxY<a.maxY&&(h="top"),t.paddingController.registerPadding({interaction:s.type,name:s.type,getBBox:function(){return u},position:h},"outer"))});var o=this.paddingController.processOuterPadding();return o},r.prototype.isLimitInPlot=function(){var t=this.options.yAxis;return!!((0,f.hasKey)(t,"max")||(0,f.hasKey)(t,"min")||(0,f.hasKey)(t,"maxLimit")||(0,f.hasKey)(t,"minLimit"))},r.prototype.viewRangeToRegion=function(t){var e=this,n=e.x,a=e.y,o=e.width,s=e.height,l={x:0,y:0},u={x:1,y:1};return l.x=t.minX/(n+o),l.y=t.minY/(a+s),u.x=t.maxX/(n+o),u.y=t.maxY/(a+s),{start:l,end:u}},r}(pl),Un=B_,D_=p(91033),F_=function(){function i(r){var t=this;this.onResize=(0,f.debounce)(function(){if(!t.plot.destroyed){var a=t.getCanvasSize(),o=a.width,s=a.height;t.width===o&&t.height===s||(t.width=o,t.height=s,t.plot.updateConfig({width:o,height:s}),t.plot.render())}},300);var e=r.containerDOM,n=r.plot;this.containerDOM=e,this.plot=n,this.init()}return i.prototype.getCanvasSize=function(){var r=ji(),t=this.plot.width?this.plot.width:r.width,e=this.plot.height?this.plot.height:r.height;return this.plot.forceFit&&(t=this.containerDOM.offsetWidth?this.containerDOM.offsetWidth:t,e=this.containerDOM.offsetHeight?this.containerDOM.offsetHeight:e),{width:t,height:e}},i.prototype.getCanvasDOM=function(){return this.canvas.get("container")},i.prototype.updateCanvasSize=function(){var r=this.getCanvasSize(),t=r.width,e=r.height;this.width=t,this.height=e,this.canvas.changeSize(t,e)},i.prototype.updateCanvasTheme=function(){var r=this.plot.theme,t=zf.getGlobalTheme(r),e=(0,f.get)(t,"backgroundStyle.fill");e&&this.updateCanvasStyle({backgroundColor:e})},i.prototype.updateCanvasStyle=function(r){(0,It.Z)(this.getCanvasDOM(),r),(0,It.Z)(this.canvas.get("el"),{display:"inline-block",verticalAlign:"middle"})},i.prototype.destroy=function(){this.resizeObserver&&(this.resizeObserver.unobserve(this.containerDOM),this.resizeObserver.disconnect(),this.containerDOM=null),this.canvas.destroy()},i.prototype.bindForceFit=function(){var r=this.plot.forceFit;r&&(this.resizeObserver=new D_.Z(this.onResize),this.resizeObserver.observe(this.containerDOM))},i.prototype.init=function(){this.initGCanvas(),this.bindForceFit(),this.updateCanvasStyle({position:"relative"})},i.prototype.initGCanvas=function(){var r=this.plot,t=r.renderer,e=t===void 0?"canvas":t,n=r.pixelRatio,a=r.localRefresh,o=a===void 0?!1:a,s=this.getCanvasSize(),l=s.width,u=s.height,h=e==="canvas"?Kc:iv;this.canvas=new h({localRefresh:o,container:this.containerDOM,width:l,height:u,pixelRatio:n}),this.width=l,this.height=u,this.updateCanvasTheme()},i}(),R_=F_;function N_(i,r){return!!(i&&r&&i===r)}function G_(i,r){return i.x>=r.minX&&i.x<=r.maxX&&i.y>=r.minY&&i.y<=r.maxY}var Y_=function(){function i(r){this.plot=r.plot,this.canvas=r.canvas,this.eventHandlers=[]}return i.prototype.bindEvents=function(){this.addEvent(this.canvas,"mousedown",(0,f.wrapBehavior)(this,"onEvents")),this.addEvent(this.canvas,"mousemove",(0,f.wrapBehavior)(this,"onMove")),this.addEvent(this.canvas,"mouseup",(0,f.wrapBehavior)(this,"onEvents")),this.addEvent(this.canvas,"click",(0,f.wrapBehavior)(this,"onEvents")),this.addEvent(this.canvas,"dblclick",(0,f.wrapBehavior)(this,"onEvents")),this.addEvent(this.canvas,"contextmenu",(0,f.wrapBehavior)(this,"onEvents")),this.addEvent(this.canvas,"wheel",(0,f.wrapBehavior)(this,"onEvents"))},i.prototype.clearEvents=function(){var r=this.eventHandlers;(0,f.each)(r,function(t){t.target.off(t.type,t.handler)})},i.prototype.addEvent=function(r,t,e){r.on(t,e),this.eventHandlers.push({target:r,type:t,handler:e})},i.prototype.onEvents=function(r){var t=this.getEventObj(r),e=r.target;!this.isShapeInView(e)&&e.name&&this.plot.emit(e.name+":"+r.type,r),this.plot.emit(""+r.type,t);var n=this.plot.getLayers();n.length>0&&this.onLayerEvent(n,t,r.type)},i.prototype.onMove=function(r){var t=r.target,e=this.getEventObj(r);!this.isShapeInView(t)&&t.name&&(this.plot.emit(t.name+":"+r.type,e),this.lastShape&&!N_(t,this.lastShape)&&(this.lastShape&&this.plot.emit(this.lastShape.name+":mouseleave",e),this.plot.emit(t.name+":mouseenter",e)),this.lastShape=t),this.plot.emit("mousemove",e);var n=this.plot.getLayers();n.length>0&&this.onLayerEvent(n,e,"mousemove")},i.prototype.isShapeInView=function(r){for(var t=["frontgroundGroup","backgroundGroup","panelGroup"],e=r.get("parent");e;){var n=e.get("name");if(n&&(0,f.contains)(t,n))return!0;e=e.get("parent")}return!1},i.prototype.getEventObj=function(r){var t={clientX:r.clientX,clientY:r.clientY,x:r.x,y:r.y,plot:this.plot,data:r.data?r.data.data:null,canvas:this.canvas,target:r.target,gEvent:r};return t},i.prototype.onLayerEvent=function(r,t,e){var n=this;(0,f.each)(r,function(a){var o=a.getGlobalBBox();if(G_({x:t.x,y:t.y},o)){a.emit(""+e,t);var s=a.layers;s.length>0&&n.onLayerEvent(s,t,e)}})},i}(),z_=Y_,Wd={};function ln(i,r){Wd[i.toLowerCase()]=r}function X_(i){return Wd[i.toLowerCase()]}var V_=function(i){(0,V.__extends)(r,i);function r(t,e){var n=i.call(this)||this;return n.containerDOM=typeof t=="string"?document.getElementById(t):t,n.forceFit=(0,f.isNil)(e.forceFit)?(0,f.isNil)(e.width)&&(0,f.isNil)(e.height):e.forceFit,n.renderer=e.renderer||"canvas",n.pixelRatio=e.pixelRatio||null,n.width=e.width,n.height=e.height,n.theme=e.theme,n.localRefresh=e.localRefresh,n.canvasController=new R_({containerDOM:n.containerDOM,plot:n}),n.width=n.canvasController.width,n.height=n.canvasController.height,n.canvas=n.canvasController.canvas,n.layers=[],n.destroyed=!1,n.createLayers(e),n.eventController=new z_({plot:n,canvas:n.canvasController.canvas}),n.eventController.bindEvents(),n.parseEvents(e),n}return r.prototype.destroy=function(){this.eachLayer(function(t){t.destroy()}),this.canvasController.destroy(),this.eventController.clearEvents(),this.layers=[],this.destroyed=!0},r.prototype.repaint=function(){this.canvasController.canvas.draw()},r.prototype.updateConfig=function(t,e){if(e===void 0&&(e=!1),e)this.eachLayer(function(a){a instanceof Un&&a.updateConfig(t)});else{var n=this.layers[0];n instanceof pl&&n.updateConfig(t)}t.width&&(this.width=t.width),t.height&&(this.height=t.height),t.theme&&(this.theme=t.theme),this.canvasController.updateCanvasSize(),this.canvasController.updateCanvasTheme()},r.prototype.changeData=function(t,e){if(e===void 0&&(e=!1),e)this.eachLayer(function(a){a instanceof Un&&a.changeData(t)});else{var n=this.layers[0];n instanceof Un&&n.changeData(t)}},r.prototype.getScaleByField=function(t){return this.layers[0].getScaleByField(t)},r.prototype.getXScale=function(){return this.layers[0].getXScale()},r.prototype.getYScale=function(){return this.layers[0].getYScale()},r.prototype.getColorScale=function(){return this.layers[0].getColorScale()},r.prototype.getPlotTheme=function(){var t=this.layers[0];return t.getPlotTheme()},r.prototype.getData=function(){var t=this.layers[0];return t.getData()},r.prototype.bindStateManager=function(t,e){this.eachLayer(function(n){n instanceof Un&&n.bindStateManager(t,e)})},r.prototype.setActive=function(t,e){this.eachLayer(function(n){n instanceof Un&&n.setActive(t,e)})},r.prototype.setSelected=function(t,e){this.eachLayer(function(n){n instanceof Un&&n.setSelected(t,e)})},r.prototype.setDisable=function(t,e){this.eachLayer(function(n){n instanceof Un&&n.setDisable(t,e)})},r.prototype.setDefault=function(t,e){this.eachLayer(function(n){n instanceof Un&&n.setDefault(t,e)})},r.prototype.getView=function(){return this.layers[0].view},r.prototype.getLayer=function(t){return t===void 0&&(t=0),this.layers[t]},r.prototype.getCanvas=function(){return this.canvasController.canvas},r.prototype.getLayers=function(){return this.layers},r.prototype.render=function(){this.eachLayer(function(t){return t.render()})},r.prototype.eachLayer=function(t){(0,f.each)(this.layers,t)},r.prototype.addLayer=function(t){var e=(0,f.findIndex)(this.layers,function(n){return n===t});e<0&&this.layers.push(t)},r.prototype.createLayers=function(t){if(!t.layers){if(t.type){var e=X_(t.type),n=(0,f.deepMix)({},t,{canvas:this.canvasController.canvas,x:0,y:0,width:this.width,height:this.height}),a=new e(n);this.addLayer(a)}}},r.prototype.parseEvents=function(t){var e=this,n=(0,f.keys)(td);t.events&&(0,f.each)(t.events,function(a,o){if((0,f.contains)(n,o)&&(0,f.isFunction)(a)){var s=td[o]||o,l=a;e.on(s,l)}})},r}(te.default),Kr=V_,H_=function(){function i(r){(0,f.assign)(this,r),this.init()}return i.prototype.init=function(){this.config={type:this.type,position:{fields:this.positionFields}}},i}(),Cs=H_,W_=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.init=function(){var t=this.plot.options;this.config={type:"area",position:{fields:[t.xField,t.yField]},connectNulls:t.connectNulls||!1},t.smooth&&(this.config.shape={values:["smooth"]}),(this._getColorMappingField()||t.color)&&this.parseColor(),(t.areaStyle||t.area&&t.area.style)&&this.parseStyle()},r.prototype.parseColor=function(){var t=this.plot.options,e={},n=this._getColorMappingField();if(n&&(e.fields=n),(0,f.has)(t,"color")){var a=t.color;(0,f.isString)(a)?e.values=[a]:(0,f.isFunction)(a)?e.callback=a:(0,f.isArray)(a)&&(n?e.values=a:a.length>0&&(e.values=[a[0]]))}this.config.color=e},r.prototype.parseStyle=function(){var t=this.plot.options,e=t.areaStyle?t.areaStyle:t.area.style,n={};(0,f.isFunction)(e)&&t.seriesField?(n.fields=[t.seriesField],n.callback=e):n.cfg=e,this.config.style=n},r.prototype._getColorMappingField=function(){for(var t=this.plot.options,e=["stackField","seriesField"],n=0,a=e;n<a.length;n++){var o=a[n];if((0,f.get)(t,o))return[t[o]]}},r}(Cs),jd=W_;function j_(i,r){var t=[];if(i.length){for(var e=0,n=i.length;e<n;e+=1){var a=i[e],o=e===0?"M":"L";t.push([o,a.x,a.y])}r&&t.push(["Z"])}return t}function Ud(i,r){var t=i.getCenter(),e=Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2));return e}function Xf(i,r){for(var t=[i[0]],e=1,n=i.length;e<n;e=e+2){var a=r.convertPoint({x:i[e],y:i[e+1]});t.push(a.x,a.y)}return t}function U_(i,r,t){var e=t.isTransposed,n=t.startAngle,a=t.endAngle,o={x:i[1],y:i[2]},s={x:r[1],y:r[2]},l=[],u=e?"y":"x",h=Math.abs(s[u]-o[u])*(a-n),c=s[u]>=o[u]?1:0,v=h>Math.PI?1:0,x=t.convertPoint(s),M=Ud(t,x);if(M>=.5)if(h===Math.PI*2){var k={x:(s.x+o.x)/2,y:(s.y+o.y)/2},R=t.convertPoint(k);l.push(["A",M,M,0,v,c,R.x,R.y]),l.push(["A",M,M,0,v,c,x.x,x.y])}else l.push(["A",M,M,0,v,c,x.x,x.y]);return l}function Z_(i){each(i,function(r,t){var e=r;if(e[0].toLowerCase()==="a"){var n=i[t-1],a=i[t+1];a&&a[0].toLowerCase()==="a"?n&&n[0].toLowerCase()==="l"&&(n[0]="M"):n&&n[0].toLowerCase()==="a"&&a&&a[0].toLowerCase()==="l"&&(a[0]="M")}})}var K_=function(i,r,t,e){var n=[],a,o,s=!!e,l,u;if(s){l=[Infinity,Infinity],u=[-Infinity,-Infinity];for(var h=0,c=i.length;h<c;h++){var v=i[h];l=Ce.min([0,0],l,v),u=Ce.max([0,0],u,v)}l=Ce.min([0,0],l,e[0]),u=Ce.max([0,0],u,e[1])}for(var h=0,x=i.length;h<x;h++){var v=i[h];if(t)a=i[h?h-1:x-1],o=i[(h+1)%x];else if(h===0||h===x-1){n.push(v);continue}else a=i[h-1],o=i[h+1];var M=[0,0];M=Ce.sub(M,o,a),M=Ce.scale(M,M,r);var k=Ce.distance(v,a),R=Ce.distance(v,o),G=k+R;G!==0&&(k/=G,R/=G);var N=Ce.scale([0,0],M,-k),ot=Ce.scale([0,0],M,R),ut=Ce.add([0,0],v,N),Mt=Ce.add([0,0],v,ot);s&&(ut=Ce.max([0,0],ut,l),ut=Ce.min([0,0],ut,u),Mt=Ce.max([0,0],Mt,l),Mt=Ce.min([0,0],Mt,u)),n.push(ut),n.push(Mt)}return t&&n.push(n.shift()),n};function $_(i,r,t){for(var e=!!r,n=[],a=0,o=i.length;a<o;a+=2)n.push([i[a],i[a+1]]);for(var s=K_(n,.4,e,t),l=n.length,u=[],h,c,v,a=0;a<l-1;a++)h=s[a*2],c=s[a*2+1],v=n[a+1],u.push(["C",h[0],h[1],c[0],c[1],v[0],v[1]]);return e&&(h=s[l],c=s[l+1],v=n[0],u.push(["C",h[0],h[1],c[0],c[1],v[0],v[1]])),u}function Q_(i,r){return j_(i,r)}function Vf(i,r,t){var e=[],n=i[0],a=null;if(i.length<=2)return Q_(i,r);(0,f.each)(i,function(l){(!a||!(a.x===l.x&&a.y===l.y))&&(e.push(l.x),e.push(l.y),a=l)});var o=t||[[0,0],[1,1]],s=$_(e,r,o);return s.unshift(["M",n.x,n.y]),s}function DG(i,r){return Ud(i,r)}function FG(i,r){var t=i.getCenter();return Math.atan2(r.y-t.y,r.x-t.x)}function RG(i,r){var t=[];return each(r,function(e){var n=e[0];switch(n.toLowerCase()){case"m":case"l":case"c":t.push(Xf(e,i));break;case"z":default:t.push(e);break}}),t}function NG(i,r){var t=[],e,n,a,o;return each(r,function(s,l){var u=s[0];switch(u.toLowerCase()){case"m":case"c":case"q":t.push(Xf(s,i));break;case"l":e=r[l-1],n=s,a=i.isTransposed,o=a?e[e.length-2]===n[1]:e[e.length-1]===n[2],o?t=t.concat(U_(e,n,i)):t.push(Xf(s,i));break;case"z":default:t.push(s);break}}),Z_(t),t}xn("area","miniArea",{draw:function(i,r){var t=i.style?i.style.opacity:null,e=Zd(i,this,!1),n=(0,f.deepMix)({},{lineJoin:"round",lineCap:"round"},i.style),a=r.addShape("path",{attrs:{path:e,fill:$d(i.color||ji().defaultColor),opacity:t||.4},style:n});return a}}),xn("area","miniAreaSmooth",{draw:function(i,r){var t=i.style?i.style.opacity:null,e=Zd(i,this,!0),n=r.addShape("path",{attrs:{path:e,fill:$d(i.color||ji().defaultColor),opacity:t||.5}});return n}});function Zd(i,r,t){var e=[[0,0],[1,1]],n=[],a=[];(0,f.each)(i.points,function(u){n.push(u[1]),a.push(u[0])}),a=r.parsePoints(a.reverse()),n=kf(r.parsePoints(n));var o=t?Vf(n,!1,e):Kd(n),s=Kd(a);s[0][0]="L";var l=o.concat(s);return l}function Kd(i){for(var r=[],t=0;t<i.length;t++){var e=i[t],n=t===0?"M":"L";r.push([n,e.x,e.y])}return r}function $d(i){return"l(90) 0:"+i+" 1:#ffffff"}var J_=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.init=function(){i.prototype.init.call(this),this.parseShape()},r.prototype.parseShape=function(){var t=this.plot.options;t.smooth?this.config.shape={values:["miniAreaSmooth"]}:this.config.shape={values:["miniArea"]}},r}(jd),q_=J_,tA={main:jd,mini:q_},Qd=["colorField","stackField","groupField"],eA=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.init=function(){this.type="interval",i.prototype.init.call(this);var t=this.plot.options;this._needParserColor()&&this.parseColor(),this.config.color||(this.config.color={values:["#5b8ff9"]});var e=this._getSizeProps(t);e&&this.parseSize(e);var n=this._getStyleProps(t);n&&this.parseStyle(n)},r.prototype.parseColor=function(){var t=this.plot.options,e=this._getColorMappingField(t),n={};e&&(n.fields=e),t.color&&((0,f.isString)(t.color)?n.values=[t.color]:(0,f.isFunction)(t.color)?n.callback=t.color:(0,f.isArray)(t.color)?e?n.values=t.color:t.color.length>0&&(n.values=[t.color[0]]):(0,f.isObject)(t.color)&&(n.fields=e,n.callback=function(a){return t.color[a]})),this.config.color=n},r.prototype.parseSize=function(t){var e=this.plot.options,n={};(0,f.isFunction)(e[t])?(n.fields=[this.config.position.fields],n.callback=e[t]):n.values=[e[t]],this.config.size=n},r.prototype.parseStyle=function(t){var e=this.plot.options,n=this.config.color,a=this.plot.options[t],o={};(0,f.isFunction)(a)?(o.fields=(n==null?void 0:n.fields)||[e.xField,e.yField],o.callback=a):o.cfg=a,this.config.style=o},r.prototype._getSizeProps=function(t){for(var e=["columnSize","barSize"],n=0,a=e;n<a.length;n++){var o=a[n];if((0,f.get)(t,o))return o}},r.prototype._getStyleProps=function(t){for(var e=["columnStyle","barStyle","pieStyle","ringStyle"],n=0,a=e;n<a.length;n++){var o=a[n];if((0,f.get)(t,o))return o}},r.prototype._getColorMappingField=function(t){for(var e=0,n=Qd;e<n.length;e++){var a=n[e];if((0,f.get)(t,a))return[t[a]]}},r.prototype._needParserColor=function(){var t=this.plot.options;if(t.color)return!0;for(var e=0,n=Qd;e<n.length;e++){var a=n[e];if(t[a])return!0}return!1},r}(Cs),rA=eA,nA={main:rA},iA=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.init=function(){var t=this.plot.options;this.config={type:"line",position:{fields:[t.xField,t.yField]},connectNulls:t.connectNulls},t.lineSize&&this.parseSize(),t.smooth&&(this.config.shape={values:["smooth"]}),t.step&&(this.config.shape={values:[t.step]}),(t.seriesField||t.color)&&this.parseColor(),(t.lineStyle||(0,f.get)(t,["line","style"]))&&this.parseStyle()},r.prototype.parseSize=function(){var t=this.plot.options.lineSize,e={};(0,f.isFunction)(t)?e.callback=t:e.values=[t],this.config.size=e},r.prototype.parseColor=function(){var t=this.plot.options,e={};if(t.seriesField&&(e.fields=[t.seriesField]),(0,f.has)(t,"color")){var n=t.color;(0,f.isString)(n)?e.values=[n]:(0,f.isFunction)(n)?e.callback=n:(0,f.isArray)(n)&&(t.seriesField?e.values=n:n.length>0&&(e.values=[n[0]]))}this.config.color=e},r.prototype.parseStyle=function(){var t=this.plot.options,e=t.lineStyle||(0,f.get)(t,["line","style"]),n={fields:null,callback:null,cfg:null};(0,f.isFunction)(e)&&t.seriesField?(n.fields=[t.seriesField],n.callback=e):n.cfg=e,this.config.style=n},r}(Cs),Hf=iA,aA=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.init=function(){var t=this.plot.options;!t.xField||!t.yField||(this.config={type:"line",position:{fields:[t.xField,t.yField]},tooltip:!1},(this._getColorMappingField()||this._needParseAttribute("color"))&&this.parseColor(),this._needParseAttribute("size")&&this.parseSize(),t.line.style&&this.parseStyle(),t.smooth&&(this.config.shape={values:["smooth"]}))},r.prototype.parseSize=function(){var t=this.plot.options,e={};t.line.size?e.values=[t.line.size]:e.values=[2],this.config.size=e},r.prototype.parseColor=function(){var t=this.plot.options,e={},n=this._getColorMappingField();n&&(e.fields=n),t.line.color?e.values=[t.line.color]:(0,f.isString)(t.color)?e.values=[t.color]:(0,f.isFunction)(t.color)?(e.fields=n,e.callback=t.color):(0,f.isArray)(t.color)&&(n?e.values=t.color:t.color.length>0&&(e.values=[t.color[0]])),this.config.color=e},r.prototype.parseStyle=function(){var t=this.plot.options,e=t.line.style,n={};(0,f.isFunction)(e)?(n.fields=this.config.position.fields,n.callback=e):n.cfg=e,this.config.style=n},r.prototype._needParseAttribute=function(t){var e=this.plot.options;return e[t]?!0:!!e.line[t]},r.prototype._getColorMappingField=function(){for(var t=this.plot.options,e=["stackField","seriesField"],n=0,a=e;n<a.length;n++){var o=a[n];if((0,f.get)(t,o))return[t[o]]}},r}(Hf),oA=aA;xn("line","miniLine",{draw:function(i,r){for(var t=kf(i.points),e=[],n=0;n<t.length;n++){var a=t[n],o=n===0?"M":"L";e.push([o,a.x,a.y])}var s=(0,f.deepMix)({},{lineJoin:"round",lineCap:"round"},i.style),l=r.addShape("path",{attrs:(0,f.mix)({path:e,stroke:i.color||ji().defaultColor,lineWidth:i.size||2},s)});return l}}),xn("line","miniLineSmooth",{draw:function(i,r){var t=kf(i.points),e=[[0,0],[1,1]],n=Vf(t,!1,e),a=r.addShape("path",{attrs:(0,f.mix)({path:n,stroke:i.color||ji().defaultColor,lineWidth:i.size||2},i.style)});return a}});var sA=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.init=function(){i.prototype.init.call(this),this.parseShape()},r.prototype.parseShape=function(){var t=this.plot.options;t.smooth?this.config.shape={values:["miniLineSmooth"]}:this.config.shape={values:["miniLine"]}},r}(Hf),lA=sA,uA={main:Hf,guide:oA,mini:lA},fA=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.init=function(){var t=this.plot.options;this.style=t.pointStyle,!(!t.xField||!t.yField)&&(this.config={type:"point",position:{fields:[t.xField,t.yField]}},this.parseColor(),this.parseSize(),t.shape&&this.parseShape(t.shape),t.pointStyle&&this.parseStyle())},r.prototype.parseColor=function(){var t=this.plot.options,e={},n=t.colorField;n&&(e.fields=(0,f.isArray)(n)?n:[n]),t.color&&this._parseColor(t,e),(0,f.isEmpty)(e)||(this.config.color=e)},r.prototype.parseSize=function(){var t=this.plot.options,e={};t.sizeField&&(e.fields=[t.sizeField]),t.pointSize&&(e.values=(0,f.isArray)(t.pointSize)?t.pointSize:[t.pointSize]),this.config.size=e},r.prototype.parseShape=function(t){this.config.shape=t},r.prototype.parseStyle=function(){var t=this.plot.options,e=t.pointStyle,n={fields:null,callback:null,cfg:null},a=t.xField,o=t.yField,s=t.colorField;(0,f.isFunction)(e)?(s?n.fields=(0,f.isArray)(s)?[a,o,s].concat(s):[a,o,s]:n.fields=[a,o],n.callback=e):(n.cfg=e,(0,f.isNil)(e.opacity)||(n.cfg.fillOpacity=e.opacity)),this.config.style=n},r.prototype._parseColor=function(t,e){(0,f.isString)(t.color)?e.values=[t.color]:(0,f.isFunction)(t.color)?e.callback=t.color:(0,f.isArray)(t.color)&&(e.values=t.color)},r}(Cs),hA=fA;function cA(i,r){var t=[];return(0,f.each)(r,function(e){var n=e[i];t.push(n)}),(0,f.uniq)(t)}var vA=["seriesField","stackField"],dA=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.init=function(){var t=this.plot.options;this.style=t.point.style,!(!t.xField||!t.yField)&&(this.config={type:"point",position:{fields:[t.xField,t.yField]},tooltip:!1},this.parseColor(),this._needParseAttribute("size")&&this.parseSize(),t.point.shape&&this.parseShape(t.point.shape),t.point.style&&this.parseStyle())},r.prototype.parseColor=function(){var t=this.plot.options,e={},n=this._getColorMappingField(t);if(n)this._parseColorByField(t,e,n);else if(t.point&&t.point.color)e.values=[t.point.color];else if(t.color)this._parseColor(t,e);else{var a=this.plot.getTheme();e.values=[a.defaultColor]}(0,f.keys)(e).length>0&&(this.config.color=e)},r.prototype.parseSize=function(){var t=this.plot.options,e={};e.values=[t.point.size],this.config.size=e},r.prototype.parseShape=function(t){var e={};(0,f.isString)(t)?e.values=[t]:(0,f.isObject)(t)&&(e.fields=t.fields,e.callback=t.callback),this.config.shape=e},r.prototype.parseStyle=function(){var t=this.plot.options,e=t.point&&t.point.style,n={fields:null,callback:null,cfg:null},a=this._getColorMappingField(t);(0,f.isFunction)(e)?(n.fields=[t.xField,t.yField],n.callback=e,a&&n.fields.unshift(a)):n.cfg=e,this.config.style=n},r.prototype._parseColorByField=function(t,e,n){if(e.fields=[n],t.point.color){for(var a=cA(n,t.data).length,o=[],s=0;s<a;s++)o.push(t.point.color);e.values=o}else t.color&&this._parseColor(t,e)},r.prototype._parseColor=function(t,e){var n=this._getColorMappingField(t);(0,f.isString)(t.color)?e.values=[t.color]:(0,f.isFunction)(t.color)?e.callback=t.color:(0,f.isArray)(t.color)&&(n?e.values=t.color:t.color.length>0&&(e.values=[t.color[0]]))},r.prototype._needParseAttribute=function(t){var e=this.plot.options,n=e.point&&(0,f.has)(e.point,t);return n},r.prototype._getColorMappingField=function(t){for(var e=0,n=vA;e<n.length;e++){var a=n[e];if((0,f.get)(t,a))return[t[a]]}},r}(Cs),pA=dA,gA={guide:pA,circle:hA},yA={area:tA,line:uA,point:gA,interval:nA};function ri(i,r,t){var e=yA[i][r];return new e(t).config}function mA(i){var r=QM,t=i.split(" "),e=r[t[1]],n=parseInt(t[0],10);return[e.format,n*e.value]}function bi(i,r){if(!r)return i;Object.prototype.hasOwnProperty.call(r,"tickCount")&&(i.tickCount=r.tickCount),Object.prototype.hasOwnProperty.call(r,"type")&&r.type!=="dateTime"&&(i.type=r.type),Object.prototype.hasOwnProperty.call(r,"tickInterval")&&(r.type==="time"?i.tickInterval=mA(r.tickInterval):i.tickInterval=r.tickInterval),r.type==="time"&&r.mask&&(i.mask=r.mask),Object.prototype.hasOwnProperty.call(r,"min")&&(i.min=r.min),Object.prototype.hasOwnProperty.call(r,"max")&&(i.max=r.max),Object.prototype.hasOwnProperty.call(r,"minLimit")&&(i.minLimit=r.minLimit),Object.prototype.hasOwnProperty.call(r,"maxLimit")&&(i.maxLimit=r.maxLimit),Object.prototype.hasOwnProperty.call(r,"nice")&&(i.nice=r.nice),Object.prototype.hasOwnProperty.call(r,"formatter")&&(i.formatter=r.formatter),Object.prototype.hasOwnProperty.call(r,"exponent")&&(i.exponent=r.exponent),Object.prototype.hasOwnProperty.call(r,"base")&&(i.base=r.base),r.tickMethod&&(i.tickMethod=r.tickMethod)}function xA(i,r){var t=(0,f.filter)(r,function(a){return(0,f.isNumber)(a)}),e=Math.min.apply(Math,t),n=Math.max.apply(Math,t);e>0?(0,f.isNil)(i.min)&&(i.min=0):n<0&&(0,f.isNil)(i.max)&&(i.max=0)}var Wf;function bA(i,r){var t={easing:"easeLinear",duration:1e4},e=(0,f.deepMix)({},r,t),n=i.get("element").geometry;n.labelsContainer.set("visible",!1);var a=i.get("index"),o=n.coordinate,s=n.scales,l=s[Wf.options.yField],u=(0,f.clone)(i.get("origin"));wA(i,o);var h=i.get("clipShape"),c=i.get("parent"),v=12,x=null,M=Wf.options.seriesField;M&&(x=c.addShape("text",{attrs:{x:o.start.x+v,y:0,text:u.data[0][M],fill:i.attr("stroke"),fontSize:12,textAlign:"start",textBaseline:"middle"}}));var k=x?16:0,R=c.addShape("text",{attrs:{x:o.start.x+v,y:k,text:"test"+a,fill:i.attr("stroke"),fontSize:12,textAlign:"start",textBaseline:"middle"}});e.callback=function(){i&&!i.get("destroyed")&&(i.setClip(null),h.remove(),R.animate({opacity:0},300,function(){R.remove(),(0,f.isNil)(x)||x.remove();var ot=n.labelsContainer;ot.get("visible")||ot.set("visible",!0)}))};var G=e.delay;(0,f.isFunction)(G)&&(G=e.delay(a));var N=e.easing;(0,f.isFunction)(N)&&(N=e.easing(a)),h.animate({width:o.getWidth()},e.duration,N,e.callback,G),e.onFrame=function(ot){var ut=Jd(ot,u,o);if(!!ut){R.attr("x",ut[0]+v),R.attr("y",ut[1]+k);var Mt=SA(l,ut[1],o);l.formatter&&(Mt=l.formatter(Mt)),R.attr("text",Mt)}},R.animate(e.onFrame,{duration:e.duration,easing:N,callback:e.callback,delay:G}),x&&x.animate({onFrame:function(ot){var ut=Jd(ot,u,o);!ut||(x.attr("x",ut[0]+v),x.attr("y",ut[1]))}},e.duration,N,e.callback,G)}function wA(i,r){var t=r.start,e=r.end,n=r.height;i.setClip({type:"rect",attrs:{x:t.x,y:e.y,width:0,height:n}})}function Jd(i,r,t){for(var e=r.points,n=t.start.x+t.getWidth()*i,a=0;a<e.length-1;a++){var o=e[a],s=e[a+1];if(n>=o.x&&n<=s.x){var l=(s.y-o.y)/(s.x-o.x),u=o.y+l*(n-o.x);return[n,u]}}}function SA(i,r,t){var e=(r-t.start.y)/(t.end.y-t.start.y);return i.invert(e).toFixed(2)}function CA(i){Wf=i}hi("clipingWithData",bA);var MA=function(){function i(r){this.type="shape",this.shapes=r.shapes,this.nodes=[],this._parserNodes(),this.origion_nodes=(0,f.deepMix)([],this.nodes)}return i.prototype.measure=function(r){var t=(0,f.deepMix)({},yE(r),{shape:r});return t},i.prototype.measureNodes=function(){var r=this,t=[],e=[];(0,f.each)(this.shapes,function(n,a){var o=(0,f.deepMix)({},r.nodes[a],r.measure(n));o.width!==0&&o.height!==0&&(t.push(o),e.push(n))}),this.nodes=t,this.shapes=e},i.prototype._parserNodes=function(){var r=this;(0,f.each)(this.shapes,function(t){var e=r.measure(t);r.nodes.push(e)})},i}(),qd=MA;function EA(i,r,t){return t===void 0&&(t={ratio:.6}),r.width*t.ratio}var _A={type:"padding",usage:"assign",expression:EA};function AA(i,r){var t=[i.topLeft,i.topRight,i.bottomRight,i.bottomLeft],e=[r.topLeft,r.topRight,r.bottomRight,r.bottomLeft],n=hd(t,e);return Math.round(n)>=2}var TA={type:"group",usage:"compare",expression:AA};function PA(i,r,t){t===void 0&&(t={value:4});var e=[i.topLeft,i.topRight,i.bottomRight,i.bottomLeft],n=[r.topLeft,r.topRight,r.bottomRight,r.bottomLeft],a=hd(e,n);return Math.round(a)>=t.value}var LA={type:"chain",usage:"compare",expression:PA};function OA(i,r,t){t===void 0&&(t={value:5});var e=Math.abs(i.bottom-r.top);return Math.round(e)>=t.value}var IA={type:"chain",usage:"compare",expression:OA};function kA(i,r,t){return t===void 0&&(t={ratio:.15}),i.width<r.width*t.ratio}var BA={type:"padding",usage:"compare",expression:kA};function DA(i,r){var t=2,e=r.coord.radius/t;return Math.min(e,i.value)}var FA={type:"padding",usage:"assign",expression:DA};function RA(i,r,t){return t===void 0&&(t={ratio:.8}),r.radius*t.ratio}var NA={type:"padding",usage:"assign",expression:RA},tp={elementDist:LA,elementDistVertical:IA,elementCollision:TA,elementWidth:BA,columnWidth:_A,ringThickness:NA,minRingThickness:FA};function GG(i,r){tp[i]=r}function Ko(i){i.attr("text","")}function GA(i,r,t,e){var n=e.nodes.nodes,a=n[t],o=[];if(!a.shape.get("blank"))for(var s=0;s<n.length;s++){var l=n[s],u=l.shape;if(s!==t&&!u.get("blank")){var h=ep(a,l);h&&o.push(l)}}o.length>0&&(o.push(a),o.sort(function(c,v){return v.top-c.top}),(0,f.each)(o,function(c,v){if(v>0){var x=c.shape;Ko(x),x.set("blank",!0)}}))}function ep(i,r){return!(i.bottom<r.top||r.bottom<i.top||i.right<r.left||r.right<i.left)}var go=p(19432),YA=1e3,rp=60*YA,jf=60*rp,Pl=24*jf,np=31*Pl,ip=365*Pl;function ap(i,r,t,e){var n=e.nodes.nodes,a;t===n.length-1?a=n[t-1].shape.get("delegateObject").item.name:a=n[t+1].shape.get("delegateObject").item.name;var o=new Date(a),s=i.get("delegateObject").item.name,l=new Date(s),u=n[0].shape.get("delegateObject").item.name,h=new Date(u),c=n[n.length-1].shape.get("delegateObject").item.name,v=new Date(c),x=op(h,v),M=op(l,o);if(x===M){if(t!==0&&t!==n.length-1){var k=VA(x);i.attr("text",go.default.format(l,k))}return}if(t!==0){var R=n[t-1].shape.get("delegateObject").item.name,G=new Date(R),N=zA(x,l,G);if(N){var k=XA(x,M);i.attr("text",go.default.format(l,k));return}}}function zA(i,r,t){var e=sp(r,i),n=sp(t,i);return e===n}function op(i,r){var t,e=Math.abs(i-r),n={minute:[rp,jf],hour:[jf,Pl],day:[Pl,np],month:[np,ip],year:[ip,Infinity]};return(0,f.each)(n,function(a,o){e>=a[0]&&e<a[1]&&(t=o)}),t}function XA(i,r){for(var t=["year","month","day","hour","minute"],e=["YYYY","MM","DD","HH","MM"],n=t.indexOf(i)+1,a=t.indexOf(r),o="",s=n;s<=a;s++)o+=e[s],s<a&&(o+="-");return o}function VA(i){var r=["year","month","day","hour","minute"],t=["YYYY","MM","DD","HH","MM"],e=r.indexOf(i),n=t[e];return n}function sp(i,r){if(r==="year")return i.getFullYear();if(r==="month")return i.getMonth()+1;if(r==="day")return i.getDay()+1;if(r==="hour")return i.getHours()+1;if(r==="minute")return i.getMinutes()+1}function HA(i){var r=/^(?:(?:[0-2][0-3])|(?:[01]\d)):[0-5]\d$/,t=/^(?:(?:[0-2][0-3])|(?:[01]\d))(?::[0-5]\d){2}$/;return r.test(i)||t.test(i)}var lp={k:{number:1e3,index:0},m:{number:1e6,index:1},b:{number:1e9,index:2},t:{number:1e12,index:3}};function up(i,r,t,e){if(!(!(0,f.has)(e,"node")||!(0,f.has)(e.node,"node"))){var n=e.nodes.nodes,a=parseFloat(i.get("origin").text);if(a!==0){if(r.formatter){i.attr("text",r.formatter(a));return}if(r.unit){var o=fp(r,a),s=o.num,l=o.unitname;i.attr("text",s+l)}else{var u=jA(n),h=cd(u),l=WA(h),c=lp[l].number,v=UA(n),x=ZA(v,c),s=fp({unit:l,decimal:x},a).num;i.attr("text",s+l)}}}}function fp(i,r){var t=["k","m","b","t"],e,n;if(i.unit==="auto"){var a=Math.floor(Math.log(r)/Math.log(1e3));n=t[a-1],e=(r/Math.pow(1e3,a)).toFixed(i.decimal)}else if(i.unit){var o=lp[i.unit];n=i.unit,e=(r/o.number).toFixed(i.decimal)}return{num:e,unitname:n}}function WA(i){var r=["k","m","b","t"],t=Math.floor(Math.log(i)/Math.log(1e3));return r[t-1]}function jA(i){var r=[];return(0,f.each)(i,function(t){var e=t,n=parseFloat(e.shape.get("origin").text);r.push(n)}),r}function UA(i){if(i.length>=2){var r=parseFloat(i[0].shape.get("origin").text),t=parseFloat(i[1].shape.get("origin").text);return Math.abs(r-t)}return 0}function ZA(i,r){var t=Math.floor(Math.log10(r));if(i>=r){var e=i%r;if(e>0){var n=Math.floor(Math.log10(e));return Math.abs(n-t)}}else{var a=Math.floor(Math.log10(i));return Math.abs(a-t)}return 0}function KA(i,r,t){var e=t.nodes.nodes;if(r!==e.length-1){var n=e[r],a=e[r+1],o=$A(n,a).dir,s=i.get("startPoint");o==="x"&&i.attr("y",s.y+20)}}function $A(i,r){var t,e={x:r.centerX-i.centerX,y:r.centerY-i.centerY},n=Math.sqrt(e.x*e.x+e.y*e.y),a={x:10,y:0},o=Math.sqrt(a.x*a.x+a.y*a.y),s=If(e,a),l=s/(n*o)*180/Math.PI;l<0&&(l=360-l),l=QA(l);var u=Math.abs(i.centerX-r.centerX),h=Math.abs(i.centerY-r.centerY);return l>45?t="x":l<45&&(t="y"),{dir:t,distX:u,distY:h}}function QA(i){return i>90&&i<=180?180-i:i>180&&i<270?i-180:360-i}function JA(i,r,t,e){var n=e.nodes.nodes;if(t!==0){var a=n[t],o=n[t-1];if(ep(a,o)){var s=e.plot.view.geometries[0].elements[0],l=o.top-a.height/2,u=10;if(l-u>e.region.top){var h=a.shape.get("origin"),c=s.getShapeId(h),v=s.getShapes(),x=qA(c,v).get("box"),M=x.left+x.width/2,k=x.top,R=s.get("labelController").labelsContainer,G=R.addShape("path",{attrs:{path:[["M",M,k],["L",a.shape.attr("x"),l]],stroke:"#ccc",lineWidth:1}}),N={x:i.attr("x"),y:i.attr("y")};a.shape.attr("y",l-u),n[t]=e.nodes.measure(a.shape),n[t].line=G,n[t].origin_position=N}}}}function qA(i,r){var t;return(0,f.each)(r,function(e){var n=e,a=n.get("id");a===i&&(t=n)}),t}function tT(i,r,t,e){var n=e.nodes.nodes,a=n.length%2!=0;if(!hp(r.keep,t,n)){var o=t%2==0;(!a&&o||a&&!o)&&Ko(i)}}function hp(i,r,t){var e=[];(0,f.each)(i,function(s){s==="start"?e.push(r===0):s==="end"?e.push(r===t.length-1):(0,f.isNumber)(s)&&e.push(r===s)});for(var n=0,a=e;n<a.length;n++){var o=a[n];if(o===!0)return!0}return!1}function eT(i,r,t,e){var n=e.nodes.nodes;if(!hp(r.keep,t,n)){var a=i.attr("text"),o=i.get("delegateObject").item.name;a!==o&&Ko(i)}}function rT(i,r,t,e){var n=e.nodes.nodes,a=iT(n);if(!(t<=1)){var o=n[t],s=nT(t,n),l=s.centerX-o.centerX,u=s.centerY-o.centerY,h=Math.sqrt(l*l+u*u);h<a&&(Ko(i),i.set("blank",!0))}}function nT(i,r){for(var t=i-1;t>0;t--){var e=r[t];if(!e.shape.get("blank"))return e}}function iT(i){var r=(0,f.deepMix)([],i);return r.sort(function(t,e){return e.width-t.width}),Math.round(r[0].width)}function aT(i,r,t,e){var n=e.nodes.nodes,a=n[t];a.line&&a.line.remove();var o=e.plot.initialOptions.data,s=e.plot[e.plot.type]||e.plot[e.plot.baseType],l=(0,f.get)(s,["label","fields",0],(0,f.get)(s,["position","fields",1])),u=oT(o,l,n),h=!1;if((0,f.each)(u,function(M){M.shape.get("origin")===a.shape.get("origin")&&(h=!0)}),h){if(a.origin_position){var c=a.origin_position,v=c.x,x=c.y;i.attr("x",v),i.attr("y",x)}}else Ko(i)}function oT(i,r,t){var e=[];(0,f.each)(i,function(h){e.push(h[r])}),e.sort(function(h,c){return h-c});var n=e[0],a=Uf(t,r,n),o=e[e.length-1],s=Uf(t,r,o),l=sT(e),u=Uf(t,r,l);return{min:a,max:s,median:u}}function sT(i){var r=(0,f.clone)(i);r.sort(function(e,n){return e-n});var t=Math.floor(r.length/2);return r.length%2,r[t]}function Uf(i,r,t){for(var e=0,n=i;e<n.length;e++){var a=n[e],o=a.shape.get("origin")._origin;if(o[r]===t)return a}}function cp(i,r){var t=r.abbreviateBy?r.abbreviateBy:"end",e=i.attr("text"),n;t==="end"&&(n=e[0]+"..."),t==="start"&&(n="..."+e[e.length-1]),t==="middle"&&(n=e[0]+"..."+e[e.length-1]),i.resetMatrix(),i.attr({text:n,textAlign:"center",textBaseline:"top"})}function lT(i,r,t,e){var n=e.nodes.nodes,a=i.attr("text"),o=/^\d+$/.test(a);o?up(i,r,t,n):HA(a)?ap(i,r,t,n):cp(i,r)}function uT(i,r){i.resetMatrix(),i.attr({rotate:360-r.degree,textAlign:"right",textBaseline:"middle"})}function fT(i,r){for(var t=i.attr("text"),e=Math.ceil(t.length/r.lineNumber),n="",a=1;a<r.lineNumber;a++){var o=e*a;n=t.slice(0,o)+`
`+t.slice(o)}var s=i.attr("fontSize");i.attr({text:n,lineHeight:s,textAlign:"center",textBaseline:"top"})}var vp={textWrapper:fT,textRotation:uT,textAbbreviate:cp,textHide:Ko,digitsAbbreviate:up,datetimeStringAbbrevaite:ap,robustAbbrevaite:lT,nodesResampling:tT,nodesResamplingByAbbrevate:eT,nodesResamplingByChange:rT,nodesResamplingByState:aT,nodeJitter:KA,nodeJitterUpward:JA,clearOverlapping:GA};function YG(i,r){vp[i]=r}var hT=function(){function i(r){this.iterationTime=10,this.iterationIndex=0,this.rulesLocker=[],this.constraintIndex=0,(0,f.assign)(this,r),this.currentConstraint=this.constraints[0],this.rules&&(this.iterationTime=this.rules[this.currentConstraint.name].length),this._start(),this._run(),this._end()}return i.prototype._start=function(){this.onStart&&this.onStart(this.nodes)},i.prototype._iteration=function(){var r;this.nodes.type==="shape"?r=this.nodes:r=this.nodes,r.type==="shape"&&r.measureNodes(),this.rules&&this._applyRules(),r.type==="shape"&&r.measureNodes(),this.onIteration&&this.onIteration(this.nodes)},i.prototype._end=function(){this.onEnd&&this.onEnd(this.nodes)},i.prototype._run=function(){for(var r=this._constraintsTest();!r&&!(this.iterationIndex>this.iterationTime-1);)this._iteration(),r=this._constraintsTest(),this.iterationIndex++;this.constraintIndex<this.constraints.length-1&&(this.constraintIndex++,this.currentConstraint=this.constraints[this.constraintIndex],this.iterationTime=this.rules?this.rules[this.currentConstraint.name].length:1,this.iterationIndex=0,this._run())},i.prototype._constraintsTest=function(){var r=tp[this.currentConstraint.name],t=this.currentConstraint.option;return r.usage==="compare"?this._constraintCompare(r,t):this._constraintAssignment(r,t)},i.prototype._constraintCompare=function(r,t){var e=r.type,n=r.expression,a=this.nodes.nodes;if(e==="chain")return this._chainConstraintCompare(n,a,t);if(e==="padding")return this._paddingConstraintCompare(n,this.region,a,t);if(e==="group")return this._groupConstraintCompare(n,a,t)},i.prototype._chainConstraintCompare=function(r,t,e){for(var n=0;n<t.length-1;n++){var a=t[n],o=t[n+1];if(r(a,o,e)===!1)return!1}return!0},i.prototype._paddingConstraintCompare=function(r,t,e,n){if(t)for(var a=0,o=e;a<o.length;a++){var s=o[a];if(r(s,t,n)===!1)return!1}return!0},i.prototype._groupConstraintCompare=function(r,t,e){for(var n=0;n<t.length;n++)for(var a=t[n],o=0;o<t.length;o++)if(o!==n){var s=t[o];if(r(a,s,e)===!1)return!1}return!0},i.prototype._constraintAssignment=function(r,t){var e=r.type,n=r.expression,a=this.nodes.nodes;if(e==="chain")return this._chainConstraintAssign();if(e==="padding")return this._paddingConstraintAssign(n,this.region,a,t)},i.prototype._chainConstraintAssign=function(){return!0},i.prototype._paddingConstraintAssign=function(r,t,e,n){if(t)for(var a=0,o=e;a<o.length;a++){var s=o[a],l=r(s,t,n);s.value=l}return!0},i.prototype._applyRules=function(){for(var r=this.rules[this.currentConstraint.name][this.iterationIndex],t=vp[r.name],e=r.option?r.option:{},n=this.nodes.nodes,a=0;a<n.length;a++){var o=n[a];this._applyRule(o.shape,t,e,a)}},i.prototype._applyRule=function(r,t,e,n){var a={nodes:this.nodes,region:this.region,plot:this.plot};t(r,e,n,a)},i}(),dp=hT,cT=function(){function i(r){(0,f.assign)(this,r),this.init()}return i.prototype.init=function(){this.type=this.getType(),this.shouldApply()&&this.apply()},i}(),pp=cT,vT={cat:"category",timeCat:"category",time:"dateTime",linear:"linear"},dT=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.init=function(){this.axisInstance=this.getAxisInstance(),i.prototype.init.call(this)},r.prototype.shouldApply=function(){var t=this.plot.options;return this.responsiveTheme.axis?!!(this.responsiveTheme.axis[this.dim]&&t[this.dim+"Axis"].visible&&t[this.dim+"Axis"].label&&t[this.dim+"Axis"].label.visible):!1},r.prototype.apply=function(){for(var t=this,e=this.plot.view.backgroundGroup.findAll(function(h){var c=h.get("name");if(c==="axis-label"){var v=h.get("delegateObject").axis.get("field");if(v===t.plot.options[t.dim+"Field"])return h}}),n=[],a=0;a<e.length;a++)n.push(e[a]);var o=new qd({shapes:n}),s=this.responsiveTheme.axis.x[this.type],l=s.constraints,u=s.rules;new dp({nodes:o,constraints:l,region:this.plot.getViewRange(),rules:u,plot:this.plot,onEnd:function(h){t.updateTicks(h.origion_nodes)}})},r.prototype.getType=function(){var t=this.plot.options,e=this.dim+"Axis",n=this.dim+"Field";if(t[e]&&t[e].type&&t[e].type==="dateTime")return"dateTime";var a=this.plot.view.getScaleByField([t[n]]).type;return vT[a]},r.prototype.getAxisInstance=function(){var t,e,n=this.dim==="x"?0:1,a=(t=this.plot.view.getController("axis"))===null||t===void 0?void 0:t.getComponents();if(a)return(e=a[n])===null||e===void 0?void 0:e.component},r.prototype.updateTicks=function(t){var e=this,n=this.plot.view.backgroundGroup.findAll(function(o){var s=o.get("name");if(s==="axis-tickline-group"){var l=o.get("delegateObject").axis.get("field");if(l===e.plot.options[e.dim+"Field"])return o}})[0];if(n){var a=n.get("children");(0,f.each)(t,function(o,s){o.shape.attr("text")===""&&a[s].attr("opacity",0)})}this.plot.canvas.draw()},r}(pp),yo=dT;function pT(i){var r=i.getResponsiveTheme(),t=i.canvas;new yo({plot:i,responsiveTheme:r,dim:"x"}),new yo({plot:i,responsiveTheme:r,dim:"y"}),t.draw()}var gT=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.shouldApply=function(){return!(!this.responsiveTheme.label||!this.responsiveTheme.label[this.type])},r.prototype.apply=function(){var t=this.plot.view.geometries[0].labelsContainer.get("children"),e=[];(0,f.each)(t,function(l){e=e.concat(l.findAllByName("label"))});var n=new qd({shapes:e}),a=this.responsiveTheme.label[this.type],o=a.constraints,s=a.rules;new dp({nodes:n,constraints:o,rules:s,plot:this.plot,region:this.plot.view.coordinateBBox})},r.prototype.getType=function(){return null},r}(pp),gp=gT,yT=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getType=function(){return(0,f.get)(this.plot.options,["label","type"],"point")},r}(gp);function mT(i){var r=i.getResponsiveTheme();new yT({plot:i,responsiveTheme:r})}var xT=[],bT=[{name:"responsiveAxis",method:pT},{name:"responsivePointLabel",method:mT}],wT={preRender:xT,afterRender:bT},yp=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultOptions=function(){var t=this.layer.theme,e=t.label,n=e===void 0?{}:e;return(0,V.__assign)({offsetX:0,offsetY:0},n)},r.prototype.getLabelOffset=function(){return this.getLabelOffsetByDimAndFactor("y",-1)},r.prototype.getLabelItemAttrs=function(t,e){var n=this,a=this.options,o=a.style,s=a.formatter,l=(0,f.get)(t,"model.mappingData",[]);return(0,f.map)(l,function(u,h){var c,v=n.getValue(u);return(0,V.__assign)((0,V.__assign)((0,V.__assign)({},n.getPosition(u)),{text:s?s(v,(c={},c[ws]=u._origin,c.mappingDatum=u,c.mappingDatumIndex=h,c.element=t,c.elementIndex=e,c),e):v,textAlign:"center",textBaseline:"middle"}),o)})},r.prototype.getValue=function(t){return(0,f.get)(t._origin,this.layer.options.yField)},r.prototype.getPosition=function(t){var e={x:(0,f.isArray)(t.x)?(0,f.last)(t.x):t.x,y:(0,f.isArray)(t.y)?(0,f.last)(t.y):t.y};return e},r.prototype.layoutLabels=function(t,e){var n=this;if(!!this.options.adjustPosition){var a=this.isOverlapped(e);if(a){var o=this.getGlobalTolerance(e);(0,f.each)(e,function(s,l){l>1&&n.labelResamplingByChange(s,e,l,o)})}a=this.isOverlapped(e),a&&(0,f.each)(e,function(s,l){s.get("visible")&&n.clearOverlapping(s,e,l)})}},r.prototype.adjustLabel=function(){},r.prototype.labelResamplingByChange=function(t,e,n,a){var o=this.findPrevious(n,e),s=this.getCenter(t),l=this.getCenter(o),u=l.x-s.x,h=l.y-s.y,c=Math.sqrt(u*u+h*h);c<a&&t.set("visible",!1)},r.prototype.clearOverlapping=function(t,e,n){for(var a=[],o=0;o<e.length;o++){var s=e[o];if(o!==n&&s.get("visible")){var l=nd(t.getBBox(),s.getBBox());l&&a.push(s)}}a.length>0&&(a.push(t),a.sort(function(u,h){return h.minY-u.minY}),(0,f.each)(a,function(u,h){h>0&&u.set("visible",!1)}))},r.prototype.isOverlapped=function(t){for(var e=0;e<t.length;e++)if(t[e].get("visible")){for(var n=t[e].getBBox(),a=0;a<t.length;a++)if(a!==e&&t[a].get("visible")){var o=t[a].getBBox(),s=nd(n,o);if(s)return!0}}return!1},r.prototype.getGlobalTolerance=function(t){var e=t.slice();return e.sort(function(n,a){return a.getBBox().width-n.getBBox().width}),Math.round(e[0].getBBox().width)},r.prototype.findPrevious=function(t,e){for(var n=t-1;n>0;n--)if(e[n].get("visible"))return e[n]},r.prototype.getCenter=function(t){var e=t.getBBox(),n=e.minX,a=e.maxX,o=e.minY,s=e.maxY;return{x:n+(a-n)/2,y:o+(s-o)/2}},r}(Tf),mp=yp;na("point",yp);var xp=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.layoutLabels=function(t,e){var n=this,a,o=[],s=Jr.fromBBoxObject(this.getCoordinateBBox()),l=t.getXYFields(),u=l[0],h=l[1],c=(0,f.groupBy)(e,function(x){return x.get(ca)[wn.FIELD_ORIGIN][u]}),v=(a=e[0])===null||a===void 0?void 0:a.get("offset");(0,f.each)((0,f.keys)(c).reverse(),function(x){for(var M=n.sortLabels(t,c[x]);M.length;){var k=M.shift();if(w_(k,o,function(N,ot){return N._origin[u]===ot._origin[u]&&N._origin[h]===ot._origin[h]})){k.set("visible",!1);continue}Al(k,s);var R=Tl(k,o),G=void 0;if(R&&(k.attr("y",k.attr("y")+2*v),Al(k,s),G=Tl(k,o)),G){k.set("visible",!1);continue}o.push(k)}})},r.prototype.sortLabels=function(t,e){var n=t.getXYFields()[1],a=[];return e.sort(function(o,s){return s.get(ca)[wn.FIELD_ORIGIN][n]-o.get(ca)[wn.FIELD_ORIGIN][n]}),e.length>0&&a.push(e.shift()),e.length>0&&a.push(e.pop()),a.push.apply(a,e),a},r}(mp),ST=xp;na("point-auto",xp);var CT=8,MT=function(){function i(r){this.destroyed=!1,this.view=r.view,this.plot=r.plot;var t=this.getDefaultOptions();this.options=(0,f.deepMix)(t,r,{}),this.init()}return i.prototype.init=function(){var r=this;this.container=this.getGeometry().labelsContainer,this.view.on("beforerender",function(){r.clear(),r.plot.canvas.draw()})},i.prototype.render=function(){var r=this,t=this.getGeometry().elements;(0,f.each)(t,function(e){var n=r.getShapeInfo(e.shape),a=r.options,o=a.style,s=a.offsetX,l=a.offsetY,u=r.options.formatter,h=u?u(n.name):n.name;r.container.addShape("text",{attrs:(0,f.deepMix)({},{x:n.x+s,y:n.y+l,text:h,fill:n.color,textAlign:"left",textBaseline:"middle"},o),name:"label"})})},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.hide=function(){this.container.set("visible",!1),this.plot.canvas.draw()},i.prototype.show=function(){this.container.set("visible",!0),this.plot.canvas.draw()},i.prototype.destroy=function(){this.container&&this.container.remove(),this.destroyed=!0},i.prototype.getBBox=function(){return this.container.getBBox()},i.prototype.getDefaultOptions=function(){var r=this.plot.theme,t=(0,f.clone)(r.label.style);return delete t.fill,{offsetX:CT,offsetY:0,style:t}},i.prototype.getGeometry=function(){return(0,f.find)(this.view.geometries,function(r){return r.type==="line"})},i.prototype.getShapeInfo=function(r){var t=r.get("origin").points,e=t[t.length-1],n=r.attr("stroke"),a=this.plot.options.seriesField,o=r.get("origin").data[0][a];return{x:e.x,y:e.y,color:n,name:o}},i}(),bp=MT,ET={line:"line",point:"point"},_T=Ai(ET);(0,f.assign)(dn,_T);var AT={stroke:"transparent",fill:"#FCC509",lineWidth:0},TT={stroke:"#FFF",fill:"#FCC509",lineWidth:1},PT={stroke:"rgba(0,0,0,0.85)",fill:"#FCC509",lineWidth:1},LT=function(){function i(r){this.points=[],this.labels=[],this.name="markerPoints",this.defaultCfg={offsetX:0,offsetY:0,style:{normal:AT,selected:PT,active:TT},label:{visible:!1,offsetY:-8,position:"top",style:{fill:"rgba(0, 0, 0, 0.85)"}},animation:!1},this.view=r.view,this.size=r.size||6,this.config=(0,f.deepMix)({},this.defaultCfg,r),this._init()}return i.prototype.render=function(){var r=this.getDataArray();this._renderPoints(r),this.view.canvas.draw(),this._addInteraction()},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.destroy=function(){this.container&&this.container.remove(),this.points=[],this.labels=[]},i.prototype.getDataArray=function(){var r=this.view.geometries[0];return r.dataArray},i.prototype._init=function(){var r=this,t=this.view.foregroundGroup;this.container=t.addGroup(),this.render(),this.view.on("beforerender",function(){r.clear()})},i.prototype._renderPoints=function(r){var t=this;(0,f.each)(this.config.data,function(e,n){(0,f.each)(r,function(a){var o=(0,f.find)(a,function(G){return(0,f.isMatch)(G._origin,e)});if(o){var s=t.config.style.normal,l=t.container.addGroup({name:t.name}),u=o.x,h=o.y;(0,f.isArray)(u)&&(u=u[0]),(0,f.isArray)(h)&&(h=h[0]);var c=t.config.symbol,v=t.config,x=v.offsetX,M=v.offsetY,k=void 0;if((0,f.isString)(c)&&c.startsWith("image://")){var R=c.substr(8);k=l.addShape("image",{attrs:{x:u-t.size/2+x,y:h-t.size/2+M,img:R,width:t.size,height:t.size}})}else c=(0,f.isString)(c)?WM.MarkerSymbols[c]:c,k=l.addShape({type:"marker",name:"marker-point",id:"point-"+n,attrs:(0,V.__assign)((0,V.__assign)({x:u+x,y:h+M,r:t.size/2},s),{symbol:c})});t.points.push(k),t._animatePoint(k),t._renderLabel(l,o,n),l.set("data",e),l.set("origin",o)}})})},i.prototype._renderLabel=function(r,t,e){var n=this.config.label;if(n&&n.visible){var a=n.offsetX,o=a===void 0?0:a,s=n.offsetY,l=s===void 0?0:s,u=n.formatter,h=n.position,c=n.field,v=t._origin[c];u&&(v=u(v,{_origin:t._origin},e));var x=(0,f.isArray)(t.x)?t.x[0]:t.x,M=(0,f.isArray)(t.y)?t.y[0]:t.y,k=r.addShape("text",{name:"marker-label",id:"label-"+e,attrs:(0,V.__assign)((0,V.__assign)({x:x+o,y:M+l,text:v||""},n.style),{textAlign:"center",textBaseline:h==="top"?"bottom":"top"})});this.labels.push(k)}},i.prototype._addInteraction=function(){var r=this,t=this.config.events;(0,f.each)(t,function(e,n){r.container.on(r.name+":"+n,function(a){e(a);var o=a.target.get("parent"),s=o.get("children")[0];if(s){var l=s.get("data"),u=s.get("id"),h={id:u,data:l};n==="click"?r.selectedPoint&&r.selectedPoint.get("id")===u?(r.selectedPoint=null,r.setState("inactive",h)):(r.selectedPoint=s,r.setState("selected",h)):n==="mouseenter"?r.setState("active",h):n==="mouseleave"&&r.setState("inactive",h)}r.view.canvas.draw()}),r.view.on("click",function(a){var o=a.target.get("parent");(!o||o.get("name")!==r.name&&r.selectedPoint)&&(r.selectedPoint=null,r.setState("inactive"))})})},i.prototype.setState=function(r,t){var e=this;r==="active"?(!this.selectedPoint||t.id!==this.selectedPoint.get("id"))&&this._onActive(t):r==="inactive"?this.points.forEach(function(n){return e._onInactive(n)}):r==="selected"&&this._onSelected(t)},i.prototype._onActive=function(r){var t=this,e=this.config.style.active;(0,f.each)(this.points,function(n){n.get("id")===r.id?(0,f.each)(e,function(a,o){n.attr(o,a)}):t._onInactive(n)})},i.prototype._onInactive=function(r){var t=this.config.style.normal;(!this.selectedPoint||r.get("id")!==this.selectedPoint.get("id"))&&(0,f.each)(t,function(e,n){r.attr(n,e)})},i.prototype._onSelected=function(r){var t=this,e=this.config.style.selected;(0,f.each)(this.points,function(n){n.get("id")===r.id?(0,f.each)(e,function(a,o){n.attr(o,a)}):t._onInactive(n)})},i.prototype._animatePoint=function(r){var t=this.config,e=t.animation,n=t.size;if(e!==!1){var a=e,o=a.endState,s=o===void 0?{}:o,l=a.animateCfg,u=l===void 0?co.DEFAULT_ANIMATE_CFG.appear:l;r.animate((0,V.__assign)({r:Number.isNaN(s.size/2)?n/2:s.size/2},s),u)}},i}(),OT=LT,IT=function(i){var r=i.shape,t=r.attr("lineWidth")||1;return{lineWidth:t+1}},kT=function(i){var r=i.shape,t=r.attr("opacity")||1;return{opacity:t*.2}},BT=function(i){var r=i.shape,t=r.attr("lineWidth")||1;return{lineWidth:t+2}};ia("line",{lineStyle:{normal:{},active:IT,disable:kT,selected:BT},pointStyle:{normal:{},active:{},disable:{},selected:{}}});var DT={label:{point:{constraints:[{name:"elementCollision"}],rules:{elementCollision:[{name:"nodesResamplingByChange"},{name:"clearOverlapping"}]}}}};Vd("line",DT);var FT=function(i){(0,V.__extends)(r,i);function r(t){return i.call(this,(0,V.__assign)({processEvent:"mousemove"},t))||this}return r.prototype.start=function(){},r.prototype.process=function(t){var e=(0,f.filter)(this.view.geometries,function(o){return o.type=="line"}),n=t.target;if(n.get("name")==="line"){var a=(0,f.get)(t,"data.data");(0,f.each)(e,function(o){(0,f.each)(o.elements,function(s){s.setState("active",s.data===a)})})}else(0,f.each)(e,function(o){(0,f.each)(o.elements,function(s){s.setState("active",!1)})})},r}(Ff),RT=FT,NT=function(i){(0,V.__extends)(r,i);function r(t){return i.call(this,(0,V.__assign)({endEvent:"click"},t))||this}return r.prototype.start=function(){},r.prototype.end=function(t){var e=t.target,n=(0,f.filter)(this.view.geometries,function(o){return o.type=="line"});if(e.get("name")==="line"){var a=(0,f.get)(t,"data.data");(0,f.each)(n,function(o){(0,f.each)(o.elements,function(s){s.setState("inactive",s.data!==a)})})}else(0,f.each)(n,function(o){(0,f.each)(o.elements,function(s){s.setState("inactive",!1)})})},r}(Ff),GT=NT,YT=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"name",{get:function(){return"selected-tooltip"},enumerable:!1,configurable:!0}),r.prototype.getTooltipCfg=function(){var t=i.prototype.getTooltipCfg.call(this);return(0,V.__assign)((0,V.__assign)({},t),{showContent:!1,showCrosshairs:!0,showMarkers:!0,shared:!0})},r}($v.Z);sn("selected-tooltip",YT);var zT=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.show=function(){var t=this.getPoint();(0,f.isEqual)(t,this.location)||(this.location=t,this.showTooltip(t))},r.prototype.hide=function(){var t=this.getTooltipController();t.hideTooltip()},r.prototype.showTooltip=function(t){var e=this.getTooltipController();e.showTooltip(t)},r.prototype.getPoint=function(){var t=this.context.event;return t?{x:t.x,y:t.y}:this.getLastXPoint()},r.prototype.getLastXPoint=function(){var t=this.getView(),e=t.getXScale(),n=t.getYScales()[0],a=t.getCoordinate(),o=(0,f.last)(e.getTicks()).value;return a.convert({x:o,y:(n.range[0]+n.range[1])/2})},r.prototype.getView=function(){return this.context.view},r.prototype.getTooltipController=function(){return this.getView().getController("selected-tooltip")},r}(hn),XT=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"name",{get:function(){return"tooltip-active"},enumerable:!1,configurable:!0}),r.prototype.getTooltipCfg=function(){var t=i.prototype.getTooltipCfg.call(this);return(0,V.__assign)((0,V.__assign)({},t),{showCrosshairs:!0,showMarkers:!1,shared:!0})},r}($v.Z);sn("tooltip-active",XT);var VT=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.init=function(){this.getView().removeInteraction("tooltip")},r.prototype.show=function(){var t=this.getPoint();t&&this.showTooltip(t)},r.prototype.hide=function(){var t=this.getView(),e=this.getTooltipController();e.hideTooltip();var n=(0,f.filter)(t.geometries,function(a){return a.type=="point"});(0,f.each)(n,function(a){(0,f.each)(a.elements,function(o){o.setState("active",!1)})})},r.prototype.showTooltip=function(t){var e=this.getView(),n=this.getTooltipController();n.showTooltip(t);var a=n.getTooltipItems(t),o=(0,f.filter)(e.geometries,function(s){return s.type=="point"});(0,f.each)(o,function(s){(0,f.each)(s.elements,function(l){l.setState("active",(0,f.findIndex)(a,function(u){return u.data===l.data})!==-1)})})},r.prototype.getPoint=function(){var t=this.context.event;return t?{x:t.x,y:t.y}:null},r.prototype.getView=function(){return this.context.view},r.prototype.getTooltipController=function(){return this.getView().getController("tooltip-active")},r}(hn),HT=VT;Fr("selected-tooltip",zT),Se("selected-tooltip",{start:[{trigger:wn.VIEW_LIFE_CIRCLE.AFTER_PAINT,action:"selected-tooltip:show"},{trigger:wn.VIEW_LIFE_CIRCLE.AFTER_RENDER,action:"selected-tooltip:show"},{trigger:"plot:mousemove",action:"selected-tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"selected-tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}}]}),Fr("marker-active",HT),Se("marker-active",{start:[{trigger:wn.VIEW_LIFE_CIRCLE.AFTER_PAINT,action:"marker-active:show"},{trigger:wn.VIEW_LIFE_CIRCLE.AFTER_RENDER,action:"marker-active:show"},{trigger:"plot:mousemove",action:"marker-active:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"marker-active:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:mouseleave",action:"marker-active:hide",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchend",action:"marker-active:hide",throttle:{wait:50,leading:!0,trailing:!1}}]});var WT={line:"line",point:"point"},wp=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="line",t.markerPoints=[],t}return r.getDefaultOptions=function(){return(0,f.deepMix)({},i.getDefaultOptions.call(this),{connectNulls:!1,smooth:!1,lineSize:2,lineStyle:{lineJoin:"round",lineCap:"round"},point:{visible:!1,size:3,shape:"circle"},label:{visible:!1,type:"point"},legend:{visible:!0,position:"top-left",wordSpacing:4},tooltip:{showContent:!0,crosshairs:{line:{style:{stroke:"rgba(0,0,0,0.45)"}}}},markerPoints:[]})},r.prototype.afterRender=function(){var t=this,e=this.options;this.renderLabel(),e.markerPoints&&((0,f.each)(this.markerPoints,function(n){return n.destroy()}),this.markerPoints=[],e.markerPoints.forEach(function(n){if(n.visible){var a=new OT((0,V.__assign)((0,V.__assign)({},n),{view:t.view}));t.markerPoints.push(a)}})),e.responsive&&e.padding!=="auto"&&this.applyResponsive("afterRender"),i.prototype.afterRender.call(this)},r.prototype.getColorScale=function(){var t=this.options.seriesField;if(t)return this.view.getScaleByField(t)},r.prototype.geometryParser=function(t,e){return WT[e]},r.prototype.scale=function(){var t=this.options,e={};e[t.xField]={},(0,f.has)(t,"xAxis")&&bi(e[t.xField],t.xAxis),e[t.yField]={},(0,f.has)(t,"yAxis")&&bi(e[t.yField],t.yAxis),this.setConfig("scales",e),xA(e[t.yField],(0,f.map)(t.data||[],function(n){return n[t.yField]})),i.prototype.scale.call(this)},r.prototype.coord=function(){},r.prototype.tooltip=function(){(0,f.some)(this.options.markerPoints,function(t){return t.visible})&&(this.options.tooltip.showMarkers=!1),i.prototype.tooltip.call(this)},r.prototype.addGeometry=function(){this.addLine(),this.addPoint()},r.prototype.addLine=function(){var t=this.options;this.line=ri("line","main",{plot:this}),t.tooltip&&(t.tooltip.fields||t.tooltip.formatter)&&this.geometryTooltip(),this.setConfig("geometry",this.line)},r.prototype.addPoint=function(){var t=this.options,e={visible:!1};t.point&&(t.point=(0,f.deepMix)(e,t.point)),t.point&&t.point.visible&&(this.point=ri("point","guide",{plot:this}),this.setConfig("geometry",this.point))},r.prototype.renderLabel=function(){var t=this.config.scales,e=this.options,n=e.label,a=e.yField,o=t[a];if(n.visible){var s=po(this.view,"line");if(n.type==="line"){var l=new bp((0,V.__assign)({view:this.view,plot:this},this.options.label));l.render()}else this.doRenderLabel(s,(0,V.__assign)({type:"point",formatter:o.formatter&&function(u){return o.formatter(u)}},this.options.label))}},r.prototype.geometryTooltip=function(){this.line.tooltip={};var t=this.options.tooltip;t.fields&&(this.line.tooltip.fields=t.fields),t.formatter&&(this.line.tooltip.callback=t.formatter,t.fields||(this.line.tooltip.fields=[this.options.xField,this.options.yField],this.options.seriesField&&this.line.tooltip.fields.push(this.options.seriesField)))},r.prototype.animation=function(){i.prototype.animation.call(this);var t=this.options;t.animation?(CA({options:this.options,view:this.view}),this.line.animate=t.animation):(this.line.animate=!1,this.point&&(this.point.animate=!1))},r.prototype.applyInteractions=function(){i.prototype.applyInteractions.call(this),this.interactions.push(new RT({view:this.view})),this.interactions.push(new GT({view:this.view}))},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,A)},r.prototype.applyResponsive=function(t){var e=this,n=wT[t];(0,f.each)(n,function(a){var o=a;o.method(e)})},r.prototype.singleLineLabelCheck=function(){return!this.options.seriesField&&this.options.label.type&&this.options.label.type==="line"},r}(Un),Ms=wp;ln("line",wp);var jT=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="line",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=Ms.getDefaultOptions,r}(Kr),Sp=jT;function UT(i,r,t,e,n){var a=e-r,o=i.children,s=i.value;o.sort(function(h,c){return c.value-h.value});var l=a/s,u=r;(0,f.each)(o,function(h){h.y0=t,h.y1=n,h.x0=u,u+=h.value*l,h.x1=h.x0+h.value*l})}function ZT(i,r,t,e,n){var a=n-t,o=i.children,s=i.value;o.sort(function(h,c){return c.value-h.value});var l=a/s,u=t;(0,f.each)(o,function(h){h.x0=r,h.x1=e,h.y0=u,u+=h.value*l,h.y1=h.y0+h.value*l})}var KT=(1+Math.sqrt(5))/2;function Cp(i,r,t,e,n){var a=i.children,o=i.value;a.sort(function($t,ee){return ee.value-$t.value});for(var s=[],l,u,h,c,v,x,M,k,R=0,G=0;R<a.length;){var N=e-r,ot=n-t;for(l=a[G++].value,u=l,h=l,c=Math.max(ot/N,N/ot)/(o*KT),v=l*l*c,M=Math.max(u/v,v/h);G<a.length;G++){if(k=a[G].value,l+=k,k<h&&(h=k),k>u&&(u=k),v=l*l*c,x=Math.max(u/v,v/h),x>M){l-=k;break}M=x}var ut={value:l,dice:N<ot,children:a.slice(R,G)};if(s.push(ut),ut.dice){var Mt=o?ot*l/o:ot;UT(ut,r,t,e,t+Mt),o&&(t+=Mt)}else{var zt=o?N*l/o:N;ZT(ut,r,t,r+zt,n),o&&(r+=zt)}o-=l,R=G}return s}var $T=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.listeners=[],t.onItemGroupToggleActive=function(e,n){return function(){var a=e.get("children").find(function(o){return o.get("class")==="item-background"});a&&a.attr(n?t.itemActiveBackgroundStyle:t.itemBackgroundStyle),t.getCanvas().draw()}},t}return r.prototype.destroy=function(){this.offEvents(),i.prototype.destroy.call(this)},r.prototype.initConfig=function(t){this.x=t.x,this.y=t.y,this.items=t.items||[],this.itemPadding=t.itemPadding||[2,8,2,8],this.backgroundStyle=(0,V.__assign)({lineWidth:1,stroke:"#ffffff"},t.backgroundStyle||{}),this.itemBackgroundStyle=(0,V.__assign)({fill:"#fff"},t.itemBackgroundStyle||{}),this.itemActiveBackgroundStyle=(0,V.__assign)({fill:"#ccc",opacity:.2},t.itemActiveBackgroundStyle||{}),this.separator=t.separator||"/",this.separatorStyle=(0,V.__assign)({textBaseline:"top",fill:"#000000",opacity:.45},t.separatorStyle||{}),this.itemWidth=t.itemWidth,this.itemHeight=t.itemHeight,this.maxItemWidth=t.maxItemWidth,this.textStyle=(0,V.__assign)({textBaseline:"top",fill:"#000000",opacity:.45},t.textStyle||{})},r.prototype.renderInner=function(t){var e=0,n=0;this.offEvents(),this.renderItems(t,e,n),Td(this.group,this.x,this.y)},r.prototype.renderItems=function(t,e,n){var a=this,o=this.itemPadding,s=o[0],l=o[1],u=o[2],h=o[3],c,v=t.addShape("rect",{class:"breadcrumb-background",attrs:(0,V.__assign)({x:e,y:n,width:1,height:1},this.backgroundStyle)});this.items.forEach(function(x,M){var k=t.addGroup({id:"item-group-"+x.key,data:x,class:"item-group",attrs:{cursor:"pointer"}}),R=k.addShape("rect",{id:"item-background-"+x.key,class:"item-background",attrs:(0,V.__assign)((0,V.__assign)({x:e,y:n,width:h+l,height:s+u},a.itemBackgroundStyle),{cursor:"pointer"})});R.name="breadcrumb";var G=k.addShape("text",{id:"item-text-"+x.key,class:"item-text",attrs:(0,V.__assign)((0,V.__assign)({x:e+h,y:n+s,text:x.text},a.textStyle),{cursor:"pointer"})});G.name="breadcrumb";var N=G.getBBox();c=a.itemHeight||N.height;var ot=a.itemWidth||N.width;a.maxItemWidth&&(ot=Math.min(ot,a.maxItemWidth));var ut={x:e,y:n,width:ot+h+l,height:c+s+u};if(R.attr("width",ut.width),R.attr("height",ut.height),k.setClip({type:"rect",attrs:ut}),e+=ut.width,M!==a.items.length-1){var Mt=t.addShape("text",{attrs:(0,V.__assign)({x:e,y:n+s,text:a.separator},a.separatorStyle),class:"separator"});e+=Mt.getBBox().width}}),v.attr({width:e,height:c+s+u})},r.prototype.bindEvents=function(t){var e=this,n=this.items,a=t.get("children").filter(function(s){return s.get("class")==="item-group"}),o=function(s,l,u){return function(){var h=l.get("data"),c=n.find(function(v){return v.key===h});e.emit(u,{item:c})}};a.forEach(function(s){var l=o("click",s,"onItemClick"),u=o("dblclick",s,"onItemDblclick"),h=e.onItemGroupToggleActive(s,!0),c=e.onItemGroupToggleActive(s,!1);s.on("click",l),s.on("dblclick",u),s.on("mouseenter",h),s.on("mouseleave",c),e.listeners.push({target:s,event:"click",callback:l}),e.listeners.push({target:s,event:"dblclick",callback:u}),e.listeners.push({target:s,event:"mouseenter",callback:h}),e.listeners.push({target:s,event:"mouseleave",callback:c})})},r.prototype.offEvents=function(){this.listeners&&this.listeners.forEach(function(t){var e=t.target,n=t.event,a=t.callback;e.off(n,a)}),this.listeners=[]},r}(Ss),QT=$T,Ll=[1,0,0,0,1,0,0,0,1],ko=400,$o="easeQuadInOut";function JT(i,r,t){var e=Ap(i),n=_p(r),a=n.width/e.width,o=n.height/e.height,s=(n.minX-e.minX)*a,l=(n.minY-e.minY)*o,u=Uo([["s",a,o],["t",s,l]]),h=r.geometries[0];Ol(h);var c=r.backgroundGroup.addGroup();c.set("zIndex",-100),c.setClip({type:"rect",attrs:{x:n.minX,y:n.minY,width:n.width,height:n.height}});var v=Mp(h,c);h.container.set("visible",!1),r.canvas.draw(),t(),window.setTimeout(function(){(0,f.each)(v,function(R,G){G===0?R.animate({matrix:u},ko,$o,function(){c.remove(),r.canvas.draw()}):R.animate(Uo,ko)}),h=r.geometries[0],Ol(h);var x=h.getShapes();(0,f.each)(x,function(R){R.attr("opacity",0),R.animate({opacity:1},ko,$o)});var M=h.container;M.stopAnimate(),M.set("visible",!0),M.attr("matrix",(0,f.clone)(Ll)),c_(M,[["s",e.width/n.width,e.height/n.height],["t",e.minX,e.minY]]);var k=(0,f.clone)(Ll);h.container.animate({matrix:k},ko,$o,function(){Tp(h)}),r.canvas.draw()},16)}function Mp(i,r){var t=i.getShapes(),e=[];return(0,f.each)(t,function(n){var a=r.addShape("path",{attrs:(0,f.deepMix)({},n.attrs,{capture:!1})});e.push(a)}),e}function Ep(i,r,t){var e=r.geometries[0];Ol(e);var n=e.container;n.attr("matrix",(0,f.clone)(Ll));var a=r.backgroundGroup.addGroup();a.set("zIndex",-100);var o=Mp(e,a);n.set("visible",!1),r.canvas.draw(),t(),e=r.geometries[0],Ol(e),n=e.container;var s=qT(e.getShapes(),i),l=Ap(s),u=_p(r),h=n.get("parent");h.get("clipShape")||n.setClip({type:"rect",attrs:{x:u.minX,y:u.minY,width:u.width,height:u.height}}),tP(a,o,l,u);var c=u.width/l.width,v=u.height/l.height,x=(u.minX-l.minX)*c,M=(u.minY-l.minY)*v,k=Uo([["s",c,v],["t",x,M]]);n.setMatrix(k),n.set("visible",!0),n.animate({matrix:Ll},ko,$o,function(){Tp(e)})}function qT(i,r){var t;return(0,f.each)(i,function(e){var n=e.get("origin").data.name;n===r&&(t=e)}),t}function _p(i){var r=i.coordinateBBox,t={minX:r.minX,minY:r.minY,centerX:(r.maxX-r.minX)/2,centerY:(r.maxY-r.minY)/2,width:r.width,height:r.height};return t}function Ap(i){var r=i.attr("path"),t=r[0][1],e=r[0][2],n=r[1][1],a=r[2][2],o={minX:t,minY:a,centerX:(n-t)/2,centerY:(e-a)/2,width:Math.abs(n-t),height:Math.abs(e-a)};return o}function tP(i,r,t,e){var n=t.width/e.width,a=t.height/e.height,o=Uo([["s",n,a],["t",t.minX,t.minY]]);i.animate({matrix:o},ko,$o,function(){i.remove()}),(0,f.each)(r,function(s){s.animate({opacity:0},ko,$o)})}function Ol(i){var r=i.labelsContainer;r.set("visible",!1)}function Tp(i){var r=i.labelsContainer;r.set("visible",!0)}var eP=100,rP=30,nP=10,iP=function(i){i===void 0&&(i={});var r=(0,V.__assign)({x:0,y:0,startNode:{name:"root"},itemWidth:eP,itemHeight:rP,padding:[0,0,0,0]},i);return r},Pp=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.getInteractionRange=function(t,e){var n=iP(e),a=n.padding,o=a[0],s=a[1];if(t)return new Jr(t.minX,t.maxY-n.itemHeight-o-s,t.width,n.itemHeight+o+s)},r.prototype.start=function(t){var e=this,n=t.data.data;n.children&&(this.parentNode={color:t.target.attr("fill"),shape:t.target,data:{name:(0,f.clone)(this.currentNode.name),value:(0,f.clone)(this.currentNode.value)},depth:(0,f.clone)(this.currentDepth)},this.currentDepth++,JT(t.target,this.view,function(){e.update(n)}))},r.prototype.update=function(t){(0,f.hasKey)(this.cache,t.name)||(this.cache[t.name]=t);var e=this.plot.getTreemapData(t,t.depth);this.view.changeData(e),this.adjustScale(this.currentDepth),this.currentNode=t,this.render()},r.prototype.render=function(){if(this.breadcrumb){var t=this.getItems();this.breadcrumb.update({items:t}),this.breadcrumb.render(),this.layout()}else this.initGeometry(),this.cache={},this.saveOriginMapping(),this.container=this.plot.canvas.addGroup(),this.startNode||(this.startNode={name:"root"}),this.startNode.name==="root"?(this.startNodeName=(0,f.hasKey)(this.plot.options.data,"name")?this.plot.options.data.name:"root",this.currentNode=this.plot.options.data,this.currentDepth=1):(this.startNodeName=this.startNode.name,this.currentNode=this.startNode),this.y=this.view.coordinateBBox.maxY+nP,this.breadcrumb=new QT({container:this.container,x:0,y:this.y,items:this.getItems()}),this.breadcrumb.init(),this.breadcrumb.render(),this.plot.canvas.draw(),this.layout();this.onInteraction()},r.prototype.clear=function(){},r.prototype.layout=function(){var t=this.container.getBBox().width,e=(this.plot.width-t)/2;this.breadcrumb.update({x:e,y:this.y}),this.breadcrumb.render()},r.prototype.getItems=function(){var t=[];if(this.currentNode.name&&this.currentNode.name===this.startNodeName){var e=this.getRootItem();t.push(e)}else{t=[];var n=[];this.findParent(this.currentNode,n),t.push(this.getRootItem()),(0,f.each)(n,function(a,o){t.push({key:String(o+2),text:a.name,data:a})}),t.push({key:String(n.length+2),text:this.currentNode.name,data:this.currentNode})}return t},r.prototype.findParent=function(t,e){if(t.parent)(0,f.hasKey)(this.cache,t.parent.name)?e.push(this.cache[t.parent.name]):e.push(t.parent),this.findParent(t.parent,e);else return},r.prototype.onInteraction=function(){var t=this;this.container.on("click",function(e){var n=e.target.get("parent");if(n&&n.get("class")==="item-group"){var a=n.get("data");if(a.data)if(a.text===t.startNodeName){var o=1;t.currentDepth-1===o?Ep(t.currentNode.name,t.view,function(){t.updateRoot(a)}):t.updateRoot(a),t.currentDepth=1}else{if(t.currentNode===a.data)return;var s=(0,f.clone)(t.currentDepth);t.currentDepth=parseInt(a.key),s-1===t.currentDepth?Ep(t.currentNode.name,t.view,function(){t.update(a.data)}):t.update(a.data)}}})},r.prototype.getRootItem=function(){var t=this.plot.options.data,e=(0,f.hasKey)(t,"name")?t.name:"root";return{key:"1",text:e,data:this.plot.rootData}},r.prototype.saveOriginMapping=function(){var t=this.plot.options,e=t.colorField,n=t.colors,a={field:e,values:n};this.originMapping=a},r.prototype.adjustScale=function(t){var e=this.view;if(this.mapping&&(0,f.hasKey)(this.mapping,String(t))){var n=(0,f.clone)(this.mapping[t]);if(n.values&&(0,f.isFunction)(n.values)){var a=n.values(this.parentNode,this.currentNode);n.values=a}this.view.geometries[0].color(n.field,n.values)}else{var n=(0,f.clone)(this.originMapping);this.view.geometries[0].color(n.field,n.values)}e.render()},r.prototype.initGeometry=function(){this.geometry=this.view.geometries[0];var t=this.view.viewBBox,e=this.geometry.container;e.setClip({type:"rect",attrs:{x:t.minX,y:t.minY,width:t.width,height:t.height}})},r.prototype.updateRoot=function(t){this.view.changeData(t.data),this.adjustScale(1),this.currentNode=this.plot.options.data,this.render()},r}(Pa),aP=Pp;Pa.registerInteraction("drilldown",Pp);var oP={drilldown:aP},sP={rect:"polygon",breadcrumb:"breadcrumb"},lP=Ai(sP);(0,f.assign)(dn,lP);var Lp=4,uP=8;function fP(i,r){return!i.children||i.depth>=r}function hP(i,r,t){var e=i.attr("fontSize"),n=i.attr("text"),a=t.addShape("text",{attrs:{text:"",x:0,y:0,fontSize:e}}),o=n.split(`
`),s=o.map(function(l){for(var u="",h=l.split(""),c=[],v=0;v<h.length;v++){var x=h[v];a.attr("text",u+=x);var M=a.getBBox().width-1;if(M>r){if(v===0)break;c.push(v),u=""}}return rd(h,c)});return a.remove(),s.join(`
`)}function Op(i,r,t,e){for(var n=e.addShape("text",{attrs:{text:"...",x:0,y:0,fontSize:r}}),a=n.getBBox().width,o=e.addShape("text",{attrs:{text:"",x:0,y:0,fontSize:r}}),s="",l=t-a,u=0;u<i.length;u++){var h=i[u];o.attr("text",s+=h);var c=o.getBBox().width;if(c>=l){var v=s.substr(0,s.length-1);if(v.length>0)return v+"..."}}return o.remove(),n.remove(),s}var cP=function(){function i(r){this.destroyed=!1,this.view=r.view,this.plot=r.plot;var t=this.getDefaultOptions();this.options=(0,f.deepMix)(t,r,{}),this.init()}return i.prototype.init=function(){var r=this;this.container=this.getGeometry().labelsContainer,this.view.on("beforerender",function(){r.clear(),r.plot.canvas.draw()})},i.prototype.render=function(){var r=this,t=this.getGeometry().elements;(0,f.each)(t,function(e){var n=e.shape,a=n.get("origin").data,o=fP(a,r.plot.options.maxLevel);if(a.showLabel){var s=(0,f.clone)(r.options.style),l=r.getPosition(n,o),u=r.options.formatter,h=u?u(a.name):a.name,c=r.getTextBaseLine(o),v=r.container.addShape("text",{attrs:(0,f.deepMix)({},s,{x:l.x,y:l.y,text:h,fill:"black",textAlign:"center",textBaseline:c,fontWeight:o?300:600}),name:"label"});r.adjustLabel(v,n,o)}})},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.hide=function(){this.container.set("visible",!1),this.plot.canvas.draw()},i.prototype.show=function(){this.container.set("visible",!0),this.plot.canvas.draw()},i.prototype.destroy=function(){this.container&&this.container.remove(),this.destroyed=!0},i.prototype.getBBox=function(){return this.container.getBBox()},i.prototype.getPosition=function(r,t){var e=r.getBBox(),n=0,a=0;return t?(n=e.minX+e.width/2,a=e.minY+e.height/2):(n=e.x+e.width/2,a=e.y+4),{x:n,y:a}},i.prototype.getTextBaseLine=function(r){return r?"middle":"top"},i.prototype.adjustLabel=function(r,t,e){e?this.adjustLeafLabel(r,t):this.adjustParentLabel(r,t)},i.prototype.adjustLeafLabel=function(r,t){var e=t.getBBox(),n=r.getBBox(),a=(0,f.clone)(r.attr("text")),o=2,s=Math.max(r.attr("fontSize")-o,uP),l=e.x+e.width/2,u=e.y+e.height/2;r.attr({x:l,y:u,textAlign:"center",textBaseline:"middle",lineHeight:s,fontSize:s});var h=e.width-Lp*2;if(n.width>e.width&&n.height>e.height){r.attr("text","");return}else if(h<s){r.attr("text","");return}if(n.width>e.width){var c=hP(r,h,this.container);r.attr({lineHeight:r.attr("fontSize"),text:c});var v=r.getBBox();if(v.height>e.height){var x=Op(a,s,h,this.container);r.attr("text",x)}}},i.prototype.adjustParentLabel=function(r,t){var e=t.getBBox(),n=e.width-Lp*2;if(r.getBBox().width>n){var a=Op(r.attr("text"),r.attr("fontSize"),n,this.container);r.attr("text",a)}},i.prototype.getDefaultOptions=function(){var r=this.plot.theme,t=r.label.style;return{offsetX:0,offsetY:0,style:(0,f.clone)(t)}},i.prototype.getGeometry=function(){return(0,f.find)(this.view.geometries,function(r){return r.type==="polygon"})},i}(),vP=cP,dP=4,Es=4,Ip=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="treemap",t}return r.getDefaultOptions=function(){return(0,f.deepMix)({},i.getDefaultOptions.call(this),{maxLevel:2,padding:[0,0,0,0],tooltip:{visible:!1,showTitle:!1,showCrosshairs:!1,showMarkers:!1,shared:!1},legend:{visible:!1},xAxis:{visible:!1},yAxis:{visible:!1},xField:"x",yField:"y",label:{visible:!0,adjustPosition:!0,style:{stroke:"rgba(0,0,0,0)",lineWidth:0,fontSize:12}},meta:{x:{nice:!1},y:{nice:!1}},interactions:[{type:"tooltip"}]})},r.prototype.beforeInit=function(){var t=this;i.prototype.beforeInit.call(this);var e=this.options.interactions;e&&(0,f.each)(e,function(o){o.type==="drilldown"&&(t.isDrilldown=!0,t.options.maxLevel=1)});var n=this.options.data,a=this.getTreemapData(n);this.rootData=a},r.prototype.afterRender=function(){if(i.prototype.afterRender.call(this),this.options.label&&this.options.label.visible){var t=new vP((0,V.__assign)({view:this.view,plot:this},this.options.label));t.render()}},r.prototype.geometryParser=function(){return"polygon"},r.prototype.getTreemapData=function(t,e){var n=this.getViewRange(),a=Cp(t,n.x,n.y,n.width,n.height);this.recursive(a,1);var o=[];return this.getAllNodes(a,o,e),o.sort(function(s,l){return s.depth-l.depth}),this.options.xField="x",this.options.yField="y",o},r.prototype.processData=function(){return this.rootData},r.prototype.coord=function(){},r.prototype.addGeometry=function(){var t=this,e=this.options,n=e.data,a=e.colorField,o=e.color,s=this.getTreemapData(n);this.rootData=s;var l=this.isNested(s);this.rect={type:"polygon",position:{fields:["x","y"]},color:{fields:[a],values:o},style:{fields:["depth"],callback:function(u){var h=t.adjustStyleByDepth(u,l);return(0,f.deepMix)({},h,t.options.rectStyle)}},tooltip:{fields:["name","value"]}},this.options.tooltip&&this.options.tooltip.formatter&&(this.rect.tooltip.callback=this.options.tooltip.formatter),this.setConfig("geometry",this.rect)},r.prototype.applyInteractions=function(){var t=this,e=this.options.interactions,n=this.view.interactions;(0,f.each)(e,function(a){var o=oP[a.type];if(o){var s=new o((0,f.deepMix)({},{view:t.view,plot:t,startEvent:"polygon:click"},a.cfg,o.getInteractionRange(t.layerBBox,a.cfg)));n[a.type]=s}})},r.prototype.animation=function(){i.prototype.animation.call(this),this.isDrilldown&&(this.rect.animate=!1)},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,_)},r.prototype.recursive=function(t,e){var n=this,a=this.options.colorField;(0,f.each)(t,function(o){(0,f.each)(o.children,function(s){s.depth=e,e>1&&(s.parent=o),(0,f.hasKey)(s,a)||(s[a]=o[a]),s.showLabel=!0;var l=n.isLeaf(s);if(!l){var u=Math.abs(s.y1-s.y0),h=n.getLabelHeight(),c=u/2>h?h:Es;s.showLabel=c!==Es;var v=Cp(s,s.x0+Es,s.y0+c,s.x1-Es,s.y1-Es);n.fillColorField(v,a,s[a]),n.recursive(v,s.depth+1)}})})},r.prototype.getAllNodes=function(t,e,n){var a=this,o=n||this.options.maxLevel,s=this.getViewRange();(0,f.each)(t,function(l){(0,f.hasKey)(l,"x0")&&l.depth<=o&&e.push((0,V.__assign)((0,V.__assign)({},l),{x:[l.x0,l.x1,l.x1,l.x0],y:[s.height-l.y1,s.height-l.y1,s.height-l.y0,s.height-l.y0]})),(0,f.hasKey)(l,"children")&&a.getAllNodes(l.children,e)})},r.prototype.fillColorField=function(t,e,n){(0,f.each)(t,function(a){(0,f.hasKey)(a,e)||(a[e]=n)})},r.prototype.getLabelHeight=function(){var t=this.options.label,e=this.getPlotTheme().label.style.fontSize,n=0;if(t&&t.visible){var a=t.style;n=a&&a.fontSize?a.fontSize:e}return n+dP*2},r.prototype.isLeaf=function(t){return!t.children||t.children.length===0},r.prototype.isNested=function(t){var e=this.options.maxLevel;if(e===1)return!1;for(var n=!1,a=0;a<t.length;a++)if(t[a].children){n=!0;break}return n},r.prototype.adjustStyleByDepth=function(t,e){var n=this.options.maxLevel;return e?t===1?{lineWidth:1,stroke:"black",opacity:t/n}:{lineWidth:1,stroke:"rgba(0,0,0,0.3)",opacity:t/n}:{lineWidth:1,stroke:"rgba(0,0,0,0.9)",opacity:.9}},r}(Un),pP=Ip;ln("treemap",Ip);var gP=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="treemap",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=pP.getDefaultOptions,r}(Kr),kp=gP,Bp=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="step-line",t}return r.getDefaultOptions=function(){return(0,f.deepMix)({},i.getDefaultOptions.call(this),{step:"hv"})},r}(Ms);ln("step-line",Bp);var yP=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="step-line",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=Bp.getDefaultOptions,r}(Kr),Dp=yP;function Fp(i,r){var t=[],e=i.get("origin").points;return(0,f.each)(e,function(n){t.push(r.convertPoint(n))}),t}var mP=function(){function i(r){(0,f.deepMix)(this,this.constructor.getDefaultOptions(r),r),this._init()}return i.getDefaultOptions=function(r){var t=r.transpose;return{visible:!0,size:t?32:80,spacing:t?8:12,offset:t?32:0,arrow:{visible:!0,headSize:12,style:{fill:"rgba(0, 0, 0, 0.05)"}},value:{visible:!0,style:{fontSize:12,fill:"rgba(0, 0, 0, 0.85)"},formatter:function(e,n){return(100*n/e).toFixed(2)+"%"}},animation:(0,f.deepMix)({},co.DEFAULT_ANIMATE_CFG)}},i.prototype._init=function(){var r=this,t=this.view.backgroundGroup;this.container=t.addGroup(),this.draw(),this.view.on("beforerender",function(){r.clear()})},i.prototype.draw=function(){var r=this,t=this.transpose,e=this.view.getScaleByField(this.field).values,n=this.view.geometries[0],a=n.getShapes(),o,s,l,u;t?a.forEach(function(h,c){s=e[c],c++>0&&r._drawTag(l,u,h,s),u=s,l=h}):a.forEach(function(h,c){u=e[c],c++>0&&r._drawTag(h,u,o,s),s=u,o=h})},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.destroy=function(){this.container&&this.container.remove()},i.prototype._drawTag=function(r,t,e,n){var a=this.transpose,o=this.view.geometries[0].coordinate,s=Fp(r,o)[a?3:0],l=Fp(e,o)[a?0:3];this._drawTagArrow(s,l),this._drawTagValue(s,t,l,n)},i.prototype._drawTagArrow=function(r,t){var e=this.spacing,n=this,a=n.size,o=n.offset,s=n.animation,l=n.transpose,u=this.arrow.headSize,h=t.y-r.y,c=t.x-r.x,v;l?(c-u)/2<e?(e=Math.max(1,(c-u)/2),v=[[r.x+e,r.y-o],[r.x+e,r.y-o-a],[t.x-e,t.y-o-a/2]]):v=[[r.x+e,r.y-o],[r.x+e,r.y-o-a],[t.x-e-u,t.y-o-a],[t.x-e,t.y-o-a/2],[t.x-e-u,t.y-o]]:(h-u)/2<e?(e=Math.max(1,(h-u)/2),v=[[r.x+o,r.y+e],[r.x+o+a,r.y+e],[t.x+o+a/2,t.y-e]]):v=[[r.x+o,r.y+e],[r.x+o+a,r.y+e],[t.x+o+a,t.y-e-u],[t.x+o+a/2,t.y-e],[t.x+o,t.y-e-u]];var x=this.container.addShape("polygon",{name:"arrow",attrs:(0,V.__assign)((0,V.__assign)({},this.arrow.style),{points:v})});s!==!1&&this._fadeInTagShape(x)},i.prototype._drawTagValue=function(r,t,e,n){var a=this,o=a.size,s=a.offset,l=a.animation,u=a.transpose,h=this.value.formatter(t,n),c=this.container.addShape("text",{name:"value",attrs:(0,V.__assign)((0,V.__assign)({},this.value.style),{text:h,x:u?(r.x+e.x)/2:r.x+s+o/2,y:u?r.y-s-o/2:(r.y+e.y)/2,textAlign:"center",textBaseline:"middle"})});if(u){var v=e.x-r.x,x=c.getBBox().width;if(x>v){var M=x/h.length,k=Math.max(1,Math.ceil(v/M)-1),R=h.slice(0,k)+"...";c.attr("text",R)}}l!==!1&&this._fadeInTagShape(c)},i.prototype._fadeInTagShape=function(r){var t=this.animation,e=r.attr("opacity");r.attr("opacity",0);var n=(0,f.get)(t,"appear",co.DEFAULT_ANIMATE_CFG.appear).duration;r.animate({opacity:e},n)},i}(),Rp=mP;function xP(i){var r=i.getResponsiveTheme(),t=i.canvas;new yo({plot:i,responsiveTheme:r,dim:"x"}),new yo({plot:i,responsiveTheme:r,dim:"y"}),t.draw()}var bP=[],wP=[{name:"responsiveAxis",method:xP}],SP={preRender:bP,afterRender:wP},CP=function(i){var r=i.opacity||1;return{opacity:r*.5}},MP=function(i){var r=i.opacity||1;return{opacity:r*.5}},Zf={label:{darkStyle:{fill:"#2c3542",stroke:"#ffffff",fillOpacity:.85},lightStyle:{fill:"#ffffff",stroke:"#ffffff",fillOpacity:1}},columnStyle:{normal:{},active:CP,disable:MP,selected:{lineWidth:1,stroke:"black"}}};ia("bar",Zf);function to(i){var r=i.indexOf("#")===0?i.substr(1):i,t=[];return t.push(parseInt(r.substr(0,2),16)),t.push(parseInt(r.substr(2,2),16)),t.push(parseInt(r.substr(4,2),16)),t}function Kf(i){var r;return r=Math.round(i),r=r.toString(16),r.length===1&&(r="0"+i),r}function zG(i){return"#"+(Kf(i[0])+Kf(i[1])+Kf(i[2]))}function Il(i,r){var t;return(0,f.each)(i,function(e){var n=e;r>=n.from&&r<n.to&&(t=n.color)}),t}var $f=function(i){var r=to(i),t=r[0],e=r[1],n=r[2],a=(t*299+e*587+n*114)/1e3<128;return a},Np=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getLabelItemAttrs=function(t,e){var n,a=this.options,o=a.style,s=a.formatter,l=[].concat(t.getModel().mappingData),u=this.getValue(t);return(0,f.deepMix)({},o,(0,V.__assign)((0,V.__assign)({},this.getPosition(t)),{text:s?s(u,(n={},n[ws]=l[0]._origin,n.mappingDatum=l[0],n.mappingDatumIndex=0,n.element=t,n.elementIndex=e,n),e):u,fill:this.getTextFill(t),stroke:this.getTextStroke(t),textAlign:this.getTextAlign(t),textBaseline:this.getTextBaseline()}))},r.prototype.adjustLabel=function(t,e){var n=this.options,a=n.adjustPosition,o=n.style;if(a){var s=this.getDefaultOffset(),l=t.getBBox(),u=this.getElementShapeBBox(e);if(u.width<=l.width){var h=u.maxX+this.options.offsetX+s;t.attr("x",h),t.attr("fill",o.fill)}}},r.prototype.getDefaultOptions=function(){var t=this.layer.theme,e=t.label,n=e===void 0?{}:e;return(0,V.__assign)({offsetX:0,offsetY:0,adjustPosition:!0},n)},r.prototype.getValue=function(t){return(0,f.get)(t.getData(),this.layer.options.xField)},r.prototype.getPosition=function(t){var e=this.getDefaultOffset(),n=this.getValue(t),a=this.getElementShapeBBox(t),o=a.minX,s=a.maxX,l=a.minY,u=a.height,h=a.width,c=this.options,v=c.offsetX,x=c.offsetY,M=c.position,k=l+u/2+x,R=n<0?-1:1,G;if(M==="left"){var N=n>0?o:s;G=N+e*R+v}else if(M==="right"){var N=n>0?s:o;G=N+e*R+v}else G=o+h/2+v;return{x:G,y:k}},r.prototype.getTextFill=function(t){var e=t.shape;if(this.options.adjustColor&&this.options.position!=="right"){var n=e.attr("fill"),a=e.attr("opacity")?e.attr("opacity"):1,o=to(n),s=Math.round(o[0]*.299+o[1]*.587+o[2]*.114)/a,l=[{from:0,to:85,color:"white"},{from:85,to:170,color:"#F6F6F6"},{from:170,to:255,color:"black"}],u=Il(l,s);return u}var h=this.options.style.fill;return h},r.prototype.getTextStroke=function(t){var e=this.getTextFill(t),n=this.options,a=n.position,o=n.adjustColor;return a!=="right"&&o&&e!=="black"?null:void 0},r.prototype.getTextAlign=function(t){var e=this.getValue(t),n=this.options.position,a={right:"left",left:"left",middle:"center"},o={right:"right",left:"right",middle:"center"};return e<0?o[n]:a[n]},r.prototype.getTextBaseline=function(){return"middle"},r.prototype.getElementShapeBBox=function(t){var e=this,n=t.shape,a=[];(0,f.each)(n.get("origin").points,function(x){a.push(e.coord.convertPoint(x))});var o=a.map(function(x){return x.x}),s=Math.min.apply(Math,o),l=Math.max.apply(Math,o),u=a.map(function(x){return x.y}),h=Math.min.apply(Math,u),c=Math.max.apply(Math,u),v=new Jr(s,h,l-s,c-h);return v},r.prototype.getLabelOffset=function(){return{x:0,y:0}},r}(Tf),Gp=Np;na("bar",Np);var Yp=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getPosition=function(t){var e=this.getDefaultOffset(),n=this.getValue(t),a=this.getElementShapeBBox(t),o=a.minX,s=a.maxX,l=a.minY,u=a.height,h=this.options,c=h.offsetX,v=h.offsetY,x=l+u/2+v,M=n<0?-1:1,k=n>0?s:o,R=k+e*M+c;return{x:R,y:x}},r.prototype.getTextAlign=function(t){var e=this.getValue(t);return e>0?"left":"right"},r.prototype.getTextFill=function(t){var e=this.options.style;return e.fill},r.prototype.getTextStroke=function(t){},r.prototype.adjustLabel=function(t,e){},r.prototype.layoutLabels=function(t,e){this.shouldInShapeLabels(e)&&this.inShapeLabels(t,e),this.autoHideLabels(t,e)},r.prototype.shouldInShapeLabels=function(t){var e=this;return(0,f.every)(t,function(n){var a=n.getBBox(),o=n.get("element"),s=e.getElementShapeBBox(o);return s.height>=a.height})},r.prototype.inShapeLabels=function(t,e){var n=this,a=this.getCoordinateBBox(),o=t.getXYFields()[0],s=this.options,l=s.darkStyle,u=s.lightStyle,h=(0,f.groupBy)(e,function(c){return c.get(ca)[wn.FIELD_ORIGIN][o]});(0,f.each)(e,function(c){var v=h[c.get(ca)[wn.FIELD_ORIGIN][o]]||[],x=c.get("element"),M=x.shape,k=$f(M.attr("fill")),R=n.getElementShapeBBox(x),G=Jr.fromBBoxObject(c.getBBox());if(Gf(a,R)<=0&&c.set("visible",!1),G.width>R.width){var N=(0,f.findIndex)(v,function(ut){return ut===c});N!==v.length-1&&c.set("visible",!1)}else{c.attr({x:R.x+R.width/2,textAlign:"center"});var ot=G.width>R.width||G.height>R.height;ot?c.attr({stroke:u==null?void 0:u.stroke}):c.attr({fill:k?u==null?void 0:u.fill:l==null?void 0:l.fill,fillOpacity:k?u==null?void 0:u.fillOpacity:l==null?void 0:l.fillOpacity,stroke:void 0})}})},r.prototype.autoHideLabels=function(t,e){var n=this.getCoordinateBBox(),a=this.filterLabels(e),o=t.getXYFields()[0],s=[],l=[],u=(0,f.groupBy)(a,function(x){return x.get(ca)[wn.FIELD_ORIGIN][o]}),h=(0,f.uniq)((0,f.map)(a,function(x){return x.get(ca)[wn.FIELD_ORIGIN][o]})),c;for((0,f.size)(h)>0&&(c=h.shift(),(0,f.each)(u[c],function(x){return l.push(x)})),(0,f.size)(h)>0&&(c=h.pop(),(0,f.each)(u[c],function(x){return l.push(x)})),(0,f.each)(h.reverse(),function(x){(0,f.each)(u[x],function(M){return l.push(M)})});l.length>0;){var v=l.shift();v.get("visible")&&(Al(v,n),Tl(v,s)?v.set("visible",!1):s.push(v))}},r.prototype.filterLabels=function(t){var e=500,n=[],a=Math.max(Math.floor(t.length/e),1);return(0,f.each)(t,function(o,s){s%a==0?n.push(o):o.set("visible",!1)}),n},r}(Gp),EP=Yp;na("bar-auto",Yp);var _P={bar:"interval"},AP=Ai(_P);(0,f.assign)(dn,AP);var TP={bar:"interval"},PP={interval:"bar"},zp=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="bar",t}return r.getDefaultOptions=function(){var t={xAxis:{visible:!0,line:{visible:!1},title:{visible:!0},label:{visible:!1},tickLine:{visible:!1},grid:{visible:!1},nice:!0},yAxis:{visible:!0,grid:{visible:!1},line:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoRotate:!1,autoHide:!0},title:{visible:!1,spacing:12}},tooltip:{visible:!0,shared:!0,showCrosshairs:!1,showMarkers:!1},label:{visible:!0,position:"left",adjustColor:!0},legend:{visible:!1,position:"top-left"},interactions:[{type:"tooltip"},{type:"active-region"},{type:"legend-active"},{type:"legend-filter"}],conversionTag:{visible:!1}};return(0,f.deepMix)({},i.getDefaultOptions.call(this),t)},r.prototype.beforeInit=function(){i.prototype.beforeInit.call(this);var t=this.options;t.responsive&&t.padding!=="auto"&&this.applyResponsive("preRender")},r.prototype.afterRender=function(){var t=this.options;this.renderLabel(),t.responsive&&t.padding!=="auto"&&this.applyResponsive("afterRender"),t.conversionTag.visible&&(this.conversionTag=new Rp((0,V.__assign)({view:this.view,field:t.xField,animation:t.animation!==!1},t.conversionTag))),i.prototype.afterRender.call(this)},r.prototype.geometryParser=function(t,e){return t==="g2"?TP[e]:PP[e]},r.prototype.processData=function(t){var e=t&&t.slice().reverse(),n=this.options.yField,a=[];return(0,f.each)(e,function(o){var s=(0,f.clone)(o);s[n]=s[n].toString(),a.push(s)}),a},r.prototype.scale=function(){var t=this.options,e={};e[t.yField]={type:"cat"},(0,f.has)(t,"yAxis")&&bi(e[t.yField],t.yAxis),e[t.xField]={},(0,f.has)(t,"xAxis")&&bi(e[t.xField],t.xAxis),this.setConfig("scales",e),i.prototype.scale.call(this)},r.prototype.coord=function(){this.setConfig("coordinate",{actions:[["transpose"]]})},r.prototype.axis=function(){var t=Ni("axis",{plot:this,dim:"x"}),e=Ni("axis",{plot:this,dim:"y"});t&&(t.position="left"),e&&(e.position="bottom");var n={};n[this.options.xField]=t,n[this.options.yField]=e,this.setConfig("axes",n)},r.prototype.adjustBar=function(t){return null},r.prototype.addGeometry=function(){var t=this.options,e=ri("interval","main",{positionFields:[t.yField,t.xField],plot:this});t.conversionTag.visible&&this.setConfig("theme",(0,f.deepMix)({},this.getTheme(),{columnWidthRatio:1/3})),this.adjustBar(e),this.bar=e,t.tooltip&&(t.tooltip.fields||t.tooltip.formatter)&&this.geometryTooltip(),this.setConfig("geometry",e)},r.prototype.animation=function(){i.prototype.animation.call(this);var t=this.options;t.animation===!1&&(this.bar.animate=!1)},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,E)},r.prototype.renderLabel=function(){var t=this.config.scales,e=this.options,n=e.label,a=e.xField,o=t[a];if(n==null?void 0:n.visible){var s=po(this.view,"interval");this.doRenderLabel(s,(0,V.__assign)({type:"bar",formatter:o.formatter&&function(l){return o.formatter(l)}},this.options.label))}},r.prototype.geometryTooltip=function(){this.bar.tooltip={};var t=this.options.tooltip;t.fields&&(this.bar.tooltip.fields=t.fields),t.formatter&&(this.bar.tooltip.callback=t.formatter,t.fields||(this.bar.tooltip.fields=[this.options.xField,this.options.yField],this.options.colorField&&this.bar.tooltip.fields.push(this.options.colorField)))},r.prototype.applyResponsive=function(t){var e=this,n=SP[t];(0,f.each)(n,function(a){var o=a;o.method(e)})},r.prototype.getLabelOptionsByPosition=function(t){if(t==="middle")return{offset:0};if(t==="left")return{offset:7,style:{stroke:null,lineWidth:0}};if(t==="right")return{offset:4}},r}(Un),kl=zp;ln("bar",zp);var LP=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="bar",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=kl.getDefaultOptions,r}(Kr),Xp=LP;ia("stackedBar",Zf);var OP=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.adjustLabel=function(t,e){if(this.options.adjustPosition){var n=t.getBBox(),a=this.getElementShapeBBox(e);a.maxX<=n.maxX&&t.set("visible",!1)}},r}(Gp),XG=null;na("stacked-bar",OP);var IP=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.shouldInShapeLabels=function(t){return!0},r}(EP),VG=null;na("stacked-bar-auto",IP);var Vp=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="stackedBar",t.baseType="bar",t}return r.getDefaultOptions=function(){return(0,f.deepMix)({},i.getDefaultOptions.call(this),{xAxis:{visible:!0,autoRotateTitle:!1,grid:{visible:!0},line:{visible:!1},tickLine:{visible:!0},label:{visible:!0,autoRotate:!0,autoHide:!0},title:{visible:!0,spacing:12}},yAxis:{visible:!0,autoRotateTitle:!0,grid:{visible:!1},line:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoRotate:!0,autoHide:!0},title:{visible:!1,spacing:12}},legend:{visible:!0,position:"top-left",offsetY:0}})},r.prototype.getColorScale=function(){var t=this.options.stackField;return this.view.getScaleByField(t)},r.prototype.adjustBar=function(t){t.adjust=[{type:"stack"}]},r.prototype.renderLabel=function(){var t=this.config.scales,e=this.options,n=e.label,a=e.xField,o=t[a];if(n==null?void 0:n.visible){var s=po(this.view,"interval");this.doRenderLabel(s,(0,V.__assign)({type:"stacked-bar",formatter:o.formatter&&function(l){return o.formatter(l)}},this.options.label))}},r.prototype.geometryTooltip=function(){this.bar.tooltip={};var t=this.options.tooltip;t.fields&&(this.bar.tooltip.fields=t.fields),t.formatter&&(this.bar.tooltip.callback=t.formatter,t.fields||(this.bar.tooltip.fields=[this.options.xField,this.options.yField,this.options.stackField]))},r}(kl),Qf=Vp;ln("stackedBar",Vp);var kP=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="stackedBar",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=Qf.getDefaultOptions,r}(Kr),Hp=kP;ia("groupedBar",Zf);var Wp=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="groupedBar",t.baseType="bar",t}return r.getDefaultOptions=function(){return(0,f.deepMix)({},i.getDefaultOptions.call(this),{xAxis:{visible:!0,grid:{visible:!0}},yAxis:{visible:!0,title:{visible:!1}},label:{visible:!0,position:"right",adjustColor:!0},legend:{visible:!0,position:"right-top",offsetY:0}})},r.prototype.afterRender=function(){i.prototype.afterRender.call(this);var t=(0,f.valuesOfKey)(this.options.data,this.options.groupField)||[];this.view.on("tooltip:change",function(e){var n=e.items,a=n===void 0?[]:n,o=(0,f.sortBy)(a.slice(),function(s){return t.indexOf(s.name)}).reverse();o.forEach(function(s,l){e.items[l]=s})})},r.prototype.getColorScale=function(){var t=this.options.groupField;if(t)return this.view.getScaleByField(t)},r.prototype.scale=function(){var t={};t[this.options.groupField]={values:(0,f.valuesOfKey)(this.options.data,this.options.groupField)},this.options.meta?this.options.meta=(0,f.deepMix)({},this.options.meta,t):this.options.meta=t,i.prototype.scale.call(this)},r.prototype.adjustBar=function(t){t.adjust=[{type:"dodge",marginRatio:.1}]},r.prototype.geometryTooltip=function(){this.bar.tooltip={};var t=this.options.tooltip;t.fields&&(this.bar.tooltip.fields=t.fields),t.formatter&&(this.bar.tooltip.callback=t.formatter,t.fields||(this.bar.tooltip.fields=[this.options.xField,this.options.yField,this.options.groupField]))},r}(kl),jp=Wp;ln("groupedBar",Wp);var BP=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="groupedBar",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=jp.getDefaultOptions,r}(Kr),Up=BP,Jf=function(i,r,t){var e=(0,f.groupBy)(i,r);e=(0,f.mapValues)(e,function(o){return(0,f.map)(o,function(s){return(0,f.map)(t,function(l){return s[l]})})}),e=(0,f.mapValues)(e,f.flatten),e=(0,f.mapValues)(e,function(o){return(0,f.map)(o,function(s){var l=Number.parseFloat(s);return!(0,f.isNumber)(l)||isNaN(l)?0:l})});var n=(0,f.mapValues)(e,function(o){return(0,f.reduce)(o,function(s,l){return s+l},0)}),a=(0,f.map)(i,function(o){var s=(0,V.__assign)((0,V.__assign)({},o),{_origin:o,total:n[o[r]]});return(0,f.each)(t,function(l){s[l]=o[l]/(n[o[r]]||1)}),s});return(0,f.each)((0,f.groupBy)(a,r),function(o){var s=0;(0,f.each)(o,function(l,u){(0,f.each)(t,function(h,c){(s+l[h]>=1||u===o.length-1&&c===t.length-1&&s>0)&&(l[h]=1-s),s+=l[h]})})}),a},Zp=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="percentStackedBar",t}return r.getDefaultOptions=function(){return(0,f.deepMix)({},i.getDefaultOptions.call(this),{xAxis:{visible:!0,tickLine:{visible:!1},grid:{visible:!1},title:{visible:!0,formatter:function(t){return t+" (%)"}},label:{visible:!1,formatter:function(t){var e=/%/gi;return t.replace(e,"")}}}})},r.prototype.processData=function(t){var e=this.options,n=e.xField,a=e.yField,o=i.prototype.processData.call(this,t);return Jf(o,a,[n])},r.prototype.scale=function(){var t={},e=this.options.xField;t[e]={tickCount:6,alias:e+" (%)",min:0,max:1,formatter:function(n){var a=(n*100).toFixed(1);return a+"%"}},this.options.meta=(0,f.deepMix)({},this.options.meta,t),i.prototype.scale.call(this)},r}(Qf),Kp=Zp;ln("percentStackedBar",Zp);var DP=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="percentStackedBar",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=Kp.getDefaultOptions,r}(Kr),$p=DP,Qp=8;function FP(i,r){var t;return(0,f.each)(i,function(e){var n=e;r>=n.from&&r<n.to&&(t=n.color)}),t}var RP=function(){function i(r){this.destroyed=!1,this.view=r.view,this.plot=r.plot;var t=this.getDefaultOptions();this.options=(0,f.deepMix)(t,r,{}),this.options.leftStyle||(this.options.leftStyle=this.options.style),this.options.rightStyle||(this.options.rightStyle=this.options.style),this.init()}return i.prototype.init=function(){var r=this;this.container=this.getGeometry().labelsContainer,this.view.on("beforerender",function(){r.clear(),r.plot.canvas.draw()})},i.prototype.render=function(){var r=this,t=this.getGeometry(),e=t.elements,n=t.coordinate;this.coord=n,(0,f.each)(e,function(a){var o=a.shape,s=r.getPosition(o),l=r.getValue(o),u=r.getTextAlign(),h=[];(0,f.each)(s,function(c,v){var x=v===0?r.options.leftStyle:r.options.rightStyle,M=r.getTextColor(o,v);r.options.position==="inner"&&r.options.adjustColor&&M!=="black"&&(x.stroke=null);var k=r.options.formatter,R=k?k(l[v]):l[v],G=r.container.addShape("text",{attrs:(0,f.deepMix)({},x,{x:c.x,y:c.y,text:R,fill:M,textAlign:u[v],textBaseline:"middle"}),name:"label"});h.push(G),r.doAnimation(G)}),o.set("labelShapes",h),r.adjustPosition(h[0],h[1],o)}),this.plot.canvas.draw()},i.prototype.hide=function(){this.container.set("visible",!1),this.plot.canvas.draw()},i.prototype.show=function(){this.container.set("visible",!0),this.plot.canvas.draw()},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.destroy=function(){this.container&&this.container.remove(),this.destroyed=!0},i.prototype.getBBox=function(){return this.container.getBBox()},i.prototype.getShapeBbox=function(r){var t=this,e=[];(0,f.each)(r.get("origin").points,function(a){e.push(t.coord.convertPoint(a))});var n=new Jr(e[0].x,e[1].y,Math.abs(e[2].x-e[0].x),Math.abs(e[0].y-e[1].y));return n},i.prototype.getDefaultOptions=function(){var r=this.plot.theme,t=r.label.style;return{position:"outer",offsetX:Qp,offsetY:0,style:(0,f.clone)(t),adjustColor:!0,adjustPosition:!0}},i.prototype.getPosition=function(r){var t=this.getShapeBbox(r),e=t.minX,n=t.maxX,a=t.minY,o=t.height,s=this.options,l=s.offsetX,u=s.offsetY,h=a+o/2+u,c,v;return this.options.position==="outer"?(c=e-l,v=n+l):(c=e+l,v=n-l),[{x:c,y:h},{x:v,y:h}]},i.prototype.getValue=function(r){var t=this.plot.options.xField;return r.get("origin").data[t]},i.prototype.getTextAlign=function(){return this.options.position==="outer"?["right","left"]:["left","right"]},i.prototype.getTextColor=function(r,t){if(this.options.adjustColor&&this.options.position==="inner"){var e=r.attr("fill"),n=r.attr("opacity")?r.attr("opacity"):1,a=to(e),o=Math.round(a[0]*.299+a[1]*.587+a[2]*.114)/n,s=[{from:0,to:85,color:"white"},{from:85,to:170,color:"#F6F6F6"},{from:170,to:255,color:"black"}],l=FP(s,o);return l}var u=t===0?this.options.leftStyle.fill:this.options.rightStyle.fill;return u},i.prototype.doAnimation=function(r){this.plot.animation&&this.plot.animation===!1||(r.attr("fillOpacity",0),r.attr("strokeOpacity",0),r.stopAnimate(),r.animate({fillOpacity:1,strokeOpacity:1},800,"easeLinear",500))},i.prototype.adjustPosition=function(r,t,e){var n=e.get("origin"),a=n.x[0],o=n.x[1],s=Math.abs(o-a),l=this.view.coordinateBBox,u=[r.getBBox(),t.getBBox()],h=r.attr("x"),c=t.attr("x");if(this.options.adjustPosition&&this.options.position==="inner"){var v=u[0].width+u[1].width,x=u[0].maxX-u[1].minX>2,M=v>s;(x||M)&&(h=a-this.options.offsetX,r.attr("fill",this.options.leftStyle.fill),r.attr("textAlign","right"),u[0]=r.getBBox(),c=o+this.options.offsetX,t.attr("fill",this.options.rightStyle.fill),t.attr("textAlign","left"),u[1]=t.getBBox())}u[0].minX<l.minX&&(h=l.minX+Qp,r.attr("textAlign","left")),r.attr("x",h),t.attr("x",c),this.plot.canvas.draw()},i.prototype.getGeometry=function(){return(0,f.find)(this.view.geometries,function(r){return r.type==="interval"})},i}(),NP=RP,Jp;function qp(i,r){var t=i.getBBox(),e=t.minX+t.width/2;i.setClip({type:"rect",attrs:{x:e,y:t.minY,width:0,height:t.height}});var n=i.get("clipShape");n.animate({width:t.width,x:t.minX},r.duration,r.easing,function(){i.setClip(null)},r.delay)}qp.animationName="clipInFromCenter";function GP(i){Jp=i}function tg(i,r){var t=YP(i).attr("path"),e=(0,f.clone)(i.attr("path"));i.attr("path",t),i.animate({path:e},r.duration,r.easing,r.callback,100)}function YP(i){var r=i.id,t;return(0,f.each)(Jp,function(e){e.id===r&&(t=e)}),t}tg.animationName="updateFromCenter",hi("clipInFromCenter",qp),hi("updateFromCenter",tg);var eg=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="rangeBar",t}return r.getDefaultOptions=function(){return(0,f.deepMix)(i.getDefaultOptions.call(this),{label:{visible:!0,position:"outer"},xAxis:{visible:!0,autoRotateTitle:!1,grid:{visible:!0},line:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoRotate:!0,autoHide:!0},title:{visible:!0,spacing:12}},yAxis:{visible:!0,autoRotateTitle:!0,grid:{visible:!1},line:{visible:!0},tickLine:{visible:!0},label:{visible:!0,autoHide:!0,autoRotate:!1},title:{visible:!1,spacing:12}}},{})},r.prototype.afterRender=function(){this.renderLabel();var t=[],e=this.view.geometries;(0,f.each)(e,function(n){var a=n.elements;(0,f.each)(a,function(o){t.push(o.shape)})}),GP(t),i.prototype.afterRender.call(this)},r.prototype.renderLabel=function(){if(this.options.label&&this.options.label.visible){var t=new NP((0,V.__assign)({view:this.view,plot:this},this.options.label));t.render()}},r.prototype.animation=function(){i.prototype.animation.call(this)},r}(kl),zP=eg;ln("rangeBar",eg);var XP=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="rangeBar",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=zP.getDefaultOptions,r}(Kr),rg=XP,ng=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r}(mp),VP=ng;na("area-point",ng);var ig=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.layoutLabels=function(t,e){i.prototype.layoutLabels.call(this,t,e),this.adjustAreaLabelsStyle(e)},r.prototype.adjustAreaLabelsStyle=function(t){var e=this.view,n=this.options,a=n.darkStyle,o=n.lightStyle,s=po(e,"area"),l=b_(s).sort(function(u,h){return h.getBBox().height-u.getBBox().height});(0,f.each)(t,function(u){var h=u.getBBox(),c=bE(h.x,h.y,h.width,h.height),v=(0,f.map)(l,function(k){return{area:k,matches:(0,f.filter)(c,function(R){return!!k.isHit(R[0],R[1])}).length}}).sort(function(k,R){return k.matches-R.matches});if((0,f.last)(v).matches>0){var x=(0,f.last)(v).area.attr("fill"),M=$f(x);u.attr({fill:M?o==null?void 0:o.fill:a==null?void 0:a.fill,fillOpacity:M?o.fillOpacity:a.fillOpacity,stroke:M?o==null?void 0:o.stroke:a==null?void 0:a.stroke})}})},r}(ST),HP=ig;na("area-point-auto",ig);function WP(i){var r=i.getResponsiveTheme(),t=i.canvas;new yo({plot:i,responsiveTheme:r,dim:"x"}),new yo({plot:i,responsiveTheme:r,dim:"y"}),t.draw()}var jP=[],UP=[{name:"responsiveAxis",method:WP}],ZP={preRender:jP,afterRender:UP},KP={area:"area",line:"line",point:"point"},$P=Ai(KP);(0,f.assign)(dn,$P);var QP=function(i){var r=i.opacity||1;return{opacity:r}},JP=function(i){var r=i.opacity||1;return{opacity:r*.5}},qP=function(i){var r=i.opacity||1;return{opacity:r}},tL=function(i){var r=i.opacity||1;return{opacity:r*.5}},eL=function(i){var r=i.lineWidth||1;return{lineWidth:r+2}},rL=function(i){var r=i.fill||i.fillStyle,t=i.size||i.radius;return{radius:t+1,shadowBlur:t,shadowColor:r,stroke:r,strokeOpacity:1,lineWidth:1}},nL=function(i){var r=i.fill||i.fillStyle,t=i.size||i.radius;return{radius:t+2,shadowBlur:t,shadowColor:r,stroke:r,strokeOpacity:1,lineWidth:2}},iL=function(i){var r=i.opacity||i.fillOpacity||1;return{opacity:r*.5}},ag={areaStyle:{normal:{},active:QP,disable:JP,selected:{lineWidth:1,stroke:"#333333"}},lineStyle:{normal:{},active:qP,disable:tL,selected:eL},pointStyle:{normal:{},active:rL,disable:iL,selected:nL},label:{darkStyle:{fill:"#2c3542",stroke:"#ffffff",fillOpacity:.85},lightStyle:{fill:"#ffffff",fillOpacity:1,stroke:"#2c3542"}}};ia("area",ag);var aL={area:"area",line:"line",point:"point"},og=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="area",t}return r.getDefaultOptions=function(){return(0,f.deepMix)({},i.getDefaultOptions.call(this),{smooth:!1,areaStyle:{opacity:.25},line:{visible:!0,size:2,style:{opacity:1,lineJoin:"round",lineCap:"round"}},point:{visible:!1,size:4,shape:"point"},label:{visible:!1,type:"point"},legend:{visible:!0,position:"top-left",wordSpacing:4},tooltip:{visible:!0,shared:!0,showCrosshairs:!0,crosshairs:{type:"x"},offset:20}})},r.prototype.beforeInit=function(){i.prototype.beforeInit.call(this),this.options.responsive&&this.options.padding!=="auto"&&this.applyResponsive("preRender")},r.prototype.afterRender=function(){this.renderLabel(),this.options.responsive&&this.options.padding!=="auto"&&this.applyResponsive("afterRender"),i.prototype.afterRender.call(this)},r.prototype.geometryParser=function(t,e){return aL[e]},r.prototype.scale=function(){var t=this.options,e={};e[t.xField]={type:"cat"},(0,f.has)(t,"xAxis")&&bi(e[t.xField],t.xAxis),e[t.yField]={},(0,f.has)(t,"yAxis")&&bi(e[t.yField],t.yAxis),this.setConfig("scales",e),i.prototype.scale.call(this)},r.prototype.coord=function(){return null},r.prototype.addGeometry=function(){var t=this.options,e=ri("area","main",{plot:this});this.area=e,t.label&&this.label(),t.tooltip&&(t.tooltip.fields||t.tooltip.formatter)&&this.geometryTooltip(),this.adjustArea(e),this.setConfig("geometry",e),this.addLine(),this.addPoint()},r.prototype.adjustArea=function(t){},r.prototype.adjustLine=function(t){},r.prototype.adjustPoint=function(t){},r.prototype.addLine=function(){var t=this.options,e=(0,f.deepMix)({},t.line);if(e.visible){var n=ri("line","guide",{type:"line",plot:this,line:e});this.adjustLine(n),this.setConfig("geometry",n),this.line=n}},r.prototype.addPoint=function(){var t=this.options,e=(0,f.deepMix)({},t.point);if(e.visible){var n=ri("point","guide",{plot:this});this.adjustPoint(n),this.setConfig("geometry",n),this.point=n}},r.prototype.renderLabel=function(){var t=this.config.scales,e=this.options,n=e.label,a=e.yField,o=t[a];if(n.visible){var s=po(this.view,"area");this.doRenderLabel(s,(0,V.__assign)({type:"area-point",formatter:o.formatter&&function(l){return o.formatter(l)}},this.options.label))}},r.prototype.animation=function(){i.prototype.animation.call(this);var t=this.options;t.animation===!1&&(this.area.animate=!1,this.line&&(this.line.animate=!1),this.point&&(this.point.animate=!1))},r.prototype.label=function(){},r.prototype.geometryTooltip=function(){this.area.tooltip={};var t=this.options.tooltip;t.fields&&(this.area.tooltip.fields=t.fields),t.formatter&&(this.area.tooltip.callback=t.formatter,t.fields||(this.area.tooltip.fields=[this.options.xField,this.options.yField],this.options.seriesField&&this.area.tooltip.fields.push(this.options.seriesField)))},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,g)},r.prototype.applyResponsive=function(t){var e=this,n=ZP[t];(0,f.each)(n,function(a){var o=a;o.method(e)})},r}(Un),qf=og;ln("area",og);var oL=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="area",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=qf.getDefaultOptions,r}(Kr),sg=oL,sL=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getShapeInfo=function(t){var e=t.get("origin").points,n=e[e.length-1],a=t.attr("stroke"),o=this.plot.options.stackField,s=t.get("origin").data[0][o],l=(0,f.reduce)(n.y,function(u,h){return u+h},0)/(0,f.size)(n.y);return{x:n.x,y:l,color:a,name:s}},r}(bp),lL=sL,th=12,uL=.01,fL=100,hL=12;function cL(i){var r=-Infinity,t=Infinity,e=-Infinity;return(0,f.each)(i,function(n){t=Math.min(n.x,t),e=Math.max(n.x,e);var a=Math.abs(n.y[0]-n.y[1]);r=Math.max(r,a)}),{xRange:[t,e],maxHeight:r}}function lg(i,r,t){var e=r[0],n=r[r.length-1];(0,f.each)(r,function(o){if(o.x===i)return o.y[t];o.x<i&&o.x>e.x&&(e=o),o.x>i&&o.x<n.x&&(n=o)});var a=(i-e.x)/(n.x-e.x);return e.y[t]*(1-a)+n.y[t]*a}function vL(i,r){var t;for(t=0;t<i.length;t++){var e=i[t];if(e.x===r||e.x>r)break}return t}var dL=function(){function i(r){this.destroyed=!1,this.scaleFactor=[],this.view=r.view,this.plot=r.plot;var t=this.getDefaultOptions();this.options=(0,f.deepMix)(t,r,{}),this.init()}return i.prototype.init=function(){var r=this;this.container=this.getGeometry().labelsContainer,this.view.on("beforerender",function(){r.clear(),r.plot.canvas.draw()})},i.prototype.render=function(){var r=this,t=this.plot.options.stackField,e=this.getGeometry().dataArray,n=[];(0,f.each)(e,function(o,s){var l=r.drawLabel(o,s);l&&(n.push((0,f.deepMix)({},o[0],l)),r.scaleFactor.push(l.scaleFactor))});var a=[];(0,f.each)(n,function(o,s){var l=r.options,u=l.style,h=l.offsetX,c=l.offsetY,v=r.getFontSize(s),x=r.options.formatter,M=x?x(o._origin[t]):o._origin[t],k=r.container.addShape("text",{attrs:(0,f.deepMix)({},{x:o.x+h,y:o.y+c,text:M,fill:o.color,fontSize:v,textAlign:"center",textBaseline:"top"},u),name:"label"});a.push(k)}),this.plot.canvas.draw()},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.hide=function(){this.container.set("visible",!1),this.plot.canvas.draw()},i.prototype.show=function(){this.container.set("visible",!0),this.plot.canvas.draw()},i.prototype.destroy=function(){this.container&&this.container.remove(),this.destroyed=!0},i.prototype.getBBox=function(){return this.container.getBBox()},i.prototype.getDefaultOptions=function(){var r=this.plot.theme,t=(0,f.clone)(r.label.style);return t.stroke=null,delete t.fill,{offsetX:0,offsetY:0,style:t,autoScale:!0}},i.prototype.drawLabel=function(r,t){var e=cL(r),n=e.xRange,a=e.maxHeight,o=n[1]-n[0],s=this.getInterpolatedPoints(n[0],o,r),l=this.getLabelBbox(t),u={xRange:n,aspect:l.width/l.height,data:s,justTest:!0},h=this.bisection(hL,a,this.testFit,u,uL,fL);if(h!==null){u.justTest=!1;var c=this.testFit(u);return c.x=c.x,c.y=c.y0+(c.y1-c.y0)/2,c.scaleFactor=h/l.height*.2,c}},i.prototype.getInterpolatedPoints=function(r,t,e){for(var n=[],a=2,o=r;o<t;o+=a){var s=lg(o,e,0),l=lg(o,e,1);n.push({x:o,y:[s,l]})}return n},i.prototype.bisection=function(r,t,e,n,a,o){for(var s=0;s<o;s++){var l=(r+t)/2,u=n;u.height=l,u.width=l*u.aspect;var h=e(u),c=(t-r)/2<a;if(h&&c)return l;h?r=l:t=l}return null},i.prototype.testFit=function(r){for(var t=r.xRange,e=r.width,n=r.height,a=r.data,o=r.justTest,s=0;s<a.length;s++){var l=a[s],u=l.x,h=u+e;if(h>t[1])break;for(var c=vL(a,h),v=-Infinity,x=null,M=Infinity,k=s;k<c;k++){var R=a[k].y[1],G=a[k].y[0];if(G<M&&(M=G),R>v&&(v=R,x=G),M-v<n)break}if(M-v>=n)return o?!0:{x:u,y0:v,y1:x,width:e,height:n}}return!1},i.prototype.getLabelBbox=function(r){var t=(0,f.clone)(this.plot.theme.label.textStyle);t.fontSize=th;var e=this.container.addShape("text",{attrs:(0,V.__assign)({text:r,x:0,y:0},t)}),n=e.getBBox();return e.remove(),n},i.prototype.getGeometry=function(){return(0,f.find)(this.view.geometries,function(r){return r.type==="area"})},i.prototype.getFontSize=function(r){if(this.options.autoScale){var t=this.scaleFactor[r];return th*t}return th},i}(),pL=dL,gL={lineLabel:{Ctr:lL},areaLabel:{Ctr:pL}};function yL(i,r,t){if(i.options[r]&&i.options[r].visible){var e=gL[r],n=new e.Ctr(t);return e.padding&&i.paddingController.registerPadding(n,e.padding),n}}var mL=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r}(VP),HG=null;na("stackedArea-point",mL);var xL=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.sortLabels=function(t,e){var n=[];return e.length>0&&n.push(e.shift()),e.length>0&&n.push(e.pop()),n.push.apply(n,e),n},r}(HP),WG=null;na("stackedArea-point-auto",xL),ia("stackedArea",ag);var ug=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.plotComponents=[],t.type="stackedArea",t.baseType="area",t}return r.getDefaultOptions=function(){return(0,f.deepMix)({},i.getDefaultOptions.call(this),{label:{visible:!1,type:"area"}})},r.prototype.beforeInit=function(){var t=(0,f.get)(this.options,["label","visible"]),e=(0,f.get)(this.options,["label","type"]),n=this.options;t&&(e==="line"&&(n.lineLabel=this.options.label),e==="area"&&(n.areaLabel=this.options.label)),i.prototype.beforeInit.call(this)},r.prototype.getColorScale=function(){var t=this.options.stackField;return this.view.getScaleByField(t)},r.prototype.label=function(){var t=this.options,e=t.label;if(e&&e.visible===!1){this.line&&(this.line.label=!1),this.point&&(this.point.label=!1),this.area.label=!1;return}},r.prototype.adjustArea=function(t){t.adjust=[{type:"stack"}]},r.prototype.adjustLine=function(t){t.adjust=[{type:"stack"}]},r.prototype.adjustPoint=function(t){t.adjust=[{type:"stack"}]},r.prototype.afterRender=function(){this.renderPlotComponents(),this.options.responsive=!1,i.prototype.afterRender.call(this)},r.prototype.geometryTooltip=function(){this.area.tooltip={};var t=this.options.tooltip;t.fields&&(this.area.tooltip.fields=t.fields),t.formatter&&(this.area.tooltip.callback=t.formatter,t.fields||(this.area.tooltip.fields=[this.options.xField,this.options.yField,this.options.stackField]))},r.prototype.renderPlotComponents=function(){var t=this,e=["areaLabel","lineLabel"];(0,f.each)(e,function(n){var a=(0,V.__assign)({view:t.view,plot:t},t.options[n]),o=yL(t,n,a);o&&(o.render(),t.plotComponents.push(o))})},r}(qf),eh=ug;ln("stackedArea",ug);var bL=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="stackedArea",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=eh.getDefaultOptions,r}(Kr),fg=bL,hg=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="percentStackedArea",t.baseType="stackedArea",t}return r.getDefaultOptions=function(){return(0,f.deepMix)({},i.getDefaultOptions.call(this),{yAxis:{visible:!0,label:{visible:!0,formatter:function(t){var e=/%/gi;return t.replace(e,"")}}}})},r.prototype.processData=function(t){var e=this.options,n=e.xField,a=e.yField;return Jf(t,n,[a])},r.prototype.scale=function(){var t={},e=this.options.yField;t[this.options.yField]={tickCount:6,alias:e+" (%)",min:0,max:1,formatter:function(n){var a=(n*100).toFixed(1);return a+"%"}},this.options.meta=(0,f.deepMix)({},t,this.options.meta),i.prototype.scale.call(this)},r}(eh),cg=hg;ln("percentStackedArea",hg);var wL=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="percentStackedArea",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=cg.getDefaultOptions,r}(Kr),vg=wL;function SL(i){var r=i.getResponsiveTheme(),t=i.canvas;new yo({plot:i,responsiveTheme:r,dim:"x"}),new yo({plot:i,responsiveTheme:r,dim:"y"}),t.draw()}var CL=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getType=function(){return(0,f.get)(this.plot.options,["label","position"],"inner")},r}(gp);function ML(i){var r=i.getResponsiveTheme();new CL({plot:i,responsiveTheme:r})}var EL=[],_L=[{name:"responsiveAxis",method:SL},{name:"responsiveLabel",method:ML}],AL={preRender:EL,afterRender:_L},TL={label:{top:{constraints:[{name:"elementCollision"}],rules:{elementCollision:[{name:"nodeJitterUpward"},{name:"nodesResamplingByState",option:{keep:["min","max","median"]}},{name:"textHide"}]}}}};Vd("column",TL);var dg=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getLabelItemAttrs=function(t,e){var n,a,o=this.options,s=o.style,l=o.formatter,u=[].concat(t.getModel().mappingData),h=this.getValue(t);return(0,f.deepMix)({},s,(0,V.__assign)((0,V.__assign)({},this.getPosition(t)),{text:l?l(h,(n={},n[ws]=(a=u[0])===null||a===void 0?void 0:a._origin,n.mappingDatum=u[0],n.mappingDatumIndex=0,n.element=t,n.elementIndex=e,n),e):h,fill:this.getTextFill(t),stroke:this.getTextStroke(t),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseLine()}))},r.prototype.getDefaultOptions=function(){var t=this.layer.theme,e=t.label,n=e===void 0?{}:e;return(0,V.__assign)({offsetX:0,offsetY:0,adjustPosition:!0},n)},r.prototype.adjustLabel=function(t,e){var n=this.options.adjustPosition;if(n){var a=this.getDefaultOffset(),o=t.getBBox(),s=this.getElementShapeBBox(e);if(s.height<=o.height){var l=s.minY+this.options.offsetY-a;t.attr("y",l),t.attr("textBaseline","bottom"),t.attr("fill",this.options.style.fill)}}},r.prototype.getValue=function(t){return(0,f.get)(t.getData(),this.layer.options.yField)},r.prototype.getPosition=function(t){var e=this.getDefaultOffset(),n=this.getValue(t),a=this.getElementShapeBBox(t),o=a.minX,s=a.minY,l=a.maxY,u=a.height,h=a.width,c=this.options,v=c.offsetX,x=c.offsetY,M=c.position,k=o+h/2+v,R=n>0?-1:1,G;if(M==="top"){var N=n>0?s:l;G=N+e*R+x}else if(M==="bottom"){var N=n>0?l:s;G=N+e*R+x}else G=s+u/2+x;return{x:k,y:G}},r.prototype.getTextFill=function(t){var e=t.shape;if(this.options.adjustColor&&this.options.position!=="top"){var n=e.attr("fill"),a=e.attr("opacity")?e.attr("opacity"):1,o=to(n),s=Math.round(o[0]*.299+o[1]*.587+o[2]*.114)/a,l=[{from:0,to:85,color:"white"},{from:85,to:170,color:"#F6F6F6"},{from:170,to:255,color:"black"}],u=Il(l,s);return u}var h=this.options.style.fill;return h},r.prototype.getTextStroke=function(t){var e=this.getTextFill(t),n=this.options,a=n.position,o=n.adjustColor;return a!=="top"&&o&&e!=="black"?null:void 0},r.prototype.getElementShapeBBox=function(t){var e=this,n=t.shape,a=[];(0,f.each)(n.get("origin").points,function(x){a.push(e.coord.convertPoint(x))});var o=a.map(function(x){return x.x}),s=Math.min.apply(Math,o),l=Math.max.apply(Math,o),u=a.map(function(x){return x.y}),h=Math.min.apply(Math,u),c=Math.max.apply(Math,u),v=new Jr(s,h,l-s,c-h);return v},r.prototype.getTextAlign=function(){return"center"},r.prototype.getTextBaseLine=function(){return"middle"},r.prototype.getLabelOffset=function(){return{x:0,y:0}},r}(Tf),rh=dg;na("column",dg);var pg=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getPosition=function(t){var e=this.getDefaultOffset(),n=this.getValue(t),a=this.getElementShapeBBox(t),o=a.minX,s=a.minY,l=a.maxY,u=a.width,h=this.options,c=h.offsetX,v=h.offsetY,x=o+u/2+c,M=n>0?-1:1,k=n>0?s:l,R=k+e*M+v;return{x,y:R}},r.prototype.getTextFill=function(t){var e=this.options.style;return e.fill},r.prototype.getTextStroke=function(t){},r.prototype.adjustLabel=function(t,e){},r.prototype.layoutLabels=function(t,e){this.shouldInShapeLabels(e)&&this.inShapeLabels(t,e),this.autoHideLabels(t,e)},r.prototype.shouldInShapeLabels=function(t){var e=this;return(0,f.every)(t,function(n){var a=n.getBBox(),o=n.get("element"),s=e.getElementShapeBBox(o);return s.width>=a.width})},r.prototype.inShapeLabels=function(t,e){var n=this,a=this.getCoordinateBBox(),o=t.getXYFields()[0],s=this.options,l=s.darkStyle,u=s.lightStyle,h=(0,f.groupBy)(e,function(c){return c.get(ca)[wn.FIELD_ORIGIN][o]});(0,f.each)(e,function(c){var v=h[c.get(ca)[wn.FIELD_ORIGIN][o]]||[],x=c.get("element"),M=x.shape,k=$f(M.attr("fill")),R=n.getElementShapeBBox(x),G=Jr.fromBBoxObject(c.getBBox());if(Gf(a,R)<=0&&c.set("visible",!1),G.height>R.height){var N=(0,f.findIndex)(v,function(ut){return ut===c});N!==0&&c.set("visible",!1)}else{c.attr({y:R.y+R.height/2,textBaseline:"middle"});var ot=G.width>R.width||G.height>R.height;ot?c.attr({stroke:u==null?void 0:u.stroke}):c.attr({fill:k?u==null?void 0:u.fill:l==null?void 0:l.fill,fillOpacity:k?u==null?void 0:u.fillOpacity:l==null?void 0:l.fillOpacity,stroke:void 0})}})},r.prototype.autoHideLabels=function(t,e){var n=this.getCoordinateBBox(),a=this.filterLabels(e),o=t.getXYFields()[0],s=[],l=[],u=(0,f.groupBy)(a,function(x){return x.get(ca)[wn.FIELD_ORIGIN][o]}),h=(0,f.uniq)((0,f.map)(a,function(x){return x.get(ca)[wn.FIELD_ORIGIN][o]})),c;for((0,f.size)(h)>0&&(c=h.shift(),(0,f.each)(u[c],function(x){return l.push(x)})),(0,f.size)(h)>0&&(c=h.pop(),(0,f.each)(u[c],function(x){return l.push(x)})),(0,f.each)(h.reverse(),function(x){(0,f.each)(u[x],function(M){return l.push(M)})});l.length>0;){var v=l.shift();v.get("visible")&&(Al(v,n),Tl(v,s)?v.set("visible",!1):s.push(v))}},r.prototype.filterLabels=function(t){var e=500,n=[],a=Math.max(Math.floor(t.length/e),1);return(0,f.each)(t,function(o,s){s%a==0?n.push(o):o.set("visible",!1)}),n},r}(rh),PL=pg;na("column-auto",pg);var LL={column:"interval"},OL=Ai(LL);(0,f.assign)(dn,OL);var IL=function(i){var r=i.opacity||1;return{opacity:r*.5}},kL=function(i){var r=i.opacity||1;return{opacity:r*.5,fillOpacity:r*.5}},nh={label:{darkStyle:{fill:"#2c3542",stroke:"#ffffff",fillOpacity:.85},lightStyle:{fill:"#ffffff",stroke:"#ffffff",fillOpacity:1}},columnStyle:{normal:{},active:IL,disable:kL,selected:{lineWidth:1,stroke:"black"}}};ia("column",nh);var BL={column:"interval"},DL={interval:"column"},gg=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="column",t}return r.getDefaultOptions=function(){return(0,f.deepMix)({},i.getDefaultOptions.call(this),{xAxis:{visible:!0,tickLine:{visible:!1},title:{visible:!0}},yAxis:{nice:!0,title:{visible:!0},label:{visible:!0},grid:{visible:!0}},tooltip:{visible:!0,shared:!0,showCrosshairs:!1,showMarkers:!1},label:{visible:!1,position:"top",adjustColor:!0},legend:{visible:!0,position:"top-left"},interactions:[{type:"tooltip"},{type:"active-region"},{type:"legend-active"},{type:"legend-filter"}],conversionTag:{visible:!1}})},r.prototype.beforeInit=function(){i.prototype.beforeInit.call(this),this.options.responsive&&this.options.padding!=="auto"&&this.applyResponsive("preRender")},r.prototype.afterRender=function(){var t=this.options;this.renderLabel(),this.options.responsive&&this.options.padding!=="auto"&&this.applyResponsive("afterRender"),t.conversionTag.visible&&(this.conversionTag=new Rp((0,V.__assign)({view:this.view,field:t.yField,transpose:!0,animation:t.animation!==!1},t.conversionTag))),i.prototype.afterRender.call(this)},r.prototype.geometryParser=function(t,e){return t==="g2"?BL[e]:DL[e]},r.prototype.processData=function(t){var e=this.options.xField,n=[];return(0,f.each)(t,function(a){var o=(0,f.clone)(a);o[e]=o[e].toString(),n.push(o)}),n},r.prototype.scale=function(){var t=this.options,e={};e[t.xField]={type:"cat"},(0,f.has)(t,"xAxis")&&bi(e[t.xField],t.xAxis),e[t.yField]={},(0,f.has)(t,"yAxis")&&bi(e[t.yField],t.yAxis),this.setConfig("scales",e),i.prototype.scale.call(this)},r.prototype.coord=function(){},r.prototype.adjustColumn=function(t){},r.prototype.addGeometry=function(){var t=this.options,e=ri("interval","main",{positionFields:[t.xField,t.yField],plot:this});t.conversionTag.visible&&this.setConfig("theme",(0,f.deepMix)({},this.getTheme(),{columnWidthRatio:1/3})),this.adjustColumn(e),this.column=e,t.tooltip&&(t.tooltip.fields||t.tooltip.formatter)&&this.geometryTooltip(),this.setConfig("geometry",e)},r.prototype.geometryTooltip=function(){this.column.tooltip={};var t=this.options.tooltip;t.fields&&(this.column.tooltip.fields=t.fields),t.formatter&&(this.column.tooltip.callback=t.formatter,t.fields||(this.column.tooltip.fields=[this.options.xField,this.options.yField],this.options.colorField&&this.column.tooltip.fields.push(this.options.colorField)))},r.prototype.animation=function(){i.prototype.animation.call(this),this.options.animation===!1&&(this.column.animate=!1)},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,w)},r.prototype.renderLabel=function(){var t=this.config.scales,e=this.options,n=e.label,a=e.yField,o=t[a];if(n==null?void 0:n.visible){var s=po(this.view,"interval");this.doRenderLabel(s,(0,V.__assign)({type:"column",formatter:o.formatter&&function(l){return o.formatter(l)}},this.options.label))}},r.prototype.applyResponsive=function(t){var e=this,n=AL[t];(0,f.each)(n,function(a){var o=a;o.method(e)})},r}(Un),Qo=gg;ln("column",gg);var FL=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="column",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=Qo.getDefaultOptions,r}(Kr),yg=FL;ia("groupedColumn",nh);var mg=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.baseType="column",t.type="groupedColumn",t}return r.getDefaultOptions=function(){return(0,f.deepMix)({},i.getDefaultOptions.call(this),{yAxis:{title:{visible:!0}}})},r.prototype.getResponsiveTheme=function(){return this.themeController.getResponsiveTheme("column")},r.prototype.getColorScale=function(){var t=this.options.groupField;if(t)return this.view.getScaleByField(t)},r.prototype.addGeometry=function(){i.prototype.addGeometry.call(this)},r.prototype.adjustColumn=function(t){t.adjust=[{type:"dodge",marginRatio:.1}]},r.prototype.geometryTooltip=function(){this.column.tooltip={};var t=this.options.tooltip;t.fields&&(this.column.tooltip.fields=t.fields),t.formatter&&(this.column.tooltip.callback=t.formatter,t.fields||(this.column.tooltip.fields=[this.options.xField,this.options.yField,this.options.groupField]))},r}(Qo),ih=mg;ln("groupedColumn",mg);var RL=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="groupedColumn",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=ih.getDefaultOptions,r}(Kr),xg=RL;function bg(i,r){var t=[],e=i.get("origin").points;return(0,f.each)(e,function(n){t.push(r.convertPoint(n))}),t}function NL(){return{areaStyle:{opacity:.2},lineStyle:{lineWidth:2,opacity:.1}}}var GL=function(){function i(r){this.areas=[],this.lines=[],this._areaStyle={},this._lineStyle={},(0,f.assign)(this,r),this._init()}return i.prototype.draw=function(){var r=this,t=this._getGroupedShapes();(0,f.each)(t,function(e,n){e.length>0&&r._drawConnection(e,n)}),this.triggerOn?this._addInteraction():this.animation&&this._initialAnimation()},i.prototype.clear=function(){this.container&&this.container.clear(),this.areas=[],this.lines=[]},i.prototype.destroy=function(){this.container&&this.container.remove()},i.prototype.setState=function(r,t){r==="active"&&this._onActive(t),r==="disabled"&&this._onDisabled(t),r==="selected"&&this._onSelected(t)},i.prototype._init=function(){var r=this,t=this.view.backgroundGroup;this.container=t.addGroup(),this.draw(),this.view.on("beforerender",function(){r.clear()})},i.prototype._getGroupedShapes=function(){var r=this,t=this.view.getScaleByField(this.field).values,e=this.view.geometries[0],n=e.getShapes(),a={};return(0,f.each)(t,function(o){a[o]=[]}),(0,f.each)(n,function(o){var s=o.get("origin").data,l=s[r.field];a[l].push(o)}),a},i.prototype._drawConnection=function(r,t){var e=r[0].attr("fill");this._areaStyle[t]=this._getShapeStyle(e,"area"),this._lineStyle[t]=this._getShapeStyle(e,"line");for(var n=this.view.geometries[0].coordinate,a=0;a<r.length-1;a++){var o=bg(r[a],n),s=bg(r[a+1],n),l=(0,f.mix)({},this._areaStyle[t]),u=(0,f.mix)({},this._lineStyle[t]);this.triggerOn&&(l.opacity=0,u.opacity=0);var h=this.container.addShape("path",{attrs:(0,f.mix)({},l,{path:[["M",o[2].x,o[2].y],["L",s[1].x,s[1].y],["L",s[0].x,s[0].y],["L",o[3].x,o[3].y]]}),name:"connectedArea"}),c=this.container.addShape("path",{attrs:(0,f.mix)({},u,{path:[["M",o[2].x,o[2].y],["L",s[1].x,s[1].y]]}),name:"connectedArea"}),v=r[a].get("origin").data;h.set("data",v),c.set("data",v),this.areas.push(h),this.lines.push(c)}},i.prototype._getShapeStyle=function(r,t){var e=t+"Style";if(this[e])return this[e];var n=NL()[e],a={fill:r};return t==="line"&&(a={stroke:r}),(0,f.mix)(n,a)},i.prototype._addInteraction=function(){var r=this,t=this.triggerOn;this.view.on("interval:"+t,function(e){var n=e.target.get("origin").data[r.field];r.setState("active",{name:r.field,exp:n}),r.setState("disabled",{name:r.field,exp:function(a){return a!==n}}),r.view.canvas.draw()}),this.view.on("mousemove",function(e){e.gEvent.target.get("name")!=="interval"&&r.setState("disabled",{name:r.field,exp:function(){return!0}})})},i.prototype._initialAnimation=function(){var r=this.view.coordinateBBox,t=r.x,e=r.y,n=r.width,a=r.height;this.container.setClip({type:"rect",attrs:{x:t,y:e,width:0,height:a}}),this.container.set("animating",!0),this.container.getClip().animate({width:n},600,"easeQuadOut",function(){},400)},i.prototype._onActive=function(r){var t=this;(0,f.each)(this.areas,function(e){var n=e.get("data"),a=n[t.field];if(qa(n,r)){var o=t._areaStyle[a].opacity||1;e.stopAnimate(),e.animate({opacity:o},400,"easeQuadOut")}}),(0,f.each)(this.lines,function(e){var n=e.get("data"),a=n[t.field];if(qa(n,r)){var o=t._lineStyle[a].opacity||1;e.stopAnimate(),e.animate({opacity:o},400,"easeQuadOut")}})},i.prototype._onDisabled=function(r){(0,f.each)(this.areas,function(t){var e=t.get("data");qa(e,r)&&(t.stopAnimate(),t.animate({opacity:0},400,"easeQuadOut"))}),(0,f.each)(this.lines,function(t){var e=t.get("data");qa(e,r)&&(t.stopAnimate(),t.animate({opacity:0},400,"easeQuadOut"))})},i.prototype._onSelected=function(r){this._onActive(r)},i.prototype.getGeometry=function(){return(0,f.find)(this.view.geometries,function(r){return r.type==="interval"})},i}(),YL=GL;ia("stackedColumn",nh);var zL=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.adjustLabel=function(t,e){var n=this.options.adjustPosition;if(n){var a=t.getBBox(),o=this.getElementShapeBBox(e);(o.height<a.height||o.width<a.width)&&t.hide()}},r}(rh),jG=null;na("stacked-column",zL);var XL=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.shouldInShapeLabels=function(t){return!0},r}(PL),UG=null;na("stacked-column-auto",XL);var wg=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="stackedColumn",t.baseType="column",t}return r.getDefaultOptions=function(){return(0,f.deepMix)({},i.getDefaultOptions.call(this),{legend:{visible:!0,position:"right-top"},label:{visible:!1,position:"middle",offset:0,adjustColor:!0},connectedArea:{visible:!1,triggerOn:"mouseenter"}})},r.prototype.init=function(){this.options.connectedArea.visible&&(this.options.tooltip.crosshairs=null),i.prototype.init.call(this)},r.prototype.afterRender=function(){var t=this.options;t.connectedArea.visible&&(this.connectedArea=new YL((0,V.__assign)({view:this.view,field:t.stackField,animation:t.animation!==!1},t.connectedArea))),i.prototype.afterRender.call(this)},r.prototype.getColorScale=function(){var t=this.options.stackField;return this.view.getScaleByField(t)},r.prototype.adjustColumn=function(t){t.adjust=[{type:"stack"}]},r.prototype.renderLabel=function(){var t=this.config.scales,e=this.options,n=e.label,a=e.yField,o=t[a];if(n&&n.visible){var s=po(this.view,"interval");this.doRenderLabel(s,(0,V.__assign)({type:"stacked-column",formatter:o.formatter&&function(l){return o.formatter(l)}},this.options.label))}},r.prototype.geometryTooltip=function(){this.column.tooltip={};var t=this.options.tooltip;t.fields&&(this.column.tooltip.fields=t.fields),t.formatter&&(this.column.tooltip.callback=t.formatter,t.fields||(this.column.tooltip.fields=[this.options.xField,this.options.yField,this.options.stackField]))},r}(Qo),Bl=wg;ln("stackedColumn",wg);var VL=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="stackedColumn",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=Bl.getDefaultOptions,r}(Kr),Sg=VL,ah=8;function HL(i,r){var t;return(0,f.each)(i,function(e){var n=e;r>=n.from&&r<n.to&&(t=n.color)}),t}var WL=function(){function i(r){this.destroyed=!1,this.view=r.view,this.plot=r.plot;var t=this.getDefaultOptions();this.options=(0,f.deepMix)(t,r,{}),this.options.topStyle||(this.options.topStyle=this.options.style),this.options.bottomStyle||(this.options.bottomStyle=this.options.style),this.init()}return i.prototype.init=function(){var r=this;this.container=this.getGeometry().labelsContainer,this.view.on("beforerender",function(){r.clear(),r.plot.canvas.draw()})},i.prototype.render=function(){var r=this,t=this.getGeometry(),e=t.coordinate,n=t.elements;this.coord=e,(0,f.each)(n,function(a){var o=a.shape,s=r.getPosition(o),l=r.getValue(o),u=r.getTextBaseline(),h=[];(0,f.each)(s,function(c,v){var x=v===1?r.options.topStyle:r.options.bottomStyle,M=r.getTextColor(o,v);r.options.position==="inner"&&r.options.adjustColor&&M!=="black"&&(x.stroke=null);var k=r.options.formatter,R=k?k(l[v]):l[v],G=r.container.addShape("text",{attrs:(0,f.deepMix)({},x,{x:c.x,y:c.y,text:R,fill:M,textAlign:"center",textBaseline:u[v]}),name:"label"});h.push(G),r.doAnimation(G)}),o.set("labelShapes",h),r.adjustPosition(h[0],h[1],o)}),this.plot.canvas.draw()},i.prototype.hide=function(){this.container.set("visible",!1),this.plot.canvas.draw()},i.prototype.show=function(){this.container.set("visible",!0),this.plot.canvas.draw()},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.destroy=function(){this.container&&this.container.remove(),this.destroyed=!0},i.prototype.getBBox=function(){return this.container.getBBox()},i.prototype.getShapeBbox=function(r){var t=this,e=[];(0,f.each)(r.get("origin").points,function(a){e.push(t.coord.convertPoint(a))});var n=new Jr(e[0].x,e[1].y,Math.abs(e[2].x-e[0].x),Math.abs(e[0].y-e[1].y));return n},i.prototype.getDefaultOptions=function(){var r=this.plot.theme,t=r.label.style;return{position:"outer",offsetX:0,offsetY:ah,style:(0,f.clone)(t),adjustColor:!0,adjustPosition:!0}},i.prototype.getPosition=function(r){var t=this.getShapeBbox(r),e=t.minX,n=t.minY,a=t.maxY,o=t.width,s=this.options.offsetY,l=e+o/2,u,h;return this.options.position==="outer"?(u=n-s,h=a+s):(u=n+s,h=a-s),[{x:l,y:h},{x:l,y:u}]},i.prototype.getValue=function(r){var t=this.plot.options.yField;return r.get("origin").data[t]},i.prototype.getTextBaseline=function(){return this.options.position==="outer"?["top","bottom"]:["bottom","top"]},i.prototype.getTextColor=function(r,t){if(this.options.adjustColor&&this.options.position==="inner"){var e=r.attr("fill"),n=r.attr("opacity")?r.attr("opacity"):1,a=to(e),o=Math.round(a[0]*.299+a[1]*.587+a[2]*.114)/n,s=[{from:0,to:85,color:"white"},{from:85,to:170,color:"#F6F6F6"},{from:170,to:255,color:"black"}],l=HL(s,o);return l}var u=t===1?this.options.topStyle.fill:this.options.bottomStyle.fill;return u},i.prototype.doAnimation=function(r){this.plot.animation&&this.plot.animation===!1||(r.attr("fillOpacity",0),r.attr("strokeOpacity",0),r.stopAnimate(),r.animate({fillOpacity:1,strokeOpacity:1},800,"easeLinear",500))},i.prototype.adjustPosition=function(r,t,e){var n=e.get("origin"),a=n.y[1],o=n.y[0],s=e.getBBox(),l=s.height,u=l,h=this.view.coordinateBBox,c=[r.getBBox(),t.getBBox()],v=r.attr("y"),x=t.attr("y");if(this.options.adjustPosition&&this.options.position==="inner"){var M=c[0].height+c[1].height,k=c[1].maxY-c[0].minY>2,R=M>u;(k||R)&&(x=a-this.options.offsetY,t.attr("fill",this.options.topStyle.fill),t.attr("textBaseline","bottom"),v=o+this.options.offsetY,r.attr("fill",this.options.bottomStyle.fill),r.attr("textBaseline","top"),c[0]=r.getBBox(),c[1]=t.getBBox())}c[0].maxY>h.maxY-ah&&(v=h.maxY-ah/2,r.attr("textBaseline","bottom")),r.attr("y",v),t.attr("y",x),this.plot.canvas.draw()},i.prototype.getGeometry=function(){return(0,f.find)(this.view.geometries,function(r){return r.type==="interval"})},i}(),jL=WL,Cg;function Mg(i,r){var t=i.getBBox(),e=t.minY+t.height/2;i.setClip({type:"rect",attrs:{x:t.minX,y:e,width:t.width,height:0}});var n=i.get("clipShape");n.animate({height:t.height,y:t.minY},r.duration,r.easing,function(){i.setClip(null)},r.delay)}Mg.animationName="clipInFromCenterVertical";function UL(i){Cg=i}function Eg(i,r){var t=ZL(i).attr("path"),e=(0,f.clone)(i.attr("path"));i.attr("path",t),i.animate({path:e},r.duration,r.easing,r.callback,100)}function ZL(i){var r=i.id,t;return(0,f.each)(Cg,function(e){e.id===r&&(t=e)}),t}Eg.animationName="updateFromCenterVertical",hi("clipInFromCenterVertical",Mg),hi("updateFromCenterVertical",Eg);var _g=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="rangeColumn",t}return r.getDefaultOptions=function(){return(0,f.deepMix)(i.getDefaultOptions.call(this),{label:{visible:!0,position:"outer"}},{})},r.prototype.afterRender=function(){this.renderLabel();var t=[],e=this.view.geometries;(0,f.each)(e,function(n){var a=n.elements;(0,f.each)(a,function(o){t.push(o.shape)})}),UL(t),i.prototype.afterRender.call(this)},r.prototype.animation=function(){i.prototype.animation.call(this),this.column.animate={appear:{animation:"clipInFromCenterVertical",duration:600},update:{animation:"updateFromCenterVertical",duration:600}}},r.prototype.renderLabel=function(){if(this.options.label&&this.options.label.visible){var t=new jL((0,V.__assign)({view:this.view,plot:this},this.options.label));t.render()}},r}(Qo),KL=_g;ln("rangeColumn",_g);var $L=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="rangeColumn",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=KL.getDefaultOptions,r}(Kr),Ag=$L,Tg=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="percentStackedColumn",t}return r.getDefaultOptions=function(){return(0,f.deepMix)({},i.getDefaultOptions.call(this),{label:{visible:!0,position:"middle",offset:0},yAxis:{visible:!0,tick:{visible:!1},grid:{visible:!1},title:{visible:!0},label:{visible:!1}}})},r.prototype.processData=function(t){var e=this.options,n=e.xField,a=e.yField;return Jf(t||[],n,[a])},r.prototype.scale=function(){var t={},e=this.options.yField;t[e]={tickCount:6,alias:e+" (%)",min:0,max:1,formatter:function(n){var a=(n*100).toFixed(1);return a+"%"}},this.options.meta=(0,f.deepMix)({},this.options.meta,t),i.prototype.scale.call(this)},r}(Bl),Pg=Tg;ln("percentStackedColumn",Tg);var QL=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="percentStackedColumn",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=Pg.getDefaultOptions,r}(Kr),Lg=QL,JL={pie:"interval"},qL=Ai(JL);(0,f.assign)(dn,qL);function Dl(i,r,t){return{x:i.x+t*Math.cos(r),y:i.y+t*Math.sin(r)}}function ZG(i){return{x:i.x+i.width/2,y:i.y+i.height/2}}function tO(i,r,t){t===void 0&&(t=0);var e=Math.max(0,Math.min(i.x+i.width+t,r.x+r.width+t)-Math.max(i.x-t,r.x-t)),n=Math.max(0,Math.min(i.y+i.height+t,r.y+r.height+t)-Math.max(i.y-t,r.y-t));return e*n}function eO(i,r,t){t===void 0&&(t=0);var e=Math.max(0,Math.min(i.x+i.width+t,r.x+r.width+t)-Math.max(i.x-t,r.x-t)),n=Math.max(0,Math.min(i.y+i.height+t,r.y+r.height+t)-Math.max(i.y-t,r.y-t));return e&&i.x<r.x&&(e=-e),n&&i.y<r.y&&(n=-n),i.x===r.x&&i.width===r.width&&(e=r.width),i.y===r.y&&i.height===r.height&&(n=r.height),{xOverlap:e,yOverlap:n}}function KG(i,r){return i.x<r.x&&i.x+i.width>r.x+r.width&&i.y<r.y&&i.y+i.height>r.y+r.height}var rO=function(i,r,t){return t===void 0&&(t=Math.pow(Number.EPSILON,.5)),[i,r].includes(Infinity)?Math.abs(i)===Math.abs(r):Math.abs(i-r)<t};function nO(i,r){var t=i.getCenter();return Math.atan2(r.y-t.y,r.x-t.x)}function iO(i){var r=Math.PI/2,t=i;return(t>r||t<-r)&&(t=t+Math.PI),t}var $G=4;function aO(i){var r=Number(i.endsWith("%")?i.slice(0,-1):i);return r/100}function oO(i,r){var t=i.getBBox();r.y<=t.y&&r.y+r.height>=t.y+t.height||i.get("parent").set("visible",!1)}var sO=function(){function i(r,t){this.destroyed=!1,this.plot=r,this.coordinateBBox=this.plot.view.coordinateBBox;var e=(0,f.deepMix)(this.getDefaultOptions(),t,{});this.adjustOption(e),this.options=e,this.init()}return i.prototype.adjustOverlap=function(r,t){for(var e=1;e<r.length;e++)for(var n=r[e],a=0,o=e-1;o>=0;o--){var s=r[o],l=s.getBBox(),u=n.getBBox();if(s.get("parent").get("visible")&&(a=tO(l,u),!rO(a,0))){n.get("parent").set("visible",!1);break}}r.forEach(function(h){return oO(h,t)})},i.prototype.adjustItem=function(r){},i.prototype.init=function(){var r=this;this.container=this.getGeometry().labelsContainer,this.plot.view.on("beforerender",function(){r.clear(),r.plot.canvas.draw()})},i.prototype.render=function(){this.clear(),this.initArcPoints(),this.drawTexts(),this.drawLines()},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.hide=function(){this.container.set("visible",!1),this.plot.canvas.draw()},i.prototype.show=function(){this.container.set("visible",!0),this.plot.canvas.draw()},i.prototype.destroy=function(){this.container&&this.container.remove(),this.destroyed=!0},i.prototype.getFilteredSum=function(){var r=this.plot.options.angleField,t=this.plot.view.filteredData||[];return t.reduce(function(e,n){return e+n[r]},0)},i.prototype.drawTexts=function(){var r=this,t=this.options,e=t.style,n=t.formatter,a=t.autoRotate,o=t.offsetX,s=t.offsetY,l=t.adjustPosition,u=t.allowOverlap,h=this.getItems(),c=[];h.map(function(v,x){var M=(0,f.deepMix)({},v,e),k=r.getFilteredSum(),R=r.plot.options.angleField,G=v.origin[R]/k,N=n?n(v.name,{_origin:v.origin,percent:G},x):v.name,ot=r.container.addGroup({name:"itemGroup",index:x,capture:!1}),ut=ot.addShape("text",{attrs:(0,f.deepMix)({},M,{x:v.x+o,y:v.y+s,text:N})});ut.set("id","text-"+v.name+"-"+x),c.push(ut)}),c.forEach(function(v){var x=r.coordinateBBox;r.adjustText(v,x)}),l&&this.layout(c,h,this.coordinateBBox),u||this.adjustOverlap(c,this.coordinateBBox),c.forEach(function(v,x){a&&r.rotateLabel(v,iO(h[x].angle))})},i.prototype.adjustText=function(r,t){var e=r.getBBox(),n=e.width,a=0;if(e.maxX>t.maxX?n=t.maxX-e.minX:e.minX<t.minX&&(n=e.maxX-t.minX),r.attr("textAlign")==="left"?r.attr("x",Math.max(e.x-a,0)):r.attr("textAlign")==="right"&&r.attr("x",Math.max(e.maxX-a,0)),n!==e.width){var o={};["fontSize","fontFamily","fontWeight"].forEach(function(l){o[l]=r.attr(l)});var s=r.attr("text").split(`
`).map(function(l){return Ld(l,n,o)});r.attr("text",s.join(`
`))}},i.prototype.drawLines=function(){var r=this;if(this.options.line.visible){var t=this.container.get("children"),e=this.getCoordinate().center;t.forEach(function(n,a){var o=n.get("children")[0],s=r.arcPoints[a],l=s.x<e.x,u=r.options.offset>4?4:0,h=r.getLinePath(o,s,u),c=r.options.line;n.addShape("path",{attrs:(0,V.__assign)({path:h,stroke:s.color},c)}),o.attr("x",o.attr("x")+(l?-u:u))})}},i.prototype.getLinePath=function(r,t,e){var n=this.options.line?this.options.line.smooth:!1,a=t.angle,o=this.getCoordinate(),s=o.center,l=o.radius,u=Dl(s,a,l+e);e<4&&(u=t);var h=t.x<s.x,c=r.getBBox(),v={x:h?c.maxX:c.minX,y:c.y+c.height/2},x=["C",v.x+(h?1:-1)*(e<4?e/2:4),v.y,2*u.x-t.x,2*u.y-t.y,u.x,u.y],M=["L",u.x,u.y],k=n?x:M,R=["M",v.x,v.y].concat(k).concat("L",t.x,t.y);return R.join(",")},i.prototype.getGeometry=function(){return this.plot.view.geometries[0]},i.prototype.getCoordinate=function(){var r=this.getGeometry().coordinate,t=r.getCenter(),e=r.getRadius(),n=r.startAngle;return{center:t,radius:e,startAngle:n}},i.prototype.adjustOption=function(r){var t=r.offset,e=this.getCoordinate().radius;(0,f.isString)(t)&&(t=e*aO(t)),r.offset=t},i.prototype.rotateLabel=function(r,t){var e=r.attr("x"),n=r.attr("y"),a=Ve.transform(r.getMatrix(),[["t",-e,-n],["r",t],["t",e,n]]);r.setMatrix(a)},i.prototype.getItems=function(){var r=this,t=this.options.offset,e=this.getCoordinate(),n=e.center,a=e.radius,o=this.arcPoints.map(function(s){var l=Dl(n,s.angle,a+t),u=(0,V.__assign)((0,V.__assign)({},s),l);return r.adjustItem(u),u});return o},i.prototype.initArcPoints=function(){var r=this,t=this.plot.options.angleField,e=this.getGeometry().elements,n=this.getCoordinate(),a=n.center,o=n.radius,s=this.getCoordinate().startAngle,l=this.getGeometry().attributes.position.scales,u=l[1],h=u.field,c=e.map(function(v){var x=v.shape.get("origin"),M=x.color,k=x.data[0]||x.data,R=s+Math.PI*2*u.scale(k[h]),G=(s+R)/2,N=Dl(a,G,o);s=R;var ot=u.getText(k[t]),ut=N.x>a.x?"left":"right";return{x:N.x,y:N.y,color:M,name:ot,origin:k,angle:nO(r.getGeometry().coordinate,N),textAlign:ut}});this.arcPoints=c},i}(),oh=sO;function QG(i){var r=Number(i.endsWith("%")?i.slice(0,-1):i);return r/100}var lO=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.adjustOption=function(t){i.prototype.adjustOption.call(this,t),t.offset>0&&(t.offset=0)},r.prototype.adjustItem=function(t){t.textAlign="middle"},r.prototype.drawLines=function(){},r.prototype.layout=function(t,e){var n=this;t.forEach(function(a,o){o>0&&(0,f.each)(t.slice(0,o),function(s){n.resolveCollision(a,s,e[o])})})},r.prototype.getDefaultOptions=function(){var t=this.plot.theme,e=t.label.style;return{offsetX:0,offsetY:0,offset:"-30%",style:(0,V.__assign)((0,V.__assign)({},e),{textAlign:"center",textBaseline:"middle"})}},r.prototype.resolveCollision=function(t,e,n){var a=this.getCoordinate().center,o=n.angle,s=t.getBBox(),l=e.getBBox(),u={x:(s.minX+s.maxX)/2,y:(s.minY+s.maxY)/2},h=(0,f.clone)(u),c=(0,f.clone)(u);if(e.get("id")!==t.get("id")){var v=eO(s,l),x=v.xOverlap,M=v.yOverlap;if(x&&(h.x=u.x+x,h.y=u.y+Math.tan(o)*x),M){var k=M;u.y<a.y?k=k<0?k:l.minY-s.maxY:k=k>0?k:l.maxY-s.minY,c.y=u.y+k,c.x=u.x+k/Math.tan(o)}var R=ld(u,h),G=ld(u,c),N=R<G?h:c;t.attr("x",N.x),t.attr("y",N.y)}},r}(oh),uO=lO,JG=16,fO=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.adjustOption=function(t){i.prototype.adjustOption.call(this,t),t.offset<0&&(t.offset=0)},r.prototype.getDefaultOptions=function(){var t=this.plot.theme,e=t.label.style;return{offsetX:0,offsetY:0,offset:12,style:(0,V.__assign)((0,V.__assign)({},e),{textBaseline:"middle"})}},r.prototype.layout=function(t,e,n){var a=this,o=this.getCoordinate().center,s=(0,f.filter)(t,function(u){return u.attr("x")<=o.x}),l=(0,f.filter)(t,function(u){return u.attr("x")>o.x});[l,s].forEach(function(u,h){a._antiCollision(u,!h,n)})},r.prototype._antiCollision=function(t,e,n){var a=this,o=this.getLabelHeight(t),s=this.getCoordinate(),l=s.center,u=s.radius,h=this.options.offset,c=u+h,v=Math.min(n.height,Math.max(c*2+o*2,t.length*o)),x=Math.floor(v/o);this.options.allowOverlap||t.slice(x).forEach(function(Ut){Ut.get("parent").set("visible",!1)}),t.splice(x,t.length-x),t.sort(function(Ut,le){return Ut.getBBox().y-le.getBBox().y});for(var M=!0,k,R=l.y+v/2,G=l.y-v/2,N=t.map(function(Ut){var le=Ut.getBBox();return le.maxY>R&&(R=Math.min(n.maxY,le.maxY)),le.minY<G&&(G=Math.max(n.minY,le.minY)),{text:Ut.attr("text"),size:o,pos:le.y,targets:[]}}),ot=0;ot<N.length;)ot===N.length-1?N[ot].targets[0]=R:N[ot].targets[0]=N[ot+1].pos-N[ot+1].size/2,ot++;for(;M;)for(N.forEach(function(Ut){var le=(0,f.last)(Ut.targets);Ut.pos=Math.max(G,Math.min(Ut.pos,le-Ut.size))}),M=!1,k=N.length;k--;)if(k>0){var ut=N[k-1],Mt=N[k];if(ut.pos+ut.size>Mt.pos){ut.size+=Mt.size,ut.targets=ut.targets.concat(Mt.targets);var zt=(0,f.last)(ut.targets);ut.pos+ut.size>zt&&(ut.pos=zt-ut.size),N.splice(k,1),M=!0}else ut.targets.splice(-1,1,Mt.pos)}k=0,N.forEach(function(Ut){var le=o/2;Ut.targets.forEach(function(){t[k].attr("y",Ut.pos+le),le+=o,k++})});var $t=[],ee=[];t.forEach(function(Ut,le){var xe=a.arcPoints[le];xe.angle>=0&&xe.angle<=Math.PI?ee.push(Ut):$t.push(Ut)}),[$t,ee].forEach(function(Ut,le){if(!!Ut.length){var xe=le?(0,f.last)(Ut).getBBox().maxY-l.y:l.y-(0,f.head)(Ut).getBBox().minY;xe=Math.max(c,xe);var ye=h>4?4:0,Oe=Math.max.apply(0,(0,f.map)(t,function(tr){return tr.getBBox().width}))+h+ye,Ge=Math.max(c,Math.min((xe+c)/2,l.x-(n.minX+Oe))),Ne=Ge*Ge,qe=xe*xe;Ut.forEach(function(tr,rr){var $e=a.arcPoints[rr],Qe=tr.getBBox(),br={x:Qe.minX+Qe.width/2,y:Qe.minY+Qe.height/2},yr=Math.pow(br.y-l.y,2),_r=Dl(l,$e.angle,u),ir=(e?1:-1)*ye*2;if(yr>qe)console.warn("\u5F02\u5E38(\u4E00\u822C\u4E0D\u4F1A\u51FA\u73B0)",tr.attr("text")),tr.attr("x",_r.x+ir);else{var wr=l.x+(e?1:-1)*Math.sqrt((1-yr/qe)*Ne);(l.x===_r.x&&br.y===_r.y||l.y===_r.y&&wr===_r.x)&&(wr=_r.x),tr.attr("x",wr+ir)}})}})},r.prototype.getLabelHeight=function(t){return this.options.labelHeight?this.options.labelHeight:(0,f.head)(t)?(0,f.head)(t).getBBox().height:14},r}(oh),hO=fO,qG=16,cO=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.adjustOption=function(t){i.prototype.adjustOption.call(this,t),t.offset<0&&(t.offset=0)},r.prototype.getDefaultOptions=function(){var t=this.plot.theme,e=t.label.style;return{offsetX:0,offsetY:0,offset:12,style:(0,V.__assign)((0,V.__assign)({},e),{textBaseline:"middle"})}},r.prototype.adjustItem=function(t){var e=this.options.offset;t.textAlign==="left"?t.x+=e>4?4:e/2:t.textAlign==="right"&&(t.x-=e>4?4:e/2)},r.prototype.layout=function(t,e,n){},r}(oh),vO=cO,Og={inner:uO,outer:hO,"outer-center":vO};function dO(i){if(!Og[i]){console.warn("this label "+i+" is not registered");return}return Og[i]}var pO=0,sh=15,gO="#CCC",yO=2,mO=-2,Ig=15;function kg(i,r,t){return{x:i.x+t*Math.cos(r),y:i.y+t*Math.sin(r)}}var xO=function(){function i(r){this.destroyed=!1,this.view=r.view,this.options=(0,f.deepMix)({},this.getDefaultOptions(),r),this._adjustOptions(this.options),this.init()}return i.prototype.init=function(){var r=this;this.container=this.view.geometries[0].labelsContainer,this.view.on("beforerender",function(){r.clear()})},i.prototype.render=function(){var r=this;if(!(!this.view||this.view.destroyed)){var t=(0,f.clone)(this.view.getData());this.halves=[[],[]];var e=[],n=this.view.geometries[0].elements;(0,f.each)(n,function(Mt){e.push(Mt.shape)}),this.coord=this.view.geometries[0].coordinate;var a=this.options,o=a.allZero,s=a.angleField,l=this.options.fields[0],u=this.view.getScalesByDim("y")[l],h=this.coord.getCenter(),c=this.coord.startAngle,v=this.coord.polarRadius,x=this.view.coordinateBBox,M=x.width,k=x.height;this.width=M,this.height=k;for(var R=c,G=function(Mt){var zt=t[Mt],$t=u.scale(zt[l]),ee=R+Math.PI*2*$t,Ut=R+(ee-R)/2;R=ee;var le=kg(h,Ut,v+pO),xe=kg(h,Ut,v+sh),ye=gO;if(N.options.fields.length===2){var Oe=N.options.fields[1],Ge=N.view.geometries[0].scales[Oe],Ne=Ge.scale(zt[Oe]);if(Ne){var qe=Math.floor(Ne*(e.length-1));ye=e[qe].attr("fill")}}var tr={_anchor:le,_inflection:xe,_data:zt,x:xe.x,y:xe.y,r:v+sh,fill:ye,textGroup:null,_side:null},rr=[];if((0,f.each)(N.options.fields,function(Dr){o&&Dr===Fl?rr.push(zt[s]):rr.push(zt[Dr])}),N.options.formatter){var $e=N.options.formatter(zt[s],{_origin:zt,color:ye},Mt);(0,f.isString)($e)&&($e=[$e]),rr=$e}var Qe=N.container.addGroup({capture:!1,visible:!1}),br={x:0,y:0,fontSize:N.options.text.fontSize,lineHeight:N.options.text.fontSize,fontWeight:N.options.text.fontWeight,fill:N.options.text.fill},yr=zt[s];N.options.formatter&&(yr=rr[0]);var _r=(0,f.clone)(br);rr.length===2&&(_r.fontWeight=700);var ir=Qe.addShape("text",{attrs:(0,f.mix)({textBaseline:rr.length===2?"top":"middle",text:yr},_r),data:zt,offsetY:rr.length===2?yO:0,name:"label"});if(ir.name="label",rr.length===2){var wr=Qe.addShape("text",{attrs:(0,f.mix)({textBaseline:"bottom",text:rr[1]},br),data:zt,offsetY:mO,name:"label"});wr.name="label"}tr.textGroup=Qe,le.x<h.x?(tr._side="left",N.halves[0].push(tr)):(tr._side="right",N.halves[1].push(tr))},N=this,ot=0;ot<t.length;ot++)G(ot);var ut=Math.floor(k/this.options.lineHeight);(0,f.each)(this.halves,function(Mt){Mt.length>ut&&Mt.splice(ut,Mt.length-ut),Mt.sort(function(zt,$t){return zt.y-$t.y}),r._antiCollision(Mt)}),this.view.canvas.draw()}},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.hide=function(){this.container.set("visible",!1),this.view.canvas.draw()},i.prototype.show=function(){this.container.set("visible",!0),this.view.canvas.draw()},i.prototype.destroy=function(){this.container&&this.container.remove(),this.destroyed=!0},i.prototype.getDefaultOptions=function(){return{text:{fill:"rgba(0, 0, 0, 0.65)",fontSize:12},line:{lineWidth:.5,stroke:"rgba(0, 0, 0, 0.45)"},lineHeight:32,sidePadding:20}},i.prototype._antiCollision=function(r){var t=this,e=this.coord,n=e.getHeight(),a=e.center,o=e.getRadius(),s=a.y-o-sh-this.options.lineHeight,l=!0,u=n,h,c=0,v=Number.MIN_VALUE,x=0,M=r.map(function(ot){var ut=ot.y;ut>c&&(c=ut),ut<v&&(v=ut);var Mt=ot.textGroup,zt=Mt.getBBox().width;return zt>=x&&(x=zt),{size:t.options.lineHeight,targets:[ut-s]}});c-s>u&&(u=c-s);for(var k=function(ot){ot.forEach(function(ut){var Mt=(Math.min.apply(v,ut.targets)+Math.max.apply(v,ut.targets))/2;ut.pos=Math.min(Math.max(v,Mt-ut.size/2),u-ut.size)})};l;)for(k(M),l=!1,h=M.length;h--;)if(h>0){var R=M[h-1],G=M[h];R.pos+R.size>G.pos&&(R.size+=G.size,R.targets=R.targets.concat(G.targets),R.pos+R.size>u&&(R.pos=u-R.size),M.splice(h,1),l=!0)}h=0,M.forEach(function(ot){var ut=s;ot.targets.forEach(function(){r[h].y=ot.pos+ut+t.options.lineHeight/2,ut+=t.options.lineHeight,h++})});var N=[];r.forEach(function(ot){var ut=t._drawLabel(ot);t._drawLabelLine(ot,x,ut),N.push(ut)})},i.prototype._drawLabel=function(r){var t=this.coord,e=t.getCenter(),n=t.getRadius(),a=r.y,o=r.textGroup,s=o.get("children"),l=r._side==="left"?1:-1,u=(0,V.__assign)({textAlign:r._side==="left"?"right":"left",x:r._side==="left"?e.x-n-this.options.sidePadding:e.x+n+this.options.sidePadding},this.options.style);return this.options.offsetX&&(u.x+=this.options.offsetX*l),s.forEach(function(h){var c=h.get("offsetY"),v=a+c;h.attr(u),h.attr("y",v)}),o.show(),o},i.prototype._drawLabelLine=function(r,t,e){var n=[r._anchor.x,r._anchor.y],a=[r._inflection.x,r._inflection.y],o=r.y,s=r.textGroup;if(!!s){var l=[r._side==="left"?s.getBBox().maxX+4:s.getBBox().minX-4,o],u=[n,a,l];if(a[1]!==o)if(a[1]<this.height/2&&a[1]<o||a[1]>=this.height/2&&a[1]>o){var h=a,c=l[0]+Ig,v=l[0]-Ig,x=[r._side==="left"?c:v,a[1]];u=[n,h,x,l],(r._side==="right"&&x[0]<h[0]||r._side==="left"&&x[0]>h[0])&&(u=[n,h,l])}else u=[n,[a[0],o],l];for(var M=[],k=0;k<u.length;k++){var R=u[k],G="L";k===0&&(G="M"),M.push([G,R[0],R[1]])}e.addShape("path",{attrs:{path:M,lineWidth:this.options.line.lineWidth,stroke:this.options.line.stroke}})}},i.prototype._adjustOptions=function(r){r.text.fontSize&&(r.lineHeight=r.text.fontSize*3)},i}(),bO=xO,wO=function(i){var r=i.opacity||1;return{fillOpacity:r*.8}},SO=function(i){var r=i.opacity||1;return{fillOpacity:r*.5}};ia("pie",{columnStyle:{normal:{},active:wO,disable:SO,selected:{lineWidth:1,stroke:"black"}}});var Fl="$$percentage$$",CO={pie:"interval"},MO={pie:"column"},Bg=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="pie",t}return r.getDefaultOptions=function(){return(0,f.deepMix)({},i.getDefaultOptions.call(this),{width:400,height:400,title:{visible:!1},description:{visible:!1},forceFit:!0,padding:"auto",radius:.8,label:{visible:!0,type:"inner",autoRotate:!1,adjustPosition:!0,allowOverlap:!1,line:{visible:!0,smooth:!0}},legend:{visible:!0,position:"right-center"},tooltip:{visible:!0,shared:!1,showCrosshairs:!1,showMarkers:!1},pieStyle:{stroke:"white",lineWidth:1}})},r.prototype.afterInit=function(){i.prototype.afterInit.call(this);var t=this.options,e=t.angleField,n=t.colorField,a=t.data,o=(0,f.every)(a,function(l){return l[e]===0});if(o){var s=this.view.geometries[0];s.tooltip(n+"*"+e)}},r.prototype.afterRender=function(){i.prototype.afterRender.call(this);var t=this.options;if(t.label&&t.label.visible){this.labelComponent&&this.labelComponent.clear();var e=t.label;if(e.type==="spider"){var n=t.data,a=t.colorField,o=t.angleField,s=(0,f.every)(n,function(h){return h[o]===0}),l=s?Fl:o;this.labelComponent=new bO((0,V.__assign)({view:this.view,fields:a?[l,a]:[l],angleField:o,allZero:s},this.options.label)),this.labelComponent.render()}else{var u=dO(e.type);this.labelComponent=new u(this,t.label),this.labelComponent.render()}}},r.prototype.getAngleScale=function(){var t=this.options.angleField;if(t)return this.view.getScaleByField(t)},r.prototype.geometryParser=function(t,e){return t==="g2"?CO[e]:MO[e]},r.prototype.scale=function(){var t=this.options;i.prototype.scale.call(this);var e={};e[t.angleField]={},e[t.colorField]={type:"cat"},e=(0,f.deepMix)({},this.config.scales,e),this.setConfig("scales",e)},r.prototype.processData=function(t){var e=this.options.angleField,n=(0,f.every)(t,function(a){return a[e]===0});return n?t.map(function(a){var o;return(0,V.__assign)((0,V.__assign)({},a),(o={},o[e]=typeof a[e]=="string"?Number.parseFloat(a[e]):a[e],o[Fl]=1/t.length,o))}):t.map(function(a){var o,s=a[e];return(0,V.__assign)((0,V.__assign)({},a),(o={},o[e]=s&&!isNaN(s)?+s:s,o))})},r.prototype.axis=function(){},r.prototype.coord=function(){var t=this.options,e={type:"theta",cfg:{radius:t.radius,innerRadius:t.innerRadius||0}};this.setConfig("coordinate",e)},r.prototype.addGeometry=function(){var t=this.options,e=t.data,n=t.angleField,a,o=(0,f.every)(e,function(s){return s[n]===0});o?a=ri("interval","main",{plot:this,positionFields:[1,Fl]}):a=ri("interval","main",{plot:this,positionFields:[1,t.angleField]}),a.adjust=[{type:"stack"}],this.pie=a,t.label&&this.label(),t.tooltip&&(t.tooltip.fields||t.tooltip.formatter)&&this.geometryTooltip(),this.setConfig("geometry",a)},r.prototype.geometryTooltip=function(){this.pie.tooltip={};var t=this.options.tooltip;t.fields?this.pie.tooltip.fields=t.fields:this.pie.tooltip.fields=[this.options.angleField,this.options.colorField],t.formatter&&(this.pie.tooltip.callback=t.formatter,t.fields||(this.pie.tooltip.fields=[this.options.angleField,this.options.colorField]))},r.prototype.animation=function(){i.prototype.animation.call(this);var t=this.options;t.animation===!1&&(this.pie.animate=!1)},r.prototype.annotation=function(){},r.prototype.parseEvents=function(t){t?i.prototype.parseEvents.call(this,t):i.prototype.parseEvents.call(this,d)},r.prototype.label=function(){this.pie.label=!1},r}(Un),Dg=Bg;ln("pie",Bg);var EO=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="pie",i.prototype.createLayers.call(this,e)},r.prototype.getAngleScale=function(){var t=this.layers[0];return t.getAngleScale()},r.getDefaultOptions=Dg.getDefaultOptions,r}(Kr),Fg=EO,_O=.3989422804014327,AO=1/255/16,_s="_origin",TO=function(i){(0,V.__extends)(r,i);function r(t){var e=i.call(this,t)||this;return e.type="heatmap",e.paletteCache={},e.intensity=t.intensity,e.radius=t.radius,e}return r.prototype.createElements=function(t){var e=this.prepareRange(t);return this.prepareSize(),this.prepareBlur(),this.prepareGreyScaleBlurredCircle(this.radius),this.drawWithRange(t,e),null},r.prototype.clear=function(){this.clearShadowCanvasCtx(),i.prototype.clear.call(this)},r.prototype.prepareRange=function(t){var e=this.getAttribute("color"),n=e.getFields()[0],a=Infinity,o=-Infinity;return t.forEach(function(s){var l=s[_s][n];l>o&&(o=l),l<a&&(a=l)}),a===o&&(a=o-1),[a,o]},r.prototype.prepareSize=function(){var t=this.radius;this.radius||(t=this.getDefaultValue("size"),(0,f.isNumber)(t)||(t=this.getDefaultSize()),this.radius=t)},r.prototype.prepareBlur=function(){var t=(0,f.get)(this.styleOption,["style","shadowBlur"]);(0,f.isNumber)(t)||(t=this.radius/2),this.blur=t},r.prototype.getDefaultSize=function(){var t=this.getAttribute("position"),e=this.coordinate,n=Math.min(e.getWidth()/(t.scales[0].ticks.length*4),e.getHeight()/(t.scales[1].ticks.length*4));return n},r.prototype.colorize=function(t){for(var e=this.getAttribute("color"),n=t.data,a=this.paletteCache,o=3;o<n.length;o+=4){var s=n[o];if(s){var l=void 0;a[s]?l=a[s]:(l=to(e.gradient(s/256)),a[s]=l),n[o-3]=l[0],n[o-2]=l[1],n[o-1]=l[2],n[o]=s}}},r.prototype.prepareGreyScaleBlurredCircle=function(t){var e=this.grayScaleCanvas;e||(e=document.createElement("canvas"),this.grayScaleCanvas=e);var n=this.intensity?this.intensity:2,a=Math.sqrt(-2*Math.log(AO/t/n/_O))/3*t,o=a-t,s=a+o,l=e.getContext("2d");e.width=e.height=s*2,l.clearRect(0,0,e.width,e.height),l.shadowOffsetX=l.shadowOffsetY=s*2,l.shadowBlur=o,l.shadowColor="black",l.beginPath(),l.arc(-s,-s,t,0,Math.PI*2,!0),l.closePath(),l.fill()},r.prototype.drawGrayScaleBlurredCircle=function(t,e,n,a,o){var s=this.grayScaleCanvas;o.globalAlpha=a,o.drawImage(s,t-n,e-n)},r.prototype.getShadowCanvasCtx=function(){var t=this.shadowCanvas;t||(t=document.createElement("canvas"),this.shadowCanvas=t),t.width=this.coordinate.getWidth(),t.height=this.coordinate.getHeight();var e=t.getContext("2d");return e.globalCompositeOperation="lighter",e},r.prototype.clearShadowCanvasCtx=function(){var t=this.getShadowCanvasCtx();t.clearRect(0,0,t.canvas.width,t.canvas.height)},r.prototype.getImageShape=function(){var t=this.imageShape;if(t)return t;var e=this.container;t=e.addShape({type:"image",attrs:{}}),this.imageShape=t},r.prototype.drawWithRange=function(t,e){var n=this.coordinate,a=n.start,o=n.end,s=this.coordinate.getWidth(),l=this.coordinate.getHeight(),u=this.getAttribute("color"),h=u.getFields()[0];this.clearShadowCanvasCtx();var c=this.getShadowCanvasCtx();e&&(t=t.filter(function(ot){return ot[_s][h]<=e[1]&&ot[_s][h]>=e[0]}));for(var v=this.scales[h],x=0;x<t.length;x++){var M=t[x],k=this.getDrawCfg(M),R=v.scale(M[_s][h]);this.drawGrayScaleBlurredCircle(k.x-a.x,k.y-o.y,this.radius+this.blur,R,c)}var G=c.getImageData(0,0,s,l);this.clearShadowCanvasCtx(),this.colorize(G),c.putImageData(G,0,0);var N=new Image;N.src=c.canvas.toDataURL("image/png"),this.getImageShape(),this.imageShape.attr("x",a.x),this.imageShape.attr("y",o.y),this.imageShape.attr("width",s),this.imageShape.attr("height",l),this.imageShape.attr("img",c.canvas),this.imageShape.set("origin",this.getShapeInfo(t))},r.prototype.getShapeInfo=function(t){var e=this.getDrawCfg(t[0]);return(0,V.__assign)((0,V.__assign)({},e),{mappingData:t,data:this.getData(t)})},r.prototype.getData=function(t){return t.map(function(e){return e[_s]})},r}(Ka);Aa("linearHeatmap",TO);var PO=function(i){(0,V.__extends)(r,i);function r(t){var e=i.call(this)||this;return e.options=t,e.view=e.options.view,e.init(),e}return r.prototype.init=function(){var t=this.getCoordinate();this.width=t.getWidth(),this.height=t.getHeight(),this.x=t.start.x,this.y=t.end.y,this.container=this.view.backgroundGroup.addGroup({})},r.prototype.render=function(){if(this.options.type==="color")this.renderColorBackground();else if(this.options.type==="image")this.renderImageBackground();else if(this.options.callback){var t={x:this.x,y:this.y,width:this.width,height:this.height,container:this.container};this.options.callback(t)}},r.prototype.renderColorBackground=function(){this.container.addShape("rect",{attrs:{x:this.x,y:this.y,width:this.width,height:this.height,fill:this.options.value},name:"heatmap-background"})},r.prototype.renderImageBackground=function(){this.container.addShape("image",{attrs:{x:this.x,y:this.y,width:this.width,height:this.height,img:this.options.src},name:"heatmap-background"})},r.prototype.clear=function(){this.container&&(this.container.clear(),this.emit("background:clear"))},r.prototype.destroy=function(){this.container&&(this.container.remove(),this.emit("background:destroy"))},r.prototype.getCoordinate=function(){var t;return(0,f.each)(this.view.geometries,function(e){e.type==="heatmap"&&(t=e.coordinate)}),t},r}(te.default),LO=PO,Rl=4,Rg=1,OO=.1,IO=function(){function i(r){this.destroyed=!1,this.dataSlides={};var t=this.getDefaultOptions();r.plot.options.theme&&r.plot.options.theme==="dark"&&(t=this.getDarkOptions()),this.options=(0,f.deepMix)({},t,r),this.view=this.options.view,this.afterRender=!0,this.init()}return i.prototype.init=function(){this.layout=this.getLayout(),this.width=this.options.width?this.options.width:this.getDefaultWidth(),this.height=this.options.height?this.options.height:this.getDefaultHeight();var r=this.options.plot.container;this.container=r.addGroup()},i.prototype.render=function(){var r=this.getScales(),t=this.options.plot.options.colorField;this.colorScale=r[t];var e=this.colorScale,n=e.min,a=e.max,o=this.options.plot.options.color;this.layout==="horizontal"?this.renderHorizontal(n,a,o):this.renderVertical(n,a,o),this.legendLayout(),this.addInteraction(),this.options.plot.canvas.draw()},i.prototype.hide=function(){this.container.set("visible",!1),this.options.plot.canvas.draw()},i.prototype.show=function(){this.container.set("visible",!0),this.options.plot.canvas.draw()},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.destroy=function(){this.container&&this.container.remove(),this.destroyed=!0},i.prototype.getBBox=function(){var r=this.container.getBBox();return new Jr(this.x,this.y,r.width,r.height)},i.prototype.renderVertical=function(r,t,e){var n=this,a=this.width,o=this.height/e.length,s=this.container.addGroup(),l=(0,f.clone)(e).reverse(),u=(t-r)/e.length;(0,f.each)(l,function(h,c){var v=o*c,x={to:t-u*c,from:t-u*(c+1)},M=n.container.addShape("rect",{attrs:{x:0,y:v,width:a,height:o,fill:h,opacity:Rg,cursor:"pointer"},name:"legend"});M.set("info",x);var k=n.getDataSlide(x);n.dataSlides[x.from+"-"+x.to]={mode:"active",data:k},s.addShape("path",{attrs:(0,V.__assign)({path:[["M",0,v+o],["L",a,v+o]]},n.options.gridlineStyle)})}),this.container.addShape("text",{attrs:(0,V.__assign)({text:t,x:a/2,y:-Rl,textAlign:"center",textBaseline:"bottom"},this.options.text.style),name:"legend-label"}),this.container.addShape("text",{attrs:(0,V.__assign)((0,V.__assign)({text:r,x:a/2,y:this.height+Rl,textAlign:"center",textBaseline:"top"},this.options.text.style),{name:"legend-label"})}),s.addShape("path",{attrs:(0,V.__assign)({path:[["M",0,0],["L",this.width,0],["L",this.width,this.height],["L",0,this.height],["L",0,0]]},this.options.gridlineStyle)})},i.prototype.renderHorizontal=function(r,t,e){var n=this,a=this.width/e.length,o=this.height,s=this.container.addGroup(),l=(t-r)/e.length;(0,f.each)(e,function(u,h){var c=a*h,v={from:l*h,to:l*(h+1)},x=n.container.addShape("rect",{attrs:{x:c,y:0,width:a,height:o,fill:u,opacity:.8,cursor:"pointer"},name:"legend"});x.set("info",v),s.addShape("path",{attrs:(0,V.__assign)({path:[["M",c+a,0],["L",c+a,o]]},n.options.gridlineStyle)})}),this.container.addShape("text",{attrs:(0,V.__assign)((0,V.__assign)({text:r,x:-Rl,y:o/2},this.options.text.style),{textAlign:"right",textBaseline:"middle"}),name:"legend-label"}),this.container.addShape("text",{attrs:(0,V.__assign)({text:t,x:this.width+Rl,y:o/2,textAlign:"left",textBaseline:"middle"},this.options.text.style),name:"legend-label"}),s.addShape("path",{attrs:(0,V.__assign)({path:[["M",0,0],["L",this.width,0],["L",this.width,this.height],["L",0,this.height],["L",0,0]]},this.options.gridlineStyle)})},i.prototype.getLayout=function(){var r=this.options.position.split("-");return this.position=r[0],r[0]==="left"||r[0]==="right"?"vertical":"horizontal"},i.prototype.getDefaultWidth=function(){if(this.layout==="horizontal"){var r=this.options.plot.options.width;return r*.5}return 10},i.prototype.getDefaultHeight=function(){if(this.layout==="vertical"){var r=this.options.plot.options.height;return r*.5}return 10},i.prototype.legendLayout=function(){var r=this,t=this.options.plot.getPlotTheme().bleeding;(0,f.isArray)(t)&&(0,f.each)(t,function(u,h){typeof t[h]=="function"&&(t[h]=t[h](r.options.plot.options))});var e=this.container.getBBox(),n=0,a=0,o=this.options.position.split("-"),s=this.options.plot.width,l=this.options.plot.height;o[0]==="left"?n=t[3]:o[0]==="right"?n=s-t[1]-e.width:o[1]==="center"?n=(s-e.width)/2:o[1]==="left"?n=t[3]:o[1]==="right"&&(n=this.options.plot.width-t[1]-e.width),o[0]==="bottom"?a=l-t[2]-e.height:o[0]==="top"?a=this.getTopPosition(t):o[1]==="center"?a=(l-e.height)/2:o[1]==="top"?a=t[0]:o[1]==="bottom"&&(a=l-t[2]-e.height),this.x=n,this.y=a,this.container.translate(n,a)},i.prototype.getDefaultOptions=function(){return{text:{style:{fontSize:12,fill:"rgba(0, 0, 0, 0.45)"}},gridlineStyle:{lineWidth:1,stroke:"rgba(0, 0, 0, 0.45)"}}},i.prototype.getDarkOptions=function(){return{text:{style:{fontSize:12,fill:"rgba(255, 255, 255, 0.45)"}},gridlineStyle:{lineWidth:1,stroke:"rgba(255, 255, 255, 0.25)"}}},i.prototype.addInteraction=function(){var r=this,t=this.options.plot.options.colorField;this.container.on("click",function(e){var n=e.target;if(n.get("name")==="legend"){var a=n.get("info"),o=a.from+"-"+a.to,s=r.dataSlides[o];s.mode==="active"?(s.mode="deactive",n.stopAnimate(),n.animate({opacity:OO},200)):(s.mode="active",n.stopAnimate(),n.animate({opacity:Rg},200));var l=r.getFilteredData();l.length>0&&(r.view.changeData(l),r.view.scale(t,{min:r.colorScale.min,max:r.colorScale.max,nice:r.colorScale.nice}),r.view.render())}})},i.prototype.getFilteredData=function(){var r=[];return(0,f.each)(this.dataSlides,function(t){t.mode=="active"&&r.push.apply(r,t.data)}),r},i.prototype.getDataSlide=function(r){var t=[],e=this.options.plot.options,n=e.colorField,a=e.data;return(0,f.each)(a,function(o){var s=o[n];s>=r.from&&s<r.to&&t.push(o)}),t},i.prototype.getTopPosition=function(r){if(this.options.plot.description){var t=this.options.plot.description.getBBox();return t.maxY+10}else if(this.options.plot.title){var t=this.options.plot.title.getBBox();return t.maxY+10}return r[0]},i.prototype.getScales=function(){var r;return(0,f.each)(this.view.geometries,function(t){t.type==="heatmap"&&(r=t.scales)}),r},i}(),kO=IO,BO={background:{Ctr:LO},legend:{Ctr:kO,padding:"outer"}};function DO(i,r,t){if(i.options[r]&&i.options[r].visible){var e=BO[r],n=new e.Ctr(t);return e.padding&&i.paddingController.registerPadding(n,e.padding),n}}var FO={heatmap:"heatmap",legendLabel:"legend-label",heatmapBackground:"heatmap-background"},RO=Ai(FO);(0,f.assign)(dn,RO);var Ng=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="densityHeatmap",t.plotComponents=[],t}return r.getDefaultOptions=function(){return(0,f.deepMix)({},i.getDefaultOptions.call(this),{xAxis:{visible:!0,autoRotateTitle:!1,grid:{visible:!1},line:{visible:!0},tickLine:{visible:!0},label:{visible:!0,autoHide:!0,autoRotate:!0},title:{visible:!1,spacing:12}},yAxis:{visible:!0,autoRotateTitle:!0,grid:{visible:!1},line:{visible:!0},tickLine:{visible:!0},label:{visible:!0,autoHide:!0,autoRotate:!1},title:{visible:!1,spacing:12}},tooltip:{visible:!0,showCrosshairs:!0,crosshairs:{type:"xy",line:{style:{stroke:"#000000",lineWidth:1,opacity:.5}}},showMarkers:!1},legend:{visible:!0,position:"bottom-center"},color:["rgba(33,102,172,0)","rgb(103,169,207)","rgb(209,229,240)","rgb(253,219,199)","rgb(239,138,98)","rgb(178,24,43)"],interactions:[{type:"tooltip"}]})},r.prototype.afterRender=function(){this.renderPlotComponents(),i.prototype.afterRender.call(this)},r.prototype.destroy=function(){(0,f.each)(this.plotComponents,function(t){t.destroy()}),i.prototype.destroy.call(this)},r.prototype.scale=function(){var t=this.options,e={};e[t.xField]={},(0,f.has)(t,"xAxis")&&bi(e[t.xField],t.xAxis),e[t.yField]={},(0,f.has)(t,"yAxis")&&bi(e[t.yField],t.yAxis),this.setConfig("scales",e),i.prototype.scale.call(this)},r.prototype.coord=function(){},r.prototype.geometryParser=function(){return"heatmap"},r.prototype.addGeometry=function(){if(this.options.data.length>1){var t={type:"linearheatmap",position:{fields:[this.options.xField,this.options.yField]},color:{fields:[this.options.colorField],values:this.options.color},cfg:{intensity:this.options.intensity,radius:this.options.radius}};this.options.radius&&(t.radius=this.options.radius),this.options.intensity&&(t.intensity=this.options.intensity),this.options.tooltip&&(this.options.tooltip.fields||this.options.tooltip.formatter)&&this.geometryTooltip(t),this.setConfig("geometry",t),this.addPoint()}},r.prototype.addPoint=function(){var t=this.options,e={visible:!1,size:0};t.point&&t.point.visible?t.point=(0,f.deepMix)(e,t.point):t.point=e;var n=ri("point","guide",{plot:this});n.active=!1,this.setConfig("geometry",n)},r.prototype.extractLabel=function(){var t=this.options,e=t.label;if(e&&e.visible===!1)return!1;var n=Ni("label",(0,V.__assign)({plot:this,labelType:"scatterLabel",fields:[t.xField,t.yField],position:"middle",offset:0},e));return n},r.prototype.legend=function(){this.setConfig("legends",!1)},r.prototype.geometryTooltip=function(t){t.tooltip={};var e=this.options.tooltip;e.fields&&(t.tooltip.fields=e.fields),e.formatter&&(t.tooltip.callback=e.formatter,e.fields||(t.tooltip.fields=[this.options.xField,this.options.yField],this.options.colorField&&t.tooltip.fields.push(this.options.colorField)))},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,y)},r.prototype.renderPlotComponents=function(){var t=this;(0,f.each)(this.plotComponents,function(n){n.destroy()});var e=["legend","background"];(0,f.each)(e,function(n){var a=(0,V.__assign)({view:t.view,plot:t},t.options[n]),o=DO(t,n,a);o&&(o.render(),t.plotComponents.push(o))})},r}(Un),NO=Ng;ln("densityHeatmap",Ng);var GO=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="densityHeatmap",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=NO.getDefaultOptions,r}(Kr),Gg=GO;function Nl(i,r,t,e,n){var a=t*n,o=e*n,s=[["M",i-a/2,r+o/2],["Q",i-a/2,r,i-a/2,r-o/2],["Q",i,r-o/2,i+a/2,r-o/2],["Q",i+a/2,r,i+a/2,r+o/2],["Q",i,r+o/2,i-a/2,r+o/2],["Z"]];return s}function Gl(i,r,t){var e=[["M",i,r],["l",-t,0],["a",t,t,0,1,0,t*2,0],["a",t,t,0,1,0,-(t*2),0],["Z"]];return e}function Yg(i,r,t){var e=[["M",i-t,r],["Q",i-t,r-t,i,r-t],["Q",i+t,r-t,i+t,r],["Q",i+t,r+t,i,r+t],["Q",i-t,r+t,i-t,r],["Z"]];return e}xn("polygon","rect",{draw:function(i,r){var t=this.parsePoints(i.points),e=t[2].x-t[0].x,n=t[0].y-t[1].y,a=t[0].x+e/2,o=t[1].y+n/2,s=Nl(a,o,e,n,i.size);return r.addShape("path",{attrs:(0,f.deepMix)({},{path:s,fill:i.color,opacity:1},i.style)})}}),xn("point","curvePoint",{draw:function(i,r){var t=Gl(i.x,i.y,i.size);return r.addShape("path",{attrs:(0,f.deepMix)({},{path:t,fill:i.color,opacity:1},i.style)})}});var YO=function(){function i(r){this.destroyed=!1,this.view=r.view,this.plot=r.plot;var t=this.getDefaultOptions();this.options=(0,f.deepMix)(t,r,{}),this.init()}return i.prototype.init=function(){var r=this;this.container=this.view.geometries[0].labelsContainer,this.view.on("beforerender",function(){r.clear(),r.plot.canvas.draw()})},i.prototype.render=function(){var r=this,t=this.view.geometries[0].elements;(0,f.each)(t,function(e){var n=e.shape,a=r.options,o=a.style,s=a.offsetX,l=a.offsetY,u=r.options.formatter,h=u?u(r.getContent(n)):r.getContent(n),c=r.getPosition(n),v=r.getTextColor(n),x=r.container.addShape("text",{attrs:(0,f.deepMix)({},o,{x:c.x+s,y:c.y+l,text:h,fill:v,textAlign:"center",textBaseline:"middle"}),name:"label"});r.options.adjustPosition&&r.adjustLabel(x,n)})},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.hide=function(){this.container.set("visible",!1),this.plot.canvas.draw()},i.prototype.show=function(){this.container.set("visible",!0),this.plot.canvas.draw()},i.prototype.destroy=function(){this.container&&this.container.remove(),this.destroyed=!0},i.prototype.getBBox=function(){return this.container.getBBox()},i.prototype.getDefaultOptions=function(){var r=this.plot.theme,t=r.label.style;return{offsetX:0,offsetY:0,style:(0,f.clone)(t)}},i.prototype.getContent=function(r){var t=r.get("origin").data,e=this.plot.options.colorField;return t[e]},i.prototype.getPosition=function(r){var t=r.getBBox();return{x:t.minX+t.width/2,y:t.minY+t.height/2}},i.prototype.getTextColor=function(r){if(this.options.adjustColor){var t=r.attr("fill"),e=r.attr("opacity")?r.attr("opacity"):1,n=to(t),a=Math.round(n[0]*.299+n[1]*.587+n[2]*.114)/e,o=[{from:0,to:85,color:"white"},{from:85,to:170,color:"#F6F6F6"},{from:170,to:255,color:"black"}],s=Il(o,a);return s}var l=this.options.style.fill;return l},i.prototype.adjustLabel=function(r,t){var e=r.getBBox(),n=t.getBBox();(e.width>n.width||e.height>n.height)&&r.attr("text","")},i}(),zO=YO,zg=4,XO=function(){function i(r){this.destroyed=!1,this.dataSlides={},this.interactiveEvents={};var t=this.getDefaultOptions();this.options=(0,f.deepMix)({},t,r),this.view=this.options.view,this.afterRender=!0,this.init()}return i.prototype.init=function(){var r=this;this.layout=this.getLayout(),this.width=this.options.width?this.options.width:this.getDefaultWidth(),this.height=this.options.height?this.options.height:this.getDefaultHeight();var t=this.options.plot.container;this.container&&this.container.remove(),this.container=t.addGroup(),this.view.on("beforerender",function(){r.clear(),r.options.plot.canvas.draw()})},i.prototype.render=function(){var r=this.view.geometries[0].scales,t=this.options.plot.options.colorField;this.colorScale=r[t];var e=this.colorScale,n=e.min,a=e.max,o=this.options.plot.options.color;this.layout==="horizontal"?this.renderHorizontal(n,a,o):this.renderVertical(n,a,o),this.legendLayout(),this.addInteraction()},i.prototype.hide=function(){this.container.set("visible",!1),this.options.plot.canvas.draw()},i.prototype.show=function(){this.container.set("visible",!0),this.options.plot.canvas.draw()},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.destroy=function(){this.container&&this.container.remove(),this.offEvent(),this.destroyed=!0},i.prototype.getBBox=function(){var r=this.container.getBBox();return new Jr(this.x,this.y,r.width,r.height)},i.prototype.renderVertical=function(r,t,e){var n=this,a=(t-r)/(e.length-1),o=1/(e.length-1),s=this.height/(e.length-1),l="l(90)";(0,f.each)(e,function(v,x){var M=o*x;l+=M+":"+v+" "}),this.container.addShape("rect",{attrs:{x:0,y:0,width:this.width,height:this.height,fill:l},name:"legend"}),(0,f.each)(e,function(v,x){var M=s*x;n.container.addShape("path",{attrs:(0,V.__assign)({path:[["M",0,M],["L",n.width,M]]},n.options.ticklineStyle)});var k=Math.round(a*x);n.container.addShape("text",{attrs:(0,V.__assign)({text:k,textAlign:"left",textBaseline:"middle",x:n.width+zg,y:M},n.options.text.style),name:"legend-label"})});var u=10,h=14,c=[["M",-u,-h/2],["L",0,0],["L",-u,h/2],["Z"]];this.anchor=this.container.addShape("path",{attrs:(0,V.__assign)({path:c},this.options.anchorStyle)}),this.anchor.set("visible",!1)},i.prototype.renderHorizontal=function(r,t,e){var n=this,a=(t-r)/(e.length-1),o=1/(e.length-1),s=this.width/(e.length-1),l="l(0)";(0,f.each)(e,function(v,x){var M=o*x;l+=M+":"+v+" "}),this.container.addShape("rect",{attrs:{x:0,y:0,width:this.width,height:this.height,fill:l},name:"legend"}),(0,f.each)(e,function(v,x){var M=s*x;n.container.addShape("path",{attrs:(0,V.__assign)({path:[["M",M,0],["L",M,n.height]]},n.options.ticklineStyle),name:"legend-label"});var k=Math.round(a*x);n.container.addShape("text",{attrs:(0,V.__assign)({text:k,textAlign:"center",textBaseline:"top",x:M,y:n.height+zg},n.options.text.style)})});var u=14,h=10,c=[["M",0,0],["L",-u/2,-h],["L",u/2,-h],["Z"]];this.anchor=this.container.addShape("path",{attrs:(0,V.__assign)({path:c},this.options.anchorStyle)}),this.anchor.set("visible",!1)},i.prototype.getLayout=function(){var r=this.options.position.split("-");return this.position=r[0],r[0]==="left"||r[0]==="right"?"vertical":"horizontal"},i.prototype.getDefaultWidth=function(){if(this.layout==="horizontal"){var r=this.view.coordinateBBox.width;return r}return 10},i.prototype.getDefaultHeight=function(){if(this.layout==="vertical"){var r=this.view.coordinateBBox.height;return r}return 10},i.prototype.legendLayout=function(){var r=this,t=this.view.coordinateBBox,e=this.options.plot.getPlotTheme().bleeding;(0,f.isArray)(e)&&(0,f.each)(e,function(h,c){typeof e[c]=="function"&&(e[c]=e[c](r.options.plot.options))});var n=this.container.getBBox(),a=0,o=0,s=this.options.position.split("-"),l=this.options.plot.width,u=this.options.plot.height;s[0]==="left"?a=e[3]:s[0]==="right"?a=l-e[1]-n.width:s[1]==="center"?this.width===t.width?a=t.x:a=(l-n.width)/2:s[1]==="left"?a=e[3]:s[1]==="right"&&(a=this.options.plot.width-e[1]-n.width),s[0]==="bottom"?o=u-e[2]-n.height:s[0]==="top"?o=this.getTopPosition(e):s[1]==="center"?this.height===t.height?o=t.y:o=(u-n.height)/2:s[1]==="top"?o=e[0]:s[1]==="bottom"&&(o=u-e[2]-n.height),this.x=a,this.y=o,this.container.translate(a,o)},i.prototype.getDefaultOptions=function(){return{text:{style:{fontSize:12,fill:"rgba(0, 0, 0, 0.45)"}},ticklineStyle:{lineWidth:1,stroke:"rgba(0, 0, 0, 0.8)"},anchorStyle:{fill:"rgba(0,0,0,0.5)"},triggerOn:"mousemove"}},i.prototype.addInteraction=function(){var r=this,t;this.options.plot.options.shapeType==="rect"?t="polygon":t="point";var e=t+":"+this.options.triggerOn,n=this.options.plot.options.colorField,a=this.colorScale,o=a.min,s=a.max,l=function(h){var c=h.data.data[n],v=(c-o)/(s-o);r.moveAnchor(v)};this.view.on(e,l),this.interactiveEvents[e]={target:this.view,handler:l};var u=function(){r.anchor.set("visible",!1)};this.options.plot.canvas.on("mouseleave",u),this.interactiveEvents.mouseleave={target:this.options.plot.canvas,handler:u}},i.prototype.moveAnchor=function(r){if(this.anchor.set("visible",!0),this.layout==="vertical"){var t=this.height*r,e=[1,0,0,0,1,0,0,0,1];e[7]=t,this.anchor.stopAnimate(),this.anchor.animate({matrix:e},400,"easeLinear")}else{var t=this.width*r,e=[1,0,0,0,1,0,0,0,1];e[6]=t,this.anchor.stopAnimate(),this.anchor.animate({matrix:e},400,"easeLinear")}},i.prototype.getTopPosition=function(r){if(this.options.plot.description){var t=this.options.plot.description.getBBox();return t.maxY+10}else if(this.options.plot.title){var t=this.options.plot.title.getBBox();return t.maxY+10}return r[0]},i.prototype.offEvent=function(){(0,f.each)(this.interactiveEvents,function(r,t){var e=r.target,n=r.handler;e.off(t,n)})},i}(),VO=XO,HO={label:{Ctr:zO},legend:{Ctr:VO,padding:"outer"}};function WO(i,r,t){if(i.options[r]&&i.options[r].visible){var e=HO[r],n=new e.Ctr(t);return e.padding&&i.paddingController.registerPadding(n,e.padding),n}}var Xg=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="heatmap",t.gridSize=[],t.plotComponents=[],t}return r.getDefaultOptions=function(){return(0,f.deepMix)({},i.getDefaultOptions.call(this),{shapeType:"rect",legend:{visible:!0,position:"right-center"},tooltip:{shared:!1,showCrosshairs:!1,showMarkers:!1},xAxis:{visible:!0,gridAlign:"center",grid:{visible:!0},tickLine:{visible:!0},line:{visible:!1},label:{visible:!0,autoHide:!0,autoRotate:!0}},yAxis:{visible:!0,gridAlign:"center",grid:{visible:!0,align:"center"},tickLine:{visible:!0},label:{autoHide:!0,autoRotate:!1}},color:["#9ae3d5","#66cdbb","#e7a744","#f1e066","#f27664","#e7c1a2"],label:{visible:!0,adjustColor:!0,adjustPosition:!0,offset:0,style:{stroke:"rgba(255,255,255,0)",lineWidth:0}},interactions:[{type:"tooltip"}]})},r.prototype.afterRender=function(){this.renderPlotComponents(),i.prototype.afterRender.call(this)},r.prototype.changeShape=function(t){if(this.options.shapeType!==t){if(this.options.shapeType=t,t==="rect"){var e=this.getShape();this.circleToRect(e)}else if(t==="circle"){var e=this.getShape();this.rectToCircle(e)}}},r.prototype.mappingSize=function(t){if(!(this.options.sizeField&&this.options.sizeField===t)){this.options.sizeField=t;var e=(0,f.valuesOfKey)(this.options.data,t),n=Math.min.apply(Math,e),a=Math.max.apply(Math,e),o=(0,Or.getScale)("linear"),s=new o({min:n,max:a}),l=this.getShape();this.options.shapeType==="rect"?this.rectSizeMapping(l,s,t):this.options.shapeType==="circle"&&this.circleSizeMapping(l,s,t)}},r.prototype.disableMappingSize=function(){var t=this.getShape();this.options.shapeType==="rect"?this.rectDisableSizeMapping(t):this.options.shapeType==="circle"&&this.circleDisableSizeMapping(t)},r.prototype.destroy=function(){(0,f.each)(this.plotComponents,function(t){t.destroy()}),i.prototype.destroy.call(this)},r.prototype.getSizeScale=function(){var t=this.options.sizeField;t&&this.view.getScaleByField(t)},r.prototype.geometryParser=function(){return""},r.prototype.coord=function(){},r.prototype.legend=function(){this.setConfig("legends",!1)},r.prototype.addGeometry=function(){this.gridSize=this.getGridSize();var t;if(this.options.shapeType==="rect")t=this.addRect();else{var e=this.addCircle();t=e}if(this.options.shapeStyle){var n={};(0,f.isFunction)(this.options.shapeStyle)?(n.fields=[this.options.colorField,this.options.xField,this.options.yField,this.options.sizeField],n.callback=this.options.shapeStyle):(0,f.isObject)(this.options.shapeStyle)&&(n.cfg=this.options.shapeStyle),t.style=n}this.options.tooltip&&(this.options.tooltip.fields||this.options.tooltip.formatter)&&this.geometryTooltip(t),this.setConfig("geometry",t)},r.prototype.addRect=function(){var t=[.3,.9];this.options.shapeSize&&(t[0]=this.options.shapeSize[0]/this.gridSize[0],t[1]=this.options.shapeSize[1]/this.gridSize[1]);var e={type:"polygon",position:{fields:[this.options.xField,this.options.yField]},color:{fields:[this.options.colorField],values:this.options.color},shape:{values:["rect"]},label:!1};return this.options.sizeField?e.size={fields:[this.options.sizeField],values:t}:e.size={values:[1]},e},r.prototype.addCircle=function(){var t=[.3,.9];this.options.shapeSize?t=this.options.shapeSize:(t[0]=this.gridSize[0]*t[0]*.5,t[1]=this.gridSize[1]*t[1]*.5);var e={type:"point",position:{fields:[this.options.xField,this.options.yField]},color:{fields:[this.options.colorField],values:this.options.color},shape:{values:["curvePoint"]},label:!1};return this.options.sizeField?e.size={fields:[this.options.sizeField],values:t}:e.size={values:[Math.min(this.gridSize[0],this.gridSize[1])*.5*.9]},e},r.prototype.geometryTooltip=function(t){t.tooltip={};var e=this.options.tooltip;e.fields&&(t.tooltip.fields=e.fields),e.formatter&&(t.tooltip.callback=e.formatter,e.fields||(t.tooltip.fields=[this.options.xField,this.options.yField],this.options.colorField&&t.tooltip.fields.push(this.options.colorField)))},r.prototype.getGridSize=function(){if(this.options.padding==="auto")return[0,0];var t=this.getViewRange(),e=this.options,n=e.padding,a=e.xField,o=e.yField,s=e.data,l=t.width-n[1]-n[3],u=t.height-n[0]-n[2],h=(0,f.valuesOfKey)(s,a).length,c=(0,f.valuesOfKey)(s,o).length;return[l/h,u/c]},r.prototype.circleToRect=function(t){var e=this,n=this.gridSize;(0,f.each)(t,function(a){var o=a.get("origin"),s=o.x,l=o.y,u=o.size,h=u*2/Math.min(n[0],n[1]);e.options.sizeField||(h=1);var c=Yg(s,l,u),v=Nl(s,l,n[0],n[1],h);a.stopAnimate(),a.attr("path",c),a.animate({path:v},500,"easeLinear")})},r.prototype.rectToCircle=function(t){var e=this;(0,f.each)(t,function(n){var a=n.get("coord"),o=n.get("origin").points,s=[];(0,f.each)(o,function(R){s.push(a.convertPoint(R))});var l=n.getBBox(),u=l.width,h=l.height,c=l.minX+u/2,v=l.minY+h/2,x=e.options.sizeField?1:.9,M=Yg(c,v,Math.min(u,h)/2*x),k=Gl(c,v,Math.min(u,h)/2*x);n.stopAnimate(),n.animate({path:M},500,"easeLinear",function(){n.attr("path",k)})})},r.prototype.rectSizeMapping=function(t,e,n){(0,f.each)(t,function(a){var o=a.get("origin").data,s=.3+e.scale(o[n])*.6;a.get("origin").size=s;var l=a.getBBox(),u=l.width,h=l.height,c=l.minX+u/2,v=l.minY+h/2,x=Nl(c,v,u,h,s);a.stopAnimate(),a.animate({path:x},500,"easeLinear")})},r.prototype.circleSizeMapping=function(t,e,n){(0,f.each)(t,function(a){var o=a.get("origin").data,s=.3+e.scale(o[n])*.6,l=a.get("origin"),u=l.x,h=l.y,c=l.size,v=Gl(u,h,c*s);a.get("origin").size=c*s,a.stopAnimate(),a.animate({path:v},500,"easeLinear")})},r.prototype.circleDisableSizeMapping=function(t){var e=this;this.options.sizeField=null,(0,f.each)(t,function(n){var a=n.get("origin"),o=a.x,s=a.y,l=Math.min(e.gridSize[0],e.gridSize[1])*.9;n.get("origin").size=l/2;var u=Gl(o,s,l/2);n.stopAnimate(),n.animate({path:u},500,"easeLinear")})},r.prototype.rectDisableSizeMapping=function(t){var e=this;this.options.sizeField=null,(0,f.each)(t,function(n){var a=n.getBBox(),o=a.width,s=a.height,l=a.minX+o/2,u=a.minY+s/2,h=Nl(l,u,e.gridSize[0],e.gridSize[1],1);n.get("origin").size=1,n.stopAnimate(),n.animate({path:h},500,"easeLinear")})},r.prototype.getShape=function(){var t=this.view.geometries[0].elements,e=[];return(0,f.each)(t,function(n){e.push(n.shape)}),e},r.prototype.renderPlotComponents=function(){var t=this;(0,f.each)(this.plotComponents,function(n){n.destroy()}),this.plotComponents=[];var e=["label","legend"];(0,f.each)(e,function(n){var a=(0,V.__assign)({view:t.view,plot:t},t.options[n]),o=WO(t,n,a);o&&(o.render(),t.plotComponents.push(o))})},r}(Un),jO=Xg;ln("heatmap",Xg);var UO=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="heatmap",i.prototype.createLayers.call(this,e)},r.prototype.changeShape=function(t){var e=this.layers[0];e.changeShape(t)},r.prototype.mappingSize=function(t){var e=this.layers[0];e.mappingSize(t)},r.prototype.disableMappingSize=function(){var t=this.layers[0];t.disableMappingSize()},r.prototype.getSizeScale=function(){var t=this.layers[0];return t.getSizeScale()},r.getDefaultOptions=jO.getDefaultOptions,r}(Kr),Vg=UO,ZO=function(i){(0,V.__extends)(r,i);function r(t){var e=this,n=(0,f.deepMix)({},t,{itemTpl:`<div data-index={index}>
        <span style="background-color:{color};" class="g2-tooltip-marker"></span>
        {name}<span class="g2-tooltip-value">{value}</span></div>`},t);return e=i.call(this,n)||this,e}return r}(UM.Z),KO=ZO;/*!
 * wordcloud2.js
 * http://timdream.org/wordcloud2.js/
 *
 * Copyright 2011 - 2013 Tim Chien
 * Released under the MIT license
 */window.setImmediate||(window.setImmediate=function(){return window.msSetImmediate||window.webkitSetImmediate||window.mozSetImmediate||window.oSetImmediate||function(){if(!window.postMessage||!window.addEventListener)return null;var t=[void 0],e="zero-timeout-message",n=function(o){var s=t.length;return t.push(o),window.postMessage(e+s.toString(36),"*"),s};return window.addEventListener("message",function(o){if(!(typeof o.data!="string"||o.data.substr(0,e.length)!==e)){o.stopImmediatePropagation();var s=parseInt(o.data.substr(e.length),36);!t[s]||(t[s](),t[s]=void 0)}},!0),window.clearImmediate=function(o){!t[o]||(t[o]=void 0)},n}()||function(t){window.setTimeout(t,0)}}()),window.clearImmediate||(window.clearImmediate=function(){return window.msClearImmediate||window.webkitClearImmediate||window.mozClearImmediate||window.oClearImmediate||function(t){window.clearTimeout(t)}}());var lh=function(){var r=document.createElement("canvas");if(!r||!r.getContext)return!1;var t=r.getContext("2d");return!(!t.getImageData||!t.fillText||!Array.prototype.some||!Array.prototype.push)}(),Jo=function(){if(!!lh){for(var r=document.createElement("canvas").getContext("2d"),t=20,e,n;t;){if(r.font=t.toString(10)+"px sans-serif",r.measureText("\uFF37").width===e&&r.measureText("m").width===n)return t+1;e=r.measureText("\uFF37").width,n=r.measureText("m").width,t--}return 0}}(),$O=function(r){for(var t,e,n=r.length;n;t=Math.floor(Math.random()*n),e=r[--n],r[n]=r[t],r[t]=e);return r},uh=function(r,t){if(!lh)return;Array.isArray(r)||(r=[r]),r.forEach(function(Lr,We){if(typeof Lr=="string"){if(r[We]=document.getElementById(Lr),!r[We])throw"The element id specified is not found."}else if(!Lr.tagName&&!Lr.appendChild)throw"You must pass valid HTML elements, or ID of the element."});var e={data:[],fontFamily:'"Trebuchet MS", "Heiti TC", "\u5FAE\u8EDF\u6B63\u9ED1\u9AD4", "Arial Unicode MS", "Droid Fallback Sans", sans-serif',fontWeight:"normal",color:"random-dark",minFontSize:Jo,maxFontSize:60,clearCanvas:!0,backgroundColor:"#fff",gridSize:8,drawOutOfBound:!1,origin:null,drawMask:!1,maskColor:"rgba(255,0,0,0.3)",maskGapWidth:.3,wait:0,abortThreshold:0,abort:function(){},minRotation:-Math.PI/2,maxRotation:Math.PI/2,rotateRatio:.5,rotationSteps:1,shuffle:!0,shape:"circle",ellipticity:1,active:!0,animatable:!0,selected:-1,shadowColor:"#333",shadowBlur:10,fontScale:1.2,classes:null,onWordCloudHover:null,onWordCloudClick:null},n=[];if(t)for(var a in t)if(a==="wordStyle")for(var o in t[a])o in e&&(e[o]=t[a][o]);else a in e&&(e[a]=t[a]);if(e.minFontSize<Jo&&(e.minFontSize=Jo),e.minFontSize>e.maxFontSize){console.error("minSize cant bigger than maxSize");return}for(var s=0,l=0;l<e.data.length;l++)s<e.data[l].weight&&(s=e.data[l].weight);var u=function(We){var lr=Math.min(Math.max(e.minFontSize,e.maxFontSize*We/s),e.maxFontSize);return zr?lr*e.fontScale:lr},h=!1;if(typeof e.shape!="function")switch(e.shape){case"circle":default:e.shape="circle";break;case"cardioid":e.shape=function(We){return 1-Math.sin(We)},h=!0;break;case"diamond":e.shape=function(We){var lr=We%(2*Math.PI/4);return 1/(Math.cos(lr)+Math.sin(lr))};break;case"square":e.shape=function(We){var lr=(We+Math.PI/4)%(2*Math.PI/4);return 1/(Math.cos(lr)+Math.sin(lr))};break;case"triangle-forward":e.shape=function(We){var lr=We%(2*Math.PI/3);return 1/(Math.cos(lr)+Math.sqrt(3)*Math.sin(lr))};break;case"triangle-backward":e.shape=function(We){var lr=(We+Math.PI)%(2*Math.PI/3);return 1/(Math.cos(lr)+Math.sqrt(3)*Math.sin(lr))};break;case"triangle":case"triangle-up":e.shape=function(We){var lr=(We+Math.PI*3/2)%(2*Math.PI/3);return 1/(Math.cos(lr)+Math.sqrt(3)*Math.sin(lr))};break;case"triangle-down":e.shape=function(We){var lr=(We+Math.PI*5/2)%(2*Math.PI/3);return 1/(Math.cos(lr)+Math.sqrt(3)*Math.sin(lr))};break;case"pentagon":e.shape=function(We){var lr=(We+.955)%(2*Math.PI/5);return 1/(Math.cos(lr)+.726543*Math.sin(lr))};break;case"star":e.shape=function(We){var lr=(We+.955)%(2*Math.PI/10);return(We+.955)%(2*Math.PI/5)-2*Math.PI/10>=0?1/(Math.cos(2*Math.PI/10-lr)+3.07768*Math.sin(2*Math.PI/10-lr)):1/(Math.cos(lr)+3.07768*Math.sin(lr))};break}e.gridSize=Math.max(Math.floor(e.gridSize),4);var c=e.gridSize,v=c-e.maskGapWidth,x=Math.abs(e.maxRotation-e.minRotation),M=Math.min(e.maxRotation,e.minRotation),k=e.rotationSteps,R,G,N,ot,ut,Mt,zt;function $t(Lr,We){return"hsl("+(Math.random()*360).toFixed()+","+(Math.random()*30+70).toFixed()+"%,"+(Math.random()*(We-Lr)+Lr).toFixed()+"%)"}switch(e.color){case"random-dark":zt=function(){return $t(10,50)};break;case"random-light":zt=function(){return $t(50,90)};break;default:typeof e.color=="function"&&(zt=e.color);break}var ee=null;typeof e.classes=="function"&&(ee=e.classes);var Ut=!1,le=[],xe,ye=function(We){var lr=We.currentTarget,Xr=lr.getBoundingClientRect(),Ur,Br;We.touches?(Ur=We.touches[0].clientX,Br=We.touches[0].clientY):(Ur=We.clientX,Br=We.clientY);var en=Ur-Xr.left,$r=Br-Xr.top,Vr=Math.floor(en*(lr.width/Xr.width||1)/c),rn=Math.floor($r*(lr.height/Xr.height||1)/c);return le&&le[Vr]&&le[Vr][rn]},Oe=function(We,lr,Xr,Ur){Ur(We?We.id:-1)},Ge=function(We){var lr=ye(We);if(xe!==lr&&!(zr&&lr&&lr.item&&!(0,f.get)(lr,["item","twiceRender"]))){if(!lr){e.onWordCloudHover(void 0,void 0,We,qr),e.active&&Oe(void 0,void 0,We,qr);return}e.onWordCloudHover(lr.item,lr.dimension,We,qr),e.active&&Oe(lr.item,lr.dimension,We,qr),xe=lr}},Ne=function(We){var lr=ye(We);!lr||(e.onWordCloudClick(lr.item,lr.dimension,We),We.preventDefault())},qe=[],tr=function(We){if(qe[We])return qe[We];var lr=We*8,Xr=lr,Ur=[];for(We===0&&Ur.push([ot[0],ot[1],0]);Xr--;){var Br=1;e.shape!=="circle"&&(Br=e.shape(Xr/lr*2*Math.PI)),Ur.push([ot[0]+We*Br*Math.cos(-Xr/lr*2*Math.PI),ot[1]+We*Br*Math.sin(-Xr/lr*2*Math.PI)*e.ellipticity,Xr/lr*2*Math.PI])}return qe[We]=Ur,Ur},rr=function(){return e.abortThreshold>0&&new Date().getTime()-Mt>e.abortThreshold},$e=function(){return e.rotateRatio===0||Math.random()>e.rotateRatio?0:x===0?M:k>0?M+Math.floor(Math.random()*k)*x/k:M+Math.random()*x},Qe=function(We,lr,Xr){var Ur=!1,Br=u(lr);if(Br<=0)return!1;var en=1;Br<Jo&&(en=function(){for(var No=2;No*Br<Jo;)No+=2;return No}());var $r=document.createElement("canvas"),Vr=$r.getContext("2d",{willReadFrequently:!0});Vr.font=e.fontWeight+" "+(Br*en).toString(10)+"px "+e.fontFamily;var rn=Vr.measureText(We).width/en,pn=Math.max(Br*en,Vr.measureText("m").width,Vr.measureText("\uFF37").width)/en,Fn=rn+pn*2,En=pn*3,Xn=Math.ceil(Fn/c),Qn=Math.ceil(En/c);Fn=Xn*c,En=Qn*c;var zi=-rn/2,Ki=-pn*.4,pi=Math.ceil((Fn*Math.abs(Math.sin(Xr))+En*Math.abs(Math.cos(Xr)))/c),Rr=Math.ceil((Fn*Math.abs(Math.cos(Xr))+En*Math.abs(Math.sin(Xr)))/c),Vn=Rr*c,Pi=pi*c;$r.setAttribute("width",Vn),$r.setAttribute("height",Pi),Ur&&(document.body.appendChild($r),Vr.save()),Vr.scale(1/en,1/en),Vr.translate(Vn*en/2,Pi*en/2),Vr.rotate(-Xr),Vr.font=e.fontWeight+" "+(Br*en).toString(10)+"px "+e.fontFamily,Vr.fillStyle="#000",Vr.textBaseline="middle",Vr.fillText(We,zi*en,(Ki+Br*.5)*en);var wi;try{wi=Vr.getImageData(0,0,Vn,Pi).data}catch($i){return!1}if(rr())return!1;Ur&&(Vr.strokeRect(zi*en,Ki,rn*en,pn*en),Vr.restore());for(var Za=[],Li=Rr,_n,Sn,Rn,zn=[pi/2,Rr/2,pi/2,Rr/2];Li--;)for(_n=pi;_n--;){Rn=c;t:{for(;Rn--;)for(Sn=c;Sn--;)if(wi[((_n*c+Rn)*Vn+(Li*c+Sn))*4+3]){Za.push([Li,_n]),Li<zn[3]&&(zn[3]=Li),Li>zn[1]&&(zn[1]=Li),_n<zn[0]&&(zn[0]=_n),_n>zn[2]&&(zn[2]=_n),Ur&&(Vr.fillStyle="rgba(255, 0, 0, 0.5)",Vr.fillRect(Li*c,_n*c,c-.5,c-.5));break t}Ur&&(Vr.fillStyle="rgba(0, 0, 255, 0.5)",Vr.fillRect(Li*c,_n*c,c-.5,c-.5))}}return Ur&&(Vr.fillStyle="rgba(0, 255, 0, 0.5)",Vr.fillRect(zn[3]*c,zn[0]*c,(zn[1]-zn[3]+1)*c,(zn[2]-zn[0]+1)*c)),{mu:en,occupied:Za,bounds:zn,gw:Rr,gh:pi,fillTextOffsetX:zi,fillTextOffsetY:Ki,fillTextWidth:rn,fillTextHeight:pn,fontSize:Br}},br=function(We,lr,Xr,Ur,Br){for(var en=Br.length;en--;){var $r=We+Br[en][0],Vr=lr+Br[en][1];if($r>=G||Vr>=N||$r<0||Vr<0){if(!e.drawOutOfBound)return!1;continue}if(!R[$r][Vr])return!1}return!0},yr=function(We,lr,Xr,Ur,Br,en,$r,Vr,rn,pn,Fn){var En=Xr.fontSize,Xn=e.color,Qn=e.classes;if(!Fn)zt?Xn=zt(Ur,Br,En,en,$r):Xn=e.color,ee?Qn=ee(Ur,Br,En,en,$r):Qn=e.classes;else{var zi=Mr(pn);Xn=zi?zi.color:e.color}var Ki,pi=Xr.bounds;Ki={x:(We+pi[3])*c,y:(lr+pi[0])*c,w:(pi[1]-pi[3]+1)*c,h:(pi[2]-pi[0]+1)*c},r.forEach(function(Rr){if(Rr.getContext){var Vn=Rr.getContext("2d"),Pi=Xr.mu;Vn.save();var wi=e.fontWeight+" "+(En*Pi).toString(10)+"px "+e.fontFamily;Vn.scale(1/Pi,1/Pi),Vn.font=wi,Vn.fillStyle=Xn;var Za=(We+Xr.gw/2)*c*Pi,Li=(lr+Xr.gh/2)*c*Pi;Vn.translate(Za,Li),Vr!==0&&Vn.rotate(-Vr),Vn.textBaseline="middle",e.selected===pn&&(Vn.shadowColor=e.shadowColor,Vn.shadowBlur=e.shadowBlur),Vn.fillText(Ur,Xr.fillTextOffsetX*Pi,(Xr.fillTextOffsetY+En*.5)*Pi),Fn||n.push({gx:We,gy:lr,info:Xr,word:Ur,weight:Br,distance:en,theta:$r,rotateDeg:Vr,attributes:rn,id:pn,color:Xn}),Vn.restore()}else{var _n=document.createElement("span"),Sn="";Sn="rotate("+-Vr/Math.PI*180+"deg) ",Xr.mu!==1&&(Sn+="translateX(-"+Xr.fillTextWidth/4+"px) scale("+1/Xr.mu+")");var Rn={position:"absolute",display:"block",font:e.fontWeight+" "+En*Xr.mu+"px "+e.fontFamily,left:(We+Xr.gw/2)*c+Xr.fillTextOffsetX+"px",top:(lr+Xr.gh/2)*c+Xr.fillTextOffsetY+"px",width:Xr.fillTextWidth+"px",height:Xr.fillTextHeight+"px",lineHeight:En+"px",whiteSpace:"nowrap",transform:Sn,webkitTransform:Sn,msTransform:Sn,transformOrigin:"50% 40%",webkitTransformOrigin:"50% 40%",msTransformOrigin:"50% 40%"};Xn&&(Rn.color=Xn),_n.textContent=Ur;for(var zn in Rn)_n.style[zn]=Rn[zn];if(rn)for(var $i in rn)_n.setAttribute($i,rn[$i]);Qn&&(_n.className+=Qn),Rr.appendChild(_n)}})},_r=function(We,lr,Xr,Ur,Br){if(!(We>=G||lr>=N||We<0||lr<0)){if(R[We][lr]=!1,Xr){var en=r[0].getContext("2d");en.fillRect(We*c,lr*c,v,v)}Ut&&(le[We][lr]={item:Br,dimension:Ur})}},ir=function(We,lr,Xr,Ur,Br){var en=Br.occupied,$r=e.drawMask,Vr;$r&&(Vr=r[0].getContext("2d"),Vr.save(),Vr.fillStyle=e.maskColor);var rn;if(Ut){var pn=Br.bounds;rn={x:(We+pn[3])*c,y:(lr+pn[0])*c,w:(pn[1]-pn[3]+1)*c,h:(pn[2]-pn[0]+1)*c}}for(var Fn=en.length;Fn--;){var En=We+en[Fn][0],Xn=lr+en[Fn][1];if(!(En>=G||Xn>=N||En<0||Xn<0)){var Qn=Mr(Br.item.id);Qn&&(Br.item.color=Qn.color),_r(En,Xn,$r,rn,Br.item)}}$r&&Vr.restore()},wr=function(We,lr,Xr,Ur,Br,en,$r,Vr){var rn=Math.floor(We[0]-lr.gw/2),pn=Math.floor(We[1]-lr.gh/2),Fn=lr.gw,En=lr.gh;return br(rn,pn,Fn,En,lr.occupied)?(yr(rn,pn,lr,Xr,Ur,Br,We[2],en,$r,Vr,!1),ir(rn,pn,Fn,En,lr),{gx:rn,gy:pn,rot:en,info:lr}):!1},Dr=function(We){var lr,Xr,Ur,Br;Array.isArray(We)?(lr=We[0],Xr=We[1]):(lr=We.word,Xr=We.weight,Ur=We.attributes,Br=We.id);var en=(0,f.isNil)(We.rotateDeg)?$e():We.rotateDeg,$r=Qe(lr,Xr,en);if($r&&($r.item=We),!$r||rr())return!1;if(!e.drawOutOfBound){var Vr=$r.bounds;if(Vr[1]-Vr[3]+1>G||Vr[2]-Vr[0]+1>N)return!1}for(var rn=ut+1;rn--;){var pn=tr(ut-rn);e.shuffle&&(pn=[].concat(pn),$O(pn));for(var Fn=0;Fn<pn.length;Fn++){var En=wr(pn[Fn],$r,lr,Xr,ut-rn,en,Ur,Br);if(En)return En}}return null},Er=function(We,lr,Xr){if(lr)return!r.some(function(Ur){var Br=document.createEvent("CustomEvent");return Br.initCustomEvent(We,!0,lr,Xr||{}),!Ur.dispatchEvent(Br)},this);r.forEach(function(Ur){var Br=document.createEvent("CustomEvent");Br.initCustomEvent(We,!0,lr,Xr||{}),Ur.dispatchEvent(Br)},this)},Mr=function(We){for(var lr=0;lr<n.length;lr++){var Xr=n[lr];if(n[lr].id===We)return Xr}},zr,qr=function(We){if(We!==void 0){if(e.selected!==We&&r[0].getContext){e.selected=We;var lr=r[0].getContext("2d");lr.fillStyle=e.backgroundColor,lr.clearRect(0,0,r[0].width,r[0].height),lr.fillRect(0,0,r[0].width,r[0].height);for(var Xr=0;Xr<n.length;Xr++){var Ur=n[Xr];(!zr||zr&&(0,f.get)(Ur,["info","item","twiceRender"]))&&yr(Ur.gx,Ur.gy,Ur.info,Ur.word,Ur.weight,Ur.distance,Ur.theta,Ur.rotateDeg,Ur.attributes,Ur.id,!0)}}return}var Br=r[0];if(Br.getContext)G=Math.ceil(Br.width/c),N=Math.ceil(Br.height/c);else{var en=Br.getBoundingClientRect();G=Math.ceil(en.width/c),N=Math.ceil(en.height/c)}if(!!Er("wordcloudstart",!0)){ot=e.origin?[e.origin[0]/c,e.origin[1]/c]:[G/2,N/(h?4:2)],ut=Math.floor(Math.sqrt(G*G+N*N)),R=[];var $r,Vr,rn;if(!Br.getContext||e.clearCanvas)for(r.forEach(function(Sn){if(Sn.getContext){var Rn=Sn.getContext("2d");Rn.fillStyle=e.backgroundColor,Rn.clearRect(0,0,G*(c+1),N*(c+1)),Rn.fillRect(0,0,G*(c+1),N*(c+1))}else Sn.textContent="",Sn.style.backgroundColor=e.backgroundColor,Sn.style.position="relative"}),$r=G;$r--;)for(R[$r]=[],Vr=N;Vr--;)R[$r][Vr]=!0;else{var pn=document.createElement("canvas").getContext("2d");pn.fillStyle=e.backgroundColor,pn.fillRect(0,0,1,1);var Fn=pn.getImageData(0,0,1,1).data,En=Br.getContext("2d").getImageData(0,0,G*c,N*c).data;$r=G;for(var Xn,Qn;$r--;)for(R[$r]=[],Vr=N;Vr--;){Qn=c;t:for(;Qn--;)for(Xn=c;Xn--;)for(rn=4;rn--;)if(En[((Vr*c+Qn)*G*c+($r*c+Xn))*4+rn]!==Fn[rn]){R[$r][Vr]=!1;break t}R[$r][Vr]!==!1&&(R[$r][Vr]=!0)}En=pn=Fn=void 0}if(e.onWordCloudHover||e.onWordCloudClick){for(Ut=!0,$r=G+1;$r--;)le[$r]=[];e.onWordCloudHover&&Br.addEventListener("mousemove",Ge),e.onWordCloudClick&&(Br.addEventListener("click",Ne),Br.addEventListener("touchstart",Ne),Br.addEventListener("touchend",function(Sn){Sn.preventDefault()}),Br.style.webkitTapHighlightColor="rgba(0, 0, 0, 0)"),Br.addEventListener("wordcloudstart",function Sn(){Br.removeEventListener("wordcloudstart",Sn),Br.removeEventListener("mousemove",Ge),Br.removeEventListener("click",Ne),xe=void 0})}if(e.animatable){rn=0;var Vn,Pi;e.wait!==0?(Vn=window.setTimeout,Pi=window.clearTimeout):(Vn=window.setImmediate,Pi=window.clearImmediate);var wi=function(Rn,zn){r.forEach(function($i){$i.addEventListener(Rn,zn)},this)},Za=function(Rn,zn){r.forEach(function($i){$i.removeEventListener(Rn,zn)},this)},Li=function Sn(){Za("wordcloudstart",Sn),Pi(_n)};wi("wordcloudstart",Li);var _n=Vn(function Sn(){if(rn>=e.data.length){Pi(_n),Er("wordcloudstop",!1),Za("wordcloudstart",Li);return}Mt=new Date().getTime();var Rn=Dr(e.data[rn]),zn=!Er("wordclouddrawn",!0,{item:e.data[rn],drawn:Rn});if(rr()||zn){Pi(_n),e.abort(),Er("wordcloudabort",!1),Er("wordcloudstop",!1),Za("wordcloudstart",Li);return}rn++,_n=Vn(Sn,e.wait)},e.wait)}else{t.maskImage&&r.forEach(function(Sn){if(Sn.getContext){var Rn=Sn.getContext("2d");Rn.fillStyle=e.backgroundColor,Rn.clearRect(0,0,G*(c+1),N*(c+1)),Rn.fillRect(0,0,G*(c+1),N*(c+1))}});for(var zi=[],Ki=0;Ki<e.data.length;Ki++){var pi=Dr(e.data[Ki]);pi&&zi.push(pi)}if(zi.length===e.data.length&&!zr){for(r.forEach(function(Sn){if(Sn.getContext){var Rn=Sn.getContext("2d");Rn.fillStyle=e.backgroundColor,Rn.clearRect(0,0,G*(c+1),N*(c+1)),Rn.fillRect(0,0,G*(c+1),N*(c+1))}}),$r=G;$r--;)for(R[$r]=[],Vr=N;Vr--;)R[$r][Vr]=!0;zr=!0;for(var Rr=0;Rr<e.data.length;Rr++)Dr((0,V.__assign)((0,V.__assign)({},e.data[Rr]),{twiceRender:zr}))}}}};qr()};uh.isSupported=lh,uh.minFontSize=Jo;var QO=uh,JO=function(i){(0,V.__extends)(r,i);function r(t){var e=i.call(this,t)||this;return e._toolTipsAction=function(n,a,o,s){a?(e._toolTips.update({items:[{color:n.color||"red",name:n.word,value:n.weight}],x:o.offsetX,y:o.offsetY}),e._toolTips.show()):e._toolTips.hide(),e._toolTips.render(),e._configHoverAction&&e._configHoverAction(n,a,o,s)},e._configHoverAction=t.onWordCloudHover,e._enableToolTips=(0,f.get)(t,"tooltip.visible",!0),e.options=(0,f.deepMix)({},{width:400,height:400,enableToolTips:!0},t,{onWordCloudHover:e._enableToolTips?e._toolTipsAction:e._configHoverAction}),e}return r.prototype.init=function(){i.prototype.init.call(this),this._initToolTips()},r.prototype.render=function(){i.prototype.render.call(this),this._render()},r.prototype._initToolTips=function(){this._toolTips=new KO({showTitle:!1,visible:!1,parent:this.options.container,follow:!0,inPanel:!1,items:[]}),this._toolTips.init()},r.prototype._render=function(){this._targetCanvas=this.canvas.get("el"),this.options.maskImage?this._handleMaskImage():this._start()},r.prototype._handleMaskImage=function(){var t=this,e=new Image;e.src=this.options.maskImage+"?"+new Date().getTime(),e.crossOrigin="Anonymous",e.onload=function(){e.naturalHeight+e.naturalWidth===0||e.width+e.height===0?t._start():t._startWithMaskImage(e)},e.onerror=function(){console.error("image %s load failed !!!",t.options.maskImage),t._start()}},r.prototype._start=function(){this._handleG2PlotConfig();var t=this._targetCanvas.getContext("2d"),e=this.canvas.get("width")/this.canvas.get("el").width;t.scale(e,e),QO(this._targetCanvas,this.options)},r.prototype._handleG2PlotConfig=function(){var t=this.options.wordStyle.fontSize||[10,60],e=this.options.wordStyle.rotation||[-Math.PI/2,Math.PI/2],n,a,o;this.options.wordStyle.active?(n=!0,a=this.options.wordStyle.active.shadowColor||"#333",o=this.options.wordStyle.active.shadowBlur||10):n=!1,this.options=(0,f.deepMix)({},this.options,{minFontSize:t[0],maxFontSize:t[1],minRotation:e[0],maxRotation:e[1],active:n,shadowColor:a,shadowBlur:o})},r.prototype._startWithMaskImage=function(t){var e=this._scaleMaskImageCanvas(this._transformWhite2BlackPixels(t)),n=e.maskImageCanvas,a=e.maskImageContext,o=document.createElement("canvas").getContext("2d");o.fillStyle=this.options.backgroundColor||"#fff",o.fillRect(0,0,1,1);for(var s=o.getImageData(0,0,1,1).data,l=a.getImageData(0,0,n.width,n.height),u=a.createImageData(l),h=0;h<l.data.length;h+=4)l.data[h+3]>128?(u.data[h]=s[0],u.data[h+1]=s[1],u.data[h+2]=s[2],u.data[h+3]=s[3]):(u.data[h]=s[0],u.data[h+1]=s[1],u.data[h+2]=s[2],u.data[h+3]=254);a.putImageData(u,0,0);var c=this._targetCanvas.getContext("2d");c.drawImage(n,0,0),this.options=(0,f.deepMix)({},this.options,{clearCanvas:!1}),this._start()},r.prototype._scaleMaskImageCanvas=function(t){var e=document.createElement("canvas");e.width=this.canvas.get("width"),e.height=this.canvas.get("height");var n=e.getContext("2d");return n.imageSmoothingEnabled=!0,n.drawImage(t,0,0,t.width,t.height,0,0,e.width,e.height),{maskImageCanvas:e,maskImageContext:n}},r.prototype._transformWhite2BlackPixels=function(t){var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);for(var a=n.getImageData(0,0,e.width,e.height),o=4,s=0,l=255,u=0;u<a.data.length;u+=o){var h=a.data[u]+a.data[u+1]+a.data[u+2],c=a.data[u+3];c<128||h>250*3?(a.data[u]=l,a.data[u+1]=l,a.data[u+2]=l,a.data[u+3]=s):(a.data[u]=s,a.data[u+1]=s,a.data[u+2]=s,a.data[u+3]=l)}return n.putImageData(a,0,0),e},r}(pl),qO=JO,tI=function(i){(0,V.__extends)(r,i);function r(t,e){var n=this;return e.renderer="canvas",n=i.call(this,t,e)||this,n}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="wordCloud",e.container=this.containerDOM,i.prototype.createLayers.call(this,e)},r}(Kr),eI=tI;ln("wordCloud",qO);var rI={rose:"interval"},nI=Ai(rI);(0,f.assign)(dn,nI);var iI={rose:"interval"},aI={rose:"column"},Hg=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="rose",t}return r.getDefaultOptions=function(){return(0,f.deepMix)({},i.getDefaultOptions.call(this),{width:400,height:400,title:{visible:!1},description:{visible:!1},forceFit:!0,padding:"auto",radius:.8,innerRadius:0,label:{visible:!0,type:"inner",autoRotate:!0,adjustColor:!1},legend:{visible:!0,position:"right"},tooltip:{visible:!0,shared:!1,showCrosshairs:!1,showMarkers:!1},columnStyle:{stroke:"white",lineWidth:1},xAxis:{visible:!1,line:{visible:!1},tickLine:{visible:!1},grid:{visible:!0,alignTick:!1,style:{lineWidth:.5}},label:{offset:5,autoRotate:!0}},yAxis:{visible:!1}})},r.prototype.getOptions=function(t){var e=i.prototype.getOptions.call(this,t),n=t.sectorStyle,a=t.categoryField,o=t.radiusField;return(0,f.deepMix)({},e,{columnStyle:n,xField:a,yField:o})},r.prototype.getRadiusScale=function(){var t=this.options.radiusField;t&&this.view.getScaleByField(t)},r.prototype.getAngleScale=function(){var t=this.options.categoryField;t&&this.view.getScaleByField(t)},r.prototype.geometryParser=function(t,e){return t==="g2"?iI[e]:aI[e]},r.prototype.scale=function(){var t=this.options,e={};e[t.radiusField]={},e[t.categoryField]={type:"cat"},this.setConfig("scales",e)},r.prototype.coord=function(){var t=this.options,e={type:"polar",cfg:{radius:t.radius,innerRadius:t.innerRadius||0}};this.setConfig("coordinate",e)},r.prototype.addGeometry=function(){var t=this.options,e=ri("interval","main",{plot:this,positionFields:[t.categoryField,t.radiusField],widthRatio:{rose:1}});e.label=this.extractLabel(),e.adjust=this.adjustRoseAdjust(),this.rose=e,t.tooltip&&(t.tooltip.fields||t.tooltip.formatter)&&this.geometryTooltip(),this.setConfig("geometry",e)},r.prototype.adjustRoseAdjust=function(){},r.prototype.geometryTooltip=function(){this.rose.tooltip={};var t=this.options.tooltip;t.fields&&(this.rose.tooltip.fields=t.fields),t.formatter&&(this.rose.tooltip.callback=t.formatter,t.fields||(this.rose.tooltip.fields=[this.options.radiusField,this.options.categoryField,this.options.colorField]))},r.prototype.animation=function(){i.prototype.animation.call(this);var t=this.options;t.animation===!1&&(this.rose.animate=!1)},r.prototype.annotation=function(){},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,m)},r.prototype.extractLabel=function(){var t=this.options;if(!t.label||!t.label.visible)return!1;var e=(0,f.deepMix)({},t.label);this.adjustLabelOptions(e);var n=[t.categoryField,t.radiusField],a=Ni("label",(0,V.__assign)({plot:this,labelType:"polar",fields:n},e));return a},r.prototype.adjustLabelOptions=function(t){var e=this.options.radiusField;if(t){var n=t.offset,a=t.type,o=t.content;a==="inner"?t.offset=n<0?n:-10:a==="outer"&&(t.offset=n>=0?n:10),o||(t.content=function(s,l){return""+l._origin[e]})}},r}(Un),fh=Hg;ln("rose",Hg);var oI=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="rose",i.prototype.createLayers.call(this,e)},r.prototype.getRadiusScale=function(){var t=this.layers[0];return t.getRadiusScale()},r.prototype.getAngleScale=function(){var t=this.layers[0];return t.getAngleScale()},r.getDefaultOptions=fh.getDefaultOptions,r}(Kr),Wg=oI,sI=function(i){var r=i.opacity||1;return{opacity:r*.5}},lI=function(i){var r=i.opacity||1;return{opacity:r*.5}};ia("funnel",{columnStyle:{normal:{},active:sI,disable:lI,selected:{lineWidth:1,stroke:"black"}}});var jg=p(26485);function uI(i,r){r===void 0&&(r=!1);var t=i.x,e=i.y,n=i.y0,a=i.size,o,s;(0,f.isArray)(e)?(o=e[0],s=e[1]):(o=n,s=e);var l,u;(0,f.isArray)(t)?(l=t[0],u=t[1]):(l=t-a/2,u=t+a/2);var h=[{x:l,y:o},{x:l,y:s}];return r?h.push({x:u,y:(s+o)/2}):h.push({x:u,y:s},{x:u,y:o}),h}function fI(i,r){var t=[],e=i.points,n=i.nextPoints;if(r){var a=r.yValues,o=r.yValuesMax,s=r.yValuesNext,l=(e[0].y+e[1].y)/2,u=a[0]+a[1],h=a.map(function(k){return k/u/.5}),c=(o[0]/(o[0]+o[1])-.5)*.9,v=.001;if((0,f.isNil)(n))t.push(["M",e[0].x,c+(e[0].y-l)*h[0]+l],["L",e[1].x,c+l],["L",e[2].x,c+l],["L",e[3].x,c+(e[3].y-l)*h[0]+l],["Z"]),t.push(["M",e[0].x,c+.002+l],["L",e[1].x,c+.002+(e[1].y-l)*h[1]+l],["L",e[2].x,c+.002+(e[2].y-l)*h[1]+l],["L",e[3].x,c+.002+l],["Z"]);else{var x=s[0]+s[1],M=s.map(function(k){return k/x/.5});t.push(["M",e[0].x,c+(e[0].y-l)*h[0]+l-v],["L",e[1].x,c+l-v],["L",n[1].x,c+l-v],["L",n[0].x,c+(n[3].y-l)*M[0]+l-v],["Z"]),t.push(["M",e[0].x,c+l+v],["L",e[1].x,c+(e[1].y-l)*h[1]+l+v],["L",n[1].x,c+(n[2].y-l)*M[1]+l+v],["L",n[0].x,c+l+v],["Z"])}}else(0,f.isNil)(n)?t.push(["M",e[0].x,e[0].y],["L",e[1].x,e[1].y],["L",e[2].x,e[2].y],["L",e[3].x,e[3].y],["Z"]):t.push(["M",e[0].x,e[0].y],["L",e[1].x,e[1].y],["L",n[1].x,n[1].y],["L",n[0].x,n[0].y],["Z"]);return t}xn("interval","funnel-basic-rect",{getPoints:function(i){return i.size=i.size*1.8,uI(i)},draw:function(i,r){var t,e=(0,jg.getStyle)(i,!1,!0),n=(0,f.get)(i,"data.__compare__"),a=this.parsePath(fI(i,n));return r.addShape("path",(t={name:"interval",attrs:(0,V.__assign)((0,V.__assign)({},e),{path:a})},t.__compare__=n,t))},getMarker:function(i){var r=i.color;return{symbol:"square",style:{r:4,fill:r}}}});function hh(i,r,t){return(1-t)*i+t*r}function hI(i,r){var t=r.reverse,e=r.ratioUpper,n=r.ratioLower,a=[],o=i[0],s=(i[1].x+i[2].x)/2,l=1.2,u=.6;if(t){var h=n;n=e,e=h}var c=(o.x-s)*hh(u,l,n)+s;a.push(["M",c,o.y]);for(var v=1,x=i.length;v<x;v++){var M=i[v].x;switch(v){case 1:case 2:M=(M-s)*hh(u,l,e)+s;break;case 3:M=(M-s)*hh(u,l,n)+s;break}a.push(["L",M,i[v].y])}return a.push(["L",c,o.y]),a.push(["z"]),a}xn("interval","funnel-dynamic-rect",{draw:function(i,r){var t=(0,jg.getStyle)(i,!1,!0),e=(0,f.get)(i,"data.__custom__"),n=this.parsePath(hI(i.points,e));return r.addShape("path",{attrs:(0,V.__assign)((0,V.__assign)({},t),{path:n})})},getMarker:function(i){var r=i.color,t=i.isInPolar;return{symbol:t?"circle":"square",style:{r:t?4.5:4,fill:r}}}});function Ug(i,r){var t=r||{},e=t.duration,n=e===void 0?200:e,a=t.delay,o=t.easing,s=t.callback,l=t.reverse,u=i.getBBox(),h=l?u.maxX:u.minX,c=(u.minY+u.maxY)/2,v=i.setClip({type:"rect",attrs:{x:u.x,y:u.y,width:u.width,height:u.height}}),x={matrix:[1,0,0,0,1,0,0,0,1]};v.setMatrix(Ve.transform(v.getMatrix(),[["t",-h,-c],["s",0,1],["t",h,c]]));var M={fillOpacity:i.attr("fillOpacity"),strokeOpacity:i.attr("strokeOpacity"),opacity:i.attr("opacity")};i.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),v.animate(x,{duration:200,easing:o,callback:function(){i.setClip(null),v.remove()},delay:a}),i.animate(M,{duration:n,easing:o,delay:a}),s&&setTimeout(function(){return s(i)},n+a)}Ug.animationName="funnelScaleInX",hi("funnelScaleInX",Ug);function Zg(i,r){var t=r||{},e=t.duration,n=e===void 0?200:e,a=t.delay,o=t.easing,s=t.callback,l=t.reverse,u=i.getBBox(),h=(u.minX+u.maxX)/2,c=l?u.maxY:u.minY,v=i.setClip({type:"rect",attrs:{x:u.x,y:u.y,width:u.width,height:u.height}}),x={matrix:[1,0,0,0,1,0,0,0,1]};v.setMatrix(Ve.transform(v.getMatrix(),[["t",-h,-c],["s",1,0],["t",h,c]]));var M={fillOpacity:i.attr("fillOpacity"),strokeOpacity:i.attr("strokeOpacity"),opacity:i.attr("opacity")};i.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),v.animate(x,{duration:200,easing:o,callback:function(){i.setClip(null),v.remove()},delay:a}),i.animate(M,{duration:n,easing:o,delay:a}),s&&setTimeout(function(){return s(i)},n+a)}Zg.animationName="funnelScaleInY",hi("funnelScaleInY",Zg);function Yl(i,r,t){return(1-t)*i+t*r}var cI={column:"interval"},vI={interval:"funnel"},Kg=function(i){(0,V.__extends)(r,i);function r(t){var e=i.call(this,t)||this;return e.type="funnel",e._shouldResetPercentages=!0,e._shouldResetLabels=!0,e._shouldResetCompareTexts=!0,e._legendsListenerAttached=!1,e._onLegendContainerMouseDown=function(n){var a=e.options,o=n.target.get("name");if(o.startsWith("legend-item")){var s=n.target.get("parent");if(s.set("unchecked",!s.get("unchecked")),e.refreshPercentages(),e.refreshLabels(),a.dynamicHeight){var l=e._findCheckedDataByMouseDownLegendItem(s);e._genCustomFieldForDynamicHeight(l)}if(a.compareField){var l=e._findCheckedDataByMouseDownLegendItem(s);e._updateDataForCompare(l),e.refreshCompareTexts()}}},e.adjustProps(e.options),t.dynamicHeight&&e._genCustomFieldForDynamicHeight(e.getData()),t.compareField&&(e.options.data=e._reduceDataForCompare(e.getData())),e}return r.getDefaultOptions=function(t){var e={label:{visible:!0,adjustColor:!0},percentage:{visible:!0,offsetX:t.transpose?0:40,offsetY:t.transpose?40:0,spacing:4,line:{visible:!0,style:{lineWidth:1,stroke:"rgba(0, 0, 0, 0.15)"}},text:{content:"\u8F6C\u5316\u7387",style:{fill:"rgba(0, 0, 0, 0.65)"}},value:{visible:!0,style:{fill:"black"},formatter:function(n,a){return(100*a/n).toFixed(2)+"%"}}},tooltip:{visible:!0,shared:!0,showTitle:!1,showCrosshairs:!1,showMarkers:!1},animation:(0,f.deepMix)({},co.DEFAULT_ANIMATE_CFG,{appear:{duration:800}}),dynamicHeight:!1,compareText:{visible:!0,offsetX:-16,offsetY:-16,style:{fill:"black"}},legend:{position:"bottom-center"},interactions:[{type:"tooltip"},{type:"legend-filter"}]};return(0,f.deepMix)({},i.getDefaultOptions.call(this),e)},r.prototype.getColorScale=function(){var t=this.options.xField;if(t)return this.view.getScaleByField(t)},r.prototype.coord=function(){var t=this.options,e={type:"rect",actions:t.transpose?t.dynamicHeight?[["transpose"],["scale",1,-1]]:[["scale",1,-1]]:t.dynamicHeight?[]:[["transpose"],["scale",1,-1]]};this.setConfig("coordinate",e)},r.prototype.axis=function(){this.setConfig("axes",!1)},r.prototype.adjustFunnel=function(t){var e=this.options;t.shape=e.dynamicHeight?"funnel-dynamic-rect":"funnel-basic-rect",t.color={fields:[e.xField],values:e.color&&(Array.isArray(e.color)?e.color:[e.color])},(0,f.isFunction)(e.funnelStyle)?t.style={callback:e.funnelStyle}:t.style={cfg:e.funnelStyle},t.adjust=[{type:e.dynamicHeight?"stack":"symmetric"}]},r.prototype.tooltip=function(){var t=this.options;t.compareField&&(0,f.deepMix)(t.tooltip,{htmlContent:function(e,n){var a,o,s,l;a=Be.CONTAINER_CLASS,o=(0,Et.Z)('<div class="'+a+'"></div>'),(0,It.Z)(o,Oo.default[a]);var u=o;if(e){a=Be.TITLE_CLASS,o=(0,Et.Z)('<div class="'+a+'"></div>'),(0,It.Z)(o,Oo.default[a]),u.appendChild(o);var h=o;a=Be.MARKER_CLASS,o=(0,Et.Z)('<span class="'+a+'"></span>'),(0,It.Z)(o,Oo.default[a]),(0,It.Z)(o,{width:"10px",height:"10px"}),h.appendChild(o),l=o,o=(0,Et.Z)("<span>"+e+"</span>"),h.appendChild(o)}if(n){a=Be.LIST_CLASS,o=(0,Et.Z)('<ul class="'+a+'"></ul>'),(0,It.Z)(o,Oo.default[a]),u.appendChild(o);var c=o;n.reduce(function(v,x){s||(s=x.color);var M=(0,f.get)(x,"point._origin.__compare__.compareValues"),k=(0,f.get)(x,"point._origin.__compare__.yValues");return k.forEach(function(R,G){return v.push([M[G],R])}),v},[]).forEach(function(v,x){var M=v[0],k=v[1];a=Be.LIST_ITEM_CLASS,o=(0,Et.Z)('<li class="'+a+'" data-index='+x+"></li>"),(0,It.Z)(o,Oo.default[a]),c.appendChild(o);var R=o;a=Be.NAME_CLASS,o=(0,Et.Z)('<span class="'+a+'">'+M+"</span>"),(0,It.Z)(o,Oo.default[a]),R.appendChild(o),a=Be.VALUE_CLASS,o=(0,Et.Z)('<span class="'+a+'">'+k+"</span>"),(0,It.Z)(o,Oo.default[a]),R.appendChild(o)})}return s&&l&&(0,It.Z)(l,{backgroundColor:s}),u}}),i.prototype.tooltip.call(this)},r.prototype.addGeometry=function(){var t=this.options,e=ri("interval","main",{positionFields:[t.dynamicHeight?"_":t.xField,t.yField],plot:this});this.adjustFunnel(e),this.funnel=e,this.setConfig("geometry",e),t.compareField||this.geometryTooltip()},r.prototype.geometryTooltip=function(){var t=this.options.tooltip;t.fields&&(this.funnel.tooltip||(this.funnel.tooltip={}),this.funnel.tooltip.fields=t.fields),t.formatter&&(this.funnel.tooltip||(this.funnel.tooltip={}),this.funnel.tooltip.callback=t.formatter,t.fields||(this.funnel.tooltip.fields=[this.options.xField,this.options.yField]))},r.prototype.animation=function(){var t=this;i.prototype.animation.call(this);var e=this.options;if(e.animation===!1)this.funnel.animate=!1;else{var n=this.getData(),a=(0,f.get)(e,"animation.appear.duration"),o=a/(n.length||1);this._animationAppearTimeoutHandler&&(clearTimeout(this._animationAppearTimeoutHandler),delete this._animationAppearTimeoutHandler),this._animationAppearTimeoutHandler=setTimeout(function(){t.fadeInPercentages(o),e.compareField&&t.fadeInCompareTexts(o),delete t._animationAppearTimeoutHandler},a),this.funnel.animate=(0,f.deepMix)({},e.animation,{appear:{animation:e.transpose?"funnelScaleInX":"funnelScaleInY",duration:o,delay:function(s){return(0,f.findIndex)(n,function(l){return(0,f.isEqual)(l,s)})*o},callback:function(s){t.fadeInLabels(s,.5*o)}},enter:{animation:"fade-in"}})}},r.prototype.afterRender=function(){var t=this.options;if(this.resetLabels(),this.resetPercentages(),t.compareField&&this.resetCompareTexts(),t.padding=="auto"){var e=this._findPercentageContainer();e&&this.paddingController.registerPadding(e,"inner",!0);var n=this._findCompareTextContainer();n&&this.paddingController.registerPadding(n,"inner",!0)}if(i.prototype.afterRender.call(this),t.animation===!1&&(this.fadeInLabels(),this.fadeInPercentages(),t.compareField&&this.fadeInCompareTexts()),!this._legendsListenerAttached){this._legendsListenerAttached=!0;var a=this.view.getController("legend").container;a.on("mousedown",this._onLegendContainerMouseDown)}},r.prototype.updateConfig=function(t){t=this.adjustProps(t),i.prototype.updateConfig.call(this,t),this._legendsListenerAttached=!1},r.prototype.changeData=function(t){var e=this.options;if(e.animation!==!1&&(this._shouldResetPercentages=!1,this._shouldResetLabels=!1),e.dynamicHeight){var n=this._findCheckedDataInNewData(t);this._genCustomFieldForDynamicHeight(n)}if(e.compareField){t=this._reduceDataForCompare(t);var n=this._findCheckedDataInNewData(t);this._updateDataForCompare(n)}i.prototype.changeData.call(this,t),this.refreshPercentages(),this.refreshLabels(),e.compareField&&this.fadeInCompareTexts()},r.prototype.geometryParser=function(t,e){return t==="g2"?cI[e]:vI[e]},r.prototype.adjustProps=function(t){return t.compareField&&(t.dynamicHeight=!1),t.dynamicHeight&&((0,f.set)(t,"meta."+t.yField+".nice",!1),(0,f.set)(t,"tooltip.shared",!1)),t},r.prototype.resetPercentages=function(){var t=this;if(!!this._shouldResetPercentages){var e=this.options,n=e.percentage||{},a=n.offsetX,o=n.offsetY,s=n.spacing,l=n.line,u=l===void 0?{}:l,h=n.text,c=h===void 0?{}:h,v=n.value,x=v===void 0?{}:v,M=Date.now(),k=this._findPercentageContainer(!0);this._eachShape(function(R,G,N,ot){if(G>0){var ut=R.getBBox(),Mt=ut.minX,zt=ut.maxX,$t=ut.maxY,ee=ut.minY,Ut=e.transpose?Mt:zt,le=e.transpose&&e.compareField?$t:ee,xe=t._findPercentageMembersInContainerByIndex(k,G,!0),ye=xe.line,Oe=xe.text,Ge=xe.value,Ne=[function($e,Qe,br,yr,_r){br&&(br.attr((0,f.deepMix)({},u.style,{x1:$e,y1:Qe,x2:e.transpose?$e+a:$e-a,y2:e.transpose?Qe-o:Qe+o,opacity:0})),br.set("adjustTimestamp",M));var ir=0,wr=0,Dr=function(){yr&&(yr.attr((0,f.deepMix)({},c.style,{x:e.transpose?$e+a:$e-a-s-wr-s,y:e.transpose?Qe-o-s:Qe+o,opacity:0,text:c.content,textAlign:e.transpose?"left":"right",textBaseline:e.transpose?"bottom":"middle"})),yr.set("adjustTimestamp",M),ir=yr.getBBox().width)},Er=function(){_r&&(_r.attr((0,f.deepMix)({},x.style,{x:e.transpose?$e+a+ir+s:$e-a-s,y:e.transpose?Qe-o-s:Qe+o,opacity:0,text:(0,f.isFunction)(x.formatter)?e.compareField?x.formatter((0,f.get)(ot,"__compare__.yValues.0"),(0,f.get)(N,"__compare__.yValues.0")):x.formatter(ot[e.yField],N[e.yField]):"",textAlign:e.transpose?"left":"right",textBaseline:e.transpose?"bottom":"middle"})),_r.set("adjustTimestamp",M),wr=_r.getBBox().width)};e.transpose?(Dr(),Er()):(Er(),Dr())},function($e,Qe,br,yr,_r){br&&(br.attr((0,f.deepMix)({},u.style,{x1:$e,y1:Qe,x2:$e+a,y2:e.transpose?e.compareField?Qe+o:Qe-o:Qe+o,opacity:0})),br.set("adjustTimestamp",M));var ir=0;yr&&(yr.attr((0,f.deepMix)({},c.style,{x:e.transpose?$e+a:$e+a+s,y:e.transpose?e.compareField?Qe+o+s:Qe-o-s:Qe+o,opacity:0,text:c.content,textAlign:"left",textBaseline:e.transpose?e.compareField?"top":"bottom":"middle"})),yr.set("adjustTimestamp",M),ir=yr.getBBox().width),_r&&(_r.attr((0,f.deepMix)({},x.style,{x:e.transpose?$e+a+ir+s:$e+a+s+ir+s,y:e.transpose?e.compareField?Qe+o+s:Qe-o-s:Qe+o,opacity:0,text:(0,f.isFunction)(x.formatter)?e.compareField?x.formatter((0,f.get)(ot,"__compare__.yValues.1"),(0,f.get)(N,"__compare__.yValues.1")):x.formatter(ot[e.yField],N[e.yField]):"",textAlign:"left",textBaseline:e.transpose?e.compareField?"top":"bottom":"middle"})),_r.set("adjustTimestamp",M))}];if(e.compareField){var qe=[Mt,ee],tr=qe[0],rr=qe[1];[[tr,rr],[Ut,le]].forEach(function($e,Qe){var br=$e[0],yr=$e[1];return Ne[Qe](br,yr,ye&&ye[Qe],Oe&&Oe[Qe],Ge&&Ge[Qe])})}else Ne[1](Ut,le,ye,Oe,Ge)}ot=N,G++}),k.get("children").forEach(function(R){R.get("adjustTimestamp")!=M&&(R.attr({opacity:0}),k.set(R.get("id"),null),setTimeout(function(){return R.remove()},0))})}},r.prototype.fadeInPercentages=function(t,e){var n=this,a=this.options,o=this._findPercentageContainer(),s=function(l){var u={minX:Infinity,maxX:-Infinity,minY:Infinity,maxY:-Infinity};n._eachShape(function(h,c){var v=n._findPercentageMembersInContainerByIndex(o,c),x={minX:Infinity,maxX:-Infinity,minY:Infinity,maxY:-Infinity},M=function(R){if(R&&R.get("type")=="text"){var G=R.getBBox(),N=G.minX,ot=G.maxX,ut=G.minY,Mt=G.maxY;N<x.minX&&(x.minX=N),ot>x.maxX&&(x.maxX=ot),ut<x.minY&&(x.minY=ut),Mt>x.maxY&&(x.maxY=Mt)}};if((0,f.each)(v,function(R){return(0,f.isArray)(R)?M(R[l]):M(R)}),x.minX>u.maxX||x.maxX<u.minX||x.minY>u.maxY||x.maxY<u.minY){var k=function(R){if(R){var G={opacity:1};t?R.animate(G,t):R.attr(G)}};(0,f.each)(v,function(R){return(0,f.isArray)(R)?k(R[l]):k(R)}),(0,f.assign)(u,x)}})};a.compareField?[0,1].forEach(s):s(),t&&e&&setTimeout(e,t)},r.prototype.fadeOutPercentages=function(t,e){var n=this,a=this._findPercentageContainer();this._eachShape(function(o,s){var l=n._findPercentageMembersInContainerByIndex(a,s),u=function(h){if(h){var c={opacity:0};t?h.animate(c,t):h.attr(c)}};(0,f.each)(l,function(h){return(0,f.isArray)(h)?h.forEach(u):u(h)})}),t&&e&&setTimeout(e,t)},r.prototype.refreshPercentages=function(t){var e=this,n=this.options;if(n.animation!==!1){var a=this._calcRefreshFadeDurations(),o=a.fadeOutDuration,s=a.fadeInDuration;this._shouldResetPercentages=!1,this.fadeOutPercentages(o,function(){e._shouldResetPercentages=!0,e.resetPercentages(),e.fadeInPercentages(s,t)})}},r.prototype._findPercentageContainer=function(t){t===void 0&&(t=!1);var e=this.view.middleGroup,n=e.get("percentageContainer");return!n&&t&&(n=e.addGroup(),e.set("percentageContainer",n)),n},r.prototype._findPercentageMembersInContainerByIndex=function(t,e,n){n===void 0&&(n=!1);var a=this.options,o=a.percentage||{},s=o.visible,l=o.line,u=l===void 0?{}:l,h=o.text,c=h===void 0?{}:h,v=o.value,x=v===void 0?{}:v,M={line:void 0,text:void 0,value:void 0};if(s===!1||!t)return M;if(u.visible!==!1){var k=function(ot){var ut="_percentage-line-"+e+"-"+ot,Mt=t.get(ut);return!Mt&&n&&(Mt=t.addShape({id:ut,type:"line",attrs:{}}),t.set(ut,Mt)),Mt},R=a.compareField?[0,1].map(k):k(0);M.line=R}if(c.visible!==!1){var k=function(ut){var Mt="_percentage-text-"+e+"-"+ut,zt=t.get(Mt);return!zt&&n&&(zt=t.addShape({id:Mt,type:"text",attrs:{}}),t.set(Mt,zt)),zt},G=a.compareField?[0,1].map(k):k(0);M.text=G}if(x.visible!==!1){var k=function(ut){var Mt="_percentage-value-"+e+"-"+ut,zt=t.get(Mt);return!zt&&n&&(zt=t.addShape({id:Mt,type:"text",attrs:{}}),t.set(Mt,zt)),zt},N=a.compareField?[0,1].map(k):k(0);M.value=N}return M},r.prototype._calcRefreshFadeDurations=function(){var t=this.options,e=(0,f.get)(t,"animation.update.duration"),n=(0,f.get)(t,"animation.enter.duration"),a=Math.min(n,e)*.6,o=Math.max(n,e)*1.2;return{fadeInDuration:a,fadeOutDuration:o}},r.prototype.resetLabels=function(){var t=this;if(!!this._shouldResetLabels){var e=this.options,n=e.xField,a=e.yField,o=Date.now(),s=this._getGeometry().labelsContainer,l=e.label||{},u=(0,f.deepMix)((0,V.__assign)({},this.theme.label),e.label.style,{opacity:0,textAlign:"center",textBaseline:"middle"}),h;this._eachShape(function(c,v,x,M){var k,R=c.get("element");v==0&&(h=x);var G=c.getBBox(),N=G.minX,ot=G.maxX,ut=G.minY,Mt=G.maxY,zt=x[n],$t=x[a];l.adjustColor&&(u.fill=t._getAdjustedTextFillByShape(c));var ee=x.__compare__,Ut,le=(k={},k[ws]=x,k.element=R,k.elementIndex=M,k.mappingDatum=[].concat(R.getModel().mappingData)[0],k.mappingDatumIndex=0,k);l.formatter?Ut=l.formatter(zt,le,v,$t,h[a]):ee?Ut=[0,1].map(function(){return""+$t}).join(e.transpose?`

`:"    "):Ut=zt+" "+$t;var xe=t._findLabelInContainerByIndex(s,v,!0),ye=ee?ee.yValues[0]/(ee.yValues[0]+ee.yValues[1]):.5;xe&&(xe.attr((0,V.__assign)((0,V.__assign)({},u),{x:Yl(N,ot,e.transpose?.5:ye),y:Yl(ut,Mt,e.transpose?ye:.5),text:Ut})),xe.set("adjustTimestamp",o))}),s.get("children").forEach(function(c){c.get("adjustTimestamp")!=o&&(c.attr({opacity:0}),s.set(c.get("id"),null),setTimeout(function(){return c.remove()}))})}},r.prototype.fadeInLabels=function(t,e,n){var a=this,o=this._getGeometry().labelsContainer;this._eachShape(function(s,l){if(!t||t==s){var u=a._findLabelInContainerByIndex(o,l);if(u){var h=s.getBBox(),c=u.getBBox();if(c.minX>=h.minX&&c.maxX<=h.maxX&&c.minY>=h.minY&&c.maxY<=h.maxY){var v={opacity:1};e?u.animate(v,e):u.attr(v)}}}}),e&&n&&setTimeout(n,e)},r.prototype.fadeOutLabels=function(t,e,n){var a=this,o=this._getGeometry().labelsContainer;this._eachShape(function(s,l){if(!t||t==s){var u=a._findLabelInContainerByIndex(o,l);if(u){var h={opacity:0};e?u.animate(h,e):u.attr(h)}}}),e&&n&&setTimeout(n,e)},r.prototype.refreshLabels=function(t){var e=this,n=this.options;if(n.animation!==!1){var a=this._calcRefreshFadeDurations(),o=a.fadeOutDuration,s=a.fadeInDuration;this._shouldResetLabels=!1,this.fadeOutLabels(null,o,function(){e._shouldResetLabels=!0,e.resetLabels(),e.fadeInLabels(null,s,t)})}},r.prototype._findLabelInContainerByIndex=function(t,e,n){var a;n===void 0&&(n=!1);var o=this.options,s;if(((a=o.label)===null||a===void 0?void 0:a.visible)===!1)return s;var l="_label-"+e;return s=t.get(l),!s&&n&&(s=t.addShape({id:l,type:"text",attrs:{}}),t.set(l,s)),s},r.prototype.resetCompareTexts=function(){if(!!this._shouldResetCompareTexts){var t=this.options,e,n;if(this._eachShape(function(x,M,k){M==0&&(e=x.get("parent").getBBox(),n=(0,f.get)(k,"__compare__"))}),e&&n&&(0,f.get)(t,"compareText.visible")!==!1){var a=this._findCompareTextContainer(!0),o=n.yValuesMax,s=n.compareValues,l=e.minX,u=e.maxX,h=e.minY,c=e.maxY,v=a.get("children");[0,1].forEach(function(x){var M=v[x];M||(M=a.addShape({type:"text"})),M.attr((0,f.deepMix)({},(0,f.get)(t,"compareText.style"),{text:t.transpose?s[x]:x?"  "+s[x]:s[x]+"  ",x:t.transpose?l+(0,f.get)(t,"compareText.offsetX"):Yl(l,u,o[0]/(o[0]+o[1])),y:t.transpose?Yl(h,c,o[0]/(o[0]+o[1]))+(x?8:-8):h+(0,f.get)(t,"compareText.offsetY"),opacity:0,textAlign:t.transpose?"right":x?"left":"right",textBaseline:t.transpose&&x?"top":"bottom"}))})}}},r.prototype.fadeInCompareTexts=function(t,e){var n=this._findCompareTextContainer();if(n){var a=n.get("children");[0,1].forEach(function(o){var s=a[o];if(s){var l={opacity:1};t?s.animate(l,t):s.attr(l)}})}t&&e&&setTimeout(e,t)},r.prototype.fadeOutCompareTexts=function(t,e){var n=this._findCompareTextContainer();if(n){var a=n.get("children");[0,1].forEach(function(o){var s=a[o];if(s){var l={opacity:0};t?s.animate(l,t):s.attr(l)}})}t&&e&&setTimeout(e,t)},r.prototype.refreshCompareTexts=function(t){var e=this,n=this.options;if(n.animation!==!1){var a=this._calcRefreshFadeDurations(),o=a.fadeInDuration,s=a.fadeOutDuration;this._shouldResetCompareTexts=!1,this.fadeOutCompareTexts(s,function(){e._shouldResetCompareTexts=!0,e.resetCompareTexts(),e.fadeInCompareTexts(o,t)})}},r.prototype._findCompareTextContainer=function(t){t===void 0&&(t=!1);var e=this.view.middleGroup,n=e.get("compareTextContainer");return!n&&t&&(n=e.addGroup(),e.set("compareTextContainer",n)),n},r.prototype._eachShape=function(t){var e,n=this._findCheckedData(this.getData()),a=n.length,o=0,s;(e=this._getGeometry())===null||e===void 0||e.elements.forEach(function(l,u){var h=l.shape,c=n[o];o<a&&t(h,o,c,s,u),s=c,o++})},r.prototype._getGeometry=function(){return this.view.geometries[0]},r.prototype._getAdjustedTextFillByShape=function(t){var e=t.attr("fill"),n=t.attr("opacity")?t.attr("opacity"):1,a=to(e),o=Math.round(a[0]*.299+a[1]*.587+a[2]*.114)/n,s=[{from:0,to:85,color:"white"},{from:85,to:170,color:"#F6F6F6"},{from:170,to:255,color:"black"}],l=Il(s,o);return l},r.prototype._genCustomFieldForDynamicHeight=function(t){var e=this.options,n=t.reduce(function(o,s){return o+s[e.yField]},0),a=1;t.forEach(function(o,s){var l=o[e.yField],u=l/n,h=a-u;o.__custom__={datumIndex:s,dataLength:t.length,ratioUpper:a,ratioLower:h,reverse:e.transpose},a=h})},r.prototype._findCheckedDataByMouseDownLegendItem=function(t){var e=t.get("parent").get("children").map(function(a){return!a.get("unchecked")}),n=this.getData().filter(function(a,o){return e[o]});return n},r.prototype._findCheckedDataInNewData=function(t){var e=this.options,n=this.view.getController("legend").container,a=n.findAll(function(s){return s.get("name")=="legend-item"}).filter(function(s){return s.get("unchecked")}).map(function(s){return s.get("id").replace("-legend-item-","")}),o=t.filter(function(s){return!(0,f.contains)(a,s[e.xField])});return o},r.prototype._findCheckedData=function(t){var e,n=this.options;if((e=n.legend)===null||e===void 0?void 0:e.visible){var a=this.view.getController("legend").container,o=a.findAll(function(l){return l.get("name")=="legend-item"}).filter(function(l){return!l.get("unchecked")}).map(function(l){return l.get("id").replace("-legend-item-","")}),s=t.filter(function(l){return(0,f.contains)(o,l[n.xField])});return s}else return this.processData(n.data)},r.prototype._reduceDataForCompare=function(t){var e=this.options,n,a=[-Infinity,-Infinity];return t=t.reduce(function(o,s){var l,u=s[e.xField],h=s[e.yField],c=s[e.compareField];n||(n=c);var v=o.find(function(M){return M[e.xField]==u});v||(v=(l={},l[e.xField]=u,l[e.yField]=0,l.__compare__={compareValues:[],yValues:[],yValuesMax:[],yValuesNext:void 0,transpose:e.transpose},l),o.push(v));var x=c==n?0:1;return v.__compare__.yValues[x]=h,a[x]<h&&(a[x]=h),v.__compare__.compareValues[x]=c,o},[]),t.forEach(function(o,s){o[e.yField]=(0,f.get)(o,"__compare__.yValues",[]).reduce(function(l,u){return l+=u},0),(0,f.set)(o,"__compare__.yValuesMax",a),(0,f.set)(o,"__compare__.yValuesNext",(0,f.get)(t,s+1+".__compare__.yValues"))}),t},r.prototype._updateDataForCompare=function(t){var e=[-Infinity,-Infinity];t.forEach(function(n){var a=(0,f.get)(n,"__compare__.yValues");[0,1].forEach(function(o){a[o]>e[o]&&(e[o]=a[o])})}),t.forEach(function(n,a){(0,f.set)(n,"__compare__.yValuesMax",e),(0,f.set)(n,"__compare__.yValuesNext",(0,f.get)(t,a+1+".__compare__.yValues"))})},r}(Un),dI=Kg;ln("funnel",Kg);var pI=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="funnel",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=dI.getDefaultOptions,r}(Kr),gI=pI,$g=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="stackedRose",t.baseType="rose",t}return r.getDefaultOptions=function(){return(0,f.deepMix)({},i.getDefaultOptions.call(this),{xAxis:{visible:!0,line:{visible:!1},tickLine:{visible:!1},grid:{visible:!0,alignTick:!1,style:{lineWidth:.5}},label:{offset:5,autoRotate:!0}},yAxis:{visible:!1}})},r.prototype.getColorScale=function(){var t=this.options.stackField;return this.view.getScaleByField(t)},r.prototype.adjustRoseAdjust=function(){return[{type:"stack"}]},r.prototype.geometryTooltip=function(){this.rose.tooltip={};var t=this.options.tooltip;t.fields&&(this.rose.tooltip.fields=t.fields),t.formatter&&(this.rose.tooltip.callback=t.formatter,t.fields||(this.rose.tooltip.fields=[this.options.radiusField,this.options.categoryField,this.options.stackField]))},r}(fh),yI=$g;ln("stackedRose",$g);var mI=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="stackedRose",i.prototype.createLayers.call(this,e)},r.prototype.getRadiusScale=function(){var t=this.layers[0];return t.getRadiusScale()},r.prototype.getAngleScale=function(){var t=this.layers[0];return t.getAngleScale()},r.getDefaultOptions=yI.getDefaultOptions,r}(Kr),Qg=mI,Jg=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="groupedRose",t.baseType="rose",t}return r.getDefaultOptions=function(){return(0,f.deepMix)({},i.getDefaultOptions.call(this),{xAxis:{visible:!0,line:{visible:!1},tickLine:{visible:!1},grid:{visible:!0,alignTick:!1,style:{lineWidth:.5}},label:{offset:5,autoRotate:!0}},yAxis:{visible:!1}})},r.prototype.getColorScale=function(){var t=this.options.groupField;if(t)return this.view.getScaleByField(t)},r.prototype.adjustRoseAdjust=function(){return[{type:"dodge",marginRatio:1}]},r.prototype.geometryTooltip=function(){this.rose.tooltip={};var t=this.options.tooltip;t.fields&&(this.rose.tooltip.fields=t.fields),t.formatter&&(this.rose.tooltip.callback=t.formatter,t.fields||(this.rose.tooltip.fields=[this.options.radiusField,this.options.categoryField,this.options.groupField]))},r}(fh),xI=Jg;ln("groupedRose",Jg);var bI=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="groupedRose",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=xI.getDefaultOptions,r}(Kr),qg=bI,wI={area:"area",line:"line",point:"point"},SI=Ai(wI);(0,f.assign)(dn,SI);var CI=function(i){var r=i.opacity||1;return{opacity:r}},MI=function(i){var r=i.opacity||1;return{opacity:r*.5}},EI=function(i){var r=i.opacity||1;return{opacity:r}},_I=function(i){var r=i.opacity||1;return{opacity:r*.5}},AI=function(i){var r=i.lineWidth||1;return{lineWidth:r+2}},TI=function(i){var r=i.fill||i.fillStyle,t=i.size||i.radius;return{radius:t+1,shadowBlur:t,shadowColor:r,stroke:r,strokeOpacity:1,lineWidth:1}},PI=function(i){var r=i.fill||i.fillStyle,t=i.size||i.radius;return{radius:t+2,shadowBlur:t,shadowColor:r,stroke:r,strokeOpacity:1,lineWidth:2}},LI=function(i){var r=i.opacity||i.fillOpacity||1;return{opacity:r*.5}};ia("radar",{areaStyle:{normal:{},active:CI,disable:MI,selected:{lineWidth:1,stroke:"#333333"}},lineStyle:{normal:{},active:EI,disable:_I,selected:AI},pointStyle:{normal:{},active:TI,disable:LI,selected:PI}});var OI={area:"area",line:"line",point:"point"},ty=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="radar",t}return r.getDefaultOptions=function(){return(0,f.deepMix)({},i.getDefaultOptions.call(this),{width:400,height:400,title:{visible:!1},description:{visible:!1},forceFit:!0,padding:"auto",radius:.8,smooth:!1,line:{visible:!0,size:2,style:{opacity:1}},area:{visible:!0,style:{opacity:.25}},point:{visible:!1,size:4,shape:"point",style:{opacity:1}},angleAxis:{visible:!0,autoRotateTitle:!0,line:{visible:!1},tickLine:{visible:!1},grid:{visible:!0,line:{style:{lineDash:[0,0]}}},label:{visible:!0,offset:16,autoRotate:!0,autoHide:!0},title:{visible:!1}},radiusAxis:{min:0,visible:!0,nice:!0,autoRotateTitle:!0,line:{visible:!0},tickLine:{visible:!0},gridType:"line",grid:{visible:!0,line:{style:{lineDash:[0,0]}}},label:{visible:!0,autoHide:!0,autoRotate:!0},title:{visible:!1}},label:{visible:!1,type:"point"},legend:{visible:!0,position:"left-top"},tooltip:{visible:!0,shared:!0,showCrosshairs:!1}})},r.prototype.init=function(){var t=this.options;t.xField=t.angleField,t.yField=t.radiusField,i.prototype.init.call(this)},r.prototype.getAngleScale=function(){var t=this.options.angleField;return this.view.getScaleByField(t)},r.prototype.getRadiusScale=function(){var t=this.options.radiusField;return this.view.getScaleByField(t)},r.prototype.getColorScale=function(){var t=this.options.seriesField;return this.view.getScaleByField(t)},r.prototype.geometryParser=function(t,e){return OI[e]},r.prototype.scale=function(){var t=this.options,e={};e[t.angleField]={},(0,f.has)(t,"angleAxis")&&bi(e[t.angleField],t.angleAxis),e[t.radiusField]={},(0,f.has)(t,"radiusAxis")&&bi(e[t.radiusField],t.radiusAxis),this.setConfig("scales",e),i.prototype.scale.call(this)},r.prototype.coord=function(){var t=this.options,e={type:"polar",cfg:{radius:t.radius}};this.setConfig("coordinate",e)},r.prototype.axis=function(){var t=this.options,e=Ni("axis",{plot:this,dim:"angle"}),n=Ni("axis",{plot:this,dim:"radius"}),a={};a[t.angleField]=e,a[t.radiusField]=n,this.setConfig("axes",a)},r.prototype.addGeometry=function(){var t=this.options;if(t.area.visible){var e=ri("area","main",{plot:this});this.setConfig("geometry",e),this.area=e}if(t.line&&t.line.visible){var n=ri("line","main",{plot:this});this.setConfig("geometry",n),this.line=n}if(t.point&&t.point.visible){var a=ri("point","guide",{plot:this});this.setConfig("geometry",a),this.point=a}t.label&&this.label(),t.tooltip&&(t.tooltip.fields||t.tooltip.formatter)&&this.geometryTooltip()},r.prototype.geometryTooltip=function(){var t=this.line?this.line:this.area;t.tooltip={};var e=this.options.tooltip;e.fields&&(t.tooltip.fields=e.fields),e.formatter&&(t.tooltip.callback=e.formatter,e.fields||(t.tooltip.fields=[this.options.angleField,this.options.radiusField]),this.options.seriesField&&t.tooltip.fields.push(this.options.seriesField))},r.prototype.label=function(){var t=this.options;if(t.label.visible===!1){this.point&&(this.point.label=!1),this.line&&(this.line.label=!1),this.area&&(this.area.label=!1);return}var e=Ni("label",(0,V.__assign)({fields:[t.radiusField],cfg:{type:"polar",autoRotate:!1},plot:this},t.label));this.point?this.point.label=e:this.line?this.line.label=e:this.area&&(this.area.label=e)},r.prototype.annotation=function(){},r.prototype.animation=function(){i.prototype.animation.call(this);var t=this.options;t.animation===!1&&(this.area&&(this.area.animate=!1),this.line&&(this.line.animate=!1),this.point&&(this.point.animate=!1))},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,C)},r}(Un),II=ty;ln("radar",ty);var kI=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="radar",i.prototype.createLayers.call(this,e)},r.prototype.getAngleScale=function(){var t=this.layers[0];return t.getAngleScale()},r.prototype.getRadiusScale=function(){var t=this.layers[0];return t.getRadiusScale()},r.prototype.getColorScale=function(){var t=this.layers[0];return t.getColorScale()},r.getDefaultOptions=II.getDefaultOptions,r}(Kr),ey=kI,BI=p(89810),DI=p(79189),FI=function(){function i(r){var t=this.getDefaultOptions();this.options=(0,f.deepMix)(t,r,{}),this.x=this.options.x,this.y=this.options.y,this.html=this.options.html,this.container=this.options.container}return i.prototype.render=function(){if((0,f.isElement)(this.container)){this.wrapperNode=(0,Et.Z)('<div class="g2plot-htmlStatistic"></div>'),this.container.appendChild(this.wrapperNode),(0,It.Z)(this.wrapperNode,{position:"absolute",pointerEvents:"none"});var r=this.html;this.wrapperNode.appendChild(r),this.setDomPosition(this.x,this.y)}},i.prototype.updateHtml=function(r){(0,f.isType)(r,"HTMLDivElement")?(this.wrapperNode.innerHTML="",this.wrapperNode.appendChild(r)):this.wrapperNode.innerHTML=r,this.setDomPosition(this.x,this.y)},i.prototype.updatePosition=function(r,t){this.x=r,this.y=t,this.setDomPosition(r,t)},i.prototype.destroy=function(){this.container.removeChild(this.wrapperNode)},i.prototype.getDefaultOptions=function(){return{x:0,y:0,width:0,height:0,html:"",container:null,alignX:"middle",alignY:"middle"}},i.prototype.setDomPosition=function(r,t){var e=r,n=t,a=(0,BI.Z)(this.wrapperNode),o=(0,DI.Z)(this.wrapperNode);this.options.alignX==="middle"&&(e=r-a/2),this.options.alignY==="middle"&&(n=t-o/2),(0,It.Z)(this.wrapperNode,{top:Math.round(n)+"px",left:Math.round(e)+"px",transform:a>0?"none":"translate(-50%, -50%)"})},i}(),ry=FI,RI="color:#4d4d4d;font-size:14px;text-align:center;line-height:2;font-family:'-apple-system',BlinkMacSystemFont,'SegoeUI',Roboto,'HelveticaNeue',Helvetica,'PingFangSC','HiraginoSansGB','MicrosoftYaHei',SimSun,'sans-serif';pointer-events:none;",NI="font-size:32px;font-weight:bold;color:#4D4D4D";function GI(i,r){var t='<span class="liquid-guide-value" style='+NI+">"+i+"</span>";return'<div class="liquid-guide-html '+r+'" style='+RI+">"+t+"</div>"}var YI=function(i){(0,V.__extends)(r,i);function r(t){var e=i.call(this,t)||this;return e.view=t.view,e.plot=t.plot,e.statisticClass=t.statisticClass,e.adjustOptions(),e}return r.prototype.getTotalHtmlString=function(){var t=document.createElement("div"),e=this.plot.options,n=e.value,a=n===void 0?0:n,o=e.statistic;if(o&&!o.visible)return t;var s=this.options.htmlContent(a);return(0,f.isType)(s,"HTMLDivElement")?t.appendChild(s):t.innerHTML=GI(s,this.statisticClass),t},r.prototype.adjustOptions=function(){this.html=this.getTotalHtmlString();var t=this.view.coordinateBBox,e=t.minX,n=t.minY,a=t.width,o=t.height;this.x=e+a/2,this.y=n+o/2},r}(ry),zI=YI,XI={liquid:"intervl",statistic:"annotation-text"},VI=Ai(XI);(0,f.assign)(dn,VI);var ny=ji(),iy={splitPoints:function(i){var r=[],t=i.x,e=i.y;return e=(0,f.isArray)(e)?e:[e],(0,f.each)(e,function(n,a){var o={x:(0,f.isArray)(t)?t[a]:t,y:n};r.push(o)}),r},addFillAttrs:function(i,r){r.color&&!i.fill&&(i.fill=r.color),(0,f.isNumber)(r.opacity)&&(i.opacity=i.fillOpacity=r.opacity)},addStrokeAttrs:function(i,r){r.color&&!i.stroke&&(i.stroke=r.color),(0,f.isNumber)(r.opacity)&&(i.opacity=i.strokeOpacity=r.opacity)}},ch={lerp:function(i,r,t){return(1-t)*i+t*r}},HI=function(i){var r={lineWidth:0,fill:ny.color,fillOpacity:.85},t=(0,f.mix)({},r,i.style);return iy.addFillAttrs(t,i),i.color&&!t.stroke&&(t.stroke=t.stroke||i.color),t},WI=function(i){var r={fill:"#fff",stroke:ny.color,fillOpacity:0,lineWidth:2},t=(0,f.mix)({},r,i.style);return iy.addStrokeAttrs(t,i),t};function jI(i,r,t,e){return r===0?[[i+1/2*t/Math.PI/2,e/2],[i+1/2*t/Math.PI,e],[i+t/4,e]]:r===1?[[i+1/2*t/Math.PI/2*(Math.PI-2),e],[i+1/2*t/Math.PI/2*(Math.PI-1),e/2],[i+t/4,0]]:r===2?[[i+1/2*t/Math.PI/2,-e/2],[i+1/2*t/Math.PI,-e],[i+t/4,-e]]:[[i+1/2*t/Math.PI/2*(Math.PI-2),-e],[i+1/2*t/Math.PI/2*(Math.PI-1),-e/2],[i+t/4,0]]}function UI(i,r,t,e,n,a,o){for(var s=Math.ceil(2*i/t*4)*2,l=[],u=e;u<-Math.PI*2;)u+=Math.PI*2;for(;u>0;)u-=Math.PI*2;u=u/Math.PI/2*t;var h=a-i+u-i*2;l.push(["M",h,r]);for(var c=0,v=0;v<s;++v){var x=v%4,M=jI(v*t/4,x,t,n);l.push(["C",M[0][0]+h,-M[0][1]+r,M[1][0]+h,-M[1][1]+r,M[2][0]+h,-M[2][1]+r]),v===s-1&&(c=M[2][0])}return l.push(["L",c+h,o+i]),l.push(["L",h,o+i]),l.push(["L",h,r]),l}function ZI(i,r,t,e,n,a,o,s){for(var l=o.getBBox(),u=l.maxX-l.minX,h=l.maxY-l.minY,c=5e3,v=0;v<e;v++){var x=e<=1?0:v/(e-1),M=a.addShape("path",{attrs:{path:UI(s,l.minY+h*t,u/4,0,u/ch.lerp(56,64,x),i,r),fill:n,opacity:ch.lerp(.6,.3,x)}}),k=Uo([["t",u/2,0]]);M.animate({matrix:k},{duration:ch.lerp(c,.7*c,x),repeat:!0})}}xn("interval","liquid-fill-gauge",{draw:function(i,r){var t=.5,e=Infinity;(0,f.each)(i.points,function(v){v.x<e&&(e=v.x)});var n=.5,a=this.parsePoint({x:n,y:t}),o=this.parsePoint({x:e,y:.5}),s=a.x-o.x,l=Math.min(s,o.y),u=HI(i).fill,h=r.addGroup({name:"waves",attrs:{x:a.x,y:a.y}});h.setClip({type:"circle",attrs:{x:a.x,y:a.y,r:l}});var c=h.get("clipShape");return ZI(a.x,a.y,1-i.points[1].y,3,u,h,c,l*4),r.addShape("circle",{name:"wrap",attrs:(0,f.mix)(WI(i),{x:a.x,y:a.y,r:l,fill:"transparent"})}),h[0]}});function ay(i,r){var t=i.get("parent"),e=t.getBBox(),n=Math.min(Math.max(0,(0,f.get)(r,"factor",.5)),1),a=(0,f.get)(r,"delay",0),o=(0,f.get)(r,"duration",800),s=r.callback,l=(e.minX+e.maxX)/2,u=e.maxY,h=t.find(function(k){return k.get("name")=="wrap"}),c=h.attr("opacity");h.attr("opacity",0),h.animate({opacity:c},o*n,"easeLinear",null,a);var v=t.find(function(k){return k.get("name")=="waves"}),x=(0,f.clone)(v.attr("matrix"))||[1,0,0,0,1,0,0,0,1],M=Uo(x,[["t",-l,-u],["s",1,0],["t",l,u]]);v.setMatrix(M),v.animate({matrix:x},o,r.easing,function(){return s&&s(t,h,v)},a)}ay.animationName="liquidMoveIn",hi("liquidMoveIn",ay);var KI={column:"interval"},$I={interval:"liquid"},oy=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="liquid",t.shouldFadeInAnnotation=!0,t}return r.getDefaultOptions=function(){var t={padding:[0,0,0,0],animation:{factor:.4,easing:"easeExpOut",duration:800},liquidStyle:{lineWidth:2},color:"#6a99f9",interactions:[],statistic:{visible:!0}};return(0,f.deepMix)({},i.getDefaultOptions.call(this),t)},r.prototype.beforeInit=function(){var t=this.options,e=t.min,n=t.max,a=t.value;if(!(0,f.isNumber)(e))throw new Error("The min value of Liquid is required, and the type of min must be Number.");if(!(0,f.isNumber)(n))throw new Error("The max value of Liquid is required, and the type of max must be Number.");if(!(0,f.isNumber)(a))throw new Error("The value of Liquid is required, and the type of value must be Number.")},r.prototype.init=function(){this.options.data=[{}],i.prototype.init.call(this)},r.prototype.coord=function(){},r.prototype.scale=function(){var t=this.options,e=t.min,n=t.max,a={value:{}};bi(a.value,{min:Math.min(e,n),max:Math.max(e,n)}),this.setConfig("scales",a),i.prototype.scale.call(this)},r.prototype.axis=function(){this.setConfig("axes",!1)},r.prototype.adjustLiquid=function(t){var e=this.options;t.shape={values:["liquid-fill-gauge"]},t.tooltip=!1;var n=e.liquidStyle;(0,f.isFunction)(n)&&(n=n()),n&&(t.style=n)},r.prototype.addGeometry=function(){var t=ri("interval","main",{positionFields:[1,"value"],plot:this});this.adjustLiquid(t);var e=this.getViewRange(),n=Math.min(e.width,e.height)*.8,a=this.options.liquidSize?this.options.liquidSize:n;t.size={values:[a]},this.liquid=t,this.setConfig("geometry",t)},r.prototype.animation=function(){var t=this.options;if(t.animation===!1)this.liquid.animate=!1;else{var e=(0,f.get)(t,"animation.factor"),n=(0,f.get)(t,"animation.easing"),a=(0,f.get)(t,"animation.duration");this.liquid.animate={appear:{animation:"liquidMoveIn",factor:e,easing:n,duration:a}}}},r.prototype.geometryParser=function(t,e){return t==="g2"?KI[e]:$I[e]},r.prototype.annotation=function(){var t=[],e=this.extractStatistic();t.push(e),this.setConfig("annotations",t)},r.prototype.useHtmlContent=function(){var t=this.options,e=t.statistic||{};return(0,f.isFunction)(e.htmlContent)},r.prototype.extractStatistic=function(){if(!this.useHtmlContent()){var t=this.options,e=t.statistic||{},n;(0,f.isFunction)(e.formatter)?n=e.formatter(t.value):n=""+t.value;var a,o;if(n){var s=Math.min(this.width,this.height);a=s/n.length*.5,o=Math.max(1,Math.ceil(.025*a))}var l;if(e.visible!==!1){var u=(0,f.deepMix)({style:{fontSize:a,shadowBlur:o}},{top:!0,content:n,type:"text",position:["50%","50%"],style:{opacity:l,fill:"transparent",shadowColor:"transparent",textAlign:"center"}},e);return delete u.visible,delete u.formatter,delete u.adjustColor,u}}},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,T)},r.prototype.afterRender=function(){var t;((t=this.options.statistic)===null||t===void 0?void 0:t.visible)&&!this.useHtmlContent()&&this.fadeInAnnotation();var e=this.options,n=e.padding?e.padding:this.config.theme.padding;if(e.defaultState&&n!=="auto"&&this.stateController.defaultStates(e.defaultState),n==="auto"&&this.paddingController.processAutoPadding(),this.useHtmlContent()){var a=this.canvas.get("container");if(this.statistic&&a.removeChild(this.statistic.wrapperNode),this.options.statistic&&this.options.statistic.visible){var o=this.canvas.get("container");(0,It.Z)(o,{position:"relative"}),this.statistic=new zI((0,V.__assign)({container:o,view:this.view,plot:this},this.options.statistic)),this.statistic.render()}i.prototype.afterRender.call(this)}},r.prototype.processData=function(){var t=this.options;return[{_:"_",value:t.value}]},r.prototype.changeValue=function(t){var e=this.options;e.value=t,this.changeData([])},r.prototype.fadeInAnnotation=function(){var t=this,e=this.options,n=this.view.foregroundGroup.findAll(function(s){return s.get("name")==="annotation-text"})[0],a=e.animation||{},o=this.calcAnnotationColorStyle();this.shouldFadeInAnnotation?n.animate(o,a.duration*Math.min(1,1.5*a.factor),null,function(){t.shouldFadeInAnnotation=!1}):(0,f.forIn)(o,function(s,l){return n.attr(l,s)})},r.prototype.calcAnnotationColorStyle=function(){var t=this.options,e={fill:"#f6f6f6",shadowColor:"black"},n={fill:"#303030",shadowColor:"white"};if((0,f.get)(t,"statistic.adjustColor")===!1)return{fill:(0,f.get)(t,"statistic.style.fill",n.fill),shadowColor:(0,f.get)(t,"statistic.style.shadowColor",n.shadowColor)};var a=t.min,o=t.max,s=t.value;a=Math.min(a,o),o=Math.max(a,o);var l;if(a==o?l=1:l=(s-a)/(o-a),l>.55){var u=this.options.color,h=.8,c=to(u),v=Math.round(c[0]*.299+c[1]*.587+c[2]*.114)/h;return v<156?e:n}return n},r.prototype.updateConfig=function(t){i.prototype.updateConfig.call(this,t),this.shouldFadeInAnnotation=!0},r.prototype.getViewRange=function(){var t=i.prototype.getViewRange.call(this),e=this.options.liquidStyle,n=e.lineWidth?e.lineWidth:2,a=t.minX,o=t.minY,s=t.width,l=t.height,u=Math.min(s,l)-n*2,h=a+s/2,c=o+l/2,v=h-u/2,x=c-u/2;return new Jr(v,x,u,u)},r}(Un),vh=oy;ln("liquid",oy);var QI=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="liquid",i.prototype.createLayers.call(this,e)},r.prototype.changeValue=function(t,e){if(e===void 0&&(e=!1),e)this.eachLayer(function(a){a instanceof vh&&a.changeValue(t)});else{var n=this.layers[0];n instanceof vh&&n.changeValue(t)}},r.getDefaultOptions=vh.getDefaultOptions,r}(Kr),sy=QI,ly=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="histogram",t}return r.prototype.init=function(){this.options.xField="range",this.options.yField="count",i.prototype.init.call(this)},r.prototype.processData=function(t){var e=this,n=this.options,a=n.binField,o=n.binWidth,s=n.binNumber,l=(0,f.clone)(t);(0,f.sortBy)(l,a);var u=(0,f.valuesOfKey)(l,a),h=(0,f.getRange)(u),c=h.max-h.min,v=o;if(!o&&s&&(v=c/s),!o&&!s){var x=vd(u);v=c/x}var M={};(0,f.each)(l,function(R){var G=R[a],N=e.getBin(G,v),ot=N[0]+"-"+N[1];(0,f.hasKey)(M,ot)||(M[ot]={name:ot,range:N,count:0,data:[]}),M[ot].data.push(R),M[ot].count+=1});var k=[];return(0,f.each)(M,function(R){k.push(R)}),k},r.prototype.scale=function(){i.prototype.scale.call(this);var t=this.config.scales.range;t.nice=!1,t.type="linear"},r.prototype.getBin=function(t,e){var n=Math.floor(t/e);return[e*n,e*(n+1)]},r}(Qo),JI=ly;ln("histogram",ly);var qI=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="histogram",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=JI.getDefaultOptions,r}(Kr),uy=qI,tk={epanechnikov:function(i){return Math.abs(i)<=1?.75*(1-i*i):0},gaussian:function(i){return 1/Math.sqrt(Math.PI*2)*Math.exp(-.5*Math.pow(i,2))},uniform:function(i){return Math.abs(i)<=1?.5:0},triangle:function(i){return Math.abs(i)<=1?1-Math.abs(i):0},quartic:function(i){var r=1-i*i;return Math.abs(i)<=1?15/16*r*r:0},triweight:function(i){var r=1-i*i;return Math.abs(i)<=1?15/16*Math.pow(r,3):0},cosinus:function(i){var r=Math.PI/4*Math.cos(.5*Math.PI*i);return Math.abs(i)<=1?r:0}},fy=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="density",t}return r.prototype.init=function(){var t=this.options.xAxis?(0,f.clone)(this.options.xAxis):{};this.options.xField="value",this.options.yField="density",this.options.xAxis=(0,f.deepMix)({},t,{type:"linear"}),this.options.smooth=!0,i.prototype.init.call(this)},r.prototype.processData=function(t){var e=this,n=this.options,a=n.binField,o=n.binWidth,s=n.binNumber,l=n.kernel,u=l||"epanechnikov",h=tk[u],c=(0,f.clone)(t);(0,f.sortBy)(c,a);var v=(0,f.valuesOfKey)(c,a),x=(0,f.getRange)(v),M=x.max-x.min,k=s,R=o;!s&&o&&(k=Math.floor(M/o)),!o&&s&&(R=M/s),!s&&!o&&(k=vd(v),R=M/s);var G=(0,Or.getScale)("linear"),N=new G({min:x.min,max:x.max,tickCount:k,nice:!1}),ot=N.getTicks(),ut=[];return(0,f.each)(ot,function(Mt){var zt=e.kernelDensityEstimator(R,h,Mt,v);ut.push({value:Mt.text,density:zt})}),ut},r.prototype.kernelDensityEstimator=function(t,e,n,a){var o=0;return(0,f.each)(a,function(s){var l=(n.tickValue-s)/t;o+=e(l)}),a.length===0?0:o/a.length},r}(qf),ek=fy;ln("density",fy);var tY=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="density",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=ek.getDefaultOptions,r}(Kr),eY=null,rk={ring:"interval"},nk=Ai(rk);(0,f.assign)(dn,nk);var ik="color:#4d4d4d;font-size:14px;text-align:center;line-height:2;font-family:'-apple-system',BlinkMacSystemFont,'SegoeUI',Roboto,'HelveticaNeue',Helvetica,'PingFangSC','HiraginoSansGB','MicrosoftYaHei',SimSun,'sans-serif';pointer-events:none;",ak="font-weight:300;white-space: nowrap;text-overflow: ellipsis;",ok="font-size:32px;font-weight:bold;color:#4D4D4D";function sk(i,r,t,e){var n=ik+"width:"+e+"px;",a=i?'<span class="ring-guide-name" style='+ak+">"+i+"</span><br/>":"",o='<span class="ring-guide-value" style='+ok+">"+r+"</span>";return'<div class="ring-guide-html '+t+'" style='+n+">"+a+o+"</div>"}var lk=function(i){(0,V.__extends)(r,i);function r(t){var e=i.call(this,t)||this;return e.view=t.view,e.plot=t.plot,e.statisticClass=t.statisticClass,e.adjustOptions(),e}return r.prototype.triggerOn=function(){var t=this,e=this.options.triggerOn;this.view.on("interval:"+e,(0,f.debounce)(function(a){var o=t.parseStatisticData("item",a.data.data,a.data.color),s=t.getStatisticHtmlString(o);t.updateHtml(s)},150));var n=this.options.triggerOff?this.options.triggerOff:"mouseleave";this.view.on("interval:"+n,(0,f.debounce)(function(){var a=t.getTotalHtmlString();t.updateHtml(a)},150))},r.prototype.getTotalHtmlString=function(){var t;if(this.options.content)t=this.options.content;else{var e=this.getTotalValue();t=this.parseStatisticData("total",e)}var n;this.options.htmlContent?n=this.options.htmlContent(t,this.getStatisticSize()):n=this.getStatisticTemplate(t);var a=document.createElement("div");return(0,f.isType)(n,"HTMLDivElement")?a.appendChild(n):a.innerHTML=n,a},r.prototype.adjustOptions=function(){this.html=this.getTotalHtmlString();var t=this.view.coordinateBBox,e=t.minX,n=t.minY,a=t.width,o=t.height;this.x=e+a/2,this.y=n+o/2},r.prototype.getTotalValue=function(){var t,e=0,n=this.plot.options,a=n.angleField,o=n.colorField,s=this.options.totalLabel;(0,f.each)(this.plot.options.data,function(u){typeof u[a]=="number"&&(e+=u[a])});var l=(t={},t[a]=e,t[o]=s,t);return l},r.prototype.parseStatisticData=function(t,e,n){var a=this.plot,o=a.options,s=o.angleField,l=o.colorField,u=a.getScaleByField(s),h=a.getScaleByField(l),c={name:h?h.getText(e[l]):null,value:u.getText(e[s])};return t==="item"&&(c.itemData=e,c.color=n),c},r.prototype.getStatisticTemplate=function(t){var e=this.getStatisticSize(),n=sk(t.name,t.value,this.statisticClass,e);return n},r.prototype.getStatisticSize=function(){var t=this.plot.view.coordinateBBox,e=this.plot.options,n=e.radius,a=e.innerRadius,o=Math.min(t.width,t.height),s=o*n*a;return s},r.prototype.getStatisticHtmlString=function(t){var e=this.options.htmlContent,n;return e?n=e(t,this.getStatisticSize()):n=this.getStatisticTemplate(t),n},r}(ry),uk=lk,fk={ring:"interval"},hk={interval:"ring"},hy=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="donut",t}return r.getDefaultOptions=function(){return(0,f.deepMix)({},i.getDefaultOptions.call(this),{radius:.8,innerRadius:.64,tooltip:{visible:!1},statistic:{visible:!0,totalLabel:"\u603B\u8BA1",triggerOn:"mouseenter",triggerOff:"mouseleave"}})},r.prototype.beforeInit=function(){i.prototype.beforeInit.call(this),r.centralId++,this.statisticClass="statisticClassId"+r.centralId,this.adjustLabelDefaultOptions()},r.prototype.afterRender=function(){var t=this.canvas.get("container");if(this.statistic&&(t.removeChild(this.statistic.wrapperNode),this.statistic=null),this.options.statistic&&this.options.statistic.visible){var e=this.canvas.get("container");(0,It.Z)(e,{position:"relative"}),this.statistic=new uk((0,V.__assign)({container:e,view:this.view,plot:this,statisticClass:this.statisticClass},this.options.statistic)),this.statistic.render(),this.options.statistic.triggerOn&&this.statistic.triggerOn()}i.prototype.afterRender.call(this)},r.prototype.destroy=function(){this.statistic&&this.statistic.destroy(),i.prototype.destroy.call(this)},r.prototype.geometryParser=function(t,e){return t==="g2"?fk[e]:hk[e]},r.prototype.coord=function(){var t=this.options,e={type:"theta",cfg:{radius:t.radius,innerRadius:t.innerRadius}};this.setConfig("coordinate",e)},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,B)},r.prototype.adjustLabelDefaultOptions=function(){var t=this.options.label;if(t&&t.type==="inner"){var e=t.style||{};e.textAlign||(e.textAlign="center"),t.style=e,t.offset||(t.offset=(this.options.innerRadius-1)/2*100+"%")}},r.centralId=0,r}(Dg),cy=hy;ln("donut",hy);var ck=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="donut",i.prototype.createLayers.call(this,e)},r.prototype.getAngleScale=function(){var t=this.layers[0];return t.getAngleScale()},r.getDefaultOptions=cy.getDefaultOptions,r}(Kr),vy=ck;function vk(i,r,t){var e=i.style,n=i.defaultStyle,a=i.color,o=(0,V.__assign)((0,V.__assign)({},n),e);return a&&(r&&(o.stroke=a),t&&(o.fill=a)),o}function dk(i){var r=[],t=i[0];r.push(["M",t.x,t.y]);for(var e=1,n=i.length;e<n;e++)r.push(["L",i[e].x,i[e].y]);return r.push(["L",t.x,t.y]),r.push(["z"]),r}xn("interval","waterfall",{draw:function(i,r){var t=vk(i,!1,!0),e=this.parsePath(dk(i.points)),n=r.addShape("path",{attrs:(0,V.__assign)((0,V.__assign)({},t),{path:e}),name:"interval"}),a=(0,f.get)(i.style,"leaderLine");if(a&&a.visible){var o=a.style||{};if(i.nextPoints){var s=[["M",i.points[2].x,i.points[2].y],["L",i.nextPoints[0].x,i.nextPoints[0].y]];s=this.parsePath(s),r.addShape("path",{attrs:(0,V.__assign)({path:s,stroke:"#d3d3d3",lineDash:[4,2],lineWidth:1},o),name:"leader-line"})}}return n}});var dy=2,pk=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.adjustLabel=function(t,e){var n,a,o=e.shape,s=o.getBBox(),l=e.getData(),u=l[va],h=l[this.layer.options.yField],c=(0,f.isArray)(u)?u[1]:u,v=this.options.formatter,x=[].concat(e.getModel().mappingData),M=v?x[0]&&x[0]._origin[zl]:0,k=v?v(c,(n={},n[ws]=(a=x[0])===null||a===void 0?void 0:a._origin,n.mappingDatum=x[0],n.mappingDatumIndex=0,n.element=e,n.elementIndex=M,n),M):c,R=(s.minY+s.maxY)/2,G="bottom";h<0?(R=s.maxY+dy,G="top"):R=s.minY-dy,t.attr("y",R),t.attr("text",k),t.attr("textBaseline",G)},r}(rh),rY=null;na("waterfall",pk);function gk(){return{fill:"#fff",fontSize:12,lineHeight:12,stroke:"rgba(0, 0, 0, 0.45)"}}var yk=function(){function i(r){this.textAttrs={},this.view=r.view,this.fields=r.fields,this.formatter=r.formatter,this.textAttrs=(0,f.mix)(gk(),r.style),this._init()}return i.prototype.draw=function(){var r=this;if(!(!this.view||this.view.destroyed)){var t=(0,f.clone)(this.view.getData());this.container=this.view.foregroundGroup.addGroup();var e=this.view.geometries[0].elements.map(function(n){return n.shape});(0,f.each)(e,function(n,a){if(!!n.cfg.origin){var o=n.cfg.origin.data,s=n.getBBox(),l=o[va],u=l;(0,f.isArray)(l)&&(u=l[1]-l[0]),u=u>0?"+"+u:u,o[dh]&&(u=l[0]-l[1]);var h=u;if(r.formatter){var c=e[a].attr("fill");h=r.formatter(""+u,{_origin:t[a],color:c},a)}var v=r.container.addShape("text",{attrs:(0,V.__assign)({text:h,textBaseline:"middle",textAlign:"center",x:(s.minX+s.maxX)/2,y:(s.minY+s.maxY)/2},r.textAttrs),name:"dill-label"});v.getBBox().height>s.height&&v.set("visible",!1)}}),this.view.getCanvas().draw()}},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype._init=function(){var r=this;this.view.on(wn.VIEW_LIFE_CIRCLE.BEFORE_RENDER,function(){r.clear()}),this.view.on(wn.VIEW_LIFE_CIRCLE.AFTER_RENDER,function(){r.draw()})},i}(),mk=yk,xk={waterfall:"interval"},bk={interval:"waterfall"},va="$$value$$",dh="$$total$$",zl="$$index$$",py=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="watarfall",t}return r.getDefaultOptions=function(){return(0,f.deepMix)({},i.getDefaultOptions.call(this),{legend:{visible:!1,position:"bottom"},label:{visible:!0,adjustPosition:!0},diffLabel:{visible:!0},leaderLine:{visible:!0},showTotal:{visible:!0,label:"\u603B\u8BA1\u503C"},waterfallStyle:{lineWidth:0},tooltip:{visible:!0,shared:!0,showCrosshairs:!1,showMarkers:!1}})},r.prototype.getOptions=function(t){var e=i.prototype.getOptions.call(this,t);return this.adjustLegendOptions(e),this.adjustMeta(e),e},r.prototype.afterInit=function(){i.prototype.afterInit.call(this);var t=this.options;t.diffLabel&&t.diffLabel.visible?this.diffLabel=new mk({view:this.view,fields:[t.xField,t.yField,va],formatter:t.diffLabel.formatter,style:t.diffLabel.style}):this.diffLabel&&(this.diffLabel.clear(),this.diffLabel=null)},r.prototype.afterRender=function(){i.prototype.afterRender.call(this);var t=this.options;this.view.on("tooltip:change",function(e){for(var n=e.items,a=0;a<n.length;a++){var o=n[a],s=(0,f.get)(o,"data",{});if(o.name=s[t.xField],o.value=s[t.yField],!o.value&&s[dh]){var l=s[va];o.value=l[0]-l[1]}e.items[a]=o}}),this.renderLabel()},r.prototype.renderLabel=function(){var t=po(this.view,"interval");this.options.label&&this.options.label.visible&&this.doRenderLabel(t,(0,V.__assign)({type:"waterfall"},this.options.label))},r.prototype.geometryParser=function(t,e){return t==="g2"?xk[e]:bk[e]},r.prototype.interaction=function(){this.setConfig("interactions",[{type:"tooltip"},{type:"active-region"}])},r.prototype.addGeometry=function(){var t=this.options,e={type:"interval",position:{fields:[t.xField,va]},shape:{values:["waterfall"]}};e.style=this._parseStyle(),e.color=this._parseColor(),this.waterfall=e,this.options.tooltip&&(this.options.tooltip.fields||this.options.tooltip.formatter)&&this.geometryTooltip(),this.setConfig("geometry",e)},r.prototype.processData=function(t){var e,n=[],a=this.options.xField,o=this.options.yField;if((0,f.map)(t,function(u,h){var c,v=u[o];if(h>0){var x=n[h-1][va];(0,f.isArray)(x)?v=[x[1],u[o]+x[1]]:v=[x,u[o]+x]}n.push((0,V.__assign)((0,V.__assign)({},u),(c={},c[va]=v,c[zl]=h,c)))}),this.options.showTotal&&this.options.showTotal.visible){var s=(0,f.map)(t,function(u){return u[o]}),l=(0,f.reduce)(s,function(u,h){return u+h},0);n.push((e={},e[a]=this.options.showTotal.label,e[o]=null,e[va]=[l,0],e[zl]=n.length,e[dh]=!0,e))}return n},r.prototype.scale=function(){var t=this.options,e={};e[t.xField]={type:"cat"},(0,f.has)(t,"xAxis")&&bi(e[t.xField],t.xAxis),e[va]={},(0,f.has)(t,"yAxis")&&bi(e[va],t.yAxis),this.setConfig("scales",e)},r.prototype.axis=function(){var t=Ni("axis",{plot:this,dim:"x"}),e=Ni("axis",{plot:this,dim:"y"}),n={};n[this.options.xField]=t,n[va]=e,this.setConfig("axes",n)},r.prototype.coord=function(){},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,D)},r.prototype.geometryTooltip=function(){this.waterfall.tooltip={};var t=this.options.tooltip;t.fields&&(this.waterfall.tooltip.fields=t.fields),t.formatter&&(this.waterfall.tooltip.callback=t.formatter,t.fields||(this.waterfall.tooltip.fields=[this.options.xField,va]))},r.prototype._parseStyle=function(){var t=this.options.waterfallStyle,e=this.options.leaderLine,n={};return(0,f.isFunction)(t)?n.callback=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return Object.assign({},t.apply(void 0,a),{leaderLine:e})}:n.cfg=(0,V.__assign)((0,V.__assign)({},t),{leaderLine:e}),n},r.prototype._parseColor=function(){var t=this,e=this.options,n=this.options,a=n.xField,o=n.yField,s={fields:[a,o,va,zl]};if((0,f.isFunction)(e.color))s.callback=e.color;else{var l="#f4664a",u="#30bf78",h="rgba(0, 0, 0, 0.25)";if((0,f.isString)(e.color))l=u=h=e.color;else if((0,f.isObject)(e.color)){var c=e.color,v=c.rising,x=c.falling,M=c.total;l=v,u=x,h=M}s.callback=function(k,R,G,N){return N===t.options.data.length?h||(G[0]>=0?l:u):((0,f.isArray)(G)?G[1]-G[0]:G)>=0?l:u}}return s},r.prototype.adjustLegendOptions=function(t){var e=t.legend;e&&(e.visible=!1)},r.prototype.adjustMeta=function(t){var e=t.meta;if(e){var n=e?e[t.yField]:{};n.alias=n.alias||t.yField,t.meta[va]=n}},r}(Un),wk=py;ln("waterfall",py);var Sk=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="waterfall",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=wk.getDefaultOptions,r}(Kr),gy=Sk,Ck=function(){function i(r){this.quadrantGroups=[],this.regionData=[],this.lineData=[],this.options=r,this.view=this.options.view,this.init()}return i.prototype.init=function(){var r=this.options,t=r.xBaseline,e=r.yBaseline,n=this.view.getCoordinate(),a=this.view.getScaleByField(this.options.plotOptions.xField),o=this.view.getScaleByField(this.options.plotOptions.yField),s;if(t>a.min&&t<a.max){var l=(t-a.min)/(a.max-a.min);s=[new Jr(n.start.x,n.end.y,n.getWidth()*l,n.getHeight()),new Jr(n.start.x+n.getWidth()*l,n.end.y,n.getWidth()*(1-l),n.getHeight())];var u={start:{x:n.start.x+n.getWidth()*l,y:n.end.y},end:{x:n.start.x+n.getWidth()*l,y:n.start.y}};this.lineData.push(u)}else s=[new Jr(n.start.x,n.end.y,n.getWidth(),n.getHeight())];if(e>o.min&&e<o.max){var l=(e-o.min)/(o.max-o.min),h={start:{x:n.start.x,y:n.start.y-n.getHeight()*l},end:{x:n.end.x,y:n.start.y-n.getHeight()*l}};this.lineData.push(h);var c={name:t<=a.min?"top-right":"top-left",bbox:new Jr(s[0].minX,s[0].minY,s[0].width,s[0].height*(1-l)),index:t<=a.min?2:0};this.regionData.push(c);var v={name:t<=a.min?"bottom-right":"bottom-left",bbox:new Jr(s[0].minX,s[0].minY+s[0].height*(1-l),s[0].width,s[0].height*l),index:t<=a.min?3:1};if(this.regionData.push(v),s.length>1){var x={name:"top-right",bbox:new Jr(s[1].minX,s[1].minY,s[1].width,s[1].height*(1-l)),index:2};this.regionData.push(x);var M={name:"bottom-right",bbox:new Jr(s[1].minX,s[1].minY+s[1].height*(1-l),s[1].width,s[1].height*l),index:3};this.regionData.push(M)}}else if(s.length===2)if(e<=o.min){var k={name:"top-left",bbox:s[0],index:0};this.regionData.push(k);var x={name:"top-right",bbox:s[1],index:2};this.regionData.push(x)}else{var R={name:"bottom-left",bbox:s[0],index:1};this.regionData.push(R);var M={name:"bottom-right",bbox:s[1],index:3};this.regionData.push(M)}else if(t<=a.min)if(e<=o.min){var x={name:"top-right",bbox:s[0],index:2};this.regionData.push(x)}else{var M={name:"bottom-right",bbox:s[0],index:3};this.regionData.push(M)}else if(e<=o.min){var k={name:"top-left",bbox:s[0],index:0};this.regionData.push(k)}else{var R={name:"bottom-left",bbox:s[0],index:1};this.regionData.push(R)}this.container=this.view.backgroundGroup.addGroup()},i.prototype.render=function(){var r=this;if(this.regionData.length>0){var t=this.getDefaultStyle(),e=this.getRegionStyle(this.regionData);(0,f.each)(this.regionData,function(a){var o=a.index,s=r.container.addGroup(),l=s.addShape("rect",{attrs:(0,V.__assign)({x:a.bbox.minX,y:a.bbox.minY,width:a.bbox.width,height:a.bbox.height},e[o]),name:"quadrant"});if(r.options.label&&r.options.label.text){var u=(0,f.deepMix)({},t.label,r.options.label),h=r.getLabelConfig(a,u);s.addShape("text",{attrs:(0,V.__assign)({},h),name:"quadrant-label"})}l.set("data",a),r.quadrantGroups.push(s)});var n=(0,f.deepMix)({},t.line,this.options.lineStyle);(0,f.each)(this.lineData,function(a){r.container.addShape("path",{attrs:(0,V.__assign)({path:[["M",a.start.x,a.start.y],["L",a.end.x,a.end.y]]},n),name:"quadrant-line"})}),this.view.canvas.draw()}},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.destroy=function(){this.container&&this.container.remove()},i.prototype.getDefaultStyle=function(){return{line:{stroke:"#9ba29a",lineWidth:1},regionStyle:[{fill:"#000000",opacity:.05},{fill:"#ffffff",opacity:0},{fill:"#ffffff",opacity:0},{fill:"#000000",opacity:.05}],label:{position:"outter-inner",offset:10,style:{fontSize:14,fill:"#ccc"}}}},i.prototype.getRegionStyle=function(r){var t=this.getDefaultStyle(),e=t.regionStyle;if(this.options.regionStyle){var n=this.options.regionStyle;(0,f.isArray)(n)?e=e.map(function(a,o){return n.length>o&&n[o]?n[o]:a}):(0,f.isFunction)(n)&&(0,f.each)(r,function(a,o){e[o]=n(a)})}return e},i.prototype.getLabelConfig=function(r,t){var e=r.index,n=0,a=0,o={},s=t.text;(0,f.isFunction)(s)?s=s(r):(0,f.isArray)(s)&&(s=s[e]);var l=t.position,u=l.split("-"),h=r.name.split("-");return h[1]==="left"?(u[0]==="inner"&&(n=r.bbox.maxX-t.offset,o.textAlign="right"),u[0]==="outter"&&(n=r.bbox.minX+t.offset,o.textAlign="left")):h[1]==="right"&&(u[0]==="inner"&&(n=r.bbox.minX+t.offset,o.textAlign="left"),u[0]==="outter"&&(n=r.bbox.maxX-t.offset,o.textAlign="right")),h[0]==="top"?(u[1]==="inner"&&(a=r.bbox.maxY-t.offset,o.textBaseline="bottom"),u[1]==="outter"&&(a=r.bbox.minY+t.offset,o.textBaseline="top")):h[0]==="bottom"&&(u[1]==="inner"&&(a=r.bbox.minY+t.offset,o.textBaseline="top"),u[1]==="outter"&&(a=r.bbox.maxY-t.offset,o.textBaseline="bottom")),o=(0,f.deepMix)({},t.style,o),o.lineHeight=o.fontSize,(0,V.__assign)({x:n,y:a,text:s},o)},i}(),Mk=Ck,Bo=p(56645),Ek={exp:Bo.regressionExp,linear:Bo.regressionLinear,loess:Bo.regressionLoess,log:Bo.regressionLog,poly:Bo.regressionPoly,pow:Bo.regressionPow,quad:Bo.regressionQuad};function _k(i,r){return Math.sqrt(i*(1-i)/r)*1.96}var Ak=function(){function i(r){var t={type:"linear",style:{stroke:"#9ba29a",lineWidth:2,opacity:.5,lineJoin:"round",lineCap:"round"},showConfidence:!1,confidenceStyle:{fill:"#ccc",opacity:.1}};this.options=(0,f.deepMix)({},t,r),this.view=this.options.view,this.init()}return i.prototype.init=function(){var r=this.options.plotOptions,t=r.xField,e=r.yField,n=r.data,a=Ek[this.options.type]().x(function(o){return o[t]}).y(function(o){return o[e]});this.data=this.processData(a(n)),this.container=this.view.backgroundGroup.addGroup()},i.prototype.render=function(){var r=this.view.getScaleByField(this.options.plotOptions.xField),t=this.view.getScaleByField(this.options.plotOptions.yField),e=this.view.getCoordinate(),n=this.data.trendlineData,a=(0,Or.getScale)("linear"),o=this.adjustScale(r,n,"x"),s=new a({min:o.min,max:o.max}),l=this.adjustScale(t,n,"y"),u=new a({min:l.min,max:l.max});if(this.options.showConfidence){var h=this.getConfidencePath(s,u,e);this.container.addShape("path",{attrs:(0,V.__assign)({path:h},this.options.confidenceStyle),name:"confidence"})}var c=this.getTrendlinePoints(s,u,e),v=[[0,0],[1,1]],x=Vf(c,!1,v);this.shape=this.container.addShape("path",{attrs:(0,V.__assign)({path:x},this.options.style),name:"trendline"})},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.destroy=function(){this.container&&this.container.destroy()},i.prototype.processData=function(r){var t=[],e=[];return(0,f.each)(r,function(n){t.push({x:n[0],y:n[1]});var a=_k(r.rSquared,n[1]);e.push({x:n[0],y0:n[1]-a,y1:n[1]+a})}),{trendlineData:t,confidenceData:e}},i.prototype.getTrendlinePoints=function(r,t,e){var n=[];return(0,f.each)(this.data.trendlineData,function(a){var o=r.scale(a.x),s=t.scale(a.y),l=e.start.x+e.width*o,u=e.start.y-e.height*s;n.push({x:l,y:u})}),n},i.prototype.getConfidencePath=function(r,t,e){var n=[],a=[],o=[];(0,f.each)(this.data.confidenceData,function(c){var v=r.scale(c.x),x=t.scale(c.y0),M=t.scale(c.y1),k=e.start.x+e.width*v,R=e.start.y-e.height*x,G=e.start.y-e.height*M;n.push({x:k,y:R}),a.push({x:k,y:G})});for(var s=0;s<n.length;s++){var l=s===0?"M":"L",u=n[s];!isNaN(u.x)&&!isNaN(u.y)&&o.push([l,u.x,u.y])}for(var h=a.length-1;h>0;h--){var u=a[h];!isNaN(u.x)&&!isNaN(u.y)&&o.push(["L",u.x,u.y])}return o},i.prototype.adjustScale=function(r,t,e){var n=r.min,a=r.max,o=this.options.plotOptions,s=o.data,l=o.xField,u=o.yField,h=e==="x"?l:u,c=(0,f.minBy)(s,h)[h],v=(0,f.maxBy)(s,h)[h],x=(n-c)/(v-c),M=(a-v)/(v-c),k=(0,f.minBy)(t,e)[e],R=(0,f.maxBy)(t,e)[e];return{min:k+x*(R-k),max:R+M*(R-k)}},i}(),Tk=Ak,Pk={point:"point",trendline:"trendline",confidence:"confidence",quadrant:"quadrant",quadrantLabel:"quadrant-label",quadrantLine:"quadrant-line"},Lk=Ai(Pk);(0,f.assign)(dn,Lk);var Ok=function(i){var r=i.stroke||"#000";return{stroke:r}},Ik=function(i){var r=i.stroke||"#000",t=i.lineWidth||2;return{stroke:r,lineWidth:t}},kk=function(i){var r=i.fillOpacity||i.opacity||.3;return{fillOpacity:r}};ia("scatter",{pointStyle:{normal:{},active:Ok,selected:Ik,inactive:kk}});var Bk={scatter:"point"},Dk={point:"point"},yy=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="scatter",t}return r.getDefaultOptions=function(){return(0,f.deepMix)({},i.getDefaultOptions.call(this),{pointSize:4,pointStyle:{lineWidth:1,strokeOpacity:1,fillOpacity:.95,stroke:"#fff"},xAxis:{nice:!0,grid:{visible:!0},line:{visible:!0}},yAxis:{nice:!0,grid:{visible:!0},line:{visible:!0}},tooltip:{visible:!0,shared:null,showTitle:!1,showMarkers:!1,showCrosshairs:!1},label:{visible:!1},shape:"circle"})},r.prototype.afterRender=function(){i.prototype.afterRender.call(this),this.quadrant&&this.quadrant.destroy(),this.trendline&&this.trendline.destroy(),this.options.quadrant&&this.options.quadrant.visible&&(this.quadrant=new Mk((0,V.__assign)({view:this.view,plotOptions:this.options},this.options.quadrant)),this.quadrant.render()),this.options.trendline&&this.options.trendline.visible&&(this.trendline=new Tk((0,V.__assign)({view:this.view,plotOptions:this.options},this.options.trendline)),this.trendline.render())},r.prototype.destroy=function(){this.quadrant&&(this.quadrant.destroy(),this.quadrant=null),this.trendline&&(this.trendline.destroy(),this.trendline=null),i.prototype.destroy.call(this)},r.prototype.isValidLinearValue=function(t){return(0,f.isNil)(t)?!1:!Number.isNaN(Number(t))},r.prototype.processData=function(t){var e=this,n=this.options,a=n.xField,o=n.yField,s=(0,f.get)(this.options,["xAxis","type"],"linear"),l=(0,f.get)(this.options,["yAxis","type"],"linear");if(s&&l){var u=t.filter(function(h){return!(s==="linear"&&!e.isValidLinearValue(h[a])||l==="linear"&&!e.isValidLinearValue(h[o]))}).map(function(h){var c;return(0,V.__assign)((0,V.__assign)({},h),(c={},c[a]=s==="linear"?Number(h[a]):String(h[a]),c[o]=l==="linear"?Number(h[o]):String(h[o]),c))});return u}return t},r.prototype.geometryParser=function(t,e){return t==="g2"?Bk[e]:Dk[e]},r.prototype.scale=function(){var t=this.options,e={};e[t.xField]={},(0,f.has)(t,"xAxis")&&bi(e[t.xField],t.xAxis),e[t.yField]={},(0,f.has)(t,"yAxis")&&bi(e[t.yField],t.yAxis);var n=(0,f.find)(t.interactions,function(o){return o.type==="timeline"});if(n&&(0,f.get)(n,"cfg.key")){var a=n.cfg.key;e[a]?e[a].key=!0:e[a]={key:!0}}this.setConfig("scales",e),i.prototype.scale.call(this)},r.prototype.coord=function(){},r.prototype.annotation=function(){},r.prototype.addGeometry=function(){var t=ri("point","circle",{plot:this});if(this.points=t,this.options.tooltip&&this.options.tooltip.visible){var e=this.options.tooltip,n=e.showTitle,a=e.titleField;this.extractTooltip(),this.setConfig("tooltip",(0,V.__assign)({showTitle:n,title:n?a:void 0},this.options.tooltip))}this.options.label&&this.label(),this.setConfig("geometry",t)},r.prototype.label=function(){var t=this.options;if(t.label.visible===!1){this.points&&(this.points.label=!1);return}var e=Ni("label",(0,V.__assign)((0,V.__assign)({fields:t.label.field?[t.label.field]:[t.yField]},t.label),{plot:this}));this.points&&(this.points.label=e)},r.prototype.animation=function(){i.prototype.animation.call(this);var t=this.options;t.animation===!1&&(this.points.animate=!1)},r.prototype.parseEvents=function(t){i.prototype.parseEvents.call(this,t||Y)},r.prototype.extractTooltip=function(){this.points.tooltip={};var t=this.options.tooltip;t.fields?this.points.tooltip.fields=t.fields:this.points.tooltip.fields=[this.options.xField,this.options.yField],t.formatter&&(this.points.tooltip.callback=t.formatter,this.options.colorField&&this.points.tooltip.fields.push(this.options.colorField))},r}(Un),my=yy;ln("scatter",yy);var Fk=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="scatter",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=my.getDefaultOptions,r}(Kr),xy=Fk,Rk=p(75564);xn("point","bubble-point",{draw:function(i,r){var t=(0,Rk.iV)(this,i,r,"circle",!1);if(!i.style.stroke){var e=t.attr("fill");t.attr("stroke",e)}return t},getMarker:function(i){var r=i.color;return{symbol:"circle",style:{r:4.5,fill:r}}}});var Nk=function(i){var r=i.stroke||"#000",t=i.fillOpacity||i.opacity||.95;return{stroke:r,fillOpacity:t}},Gk=function(i){var r=i.stroke||"#000",t=i.lineWidth||2;return{stroke:r,lineWidth:t}},Yk=function(i){var r=i.fillOpacity||i.opacity||.3;return{fillOpacity:r}};ia("bubble",{pointStyle:{normal:{},active:Nk,selected:Gk,inactive:Yk}});var by=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="bubble",t}return r.getDefaultOptions=function(){return(0,f.deepMix)({},i.getDefaultOptions.call(this),{pointSize:[2,32],pointStyle:{stroke:null,strokeOpacity:1,fillOpacity:.5},label:{position:"middle",style:{stroke:"#fff",lineWidth:2}},shape:"bubble-point"})},r.prototype.getSizeScale=function(){var t=this.options.sizeField;t&&this.view.getScaleByField(t)},r.prototype.legend=function(){var t;i.prototype.legend.call(this),!(this.options.legend&&this.options.legend.visible===!1)&&this.setConfig("legends",(t={},t[this.options.sizeField]=!1,t))},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,Y)},r}(my),zk=by;ln("bubble",by);var Xk=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="bubble",i.prototype.createLayers.call(this,e)},r.prototype.getSizeScale=function(){var t=this.layers[0];return t.getSizeScale()},r.getDefaultOptions=zk.getDefaultOptions,r}(Kr),wy=Xk,Vk={bullet:"interval",bulletTarget:"bullet-target"},Hk=Ai(Vk);(0,f.assign)(dn,Hk);var Wk=function(){function i(r,t){this.view=r,this.cfg=t,this._init()}return i.prototype.draw=function(){if(!(!this.view||this.view.destroyed)){this.container=this.view.middleGroup.addGroup(),this.container.set("name","rectGroups"),this.container.setZIndex(-100);for(var r=this.getGeometry(),t=(0,f.map)(r==null?void 0:r.elements,function(o){return o.shape}),e=0;e<this.cfg.ranges.length;e+=1){var n=t[e].getBBox(),a=n.width/t[e].get("origin").data[this.cfg.yField];this.drawRect(n,this.cfg.ranges[e]||[0,1],a)}this.view.canvas.draw()}},i.prototype.drawRect=function(r,t,e){for(var n=this.cfg,a=n.rangeColors,o=r.minX,s=r.minY-r.height*(n.rangeSize-1)/2,l=1;l<t.length;l+=1){var u=(t[l]-t[l-1])*n.rangeMax*e;this.container.addShape("rect",{name:"bullet-rect",attrs:{width:u,height:r.height*n.rangeSize,x:o,y:s,fill:a[(l-1)%a.length],fillOpacity:.25}}).set("zIndex",-1),o+=u}if(n.axis&&n.axis.visible){var h=n.rangeMax/(n.axis.tickCount-1),c=new Jr(r.x,s,o,r.height*n.rangeSize);this.drawBulletTicks(c,h,e)}},i.prototype.drawBulletTicks=function(r,t,e){for(var n=this.cfg,a=n.axis.style,o=n.axis.tickCount,s=n.axis.position,l=(0,f.get)(a,"lineHeight",0)-a.fontSize/2,u=0;u<o;u+=1){var h=r.minX+t*u*e,c=""+t*u;if(n.axis.formatter&&(c=n.axis.formatter(c,u)),this.container.addShape("text",{name:"tick",attrs:(0,V.__assign)({x:h,y:s==="before"?r.minY-l:r.maxY+l,text:""+c},a)}),n.axis.tickLine&&n.axis.tickLine.visible){var v=n.axis.tickLine;u>0&&u!==o-1&&this.container.addShape("path",{attrs:(0,V.__assign)({path:[["M",h,r.minY],["L",h,r.maxY]]},v)}).set("zIndex",-1)}}},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.destroy=function(){this.container&&this.container.remove()},i.prototype._init=function(){var r=this;this.view.on("beforerender",function(){r.clear()}),this.view.on("afterrender",function(){r.draw()})},i.prototype.getGeometry=function(){return(0,f.find)(this.view.geometries,function(r){return r.type==="interval"})},i}(),jk=Wk,Uk=function(){function i(r,t){this.view=r,this.cfg=t,this._init()}return i.prototype.draw=function(){if(!(!this.view||this.view.destroyed)){this.container=this.view.foregroundGroup.addGroup(),this.container.set("name","targetGroups");for(var r=(0,f.map)(this.getGeometry().elements,function(a){return a.shape}),t=0;t<this.cfg.targets.length;t+=1){var e=r[t].getBBox(),n=e.width/r[t].get("origin").data[this.cfg.yField];this.drawTarget(e,this.cfg.targets[t],n)}this.view.canvas.draw()}},i.prototype.drawTarget=function(r,t,e){var n=this,a=this.cfg,o=a.markerColors;t.forEach(function(s,l){var u=a.markerStyle;n.container.addShape("rect",{name:"bullet-target",attrs:(0,V.__assign)((0,V.__assign)({width:u.width,height:r.height*a.markerSize-u.width/2,x:r.minX+s*e,y:r.minY-r.height*(a.markerSize-1)/2},u),{fill:o[l%o.length]||u.fill})})})},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.destroy=function(){this.container&&this.container.remove()},i.prototype._init=function(){var r=this;this.view.on("beforerender",function(){r.clear()}),this.view.on("afterrender",function(){r.draw()})},i.prototype.getGeometry=function(){return(0,f.find)(this.view.geometries,function(r){return r.type==="interval"})},i}(),Zk=Uk,Kk=function(i){var r=i.opacity||1;return{opacity:r*.5,lineWidth:0}},$k=function(i){var r=i.opacity||1;return{opacity:r*.5}};ia("bullet",{columnStyle:{normal:{},active:Kk,disable:$k,selected:{}}});var Qk={bullet:"interval"},Jk={interval:"bullet"},qk="$$stackField$$",tB="$$xField$$",eB="$$yField$$",Sy=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="bullet",t}return r.getDefaultOptions=function(){return(0,f.deepMix)({},i.getDefaultOptions.call(this),{data:[],stackField:qk,xField:tB,yField:eB,rangeColors:["rgba(91, 143, 249, 0.45)"],measureSize:12,rangeSize:2,markerSize:2,markerColors:[],markerStyle:{width:2,fill:"#5B8FF9",lineWidth:0},axis:{visible:!1,position:"before",tickCount:6,formatter:function(t,e){return""+e},style:{fill:"rgba(0, 0, 0, 0.25)",textBaseline:"middle",textAlign:"center",fontSize:12,lineHeight:16},tickLine:{visible:!0,lineWidth:1,stroke:"#FFF",lineDash:[4,2]}},xAxis:{visible:!0,line:{visible:!1},tickLine:{visible:!1},label:{visible:!0}},yAxis:{visible:!1,nice:!1},tooltip:{visible:!1,trigger:"item",crosshairs:!1},label:{visible:!0,offset:4,style:{fill:"rgba(0, 0, 0, 0.45)",stroke:"#fff",lineWidth:1}}})},r.prototype.afterRender=function(){i.prototype.afterRender.call(this),this.view.removeInteraction("legend-filter")},r.prototype.scale=function(){var t=this.options,e={};e[t.yField]={},(0,f.has)(t,"yAxis")&&bi(e[t.yField],t.yAxis),e[t.xField]={type:"cat"},(0,f.has)(t,"xAxis")&&bi(e[t.xField],t.xAxis),this.setConfig("scales",e),i.prototype.scale.call(this)},r.prototype.getOptions=function(t){var e=i.prototype.getOptions.call(this,t);return this.adjustOptions(e),e},r.prototype.afterInit=function(){i.prototype.afterInit.call(this);var t=this.options,e=t.data.map(function(a){return a.ranges}),n=t.data.map(function(a){return a.targets});this.bulletRect=new jk(this.view,{ranges:e,rangeMax:t.rangeMax,yField:t.yField,rangeSize:t.rangeSize,rangeColors:t.rangeColors||[],axis:t.axis}),this.bulletTarget=new Zk(this.view,{targets:n,yField:t.yField,markerSize:t.markerSize,markerColors:t.markerColors||[],markerStyle:t.markerStyle})},r.prototype.geometryParser=function(t,e){return t==="g2"?Qk[e]:Jk[e]},r.prototype.coord=function(){this.setConfig("coordinate",{actions:[["transpose"]]})},r.prototype.legend=function(){var t=this.options,e=t.markerStyle.fill,n=t.measureColors||this.theme.colors,a=[{name:"\u5B9E\u9645\u8FDB\u5EA6",value:"\u5B9E\u9645\u8FDB\u5EA6",marker:{symbol:"square",style:{fill:n[0]}}},{name:"\u76EE\u6807\u503C",value:"\u76EE\u6807\u503C",marker:{symbol:"line",style:{stroke:e,lineWidth:2}}}],o=(0,V.__assign)({custom:!0,position:"bottom",items:a},t.legend);this.setConfig("legends",o)},r.prototype.addGeometry=function(){var t=this.options,e=ri("interval","main",{positionFields:[t.xField,t.yField],plot:this});e.adjust=[{type:"stack"}],t.label&&(e.label=this.extractLabel()),this.bullet=e,this.setConfig("geometry",e)},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,K)},r.prototype.extractLabel=function(){var t=this.options,e=(0,f.deepMix)({},t.label);if(e.visible===!1)return!1;var n=Ni("label",(0,V.__assign)({plot:this,labelType:"barLabel",fields:[t.yField]},e));return n},r.prototype.adjustOptions=function(t){t.barSize=t.measureSize||12,this.adjustYAxisOptions(t)},r.prototype.adjustYAxisOptions=function(t){var e=[];t.data.forEach(function(n){return e.push(n.measures.reduce(function(a,o){return a+o},0))}),e.push(t.rangeMax),t.yAxis.max=Math.max.apply([],e)},r.prototype.processData=function(t){var e=this.options,n=[];return t.forEach(function(a,o){for(var s,l=0;l<a.measures.length;l+=1){var u=a.measures[l],h=a.title||""+o;n.push((s={},s[e.xField]=h,s[e.yField]=u,s[e.stackField]=""+l,s))}}),n},r}(Un),rB=Sy;ln("bullet",Sy);var nB=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="bullet",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=rB.getDefaultOptions,r}(Kr),Cy=nB,qo="$$day$$",ts="$$week$$",My="$$date$$",nY="$$is_month_center$$",es="YYYY-MM-DD",iB=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],aB=["S","M","T","W","T","F","S"],As=864e5;function oB(i){var r=(0,V.__spreadArrays)(i).sort(function(t,e){return t.getTime()-e.getTime()});return[go.default.format((0,f.head)(r),es),go.default.format((0,f.last)(r),es)]}function iY(i){var r=i||new Date;return[fecha.format(new Date(r.getFullYear(),0,1),FORMATTER),fecha.format(new Date(r.getFullYear(),11,30),FORMATTER)]}function sB(i){return i.getMonth()!==Xl(new Date(i),7*As).getMonth()}function lB(i){return i.getMonth()!==Xl(new Date(i),As).getMonth()}function Ey(i){var r=new Date(i.getFullYear(),0,1);return Math.ceil(((i.getTime()-r.getTime())/As+r.getDay()+1)/7)}function uB(i){return i.getDay()}function Xl(i,r){return i.setMilliseconds(i.getMilliseconds()+r),i}function _y(i){var r,t=i[0],e=i[1],n=go.default.parse(t,es),a=go.default.parse(e,es);return n>a&&(r=[n,a],a=r[0],n=r[1]),[n,a]}function fB(i,r,t){for(var e=[],n=_y(r),a=n[0],o=n[1],s=new Date(a),l=function(){var u,h=go.default.format(s,es),c=(0,f.find)(i,function(v){return v[t]===h});e.push((0,V.__assign)((u={},u[qo]=uB(s),u[ts]=""+Ey(s),u[t]=h,u[My]=new Date(s),u),c)),Xl(s,As)};s<=o;)l();return e}function hB(i){var r=_y(i),t=r[0],e=r[1],n=new Map;function a(l){var u=l.getMonth(),h=Ey(l);n.has(u)||n.set(u,[]),n.get(u).push(h)}for(var o=new Date(t);o<=e;)a(o),Xl(o,As*7);e<o&&a(e);var s={};return n.forEach(function(l,u){var h=Math.ceil(((0,f.head)(l)+(0,f.last)(l))/2);s[h]=u}),s}var cB={rect:"polygon"},vB=Ai(cB);(0,f.assign)(dn,vB);var Ay=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="calendar",t}return r.getDefaultOptions=function(){var t;return(0,f.deepMix)({},i.getDefaultOptions.call(this),{xAxis:{line:{visible:!1},grid:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoRotate:!1,autoHide:!1}},yAxis:{line:{visible:!1},grid:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoRotate:!1,autoHide:!1}},legend:{visible:!1},meta:(t={},t[qo]={type:"cat",alias:"Day",values:[0,1,2,3,4,5,6]},t[ts]={type:"cat",alias:"Month"},t),tooltip:{visible:!0,showTitle:!0,showCrosshairs:!1,showMarkers:!1,title:"date"}})},r.prototype.processData=function(t){var e=this.options.dateField,n=this.options.dateRange;if((0,f.isNil)(n)){var a=(0,f.map)(t,function(o){return go.default.parse(""+o[e],es)});n=oB(a)}return fB(t,n,e)},r.prototype.addGeometry=function(){var t=this.options,e=t.valueField,n=t.colors,a=t.tooltip,o={type:"polygon",position:{fields:[ts,qo]},shape:{values:["calendar-polygon"]},color:{fields:[e],values:n},label:this.extractLabel()};a&&(a.fields||a.formatter)&&this.geometryTooltip(o),this.setConfig("geometry",o)},r.prototype.geometryTooltip=function(t){t.tooltip={};var e=this.options.tooltip;e.fields&&(t.tooltip.fields=e.fields),e.formatter&&(t.tooltip.callback=e.formatter,e.fields||(t.tooltip.fields=[ts,qo]))},r.prototype.extractLabel=function(){var t=this.options,e=t.label;if(e&&e.visible===!1)return!1;var n=this.options.valueField;return Ni("label",(0,V.__assign)({plot:this,fields:[n],position:"top",offset:0},e))},r.prototype.coord=function(){var t={type:"rect",cfg:{},actions:[["reflect","y"]]};this.setConfig("coordinate",t)},r.prototype.geometryParser=function(){return""},r.prototype.axis=function(){var t=Ni("axis",{plot:this,dim:"x"}),e=Ni("axis",{plot:this,dim:"y"}),n={};n[ts]=t,n[qo]=e,this.setConfig("axes",n)},r.prototype.scale=function(){i.prototype.scale.call(this);var t=hB(this.options.dateRange),e=this.config.scales,n=this.options,a=n.weeks,o=a===void 0?aB:a,s=n.months,l=s===void 0?iB:s,u=e[ts],h=e[qo];u.formatter=function(M){var k=t[M];return k!==void 0?l[k]:""},h.formatter=function(M){return o[M]||""};var c=this.options,v=c.xAxis,x=c.yAxis;u.alias=(0,f.get)(v,["title","text"],u.alias),h.alias=(0,f.get)(x,["title","text"],h.alias),this.setConfig("scales",e)},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,H)},r}(Un),dB=Ay;ln("calendar",Ay),xn("polygon","calendar-polygon",{draw:function(i,r){if(!(0,f.isEmpty)(i.points)){var t=i.points,e=[["M",t[0].x,t[0].y],["L",t[1].x,t[1].y],["L",t[2].x,t[2].y],["L",t[3].x,t[3].y],["Z"]];e=this.parsePath(e);var n=(0,V.__assign)((0,V.__assign)({stroke:"#fff",lineWidth:1,fill:i.color},i.style),{path:e}),a=r.addShape("path",{attrs:n}),o=i.data[My];if(sB(o)){var s=[["M",t[2].x,t[2].y],["L",t[3].x,t[3].y]];r.addShape("path",{zIndex:1,attrs:{path:this.parsePath(s),lineWidth:1,stroke:"#404040"}}),lB(o)&&r.addShape("path",{zIndex:1,attrs:{path:this.parsePath([["M",t[1].x,t[1].y],["L",t[2].x,t[2].y]]),lineWidth:1,stroke:"#404040"}})}return r.sort(),a}}});var pB=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="calendar",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=dB.getDefaultOptions,r}(Kr),gB=pB,Ty=function(){function i(r){this.uid=r}return i.prototype.setOption=function(r,t){this.type=r,this.options=t,this.axis=t.axis,this.pivot=t.pivot},i.prototype.render=function(){var r=this;xn("point","gauge",{draw:function(t,e){var n,a,o;this.gauge={},this.gauge.options=r.options,this.gauge.axis=r.axis,this.gauge.pivot=r.pivot,this.gauge.type=r.type;var s=this.gauge,l=this.gauge.type,u=t.points[0],h=this.parsePoint({x:0,y:0}),c=this.parsePoint({x:u.x||0,y:1});s.center=h,s.group=e;var v={x:h.x-c.x,y:h.y-c.y};this.gauge.ringRadius=Math.sqrt(v.x*v.x+v.y*v.y);var x=this.getAngleRange(),M=x.starAngle,k=x.endAngle,R=u.x*(k-M)+M;switch(l){case"meterGauge":this.drawBarGauge(R),this.gauge.axis.visible&&((n=this.gauge.axis.tickLine)===null||n===void 0?void 0:n.visible)&&this.drawInSideAxis();break;case"fanGauge":this.drawGauge(R),this.gauge.axis.visible&&((a=this.gauge.axis.tickLine)===null||a===void 0?void 0:a.visible)&&this.drawOutSideAxis();break;case"standardGauge":default:this.drawGauge(R),this.gauge.axis.visible&&((o=this.gauge.axis.tickLine)===null||o===void 0?void 0:o.visible)&&this.drawAxis();break}this.gauge.pivot.visible&&this.drawPivot(t,e)},drawGauge:function(t){var e=this.gauge.options.range;this.drawBottomRing(),e&&e.length?this.drawRangeColor():this.drawCurrentRing(t)},drawRangeColor:function(){for(var t=this.gauge.options,e=t.min,n=t.max,a=t.range,o=t.color,s=t.rangeStyle,l=o||ji().colors,u=this.getAngleRange(),h=u.starAngle,c=u.endAngle,v={min:e,max:n,starAngle:h,endAngle:c},x=0;x<a.length;x++){var M=this.valueToAngle(a[x],v),k=this.valueToAngle(a[x+1],v);if(k>=M){var R=this.getPath(M,k),G=(0,f.deepMix)({fill:l[x]},s);this.drawRing(R,G)}}},drawBottomRing:function(){var t=this.getAngleRange(),e=t.starAngle,n=t.endAngle,a=this.gauge.options.rangeBackgroundStyle,o=this.getPath(e,n);this.drawRing(o,a)},drawCurrentRing:function(t){var e=this.getAngleRange().starAngle,n=this.gauge.rangeStyle,a=this.getPath(e,t);this.drawRing(a,n)},drawInSideAxis:function(){for(var t=this.gauge.options,e=t.min,n=t.max,a=t.axis,o=this.getAngleRange(),s=o.starAngle,l=o.endAngle,u={min:e,max:n,starAngle:s,endAngle:l},h=(n-e)/a.tickCount,c=0;c<a.tickCount;c++){var v=e+c*h,x=this.valueToAngle(v+h/2,u);this.drawRect(x,{length:a.tickLine.length,style:a.tickLine.style})}},drawAxis:function(){for(var t=this.gauge.axis,e=this.gauge.options,n=e.min,a=e.max,o=this.getAngleRange(),s=o.starAngle,l=o.endAngle,u={min:n,max:a,starAngle:s,endAngle:l},h=(a-n)/(t.tickCount-1),c=0;c<t.tickCount;c++){var v=n+c*h,x=this.valueToAngle(v,u),M=(0,f.clone)(t.tickLine.style);c%5!=0&&(M.lineWidth=M.lineWidth/2),this.drawRect(x,{length:c%5==0?t.tickLine.length:t.tickLine.length/2,style:M})}},drawOutSideAxis:function(){for(var t=this.gauge.axis,e=this.gauge.options,n=e.min,a=e.max,o=this.getAngleRange(),s=o.starAngle,l=o.endAngle,u={min:n,max:a,starAngle:s,endAngle:l},h=(a-n)/(t.tickCount-1),c=0;c<t.tickCount;c++){var v=n+c*h,x=this.valueToAngle(v,u);this.drawRect(x,{length:t.tickLine.length,style:t.tickLine.style})}},drawBarGauge:function(t){for(var e=this,n=this.gauge.options,a=n.min,o=n.max,s=n.range,l=n.color,u=n.rangeStyle,h=n.rangeBackgroundStyle,c=l||ji().colors,v=this.getAngleRange(),x=v.starAngle,M=v.endAngle,k={min:a,max:o,starAngle:x,endAngle:M},R=(M-x)/(50-1),G=R/3,N=0;N<50;N++){var ot=x+N*R,ut=this.getPath(ot-G/2,ot+G-G/2),Mt=h;if(s&&s.length){var zt=s.map(function(Ut){return e.valueToAngle(Ut,k)}),$t=sE(zt,ot),ee=Math.min($t,s.length-1);Mt=(0,f.deepMix)({},{fill:c[ee-1]},u)||h}else Mt=t>=ot?(0,f.deepMix)({},{fill:l},u):h;this.drawRing(ut,Mt)}},getAngleRange:function(){var t=this.gauge.options.angle,e=90-(360-t)*.5,n=(270-90-e)*Math.PI/180,a=(270+90+e)*Math.PI/180;return{starAngle:n,endAngle:a}},valueToAngle:function(t,e){var n=e.min,a=e.max,o=e.starAngle,s=e.endAngle;if(t===a)return s;if(t===n)return o;var l=(t-n)/(a-n);a===n&&(l=1);var u=l*(s-o)+o;return u=Math.max(u,o),u=Math.min(u,s),u},drawRing:function(t,e){this.gauge.group.addShape("path",{attrs:(0,f.deepMix)({},{path:t},e)})},drawRect:function(t,e){var n=this.gauge.axis,a=(0,V.__assign)((0,V.__assign)({},n),e),o=a.offset,s=a.length,l=this.gauge.center,u;o<0?u=this.gauge.ringRadius-this.gauge.options.rangeSize+o:u=this.gauge.ringRadius+o;var h=u*Math.cos(t)+l.x,c=u*Math.sin(t)+l.y,v=(u+s)*Math.cos(t)+l.x,x=(u+s)*Math.sin(t)+l.y,M=this.gauge.group.addShape("line",{attrs:(0,f.deepMix)({},{x1:h,y1:c,x2:v,y2:x},e.style)});M.set("name","axis-tickLine")},getPath:function(t,e){var n=this.gauge.center,a=this.gauge.ringRadius,o=this.gauge.options.rangeSize,s=a*Math.cos(t)+n.x,l=a*Math.sin(t)+n.y,u=(a-o)*Math.cos(t)+n.x,h=(a-o)*Math.sin(t)+n.y,c=a*Math.cos(e)+n.x,v=a*Math.sin(e)+n.y,x=(a-o)*Math.cos(e)+n.x,M=(a-o)*Math.sin(e)+n.y,k=Math.abs(t-e)>Math.PI?1:0;return[["M",s,l],["A",a,a,0,k,1,c,v],["L",x,M],["A",a-o,a-o,0,k,0,u,h],["Z"]]},drawPivot:function(t){var e=this.getAngleRange(),n=e.starAngle,a=e.endAngle,o=this.gauge.options,s=o.radius,l=o.rangeSize,u=this.gauge.pivot,h=u.thickness,c=u.thickness/2.5,v=this.gauge.group,x=t.points[0],M=this.parsePoint({x:0,y:0}),k=x.x*(a-n)+n,R=(this.gauge.ringRadius-l)*s*Math.cos(k)+this.gauge.center.x,G=(this.gauge.ringRadius-l)*s*Math.sin(k)+this.gauge.center.y,N={x:R,y:G};if(u.base.visible&&v.addShape("circle",{attrs:(0,f.deepMix)({},{x:M.x,y:M.y,r:u.base.size?u.base.size/2:h*2.2},u.base.style)}),u.pointer.visible){var ot={x:M.x-N.x,y:M.y-N.y},ut=Math.sqrt(ot.x*ot.x+ot.y*ot.y);ot.x*=1/ut,ot.y*=1/ut;var Mt=-Math.PI/2,zt=Math.cos(Mt)*ot.x-Math.sin(Mt)*ot.y,$t=Math.sin(Mt)*ot.x+Math.cos(Mt)*ot.y,ee=Math.PI/2,Ut=Math.cos(ee)*ot.x-Math.sin(ee)*ot.y,le=Math.sin(ee)*ot.x+Math.cos(ee)*ot.y,xe=[["M",N.x+zt*c,N.y+$t*c],["L",M.x+zt*h,M.y+$t*h],["L",M.x+Ut*h,M.y+le*h],["L",N.x+Ut*c,N.y+le*c],["Z"]];v.addShape("path",{attrs:(0,f.deepMix)({},{path:xe},u.pointer.style)}),v.addShape("circle",{attrs:{x:N.x,y:N.y,r:c,fill:u.pointer.style.fill}}),v.addShape("circle",{attrs:{x:M.x,y:M.y,r:h,fill:u.pointer.style.fill}})}u.pin.visible&&v.addShape("circle",{attrs:(0,f.deepMix)({},{x:M.x,y:M.y,r:c/1.2},u.pin.style)})}})},i}(),yB={range:"point",statistic:"annotation-text"},mB=Ai(yB);(0,f.assign)(dn,mB);var Py=function(i){(0,V.__extends)(r,i);function r(t){var e=i.call(this,t)||this;return e.type="gauge",e}return r.getDefaultOptions=function(){return(0,f.deepMix)({},i.getDefaultOptions.call(this),{startAngle:-7/6,endAngle:1/6,rangeBackgroundStyle:{fill:"#f0f0f0"},rangeSize:24,statistic:{position:["50%","80%"]},axis:{visible:!0,offset:-10,tickCount:21,subTickCount:4,tickLine:{visible:!0,length:5,style:{stroke:"#aaa",lineWidth:2}},label:{visible:!0,offset:8,style:{fill:"#aaa",fontSize:16,textAlign:"center",textBaseline:"middle"}}},pivot:{visible:!0,thickness:6,pin:{visible:!0,size:2,style:{fill:"#2E364B"}},base:{visible:!0,style:{fill:"#EEEEEE"}},pointer:{visible:!0,style:{fill:"#CFCFCF"}}}})},r.prototype.init=function(){var t=this.options,e=t.value,n=t.range,a=(n||[]).map(function(M){return+M}).sort(function(M,k){return M-k}),o=this.options,s=o.min,l=s===void 0?a[0]:s,u=o.max,h=u===void 0?a[a.length-1]:u,c=o.format,v=c===void 0?function(M){return""+M}:c,x=v(e);this.options.data=[{value:e||0}],this.options.valueText=x,this.options.min=l,this.options.max=h,this.options.format=v,this.initG2Shape(),i.prototype.init.call(this)},r.prototype.initG2Shape=function(){this.gaugeShape=new Ty((0,f.uniqueId)()),this.gaugeShape.setOption(this.type,(0,f.deepMix)({},this.options,{radius:.6,angle:240,textPosition:"100%"})),this.gaugeShape.render()},r.prototype.geometryParser=function(){return"gauge"},r.prototype.scale=function(){var t=this.options,e=t.min,n=t.max,a=t.format,o={value:{}};bi(o.value,{min:e,max:n,minLimit:e,maxLimit:n,nice:!0,formatter:a,tickInterval:20}),this.setConfig("scales",o),i.prototype.scale.call(this)},r.prototype.coord=function(){var t={type:"polar",cfg:{radius:1,startAngle:this.options.startAngle*Math.PI,endAngle:this.options.endAngle*Math.PI}};this.setConfig("coordinate",t)},r.prototype.axis=function(){var t=this.options.axis,e={value:{line:null,grid:null,tickLine:null}},n;t.offset<0?n=t.offset-this.options.rangeSize-t.tickLine.length-t.label.offset:n=t.offset+t.tickLine.length+t.label.offset,t.label.visible?e.value.label={offset:n,textStyle:t.label.style,autoRotate:!0}:e.value.label={style:{opacity:0}},e["1"]=!1,e.value=t.visible?e.value:!1,this.setConfig("axes",e)},r.prototype.addGeometry=function(){var t=this.options.pivot.pointer.style.fill||this.theme.defaultColor,e={type:"point",position:{fields:["value","1"]},shape:{values:["gauge"]},color:{values:[t]}};this.setConfig("geometry",e)},r.prototype.annotation=function(){var t=this.options.statistic,e=[];if(t&&t.visible){var n=this.renderStatistic();e.push(n)}this.setConfig("annotations",e)},r.prototype.renderStatistic=function(){var t=Math.max(this.options.width,this.options.height)/20,e=this.options.statistic,n={type:"text",content:e.text,top:!0,position:e.position,style:{fill:e.color,fontSize:e.size?e.size:t*1.2,textAlign:"center",textBaseline:"middle"}};return n},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,st)},r}(Un),ph=Py;ln("gauge",Py);var xB=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="gauge",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=ph.getDefaultOptions,r}(Kr),Ly=xB,Oy=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="fanGauge",t}return r.getDefaultOptions=function(){return(0,f.deepMix)({},i.getDefaultOptions.call(this),{rangeColor:"#F6445A",rangeSize:70,axis:{visible:!0,offset:5,tickCount:10,subTickCount:4,tickLine:{visible:!0,length:3,style:{stroke:"#aaa",lineWidth:3}},label:{visible:!0,style:{fill:"#aaa",fontSize:16,textAlign:"center",textBaseline:"middle"}}}})},r.prototype.initG2Shape=function(){this.gaugeShape=new Ty((0,f.uniqueId)()),this.gaugeShape.setOption(this.type,(0,f.deepMix)({},this.options,{radius:1,angle:120,textPosition:"125%",bottomRatio:3.5})),this.gaugeShape.render()},r.prototype.axis=function(){var t={value:!1,1:!1};this.setConfig("axes",t)},r.prototype.annotation=function(){var t=this.options.statistic,e=[];if(t&&t.visible){var n=this.renderStatistic();e.push(n)}var a=this.renderSideText(),o=e.concat(a);this.setConfig("annotations",o)},r.prototype.renderSideText=function(){var t=this.options,e=t.max,n=t.min,a=t.format,o=t.rangeSize,s=t.axis,l=12;return[n,e].map(function(u,h){return{type:"text",top:!0,position:["50%","50%"],content:a(u),style:(0,f.deepMix)({},s.label.style,{textAlign:"center"}),offsetX:h?o:-o,offsetY:l}})},r}(ph),bB=Oy;ln("fanGauge",Oy);var wB=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="fanGauge",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=bB.getDefaultOptions,r}(Kr),Iy=wB,ky=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="meterGauge",t}return r.getDefaultOptions=function(){return(0,f.deepMix)({},i.getDefaultOptions.call(this),{axis:{visible:!0,offset:-10,tickCount:25,subTickCount:4,tickLine:{visible:!0,length:2,style:{stroke:"#aaa",lineWidth:1}}}})},r}(ph),SB=ky;ln("meterGauge",ky);var CB=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="meterGauge",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=SB.getDefaultOptions,r}(Kr),By=CB,MB=p(42473),eo=p.n(MB),aY=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="donut",i.prototype.createLayers.call(this,e),eo()(!1,'Please use "Donut" instead of "Ring" which was not recommended.')},r.getDefaultOptions=cy.getDefaultOptions,r}(Kr),oY=null,sY=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="groupedColumn",i.prototype.createLayers.call(this,e),eo()(!1,'Please use "GroupedColumn" instead of "GroupColumn" which was not recommended.')},r.getDefaultOptions=ih.getDefaultOptions,r}(Kr),lY=null,uY=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="groupedBar",i.prototype.createLayers.call(this,e),eo()(!1,'Please use "GroupedBar" instead of "GroupBar" which was not recommended.')},r.getDefaultOptions=jp.getDefaultOptions,r}(Kr),fY=null,hY=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="percentStackedArea",i.prototype.createLayers.call(this,e),eo()(!1,'Please use "PercentStackedArea" instead of "PercentageStackArea" which was not recommended.')},r.getDefaultOptions=cg.getDefaultOptions,r}(Kr),cY=null,vY=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="percentStackedBar",i.prototype.createLayers.call(this,e),eo()(!1,'Please use "PercentStackedBar" instead of "PercentageStackBar" which was not recommended.')},r.getDefaultOptions=Kp.getDefaultOptions,r}(Kr),dY=null,pY=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="percentStackedColumn",i.prototype.createLayers.call(this,e),eo()(!1,'Please use "PercentStackedColumn" instead of "PercentageStackColumn" which was not recommended.')},r.getDefaultOptions=Pg.getDefaultOptions,r}(Kr),gY=null,yY=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="stackedArea",i.prototype.createLayers.call(this,e),eo()(!1,'Please use "StackedArea" instead of "StackArea" which was not recommended.')},r.getDefaultOptions=eh.getDefaultOptions,r}(Kr),mY=null,xY=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="stackedBar",i.prototype.createLayers.call(this,e),eo()(!1,'Please use "StackedBar" instead of "StackBar" which was not recommended.')},r.getDefaultOptions=Qf.getDefaultOptions,r}(Kr),bY=null,wY=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="stackedColumn",i.prototype.createLayers.call(this,e),eo()(!1,'Please use "StackedColumn" instead of "StackColumn" which was not recommended.')},r.getDefaultOptions=Bl.getDefaultOptions,r}(Kr),SY=null,EB=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.getDefaultOptions=function(){return(0,f.deepMix)({},i.getDefaultOptions.call(this),{title:{visible:!1},description:{visible:!1},padding:[0,0,0,0],legend:{visible:!1},xAxis:{visible:!1},yAxis:{visible:!1},tooltip:{visible:!1}})},r.prototype.coord=function(){},r.prototype.addGeometry=function(){},r.prototype.annotation=function(){var t=this,e=this.options,n=[],a={line:{style:{lineWidth:1,stroke:"#66d6a8"}}};(0,f.each)(e.guideLine,function(o){var s=Ni("guideLine",{plot:t,cfg:(0,f.deepMix)({},a,o)});n.push(s)}),this.setConfig("annotations",n)},r}(Un),Vl=EB,_B=function(){function i(r){(0,f.assign)(this,r),this.init()}return i.prototype.destroy=function(){this.shape&&this.shape.destroy()},i.prototype.update=function(r,t,e){var n={};if((0,f.assign)(this,r),this.coord=this.view.geometries[0].coordinate,r.value){var a=this.coord.convert({x:0,y:this.value}).x,o=[1,0,0,0,1,0,a,0,1];n.matrix=o}if(r.style){var s=this.shape,l=s.attrs,u=(0,f.deepMix)({},l,r.style);n=(0,f.deepMix)({},u,n)}this.shape.stopAnimate(),this.shape.animate(n,t,e)},i.prototype.init=function(){this.coord=this.view.geometries[0].coordinate,this.container=this.view.foregroundGroup.addGroup();var r=this.coord.convert({x:0,y:this.value}).x,t=this.coord.center.y-this.progressSize/2-2,e=this.coord.center.y+this.progressSize/2+2,n=(0,f.deepMix)({},{stroke:"grey",lineWidth:1},this.style);this.shape=this.container.addShape("path",{attrs:(0,V.__assign)({path:[["M",0,t],["L",0,e]]},n),name:"progress-marker"}),this.shape.move(r,0),this.canvas.draw()},i}(),Dy=_B,AB={progress:"interval"},TB=Ai(AB);(0,f.assign)(dn,TB);var PB={progress:"interval"},LB={interval:"progress"},Fy=["#55A6F3","#E8EDF3"],Ry=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="progress",t.isEntered=!1,t}return r.prototype.processProps=function(){var t=this.options;t.data=this.processData();var e={padding:[0,0,0,0],xField:"value",yField:"1",stackField:"type",barSize:t.size?t.size:this.getSize(),barStyle:t.progressStyle,color:this.parseColorProps(t)||Fy};t=(0,f.mix)(t,e)},r.prototype.init=function(){this.processProps(),i.prototype.init.call(this)},r.prototype.beforeInit=function(){var t=this.options.percent;if(!(0,f.isNumber)(t))throw new Error("Percent value is required, and the type of percent must be Number.")},r.prototype.update=function(t){var e=this.options;if((0,f.hasKey)(t,"percent")&&(e.percent=t.percent,this.changeData(this.processData())),t.style&&(this.styleUpdateAnimation(t.style),this.updateColorConfigByStyle(t.style)),t.color){var n=void 0;(0,f.isArray)(t.color)?(this.options.color=t.color,n=[{fill:t.color[0]},{fill:t.color[1]}]):(this.options.color[0]=t.color,n={fill:t.color}),this.styleUpdateAnimation(n)}t.marker&&(this.updateMarkers(t.marker),this.options.marker=t.marker)},r.prototype.destroy=function(){this.markers&&this.markers.length>0&&((0,f.each)(this.markers,function(t){t.destroy()}),this.markers=[]),i.prototype.destroy.call(this)},r.prototype.afterRender=function(){var t=this;this.options.marker&&!this.markers&&(this.markers=[],(0,f.each)(this.options.marker,function(s){var l=(0,f.mix)({canvas:t.canvas,view:t.view,progressSize:t.options.barSize},s),u=new Dy(l);t.markers.push(u)}));var e=this.view.geometries[0].container,n=e.getBBox(),a=e.addShape("rect",{attrs:{width:n.width,height:n.height,x:n.minX,y:n.minY,fill:"rgba(0,0,0,0)"}});this.canvas.draw(),a.on("mouseenter",function(s){t.isEntered=!0,t.view.emit("progress:mouseenter",s)}),a.on("mouseleave",function(s){t.isEntered=!1,t.view.emit("progress:mouseleave",s)});var o=this.canvas.get("container");o.addEventListener("mouseleave",function(s){t.isEntered&&(t.view.emit("progress:mouseleave",s),t.isEntered=!1)})},r.prototype.geometryParser=function(t,e){return t==="g2"?PB[e]:LB[e]},r.prototype.coord=function(){this.setConfig("coordinate",{actions:[["transpose"]]})},r.prototype.addGeometry=function(){var t=this.options,e=ri("interval","main",{positionFields:[t.yField,t.xField],plot:this});e.adjust=[{type:"stack"}],(0,f.has)(t,"animation")&&(e.animate=t.animation),this.setConfig("geometry",e)},r.prototype.parseEvents=function(t){t?i.prototype.parseEvents.call(this,t):i.prototype.parseEvents.call(this,pt)},r.prototype.parseColorProps=function(t){var e;if(t.color)if((0,f.isFunction)(t.color)?e=t.color(t.percent):e=t.color,(0,f.isString)(e)){var n=(0,f.clone)(Fy);return n[0]=e,n}else return e;return t.color},r.prototype.processData=function(){var t=this.options,e=[{type:"current",value:t.percent},{type:"rest",value:1-t.percent}];return e},r.prototype.updateMarkers=function(t){var e=t.length,n=this.getUpdateAnimationOptions();if((0,f.each)(this.markers,function(u,h){h>e-1?u.destroy():u.update(t[h],n.duration,n.easing)}),this.markers.length<e)for(var a=this.markers.length,o=a;o<e;o++){var s=(0,f.deepMix)({},{canvas:this.canvas,view:this.view,progressSize:this.options.barSize},t[o]),l=new Dy(s);this.markers.push(l)}},r.prototype.getSize=function(){var t=this.height;return t>=50?10:4},r.prototype.styleUpdateAnimation=function(t){var e=this.getUpdateAnimationOptions(),n=e.duration,a=e.easing,o=[],s=this.view,l=s.geometries;(0,f.each)(l,function(u){if(u.type==="interval"){var h=u.elements;(0,f.each)(h,function(c){o.push.apply(o,c.shape)})}}),(0,f.isArray)(t)?(0,f.each)(t,function(u,h){o[h].animate(u,n,a)}):o[0].animate(t,n,a)},r.prototype.getUpdateAnimationOptions=function(){var t=450,e="easeQuadInOut",n=this.options.animation;return n&&n.update&&(n.update.duration&&(t=n.update.duration),n.update.easing&&(e=n.update.easing)),{duration:t,easing:e}},r.prototype.updateColorConfigByStyle=function(t){var e=this;(0,f.isArray)(t)?(0,f.each)(t,function(n,a){n.fill&&(e.options.color[a]=n.fill)}):t.fill&&(this.options.color[0]=t.fill)},r}(Vl),Ny=Ry;ln("progress",Ry);var OB=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="progress",i.prototype.createLayers.call(this,e)},r.prototype.update=function(t,e){var n=this.layers[0];n.update(t,e)},r.getDefaultOptions=Ny.getDefaultOptions,r}(Kr),Gy=OB,IB={ringProgress:"interval"},kB=Ai(IB);(0,f.assign)(dn,kB);var BB=["#55A6F3","#E8EDF3"],Yy=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="ringProgrsss",t}return r.prototype.processProps=function(){var t=this.options;t.data=this.processData();var e={padding:[0,0,0,0],xField:"value",yField:"1",stackField:"type",barStyle:t.progressStyle,color:this.parseColorProps(t)||BB};t=(0,f.mix)(t,e)},r.prototype.coord=function(){var t={type:"theta",cfg:{radius:1,innerRadius:this.getThickness(this.options.size)}};this.setConfig("coordinate",t)},r.prototype.annotation=function(){},r.prototype.addGeometry=function(){var t=this.options;this.ring=ri("interval","main",{positionFields:[t.yField,t.xField],plot:this}),this.ring.adjust=[{type:"stack"}],this.setConfig("geometry",this.ring)},r.prototype.animation=function(){this.ring.animate={appear:{duration:1e3}}},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,ct)},r.prototype.getThickness=function(t){var e=this.width,n=this.height,a=Math.min(e,n);return t?1-t/a:a>=60?1-20/a:1-10/a},r}(Ny),DB=Yy;ln("ringProgress",Yy);var FB=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="ringProgress",i.prototype.createLayers.call(this,e)},r.prototype.update=function(t){var e=this.layers[0];e.update(t)},r.getDefaultOptions=DB.getDefaultOptions,r}(Kr),zy=FB,RB={onColumnClick:"interval:click",onColumnDblclick:"interval:dblclick",onColumnMousemove:"interval:mousemove",onColumnMousedown:"interval:mousedown",onColumnMouseup:"interval:mouseup",onColumnMouseenter:"interval:mouseenter",onColumnMouseleave:"interval:mouseleave",onColumnContextmenu:"interval:contextmenu"};(0,f.assign)(dn,RB);var NB=.6,GB={column:"interval"},YB={interval:"column"},Xy=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="tinyColumn",t}return r.prototype.init=function(){this.processProps(),i.prototype.init.call(this)},r.prototype.geometryParser=function(t,e){return t==="g2"?GB[e]:YB[e]},r.prototype.scale=function(){var t=this.options,e={};e[t.xField]={type:"cat"},this.setConfig("scales",e)},r.prototype.addGeometry=function(){var t=this.options,e=ri("interval","main",{positionFields:[t.xField,t.yField],plot:this});this.setConfig("geometry",e)},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,Ot)},r.prototype.processProps=function(){var t={padding:[0,0,0,0],columnSize:this.getSize()};this.options=(0,f.mix)(this.options,t)},r.prototype.getSize=function(){var t=this.options,e=this.getColumnNum(t.data,t.xField),n=this.width;return n/e*NB},r.prototype.getColumnNum=function(t,e){var n=[];return(0,f.each)(t,function(a){var o=a[e];n.indexOf(o)<0&&n.push(o)}),n.length},r}(Vl),zB=Xy;ln("tinyColumn",Xy);var XB=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="tinyColumn",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=zB.getDefaultOptions,r}(Kr),Vy=XB,VB={onAreaClick:"area:click",onAreaDblclick:"area:dblclick",onAreaMousemove:"area:mousemove",onAreaMousedown:"area:mousedown",onAreaMouseup:"area:mouseup",onAreaMouseenter:"area:mouseenter",onAreaMouseleave:"area:mouseleave",onAreaContextmenu:"area:contextmenu",onLineClick:"line:click",onLineDblclick:"line:dblclick",onLineMousemove:"line:mousemove",onLineMousedown:"line:mousedown",onLineMouseup:"line:mouseup",onLineMouseenter:"line:mouseenter",onLineMouseleave:"line:mouseleave",onLineContextmenu:"line:contextmenu"};(0,f.assign)(dn,VB);var HB={area:"area",line:"line"},Hy=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="tinyArea",t}return r.prototype.geometryParser=function(t,e){return HB[e]},r.prototype.addGeometry=function(){this.area=ri("area","mini",{plot:this}),this.setConfig("geometry",this.area),this.line=ri("line","mini",{plot:this}),this.setConfig("geometry",this.line)},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,Rt)},r}(Vl),WB=Hy;ln("tinyArea",Hy);var jB=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="tinyArea",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=WB.getDefaultOptions,r}(Kr),Wy=jB,UB={onLineClick:"line:click",onLineDblclick:"line:dblclick",onLineMousemove:"line:mousemove",onLineMousedown:"line:mousedown",onLineMouseup:"line:mouseup",onLineMouseenter:"line:mouseenter",onLineMouseleave:"line:mouseleave",onLineContextmenu:"line:contextmenu"};(0,f.assign)(dn,UB);var ZB={line:"line"},jy=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="tinyLine",t}return r.prototype.geometryParser=function(t,e){return ZB[e]},r.prototype.addGeometry=function(){this.line=ri("line","mini",{plot:this}),this.setConfig("geometry",this.line)},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,Qt)},r}(Vl),KB=jy;ln("tinyLine",jy);var $B=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="tinyLine",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=KB.getDefaultOptions,r}(Kr),Uy=$B,gh=5,QB=function(i){(0,V.__extends)(r,i);function r(t){var e=i.call(this,t)||this;return e.geomLayers=[],e.legends=[],e.requiredField=["xField","yField"],e.options=e.getOptions(t),e.initialOptions=(0,f.deepMix)({},t),e.themeController=new zf,e}return r.getDefaultOptions=function(){return{title:{visible:!1,alignTo:"left",text:""},description:{visible:!1,text:"",alignTo:"left"}}},r.prototype.getOptions=function(t){var e=this.options||{},n=i.prototype.getOptions.call(this,t),a=this.constructor.getDefaultOptions(t);return(0,f.deepMix)({},n,a,e,t)},r.prototype.checkData=function(){for(var t=this,e,n,a=this.options,o=a.data,s=a.xField,l=a.yField,u=0;u<this.requiredField.length;u++){var h=this.requiredField[u];if(!(0,f.hasKey)(this.options,h))return!1}return!(!(0,f.isArray)(l)||l.length<2||!(0,f.isArray)(o)||o.length===0||((e=o[0])===null||e===void 0?void 0:e.length)===0&&((n=o[1])===null||n===void 0?void 0:n.length)===0||((0,f.each)(o,function(c,v){if(!(0,f.isArray)(c)||c.length===0){var x=t.getMockData(v);o[v]=x}}),!o[0][0][s]||!o[1][0][s]))},r.prototype.init=function(){i.prototype.init.call(this),this.theme=this.themeController.getTheme(this.options,this.type),this.drawTitle(),this.drawDescription()},r.prototype.updateConfig=function(t){this.doDestroy(),this.options=this.getOptions(t),this.processOptions(this.options)},r.prototype.changeData=function(t){t&&t.length<2||!(0,f.isArray)(t[0])||(0,f.each)(this.geomLayers,function(e,n){e.changeData(t[n])})},r.prototype.changeDataByIndex=function(t,e){if(!(0,f.isArray)(t[0])){var n=this.geomLayers[e];n.changeData(t)}},r.prototype.doDestroy=function(){(0,f.each)(this.geomLayers,function(t){t.doDestroy()}),this.geomLayers=[],(0,f.each)(this.legends,function(t){t.destroy()}),this.legends=[]},r.prototype.createLayer=function(t,e,n){var a=this.getViewRange(),o=new t((0,V.__assign)({canvas:this.canvas,container:this.container,x:a.minX,y:a.minY,width:a.width,height:a.height,data:e},n));return this.geomLayers.push(o),o},r.prototype.getLeftYAxisMax=function(){var t=this.getScaleData(0),e=this.getScaleData(1);return t.min==0&&t.max===0?Math.max(e.max,0):t.max},r.prototype.yAxis=function(t){var e=this.getScaleData(0),n=this.options.yAxis,a=t===0?n.leftConfig:n.rightConfig,o=this.colors[t],s=(0,f.clone)(a),l={title:"stroke",line:"stroke",label:"fill",tickLine:"stroke"};a.visible&&a.colorMapping&&(0,f.each)(s,function(h,c){if(!(0,f.isString)(h)&&(0,f.hasKey)(l,c)){var v=l[c];h.style||(h.style={}),h.style[v]=o}}),a.visible||(s.title.visible=!1,s.tickLine.visible=!1,s.label.visible=!1,s.line.visible=!1,s.visible=!0);var u=this.getYAxisGlobalConfig();return t===0&&e.max===0&&e.min===0&&(s.max=this.getLeftYAxisMax()),(0,f.deepMix)({},u,s)},r.prototype.getTicks=function(){for(var t=this.options.yAxis,e=this.getScaleData(0),n=(0,Or.getScale)("linear"),a=new n((0,f.deepMix)({},{min:0,max:this.getLeftYAxisMax(),nice:!0,values:e.values},{tickCount:t.tickCount})),o=a.ticks.length,s=t.max?a.max:this.getScaleData(1).max,l=s/(o-1),u=[],h=0;h<o;h++){var c=h*l;Number.isInteger(c)||(c=parseFloat(c.toFixed(1))),u.push(c)}return u},r.prototype.getScaleData=function(t){var e=this.options,n=e.data,a=e.yField,o=e.yAxis,s=[];(0,f.each)(n[t],function(h){s.push(h[a[t]])}),s.sort(function(h,c){return h-c});var l=s[0],u=o.max?o.max:s[s.length-1];return{min:l,max:u,values:s}},r.prototype.getDataByXField=function(t,e){var n=this.options,a=n.data,o=n.xField,s=a[e];return s.filter(function(l){return l[o]===t})},r.prototype.getYAxisGlobalConfig=function(){var t=this.options.yAxis,e=t.min,n=t.max,a=t.tickCount;return{min:e,max:n,tickCount:a}},r.prototype.adjustLayout=function(){var t=this,e,n,a=ji().bleeding;(0,f.isArray)(a)&&(0,f.each)(a,function(x,M){typeof a[M]=="function"&&(a[M]=a[M](t.options))});var o=this.getViewRange(),s=this.transfromPadding(this.geomLayers[0].options.padding),l=this.transfromPadding(this.geomLayers[1].options.padding),u=0,h,c;((e=this.options.legend)===null||e===void 0?void 0:e.visible)&&(h=this.legends[0].getLayoutBBox(),c=this.legends[1].getLayoutBBox(),u=h.height+gh*2);var v=s.map(function(x,M){return M===0?Math.max.apply(null,[x+u,l[M]]):Math.max.apply(null,[x,l[M]])});this.geomLayers[0].updateConfig({padding:v}),this.geomLayers[0].render(),this.geomLayers[1].updateConfig({padding:v}),this.geomLayers[1].render(),((n=this.options.legend)===null||n===void 0?void 0:n.visible)&&(this.legends[0].setLocation({x:a[3],y:o.minY+gh}),this.legends[1].setLocation({x:o.maxX-a[1]-c.width,y:o.minY+gh}))},r.prototype.transfromPadding=function(t){return typeof t=="string"||typeof t=="number"?[Number(t)]:t},r.prototype.legendFilter=function(t){var e=this,n=this.legends[t],a=n.get("group");a.on("click",function(){var o=n.get("items")[0];o.unchecked?(n.setItemState(o,"unchecked",!1),e.showLayer(t)):(n.setItemState(o,"unchecked",!0),e.hideLayer(t))})},r.prototype.hideLayer=function(t){var e=this.geomLayers[t],n=this.options.yField[t],a=e.view,o=this.getYAxisContainer(a,n);o&&o.set("visible",!1),this.setGeometryVisibility(a,!1),this.canvas.draw()},r.prototype.showLayer=function(t){var e=this.geomLayers[t],n=this.options.yField[t],a=e.view,o=this.getYAxisContainer(a,n);o&&o.set("visible",!0),this.setGeometryVisibility(a,!0),this.canvas.draw()},r.prototype.setGeometryVisibility=function(t,e){(0,f.each)(t.geometries,function(n){var a=n.container,o=n.labelsContainer;a&&a.set("visible",e),o&&o.set("visible",e)})},r.prototype.getYAxisContainer=function(t,e){var n,a=t.controllers.filter(function(l){return(0,f.hasKey)(l,"axisContainer")})[0];if(a){var o=a,s=o.axisContainer.get("children");(0,f.each)(s,function(l){var u=l.get("component").get("field");u===e&&(n=l)})}return n},r.prototype.getUnCheckedValue=function(){var t=[];return(0,f.each)(this.legends,function(e){var n=e.getItemsByState("unchecked");(0,f.each)(n,function(a){t.push(a.name)})}),t},r.prototype.drawTitle=function(){var t=this.options,e=this.layerBBox;if(this.title&&(this.title.destroy(),this.title=null),Wo(t.title)){var n=this.width,a=this.theme,o=new gl({leftMargin:e.minX+a.title.padding[3],rightMargin:e.maxX-a.title.padding[1],topMargin:e.minY+a.title.padding[0],text:t.title.text,style:(0,f.mix)(a.title,t.title.style),wrapperWidth:n-a.title.padding[3]-a.title.padding[1],container:this.container.addGroup(),theme:a,index:Wo(t.description)?0:1,plot:this,alignTo:t.title.alignTo,name:"title"});this.title=o}},r.prototype.drawDescription=function(){var t=this.options,e=this.layerBBox;if(this.description&&(this.description.destroy(),this.description=null),Wo(t.description)){var n=this.width,a=this.theme,o=0;if(this.title){var s=this.title.getBBox();o+=s.minY+s.height,o+=a.description.padding[0]}else o+=e.minY+a.title.padding[0];var l=new gl({leftMargin:e.minX+a.description.padding[3],topMargin:o,rightMargin:e.maxX-a.title.padding[1],text:t.description.text,style:(0,f.mix)(a.description,t.description.style),wrapperWidth:n-a.description.padding[3]-a.description.padding[1],container:this.container.addGroup(),theme:a,index:1,plot:this,alignTo:t.description.alignTo,name:"description"});this.description=l}},r.prototype.getViewRange=function(){this.layerBBox||(this.layerBBox=new Jr(this.x,this.y,this.width,this.height));var t=this.layerBBox.minX,e=this.layerBBox.maxX,n=this.layerBBox.minY,a=this.layerBBox.maxY,o=[this.title,this.description];return(0,f.each)(o,function(s){if(s){var l=s.position,u=s.getBBox(),h=u.minX,c=u.maxX,v=u.minY,x=u.maxY;x>=n&&x<=a&&l==="top"&&(n=x),v>=n&&v<=a&&l==="bottom"&&(a=v),c>t&&c<=e&&l==="left"&&(t=c),h>=t&&c<=e&&l==="right"&&(e=h)}}),new Jr(t,n,e-t,a-n)},r.prototype.getMockData=function(t){var e=this.options,n=e.xField,a=e.yField,o={};return o[n]="null",o[a[t]]=0,[o]},r}(pl),Zy=QB,Ky={lineSize:2,connectNull:!0,point:{visible:!1,size:3,shape:"circle",style:{stroke:"#fff"}},label:{visible:!1}},$y={visible:!0,colorMapping:!0,grid:{visible:!0},line:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoHide:!0,autoRotate:!1},title:{autoRotate:!0,visible:!1,offset:12}},Qy=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="dualLine",t}return r.getDefaultOptions=function(){return(0,f.deepMix)({},i.getDefaultOptions.call(this),{legend:{visible:!0},yAxis:{leftConfig:$y,rightConfig:$y},lineConfigs:[(0,f.deepMix)({},Ky,{color:"#5B8FF9"}),(0,f.deepMix)({},Ky,{color:"#e76c5e"})]})},r.prototype.init=function(){var t=this;if(i.prototype.init.call(this),!!this.checkData()){var e=this.options,n=e.data,a=e.meta,o=e.xField,s=e.yField,l=e.xAxis,u=e.tooltip,h=e.lineConfigs,c=e.legend,v=e.events,x=e.customMeta;this.colors=[h[0].color,h[1].color];var M=this.getYAxisGlobalConfig(),k=this.createLayer(Ms,n[0],(0,V.__assign)({meta:a,xField:o,yField:s[0],xAxis:{visible:!1},yAxis:(0,f.deepMix)({},M,{grid:{visible:!1},nice:!0},this.yAxis(0)),tooltip:{visible:!1},events:v},h[0]));k.render();var R={};R[s[1]]={ticks:this.getTicks()};var G=this.createLayer(Ms,n[1],(0,V.__assign)({xField:o,yField:s[1],meta:x?a:(0,f.deepMix)({},a,R),serieField:s[1],xAxis:l,yAxis:(0,f.deepMix)({},M,{position:"right",nice:!1},this.yAxis(1)),tooltip:(0,f.deepMix)({},{showMarkers:!1,custom:{onChange:function(N,ot){t.tooltip(N,ot)}}},u),events:v},h[1]));G.render(),c.visible&&this.customLegend(),this.adjustLayout()}},r.prototype.tooltip=function(t,e){var n=this.getUnCheckedValue();if(n.length===this.colors.length){t.style.display="none";return}else t.style.display="block";var a=this.options,o=a.yField,s=a.legend,l=(0,f.clone)(e.items[0]),u=this.getDataByXField(e.title,0)[0];u&&(0,f.findIndex)(e.items,function(h){return h.name===o[0]})<0&&e.items.push((0,V.__assign)((0,V.__assign)({},l),{mappingData:(0,f.deepMix)({},l.mappingData,{_origin:u}),data:u,name:o[0],value:u[o[0]],color:this.colors[0]})),s.visible&&(0,f.each)(this.legends,function(h,c){var v=h.get("items")[0];if(v.unchecked){var x=c===0?1:0;e.items.splice(x,1)}})},r.prototype.customLegend=function(){var t=this,e=this.options,n=e.yField,a=e.legend,o=this.colors,s=this.container.addGroup(),l=a;(0,f.each)(this.geomLayers,function(u,h){var c=(0,f.deepMix)({},{symbol:"circle",style:{r:4,fill:o[h]}},l.marker),v=[{name:n[h],unchecked:!1,marker:c}],x=new nn.Legend.Category({id:t.type,container:s,x:0,y:0,items:v,updateAutoRender:!0,itemBackground:null,itemName:l.text});x.init(),x.render(),t.legends.push(x)}),(0,f.each)(this.geomLayers,function(u,h){t.legendFilter(h)})},r}(Zy),JB=Qy;ln("dualLine",Qy);var qB=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="dualLine",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=JB.getDefaultOptions,r}(Kr),Jy=qB,tD={color:"#f5bc32",lineSize:4,connectNull:!0,point:{visible:!1,size:3,shape:"circle",style:{stroke:"#fff"}},label:{visible:!1}},eD={color:"#5B8FF9"},qy={visible:!0,colorMapping:!0,grid:{visible:!0},line:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoHide:!0,autoRotate:!1},title:{autoRotate:!0,visible:!1,spacing:12}},t0=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="columnLine",t.legends=[],t}return r.getDefaultOptions=function(){return(0,f.deepMix)({},i.getDefaultOptions.call(this),{yAxis:{leftConfig:qy,rightConfig:qy},lineConfig:tD,columnConfig:eD,legend:{visible:!0}})},r.prototype.beforeInit=function(){var t,e,n=this,a=n.options,o=n.initialOptions;if(a.lineSeriesField&&(a.yAxis.rightConfig.colorMapping=!1,((t=o.lineConfig)===null||t===void 0?void 0:t.lineSize)||(a.lineConfig.lineSize=3),!((e=o.lineConfig)===null||e===void 0?void 0:e.color))){var s=ji(),l=s.colors,u=s.colors_20,h=this.getValueBySeriesField(),c=h.length>l.length?u:l,v=[];(0,f.each)(h,function(x,M){v.push(c[M+1])}),a.lineConfig.color=v}},r.prototype.init=function(){if(i.prototype.init.call(this),!!this.checkData()){var t=this.options,e=t.data,n=t.meta,a=t.xField,o=t.yField,s=t.lineSeriesField,l=t.legend,u=t.lineConfig,h=t.columnConfig,c=t.events,v=t.customMeta;this.colors=[h.color,u.color],this.drawColumn();var x={};x[o[1]]={ticks:this.getTicks()};var M=this.createLayer(Ms,e[1],(0,V.__assign)({xField:a,yField:o[1],seriesField:s,meta:v?n:(0,f.deepMix)({},n,x),xAxis:{visible:!1},yAxis:(0,f.deepMix)({},{position:"right",grid:{visible:!1},nice:!0},this.yAxis(1)),tooltip:{visible:!1},legend:{visible:!1},events:c},u));M.render(),l.visible&&this.customLegend(),this.adjustLayout()}},r.prototype.drawColumn=function(){var t=this,e=this.options,n=e.data,a=e.xField,o=e.yField,s=e.xAxis,l=e.tooltip,u=e.columnConfig,h=e.meta,c=e.events,v=this.createLayer(Qo,n[0],(0,V.__assign)({xField:a,yField:o[0],meta:h,xAxis:s,yAxis:(0,f.deepMix)({},{grid:{visible:!0},nice:!0},this.yAxis(0)),tooltip:(0,f.deepMix)({},{showMarkers:!1,custom:{onChange:function(x,M){t.tooltip(x,M)}}},l),events:c},u));v.render()},r.prototype.tooltip=function(t,e){var n=this,a=this.options,o=a.xField,s=a.yField,l=a.tooltip,u=(0,f.clone)(e.items[0]),h=this.getDataByXField(e.title,1),c=(0,f.get)(l,"formatter");if(h&&(0,f.each)(h,function(R,G){var N=n.geomLayers[1].options.seriesField,ot=N?R[N]:s[1],ut=c?c(R[o],R[s[1]],R[N]):{name:ot,value:R[s[1]]};e.items.push((0,V.__assign)((0,V.__assign)((0,V.__assign)((0,V.__assign)({},u),{mappingData:(0,f.deepMix)({},u.mappingData,{_origin:h}),data:R}),ut),{color:(0,f.isArray)(n.colors[1])?n.colors[1][G]:n.colors[1]}))}),this.options.legend.visible){var v=this.getUnCheckedValue(),x=this.legends[0].get("items").length+this.legends[1].get("items").length;if(v.length===x){t.style.display="none";return}else t.style.display="block";var M=[],k=[];(0,f.each)(e.items,function(R){var G=R.name;!(0,f.contains)(M,G)&&!(0,f.contains)(v,G)&&(M.push(G),k.push(R))}),(0,f.each)(e.items,function(R,G){G<k.length?e.items[G]=k[G]:e.items.pop()})}},r.prototype.customLegend=function(){var t=this,e=this.options,n=e.yField,a=e.legend,o=this.colors,s=this.container.addGroup(),l=a,u=["square","circle"];(0,f.each)(this.geomLayers,function(h,c){var v;if(h.options.seriesField){var x=t.getValueBySeriesField();v=t.createNormalLegend(x,u[c],o[c],l,s)}else v=t.createSingleLegend(n[c],u[c],o[c],l,s);t.legends.push(v)}),(0,f.each)(this.geomLayers,function(h,c){h.options.seriesField?t.multipleLegendFilter(c,h.options.seriesField):t.legendFilter(c)})},r.prototype.createSingleLegend=function(t,e,n,a,o){var s=(0,f.deepMix)({},{symbol:e,style:{r:4,fill:n}},a.marker),l=[{name:t,unchecked:!1,marker:s}],u=new nn.Legend.Category({id:this.type,container:o,x:0,y:0,items:l,updateAutoRender:!0,itemBackground:null,itemName:a.text});return u.init(),u.render(),u},r.prototype.createNormalLegend=function(t,e,n,a,o){var s=[];(0,f.each)(t,function(u,h){s.push({name:u,unchecked:!1,marker:{symbol:e,style:{r:4,fill:n[h]}}})});var l=new nn.Legend.Category({id:this.type,container:o,x:0,y:0,items:s,updateAutoRender:!0,itemBackground:null,itemName:a.text,offsetX:0});return l.init(),l.render(),l},r.prototype.multipleLegendFilter=function(t,e){var n=this,a=this.legends[t],o=[],s=a.get("group"),l=!1;s.on("click",function(u){var h=n.geomLayers[t].view,c=u.target.get("delegateObject").item;c.unchecked?(l===!0&&(n.showLayer(t),l=!1),(0,f.pull)(o,c.name),h.filter(c.value,function(v){return!(0,f.contains)(o,v)}),h.render(),a.setItemState(c,"unchecked",!1)):(a.setItemState(c,"unchecked",!0),o.push(c.name),o.length===n.legends[t].get("items").length?(n.hideLayer(t),l=!0):(h.filter(e,function(v){return!(0,f.contains)(o,v)}),h.render())),n.canvas.draw()})},r.prototype.getValueBySeriesField=function(){var t=this.options,e=t.lineSeriesField,n=t.data,a=n[1],o=[];return(0,f.each)(a,function(s){var l=s[e];(0,f.contains)(o,l)||o.push(l)}),o},r}(Zy),yh=t0;ln("columnLine",t0);var rD=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="columnLine",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=yh.getDefaultOptions,r}(Kr),e0=rD,nD={color:"#f5bc32",lineSize:4,connectNull:!0,point:{visible:!1,size:3,shape:"circle",style:{stroke:"#fff"}},label:{visible:!1}},iD={color:["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E8684A","#6DC8EC","#9270CA","#FF9D4D","#269A99","#FF99C3"]},r0={visible:!0,colorMapping:!0,grid:{visible:!0},line:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoHide:!0,autoRotate:!1},title:{autoRotate:!0,visible:!1,spacing:12}},n0=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="groupedColumnLine",t.requiredField=["xField","yField","columnGroupField"],t}return r.getDefaultOptions=function(){return(0,f.deepMix)({},i.getDefaultOptions.call(this),{yAxis:{leftConfig:(0,f.deepMix)({},r0,{colorMapping:!1}),rightConfig:r0},lineConfig:nD,columnConfig:iD,legend:{visible:!0}})},r.prototype.beforeInit=function(){var t,e,n=this,a=n.options,o=n.initialOptions,s=this.getValueByGroupField();if(a.lineSeriesField&&(a.yAxis.rightConfig.colorMapping=!1,((t=o.lineConfig)===null||t===void 0?void 0:t.lineSize)||(a.lineConfig.lineSize=3),!((e=o.lineConfig)===null||e===void 0?void 0:e.color))){var l=ji(),u=l.colors,h=l.colors_20,c=this.getValueBySeriesField(),v=c.length>u.length?h:u,x=[],M=s.length;(0,f.each)(c,function(R,G){x.push(v[G+M])}),a.lineConfig.color=x}var k=this.options.columnConfig.color;this.options.columnConfig.color=k.slice(0,s.length)},r.prototype.drawColumn=function(){var t=this,e=this.options,n=e.data,a=e.xField,o=e.yField,s=e.columnGroupField,l=e.xAxis,u=e.tooltip,h=e.columnConfig,c=e.events,v=this.createLayer(ih,n[0],(0,V.__assign)({xField:a,yField:o[0],groupField:s,xAxis:l,yAxis:(0,f.deepMix)({},this.yAxis(0),{grid:{visible:!0},nice:!0}),legend:{visible:!1},tooltip:(0,f.deepMix)({},u,{showMarkers:!1,custom:{onChange:function(x,M){t.tooltip(x,M)}}}),events:c},h));v.render()},r.prototype.customLegend=function(){var t=this,e=this.options,n=e.yField,a=e.legend,o=this.colors,s=this.container.addGroup(),l=a,u=["square","circle"];(0,f.each)(this.geomLayers,function(h,c){var v;if(h.options.seriesField){var x=t.getValueBySeriesField();v=t.createNormalLegend(x,u[c],o[c],l,s)}else if(h.options.groupField){var x=t.getValueByGroupField();v=t.createNormalLegend(x,u[c],o[c],l,s)}else v=t.createSingleLegend(n[c],u[c],o[c],l,s);t.legends.push(v)}),(0,f.each)(this.geomLayers,function(h,c){h.options.seriesField?t.multipleLegendFilter(c,h.options.seriesField):h.options.groupField?t.multipleLegendFilter(c,h.options.groupField):t.legendFilter(c)})},r.prototype.getValueByGroupField=function(){var t=this.options,e=t.columnGroupField,n=t.data,a=n[0],o=[];return(0,f.each)(a,function(s){var l=s[e];(0,f.contains)(o,l)||o.push(l)}),o},r.prototype.getMockData=function(t){var e=this.options,n=e.xField,a=e.yField,o=e.columnGroupField,s={};s[n]="null_1",s[a[t]]=0,s[o]="null_a";var l={};return l[n]="null_1",l[a[t]]=1,l[o]="null_a",[s,l]},r}(yh),aD=n0;ln("groupedColumnLine",n0);var oD=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="groupedColumnLine",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=aD.getDefaultOptions,r}(Kr),i0=oD,sD={color:"#f5bc32",lineSize:4,connectNull:!0,point:{visible:!1,size:3,shape:"circle",style:{stroke:"#fff"}},label:{visible:!1}},lD={color:["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E8684A","#6DC8EC","#9270CA","#FF9D4D","#269A99","#FF99C3"]},a0={visible:!0,colorMapping:!0,grid:{visible:!0},line:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoHide:!0,autoRotate:!1},title:{autoRotate:!0,visible:!1,spacing:12}},o0=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="groupedColumnLine",t.requiredField=["xField","yField","columnStackField"],t}return r.getDefaultOptions=function(){return(0,f.deepMix)({},i.getDefaultOptions.call(this),{yAxis:{leftConfig:(0,f.deepMix)({},a0,{colorMapping:!1}),rightConfig:a0},lineConfig:sD,columnConfig:lD,legend:{visible:!0}})},r.prototype.beforeInit=function(){var t,e,n=this.getValueByStackField(),a=this,o=a.options,s=a.initialOptions;if(o.lineSeriesField&&(o.yAxis.rightConfig.colorMapping=!1,((t=s.lineConfig)===null||t===void 0?void 0:t.lineSize)||(o.lineConfig.lineSize=3),!((e=s.lineConfig)===null||e===void 0?void 0:e.color))){var l=ji(),u=l.colors,h=l.colors_20,c=this.getValueBySeriesField(),v=c.length>u.length?h:u,x=[],M=n.length;(0,f.each)(c,function(R,G){x.push(v[G+M])}),o.lineConfig.color=x}var k=this.options.columnConfig.color;this.options.columnConfig.color=k.slice(0,n.length)},r.prototype.drawColumn=function(){var t=this,e=this.options,n=e.data,a=e.xField,o=e.yField,s=e.columnStackField,l=e.xAxis,u=e.tooltip,h=e.columnConfig,c=e.events,v=this.createLayer(Bl,n[0],(0,V.__assign)({xField:a,yField:o[0],stackField:s,xAxis:l,yAxis:(0,f.deepMix)({},this.yAxis(0),{grid:{visible:!0},nice:!0}),legend:{visible:!1},tooltip:(0,f.deepMix)({},u,{showMarkers:!1,custom:{onChange:function(x,M){t.tooltip(x,M)}}}),events:c},h));v.render()},r.prototype.customLegend=function(){var t=this,e=this.options,n=e.yField,a=e.legend,o=this.colors,s=this.container.addGroup(),l=a,u=["square","circle"];(0,f.each)(this.geomLayers,function(h,c){var v;if(h.options.seriesField){var x=t.getValueBySeriesField();v=t.createNormalLegend(x,u[c],o[c],l,s)}else if(h.options.stackField){var x=t.getValueByStackField();v=t.createNormalLegend(x,u[c],o[c],l,s)}else v=t.createSingleLegend(n[c],u[c],o[c],l,s);t.legends.push(v)}),(0,f.each)(this.geomLayers,function(h,c){h.options.seriesField?t.multipleLegendFilter(c,h.options.seriesField):h.options.stackField?t.multipleLegendFilter(c,h.options.stackField):t.legendFilter(c)})},r.prototype.getValueByStackField=function(){var t=this.options,e=t.columnStackField,n=t.data,a=n[0],o=[];return(0,f.each)(a,function(s){var l=s[e];(0,f.contains)(o,l)||o.push(l)}),o},r.prototype.getUnCheckedValue=function(){var t=[];return(0,f.each)(this.legends,function(e){var n=e.getItemsByState("unchecked");(0,f.each)(n,function(a){t.push(a.name)})}),t},r.prototype.getMockData=function(t){var e=this.options,n=e.xField,a=e.yField,o=e.columnStackField,s={};s[n]="null_1",s[a[t]]=0,s[o]="null_a";var l={};return l[n]="null_1",l[a[t]]=1,l[o]="null_a",[s,l]},r}(yh),uD=o0;ln("stackedColumnLine",o0);var fD=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,f.deepMix)({},t);e.type="stackedColumnLine",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=uD.getDefaultOptions,r}(Kr),s0=fD,hD=function(r){return r.charAt(0).toUpperCase()+r.slice(1).replace(/-(\w)/g,function(t,e){return e.toUpperCase()})},CY=function(r,t){return JSON.stringify(r)===JSON.stringify(t)},cD=function(r,t){return new Set(r.concat(t)).size===r.length},vD=function(r,t){var e={}.toString;return e.call(r)==="[object "+t+"]"},dD=function(r){if(!r)return r;var t={};for(var e in r)t[e]=r[e];return t},Ts={sameArray:cD,camelCase:hD,isType:vD,clone:dD},pD=p(73935),gD=function(r){var t=document.createElement("div");return t.className="g2-tooltip eva-charts-tootip",pD.render(r,t),t},mh=gD;function l0(i,r){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(i);r&&(e=e.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),t.push.apply(t,e)}return t}function yD(i){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?l0(Object(t),!0).forEach(function(e){mD(i,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):l0(Object(t)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(t,e))})}return i}function mD(i,r,t){return r in i?Object.defineProperty(i,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[r]=t,i}function fn(i,r){var t=(0,z.useRef)(),e=(0,z.useRef)(null),n=function(){var l,u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"image/png",h=arguments.length>1?arguments[1]:void 0;return(l=t.current)===null||l===void 0?void 0:l.canvas.cfg.el.toDataURL(u,h)},a=function(l){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"image/png",h=arguments.length>2?arguments[2]:void 0;try{var c;l&&l.indexOf(".")===-1&&(l="".concat(l,".png"));var v=l;if(!v){var x,M=r;v="".concat((M==null||(x=M.title)===null||x===void 0?void 0:x.text)||(i==null?void 0:i.name),".png")}var k=(c=t.current)===null||c===void 0?void 0:c.canvas.cfg.el.toDataURL(u,h),R=document.createElement("a");R.href=k,R.download=v,document.body.appendChild(R),R.click(),document.body.removeChild(R),R=null}catch(G){console.log(G)}},o=function(){var l,u,h,c,v;if((l=r.statistic)===null||l===void 0?void 0:l.htmlContent){var x=r.statistic.htmlContent;r.statistic.htmlContent=function(){var k=x.apply(void 0,arguments);return Ts.isType(k,"String")||Ts.isType(k,"Number")||Ts.isType(k,"HTMLDivElement")?k:mh(k)}}if(((u=r.tooltip)===null||u===void 0||(h=u.custom)===null||h===void 0?void 0:h.container)&&(r.tooltip.custom.container=mh(r.tooltip.custom.container)),(c=r.tooltip)===null||c===void 0||(v=c.custom)===null||v===void 0?void 0:v.customContent){var M=r.tooltip.custom.customContent;r.tooltip.custom.customContent=function(k,R){var G=M(k,R)||"";return Ts.isType(G,"HTMLDivElement")?G:mh(G)}}};return(0,z.useEffect)(function(){t.current&&(r.onlyChangeData?t.current.changeData((r==null?void 0:r.data)||[]):(o(),t.current.updateConfig(r),t.current.render()))},[(r==null?void 0:r.memoData)?r.memoData:JSON.stringify(r)]),(0,z.useEffect)(function(){if(!e.current)return function(){return null};o();var s=new i(e.current,yD({},r));return s.__proto__.toDataURL=function(l,u){return n(l,u)},s.__proto__.downloadImage=function(l,u,h){return a(l,u,h)},s.render(),t.current=Ts.clone(s),function(){return s.destroy()}},[]),{chart:t,container:e,toDataURL:n,downloadImage:a}}var xD=z.createContext({});function Hl(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Hl=function(t){return typeof t}:Hl=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hl(i)}function bD(i,r){if(!(i instanceof r))throw new TypeError("Cannot call a class as a function")}function u0(i,r){for(var t=0;t<r.length;t++){var e=r[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(i,e.key,e)}}function wD(i,r,t){return r&&u0(i.prototype,r),t&&u0(i,t),i}function SD(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(r&&r.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),r&&xh(i,r)}function xh(i,r){return xh=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},xh(i,r)}function CD(i){var r=_D();return function(){var e=Wl(i),n;if(r){var a=Wl(this).constructor;n=Reflect.construct(e,arguments,a)}else n=e.apply(this,arguments);return MD(this,n)}}function MD(i,r){return r&&(Hl(r)==="object"||typeof r=="function")?r:ED(i)}function ED(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function _D(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(i){return!1}}function Wl(i){return Wl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Wl(i)}var AD=function(i){SD(t,i);var r=CD(t);function t(){var e;return bD(this,t),e=r.apply(this,arguments),e.state={hasError:!1},e.renderError=function(n){switch(n){default:return z.createElement("h5",null,"\u7EC4\u4EF6\u51FA\u9519\u4E86\uFF0C\u8BF7\u6838\u67E5\u540E\u91CD\u8BD5\uFF1A ",n.message)}},e}return wD(t,[{key:"render",value:function(){return this.state.hasError?this.renderError(this.state.error):this.props.children}}],[{key:"getDerivedStateFromError",value:function(n){return{hasError:!0,error:n}}},{key:"getDerivedStateFromProps",value:function(n,a){return a.children!==n.children?{children:n.children,hasError:!1,error:void 0}:null}}]),t}(z.Component),an=AD,MY=xD.Provider;function TD(i,r){if(i==null)return{};var t=PD(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function PD(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var f0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=TD(i,["chartRef","style","className"]),s=fn(sg,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});f0.defaultProps=sg.getDefaultOptions();var LD=f0;function OD(i,r){if(i==null)return{};var t=ID(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function ID(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var h0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=OD(i,["chartRef","style","className"]),s=fn(Xp,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});h0.defaultProps=Xp.getDefaultOptions();var kD=h0;function BD(i,r){if(i==null)return{};var t=DD(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function DD(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var c0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=BD(i,["chartRef","style","className"]),s=fn(wy,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});c0.defaultProps=wy.getDefaultOptions();var FD=c0;function RD(i,r){if(i==null)return{};var t=ND(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function ND(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var v0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=RD(i,["chartRef","style","className"]),s=fn(Cy,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});v0.defaultProps=Cy.getDefaultOptions();var GD=v0;function YD(i,r){if(i==null)return{};var t=zD(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function zD(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var XD=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=YD(i,["chartRef","style","className"]),s=fn(gB,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))}),VD=XD;function HD(i,r){if(i==null)return{};var t=WD(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function WD(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var d0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=HD(i,["chartRef","style","className"]),s=fn(yg,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});d0.defaultProps=yg.getDefaultOptions();var p0=d0;function jD(i,r){if(i==null)return{};var t=UD(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function UD(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var g0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=jD(i,["chartRef","style","className"]),s=fn(e0,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});g0.defaultProps=e0.getDefaultOptions();var ZD=g0;function KD(i,r){if(i==null)return{};var t=$D(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function $D(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var y0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=KD(i,["chartRef","style","className"]),s=fn(Gg,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});y0.defaultProps=Gg.getDefaultOptions();var QD=y0;function JD(i,r){if(i==null)return{};var t=qD(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function qD(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var m0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=JD(i,["chartRef","style","className"]),s=fn(vy,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});m0.defaultProps=vy.getDefaultOptions();var x0=m0;function t5(i,r){if(i==null)return{};var t=e5(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function e5(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var b0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=t5(i,["chartRef","style","className"]),s=fn(Jy,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});b0.defaultProps=Jy.getDefaultOptions();var r5=b0;function n5(i,r){if(i==null)return{};var t=i5(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function i5(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var w0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=n5(i,["chartRef","style","className"]),s=fn(Iy,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});w0.defaultProps=Iy.getDefaultOptions();var a5=w0;function o5(i,r){if(i==null)return{};var t=s5(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function s5(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var l5=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=o5(i,["chartRef","style","className"]),s=fn(gI,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))}),u5=l5;function f5(i,r){if(i==null)return{};var t=h5(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function h5(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var S0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=f5(i,["chartRef","style","className"]),s=fn(Ly,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});S0.defaultProps=Ly.getDefaultOptions();var c5=S0;function v5(i,r){if(i==null)return{};var t=d5(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function d5(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var C0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=v5(i,["chartRef","style","className"]),s=fn(Up,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});C0.defaultProps=Up.getDefaultOptions();var p5=C0;function g5(i,r){if(i==null)return{};var t=y5(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function y5(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var M0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=g5(i,["chartRef","style","className"]),s=fn(xg,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});M0.defaultProps=xg.getDefaultOptions();var m5=M0;function x5(i,r){if(i==null)return{};var t=b5(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function b5(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var E0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=x5(i,["chartRef","style","className"]),s=fn(i0,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});E0.defaultProps=i0.getDefaultOptions();var w5=E0;function S5(i,r){if(i==null)return{};var t=C5(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function C5(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var _0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=S5(i,["chartRef","style","className"]),s=fn(qg,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});_0.defaultProps=qg.getDefaultOptions();var M5=_0;function E5(i,r){if(i==null)return{};var t=_5(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function _5(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var A0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=E5(i,["chartRef","style","className"]),s=fn(Vg,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});A0.defaultProps=Vg.getDefaultOptions();var A5=A0;function T5(i,r){if(i==null)return{};var t=P5(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function P5(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var T0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=T5(i,["chartRef","style","className"]),s=fn(uy,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});T0.defaultProps=uy.getDefaultOptions();var L5=T0;function O5(i,r){if(i==null)return{};var t=I5(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function I5(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var P0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=O5(i,["chartRef","style","className"]),s=fn(Sp,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});P0.defaultProps=Sp.getDefaultOptions();var L0=P0;function k5(i,r){if(i==null)return{};var t=B5(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function B5(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var O0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=k5(i,["chartRef","style","className"]),s=fn(sy,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});O0.defaultProps=sy.getDefaultOptions();var D5=O0;function F5(i,r){if(i==null)return{};var t=R5(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function R5(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var I0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=F5(i,["chartRef","style","className"]),s=fn(By,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});I0.defaultProps=By.getDefaultOptions();var N5=I0;function G5(i,r){if(i==null)return{};var t=Y5(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function Y5(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var k0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=G5(i,["chartRef","style","className"]),s=fn(vg,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});k0.defaultProps=vg.getDefaultOptions();var z5=k0;function X5(i,r){if(i==null)return{};var t=V5(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function V5(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var B0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=X5(i,["chartRef","style","className"]),s=fn($p,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});B0.defaultProps=$p.getDefaultOptions();var H5=B0;function W5(i,r){if(i==null)return{};var t=j5(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function j5(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var D0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=W5(i,["chartRef","style","className"]),s=fn(Lg,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});D0.defaultProps=Lg.getDefaultOptions();var U5=D0;function Z5(i,r){if(i==null)return{};var t=K5(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function K5(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var F0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=Z5(i,["chartRef","style","className"]),s=fn(Fg,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});F0.defaultProps=Fg.getDefaultOptions();var $5=F0;function Q5(i,r){if(i==null)return{};var t=J5(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function J5(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var R0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=Q5(i,["chartRef","style","className"]),s=fn(Gy,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});R0.defaultProps=Gy.getDefaultOptions();var N0=R0;function q5(i,r){if(i==null)return{};var t=tF(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function tF(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var G0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=q5(i,["chartRef","style","className"]),s=fn(ey,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});G0.defaultProps=ey.getDefaultOptions();var eF=G0;function rF(i,r){if(i==null)return{};var t=nF(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function nF(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var Y0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=rF(i,["chartRef","style","className"]),s=fn(rg,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});Y0.defaultProps=rg.getDefaultOptions();var iF=Y0;function aF(i,r){if(i==null)return{};var t=oF(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function oF(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var z0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=aF(i,["chartRef","style","className"]),s=fn(Ag,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});z0.defaultProps=Ag.getDefaultOptions();var sF=z0;function lF(i,r){if(i==null)return{};var t=uF(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function uF(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var X0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=lF(i,["chartRef","style","className"]),s=fn(zy,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});X0.defaultProps=zy.getDefaultOptions();var V0=X0;function fF(i,r){if(i==null)return{};var t=hF(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function hF(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var H0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=fF(i,["chartRef","style","className"]),s=fn(Wg,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});H0.defaultProps=Wg.getDefaultOptions();var cF=H0;function vF(i,r){if(i==null)return{};var t=dF(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function dF(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var W0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=vF(i,["chartRef","style","className"]),s=fn(xy,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});W0.defaultProps=xy.getDefaultOptions();var pF=W0;function gF(i,r){if(i==null)return{};var t=yF(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function yF(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var j0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=gF(i,["chartRef","style","className"]),s=fn(fg,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});j0.defaultProps=fg.getDefaultOptions();var mF=j0;function xF(i,r){if(i==null)return{};var t=bF(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function bF(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var U0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=xF(i,["chartRef","style","className"]),s=fn(Hp,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});U0.defaultProps=Hp.getDefaultOptions();var wF=U0;function SF(i,r){if(i==null)return{};var t=CF(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function CF(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var Z0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=SF(i,["chartRef","style","className"]),s=fn(Sg,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});Z0.defaultProps=Sg.getDefaultOptions();var MF=Z0;function EF(i,r){if(i==null)return{};var t=_F(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function _F(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var K0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=EF(i,["chartRef","style","className"]),s=fn(s0,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});K0.defaultProps=s0.getDefaultOptions();var AF=K0;function TF(i,r){if(i==null)return{};var t=PF(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function PF(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var $0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=TF(i,["chartRef","style","className"]),s=fn(Qg,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});$0.defaultProps=Qg.getDefaultOptions();var LF=$0;function OF(i,r){if(i==null)return{};var t=IF(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function IF(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var Q0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=OF(i,["chartRef","style","className"]),s=fn(Dp,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});Q0.defaultProps=Dp.getDefaultOptions();var kF=Q0;function BF(i,r){if(i==null)return{};var t=DF(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function DF(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var J0=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=BF(i,["chartRef","style","className"]),s=fn(Wy,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});J0.defaultProps=Wy.getDefaultOptions();var q0=J0;function FF(i,r){if(i==null)return{};var t=RF(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function RF(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var tm=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=FF(i,["chartRef","style","className"]),s=fn(Vy,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});tm.defaultProps=Vy.getDefaultOptions();var em=tm;function NF(i,r){if(i==null)return{};var t=GF(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function GF(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var rm=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=NF(i,["chartRef","style","className"]),s=fn(Uy,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});rm.defaultProps=Uy.getDefaultOptions();var YF=rm;function zF(i,r){if(i==null)return{};var t=XF(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function XF(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var nm=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=zF(i,["chartRef","style","className"]),s=fn(kp,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});nm.defaultProps=kp.getDefaultOptions();var VF=nm;function HF(i,r){if(i==null)return{};var t=WF(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function WF(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var im=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=HF(i,["chartRef","style","className"]),s=fn(gy,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))});im.defaultProps=gy.getDefaultOptions();var jF=im;function UF(i,r){if(i==null)return{};var t=ZF(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function ZF(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var KF=(0,z.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=UF(i,["chartRef","style","className"]),s=fn(eI,o),l=s.chart,u=s.container;return(0,z.useEffect)(function(){t&&(t.current=l.current)},[l.current]),(0,z.useImperativeHandle)(r,function(){return{getChart:function(){return l.current}}}),z.createElement(an,null,z.createElement("div",{className:a,style:n,ref:u}))}),$F=KF,QF={i8:"3.8.5"},$n=p(50229),JF={getDefaultCfg:function(){return{}},getEvents:function(){return{}},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(r){var t=this,e=this.events;this.graph=r,(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&r.get("canvas").set("draggable",!0),(0,Tn.default)(e,function(n,a){r.on(a,n)}),document.addEventListener("visibilitychange",function(){t.keydown=!1})},unbind:function(r){var t=this.events;(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&r.get("canvas").set("draggable",!1),(0,Tn.default)(t,function(e,n){r.off(n,e)})},get:function(r){return this[r]},set:function(r,t){return this[r]=t,this}},qF=function(){function i(){}return i.registerBehavior=function(r,t){if(!t)throw new Error("please specify handler for this behavior: "+r);var e=(0,$n.d9)(JF);Object.assign(e,t);var n=function(o){var s=this;Object.assign(this,this.getDefaultCfg(),o);var l=this.getEvents();this.events=null;var u={};l&&((0,$n.S6)(l,function(h,c){u[c]=(0,$n.Ko)(s,h)}),this.events=u)};n.prototype=e,i.types[r]=n},i.hasBehavior=function(r){return!!i.types[r]},i.getBehavior=function(r){return i.types[r]},i.types={},i}(),bh=qF,wh;(function(i){i.CLICK="click",i.DBLCLICK="dblclick",i.MOUSEDOWN="mousedown",i.MOUDEUP="mouseup",i.CONTEXTMENU="contextmenu",i.MOUSEENTER="mouseenter",i.MOUSEOUT="mouseout",i.MOUSEOVER="mouseover",i.MOUSEMOVE="mousemove",i.MOUSELEAVE="mouseleave",i.DRAGSTART="dragstart",i.DRAGEND="dragend",i.DRAG="drag",i.DRAGENTER="dragenter",i.DRAGLEAVE="dragleave",i.DRAGOVER="dragover",i.DRAGOUT="dragout",i.DDROP="drop",i.KEYUP="keyup",i.KEYDOWN="keydown",i.WHEEL="wheel",i.FOCUS="focus",i.BLUR="blur",i.TOUCHSTART="touchstart",i.TOUCHMOVE="touchmove",i.TOUCHEND="touchend",i.NODE_CONTEXTMENU="node:contextmenu",i.NODE_CLICK="node:click",i.NODE_DBLCLICK="node:dblclick",i.NODE_MOUSEDOWN="node:mousedown",i.NODE_MOUSEUP="node:mouseup",i.NODE_MOUSEENTER="node:mouseenter",i.NODE_MOUSELEAVE="node:mouseleave",i.NODE_MOUSEMOVE="node:mousemove",i.NODE_MOUSEOUT="node:mouseout",i.NODE_MOUSEOVER="node:mouseover",i.NODE_DROP="node:drop",i.NODE_DRAGOVER="node:dragover",i.NODE_DRAGENTER="node:dragenter",i.NODE_DRAGLEAVE="node:dragleave",i.NODE_DRAGSTART="node:dragstart",i.NODE_DRAG="node:drag",i.NODE_DRAGEND="node:dragend",i.COMBO_CONTEXTMENU="combo:contextmenu",i.COMBO_CLICK="combo:click",i.COMBO_DBLCLICK="combo:dblclick",i.COMBO_MOUSEDOWN="combo:mousedown",i.COMBO_MOUSEUP="combo:mouseup",i.COMBO_MOUSEENTER="combo:mouseenter",i.COMBO_MOUSELEAVE="combo:mouseleave",i.COMBO_MOUSEMOVE="combo:mousemove",i.COMBO_MOUSEOUT="combo:mouseout",i.COMBO_MOUSEOVER="combo:mouseover",i.COMBO_DROP="combo:drop",i.COMBO_DRAGOVER="combo:dragover",i.COMBO_DRAGENTER="combo:dragenter",i.COMBO_DRAGLEAVE="combo:dragleave",i.COMBO_DRAGSTART="combo:dragstart",i.COMBO_DRAG="combo:drag",i.COMBO_DRAGEND="combo:dragend",i.EDGE_CONTEXTMENU="edge:contextmenu",i.EDGE_CLICK="edge:click",i.EDGE_DBLCLICK="edge:dblclick",i.EDGE_MOUSEDOWN="edge:mousedown",i.EDGE_MOUSEUP="edge:mouseup",i.EDGE_MOUSEENTER="edge:mouseenter",i.EDGE_MOUSELEAVE="edge:mouseleave",i.EDGE_MOUSEMOVE="edge:mousemove",i.EDGE_MOUSEOUT="edge:mouseout",i.EDGE_MOUSEOVER="edge:mouseover",i.EDGE_DROP="edge:drop",i.EDGE_DRAGOVER="edge:dragover",i.EDGE_DRAGENTER="edge:dragenter",i.EDGE_DRAGLEAVE="edge:dragleave",i.CANVAS_CONTEXTMENU="canvas:contextmenu",i.CANVAS_CLICK="canvas:click",i.CANVAS_DBLCLICK="canvas:dblclick",i.CANVAS_MOUSEDOWN="canvas:mousedown",i.CANVAS_MOUSEUP="canvas:mouseup",i.CANVAS_MOUSEENTER="canvas:mouseenter",i.CANVAS_MOUSELEAVE="canvas:mouseleave",i.CANVAS_MOUSEMOVE="canvas:mousemove",i.CANVAS_MOUSEOUT="canvas:mouseout",i.CANVAS_MOUSEOVER="canvas:mouseover",i.CANVAS_DROP="canvas:drop",i.CANVAS_DRAGENTER="canvas:dragenter",i.CANVAS_DRAGLEAVE="canvas:dragleave",i.CANVAS_DRAGSTART="canvas:dragstart",i.CANVAS_DRAG="canvas:drag",i.CANVAS_DRAGEND="canvas:dragend",i.BEFORERENDER="beforerender",i.AFTERRENDER="afterrender",i.BEFOREADDITEM="beforeadditem",i.AFTERADDITEM="afteradditem",i.BEFOREREMOVEITEM="beforeremoveitem",i.AFTERREMOVEITEM="afterremoveitem",i.BEFOREUPDATEITEM="beforeupdateitem",i.AFTERUPDATEITEM="afterupdateitem",i.BEFOREITEMVISIBILITYCHANGE="beforeitemvisibilitychange",i.AFTERITEMVISIBILITYCHANGE="afteritemvisibilitychange",i.BEFOREITEMSTATECHANGE="beforeitemstatechange",i.AFTERITEMSTATECHANGE="afteritemstatechange",i.BEFOREITEMREFRESH="beforeitemrefresh",i.AFTERITEMREFRESH="afteritemrefresh",i.BEFOREITEMSTATESCLEAR="beforeitemstatesclear",i.AFTERITEMSTATESCLEAR="afteritemstatesclear",i.BEFOREMODECHANGE="beforemodechange",i.AFTERMODECHANGE="aftermodechange",i.BEFORELAYOUT="beforelayout",i.AFTERLAYOUT="afterlayout",i.BEFORECREATEEDGE="beforecreateedge",i.AFTERCREATEEDGE="aftercreateedge",i.BEFOREGRAPHREFRESHPOSITION="beforegraphrefreshposition",i.AFTERGRAPHREFRESHPOSITION="aftergraphrefreshposition",i.BEFOREGRAPHREFRESH="beforegraphrefresh",i.AFTERGRAPHREFRESH="aftergraphrefresh",i.BEFOREANIMATE="beforeanimate",i.AFTERANIMATE="afteranimate",i.BEFOREPAINT="beforepaint",i.AFTERPAINT="afterpaint",i.GRAPHSTATECHANGE="graphstatechange",i.AFTERACTIVATERELATIONS="afteractivaterelations",i.NODESELECTCHANGE="nodeselectchange",i.TOOLTIPCHANGE="tooltipchange",i.WHEELZOOM="wheelzoom",i.VIEWPORTCHANGE="viewportchange",i.DRAGNODEEND="dragnodeend",i.STACKCHANGE="stackchange"})(wh||(wh={}));var La=p(16185),tR=p(21885),eR=function(i){(0,V.__extends)(r,i);function r(t,e){var n=i.call(this,t,e)||this;return n.item=e.item,n.canvasX=e.canvasX,n.canvasY=e.canvasY,n.wheelDelta=e.wheelDelta,n.detail=e.detail,n}return r}(tR.Z),Sh=function(r){var t=0,e=0,n=0,a=0;if((0,La.default)(r))t=e=n=a=r;else if((0,Cn.default)(r)){var o=parseInt(r,10);t=e=n=a=o}else(0,Ri.default)(r)&&(t=r[0],n=(0,Fi.default)(r[1])?r[0]:r[1],a=(0,Fi.default)(r[2])?r[0]:r[2],e=(0,Fi.default)(r[3])?n:r[3]);return[t,n,a,e]},jl=function(r){var t=new eR(r.type,r);return t.clientX=r.clientX,t.clientY=r.clientY,t.x=r.x,t.y=r.y,t.target=r.target,t.currentTarget=r.currentTarget,t.bubbles=!0,t.item=r.item,t},am=function(r){if(!r)return!1;for(var t=9,e=[1,0,0,0,1,0,0,0,1],n=0;n<t;n++)if(r[n]!==e[n])return!0;return!1},ro=function(r){return Number.isNaN(Number(r))},om=function(r){for(var t=Infinity,e=-Infinity,n=Infinity,a=-Infinity,o=0;o<r.length;o++){var s=r[o],l=s.getBBox(),u=l.minX,h=l.minY,c=l.maxX,v=l.maxY;u<t&&(t=u),h<n&&(n=h),c>e&&(e=c),v>a&&(a=v)}var x=Math.floor(t),M=Math.floor(n),k=Math.ceil(e)-Math.floor(t),R=Math.ceil(a)-Math.floor(n);return{x,y:M,width:k,height:R,minX:t,minY:n,maxX:e,maxY:a}},rR=function(r,t){t===void 0&&(t=15);for(var e=r.length,n=t*2,a=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],o={},s=[],l={},u=0;u<e;u++){var h=r[u],c=h.source,v=h.target,x=c+"-"+v;if(!s[u]){o[x]||(o[x]=[]),s[u]=!0,o[x].push(h);for(var M=0;M<e;M++)if(u!==M){var k=r[M],R=k.source,G=k.target;s[M]||(c===G&&v===R?(o[x].push(k),s[M]=!0,l[R+"|"+G+"|"+(o[x].length-1)]=!0):c===R&&v===G&&(o[x].push(k),s[M]=!0))}}}for(var N in o)for(var ot=o[N],ut=ot.length,Mt=0;Mt<ut;Mt++){var zt=ot[Mt];if(zt.source===zt.target){zt.type="loop",zt.loopCfg={position:a[Mt%8],dist:Math.floor(Mt/8)*20+50};continue}zt.type="quadratic";var $t=(Mt%2==0?1:-1)*(l[zt.source+"|"+zt.target+"|"+Mt]?-1:1);ut%2==1?zt.curveOffset=$t*Math.ceil(Mt/2)*n:zt.curveOffset=$t*(Math.floor(Mt/2)*n+t)}return r},sm=Math.abs,nR=10,iR=["shift","ctrl","alt","control"],aR={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0}},getEvents:function(){return{dragstart:"onMouseDown",mousedown:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp",mouseup:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onMouseDown",touchmove:"onMouseMove",touchend:"onMouseUp"}},updateViewport:function(r){var t=this.origin,e=+r.clientX,n=+r.clientY;if(!(ro(e)||ro(n))){var a=e-t.x,o=n-t.y;this.get("direction")==="x"?o=0:this.get("direction")==="y"&&(a=0),this.origin={x:e,y:n};var s=this.graph.get("width"),l=this.graph.get("height"),u=this.graph.get("canvas").getCanvasBBox();(u.minX<=s+this.scalableRange&&u.minX+a>s+this.scalableRange||u.maxX+this.scalableRange>=0&&u.maxX+this.scalableRange+a<0)&&(a=0),(u.minY<=l+this.scalableRange&&u.minY+o>l+this.scalableRange||u.maxY+this.scalableRange>=0&&u.maxY+this.scalableRange+o<0)&&(o=0),this.graph.translate(a,o)}},onMouseDown:function(r){var t=this,e=r.originalEvent;if(!(e&&e.button!==0)&&!(r.name!==wh.TOUCHSTART&&window&&window.event&&typeof window!="undefined"&&!window.event.buttons&&!window.event.button)&&!(t.keydown||r.shape)&&(t.origin={x:r.clientX,y:r.clientY},t.dragging=!1,this.enableOptimize)){for(var n=this.graph,a=n.getEdges(),o=0,s=a.length;o<s;o++){var l=a[o].get("group").get("children");!l||l.forEach(function(N){N.hide()})}for(var u=n.getNodes(),h=0,c=u.length;h<c;h++)for(var v=u[h].getContainer(),x=v.get("children"),M=0,k=x;M<k.length;M++){var R=k[M],G=R.get("isKeyShape");G||R.hide()}}},onMouseMove:function(r){var t=this.graph;if(!(this.keydown||r.shape)&&(r=jl(r),!!this.origin)){if(this.dragging)r.type="drag",t.emit("canvas:drag",r);else{if(sm(this.origin.x-r.clientX)+sm(this.origin.y-r.clientY)<nR)return;this.shouldBegin.call(this,r)&&(r.type="dragstart",t.emit("canvas:dragstart",r),this.dragging=!0)}this.shouldUpdate.call(this,r)&&this.updateViewport(r)}},onMouseUp:function(r){var t=this.graph;if(!(this.keydown||r.shape)){if(this.enableOptimize){for(var e=t.getEdges(),n=0,a=e.length;n<a;n++){var o=e[n].get("group").get("children");!o||o.forEach(function(R){R.show()})}for(var s=t.getNodes(),l=0,u=s.length;l<u;l++)for(var h=s[l].getContainer(),c=h.get("children"),v=0,x=c;v<x.length;v++){var M=x[v],k=M.get("isKeyShape");k||M.show()}}if(!this.dragging){this.origin=null;return}r=jl(r),this.shouldEnd.call(this,r)&&this.updateViewport(r),r.type="dragend",t.emit("canvas:dragend",r),this.endDrag()}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1},onKeyDown:function(r){var t=this,e=r.key;!e||(iR.indexOf(e.toLowerCase())>-1?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1}},oR=p(6767),Ul=p.n(oR),sR=p(17621),Zl=p.n(sR),Kl=2,lm=.16,lR=.05,uR=.05,fR=.15,um=5,fm=4,hR=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function hm(i,r,t){var e;return Math.round(i.h)>=60&&Math.round(i.h)<=240?e=t?Math.round(i.h)-Kl*r:Math.round(i.h)+Kl*r:e=t?Math.round(i.h)+Kl*r:Math.round(i.h)-Kl*r,e<0?e+=360:e>=360&&(e-=360),e}function cm(i,r,t){if(i.h===0&&i.s===0)return i.s;var e;return t?e=i.s-lm*r:r===fm?e=i.s+lm:e=i.s+lR*r,e>1&&(e=1),t&&r===um&&e>.1&&(e=.1),e<.06&&(e=.06),Number(e.toFixed(2))}function vm(i,r,t){var e;return t?e=i.v+uR*r:e=i.v-fR*r,e>1&&(e=1),Number(e.toFixed(2))}function Ch(i){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=[],e=Zl()(i),n=um;n>0;n-=1){var a=e.toHsv(),o=Zl()({h:hm(a,n,!0),s:cm(a,n,!0),v:vm(a,n,!0)}).toHexString();t.push(o)}t.push(e.toHexString());for(var s=1;s<=fm;s+=1){var l=e.toHsv(),u=Zl()({h:hm(l,s),s:cm(l,s),v:vm(l,s)}).toHexString();t.push(u)}return r.theme==="dark"?hR.map(function(h){var c=h.index,v=h.opacity,x=Zl().mix(r.backgroundColor||"#141414",t[c],v*100).toHexString();return x}):t}var Mh={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},Qi={},Eh={};Object.keys(Mh).forEach(function(i){Qi[i]=Ch(Mh[i]),Qi[i].primary=Qi[i][5],Eh[i]=Ch(Mh[i],{theme:"dark",backgroundColor:"#141414"}),Eh[i].primary=Eh[i][5]});var EY=Qi.red,_Y=Qi.volcano,AY=Qi.gold,TY=Qi.orange,PY=Qi.yellow,LY=Qi.lime,OY=Qi.green,IY=Qi.cyan,kY=Qi.blue,BY=Qi.geekblue,DY=Qi.purple,FY=Qi.magenta,RY=Qi.grey,Ga=function(r,t,e){var n=Ul()(r),a=Ul()(t);return Ul()([(1-e)*n.color[0]+e*a.color[0],(1-e)*n.color[1]+e*a.color[1],(1-e)*n.color[2]+e*a.color[2]]).rgb()},dm=function(r,t,e,n){t===void 0&&(t="#fff"),e===void 0&&(e="default"),n===void 0&&(n="rgb(150, 150, 150)");var a=Ga(t,r,.05).rgb().toString(),o=Ga(t,n,.02).rgb().toString(),s=Ga(t,n,.05).rgb().toString(),l=Ga(t,n,.1).rgb().toString(),u=Ga(t,n,.2).rgb().toString(),h=Ga(t,n,.3).rgb().toString(),c=Ch(r,{theme:e,backgroundColor:t}),v=Ul()(r).hex().toLowerCase(),x=c.indexOf(v),M=r;return x!==-1&&(M=c[x+1]),{mainStroke:r,mainFill:Ga(t,r,.1).rgb().toString(),activeStroke:r,activeFill:a,inactiveStroke:Ga(t,r,.4).rgb().toString(),inactiveFill:a,selectedStroke:r,selectedFill:t,highlightStroke:M,highlightFill:Ga(t,r,.2).rgb().toString(),disableStroke:h,disableFill:s,edgeMainStroke:h,edgeActiveStroke:r,edgeInactiveStroke:u,edgeSelectedStroke:r,edgeHighlightStroke:r,edgeDisableStroke:l,comboMainStroke:h,comboMainFill:o,comboActiveStroke:r,comboActiveFill:a,comboInactiveStroke:h,comboInactiveFill:o,comboSelectedStroke:r,comboSelectedFill:o,comboHighlightStroke:M,comboHighlightFill:o,comboDisableStroke:u,comboDisableFill:s}},cR="rgb(95, 149, 255)",vR="rgb(255, 255, 255)",pm="rgb(0, 0, 0)",yn=dm(cR,vR),Ke={version:"3.8.5",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",customGroupContainerClassName:"custom-group-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:yn.mainStroke,fill:yn.mainFill},size:20,color:yn.mainStroke,linkPoints:{size:8,lineWidth:1,fill:yn.activeFill,stroke:yn.activeStroke}},nodeStateStyles:{active:{fill:yn.activeFill,stroke:yn.activeStroke,lineWidth:2,shadowColor:yn.mainStroke,shadowBlur:10},selected:{fill:yn.selectedFill,stroke:yn.selectedStroke,lineWidth:4,shadowColor:yn.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:yn.highlightFill,stroke:yn.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:yn.inactiveFill,stroke:yn.inactiveStroke,lineWidth:1},disable:{fill:yn.disableFill,stroke:yn.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:pm,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:yn.edgeMainStroke,lineAppendWidth:2},color:yn.edgeMainStroke},edgeStateStyles:{active:{stroke:yn.edgeActiveStroke,lineWidth:1},selected:{stroke:yn.edgeSelectedStroke,lineWidth:2,shadowColor:yn.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:yn.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:yn.edgeInactiveStroke,lineWidth:1},disable:{stroke:yn.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:pm,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:yn.comboMainFill,lineWidth:1,stroke:yn.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:yn.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:yn.comboActiveStroke,lineWidth:1,fill:yn.comboActiveFill},selected:{stroke:yn.comboSelectedStroke,lineWidth:2,fill:yn.comboSelectedFill,shadowColor:yn.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:yn.comboHighlightStroke,lineWidth:2,fill:yn.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:yn.comboInactiveStroke,fill:yn.comboInactiveFill,lineWidth:1},disable:{stroke:yn.comboDisableStroke,fill:yn.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"},dR={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected"}},getEvents:function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas"}},validationCombo:function(r){if(!this.origin||!r||r.destroyed)return!1;var t=r.getType();return t==="combo"},onDragStart:function(r){var t=this;if(!!this.shouldBegin.call(this,r)){var e=r.item;if(!(!e||e.destroyed||e.hasLocked())){var n=e.getContainer();n.set("capture",!1);var a=r.target;if(a){var o=a.get("isAnchorPoint");if(o)return}var s=this.graph;this.targets=[],this.targetCombo=null;var l=s.findAllByState("node",this.selectedState),u=e.get("id"),h=l.filter(function(v){var x=v.get("id");return u===x});h.length===0?this.targets.push(e):l.length>1?l.forEach(function(v){var x=v.hasLocked();x||t.targets.push(v)}):this.targets.push(e);var c=[];this.targets.forEach(function(v){c.push((0,$n.d9)(v.getModel()))}),this.set("beforeDragNodes",c),this.origin={x:r.x,y:r.y},this.point={},this.originPoint={}}}},onDrag:function(r){var t=this;!this.origin||!this.shouldUpdate(this,r)||(this.get("enableDelegate")?this.updateDelegate(r):this.targets.map(function(e){t.update(e,r)}))},onDragEnd:function(r){if(!(!this.origin||!this.shouldEnd.call(this,r))){var t=r.item;if(t){var e=t.getContainer();e.set("capture",!0)}this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.updatePositions(r);var n=this.graph;if(n.get("enabledStack")){var a={before:{nodes:this.get("beforeDragNodes"),edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.targets.forEach(function(o){a.after.nodes.push(o.getModel())}),n.pushStack("update",(0,$n.d9)(a))}n.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(r){var t=r.item;if(!!this.validationCombo(t)){this.updatePositions(r);var e=this.graph;if(this.comboActiveState&&e.setItemState(t,this.comboActiveState,!1),this.targetCombo=t,this.onlyChangeComboSize)e.updateCombos();else{var n=t.getModel();this.targets.map(function(a){var o=a.getModel();o.comboId!==n.id&&e.updateComboTree(a,n.id)}),e.updateCombo(t)}e.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(r){var t=this.graph;!this.targets||this.targets.length===0||(this.updatePositions(r),this.onlyChangeComboSize?t.updateCombos():this.targets.map(function(e){var n=e.getModel();n.comboId&&t.updateComboTree(e)}))},onDropNode:function(r){if(!(!this.targets||this.targets.length===0)){var t=this,e=r.item;this.updatePositions(r);var n=t.graph,a=e.getModel().comboId;if(a){var o=n.findById(a);t.comboActiveState&&n.setItemState(o,t.comboActiveState,!1),this.targets.map(function(s){var l=s.getModel();a!==l.comboId&&n.updateComboTree(s,a)}),n.updateCombo(o)}else this.targets.map(function(s){var l=s.getModel();l.comboId&&n.updateComboTree(s)});n.emit("dragnodeend",{items:this.targets,targetItem:e})}},onDragEnter:function(r){var t=r.item;if(!!this.validationCombo(t)){var e=this.graph;this.comboActiveState&&e.setItemState(t,this.comboActiveState,!0)}},onDragLeave:function(r){var t=r.item;if(!!this.validationCombo(t)){var e=this.graph;this.comboActiveState&&e.setItemState(t,this.comboActiveState,!1)}},updatePositions:function(r){var t=this;!this.targets||this.targets.length===0||this.get("enableDelegate")&&this.targets.map(function(e){return t.update(e,r)})},update:function(r,t){var e=this.origin,n=r.get("model"),a=r.get("id");this.point[a]||(this.point[a]={x:n.x||0,y:n.y||0});var o=t.x-e.x+this.point[a].x,s=t.y-e.y+this.point[a].y,l={x:o,y:s};this.get("updateEdge")?this.graph.updateItem(r,l,!1):r.updatePosition(l)},updateDelegate:function(r){var t=this.graph;if(this.delegateRect){var v=r.x-this.origin.x+this.originPoint.minX,x=r.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:v,y:x})}else{var e=this.graph.get("group"),n=(0,$n.b$)({},Ke.delegateStyle,this.delegateStyle),a=this.calculationGroupPosition(r),o=a.x,s=a.y,l=a.width,u=a.height,h=a.minX,c=a.minY;this.originPoint={x:o,y:s,width:l,height:u,minX:h,minY:c},this.delegateRect=e.addShape("rect",{attrs:(0,V.__assign)({width:l,height:u,x:o,y:s},n),name:"rect-delegate-shape"}),this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(r){var t=this.graph,e=t.findAllByState("node",this.selectedState);e.length===0&&e.push(r.item);for(var n=Infinity,a=-Infinity,o=Infinity,s=-Infinity,l=0;l<e.length;l++){var u=e[l],h=u.getBBox(),c=h.minX,v=h.minY,x=h.maxX,M=h.maxY;c<n&&(n=c),v<o&&(o=v),x>a&&(a=x),M>s&&(s=M)}var k=Math.floor(n),R=Math.floor(o),G=Math.ceil(a)-Math.floor(n),N=Math.ceil(s)-Math.floor(o);return{x:k,y:R,width:G,height:N,minX:n,minY:o}}},pR={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return this.get("trigger")==="mouseenter"?{"node:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","canvas:click":"clearAllItemStates"}},setAllItemStates:function(r){var t=r.item,e=this.graph;if(this.item=t,!!this.shouldUpdate(r.item,{event:r,action:"activate"})){for(var n=this,a=this.activeState,o=this.inactiveState,s=e.getNodes(),l=e.getEdges(),u=s.length,h=l.length,c=0;c<u;c++){var v=s[c],x=v.hasState("selected");n.resetSelected&&x&&e.setItemState(v,"selected",!1),e.setItemState(v,a,!1),o&&e.setItemState(v,o,!0)}for(var c=0;c<h;c++){var M=l[c];e.setItemState(M,a,!1),o&&e.setItemState(M,o,!0)}o&&e.setItemState(t,o,!1),e.setItemState(t,a,!0);for(var k=t.getEdges(),R=k.length,c=0;c<R;c++){var M=k[c],G=void 0;M.getSource()===t?G=M.getTarget():G=M.getSource(),o&&e.setItemState(G,o,!1),e.setItemState(G,a,!0),e.setItemState(M,o,!1),e.setItemState(M,a,!0),M.toFront()}e.emit("afteractivaterelations",{item:r.item,action:"activate"})}},clearActiveState:function(r){var t=this,e=t.get("graph");if(!!t.shouldUpdate(r.item,{event:r,action:"deactivate"})){var n=this.activeState,a=this.inactiveState,o=e.get("autoPaint");e.setAutoPaint(!1);for(var s=e.getNodes(),l=e.getEdges(),u=s.length,h=l.length,c=0;c<u;c++){var v=s[c];e.clearItemStates(v,[n,a])}for(var c=0;c<h;c++){var x=l[c];e.clearItemStates(x,[n,a,"deactivate"])}e.paint(),e.setAutoPaint(o),e.emit("afteractivaterelations",{item:r.item||t.get("item"),action:"deactivate"})}},clearAllItemStates:function(r){var t=this,e=t.graph;if(!!t.shouldUpdate(r.item,{event:r,action:"deactivate"})){for(var n=this.activeState,a=this.inactiveState,o=e.getNodes(),s=e.getEdges(),l=o.length,u=s.length,h=0;h<l;h++){var c=o[h];e.clearItemStates(c,[n,a])}for(var h=0;h<u;h++){var v=s[h];e.clearItemStates(v,[n,a,"deactivate"])}e.emit("afteractivaterelations",{item:r.item||t.get("item"),action:"deactivate"})}}},$l=Math.min,gm=Math.max,ym=Math.abs,mm="shift",gR=["drag","shift","ctrl","alt","control"],yR={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:mm,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return gR.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=mm,console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(r){var t=r.item,e=this.brush;t||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),e||(e=this.createBrush()),this.originPoint={x:r.canvasX,y:r.canvasY},e.attr({width:0,height:0}),e.show(),this.dragging=!0)},onMouseMove:function(r){!this.dragging||this.trigger!=="drag"&&!this.keydown||this.updateBrush(r)},onMouseUp:function(r){var t=this.graph;!this.brush&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(r),this.dragging=!1)},clearStates:function(){var r=this,t=r.graph,e=r.selectedState,n=t.findAllByState("node",e),a=t.findAllByState("edge",e);n.forEach(function(o){return t.setItemState(o,e,!1)}),a.forEach(function(o){return t.setItemState(o,e,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedNodes:function(r){var t=this,e=this,n=e.graph,a=e.originPoint,o=e.shouldUpdate,s=this.selectedState,l={x:r.x,y:r.y},u=n.getPointByCanvas(a.x,a.y),h=$l(l.x,u.x),c=gm(l.x,u.x),v=$l(l.y,u.y),x=gm(l.y,u.y),M=[],k=[];n.getNodes().forEach(function(G){var N=G.getBBox();if(N.centerX>=h&&N.centerX<=c&&N.centerY>=v&&N.centerY<=x&&o(G,"select")){M.push(G);var ot=G.getModel();k.push(ot.id),n.setItemState(G,s,!0)}});var R=[];this.includeEdges&&M.forEach(function(G){var N=G.getOutEdges();N.forEach(function(ot){var ut=ot.getModel(),Mt=ut.source,zt=ut.target;k.includes(Mt)&&k.includes(zt)&&o(ot,"select")&&(R.push(ot),n.setItemState(ot,t.selectedState,!0))})}),this.selectedEdges=R,this.selectedNodes=M,this.onSelect&&this.onSelect(M,R),n.emit("nodeselectchange",{selectedItems:{nodes:M,edges:R},select:!0})},createBrush:function(){var r=this,t=r.graph.get("canvas").addShape("rect",{attrs:r.brushStyle,capture:!1,name:"brush-shape"});return this.brush=t,t},updateBrush:function(r){var t=this.originPoint;this.brush.attr({width:ym(r.canvasX-t.x),height:ym(r.canvasY-t.y),x:$l(r.canvasX,t.x),y:$l(r.canvasY,t.y)})},onKeyDown:function(r){var t=r.key;if(!!t){var e=this.trigger.toLowerCase(),n=t.toLowerCase();n===e||n==="control"&&e==="ctrl"||n==="ctrl"&&e==="control"?this.keydown=!0:this.keydown=!1}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}},xm="shift",mR=["shift","ctrl","alt","control"],xR={getDefaultCfg:function(){return{multiple:!0,trigger:xm,selectedState:"selected"}},getEvents:function(){var r=this;return mR.indexOf(r.trigger.toLowerCase())>-1||(r.trigger=xm,console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),r.multiple?{"node:click":"onClick","combo:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(r){var t=this,e=r.item;if(!(!e||e.destroyed)){var n=e.getType(),a=this,o=a.graph,s=a.keydown,l=a.multiple,u=a.shouldUpdate,h=a.shouldBegin;if(!!h.call(this,r)){if(!s||!l){var c=o.findAllByState(n,this.selectedState);(0,Tn.default)(c,function(M){M!==e&&o.setItemState(M,t.selectedState,!1)})}if(e.hasState(this.selectedState)){u.call(this,r)&&o.setItemState(e,this.selectedState,!1);var v=o.findAllByState("node",this.selectedState),x=o.findAllByState("combo",this.selectedState);o.emit("nodeselectchange",{target:e,selectedItems:{nodes:v,combos:x},select:!1})}else{u.call(this,r)&&o.setItemState(e,this.selectedState,!0);var v=o.findAllByState("node",this.selectedState),x=o.findAllByState("combo",this.selectedState);o.emit("nodeselectchange",{target:e,selectedItems:{nodes:v,combos:x},select:!0})}}}},onCanvasClick:function(){var r=this,t=this.graph,e=t.findAllByState("node",this.selectedState);(0,Tn.default)(e,function(a){t.setItemState(a,r.selectedState,!1)});var n=t.findAllByState("combo",this.selectedState);(0,Tn.default)(n,function(a){t.setItemState(a,r.selectedState,!1)}),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},onKeyDown:function(r){var t=r.key;!t||(t.toLowerCase()===this.trigger.toLowerCase()||t.toLowerCase()==="control"?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1}},da=p(31502);da.translate=function(i,r,t){var e=new Array(9);return da.fromTranslation(e,t),da.multiply(i,e,r)},da.rotate=function(i,r,t){var e=new Array(9);return da.fromRotation(e,t),da.multiply(i,e,r)},da.scale=function(i,r,t){var e=new Array(9);return da.fromScaling(e,t),da.multiply(i,e,r)},da.transform=function(i,r){for(var t=[].concat(i),e=0,n=r.length;e<n;e++){var a=r[e];switch(a[0]){case"t":da.translate(t,t,[a[1],a[2]]);break;case"s":da.scale(t,t,[a[1],a[2]]);break;case"r":da.rotate(t,t,a[1]);break;default:break}}return t};var no=da,Ya=p(76172);Ya.angle=function(i,r){var t=Ya.dot(i,r)/(Ya.length(i)*Ya.length(r));return Math.acos((0,f.clamp)(t,-1,1))},Ya.direction=function(i,r){return i[0]*r[1]-r[0]*i[1]},Ya.angleTo=function(i,r,t){var e=Ya.angle(i,r),n=Ya.direction(i,r)>=0;return t?n?Math.PI*2-e:e:n?e:Math.PI*2-e},Ya.vertical=function(i,r,t){return t?(i[0]=r[1],i[1]=-1*r[0]):(i[0]=-1*r[1],i[1]=r[0]),i};var Gn=Ya,bR=p(88395),bm=bR,za=function(i,r){var t=i?(0,f.clone)(i):[1,0,0,0,1,0,0,0,1];return(0,f.each)(r,function(e){switch(e[0]){case"t":no.translate(t,t,[e[1],e[2]]);break;case"s":no.scale(t,t,[e[1],e[2]]);break;case"r":no.rotate(t,t,e[1]);break;case"m":no.multiply(t,t,e[1]);break;default:return!1}}),t},wm=.05,wR={getDefaultCfg:function(){return{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.7,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"}}},getEvents:function(){var r=this.fixSelectedItems;return r.fixState||(r.fixState="selected"),r.fixAll&&(r.fixLineWidth=!0,r.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(r){var t=r.originalEvent.touches,e=t[0],n=t[1];r.preventDefault(),!!n&&(this.startPoint={pageX:e.pageX,pageY:e.pageY},this.moveable=!0,n&&(this.endPoint={pageX:n.pageX,pageY:n.pageY}),this.originScale=this.currentScale||1)},onTouchMove:function(r){if(!!this.moveable){r.preventDefault();var t=r.originalEvent.touches,e=t[0],n=t[1];if(!!n){this.endPoint||(this.endPoint={pageX:n.pageX,pageY:n.pageY});var a=function(x,M){return Math.hypot(M.x-x.x,M.y-x.y)},o=a({x:e.pageX,y:e.pageY},{x:n.pageX,y:n.pageY})/a({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),s=this.originScale*o;this.currentScale=s;var l=this.get("minZoom")||this.graph.get("minZoom"),u=this.get("maxZoom")||this.graph.get("maxZoom");if(!(s>u||s<l)){var h=this.graph.get("canvas"),c=h.getPointByClient(r.clientX,r.clientY);this.graph.zoomTo(s,{x:c.x,y:c.y}),this.graph.emit("wheelzoom",r)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(r){var t=this,e=this,n=e.graph,a=e.fixSelectedItems;if(!!this.shouldUpdate.call(this,r)){r.preventDefault();var o=n.get("canvas"),s=o.getPointByClient(r.clientX,r.clientY),l=this.get("sensitivity"),u=n.getZoom(),h=u,c=u;r.wheelDelta<0?h=1-wm*l:h=1/(1-wm*l),c=u*h;var v=this.get("minZoom")||n.get("minZoom"),x=this.get("maxZoom")||n.get("maxZoom");if(!(c>x||c<v)){var M=this.get("enableOptimize");if(M){var k=this.get("optimizeZoom"),R=this.get("optimized"),G=n.getNodes(),N=n.getEdges(),ot=G.length,ut=N.length;if(!R){for(var Mt=0;Mt<ot;Mt++){var zt=G[Mt];if(!zt.destroyed)for(var $t=zt.get("group").get("children"),ee=$t.length,Ut=0;Ut<ee;Ut++){var le=$t[Ut];!le.destoryed&&!le.get("isKeyShape")&&le.hide()}}for(var xe=0;xe<ut;xe++)for(var ye=N[xe],$t=ye.get("group").get("children"),ee=$t.length,Ut=0;Ut<ee;Ut++){var le=$t[Ut];le.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var Oe=setTimeout(function(){var Vr=n.getZoom(),rn=t.get("optimized");if(rn){t.set("optimized",!1);for(var pn=0;pn<ot;pn++){var Fn=G[pn],En=Fn.get("group").get("children"),Xn=En.length;if(Vr<k)Fn.getKeyShape().show();else for(var Qn=0;Qn<Xn;Qn++){var zi=En[Qn];zi.get("visible")||zi.show()}}for(var Ki=0;Ki<ut;Ki++){var pi=N[Ki],En=pi.get("group").get("children"),Xn=En.length;if(Vr<k)pi.getKeyShape().show();else for(var Qn=0;Qn<Xn;Qn++){var zi=En[Qn];zi.get("visible")||zi.show()}}}},500);this.set("timeout",Oe)}if(u<=1){var Ge=void 0,Ne=void 0;if(a.fixAll||a.fixLineWidth||a.fixLabel){Ge=n.findAllByState("node",a.fixState),Ne=n.findAllByState("edge",a.fixState);for(var qe=u/c,tr=Ge.length,rr=0;rr<tr;rr++){var zt=Ge[rr],$e=zt.getContainer(),Qe=zt.getModel(),br=zt.getOriginStyle(),yr=zt.getStateStyle(a.fixState),_r=zt.get("shapeFactory").getShape(Qe.shape||Qe.type).getStateStyle(a.fixState,zt)[a.fixState];if(a.fixAll){if(c<=1){var ir=(0,f.clone)($e.getMatrix());ir||(ir=[1,0,0,0,1,0,0,0,1]);var wr=zt.getModel(),Dr=wr.x,Er=wr.y;no.translate(ir,ir,[-Dr,-Er]),no.scale(ir,ir,[qe,qe]),no.translate(ir,ir,[Dr,Er]),$e.setMatrix(ir)}}else for(var $t=$e.get("children"),ee=$t.length,Ut=0;Ut<ee;Ut++){var le=$t[Ut],Mr=void 0,zr=void 0;if(a.fixLabel){var qr=le.get("type");if(qr==="text"){Mr=le.attr("fontSize")||12;var Lr=yr[le.get("name")],We=_r[le.get("name")],lr=Lr?Lr.fontSize:12,Xr=We?We.fontSize:12,Ur=lr||Xr||12;if(c<=1&&le.attr("fontSize",Ur/c),zr)break}}if(a.fixLineWidth&&le.get("isKeyShape")){zr=le.attr("lineWidth")||0;var Br=yr.lineWidth||_r.lineWidth||br.lineWidth||0;if(c<=1&&le.attr("lineWidth",Br/c),Mr)break}}}for(var en=Ne.length,$r=0;$r<en;$r++)for(var ye=Ne[$r],$e=ye.getContainer(),$t=$e.get("children"),Qe=ye.getModel(),yr=ye.getStateStyle(a.fixState),_r=ye.get("shapeFactory").getShape(Qe.shape||Qe.type).getStateStyle(a.fixState,ye)[a.fixState],ee=$t.length,Ut=0;Ut<ee;Ut++){var le=$t[Ut],Mr=void 0,zr=void 0;if(a.fixLabel||a.fixAll){var qr=le.get("type");if(qr==="text"){Mr=le.attr("fontSize")||12;var Lr=yr[le.get("name")],We=_r[le.get("name")],lr=Lr?Lr.fontSize:12,Xr=We?We.fontSize:12,Ur=lr||Xr||12;if(c<=1&&le.attr("fontSize",Ur/c),zr)break}}if((a.fixLineWidth||a.fixAll)&&le.get("isKeyShape")){zr=le.attr("lineWidth")||0;var Br=yr.lineWidth||_r.lineWidth||1;if(c<=1&&le.attr("lineWidth",Br/c),Mr)break}}}}n.zoomTo(c,{x:s.x,y:s.y}),n.emit("wheelzoom",r)}}}},On=p(1513),di=p(57821),Sm={onMouseEnter:function(r){var t=r.item;this.currentTarget=t,this.showTooltip(r),this.graph.emit("tooltipchange",{item:r.item,action:"show"})},onMouseMove:function(r){if(!this.shouldUpdate(r)){this.hideTooltip();return}!this.currentTarget||r.item!==this.currentTarget||this.updatePosition(r)},onMouseLeave:function(r){!this.shouldEnd(r)||(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(r){var t=this.container;if(!(!r.item||r.item.destroyed)){t||(t=this.createTooltip(this.graph.get("canvas")),this.container=t);var e=this.formatText(r.item.get("model"),r);t.innerHTML=e,(0,On.Z)(this.container,{visibility:"visible"}),this.updatePosition(r)}},hideTooltip:function(){(0,On.Z)(this.container,{visibility:"hidden"})},updatePosition:function(r){var t=this.get("shouldBegin"),e=this,n=e.width,a=e.height,o=e.container,s=e.graph;if(!t(r)){(0,On.Z)(o,{visibility:"hidden"});return}var l=s.getPointByClient(r.clientX,r.clientY),u=s.getCanvasByPoint(l.x,l.y),h=u.x,c=u.y,v=o.getBoundingClientRect();h>n/2?h-=v.width:h+=this.offset,c>a/2?c-=v.height:c+=this.offset;var x=h+"px",M=c+"px";(0,On.Z)(this.container,{left:x,top:M,visibility:"visible"})},createTooltip:function(r){var t=r.get("el");t.style.position="relative";var e=(0,di.Z)('<div class="g6-tooltip g6-'+this.item+'-tooltip"></div>');return t.parentNode.appendChild(e),(0,On.Z)(e,{position:"absolute",visibility:"visible"}),this.width=r.get("width"),this.height=r.get("height"),this.container=e,this.graph.get("tooltips").push(e),e}},SR=(0,V.__assign)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(t){return t.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},Sm),CR=(0,V.__assign)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(t){return"source: "+t.source+" target: "+t.target}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},Sm),Ui=p(90497),MR={getDefaultCfg:function(){return{delegate:!0,delegateStyle:{},delegateShapes:{},delegateShapeBBoxs:{}}},getEvents:function(){return{dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd","canvas:mouseleave":"onOutOfRange"}},onDragStart:function(r){var t=this.graph,e=r.target,n=e.get("groupId");if(!!n){var a=t.get("customGroupControll"),o=a.customGroup,s=o[n].nodeGroup;this.targetGroup=s,this.mouseOrigin={x:r.x,y:r.y};for(var l=t.save().groups,u=null,h=0;h<l.length;h++){var c=l[h];if(n===c.id){u=c.parentId;break}}if(u){var v=o[u].nodeGroup;a.setGroupStyle(v.get("keyShape"),"hover")}}},onDrag:function(r){!this.mouseOrigin||this.updateDelegate(r)},onDragEnd:function(r){var t=this.graph,e=r.target.get("groupId");if(this.delegateShapes[e]&&(this.delegateShapeBBox=this.delegateShapes[e].getBBox(),this.delegateShapes[e].remove(),delete this.delegateShapes[e]),!!this.delegateShapeBBox){var n=t.get("customGroupControll"),a=this.delegateShapeBBoxs[e];n.updateGroup(e,a,this.mouseOrigin),this.mouseOrigin=null,this.shapeOrigin=null,n.resetNodePoint(),this.delegateShapeBBox=null}},updateDelegate:function(r){var t=this.graph,e=r.target.get("groupId"),n=this.targetGroup.get("keyShape"),a=this.delegateShapes[e],o=n.getBBox(),s=n.get("type");if(a){var G=this,N=G.mouseOrigin,ot=G.shapeOrigin,ut=r.x-N.x,Mt=r.y-N.y,zt=ut+ot.x,$t=Mt+ot.y;a.attr({x:zt,y:$t}),this.delegateShapeBBoxs[e]=a.getBBox()}else{var l=t.get("delegateGroup"),u=o.x,h=o.y,c=o.width,v=o.height,x=(0,V.__assign)({width:c,height:v},(0,Ui.default)({},Ke.delegateStyle,this.delegateStyle));if(s==="circle"){var M=c>v?c/2:v/2,k=u+M,R=h+M;a=l.addShape("circle",{attrs:(0,V.__assign)({x:k,y:R,r:M},x),name:"circle-delegate-shape"}),this.shapeOrigin={x:k,y:R}}else a=l.addShape("rect",{attrs:(0,V.__assign)({x:u,y:h},x),name:"rect-delegate-shape"}),this.shapeOrigin={x:u,y:h};this.delegateShapes[e]=a,this.delegateShapeBBoxs[e]=a.getBBox()}},onOutOfRange:function(r){var t=this,e=this.graph.get("canvas").get("el"),n=function a(o){o.target!==e&&(t.onDragEnd(r),document.body.removeEventListener("mouseup",a,!0))};this.mouseOrigin&&document.body.addEventListener("mouseup",n,!0)}},ER=document.body,_R={getDefaultCfg:function(){return{updateEdge:!0,delegate:!0,delegateStyle:{},maxMultiple:1.1,minMultiple:1}},getEvents:function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd","canvas:mouseleave":"onOutOfRange",dragover:"onDragOver",dragleave:"onDragLeave"}},onDragOver:function(r){var t=this.graph,e=r.target,n=e.get("groupId");if(n&&this.origin){var a=t.get("customGroupControll"),o=a.getDeletageGroupById(n);if(o){var s=o.nodeGroup,l=s.get("keyShape");this.inGroupId=n,a.setGroupStyle(l,"hover")}}},onDragLeave:function(r){var t=this.graph,e=r.target,n=e.get("groupId");if(n&&this.origin){var a=t.get("customGroupControll"),o=a.getDeletageGroupById(n);if(o){var s=o.nodeGroup,l=s.get("keyShape");a.setGroupStyle(l,"default")}}n||(this.inGroupId=null)},onDragStart:function(r){var t=this.graph;if(!!this.shouldBegin.call(this,r)){var e=r.item;this.target=e;var n=e.getModel(),a=n.groupId;if(a){var o=t.get("customGroupControll"),s=o.getDeletageGroupById(a);if(s){var l=s.nodeGroup,u=l.get("keyShape");o.setGroupStyle(u,"hover"),this.inGroupId=a}}this.origin={x:r.x,y:r.y},this.point={},this.originPoint={}}},onDrag:function(r){if(!!this.origin&&!!this.get("shouldUpdate").call(this,r)){this.update(this.target,r,!0);var t=r.item,e=this.graph,n=t.getModel(),a=n.groupId;if(a){var o=e.get("customGroupControll"),s=o.getDeletageGroupById(a);if(s){var l=s.nodeGroup,u=l.get("keyShape");this.inGroupId!==a?o.setGroupStyle(u,"default"):o.setGroupStyle(u,"hover")}}}},onDragEnd:function(r){if(!(!this.origin||!this.shouldEnd.call(this,r))){if(this.shape&&(this.shape.remove(),this.shape=null),this.target){var t=this.target.get("delegateShape");t&&(t.remove(),this.target.set("delegateShape",null))}this.target&&this.update(this.target,r),this.point={},this.origin=null,this.originPoint={},this.target=null,this.setCurrentGroupStyle(r)}},setCurrentGroupStyle:function(r){var t=this.graph,e=r.item,n=e.getModel(),a=n.groupId,o=n.id,s=t.get("customGroupControll"),l=s.customGroup,u=t.get("groupNodes");if(this.inGroupId&&a){var h=l[a].nodeGroup;if(!h)return;var c=h.get("keyShape"),v=e.getBBox(),x=c.getBBox(),M=v.centerX,k=v.centerY,R=x.minX,G=x.minY,N=x.maxX,ot=x.maxY;if(!(M<N*this.maxMultiple&&M>R*this.minMultiple&&k<ot*this.maxMultiple&&k>G*this.minMultiple)||this.inGroupId!==a){var ut=u[a];u[a]=ut.filter(function($t){return $t!==o}),s.dynamicChangeGroupSize(r,h,c),delete n.groupId}if(this.inGroupId!==a){var Mt=l[this.inGroupId].nodeGroup;if(!Mt)return;var zt=Mt.get("keyShape");u[this.inGroupId].indexOf(o)===-1&&u[this.inGroupId].push(o),n.groupId=this.inGroupId,s.dynamicChangeGroupSize(r,Mt,zt)}s.setGroupStyle(c,"default")}else if(this.inGroupId&&!a){var Mt=l[this.inGroupId].nodeGroup;if(!Mt)return;var c=Mt.get("keyShape");u[this.inGroupId].indexOf(o)===-1&&u[this.inGroupId].push(o),n.groupId=this.inGroupId,s.dynamicChangeGroupSize(r,Mt,c)}else if(!this.inGroupId&&a){Object.keys(u).forEach(function(Ut){var le=u[Ut];u[Ut]=le.filter(function(xe){return xe!==o})});var h=l[a].nodeGroup;if(!h)return;var c=h.get("keyShape");s.dynamicChangeGroupSize(r,h,c),delete n.groupId}this.inGroupId=null},onOutOfRange:function(r){var t=this,e=t.graph.get("canvas").get("el");function n(a){a.target!==e&&(r.item=t.target,t.onDragEnd(r),document.body.removeEventListener("mouseup",n,!0))}t.origin&&ER.addEventListener("mouseup",n,!0)},update:function(r,t,e){var n=this.origin,a=r.get("model"),o=r.get("id");this.point[o]||(this.point[o]={x:a.x,y:a.y});var s=t.x-n.x+this.point[o].x,l=t.y-n.y+this.point[o].y;if(e){this.updateDelegate(t,s,l);return}var u={x:s,y:l};this.get("updateEdge")?this.graph.updateItem(r,u):(r.updatePosition(u),this.graph.paint())},updateDelegate:function(r,t,e){var n=this.graph,a=r.item,o=n.get("groupType"),s=a.get("keyShape").getBBox();if(!this.shape){var l=n.get("delegateGroup"),u=(0,Ui.default)({},Ke.delegateStyle,this.delegateStyle);this.target&&(this.shape=l.addShape("rect",{attrs:(0,V.__assign)({width:s.width,height:s.height,x:t-s.width/2,y:e-s.height/2},u),name:"delegate-shape"}),this.target.set("delegateShape",this.shape)),this.shape.set("capture",!1)}this.target&&(o==="circle"?this.shape.attr({x:t-s.width/2,y:e-s.height/2}):o==="rect"&&this.shape.attr({x:t,y:e}))}},Cm="dblclick",AR=["click","dblclick"],TR={getDefaultCfg:function(){return{trigger:Cm}},getEvents:function(){var r,t;return AR.includes(this.trigger)?t=this.trigger:(t=Cm,console.warn("Behavior collapse-expand-group \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),r={},r[""+t]="onGroupClick",r},onGroupClick:function(r){var t=r.target,e=this.graph,n=t.get("groupId");if(!!n){var a=e.get("customGroupControll");a.collapseExpandGroup(n)}}},Mm="click",PR=["click","dblclick"],LR={getDefaultCfg:function(){return{trigger:Mm,onChange:function(){}}},getEvents:function(){var r,t;return PR.includes(this.trigger)?t=this.trigger:(t=Mm,console.warn("Behavior collapse-expand \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),r={},r["node:"+t]="onNodeClick",r.touchstart="onNodeClick",r},onNodeClick:function(r){var t=r.item,e=this.graph.findDataById(t.get("id"));if(!!e){var n=e.children;if(!(!n||n.length===0)){var a=!e.collapsed;if(!!this.shouldBegin(r,a)&&(e.collapsed=a,t.getModel().collapsed=a,this.graph.emit("itemcollapsed",{item:r.item,collapsed:a}),!!this.shouldUpdate(r,a))){try{this.onChange(t,a)}catch(o){console.warn("G6 \u81EA 3.0.4 \u7248\u672C\u652F\u6301\u76F4\u63A5\u4ECE item.getModel() \u83B7\u53D6\u6E90\u6570\u636E(\u4E34\u65F6\u901A\u77E5\uFF0C\u5C06\u57283.2.0\u7248\u672C\u4E2D\u6E05\u9664)",o)}this.graph.layout()}}}}},OR=function i(r,t){if(t(r)!==!1&&r){var e=r.get("combos");if(e.length===0)return!1;(0,$n.S6)(e,function(n){i(n,t)})}},IR={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected"}},getEvents:function(){return{"combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(r){var t=r.item;if(!t||t.destroyed||!this.shouldUpdate(this,r))return!1;var e=t.getType();return e==="combo"},onDragStart:function(r){var t=this,e=this.graph,n=r.item;if(!!this.validationCombo(r)){this.targets=[];var a=e.findAllByState("combo",this.selectedState),o=n.get("id"),s=a.filter(function(l){var u=l.get("id");return o===u});s.length===0?this.targets.push(n):this.targets=a,this.activeState&&this.targets.map(function(l){var u=l.getModel();if(u.parentId){var h=e.findById(u.parentId);h&&e.setItemState(h,t.activeState,!0)}}),this.point={},this.originPoint={},this.origin={x:r.x,y:r.y},this.currentItemChildCombos=[],OR(n,function(l){if(l.destroyed)return!1;var u=l.getModel();return t.currentItemChildCombos.push(u.id),!0})}},onDrag:function(r){var t=this;if(!!this.origin&&!!this.validationCombo(r))if(this.enableDelegate)this.updateDelegate(r);else{if(this.activeState){var e=this.graph,n=r.item,a=n.getModel(),o=e.getCombos(),s=n.getBBox(),l=s.centerX,u=s.centerY,h=s.width,c=o.filter(function(v){var x=v.getModel();return a.parentId,x.id!==a.id&&!t.currentItemChildCombos.includes(x.id)});c.map(function(v){var x=v.getBBox(),M=x.centerX,k=x.centerY,R=x.width,G=l-M,N=u-k,ot=2*Math.sqrt(G*G+N*N);h+R-ot>.8*h?e.setItemState(v,t.activeState,!0):e.setItemState(v,t.activeState,!1)})}(0,$n.S6)(this.targets,function(v){t.updateCombo(v,r)})}},updatePositions:function(r){var t=this;this.enableDelegate&&(0,$n.S6)(this.targets,function(e){t.updateCombo(e,r)})},onDrop:function(r){var t=this,e=r.item;if(!(!e||!this.targets||e.destroyed)){this.updatePositions(r);var n=this.graph,a=e.getModel();this.targets.map(function(o){var s=o.getModel();s.parentId!==a.id?(t.activeState&&n.setItemState(e,t.activeState,!1),t.onlyChangeComboSize?n.updateCombo(o):n.updateComboTree(o,a.id)):n.updateCombo(e)}),this.end(e,r),this.endComparison=!0}},onNodeDrop:function(r){var t=this;if(!(!this.targets||this.targets.length===0)){this.updatePositions(r);var e=this.graph,n=r.item,a=n.getModel().comboId,o;if(a){if(this.activeState){var s=e.findById(a);e.setItemState(s,this.activeState,!1)}this.targets.map(function(l){t.onlyChangeComboSize?e.updateCombo(l):a!==l.getID()&&(o=e.findById(a),a!==l.getModel().parentId&&e.updateComboTree(l,a))})}else this.targets.map(function(l){if(t.onlyChangeComboSize)e.updateCombo(l);else{var u=l.getModel();u.comboId&&e.updateComboTree(l)}});this.endComparison=!0,this.end(o,r)}},onDragEnter:function(r){if(!!this.origin&&!!this.validationCombo(r)){var t=r.item,e=this.graph;this.activeState&&e.setItemState(t,this.activeState,!0)}},onDragLeave:function(r){if(!!this.origin&&!!this.validationCombo(r)){var t=r.item,e=this.graph;this.activeState&&e.setItemState(t,this.activeState,!1)}},onDragEnd:function(r){if(!(!this.targets||this.targets.length===0)){var t=r.item;this.updatePositions(r);var e=this.getParentCombo(t.getModel().parentId),n=this.graph;e&&this.activeState&&n.setItemState(e,this.activeState,!1),this.end(void 0,r)}},end:function(r,t){var e=this;if(!!this.origin){var n=this.graph;if(this.delegateShape){var a=n.get("delegateGroup");a.clear(),this.delegateShape=null}r&&this.activeState&&n.setItemState(r,this.activeState,!1),r||this.targets.map(function(o){e.onlyChangeComboSize?n.updateCombo(o):n.updateComboTree(o)}),this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(r,t){var e=this;if(t(r)!==!1&&r){var n=r.get("combos");(0,$n.S6)(n,function(o){e.traverse(o,t)});var a=r.get("nodes");(0,$n.S6)(a,function(o){e.traverse(o,t)})}},updateCombo:function(r,t){var e=this;this.traverse(r,function(n){return n.destroyed?!1:(e.updateSignleItem(n,t),!0)})},updateSignleItem:function(r,t){var e=this.origin,n=this.graph,a=r.getModel(),o=r.get("id");this.point[o]||(this.point[o]={x:a.x,y:a.y});var s=t.x-e.x+this.point[o].x,l=t.y-e.y+this.point[o].y;n.updateItem(r,{x:s,y:l})},getParentCombo:function(r){var t=this.graph;if(!!r){var e=t.findById(r);if(!!e)return e}},updateDelegate:function(r){var t=this.graph;if(this.delegateShape){var v=r.x-this.origin.x+this.originPoint.minX,x=r.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:v,y:x})}else{var e=t.get("delegateGroup"),n=null;this.targets.length>1?n=om(this.targets):n=this.targets[0].getBBox();var a=n.x,o=n.y,s=n.width,l=n.height,u=n.minX,h=n.minY;this.originPoint={x:a,y:o,width:s,height:l,minX:u,minY:h};var c=(0,V.__assign)((0,V.__assign)({},Ke.delegateStyle),this.delegateStyle);this.delegateShape=e.addShape("rect",{attrs:(0,V.__assign)({width:n.width,height:n.height,x:n.x,y:n.y},c),name:"combo-delegate-shape"})}}},Em="dblclick",kR=["click","dblclick"],BR={getDefaultCfg:function(){return{trigger:Em,relayout:!0}},getEvents:function(){var r,t;return kR.includes(this.trigger)?t=this.trigger:(t=Em,console.warn("Behavior collapse-expand-group \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),r={},r["combo:"+t]="onComboClick",r},onComboClick:function(r){var t=r.item,e=this,n=e.graph,a=e.relayout;if(!(!t||t.destroyed||t.getType()!=="combo")){var o=t.getModel(),s=o.id;!s||(n.collapseExpandCombo(s),a&&n.get("layout")?n.layout():n.refreshPositions())}}},_m=function(r,t,e){return r>=t&&r<=e},Ps=function(r,t,e,n){var a=.001,o={x:e.x-r.x,y:e.y-r.y},s={x:t.x-r.x,y:t.y-r.y},l={x:n.x-e.x,y:n.y-e.y},u=s.x*l.y-s.y*l.x,h=u*u,c=s.x*s.x+s.y*s.y,v=l.x*l.x+l.y*l.y,x=null;if(h>a*c*v){var M=(o.x*l.y-o.y*l.x)/u,k=(o.x*s.y-o.y*s.x)/u;_m(M,0,1)&&_m(k,0,1)&&(x={x:r.x+M*s.x,y:r.y+M*s.y})}return x},Am=function(r,t){var e=r.x,n=r.y,a=r.width,o=r.height,s=e+a/2,l=n+o/2,u=[],h={x:s,y:l};u.push({x:e,y:n}),u.push({x:e+a,y:n}),u.push({x:e+a,y:n+o}),u.push({x:e,y:n+o}),u.push({x:e,y:n});for(var c=null,v=1;v<u.length&&(c=Ps(u[v-1],u[v],h,t),!c);v++);return c},Tm=function(r,t){var e=r.x,n=r.y,a=r.r,o=t.x,s=t.y,l=o-e,u=s-n,h=Math.sqrt(l*l+u*u);if(h<a)return null;var c=Math.sign(l),v=Math.sign(u),x=Math.atan(u/l);return{x:e+Math.abs(a*Math.cos(x))*c,y:n+Math.abs(a*Math.sin(x))*v}},Pm=function(r,t){var e=r.rx,n=r.ry,a=r.x,o=r.y,s=t.x-a,l=t.y-o,u=Math.atan2(l/n,s/e);return u<0&&(u+=2*Math.PI),{x:a+e*Math.cos(u),y:o+n*Math.sin(u)}},Ls=function(r,t,e){e===void 0&&(e=1);var n=[r.x,r.y,e];return(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]),bm.transformMat3(n,n,t),{x:n[0],y:n[1]}},Lm=function(r,t,e){e===void 0&&(e=1),(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]);var n=no.invert([],t);n||(n=[1,0,0,0,1,0,0,0,1]);var a=[r.x,r.y,e];return bm.transformMat3(a,a,n),{x:a[0],y:a[1]}},_h=function(r,t,e){var n=r.x-t.x,a=r.y-t.y,o=r.x-e.x,s=r.y-e.y,l=(r.x*r.x-t.x*t.x-t.y*t.y+r.y*r.y)/2,u=(r.x*r.x-e.x*e.x-e.y*e.y+r.y*r.y)/2,h=a*o-n*s;return{x:-(s*l-a*u)/h,y:-(n*u-o*l)/h}},Os=function(r,t){var e=r.x-t.x,n=r.y-t.y;return Math.sqrt(e*e+n*n)},Om=function(r,t){var e=[];return r.forEach(function(n){var a=[];n.forEach(function(o){a.push(o*t)}),e.push(a)}),e},Ah=function(r){for(var t=[],e=r.length,n=0;n<e;n+=1){t[n]=[];for(var a=0;a<e;a+=1)n===a?t[n][a]=0:r[n][a]===0||!r[n][a]?t[n][a]=Infinity:t[n][a]=r[n][a]}for(var o=0;o<e;o+=1)for(var n=0;n<e;n+=1)for(var a=0;a<e;a+=1)t[n][a]>t[n][o]+t[o][a]&&(t[n][a]=t[n][o]+t[o][a]);return t},Th=function(r,t){var e=r.nodes,n=r.edges,a=[],o={};if(!e)throw new Error("invalid nodes data!");return e&&e.forEach(function(s,l){o[s.id]=l;var u=[];a.push(u)}),n&&n.forEach(function(s){var l=s.source,u=s.target,h=o[l],c=o[u];a[h][c]=1,t||(a[c][h]=1)}),a},Im=function(r,t){r.translate(t.x,t.y)},km=function(r,t){var e=r.getMatrix();e||(e=[1,0,0,0,1,0,0,0,1]);var n=r.getCanvasBBox(),a=t.x-n.minX,o=t.y-n.minY,s=za(e,[["t",a,o]]);r.setMatrix(s)},DR=function(r,t){var e=r.getMatrix();e||(e=[1,0,0,0,1,0,0,0,1]);var n=t;(0,Ri.default)(t)||(n=[t,t]),(0,Ri.default)(t)&&t.length===1&&(n=[t[0],t[0]]),e=za(e,[["s",n[0],n[1]]]),r.setMatrix(e)},FR=function(r,t){var e=r.getMatrix();e||(e=[1,0,0,0,1,0,0,0,1]),e=za(e,[["r",t]]),r.setMatrix(e)},Ql=function(r,t,e){for(var n=[],a=0;a<r;a++)n[a]=0;return e.forEach(function(o){o.source&&(n[t[o.source]]+=1),o.target&&(n[t[o.target]]+=1)}),n};function RR(i,r,t){return(t[0]-i[0])*(r[1]-i[1])==(r[0]-i[0])*(t[1]-i[1])&&Math.min(i[0],r[0])<=t[0]&&t[0]<=Math.max(i[0],r[0])&&Math.min(i[1],r[1])<=t[1]&&t[1]<=Math.max(i[1],r[1])}var Is=function(r,t,e){var n=!1,a=r.length,o=1e-6;function s(c){return Math.abs(c)<o?0:c<0?-1:1}if(a<=2)return!1;for(var l=0;l<a;l++){var u=r[l],h=r[(l+1)%a];if(RR(u,h,[t,e]))return!0;s(u[1]-e)>0!=s(h[1]-e)>0&&s(t-(e-u[1])*(u[0]-h[0])/(u[1]-h[1])-u[0])<0&&(n=!n)}return n},Bm=function(r,t){return!(t.minX>r.maxX||t.maxX<r.minX||t.minY>r.maxY||t.maxY<r.minY)},NR=function(r,t){var e=!1;return(0,f.each)(r,function(n){if(Ps(n.from,n.to,t.from,t.to))return e=!0,!1}),e},Ph=function(r,t){var e=function(v){var x=v.map(function(k){return k[0]}),M=v.map(function(k){return k[1]});return{minX:Math.min.apply(null,x),maxX:Math.max.apply(null,x),minY:Math.min.apply(null,M),maxY:Math.max.apply(null,M)}},n=function(v){for(var x=[],M=v.length,k=0;k<M-1;k++){var R=v[k],G=v[k+1];x.push({from:{x:R[0],y:R[1]},to:{x:G[0],y:G[1]}})}if(x.length>1){var N=v[0],ot=v[M-1];x.push({from:{x:ot[0],y:ot[1]},to:{x:N[0],y:N[1]}})}return x};if(r.length<2||t.length<2)return!1;var a=e(r),o=e(t);if(!Bm(a,o))return!1;var s=!1;if((0,f.each)(t,function(c){if(Is(r,c[0],c[1]))return s=!0,!1}),s||((0,f.each)(r,function(c){if(Is(t,c[0],c[1]))return s=!0,!1}),s))return!0;var l=n(r),u=n(t),h=!1;return(0,f.each)(u,function(c){if(NR(l,c))return h=!0,!1}),h},Do=function(){function i(r,t,e,n){this.x1=r,this.y1=t,this.x2=e,this.y2=n}return i.prototype.getBBox=function(){var r=Math.min(this.x1,this.x2),t=Math.min(this.y1,this.y2),e=Math.max(this.x1,this.x2),n=Math.max(this.y1,this.y2),a={x:r,y:t,minX:r,minY:t,maxX:e,maxY:n,width:e-r,height:n-t};return a},i}(),Lh=function(r,t){var e={top:[r.minX,r.minY,r.maxX,r.minY],left:[r.minX,r.minY,r.minX,r.maxY],bottom:[r.minX,r.maxY,r.maxX,r.maxY],right:[r.maxX,r.minY,r.maxX,r.maxY]};return e[t]},GR=function(r,t){var e=(t.x2-t.x1)*(r.y1-t.y1)-(t.y2-t.y1)*(r.x1-t.x1),n=(r.x2-r.x1)*(r.y1-t.y1)-(r.y2-r.y1)*(r.x1-t.x1),a=(t.y2-t.y1)*(r.x2-r.x1)-(t.x2-t.x1)*(r.y2-r.y1);if(a){var o=e/a,s=n/a;if(o>=0&&o<=1&&s>=0&&s<=1)return o}return Number.POSITIVE_INFINITY},Dm=function(r,t){for(var e=["top","left","bottom","right"],n=r.getBBox(),a=0,o=[],s=0;s<4;s++){var l=Lh(n,e[s]),u=l[0],h=l[1],c=l[2],v=l[3];o[s]=Ps({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},{x:u,y:h},{x:c,y:v}),o[s]&&(a+=1)}return[o,a]},Oh=function(r,t){for(var e=["top","left","bottom","right"],n=r.getBBox(),a=Number.POSITIVE_INFINITY,o=0,s=0;s<4;s++){var l=Lh(n,e[s]),u=l[0],h=l[1],c=l[2],v=l[3],x=GR(t,new Do(u,h,c,v));x=Math.abs(x-.5),x>=0&&x<=1&&(o+=1,a=x<a?x:a)}return o===0?-1:a},Fm=function(r){var t=0,e=0;if(r.length>0){for(var n=0,a=r;n<a.length;n++){var o=a[n];t+=o.x,e+=o.y}t/=r.length,e/=r.length}return{x:t,y:e}},Jl=function(r,t){return Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2)},Rm=function(r,t){var e=t.x1,n=t.y1,a=t.x2-e,o=t.y2-n,s=r.x-e,l=r.y-n,u=s*a+l*o,h;u<=0?h=0:(s=a-s,l=o-l,u=s*a+l*o,u<=0?h=0:h=u*u/(a*a+o*o));var c=s*s+l*l-h;return c<0&&(c=0),c},Ih=function(r,t,e){return e===void 0&&(e=.001),Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2)<Math.pow(e,2)},Nm=function(r,t){var e=r.x<t.x,n=r.x>t.x+t.width,a=r.y>t.y+t.height,o=r.y<t.y,s=e||n||a||o;if(!s)return 0;if(a&&!e&&!n)return Math.pow(t.y+t.height-r.y,2);if(o&&!e&&!n)return Math.pow(r.y-t.y,2);if(e&&!a&&!o)return Math.pow(t.x-r.x,2);if(n&&!a&&!o)return Math.pow(t.x+t.width-r.x,2);var l=Math.min(Math.abs(t.x-r.x),Math.abs(t.x+t.width-r.x)),u=Math.min(Math.abs(t.y-r.y),Math.abs(t.y+t.height-r.y));return l*l+u*u},YR=function(r,t){return!r||!t?r:r.replace(/\\?\{([^{}]+)\}/g,function(e,n){if(e.charAt(0)==="\\")return e.slice(1);var a=t[n];return a===0&&(a="0"),a||""})},Gm=function(r){var t=[];if(r.length<2)throw new Error("point length must largn than 2, now it's "+r.length);for(var e=0,n=r;e<n.length;e++){var a=n[e],o=a.x,s=a.y;t.push(o),t.push(s)}var l=(0,Us.catmullRom2Bezier)(t);return l.unshift(["M",r[0].x,r[0].y]),l},ql=function(r,t,e,n){e===void 0&&(e=0),n===void 0&&(n=0);var a={x:(1-e)*r.x+e*t.x,y:(1-e)*r.y+e*t.y},o=[];Gn.normalize(o,[t.x-r.x,t.y-r.y]),o.length===0&&(o=[0,0]);var s=[-o[1]*n,o[0]*n];return a.x+=s[0],a.y+=s[1],a},Ym=function(r,t){var e=r.length;if(!e)return"";for(var n="",a="",o=0;o<e;o++){var s=r[o];o===0?a="M{x} {y}":a="L{x} {y}",n+=YR(a,s)}return t&&(n+="Z"),n},tu=function(r){var t=[];return r.forEach(function(e){var n=e[0];if(n!=="A")for(var a=1;a<e.length;a=a+2)t.push([e[a],e[a+1]]);else{var o=e.length;t.push([e[o-2],e[o-1]])}}),t},kh=function(r){if(r.length<2)throw new Error("point length must largn than 2, now it's "+r.length);var t=r[0],e=r[1],n=r[r.length-1],a=r[r.length-2];r.unshift(n),r.unshift(a),r.push(t),r.push(e);for(var o=[],s=1;s<r.length-2;s+=1){var l=r[s-1].x,u=r[s-1].y,h=r[s].x,c=r[s].y,v=r[s+1].x,x=r[s+1].y,M=s!==r.length-2?r[s+2].x:v,k=s!==r.length-2?r[s+2].y:x,R=h+(v-l)/6,G=c+(x-u)/6,N=v-(M-h)/6,ot=x-(k-c)/6;o.push(["C",R,G,N,ot,v,x])}return o.unshift(["M",n.x,n.y]),o},zm=function(r,t){return Gn.scale([],Gn.normalize([],r),t)},Xm=function(r,t){var e=[r[1]-t[1],t[0]-r[0]],n=Math.sqrt(e[0]*e[0]+e[1]*e[1]);if(n===0)throw new Error("p0 should not be equal to p1");return[e[0]/n,e[1]/n]},Vm=function(r,t){return[t[0]-r[0],t[1]-r[1]]};function Hm(i,r){var t=function(c){var v=[c[0][0],c[0][1]-r],x=[c[0][0],c[0][1]+r];return"M "+v+" A "+r+","+r+",0,0,0,"+x+" A "+r+","+r+",0,0,0,"+v},e=function(c){var v=Gn.scale([],Xm(c[0],c[1]),r),x=Gn.scale([],v,-1),M=Gn.add([],c[0],v),k=Gn.add([],c[1],v),R=Gn.add([],c[1],x),G=Gn.add([],c[0],x);return"M "+M+" L "+k+" A "+[r,r,"0,0,0",R].join(",")+" L "+G+" A "+[r,r,"0,0,0",M].join(",")};if(!i||i.length<1)return"";if(i.length===1)return t(i);if(i.length===2)return e(i);for(var n=new Array(i.length),a=0;a<n.length;++a){var o=a===0?i[i.length-1]:i[a-1],s=i[a],l=Gn.scale([],Xm(o,s),r);n[a]=[Gn.add([],o,l),Gn.add([],s,l)]}var u="A "+[r,r,"0,0,0,"].join(",");return n=n.map(function(h,c){var v="";return c===0&&(v="M "+n[n.length-1][1]+" "),v+=u+h[0]+" L "+h[1],v}),n.join(" ")}function Wm(i,r){var t=i.length,e=function(h){var c=[h[0][0],h[0][1]-r],v=[h[0][0],h[0][1]+r];return"M "+c+" A "+[r,r,"0,0,0",v].join(",")+" A "+[r,r,"0,0,0",c].join(",")},n=function(h){var c=Vm(h[0],h[1]),v=zm(c,r),x=Gn.add([],h[0],Gn.scale([],v,-1)),M=Gn.add([],h[1],v),k=1.2*r,R=zm(Gn.normalize([],c),k),G=Gn.scale([],R,-1),N=Gn.add([],x,G),ot=Gn.add([],M,G),ut=Gn.add([],x,R);return"M "+x+" C "+[N,ot,M].join(",")+" S "+[ut,x].join(",")+" Z"};if(!i||t<1)return"";if(t===1)return e(i);if(t===2)return n(i);for(var a=i.map(function(u,h){var c=i[(h+1)%t];return{p:u,v:Gn.normalize([],Vm(u,c))}}),o=0;o<a.length;++o){var s=o>0?o-1:t-1,l=Gn.normalize([],Gn.add([],a[s].v,Gn.scale([],a[o].v,-1)));a[o].p=Gn.add([],a[o].p,Gn.scale([],l,r))}return a.map(function(u){var h=u.p;return{x:h[0],y:h[1]}})}var jm="shift",zR=["drag","shift","ctrl","alt","control"],XR=function(r,t){var e,n=r.getKeyShape();if(r.get("type")==="path")e=tu(n.attr("path"));else{var a=n.getCanvasBBox();e=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]]}return Ph(t,e)},VR={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:jm,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return zR.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=jm,console.warn("Behavior lasso-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(r){var t=this.lasso,e=r.item;e||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),t||(t=this.createLasso()),this.dragging=!0,this.originPoint={x:r.x,y:r.y},this.points.push(this.originPoint),t.show())},onDragMove:function(r){!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.points.push({x:r.x,y:r.y}),this.updateLasso(r))},onDragEnd:function(r){!this.lasso&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var r=this.points,t=[];return r.length&&(r.forEach(function(e,n){n===0?t.push(["M",e.x,e.y]):t.push(["L",e.x,e.y])}),t.push(["L",r[0].x,r[0].y])),t},clearStates:function(){var r=this,t=r.graph,e=r.selectedState,n=t.findAllByState("node",e),a=t.findAllByState("edge",e);n.forEach(function(o){return t.setItemState(o,e,!1)}),a.forEach(function(o){return t.setItemState(o,e,!1)}),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var r=this,t=this,e=t.graph,n=t.shouldUpdate,a=this.points.map(function(h){return[e.getCanvasByPoint(h.x,h.y).x,e.getCanvasByPoint(h.x,h.y).y]}),o=this.selectedState,s=[],l=[];e.getNodes().forEach(function(h){if(XR(h,a)&&n(h,"select")){s.push(h);var c=h.getModel();l.push(c.id),e.setItemState(h,o,!0)}});var u=[];this.includeEdges&&s.forEach(function(h){var c=h.getOutEdges();c.forEach(function(v){var x=v.getModel(),M=x.source,k=x.target;l.includes(M)&&l.includes(k)&&n(v,"select")&&(u.push(v),e.setItemState(v,r.selectedState,!0))})}),this.selectedEdges=u,this.selectedNodes=s,this.onSelect&&this.onSelect(s,u),e.emit("nodeselectchange",{selectedItems:{nodes:s,edges:u},select:!0})},createLasso:function(){var r=this,t=r.graph.get("delegateGroup").addShape("path",{attrs:(0,V.__assign)({path:[]},r.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=t,this.points=[],t},updateLasso:function(r){var t=this;this.lasso.attr({path:t.getLassoPath()})},onKeyDown:function(r){var t=r.key;!t||(t.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}},Um="click",HR=["click","drag"],Zm=void 0,WR=["shift","ctrl","control","alt","meta",void 0],jR={getDefaultCfg:function(){return{trigger:Um,key:Zm,edgeConfig:{}}},getEvents:function(){var r=this;HR.indexOf(r.trigger.toLowerCase())>-1||(r.trigger=Um,console.warn("Behavior create-edge \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click'\uFF0C'drag'")),r.key&&WR.indexOf(r.key.toLowerCase())===-1&&(r.trigger=Zm,console.warn("Behavior create-edge \u7684 key \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'shift'\uFF0C'ctrl'\uFF0C'alt'\uFF0C'control'\uFF0C\u6216 undefined"));var t;return r.trigger==="drag"?t={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:r.trigger==="click"&&(t={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),r.key&&(t.keydown="onKeyDown",t.keyup="onKeyUp"),t},onDragEnd:function(r){var t=this;if(!(t.key&&!t.keydown)){var e=r.item;(!e||e.getID()===t.source||e.getType()!=="node")&&t.cancelCreating({item:t.edge,x:r.x,y:r.y})}},onClick:function(r){var t=this;if(!(t.key&&!t.keydown)){var e=r.item,n=t.graph,a=e.getModel();if(t.addingEdge&&t.edge){if(!t.shouldEnd.call(t,r))return;var o={target:a.id};t.source===a.id&&(o.type="loop"),n.emit("beforecreateedge",{}),n.updateItem(t.edge,o),n.emit("aftercreateedge",{edge:t.edge}),t.edge.getKeyShape().set("capture",!0),t.edge=null,t.addingEdge=!1}else{if(!t.shouldBegin.call(t,r))return;t.edge=n.addItem("edge",(0,V.__assign)({source:a.id,target:a.id},t.edgeConfig),!1),t.source=a.id,t.addingEdge=!0,t.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(r){var t=this;if(!(t.key&&!t.keydown)){var e={x:r.x,y:r.y};if(!t.graph.findById(t.source)){t.addingEdge=!1;return}t.addingEdge&&t.edge&&t.graph.updateItem(t.edge,{target:e},!1)}},cancelCreating:function(r){var t=this;if(!(t.key&&!t.keydown)){var e=t.graph,n=r.item;if(t.addingEdge&&r.target&&r.target.isCanvas&&r.target.isCanvas()){e.removeItem(t.edge,!1),t.edge=null,t.addingEdge=!1;return}if(t.addingEdge&&t.edge===n){var a=!0;if(!e.get("groupByTypes"))for(var o=r.x,s=r.y,l=e.getNodes(),u=l.length,h=0;h<u;h++){var c=l[h],v=c.getModel(),x=c.getBBox();if(o<=x.maxX&&o>=x.minX&&s<=x.maxY&&s>=x.minY){if(!t.shouldEnd.call(t,{x:r.x,y:r.y,canvasX:r.canvasX,canvasY:r.canvasY,clientX:r.clientX,clientY:r.clientY,item:c}))return;e.emit("beforecreateedge",{}),e.updateItem(t.edge,{target:v.id}),e.emit("aftercreateedge",{edge:t.edge}),a=!1;break}}a&&e.removeItem(t.edge,!1),t.edge=null,t.addingEdge=!1}}},onKeyDown:function(r){var t=this,e=r.key;!e||(e.toLowerCase()===t.key.toLowerCase()?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var r=this;r.addingEdge&&r.edge&&(r.graph.removeItem(r.edge,!1),r.addingEdge=!1,r.edge=null),this.keydown=!1}},Km="ctrl",UR=["shift","ctrl","alt","control"],ZR="1",KR={getDefaultCfg:function(){return{trigger:Km,combinedKey:ZR,functionName:"fitView",functionParams:[]}},getEvents:function(){return UR.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=Km,console.warn("Behavior shortcuts-fit-view \u7684 trigger \u53C2\u6570 '"+this.trigger+"' \u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(r){var t=r.key;if(!!t){var e=this.trigger.toLowerCase(),n=t.toLowerCase();this.triggerKeydown||(n===e||n==="control"&&e==="ctrl"||n==="ctrl"&&e==="control"?this.triggerKeydown=!0:this.triggerKeydown=!1);var a=this.graph;if(!a[this.functionName])return console.warn("Behavior shortcuts-fit-view \u7684 functionName \u53C2\u6570 '"+this.functionName+"' \u4E0D\u5408\u6CD5\uFF0C\u5B83\u4E0D\u662F Graph \u7684\u4E00\u4E2A\u51FD\u6570\u540D"),{};if(this.triggerKeydown&&!this.combinedKey){this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]();return}var o=this.combinedKey.toLowerCase();this.triggerKeydown&&(n===o||n==="control"&&o==="ctrl"||n==="ctrl"&&o==="control")&&(this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]())}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}},$R={"drag-canvas":aR,"zoom-canvas":wR,"drag-node":dR,"activate-relations":pR,"brush-select":yR,"click-select":xR,"lasso-select":VR,tooltip:SR,"edge-tooltip":CR,"drag-group":MR,"drag-node-with-group":_R,"collapse-expand-group":TR,"collapse-expand":LR,"drag-combo":IR,"collapse-expand-combo":BR,"create-edge":jR,"shortcuts-call":KR};(0,Tn.default)($R,function(i,r){bh.registerBehavior(r,i)});var $m=bh,Fo=p(19083),ks=p(19270),Oa=p(27549),Qm=p(54544),QR=function(r){var t=(0,Qm.default)(r.groups,"id"),e=(0,Qm.default)(r.groups,"parentId"),n={};for(var a in e)if(!!a){var o=e[a],s=t[a];if(s&&o){var l=(0,V.__spreadArrays)(o,s);n[a]=l}else o&&(n[a]=o)}var u=(0,V.__assign)((0,V.__assign)({},t),n),h={};for(var c in u)if(!(!c||c==="undefined")){var o=u[c].map(function(k){return k.id});h[c]=o}var v={},x=function(k){if(!k||k==="undefined")return"continue";for(var R=h[k],G=[],N=0,ot=R;N<ot.length;N++){var ut=ot[N],Mt=u[ut].map(function($t){return $t.id});G.push.apply(G,Mt)}var zt=r.nodes?r.nodes.filter(function($t){return G.indexOf($t.groupId)>-1||G.indexOf($t.parentId)>-1}).map(function($t){return $t.id}):[];v[k]=zt};for(var c in h)x(c);return v},JR=function(){function i(r){this.graph=r,this.destroyed=!1,this.modes=r.get("modes")||{default:[]},this.formatModes(),this.mode=r.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return i.prototype.formatModes=function(){var r=this.modes;(0,Tn.default)(r,function(t){(0,Tn.default)(t,function(e,n){(0,Cn.default)(e)&&(t[n]={type:e})})})},i.prototype.setBehaviors=function(r){var t=this.graph,e=this.modes[r],n=[],a;(0,Tn.default)(e||[],function(o){var s=bh.getBehavior(o.type);!s||(a=new s(o),a&&(a.bind(t),n.push(a)))}),this.currentBehaves=n},i.mergeBehaviors=function(r,t){return(0,Tn.default)(t,function(e){r.indexOf(e)<0&&((0,Cn.default)(e)&&(e={type:e}),r.push(e))}),r},i.filterBehaviors=function(r,t){var e=[];return r.forEach(function(n){var a="";(0,Cn.default)(n)?a=n:a=n.type,t.indexOf(a)<0&&e.push(n)}),e},i.prototype.setMode=function(r){var t=this,e=t.modes,n=t.graph,a=r,o=e[a];!o||(n.emit("beforemodechange",{mode:r}),(0,Tn.default)(this.currentBehaves,function(s){s.unbind(n)}),this.setBehaviors(a),n.emit("aftermodechange",{mode:r}),this.mode=r)},i.prototype.getMode=function(){return this.mode},i.prototype.manipulateBehaviors=function(r,t,e){var n=this,a;if((0,Ri.default)(r)?a=r:a=[r],(0,Ri.default)(t))return(0,Tn.default)(t,function(s){n.modes[s]?e?n.modes[s]=i.mergeBehaviors(n.modes[s]||[],a):n.modes[s]=i.filterBehaviors(n.modes[s]||[],a):e&&(n.modes[s]=a)}),this;var o=t;return t||(o=this.mode),this.modes[o]||e&&(this.modes[o]=a),e?this.modes[o]=i.mergeBehaviors(this.modes[o]||[],a):this.modes[o]=i.filterBehaviors(this.modes[o]||[],a),this.setMode(this.mode),this},i.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},i}(),qR=JR,tN=function(){function i(r){this.destroyed=!1,this.graph=r,this.destroyed=!1}return i.prototype.getViewCenter=function(){var r=this.getFormatPadding(),t=this.graph,e=this.graph.get("width"),n=t.get("height");return{x:(e-r[1]-r[3])/2+r[3],y:(n-r[0]-r[2])/2+r[0]}},i.prototype.fitCenter=function(){var r=this.graph,t=r.get("group");t.resetMatrix();var e=t.getCanvasBBox();if(!(e.width===0||e.height===0)){var n=this.getViewCenter(),a={x:e.x+e.width/2,y:e.y+e.height/2};r.translate(n.x-a.x,n.y-a.y)}},i.prototype.fitView=function(){var r=this.graph,t=this.getFormatPadding(),e=r.get("width"),n=r.get("height"),a=r.get("group");a.resetMatrix();var o=a.getCanvasBBox();if(!(o.width===0||o.height===0)){var s=this.getViewCenter(),l={x:o.x+o.width/2,y:o.y+o.height/2};r.translate(s.x-l.x,s.y-l.y);var u=(e-t[1]-t[3])/o.width,h=(n-t[0]-t[2])/o.height,c=u;u>h&&(c=h),r.zoom(c,s)}},i.prototype.getFormatPadding=function(){var r=this.graph.get("fitViewPadding");return Sh(r)},i.prototype.focusPoint=function(r,t,e){var n=this,a=this.getViewCenter(),o=this.getPointByCanvas(a.x,a.y),s=this.graph.get("group").getMatrix();if(s||(s=[1,0,0,0,1,0,0,0,1]),t){var l=(o.x-r.x)*s[0],u=(o.y-r.y)*s[4],h=0,c=0,v=0,x=0;this.graph.get("canvas").animate(function(M){v=l*M,x=u*M,n.graph.translate(v-h,x-c),h=v,c=x},(0,V.__assign)({},e))}else this.graph.translate((o.x-r.x)*s[0],(o.y-r.y)*s[4])},i.prototype.getPointByCanvas=function(r,t){var e=this.graph.get("group").getMatrix();e||(e=[1,0,0,0,1,0,0,0,1]);var n=Lm({x:r,y:t},e);return n},i.prototype.getPointByClient=function(r,t){var e=this.graph.get("canvas"),n=e.getPointByClient(r,t);return this.getPointByCanvas(n.x,n.y)},i.prototype.getClientByPoint=function(r,t){var e=this.graph.get("canvas"),n=this.getCanvasByPoint(r,t),a=e.getClientByPoint(n.x,n.y);return{x:a.x,y:a.y}},i.prototype.getCanvasByPoint=function(r,t){var e=this.graph.get("group").getMatrix();return e||(e=[1,0,0,0,1,0,0,0,1]),Ls({x:r,y:t},e)},i.prototype.focus=function(r,t,e){(0,Cn.default)(r)&&(r=this.graph.findById(r));var n=r.get("group"),a=n.getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]),r&&this.focusPoint({x:a[6],y:a[7]},t,e)},i.prototype.changeSize=function(r,t){var e=this.graph;if(!(0,La.default)(r)||!(0,La.default)(t))throw Error("invalid canvas width & height, please make sure width & height type is number");e.set({width:r,height:t});var n=e.get("canvas");n.changeSize(r,t);var a=e.get("plugins");a.forEach(function(o){if(o.get("gridContainer")){var s=e.get("minZoom");(0,On.Z)(o.get("container"),{width:r+"px",height:t+"px"}),(0,On.Z)(o.get("gridContainer"),{width:r/s+"px",height:t/s+"px",left:0,top:0})}})},i.prototype.destroy=function(){this.graph=null,this.destroyed=!1},i}(),eN=tN,Bs=p(73136),eu=p(61262),rN=function(){function i(r){this.preItem=null,this.graph=r,this.extendEvents=[],this.dragging=!1,this.destroyed=!1,this.initEvents()}return i.prototype.initEvents=function(){var r=this,t=r.graph,e=r.extendEvents,n=t.get("canvas"),a=n.get("el"),o=(0,eu.default)(this,"onCanvasEvents"),s=(0,eu.default)(this,"onExtendEvents"),l=(0,eu.default)(this,"onWheelEvent");n.on("*",o),this.canvasHandler=o,e.push((0,Bs.Z)(a,"DOMMouseScroll",l)),e.push((0,Bs.Z)(a,"mousewheel",l)),typeof window!="undefined"&&(e.push((0,Bs.Z)(window,"keydown",s)),e.push((0,Bs.Z)(window,"keyup",s)),e.push((0,Bs.Z)(window,"focus",s)))},i.getItemRoot=function(r){for(;r&&!r.get("item");)r=r.get("parent");return r},i.prototype.onCanvasEvents=function(r){var t=this.graph,e=t.get("canvas"),n=r.target,a=r.type;r.canvasX=r.x,r.canvasY=r.y;var o={x:r.canvasX,y:r.canvasY},s=t.get("group"),l=s.getMatrix();if(l||(l=[1,0,0,0,1,0,0,0,1]),am(l)&&(o=t.getPointByClient(r.clientX,r.clientY)),r.x=o.x,r.y=o.y,r.currentTarget=t,n===e){a==="mousemove"&&this.handleMouseMove(r,"canvas"),r.target=e,r.item=null,t.emit(a,r),t.emit("canvas:"+a,r);return}var u=i.getItemRoot(n);if(!u){t.emit(a,r);return}var h=u.get("item");if(!h.destroyed){var c=h.getType();if(r.target=n,r.item=h,r.canvasX===r.x&&r.canvasY===r.y){var v=t.getCanvasByPoint(r.x,r.y);r.canvasX=v.x,r.canvasY=v.y}t.emit(a,r),r.name&&!r.name.includes(":")?t.emit(c+":"+a,r):t.emit(r.name,r),a==="dragstart"&&(this.dragging=!0),a==="dragend"&&(this.dragging=!1),a==="mousemove"&&this.handleMouseMove(r,c)}},i.prototype.onExtendEvents=function(r){this.graph.emit(r.type,r)},i.prototype.onWheelEvent=function(r){(0,Fi.default)(r.wheelDelta)&&(r.wheelDelta=-r.detail),this.graph.emit("wheel",r)},i.prototype.handleMouseMove=function(r,t){var e=this,n=e.graph,a=e.preItem,o=n.get("canvas"),s=r.target===o?null:r.item;r=jl(r),a&&a!==s&&!a.destroyed&&(r.item=a,this.emitCustomEvent(a.getType(),"mouseleave",r),this.dragging&&this.emitCustomEvent(a.getType(),"dragleave",r)),s&&a!==s&&(r.item=s,this.emitCustomEvent(t,"mouseenter",r),this.dragging&&this.emitCustomEvent(t,"dragenter",r)),this.preItem=s},i.prototype.emitCustomEvent=function(r,t,e){e.type=t,this.graph.emit(r+":"+t,e)},i.prototype.destroy=function(){var r=this,t=r.graph,e=r.canvasHandler,n=r.extendEvents,a=t.get("canvas");a.off("*",e),(0,Tn.default)(n,function(o){o.remove()}),this.dragging=!1,this.preItem=null,this.extendEvents.length=0,this.canvasHandler=null,this.destroyed=!0},i}(),nN=rN,Jm=p(8289),qm=p(33643),tx=p(85260),iN=p(58070),aN={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,"0":.6,"1":.40099945068359377,"2":.6,"3":.6,"4":.6,"5":.6,"6":.6,"7":.5469985961914062,"8":.6,"9":.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},Ma=Math.PI,Bh=Math.sin,Dh=Math.cos,Gi=Bh(Ma/8),Yi=Dh(Ma/8),ru=function(r,t){var e=r.getBBox(),n={x:e.minX,y:e.minY},a={x:e.maxX,y:e.maxY};if(t){var o=t.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),n=Ls(n,o),a=Ls(a,o)}var s=n.x,l=n.y,u=a.x,h=a.y;return{x:s,y:l,minX:s,minY:l,maxX:u,maxY:h,width:u-s,height:h-l}},ex=function(r){var t=r.sourceNode||r.targetNode,e=t.get("group"),n=e.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var a=t.getKeyShape(),o=a.getBBox(),s=r.loopCfg||{},l=s.dist||Math.max(o.width,o.height)*2,u=s.position||Ke.defaultLoopPosition,h=[n[6],n[7]],c=[r.startPoint.x,r.startPoint.y],v=[r.endPoint.x,r.endPoint.y],x=o.height/2,M=o.height/2,k=x*Gi,R=x*Yi,G=M*Gi,N=M*Yi;if(c[0]===v[0]&&c[1]===v[1]){switch(u){case"top":c=[h[0]-k,h[1]-R],v=[h[0]+G,h[1]-N];break;case"top-right":x=o.height/2,M=o.width/2,k=x*Gi,R=x*Yi,G=M*Gi,N=M*Yi,c=[h[0]+k,h[1]-R],v=[h[0]+N,h[1]-G];break;case"right":x=o.width/2,M=o.width/2,k=x*Gi,R=x*Yi,G=M*Gi,N=M*Yi,c=[h[0]+R,h[1]-k],v=[h[0]+N,h[1]+G];break;case"bottom-right":x=o.width/2,M=o.height/2,k=x*Gi,R=x*Yi,G=M*Gi,N=M*Yi,c=[h[0]+R,h[1]+k],v=[h[0]+G,h[1]+N];break;case"bottom":x=o.height/2,M=o.height/2,k=x*Gi,R=x*Yi,G=M*Gi,N=M*Yi,c=[h[0]+k,h[1]+R],v=[h[0]-G,h[1]+N];break;case"bottom-left":x=o.height/2,M=o.width/2,k=x*Gi,R=x*Yi,G=M*Gi,N=M*Yi,c=[h[0]-k,h[1]+R],v=[h[0]-N,h[1]+G];break;case"left":x=o.width/2,M=o.width/2,k=x*Gi,R=x*Yi,G=M*Gi,N=M*Yi,c=[h[0]-R,h[1]+k],v=[h[0]-N,h[1]-G];break;case"top-left":x=o.width/2,M=o.height/2,k=x*Gi,R=x*Yi,G=M*Gi,N=M*Yi,c=[h[0]-R,h[1]-k],v=[h[0]-G,h[1]-N];break;default:x=o.width/2,M=o.width/2,k=x*Gi,R=x*Yi,G=M*Gi,N=M*Yi,c=[h[0]-k,h[1]-R],v=[h[0]+G,h[1]-N]}if(s.clockwise===!1){var ot=[c[0],c[1]];c=[v[0],v[1]],v=[ot[0],ot[1]]}}var ut=[c[0]-h[0],c[1]-h[1]],Mt=(x+l)/x,zt=(M+l)/M;s.clockwise===!1&&(Mt=(M+l)/M,zt=(x+l)/x);var $t=Gn.scale([],ut,Mt),ee=[h[0]+$t[0],h[1]+$t[1]],Ut=[v[0]-h[0],v[1]-h[1]],le=Gn.scale([],Ut,zt),xe=[h[0]+le[0],h[1]+le[1]];return r.startPoint={x:c[0],y:c[1]},r.endPoint={x:v[0],y:v[1]},r.controlPoints=[{x:ee[0],y:ee[1]},{x:xe[0],y:xe[1]}],r},nu=function(r,t,e,n,a){var o=1e-4,s=[],l=r.getPoint(t);if(l===null)return{x:0,y:0,angle:0};if(t<o)s=r.getStartTangent().reverse();else if(t>1-o)s=r.getEndTangent();else{var u=r.getPoint(t+o);s.push([l.x,l.y]),s.push([u.x,u.y])}var h=Math.atan2(s[1][1]-s[0][1],s[1][0]-s[0][0]);if(h<0&&(h+=Ma*2),e&&(l.x+=Dh(h)*e,l.y+=Bh(h)*e),n){var c=h-Ma/2;h>1/2*Ma&&h<3*1/2*Ma&&(c-=Ma),l.x+=Dh(c)*n,l.y+=Bh(c)*n}var v={x:l.x,y:l.y,angle:h};return a?(h>1/2*Ma&&h<3*1/2*Ma&&(h-=Ma),(0,V.__assign)({rotate:h},v)):v},rx=function i(r,t){if(t(r)===!1)return!1;if(r&&r.children){for(var e=r.children.length-1;e>=0;e--)if(!i(r.children[e],t))return!1}return!0},oN=function i(r,t){if(r&&r.children){for(var e=r.children.length-1;e>=0;e--)if(!i(r.children[e],t))return}return t(r)!==!1},Ji=function(r,t){typeof t=="function"&&rx(r,t)},Ea=function(r,t){typeof t=="function"&&oN(r,t)},nx=function(r,t){var e=["V","TB","BT"],n={x:Infinity,y:Infinity},a={x:-Infinity,y:-Infinity},o="x",s="y";t&&e.indexOf(t)>=0&&(s="x",o="y");var l=0;Ji(r,function(c){return l++,c.x>a.x&&(a.x=c.x),c.x<n.x&&(n.x=c.x),c.y>a.y&&(a.y=c.y),c.y<n.y&&(n.y=c.y),!0});var u=Ma*2/l,h=a[s]-n[s];return h===0||Ji(r,function(c){var v=(c[s]-n[s])/h*(Ma*2-u)+u,x=Math.abs(o==="x"?c.x-r.x:c.y-r.y);return c.x=x*Math.cos(v),c.y=x*Math.sin(v),!0}),r},ix=function(r,t){return t*(aN[r]||1)},ax=function(r,t){var e=0,n=new RegExp("[\u4E00-\u9FA5]+");return r.split("").forEach(function(a){n.test(a)?e+=t:e+=ix(a,t)}),[e,t]},Fh=function(r,t){var e=[],n={},a={};r.forEach(function(s){a[s.id]=s}),r.forEach(function(s,l){var u=(0,f.clone)(s);u.itemType="combo",u.children=void 0,u.parentId===u.id?(console.warn("The parentId for combo "+u.id+" can not be the same as the combo's id"),delete u.parentId):u.parentId&&!a[u.parentId]&&(console.warn("The parent combo for combo "+u.id+" does not exist!"),delete u.parentId);var h=n[u.id];if(h){if(u.children=h.children,n[u.id]=u,h=u,!h.parentId){e.push(h);return}var c=n[h.parentId];if(c)c.children?c.children.push(u):c.children=[u];else{var v={id:h.parentId,children:[h]};n[h.parentId]=v,n[u.id]=u}return}if((0,f.isString)(s.parentId)){var x=n[s.parentId];if(x)x.children?x.children.push(u):x.children=[u],n[u.id]=u;else{var M={id:s.parentId,children:[u]};n[M.id]=M,n[u.id]=u}}else e.push(u),n[u.id]=u});var o={};return(t||[]).forEach(function(s){o[s.id]=s;var l=n[s.comboId];if(l){var u={id:s.id,comboId:s.comboId};l.children?l.children.push(u):l.children=[u],u.itemType="node",n[s.id]=u}}),e.forEach(function(s){s.depth=0,rx(s,function(l){var u,h=n[l.id].itemType;h==="node"?u=n[l.comboId]:u=n[l.parentId],u?h==="node"?l.depth=u.depth+1:l.depth=u.depth+2:l.depth=0;var c=o[l.id];return c&&(c.depth=l.depth),!0})}),e},Rh=function(r,t,e){var n=r,a,o={root:{children:r}},s=!1,l="root";(r||[]).forEach(function(x){if(!s){if(x.id===t){a=x,x.itemType==="combo"?a.parentId=e:a.comboId=e,s=!0;return}Ji(x,function(M){return o[M.id]={children:M.children},n=o[M.parentId||M.comboId||"root"].children,M&&(M.removed||t===M.id)&&n?(l=M.parentId||M.comboId||"root",a=M,M.itemType==="combo"?a.parentId=e:a.comboId=e,s=!0,!1):!0})}}),n=o[l].children;var u=n?n.indexOf(a):-1;if(u>-1&&n.splice(u,1),s||(a={id:t,itemType:"node",comboId:e},o[t]={children:void 0}),t){var h=!1;if(e){var c=0;(r||[]).forEach(function(x){h||Ji(x,function(M){return e===M.id?(h=!0,M.children?M.children.push(a):M.children=[a],c=M.depth,a.itemType==="node"?a.depth=c+2:a.depth=c+1,!1):!0})})}else(!e||!h)&&a.itemType!=="node"&&r.push(a);var v=a.depth;Ji(a,function(x){return x.itemType==="node"?v+=2:v+=1,x.depth=v,!0})}return r},Nh=function(r,t){var e={minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};return!r||r.length===0||(r.forEach(function(n){var a=t.findById(n.id);if(!(!a||!a.isVisible())){a.set("bboxCanvasCache",void 0);var o=a.getCanvasBBox();o.x&&e.minX>o.minX&&(e.minX=o.minX),o.y&&e.minY>o.minY&&(e.minY=o.minY),o.x&&e.maxX<o.maxX&&(e.maxX=o.maxX),o.y&&e.maxY<o.maxY&&(e.maxY=o.maxY)}}),e.x=(e.minX+e.maxX)/2,e.y=(e.minY+e.maxY)/2,e.width=e.maxX-e.minX,e.height=e.maxY-e.minY,e.centerX=(e.minX+e.maxX)/2,e.centerY=(e.minY+e.maxY)/2,Object.keys(e).forEach(function(n){(e[n]===Infinity||e[n]===-Infinity)&&(e[n]=void 0)})),e},sN=function(r){var t=r.group,e=r.height,n=r.width,a=r.x,o=r.y,s=t.get("canvas"),l=s.get("width"),u=s.get("height"),h={start:{x:0,y:0},end:{x:0,y:0}};return h.start.x=a/l,h.start.y=o/u,h.end.x=(a+n)/l,h.end.y=(o+e)/u,h};function iu(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?iu=function(t){return typeof t}:iu=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iu(i)}function ox(i){if(typeof i!="string")return i;var r=function($t){if(typeof $t!="string")return $t;try{return JSON.parse($t.trim())}catch(ee){return $t.trim()}},t=r(i);if(typeof t!="string")return t;for(var e=function($t){return $t[$t.length-1]},n=i.trim(),a=[],o=[],s=function(){for(var $t=[],ee=0;ee<arguments.length;ee++)$t[ee]=arguments[ee];return $t.some(function(Ut){return e(o)===Ut})},l=function(){return e(a)},u=null,h=0,c="";h<n.length;){var v=n[h],x=s('"',"'");if(!x&&!v.trim()){h+=1;continue}var M=n[h-1]==="\\",k=s("}"),R=s("]"),G=s(","),N=l();if(x)if(e(o)===v&&!M){o.pop();var ot=r(c);N.push(ot),u=ot,c=""}else c+=v;else if(R&&v===",")c&&(N.push(r(c)),c="");else if(k&&v===":")o.push(","),c&&(N.push(c),c="");else if(G&&v===",")c&&(N.push(r(c)),c=""),o.pop();else if(v==="}"&&(k||G)){c&&(N.push(r(c)),c=""),G&&o.pop();for(var ut={},Mt=1;Mt<N.length;Mt+=2)ut[N[Mt-1]]=N[Mt];a.pop(),a.length&&e(a).push(ut),o.pop(),u=ut}else v==="]"&&R?(c&&(N.push(r(c)),c=""),a.pop(),a.length&&e(a).push(N),o.pop(),u=N):v==="{"?(a.push([]),o.push("}")):v==="["?(a.push([]),o.push("]")):v==='"'?o.push('"'):v==="'"?o.push("'"):c+=v;h+=1}return u||c}var lN=function(r){return r.split("-").reduce(function(t,e){return t+e.charAt(0).toUpperCase()+e.slice(1)})},uN=function(r){return function(t){for(var e=r.length,n=[],a=0,o="";a<e;)if(r[a]==="{"&&r[a+1]==="{")n.push(o),o="",a+=2;else if(r[a]==="}"&&r[a+1]==="}"){if(n.length){var s=n.pop();o=(0,iN.default)(t,o,s.endsWith("=")?'"{'+o+'}"':o),n.push(s+o)}a+=2,o=""}else o+=r[a],a+=1;return n.push(o),n.map(function(l,u){return n[u-1]&&n[u-1].endsWith("=")?'"{'+l+'}"':l}).join("")}};function sx(i,r){var t={},e=i.getAttributeNames&&i.getAttributeNames()||[],n=i.children&&Array.from(i.children).map(function(s){return sx(s,r)}),a={},o=i.tagName?i.tagName.toLowerCase():"group";return o==="text"&&(t.text=i.innerText),a.type=o,o==="img"&&(a.type="image"),Array.from(e).forEach(function(s){var l=lN(s),u=i.getAttribute(s);try{if(l==="style"||l==="attrs"){var h=ox(u);t=(0,V.__assign)((0,V.__assign)({},t),h)}else a[l]=ox(u)}catch(c){if(l==="style")throw c;a[l]=u}}),a.attrs=t,r&&r.style&&a.name&&iu(r.style[a.name])==="object"&&(a.attrs=(0,V.__assign)((0,V.__assign)({},a.attrs),r.style[a.name])),r&&r.style&&a.keyshape&&(a.attrs=(0,V.__assign)((0,V.__assign)({},a.attrs),r.style)),n.length&&(a.children=n),a}function fN(i,r,t){var e=i.attrs,n=e===void 0?{}:e,a={x:r.x||0,y:r.y||0,width:t.width||0,height:t.height||0},o,s;switch(i.type){case"maker":case"circle":n.r&&(s=2*n.r,o=2*n.r);break;case"text":n.text&&(s=ax(n.text,n.fontSize||12)[0],o=16,a.y+=o,a.height=o,a.width=s,i.attrs=(0,V.__assign)({fontSize:12,fill:"#000"},n));break;default:n.width&&(s=n.width),n.height&&(o=n.height)}return o>=0&&(a.height=o),s>=0&&(a.width=s),n.marginTop&&(a.y+=n.marginTop),n.marginLeft&&(a.x+=n.marginLeft),a}function lx(i,r){var t;r===void 0&&(r={x:0,y:0});var e=(0,V.__assign)({x:0,y:0,width:0,height:0},r);if((t=i.children)===null||t===void 0?void 0:t.length){var n=i.attrs,a=n===void 0?{}:n,o=a.marginTop,s=(0,V.__assign)({},r);o&&(s.y+=o);for(var l=0;l<i.children.length;l++){i.children[l].attrs.key=(a.key||"root")+" -"+l+" ";var u=lx(i.children[l],s);if(u.bbox){var h=u.bbox;u.attrs.next==="inline"?s.x+=u.bbox.width:s.y+=u.bbox.height,h.width+h.x>e.width&&(e.width=h.width+h.x),h.height+h.y>e.height&&(e.height=h.height+h.y)}}}return i.bbox=fN(i,r,e),i.attrs=(0,V.__assign)((0,V.__assign)({},i.attrs),i.bbox),i}function ux(i,r){var t,e,n,a,o=(i||{}).type,s=((r==null?void 0:r.attrs)||{}).key;if(s&&i&&(i.attrs.key=s),!i&&r)return{action:"delete",val:r,type:o,key:s};if(i&&!r)return{action:"add",val:i,type:o};if(!i&&!r)return{action:"same",type:o};var l=[];if(((t=i.children)===null||t===void 0?void 0:t.length)>0||((e=r.children)===null||e===void 0?void 0:e.length)>0)for(var u=Math.max((n=i.children)===null||n===void 0?void 0:n.length,(a=r.children)===null||a===void 0?void 0:a.length),h=r.children||[],c=i.children||[],v=0;v<u;v+=1)l.push(ux(c[v],h[v]));var x=Object.keys(r.attrs),M=Object.keys(i.attrs);return r.type!==i.type?{action:"restructure",nowTarget:i,formerTarget:r,key:s,children:l}:x.filter(function(k){return k!=="children"}).some(function(k){return i.attrs[k]!==r.attrs[k]||!M.includes(k)})?{action:"change",val:i,children:l,type:o,key:s}:{action:"same",children:l,type:o,key:s}}function fx(i){var r={},t=function(n){var a=typeof i=="function"?i(n):i,o=uN(a)(n),s=document.createElement("div");s.innerHTML=o;var l=s.children[0],u=lx(sx(l,n));return s.remove(),u};return{draw:function(n,a){var o=t(n),s=a,l=function u(h){var c=h.attrs,v=c===void 0?{}:c,x=h.bbox,M=h.type,k=h.children,R=(0,V.__rest)(h,["attrs","bbox","type","children"]);if(h.type!=="group"){var G=a.addShape(h.type,(0,V.__assign)({attrs:v,origin:{bbox:x,type:M,children:k}},R));h.keyshape&&(s=G)}h.children&&h.children.forEach(function(N){return u(N)})};return l(o),r[n.id]=[o],s},update:function(n,a){r[n.id]||(r[n.id]=[]);var o=a.getContainer(),s=o.get("children"),l=t(n),u=r[n.id].pop(),h=ux(l,u),c=function M(k){var R;k.type!=="group"&&o.addShape(k.type,{attrs:k.attrs}),((R=k.children)===null||R===void 0?void 0:R.length)&&k.children.map(function(G){return M(G)})},v=function M(k){var R,G=s.find(function(N){return N.attrs.key===k.attrs.key});G&&o.removeChild(G),((R=k.children)===null||R===void 0?void 0:R.length)&&k.children.map(function(N){return M(N)})},x=function M(k){var R=k.key;if(k.type!=="group"){var G=s.find(function(ot){return ot.attrs.key===R});switch(k.action){case"change":if(G){var N=k.val.keyshape?a.getOriginStyle():{};G.attr((0,V.__assign)((0,V.__assign)({},N),k.val.attrs))}break;case"add":c(k.val);break;case"delete":v(k.val);break;case"restructure":v(k.formerTarget),c(k.nowTarget);break;default:break}}k.children&&k.children.forEach(function(ot){return M(ot)})};x(h),r[n.id].push(l)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var Gh={};function hx(i){return Gh[i]||(Gh[i]=(0,f.upperFirst)(i)),Gh[i]}var hN={defaultShapeType:"defaultType",className:null,getShape:function(r){var t=this,e=t[r]||t[t.defaultShapeType];return e},draw:function(r,t,e){var n=this.getShape(r),a=n.draw(t,e);return n.afterDraw&&n.afterDraw(t,e,a),a},baseUpdate:function(r,t,e){var n=this.getShape(r);n.update&&n.update(t,e),n.afterUpdate&&n.afterUpdate(t,e)},setState:function(r,t,e,n){var a=this.getShape(r);a.setState(t,e,n)},shouldUpdate:function(r){var t=this.getShape(r);return!!t.update},getControlPoints:function(r,t){var e=this.getShape(r);return e.getControlPoints(t)},getAnchorPoints:function(r,t){var e=this.getShape(r);return e.getAnchorPoints(t)}},Yh={options:{},draw:function(r,t){return this.drawShape(r,t)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(r){return r.controlPoints},getAnchorPoints:function(r){var t=this.options.anchorPoints,e=r.anchorPoints||t;return e}},au=function(){function i(){}return i.registerFactory=function(r,t){var e=hx(r),n=hN,a=(0,V.__assign)((0,V.__assign)({},n),t);return i[e]=a,a.className=e,a},i.getFactory=function(r){var t=hx(r);return i[t]},i.registerNode=function(r,t,e){var n=i.Node,a;if(typeof t=="string"||typeof t=="function"){var o=fx(t);a=(0,V.__assign)((0,V.__assign)({},n.getShape("single-node")),o)}else if(t.jsx){var s=t.jsx,o=fx(s);a=(0,V.__assign)((0,V.__assign)((0,V.__assign)({},n.getShape("single-node")),o),t)}else{var l=e?n.getShape(e):Yh;a=(0,V.__assign)((0,V.__assign)({},l),t)}return a.type=r,a.itemType="node",n[r]=a,a},i.registerEdge=function(r,t,e){var n=i.Edge,a=e?n.getShape(e):Yh,o=(0,V.__assign)((0,V.__assign)({},a),t);return o.type=r,o.itemType="edge",n[r]=o,o},i.registerCombo=function(r,t,e){var n=i.Combo,a=e?n.getShape(e):Yh,o=(0,V.__assign)((0,V.__assign)({},a),t);return o.type=r,o.itemType="combo",n[r]=o,o},i}(),ni=au;au.registerFactory("node",{defaultShapeType:"circle"}),au.registerFactory("edge",{defaultShapeType:"line"}),au.registerFactory("combo",{defaultShapeType:"circle"});var zh="bboxCache",Xh="bboxCanvasCache",cN=function(){function i(r){this._cfg={},this.destroyed=!1;var t={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(t,this.getDefaultCfg(),r);var e=this.get("model"),n=e.id,a=this.get("type");n||(n=(0,f.uniqueId)(a),this.get("model").id=n),this.set("id",n);var o=r.group;o&&(o.set("item",this),o.set("id",n)),this.init(),this.draw();var s=e.shape||e.type||(a==="edge"?"line":"circle"),l=this.get("shapeFactory");if(l&&l[s]){var u=l[s].options;if(u&&u.stateStyles){var h=this.get("styles")||e.stateStyles;h=(0,f.deepMix)({},u.stateStyles,h),this.set("styles",h)}}}return i.prototype.calculateBBox=function(){var r=this.get("keyShape"),t=this.get("group"),e=ru(r,t);return e.x=e.minX,e.y=e.minY,e.width=e.maxX-e.minX,e.height=e.maxY-e.minY,e.centerX=(e.minX+e.maxX)/2,e.centerY=(e.minY+e.maxY)/2,e},i.prototype.calculateCanvasBBox=function(){var r=this.get("keyShape"),t=this.get("group"),e=ru(r,t);return e.x=e.minX,e.y=e.minY,e.width=e.maxX-e.minX,e.height=e.maxY-e.minY,e.centerX=(e.minX+e.maxX)/2,e.centerY=(e.minY+e.maxY)/2,e},i.prototype.drawInner=function(){var r=this,t=r.get("shapeFactory"),e=r.get("group"),n=r.get("model");e.clear();var a=n.visible;if(a!==void 0&&!a&&r.changeVisibility(a),!!t){r.updatePosition(n);var o=r.getShapeCfg(n),s=o.shape||o.type,l=t.draw(s,o,e);l&&(r.set("keyShape",l),l.set("isKeyShape",!0),l.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",s),this.restoreStates(t,s)}},i.prototype.setOriginStyle=function(r){var t={},e=this.get("group"),n=e.get("children"),a=this.getKeyShape(),o=this;(0,f.each)(n,function(u){var h=u.get("name");if(h)t[h]=o.getShapeStyleByName(h);else{var c=a.get("name"),v=o.getShapeStyleByName();c?t[c]=v:Object.assign(t,v)}});var s=this.getOriginStyle(),l={};r?l=(0,f.deepMix)({},s,t,r.style,{labelCfg:r.labelCfg}):l=(0,f.deepMix)({},s,t),o.set("originStyle",l)},i.prototype.restoreStates=function(r,t){var e=this,n=e.get("states");(0,f.each)(n,function(a){r.setState(t,a,!0,e)})},i.prototype.init=function(){var r=ni.getFactory(this.get("type"));this.set("shapeFactory",r)},i.prototype.get=function(r){return this._cfg[r]},i.prototype.set=function(r,t){(0,f.isPlainObject)(r)?this._cfg=(0,V.__assign)((0,V.__assign)({},this._cfg),r):this._cfg[r]=t},i.prototype.getDefaultCfg=function(){return{}},i.prototype.clearCache=function(){this.set(zh,null),this.set(Xh,null)},i.prototype.beforeDraw=function(){},i.prototype.afterDraw=function(){},i.prototype.afterUpdate=function(){},i.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},i.prototype.getShapeStyleByName=function(r){var t=this.get("group"),e=this.getKeyShape();if(r&&(e=t.find(function(a){return a.get("name")===r})),e){var n={};return(0,f.each)(e.attr(),function(a,o){o!=="img"&&(n[o]=a)}),n}return{}},i.prototype.getShapeCfg=function(r){var t=this.get("styles");if(t){var e=r;return e.style=(0,V.__assign)((0,V.__assign)({},t),r.style),e}return r},i.prototype.getStateStyle=function(r){var t=this.get("styles"),e=t&&t[r];return e},i.prototype.getOriginStyle=function(){return this.get("originStyle")},i.prototype.getCurrentStatesStyle=function(){var r=this,t={};return(0,f.each)(r.getStates(),function(e){t=Object.assign(t,r.getStateStyle(e))}),t},i.prototype.setState=function(r,t){var e=this.get("states"),n=this.get("shapeFactory"),a=r,o=r;(0,f.isString)(t)&&(a=r+":"+t,o=r+":");var s=e;if((0,f.isBoolean)(t)){var l=e.indexOf(o);if(t){if(l>-1)return;e.push(a)}else l>-1&&e.splice(l,1)}else if((0,f.isString)(t)){var u=e.filter(function(v){return v.includes(o)});u.length>0&&this.clearStates(u),s=s.filter(function(v){return!v.includes(o)}),s.push(a),this.set("states",s)}if(n){var h=this.get("model"),c=h.shape||h.type;n.setState(c,r,t,this)}},i.prototype.clearStates=function(r){var t=this,e=t.getStates(),n=t.get("shapeFactory"),a=t.get("model"),o=a.shape||a.type;r||(r=e),(0,f.isString)(r)&&(r=[r]);var s=e.filter(function(l){return r.indexOf(l)===-1});t.set("states",s),r.forEach(function(l){n.setState(o,l,!1,t)})},i.prototype.getContainer=function(){return this.get("group")},i.prototype.getKeyShape=function(){return this.get("keyShape")},i.prototype.getModel=function(){return this.get("model")},i.prototype.getType=function(){return this.get("type")},i.prototype.getID=function(){return this.get("id")},i.prototype.isItem=function(){return!0},i.prototype.getStates=function(){return this.get("states")},i.prototype.hasState=function(r){var t=this.getStates();return t.indexOf(r)>=0},i.prototype.refresh=function(){var r=this.get("model");this.updatePosition(r),this.updateShape(),this.afterUpdate(),this.clearCache()},i.prototype.isOnlyMove=function(r){return!1},i.prototype.update=function(r){var t=this.get("model"),e=t.visible,n=r.visible;e!==n&&n!==void 0&&this.changeVisibility(n);var a={x:t.x,y:t.y};r.x=isNaN(r.x)?t.x:r.x,r.y=isNaN(r.y)?t.y:r.y;var o=this.get("styles");if(r.stateStyles){var s=r.stateStyles;(0,f.mix)(o,s),delete r.stateStyles}Object.assign(t,r);var l=this.isOnlyMove(r);l?this.updatePosition(r):((a.x!==r.x||a.y!==r.y)&&this.updatePosition(r),this.updateShape()),this.afterUpdate(),this.clearCache()},i.prototype.updateShape=function(){var r=this.get("shapeFactory"),t=this.get("model"),e=t.shape||t.type;if(r.shouldUpdate(e)&&e===this.get("currentShape")){var n=this.getShapeCfg(t);r.baseUpdate(e,n,this)}else this.draw();this.setOriginStyle(t),this.restoreStates(r,e)},i.prototype.updatePosition=function(r){var t=this.get("model"),e=(0,f.isNil)(r.x)?t.x:r.x,n=(0,f.isNil)(r.y)?t.y:r.y,a=this.get("group");(0,f.isNil)(e)||(0,f.isNil)(n)||(a.resetMatrix(),Im(a,{x:e,y:n}),t.x=e,t.y=n,this.clearCache())},i.prototype.getBBox=function(){var r=this.get(zh);return r||(r=this.calculateBBox(),this.set(zh,r)),r},i.prototype.getCanvasBBox=function(){var r=this.get(Xh);return r||(r=this.calculateCanvasBBox(),this.set(Xh,r)),r},i.prototype.toFront=function(){var r=this.get("group");r.toFront()},i.prototype.toBack=function(){var r=this.get("group");r.toBack()},i.prototype.show=function(){this.changeVisibility(!0)},i.prototype.hide=function(){this.changeVisibility(!1)},i.prototype.changeVisibility=function(r){var t=this.get("group");r?t.show():t.hide(),this.set("visible",r)},i.prototype.isVisible=function(){return this.get("visible")},i.prototype.enableCapture=function(r){var t=this.get("group");t&&t.set("capture",r)},i.prototype.destroy=function(){if(!this.destroyed){var r=this.get("animate"),t=this.get("group");r&&t.stopAnimate(),this.clearCache(),t.remove(),this._cfg=null,this.destroyed=!0}},i}(),cx=cN,ou={source:"start",target:"end"},Xa="Node",rs="Point",vN="Anchor",dN=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},r.prototype.setEnd=function(t,e){var n=ou[t]+rs,a=t+Xa,o=this.get(a);o&&!o.destroyed&&o.removeEdge(this),(0,f.isPlainObject)(e)?(this.set(n,e),this.set(a,null)):(e.addEdge(this),this.set(a,e),this.set(n,null))},r.prototype.getLinkPoint=function(t,e,n){var a=ou[t]+rs,o=t+Xa,s=this.get(a);if(!s){var l=this.get(o),u=t+vN,h=this.getPrePoint(t,n),c=e[u];(0,f.isNil)(c)||(s=l.getLinkPointByAnchor(c)),s=s||l.getLinkPoint(h),(0,f.isNil)(s.index)||this.set(t+"AnchorIndex",s.index)}return s},r.prototype.getPrePoint=function(t,e){if(e&&e.length){var n=t==="source"?0:e.length-1;return e[n]}var a=t==="source"?"target":"source";return this.getEndPoint(a)},r.prototype.getEndPoint=function(t){var e=t+Xa,n=ou[t]+rs,a=this.get(e);return a?a.get("model"):this.get(n)},r.prototype.getControlPointsByCenter=function(t){var e=this.getEndPoint("source"),n=this.getEndPoint("target"),a=this.get("shapeFactory"),o=t.shape||t.type;return a.getControlPoints(o,{startPoint:e,endPoint:n})},r.prototype.getEndCenter=function(t){var e=t+Xa,n=ou[t]+rs,a=this.get(e);if(a){var o=a.getBBox();return{x:o.centerX,y:o.centerY}}return this.get(n)},r.prototype.init=function(){i.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},r.prototype.getShapeCfg=function(t){var e=this,n=e.get("linkCenter"),a=i.prototype.getShapeCfg.call(this,t);if(n)a.startPoint=e.getEndCenter("source"),a.endPoint=e.getEndCenter("target");else{var o=a.controlPoints||e.getControlPointsByCenter(a);a.startPoint=e.getLinkPoint("source",t,o),a.endPoint=e.getLinkPoint("target",t,o)}return a.sourceNode=e.get("sourceNode"),a.targetNode=e.get("targetNode"),a},r.prototype.getModel=function(){var t=this.get("model"),e=this.get("source"+Xa),n=this.get("target"+Xa);return e?delete t["source"+Xa]:t.source=this.get("start"+rs),n?delete t["target"+Xa]:t.target=this.get("end"+rs),!(0,f.isString)(t.source)&&!(0,f.isPlainObject)(t.source)&&(t.source=t.source.getID()),!(0,f.isString)(t.target)&&!(0,f.isPlainObject)(t.target)&&(t.target=t.target.getID()),t},r.prototype.setSource=function(t){this.setEnd("source",t),this.set("source",t)},r.prototype.setTarget=function(t){this.setEnd("target",t),this.set("target",t)},r.prototype.getSource=function(){return this.get("source")},r.prototype.getTarget=function(){return this.get("target")},r.prototype.updatePosition=function(){},r.prototype.update=function(t){var e=this.get("model"),n=e.visible,a=t.visible;n!==a&&a!==void 0&&this.changeVisibility(a);var o=this.get("styles");if(t.stateStyles){var s=t.stateStyles;(0,f.mix)(o,s),delete t.stateStyles}Object.assign(e,t),this.updateShape(),this.afterUpdate(),this.clearCache()},r.prototype.destroy=function(){var t=this.get("source"+Xa),e=this.get("target"+Xa);t&&!t.destroyed&&t.removeEdge(this),e&&!e.destroyed&&e.removeEdge(this),i.prototype.destroy.call(this)},r}(cx),pN=dN,Ds=p(66974),Vh="anchorPointsCache",gN="bboxCache",yN=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getNearestPoint=function(t,e){for(var n=0,a=t[0],o=Os(t[0],e),s=0;s<t.length;s++){var l=t[s],u=Os(l,e);u<o&&(a=l,o=u,n=s)}return a.anchorIndex=n,a},r.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},r.prototype.getEdges=function(){return this.get("edges")},r.prototype.getInEdges=function(){var t=this;return this.get("edges").filter(function(e){return e.get("target")===t})},r.prototype.getOutEdges=function(){var t=this;return this.get("edges").filter(function(e){return e.get("source")===t})},r.prototype.getNeighbors=function(t){var e=this,n=this.get("edges");if(t==="target"){var a=function(u){return u.getSource()===e};return n.filter(a).map(function(l){return l.getTarget()})}if(t==="source"){var o=function(u){return u.getTarget()===e};return n.filter(o).map(function(l){return l.getSource()})}var s=function(u){return u.getSource()===e?u.getTarget():u.getSource()};return n.map(s)},r.prototype.getLinkPointByAnchor=function(t){var e=this.getAnchorPoints();return e[t]},r.prototype.getLinkPoint=function(t){var e=this.get("keyShape"),n=e.get("type"),a=this.get("type"),o,s,l=this.getBBox();a==="combo"?(o=(l.maxX+l.minX)/2,s=(l.maxY+l.minY)/2):(o=l.centerX,s=l.centerY);var u=this.getAnchorPoints(),h;switch(n){case"circle":h=Tm({x:o,y:s,r:l.width/2},t);break;case"ellipse":h=Pm({x:o,y:s,rx:l.width/2,ry:l.height/2},t);break;default:h=Am(l,t)}var c=h;return u.length&&(c||(c=t),c=this.getNearestPoint(u,c)),c||(c={x:o,y:s}),c},r.prototype.getAnchorPoints=function(){var t=this.get(Vh);if(!t){t=[];var e=this.get("shapeFactory"),n=this.getBBox(),a=this.get("model"),o=this.getShapeCfg(a),s=a.shape||a.type,l=e.getAnchorPoints(s,o)||[];(0,Tn.default)(l,function(u,h){var c=(0,Ds.default)({x:n.minX+u[0]*n.width,y:n.minY+u[1]*n.height},u[2],{index:h});t.push(c)}),this.set(Vh,t)}return t},r.prototype.addEdge=function(t){this.get("edges").push(t)},r.prototype.lock=function(){this.set("locked",!0)},r.prototype.unlock=function(){this.set("locked",!1)},r.prototype.hasLocked=function(){return this.get("locked")},r.prototype.removeEdge=function(t){var e=this.getEdges(),n=e.indexOf(t);n>-1&&e.splice(n,1)},r.prototype.clearCache=function(){this.set(gN,null),this.set(Vh,null)},r.prototype.isOnlyMove=function(t){if(!t)return!1;var e=!(0,Fi.default)(t.x),n=!(0,Fi.default)(t.y),a=Object.keys(t);return a.length===1&&(e||n)||a.length===2&&e&&n},r}(cx),vx=yN,mN="bboxCache",dx="bboxCanvasCache",Hh="sizeCache",xN="anchorPointsCache",bN=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},r.prototype.getShapeCfg=function(t){var e=this.get("styles"),n=this.get("bbox");if(e&&n){var a=t,o={r:Math.hypot(n.height,n.width)/2||Ke.defaultCombo.size[0]/2,width:n.width||Ke.defaultCombo.size[0],height:n.height||Ke.defaultCombo.size[1]};a.style=(0,V.__assign)((0,V.__assign)((0,V.__assign)({},e),t.style),o);var s=t.padding||Ke.defaultCombo.padding;return(0,La.default)(s)?(o.r+=s,o.width+=s*2,o.height+=s*2):(o.r+=s[0],o.width+=s[1]+s[3]||s[1]*2,o.height+=s[0]+s[2]||s[0]*2),this.set(Hh,o),a}return t},r.prototype.calculateCanvasBBox=function(){var t=this.get("keyShape"),e=this.get("group"),n=ru(t,e);n.x=n.minX,n.y=n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2;var a=this.get(Hh);if(a){var o=t.get("type");o==="circle"?(n.width=a.r*2,n.height=a.r*2):(n.width=a.width,n.height=a.height),n.minX=n.centerX-n.width/2,n.minY=n.centerY-n.height/2,n.maxX=n.centerX+n.width/2,n.maxY=n.centerY+n.height/2}else n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2;return n},r.prototype.getChildren=function(){var t=this;return{nodes:t.getNodes(),combos:t.getCombos()}},r.prototype.getNodes=function(){var t=this;return t.get("nodes")},r.prototype.getCombos=function(){var t=this;return t.get("combos")},r.prototype.addChild=function(t){var e=this,n=t.getType();switch(n){case"node":e.addNode(t);break;case"combo":e.addCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},r.prototype.addCombo=function(t){var e=this;return e.get("combos").push(t),!0},r.prototype.addNode=function(t){var e=this;return e.get("nodes").push(t),!0},r.prototype.removeChild=function(t){var e=this,n=t.getType();switch(n){case"node":e.removeNode(t);break;case"combo":e.removeCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},r.prototype.removeCombo=function(t){if(!!t){var e=this.getCombos(),n=e.indexOf(t);return n>-1?(e.splice(n,1),!0):!1}},r.prototype.removeNode=function(t){if(!!t){var e=this.getNodes(),n=e.indexOf(t);return n>-1?(e.splice(n,1),!0):!1}},r.prototype.isOnlyMove=function(t){return!1},r.prototype.getBBox=function(){this.set(dx,null);var t=this.calculateCanvasBBox();return t},r.prototype.clearCache=function(){this.set(mN,null),this.set(dx,null),this.set(xN,null)},r.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),e=this.get("group");t&&e.stopAnimate(),this.clearCache(),this.set(Hh,null),this.set("bbox",null),e.remove(),this._cfg=null,this.destroyed=!0}},r}(vx),wN=bN,su="node",lu="edge",px="vedge",uu="combo",SN="default",gx="Mapper",io="stateStyles",CN=Object.hasOwnProperty,MN=function(){function i(r){this.graph=r,this.destroyed=!1}return i.prototype.addItem=function(r,t){var e=this,n=this.graph,a=r===px?lu:r,o=n.get(a+"Group")||n.get("group"),s=(0,tx.default)(a),l=null,u=n.get(a+(0,tx.default)(io))||{},h=n.get(SN+s);t[io]&&(u=t[io]);var c=n.get(a+gx);if(c){var v=c(t);v[io]&&(u=v[io],delete v[io]),t=(0,Ui.default)({},h,t,v)}else h&&(0,Tn.default)(h,function(ot,ut){CN.call(t,ut)||((0,qm.default)(ot)?t[ut]=(0,Jm.default)(ot):t[ut]=h[ut])});if(t.shape&&!t.type&&console.warn("shape \u5B57\u6BB5\u5373\u5C06\u88AB\u5E9F\u5F03\uFF0C\u8BF7\u4F7F\u7528 type \u4EE3\u66FF"),n.emit("beforeadditem",{type:r,model:t}),r===lu||r===px){var x=void 0,M=void 0;if(x=t.source,M=t.target,x&&(0,Cn.default)(x)&&(x=n.findById(x)),M&&(0,Cn.default)(M)&&(M=n.findById(M)),!x||!M){console.warn("The source or target node of edge "+t.id+" does not exist!");return}x.getType&&x.getType()==="combo"&&(t.isComboEdge=!0,n.updateCombo(x)),M.getType&&M.getType()==="combo"&&(t.isComboEdge=!0,n.updateCombo(M)),l=new pN({model:t,source:x,target:M,styles:u,linkCenter:n.get("linkCenter"),group:o.addGroup()})}else if(r===su)l=new vx({model:t,styles:u,group:o.addGroup()});else if(r===uu){var k=t.children,R=Nh(k,n);t.x=R.x||t.x||Math.random()*100,t.y=R.y||t.y||Math.random()*100;var G=o.addGroup();G.setZIndex(t.depth),l=new wN({model:t,styles:u,bbox:R,group:G});var N=l.getModel();(k||[]).forEach(function(ot){var ut=n.findById(ot.id);l.addChild(ut),ot.depth=N.depth+2}),t.collapsed&&setTimeout(function(){n.collapseCombo(l),e.updateCombo(l,[])},250)}if(l)return n.get(r+"s").push(l),n.get("itemMap")[l.get("id")]=l,n.emit("afteradditem",{item:l,model:t}),l},i.prototype.updateItem=function(r,t){var e=this.graph;if((0,Cn.default)(r)&&(r=e.findById(r)),!(!r||r.destroyed)){var n="";r.getType&&(n=r.getType());var a=e.get(n+gx),o=r.getModel();if(a){var s=(0,Ui.default)({},o,t),l=a(s),u=(0,Ui.default)({},o,l,t);l[io]&&(r.set("styles",u[io]),delete u[io]),(0,Tn.default)(u,function(x,M){t[M]=x})}else(0,Tn.default)(t,function(x,M){o[M]&&(0,qm.default)(x)&&!(0,Ri.default)(x)&&(t[M]=(0,V.__assign)((0,V.__assign)({},o[M]),t[M]))});if(e.emit("beforeupdateitem",{item:r,cfg:t}),n===lu){if(t.source){var h=t.source;(0,Cn.default)(h)&&(h=e.findById(h)),r.setSource(h)}if(t.target){var c=t.target;(0,Cn.default)(c)&&(c=e.findById(c)),r.setTarget(c)}}if(r.update(t),n===su||n===uu){var v=r.getEdges();(0,Tn.default)(v,function(x){x.refresh()})}e.emit("afterupdateitem",{item:r,cfg:t})}},i.prototype.updateCombo=function(r,t){var e=this.graph;if((0,Cn.default)(r)&&(r=e.findById(r)),!(!r||r.destroyed)){var n=Nh(t,e);r.set("bbox",n),r.update({x:n.x,y:n.y});for(var a=r.getEdges()||[],o=a.length,s=0;s<o;s++){var l=a[s];l==null||l.refresh()}}},i.prototype.collapseCombo=function(r){var t=this.graph;(0,Cn.default)(r)&&(r=t.findById(r));var e=r.getChildren();e.nodes.forEach(function(n){t.hideItem(n)}),e.combos.forEach(function(n){t.hideItem(n)})},i.prototype.expandCombo=function(r){var t=this.graph;(0,Cn.default)(r)&&(r=t.findById(r));var e=r.getChildren();e.nodes.forEach(function(n){t.showItem(n)}),e.combos.forEach(function(n){n.getModel().collapsed?n.show():t.showItem(n)})},i.prototype.removeItem=function(r){var t=this,e=this.graph;if((0,Cn.default)(r)&&(r=e.findById(r)),!(!r||r.destroyed)){var n=(0,Jm.default)(r.getModel());e.emit("beforeremoveitem",{item:n});var a="";r.getType&&(a=r.getType());var o=e.get(a+"s"),s=o.indexOf(r);if(s>-1&&o.splice(s,1),a===lu){var l=e.get("v"+a+"s"),u=l.indexOf(r);u>-1&&l.splice(u,1)}var h=r.get("id"),c=e.get("itemMap");delete c[h];var v=e.get("comboTrees"),x=r.get("id");if(a===su){var M=r.getModel().comboId;if(v){var k=v,R=!1;v.forEach(function(zt){R||Ji(zt,function($t){if($t.id===x&&k){var ee=k.indexOf($t);return k.splice(ee,1),R=!0,!1}return k=$t.children,!0})})}for(var G=r.getEdges(),N=G.length-1;N>=0;N--)e.removeItem(G[N],!1);M&&e.updateCombo(M)}else if(a===uu){var ot=r.getModel().parentId,ut,Mt=!1;(v||[]).forEach(function($t){Mt||Ji($t,function(ee){return ee.id===x?(ut=ee,Mt=!0,!1):!0})}),ut.removed=!0,ut&&ut.children&&ut.children.forEach(function($t){t.removeItem($t.id)});for(var G=r.getEdges(),N=G.length;N>=0;N--)e.removeItem(G[N],!1);ot&&e.updateCombo(ot)}r.destroy(),e.emit("afterremoveitem",{item:n})}},i.prototype.setItemState=function(r,t,e){var n=this.graph,a=t;(0,Cn.default)(e)&&(a=t+":"+e),!(r.hasState(a)===e||(0,Cn.default)(e)&&r.hasState(a))&&(n.emit("beforeitemstatechange",{item:r,state:a,enabled:e}),r.setState(t,e),n.autoPaint(),n.emit("afteritemstatechange",{item:r,state:a,enabled:e}))},i.prototype.priorityState=function(r,t){var e=this.graph,n=r;(0,Cn.default)(r)&&(n=e.findById(r)),this.setItemState(n,t,!1),this.setItemState(n,t,!0)},i.prototype.clearItemStates=function(r,t){var e=this.graph;(0,Cn.default)(r)&&(r=e.findById(r)),e.emit("beforeitemstatesclear",{item:r,states:t}),r.clearStates(t),e.emit("afteritemstatesclear",{item:r,states:t})},i.prototype.refreshItem=function(r){var t=this.graph;(0,Cn.default)(r)&&(r=t.findById(r)),t.emit("beforeitemrefresh",{item:r}),r.refresh(),t.emit("afteritemrefresh",{item:r})},i.prototype.addCombos=function(r,t){var e=this,n=this.graph;(r||[]).forEach(function(o){Ea(o,function(s){var l;return t.forEach(function(u){u.id===s.id&&(u.children=s.children,u.depth=s.depth,l=u)}),l&&e.addItem("combo",l),!0})});var a=n.get("comboGroup");a&&a.sort()},i.prototype.changeItemVisibility=function(r,t){var e=this,n=this.graph;if((0,Cn.default)(r)&&(r=n.findById(r)),!r){console.warn("The item to be shown or hidden does not exist!");return}if(n.emit("beforeitemvisibilitychange",{item:r,visible:t}),r.changeVisibility(t),r.getType&&r.getType()===su){var a=r.getEdges();(0,Tn.default)(a,function(h){t&&!(h.get("source").isVisible()&&h.get("target").isVisible())||e.changeItemVisibility(h,t)})}else if(r.getType&&r.getType()===uu){var o=n.get("comboTrees"),s=r.get("id"),l=[],u=!1;(o||[]).forEach(function(c){u||!c.children||c.children.length===0||Ji(c,function(v){return v.id===s?(l=v.children,u=!0,!1):!0})}),l.forEach(function(c){var v=n.findById(c.id);e.changeItemVisibility(v,t)});var a=r.getEdges();(0,Tn.default)(a,function(c){t&&!(c.get("source").isVisible()&&c.get("target").isVisible())||e.changeItemVisibility(c,t)})}return n.emit("afteritemvisibilitychange",{item:r,visible:t}),r},i.prototype.destroy=function(){this.graph=null,this.destroyed=!0},i}(),EN=MN,_a=function(){function i(){this.nodes=[],this.edges=[],this.combos=[],this.positions=[],this.destroyed=!1}return i.prototype.init=function(r){var t=this;t.nodes=r.nodes||[],t.edges=r.edges||[],t.combos=r.combos||[]},i.prototype.execute=function(){},i.prototype.layout=function(r){var t=this;t.init(r),t.execute()},i.prototype.getDefaultCfg=function(){return{}},i.prototype.updateCfg=function(r){var t=this;(0,Ds.default)(t,r)},i.prototype.destroy=function(){var r=this;r.positions=null,r.nodes=null,r.edges=null,r.destroyed=!0},i}(),yx={registerLayout:function(r,t,e){if(e===void 0&&(e=_a),!t)throw new Error("please specify handler for this layout: "+r);var n=function(a){(0,V.__extends)(o,a);function o(s){var l=a.call(this)||this,u=l,h={},c=u.getDefaultCfg();return(0,Ds.default)(h,c,t,s),(0,Tn.default)(h,function(v,x){u[x]=v}),l}return o}(e);yx[r]=n}},mx=yx;function _N(i,r,t,e){i.forEach(function(n,a){i[a].children=[],i[a].parent=[]}),e?r.forEach(function(n){var a=0;n.source&&(a=t[n.source]);var o=0;n.target&&(o=t[n.target]),i[a].children.push(i[o].id),i[o].parent.push(i[a].id)}):r.forEach(function(n){var a=0;n.source&&(a=t[n.source]);var o=0;n.target&&(o=t[n.target]),i[a].children.push(i[o].id),i[o].children.push(i[a].id)})}function AN(i,r,t){for(var e=t.length,n=0;n<e;n++)if(i.id===t[n].source&&r.id===t[n].target||r.id===t[n].source&&i.id===t[n].target)return!0;return!1}function TN(i,r){return i.degree<r.degree?-1:i.degree>r.degree?1:0}var PN=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.center=[0,0],t.radius=null,t.startRadius=null,t.endRadius=null,t.startAngle=0,t.endAngle=2*Math.PI,t.clockwise=!0,t.divisions=1,t.ordering=null,t.angleRatio=1,t.nodes=[],t.edges=[],t.nodeMap={},t.degrees=[],t.width=300,t.height=300,t}return r.prototype.getDefaultCfg=function(){return{center:[0,0],radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},r.prototype.execute=function(){var t=this,e=t.nodes,n=t.edges,a=e.length,o=t.center;if(a!==0){if(a===1){e[0].x=o[0],e[0].y=o[1];return}var s=t.radius,l=t.startRadius,u=t.endRadius,h=t.divisions,c=t.startAngle,v=t.endAngle,x=(v-c)/a,M={};e.forEach(function(Ut,le){M[Ut.id]=le}),t.nodeMap=M;var k=Ql(e.length,M,n);t.degrees=k,!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),!s&&!l&&!u?s=t.height>t.width?t.width/2:t.height/2:!l&&u?l=u:l&&!u&&(u=l);var R=t.angleRatio,G=x*R;t.astep=G;var N=t.ordering,ot=[];N==="topology"?ot=t.topologyOrdering():N==="topology-directed"?ot=t.topologyOrdering(!0):N==="degree"?ot=t.degreeOrdering():ot=e;for(var ut=t.clockwise,Mt=Math.ceil(a/h),zt=0;zt<a;++zt){var $t=s;!$t&&l!==null&&u!==null&&($t=l+zt*(u-l)/(a-1)),$t||($t=10+zt*100/(a-1));var ee=c+zt%Mt*G+2*Math.PI/h*Math.floor(zt/Mt);ut||(ee=v-zt%Mt*G-2*Math.PI/h*Math.floor(zt/Mt)),ot[zt].x=o[0]+Math.cos(ee)*$t,ot[zt].y=o[1]+Math.sin(ee)*$t,ot[zt].weight=k[zt]}}},r.prototype.topologyOrdering=function(t){t===void 0&&(t=!1);var e=this,n=e.degrees,a=e.edges,o=e.nodes,s=(0,f.clone)(o),l=e.nodeMap,u=[s[0]],h=[o[0]],c=[],v=o.length;c[0]=!0,_N(s,a,l,t);var x=0;return s.forEach(function(M,k){if(k!==0)if((k===v-1||n[k]!==n[k+1]||AN(u[x],M,a))&&c[k]!==!0)u.push(M),h.push(o[l[M.id]]),c[k]=!0,x++;else{for(var R=u[x].children,G=!1,N=0;N<R.length;N++){var ot=l[R[N]];if(n[ot]===n[k]&&c[ot]!==!0){u.push(s[ot]),h.push(o[l[s[ot].id]]),c[ot]=!0,G=!0;break}}for(var ut=0;!G&&(c[ut]||(u.push(s[ut]),h.push(o[l[s[ut].id]]),c[ut]=!0,G=!0),ut++,ut!==v););}}),h},r.prototype.degreeOrdering=function(){var t=this,e=t.nodes,n=[],a=t.degrees;return e.forEach(function(o,s){o.degree=a[s],n.push(o)}),n.sort(TN),n},r}(_a),LN=PN,ON=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.center=[0,0],t.nodeSize=30,t.minNodeSpacing=10,t.preventOverlap=!1,t.equidistant=!1,t.startAngle=3/2*Math.PI,t.clockwise=!0,t.sortBy="degree",t.nodes=[],t.edges=[],t.width=300,t.height=300,t}return r.prototype.getDefaultCfg=function(){return{center:[0,0],nodeSize:30,minNodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},r.prototype.execute=function(){var t=this,e=t.nodes,n=t.edges,a=e.length,o=t.center;if(a!==0){if(a===1){e[0].x=o[0],e[0].y=o[1];return}var s=[],l;(0,Ri.default)(t.nodeSize)?l=Math.max(t.nodeSize[0],t.nodeSize[1]):l=t.nodeSize,e.forEach(function(ee){s.push(ee);var Ut=l;(0,Ri.default)(ee.size)?Ut=Math.max(ee.size[0],ee.size[1]):(0,f.isNumber)(ee.size)&&(Ut=ee.size),l=Math.max(l,Ut)}),!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),t.clockwise=t.counterclockwise!==void 0?!t.counterclockwise:t.clockwise;var u={},h={};if(s.forEach(function(ee,Ut){u[ee.id]=ee,h[ee.id]=Ut}),(t.sortBy==="degree"||!(0,Cn.default)(t.sortBy)||s[0][t.sortBy]===void 0)&&(t.sortBy="degree",!(0,f.isNumber)(e[0].degree))){var c=Ql(e.length,h,n);s.forEach(function(ee,Ut){ee.degree=c[Ut]})}s.sort(function(ee,Ut){return Ut[t.sortBy]-ee[t.sortBy]}),t.maxValueNode=s[0],t.maxLevelDiff=t.maxLevelDiff||t.maxValueNode[t.sortBy]/4;var v=[[]],x=v[0];s.forEach(function(ee){if(x.length>0){var Ut=Math.abs(x[0][t.sortBy]-ee[t.sortBy]);t.maxLevelDiff&&Ut>=t.maxLevelDiff&&(x=[],v.push(x))}x.push(ee)});var M=l+t.minNodeSpacing;if(!t.preventOverlap){var k=v.length>0&&v[0].length>1,R=Math.min(t.width,t.height)/2-M,G=R/(v.length+(k?1:0));M=Math.min(M,G)}var N=0;if(v.forEach(function(ee){var Ut=t.sweep;Ut===void 0&&(Ut=2*Math.PI-2*Math.PI/ee.length);var le=ee.dTheta=Ut/Math.max(1,ee.length-1);if(ee.length>1&&t.preventOverlap){var xe=Math.cos(le)-Math.cos(0),ye=Math.sin(le)-Math.sin(0),Oe=Math.sqrt(M*M/(xe*xe+ye*ye));N=Math.max(Oe,N)}ee.r=N,N+=M}),t.equidistant){for(var ot=0,ut=0,Mt=0;Mt<v.length;Mt++){var zt=v[Mt],$t=zt.r-ut;ot=Math.max(ot,$t)}ut=0,v.forEach(function(ee,Ut){Ut===0&&(ut=ee.r),ee.r=ut,ut+=ot})}v.forEach(function(ee){var Ut=ee.dTheta,le=ee.r;ee.forEach(function(xe,ye){var Oe=t.startAngle+(t.clockwise?1:-1)*Ut*ye;xe.x=o[0]+le*Math.cos(Oe),xe.y=o[1]+le*Math.sin(Oe)})})}},r}(_a),IN=ON,kN=p(70681),xx=p.n(kN),BN=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.rankdir="TB",t.nodesep=50,t.ranksep=50,t.controlPoints=!1,t.sortByCombo=!1,t}return r.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1}},r.prototype.execute=function(){var t=this,e=t.nodes,n=t.nodeSize,a=t.rankdir;if(!!e){var o=t.edges||[],s=new(xx()).graphlib.Graph,l;n?(0,Ri.default)(n)?l=function(){return n}:l=function(){return[n,n]}:l=function(x){return x.size?(0,Ri.default)(x.size)?x.size:[x.size,x.size]:[40,40]};var u=fu(t.nodesepFunc,t.nodesep,50),h=fu(t.ranksepFunc,t.ranksep,50);(a==="LR"||a==="RL")&&(u=fu(t.ranksepFunc,t.ranksep,50),h=fu(t.nodesepFunc,t.nodesep,50)),s.setDefaultEdgeLabel(function(){return{}}),s.setGraph(t),e.forEach(function(v){var x=l(v),M=h(v),k=u(v),R=x[0]+2*k,G=x[1]+2*M;s.setNode(v.id,{width:R,height:G})}),o.forEach(function(v){s.setEdge(v.source,v.target,{weight:v.weight||1})}),xx().layout(s);var c;s.nodes().forEach(function(v){c=s.node(v);var x=e.findIndex(function(M){return M.id===v});e[x].x=c.x,e[x].y=c.y}),s.edges().forEach(function(v){c=s.edge(v);var x=o.findIndex(function(M){return M.source===v.v&&M.target===v.w});t.controlPoints&&o[x].type!=="loop"&&o[x].shape!=="loop"&&(o[x].controlPoints=c.points.slice(1,c.points.length-1))}),t.sortByCombo&&t.sortLevel("comboId")}},r.prototype.sortLevel=function(t){var e=this,n=e.nodes,a={};n.forEach(function(o){a[o.y]||(a[o.y]={y:o.y,nodes:[]}),a[o.y].nodes.push(o)}),Object.keys(a).forEach(function(o){var s=a[o].nodes,l=s.length,u={};if(s.forEach(function(k){var R=k.comboId;u[R]||(u[R]={x:0,y:0,count:0}),u[R].x+=k.x,u[R].y+=k.y,u[R].count++}),Object.keys(u).forEach(function(k){u[k].x/=u[k].count,u[k].y/=u[k].count}),l!==1){var h=s.sort(function(k,R){return k.x-R.x}),c=h[0].x,v=h[l-1].x,x=(v-c)/(l-1),M=s.sort(function(k,R){var G=k[t]||"undefined",N=R[t]||"undefined";return G<N?-1:G>N?1:0});M.forEach(function(k,R){k.x=c+R*x})}})},r}(_a),DN=BN;function fu(i,r,t){var e;return i?e=i:(0,f.isNumber)(r)?e=function(){return r}:e=function(){return t},e}function FN(i){const r=+this._x.call(null,i),t=+this._y.call(null,i);return bx(this.cover(r,t),r,t,i)}function bx(i,r,t,e){if(isNaN(r)||isNaN(t))return i;var n,a=i._root,o={data:e},s=i._x0,l=i._y0,u=i._x1,h=i._y1,c,v,x,M,k,R,G,N;if(!a)return i._root=o,i;for(;a.length;)if((k=r>=(c=(s+u)/2))?s=c:u=c,(R=t>=(v=(l+h)/2))?l=v:h=v,n=a,!(a=a[G=R<<1|k]))return n[G]=o,i;if(x=+i._x.call(null,a.data),M=+i._y.call(null,a.data),r===x&&t===M)return o.next=a,n?n[G]=o:i._root=o,i;do n=n?n[G]=new Array(4):i._root=new Array(4),(k=r>=(c=(s+u)/2))?s=c:u=c,(R=t>=(v=(l+h)/2))?l=v:h=v;while((G=R<<1|k)==(N=(M>=v)<<1|x>=c));return n[N]=a,n[G]=o,i}function RN(i){var r,t,e=i.length,n,a,o=new Array(e),s=new Array(e),l=Infinity,u=Infinity,h=-Infinity,c=-Infinity;for(t=0;t<e;++t)isNaN(n=+this._x.call(null,r=i[t]))||isNaN(a=+this._y.call(null,r))||(o[t]=n,s[t]=a,n<l&&(l=n),n>h&&(h=n),a<u&&(u=a),a>c&&(c=a));if(l>h||u>c)return this;for(this.cover(l,u).cover(h,c),t=0;t<e;++t)bx(this,o[t],s[t],i[t]);return this}function NN(i,r){if(isNaN(i=+i)||isNaN(r=+r))return this;var t=this._x0,e=this._y0,n=this._x1,a=this._y1;if(isNaN(t))n=(t=Math.floor(i))+1,a=(e=Math.floor(r))+1;else{for(var o=n-t||1,s=this._root,l,u;t>i||i>=n||e>r||r>=a;)switch(u=(r<e)<<1|i<t,l=new Array(4),l[u]=s,s=l,o*=2,u){case 0:n=t+o,a=e+o;break;case 1:t=n-o,a=e+o;break;case 2:n=t+o,e=a-o;break;case 3:t=n-o,e=a-o;break}this._root&&this._root.length&&(this._root=s)}return this._x0=t,this._y0=e,this._x1=n,this._y1=a,this}function GN(){var i=[];return this.visit(function(r){if(!r.length)do i.push(r.data);while(r=r.next)}),i}function YN(i){return arguments.length?this.cover(+i[0][0],+i[0][1]).cover(+i[1][0],+i[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function aa(i,r,t,e,n){this.node=i,this.x0=r,this.y0=t,this.x1=e,this.y1=n}function zN(i,r,t){var e,n=this._x0,a=this._y0,o,s,l,u,h=this._x1,c=this._y1,v=[],x=this._root,M,k;for(x&&v.push(new aa(x,n,a,h,c)),t==null?t=Infinity:(n=i-t,a=r-t,h=i+t,c=r+t,t*=t);M=v.pop();)if(!(!(x=M.node)||(o=M.x0)>h||(s=M.y0)>c||(l=M.x1)<n||(u=M.y1)<a))if(x.length){var R=(o+l)/2,G=(s+u)/2;v.push(new aa(x[3],R,G,l,u),new aa(x[2],o,G,R,u),new aa(x[1],R,s,l,G),new aa(x[0],o,s,R,G)),(k=(r>=G)<<1|i>=R)&&(M=v[v.length-1],v[v.length-1]=v[v.length-1-k],v[v.length-1-k]=M)}else{var N=i-+this._x.call(null,x.data),ot=r-+this._y.call(null,x.data),ut=N*N+ot*ot;if(ut<t){var Mt=Math.sqrt(t=ut);n=i-Mt,a=r-Mt,h=i+Mt,c=r+Mt,e=x.data}}return e}function XN(i){if(isNaN(h=+this._x.call(null,i))||isNaN(c=+this._y.call(null,i)))return this;var r,t=this._root,e,n,a,o=this._x0,s=this._y0,l=this._x1,u=this._y1,h,c,v,x,M,k,R,G;if(!t)return this;if(t.length)for(;;){if((M=h>=(v=(o+l)/2))?o=v:l=v,(k=c>=(x=(s+u)/2))?s=x:u=x,r=t,!(t=t[R=k<<1|M]))return this;if(!t.length)break;(r[R+1&3]||r[R+2&3]||r[R+3&3])&&(e=r,G=R)}for(;t.data!==i;)if(n=t,!(t=t.next))return this;return(a=t.next)&&delete t.next,n?(a?n.next=a:delete n.next,this):r?(a?r[R]=a:delete r[R],(t=r[0]||r[1]||r[2]||r[3])&&t===(r[3]||r[2]||r[1]||r[0])&&!t.length&&(e?e[G]=t:this._root=t),this):(this._root=a,this)}function VN(i){for(var r=0,t=i.length;r<t;++r)this.remove(i[r]);return this}function HN(){return this._root}function WN(){var i=0;return this.visit(function(r){if(!r.length)do++i;while(r=r.next)}),i}function jN(i){var r=[],t,e=this._root,n,a,o,s,l;for(e&&r.push(new aa(e,this._x0,this._y0,this._x1,this._y1));t=r.pop();)if(!i(e=t.node,a=t.x0,o=t.y0,s=t.x1,l=t.y1)&&e.length){var u=(a+s)/2,h=(o+l)/2;(n=e[3])&&r.push(new aa(n,u,h,s,l)),(n=e[2])&&r.push(new aa(n,a,h,u,l)),(n=e[1])&&r.push(new aa(n,u,o,s,h)),(n=e[0])&&r.push(new aa(n,a,o,u,h))}return this}function UN(i){var r=[],t=[],e;for(this._root&&r.push(new aa(this._root,this._x0,this._y0,this._x1,this._y1));e=r.pop();){var n=e.node;if(n.length){var a,o=e.x0,s=e.y0,l=e.x1,u=e.y1,h=(o+l)/2,c=(s+u)/2;(a=n[0])&&r.push(new aa(a,o,s,h,c)),(a=n[1])&&r.push(new aa(a,h,s,l,c)),(a=n[2])&&r.push(new aa(a,o,c,h,u)),(a=n[3])&&r.push(new aa(a,h,c,l,u))}t.push(e)}for(;e=t.pop();)i(e.node,e.x0,e.y0,e.x1,e.y1);return this}function ZN(i){return i[0]}function KN(i){return arguments.length?(this._x=i,this):this._x}function $N(i){return i[1]}function QN(i){return arguments.length?(this._y=i,this):this._y}function Wh(i,r,t){var e=new jh(r==null?ZN:r,t==null?$N:t,NaN,NaN,NaN,NaN);return i==null?e:e.addAll(i)}function jh(i,r,t,e,n,a){this._x=i,this._y=r,this._x0=t,this._y0=e,this._x1=n,this._y1=a,this._root=void 0}function wx(i){for(var r={data:i.data},t=r;i=i.next;)t=t.next={data:i.data};return r}var oa=Wh.prototype=jh.prototype;oa.copy=function(){var i=new jh(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root,t,e;if(!r)return i;if(!r.length)return i._root=wx(r),i;for(t=[{source:r,target:i._root=new Array(4)}];r=t.pop();)for(var n=0;n<4;++n)(e=r.source[n])&&(e.length?t.push({source:e,target:r.target[n]=new Array(4)}):r.target[n]=wx(e));return i},oa.add=FN,oa.addAll=RN,oa.cover=NN,oa.data=GN,oa.extent=YN,oa.find=zN,oa.remove=XN,oa.removeAll=VN,oa.root=HN,oa.size=WN,oa.visit=jN,oa.visitAfter=UN,oa.x=KN,oa.y=QN;function sa(i){return function(){return i}}function mo(i){return(i()-.5)*1e-6}var JN={value:function(){}};function Sx(){for(var i=0,r=arguments.length,t={},e;i<r;++i){if(!(e=arguments[i]+"")||e in t||/[\s.]/.test(e))throw new Error("illegal type: "+e);t[e]=[]}return new hu(t)}function hu(i){this._=i}function qN(i,r){return i.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})}hu.prototype=Sx.prototype={constructor:hu,on:function(r,t){var e=this._,n=qN(r+"",e),a,o=-1,s=n.length;if(arguments.length<2){for(;++o<s;)if((a=(r=n[o]).type)&&(a=t3(e[a],r.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(a=(r=n[o]).type)e[a]=Cx(e[a],r.name,t);else if(t==null)for(a in e)e[a]=Cx(e[a],r.name,null);return this},copy:function(){var r={},t=this._;for(var e in t)r[e]=t[e].slice();return new hu(r)},call:function(r,t){if((a=arguments.length-2)>0)for(var e=new Array(a),n=0,a,o;n<a;++n)e[n]=arguments[n+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(o=this._[r],n=0,a=o.length;n<a;++n)o[n].value.apply(t,e)},apply:function(r,t,e){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var n=this._[r],a=0,o=n.length;a<o;++a)n[a].value.apply(t,e)}};function t3(i,r){for(var t=0,e=i.length,n;t<e;++t)if((n=i[t]).name===r)return n.value}function Cx(i,r,t){for(var e=0,n=i.length;e<n;++e)if(i[e].name===r){i[e]=JN,i=i.slice(0,e).concat(i.slice(e+1));break}return t!=null&&i.push({name:r,value:t}),i}var e3=Sx,r3=p(35374),n3=1664525,i3=1013904223,Mx=4294967296;function a3(){var i=1;return function(){return(i=(n3*i+i3)%Mx)/Mx}}function o3(i){return i.x}function s3(i){return i.y}var l3=10,u3=Math.PI*(3-Math.sqrt(5));function Ex(i){var r,t=1,e=.001,n=1-Math.pow(e,1/300),a=0,o=.6,s=new Map,l=(0,r3.HT)(c),u=e3("tick","end"),h=a3();i==null&&(i=[]);function c(){v(),u.call("tick",r),t<e&&(l.stop(),u.call("end",r))}function v(k){var R,G=i.length,N;k===void 0&&(k=1);for(var ot=0;ot<k;++ot)for(t+=(a-t)*n,s.forEach(function(ut){ut(t)}),R=0;R<G;++R)N=i[R],N.fx==null?N.x+=N.vx*=o:(N.x=N.fx,N.vx=0),N.fy==null?N.y+=N.vy*=o:(N.y=N.fy,N.vy=0);return r}function x(){for(var k=0,R=i.length,G;k<R;++k){if(G=i[k],G.index=k,G.fx!=null&&(G.x=G.fx),G.fy!=null&&(G.y=G.fy),isNaN(G.x)||isNaN(G.y)){var N=l3*Math.sqrt(.5+k),ot=k*u3;G.x=N*Math.cos(ot),G.y=N*Math.sin(ot)}(isNaN(G.vx)||isNaN(G.vy))&&(G.vx=G.vy=0)}}function M(k){return k.initialize&&k.initialize(i,h),k}return x(),r={tick:v,restart:function(){return l.restart(c),r},stop:function(){return l.stop(),r},nodes:function(R){return arguments.length?(i=R,x(),s.forEach(M),r):i},alpha:function(R){return arguments.length?(t=+R,r):t},alphaMin:function(R){return arguments.length?(e=+R,r):e},alphaDecay:function(R){return arguments.length?(n=+R,r):+n},alphaTarget:function(R){return arguments.length?(a=+R,r):a},velocityDecay:function(R){return arguments.length?(o=1-R,r):1-o},randomSource:function(R){return arguments.length?(h=R,s.forEach(M),r):h},force:function(R,G){return arguments.length>1?(G==null?s.delete(R):s.set(R,M(G)),r):s.get(R)},find:function(R,G,N){var ot=0,ut=i.length,Mt,zt,$t,ee,Ut;for(N==null?N=Infinity:N*=N,ot=0;ot<ut;++ot)ee=i[ot],Mt=R-ee.x,zt=G-ee.y,$t=Mt*Mt+zt*zt,$t<N&&(Ut=ee,N=$t);return Ut},on:function(R,G){return arguments.length>1?(u.on(R,G),r):u.on(R)}}}function _x(){var i,r,t,e,n=sa(-30),a,o=1,s=Infinity,l=.81;function u(x){var M,k=i.length,R=Wh(i,o3,s3).visitAfter(c);for(e=x,M=0;M<k;++M)r=i[M],R.visit(v)}function h(){if(!!i){var x,M=i.length,k;for(a=new Array(M),x=0;x<M;++x)k=i[x],a[k.index]=+n(k,x,i)}}function c(x){var M=0,k,R,G=0,N,ot,ut;if(x.length){for(N=ot=ut=0;ut<4;++ut)(k=x[ut])&&(R=Math.abs(k.value))&&(M+=k.value,G+=R,N+=R*k.x,ot+=R*k.y);x.x=N/G,x.y=ot/G}else{k=x,k.x=k.data.x,k.y=k.data.y;do M+=a[k.data.index];while(k=k.next)}x.value=M}function v(x,M,k,R){if(!x.value)return!0;var G=x.x-r.x,N=x.y-r.y,ot=R-M,ut=G*G+N*N;if(ot*ot/l<ut)return ut<s&&(G===0&&(G=mo(t),ut+=G*G),N===0&&(N=mo(t),ut+=N*N),ut<o&&(ut=Math.sqrt(o*ut)),r.vx+=G*x.value*e/ut,r.vy+=N*x.value*e/ut),!0;if(x.length||ut>=s)return;(x.data!==r||x.next)&&(G===0&&(G=mo(t),ut+=G*G),N===0&&(N=mo(t),ut+=N*N),ut<o&&(ut=Math.sqrt(o*ut)));do x.data!==r&&(ot=a[x.data.index]*e/ut,r.vx+=G*ot,r.vy+=N*ot);while(x=x.next)}return u.initialize=function(x,M){i=x,t=M,h()},u.strength=function(x){return arguments.length?(n=typeof x=="function"?x:sa(+x),h(),u):n},u.distanceMin=function(x){return arguments.length?(o=x*x,u):Math.sqrt(o)},u.distanceMax=function(x){return arguments.length?(s=x*x,u):Math.sqrt(s)},u.theta=function(x){return arguments.length?(l=x*x,u):Math.sqrt(l)},u}function f3(i,r){var t,e=1;i==null&&(i=0),r==null&&(r=0);function n(){var a,o=t.length,s,l=0,u=0;for(a=0;a<o;++a)s=t[a],l+=s.x,u+=s.y;for(l=(l/o-i)*e,u=(u/o-r)*e,a=0;a<o;++a)s=t[a],s.x-=l,s.y-=u}return n.initialize=function(a){t=a},n.x=function(a){return arguments.length?(i=+a,n):i},n.y=function(a){return arguments.length?(r=+a,n):r},n.strength=function(a){return arguments.length?(e=+a,n):e},n}function h3(i){return i.index}function Ax(i,r){var t=i.get(r);if(!t)throw new Error("node not found: "+r);return t}function Tx(i){var r=h3,t=c,e,n=sa(30),a,o,s,l,u,h=1;i==null&&(i=[]);function c(R){return 1/Math.min(s[R.source.index],s[R.target.index])}function v(R){for(var G=0,N=i.length;G<h;++G)for(var ot=0,ut,Mt,zt,$t,ee,Ut,le;ot<N;++ot)ut=i[ot],Mt=ut.source,zt=ut.target,$t=zt.x+zt.vx-Mt.x-Mt.vx||mo(u),ee=zt.y+zt.vy-Mt.y-Mt.vy||mo(u),Ut=Math.sqrt($t*$t+ee*ee),Ut=(Ut-a[ot])/Ut*R*e[ot],$t*=Ut,ee*=Ut,zt.vx-=$t*(le=l[ot]),zt.vy-=ee*le,Mt.vx+=$t*(le=1-le),Mt.vy+=ee*le}function x(){if(!!o){var R,G=o.length,N=i.length,ot=new Map(o.map(function(Mt,zt){return[r(Mt,zt,o),Mt]})),ut;for(R=0,s=new Array(G);R<N;++R)ut=i[R],ut.index=R,typeof ut.source!="object"&&(ut.source=Ax(ot,ut.source)),typeof ut.target!="object"&&(ut.target=Ax(ot,ut.target)),s[ut.source.index]=(s[ut.source.index]||0)+1,s[ut.target.index]=(s[ut.target.index]||0)+1;for(R=0,l=new Array(N);R<N;++R)ut=i[R],l[R]=s[ut.source.index]/(s[ut.source.index]+s[ut.target.index]);e=new Array(N),M(),a=new Array(N),k()}}function M(){if(!!o)for(var R=0,G=i.length;R<G;++R)e[R]=+t(i[R],R,i)}function k(){if(!!o)for(var R=0,G=i.length;R<G;++R)a[R]=+n(i[R],R,i)}return v.initialize=function(R,G){o=R,u=G,x()},v.links=function(R){return arguments.length?(i=R,x(),v):i},v.id=function(R){return arguments.length?(r=R,v):r},v.iterations=function(R){return arguments.length?(h=+R,v):h},v.strength=function(R){return arguments.length?(t=typeof R=="function"?R:sa(+R),M(),v):t},v.distance=function(R){return arguments.length?(n=typeof R=="function"?R:sa(+R),k(),v):n},v}function c3(i){return i.x+i.vx}function v3(i){return i.y+i.vy}function Px(i){var r,t,e,n=1,a=1;typeof i!="function"&&(i=sa(i==null?1:+i));function o(){for(var u,h=r.length,c,v,x,M,k,R,G=0;G<a;++G)for(c=Wh(r,c3,v3).visitAfter(s),u=0;u<h;++u)v=r[u],k=t[v.index],R=k*k,x=v.x+v.vx,M=v.y+v.vy,c.visit(N);function N(ot,ut,Mt,zt,$t){var ee=ot.data,Ut=ot.r,le=k+Ut;if(ee){if(ee.index>v.index){var xe=x-ee.x-ee.vx,ye=M-ee.y-ee.vy,Oe=xe*xe+ye*ye;Oe<le*le&&(xe===0&&(xe=mo(e),Oe+=xe*xe),ye===0&&(ye=mo(e),Oe+=ye*ye),Oe=(le-(Oe=Math.sqrt(Oe)))/Oe*n,v.vx+=(xe*=Oe)*(le=(Ut*=Ut)/(R+Ut)),v.vy+=(ye*=Oe)*le,ee.vx-=xe*(le=1-le),ee.vy-=ye*le)}return}return ut>x+le||zt<x-le||Mt>M+le||$t<M-le}}function s(u){if(u.data)return u.r=t[u.data.index];for(var h=u.r=0;h<4;++h)u[h]&&u[h].r>u.r&&(u.r=u[h].r)}function l(){if(!!r){var u,h=r.length,c;for(t=new Array(h),u=0;u<h;++u)c=r[u],t[c.index]=+i(c,u,r)}}return o.initialize=function(u,h){r=u,e=h,l()},o.iterations=function(u){return arguments.length?(a=+u,o):a},o.strength=function(u){return arguments.length?(n=+u,o):n},o.radius=function(u){return arguments.length?(i=typeof u=="function"?u:sa(+u),l(),o):i},o}function d3(i){var r=sa(.1),t,e,n;typeof i!="function"&&(i=sa(i==null?0:+i));function a(s){for(var l=0,u=t.length,h;l<u;++l)h=t[l],h.vx+=(n[l]-h.x)*e[l]*s}function o(){if(!!t){var s,l=t.length;for(e=new Array(l),n=new Array(l),s=0;s<l;++s)e[s]=isNaN(n[s]=+i(t[s],s,t))?0:+r(t[s],s,t)}}return a.initialize=function(s){t=s,o()},a.strength=function(s){return arguments.length?(r=typeof s=="function"?s:sa(+s),o(),a):r},a.x=function(s){return arguments.length?(i=typeof s=="function"?s:sa(+s),o(),a):i},a}function p3(i){var r=sa(.1),t,e,n;typeof i!="function"&&(i=sa(i==null?0:+i));function a(s){for(var l=0,u=t.length,h;l<u;++l)h=t[l],h.vy+=(n[l]-h.y)*e[l]*s}function o(){if(!!t){var s,l=t.length;for(e=new Array(l),n=new Array(l),s=0;s<l;++s)e[s]=isNaN(n[s]=+i(t[s],s,t))?0:+r(t[s],s,t)}}return a.initialize=function(s){t=s,o()},a.strength=function(s){return arguments.length?(r=typeof s=="function"?s:sa(+s),o(),a):r},a.y=function(s){return arguments.length?(i=typeof s=="function"?s:sa(+s),o(),a):i},a}function g3(){function i(ir){return function(){return ir}}var r=function(wr){return wr.cluster},t=i(1),e=i(-1),n=i(100),a=i(.1),o=[0,0],s=[],l={},u=[],h=100,c=100,v={none:{x:0,y:0}},x=[],M,k="force",R=!0,G=.1;function N(ir){if(!R)return N;M.tick(),ee();for(var wr=0,Dr=s.length,Er=void 0,Mr=ir*G;wr<Dr;++wr)Er=s[wr],Er.vx+=(v[r(Er)].x-Er.x)*Mr,Er.vy+=(v[r(Er)].y-Er.y)*Mr}function ot(){!s||ut()}function ut(){if(!(!s||!s.length)){if(r(s[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var ir=Mt();M=Ex(ir.nodes).force("x",d3(h).strength(.1)).force("y",p3(c).strength(.1)).force("collide",Px(function(wr){return wr.r}).iterations(4)).force("charge",_x().strength(e)).force("links",Tx(ir.nodes.length?ir.links:[]).distance(n).strength(a)),x=M.nodes(),ee()}}function Mt(){var ir=[],wr=[],Dr={},Er=[],Mr={},zr=[];return Mr=zt(s),zr=$t(u),Er=Object.keys(Mr),Er.forEach(function(qr,Lr){var We=Mr[qr];ir.push({id:qr,size:We.count,r:Math.sqrt(We.sumforceNodeSize/Math.PI)}),Dr[qr]=Lr}),zr.forEach(function(qr){var Lr=Dr[qr.source],We=Dr[qr.target];Lr!==void 0&&We!==void 0&&wr.push({source:Lr,target:We,count:qr.count})}),{nodes:ir,links:wr}}function zt(ir){var wr={};return ir.forEach(function(Dr){var Er=r(Dr);wr[Er]||(wr[Er]={count:0,sumforceNodeSize:0})}),ir.forEach(function(Dr){var Er=r(Dr),Mr=t(Dr),zr=wr[Er];zr.count=zr.count+1,zr.sumforceNodeSize=zr.sumforceNodeSize+Math.PI*(Mr*Mr)*1.3,wr[Er]=zr}),wr}function $t(ir){var wr={},Dr=[];ir.forEach(function(Mr){var zr=Ut(Mr),qr=0;wr[zr]!==void 0&&(qr=wr[zr]),qr+=1,wr[zr]=qr});var Er=Object.entries(wr);return Er.forEach(function(Mr){var zr=Mr[0],qr=Mr[1],Lr=zr.split("~")[0],We=zr.split("~")[1];Lr!==void 0&&We!==void 0&&Dr.push({source:Lr,target:We,count:qr})}),Dr}function ee(){return v={none:{x:0,y:0}},x.forEach(function(ir){v[ir.id]={x:ir.x-o[0],y:ir.y-o[1]}}),v}function Ut(ir){var wr=r(l[ir.source]),Dr=r(l[ir.target]);return wr<=Dr?wr+"~"+Dr:Dr+"~"+wr}function le(ir){l={},ir.forEach(function(wr){l[wr.id]=wr})}function xe(ir){return arguments.length?(k=ir,ot(),N):k}function ye(ir){return arguments.length?typeof ir=="string"?(r=function(Dr){return Dr[ir]},N):(r=ir,N):r}function Oe(ir){return arguments.length?(R=ir,N):R}function Ge(ir){return arguments.length?(G=ir,N):G}function Ne(ir){return arguments.length?(h=ir,N):h}function qe(ir){return arguments.length?(c=ir,N):c}function tr(ir){return arguments.length?(le(ir||[]),s=ir||[],N):s}function rr(ir){return arguments.length?(u=ir||[],ot(),N):u}function $e(ir){return arguments.length?(typeof ir=="function"?t=ir:t=i(+ir),ot(),N):t}function Qe(ir){return arguments.length?(typeof ir=="function"?e=ir:e=i(+ir),ot(),N):e}function br(ir){return arguments.length?(typeof ir=="function"?n=ir:n=i(+ir),ot(),N):n}function yr(ir){return arguments.length?(typeof ir=="function"?a=ir:a=i(+ir),ot(),N):a}function _r(ir){return arguments.length?(o=ir,N):o}return N.initialize=function(ir){s=ir,ot()},N.template=xe,N.groupBy=ye,N.enableGrouping=Oe,N.strength=Ge,N.centerX=Ne,N.centerY=qe,N.nodes=tr,N.links=rr,N.forceNodeSize=$e,N.nodeSize=N.forceNodeSize,N.forceCharge=Qe,N.forceLinkDistance=br,N.forceLinkStrength=yr,N.offset=_r,N.getFocis=ee,N}var ao={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK"},y3=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.center=[0,0],t.nodeStrength=null,t.edgeStrength=null,t.preventOverlap=!1,t.clusterNodeStrength=null,t.clusterEdgeStrength=null,t.clusterEdgeDistance=null,t.clusterNodeSize=null,t.clusterFociStrength=null,t.linkDistance=50,t.alphaDecay=.028,t.alphaMin=.001,t.alpha=.3,t.collideStrength=1,t.workerEnabled=!1,t.tick=function(){},t.onLayoutEnd=function(){},t.onTick=function(){},t.ticking=void 0,t}return r.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},onTick:function(){},workerEnabled:!1}},r.prototype.init=function(t){var e=this;e.nodes=t.nodes||[];var n=t.edges||[];e.edges=n.map(function(a){var o={},s=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(a).forEach(function(l){s.indexOf(l)>-1||(o[l]=a[l])}),o}),e.ticking=!1},r.prototype.execute=function(t){var e=this,n=e.nodes,a=e.edges;if(!e.ticking){var o=e.forceSimulation,s=e.alphaMin,l=e.alphaDecay,u=e.alpha;if(o)t&&(e.clustering&&e.clusterForce&&(e.clusterForce.nodes(n),e.clusterForce.links(a)),o.nodes(n),e.edgeForce.links(a)),e.preventOverlap&&e.overlapProcess(o),o.alpha(u).restart(),this.ticking=!0;else try{var h=_x();if(e.nodeStrength&&h.strength(e.nodeStrength),o=Ex().nodes(n),e.clustering){var c=g3();c.centerX(e.center[0]).centerY(e.center[1]).template("force").strength(e.clusterFociStrength),a&&c.links(a),n&&c.nodes(n),c.forceLinkDistance(e.clusterEdgeDistance).forceLinkStrength(e.clusterEdgeStrength).forceCharge(e.clusterNodeStrength).forceNodeSize(e.clusterNodeSize),e.clusterForce=c,o.force("group",c)}if(o.force("center",f3(e.center[0],e.center[1])).force("charge",h).alpha(u).alphaDecay(l).alphaMin(s),e.preventOverlap&&e.overlapProcess(o),a){var v=Tx().id(function(k){return k.id}).links(a);e.edgeStrength&&v.strength(e.edgeStrength),e.linkDistance&&v.distance(e.linkDistance),e.edgeForce=v,o.force("link",v)}if(e.workerEnabled&&!b3()&&(e.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!e.workerEnabled)o.on("tick",function(){e.tick()}).on("end",function(){e.ticking=!1,e.onLayoutEnd&&e.onLayoutEnd()}),e.ticking=!0;else{o.stop();for(var x=x3(o),M=1;M<=x;M++)o.tick(),postMessage({type:ao.TICK,currentTick:M,totalTicks:x,nodes:n},void 0);e.ticking=!1}e.forceSimulation=o,e.ticking=!0}catch(k){e.ticking=!1,console.warn(k)}}},r.prototype.overlapProcess=function(t){var e=this,n=e.nodeSize,a=e.nodeSpacing,o,s,l=e.collideStrength;if((0,La.default)(a)?s=function(){return a}:(0,$s.default)(a)?s=a:s=function(){return 0},!n)o=function(x){if(x.size){if((0,Ri.default)(x.size)){var M=x.size[0]>x.size[1]?x.size[0]:x.size[1];return M/2+s(x)}return x.size/2+s(x)}return 10+s(x)};else if((0,$s.default)(n))o=function(x){var M=n(x);return M+s(x)};else if((0,Ri.default)(n)){var u=n[0]>n[1]?n[0]:n[1],h=u/2;o=function(x){return h+s(x)}}else if((0,La.default)(n)){var c=n/2;o=function(x){return c+s(x)}}else o=function(){return 10};t.force("collisionForce",Px(o).strength(l))},r.prototype.updateCfg=function(t){var e=this;e.ticking&&(e.forceSimulation.stop(),e.ticking=!1),e.forceSimulation=null,(0,Ds.default)(e,t)},r.prototype.destroy=function(){var t=this;t.ticking&&(t.forceSimulation.stop(),t.ticking=!1),t.nodes=null,t.edges=null,t.destroyed=!0},r}(_a),m3=y3;function x3(i){var r=i.alphaMin(),t=i.alphaTarget(),e=i.alpha(),n=Math.log((r-t)/(e-t))/Math.log(1-i.alphaDecay()),a=Math.ceil(n);return a}function b3(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}var w3=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.center=[0,0],t.maxIteration=500,t.gravity=10,t.clustering=!1,t.clusterGravity=10,t.linkDistance=50,t.alpha=1,t.alphaMin=.001,t.alphaDecay=1-Math.pow(t.alphaMin,1/300),t.alphaTarget=0,t.velocityDecay=.6,t.linkStrength=1,t.nodeStrength=30,t.preventOverlap=!1,t.collideStrength=1,t.optimizeRangeFactor=1,t.tick=function(){},t.nodes=[],t.edges=[],t.width=300,t.height=300,t.bias=[],t.nodeMap={},t.nodeIdxMap={},t}return r.prototype.getDefaultCfg=function(){return{maxIteration:1e3,center:[0,0],gravity:10,clustering:!1,clusterGravity:10,preventOverlap:!1,nodeSpacing:void 0,collideStrength:10}},r.prototype.execute=function(){var t=this,e=t.nodes,n=t.center;if(!(!e||e.length===0)){if(e.length===1){e[0].x=n[0],e[0].y=n[1];return}var a={},o={};e.forEach(function(s,l){a[s.id]=s,o[s.id]=l}),t.nodeMap=a,t.nodeIdxMap=o,t.run()}},r.prototype.run=function(){var t=this,e=t.nodes,n=t.edges,a=t.maxIteration;!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight);var o=t.center,s=t.velocityDecay,l=t.clustering,u;t.initVals(),l&&(u=t.getClusterMap());for(var h=function(R){var G=[];e.forEach(function(N,ot){G[ot]={x:0,y:0}}),t.applyCalculate(e,n,G),l&&t.applyClusterForce(u,G),e.forEach(function(N,ot){!(0,f.isNumber)(N.x)||!(0,f.isNumber)(N.y)||(N.x+=G[ot].x*s,N.y+=G[ot].y*s)}),c.alpha+=(c.alphaTarget-c.alpha)*c.alphaDecay,t.tick()},c=this,v=0;v<a;v++)h(v);var x=[0,0];e.forEach(function(k){!(0,f.isNumber)(k.x)||!(0,f.isNumber)(k.y)||(x[0]+=k.x,x[1]+=k.y)}),x[0]/=e.length,x[1]/=e.length;var M=[o[0]-x[0],o[1]-x[1]];e.forEach(function(k,R){!(0,f.isNumber)(k.x)||!(0,f.isNumber)(k.y)||(k.x+=M[0],k.y+=M[1])})},r.prototype.initVals=function(){for(var t=this,e=t.edges,n={},a=0;a<e.length;++a)n[e[a].source]?n[e[a].source]++:n[e[a].source]=1,n[e[a].target]?n[e[a].target]++:n[e[a].target]=1;for(var o=[],a=0;a<e.length;++a)o[a]=n[e[a].source]/(n[e[a].source]+n[e[a].target]);this.bias=o;var s=t.nodeSize,l=t.nodeSpacing,u,h;if((0,f.isNumber)(l)?h=function(){return l}:(0,f.isFunction)(l)?h=l:h=function(){return 0},!s)u=function(Mt){if(Mt.size){if((0,f.isArray)(Mt.size)){var zt=Mt.size[0]>Mt.size[1]?Mt.size[0]:Mt.size[1];return zt/2+h(Mt)}return Mt.size/2+h(Mt)}return 10+h(Mt)};else if((0,f.isFunction)(s))u=function(Mt){var zt=s(Mt);return zt+h(Mt)};else if((0,f.isArray)(s)){var c=s[0]>s[1]?s[0]:s[1],v=c/2;u=function(Mt){return v+h(Mt)}}else if((0,f.isNumber)(s)){var x=s/2;u=function(Mt){return x+h(Mt)}}else u=function(){return 10};this.nodeSize=u;var M=this.linkDistance,k;M||(M=50),(0,f.isNumber)(M)&&(k=function(Mt){return M}),this.linkDistance=k;var R=this.linkStrength,G;R||(R=1),(0,f.isNumber)(R)&&(G=function(Mt){return R}),this.linkStrength=G;var N=this.nodeStrength,ot;N||(N=30),(0,f.isNumber)(N)&&(ot=function(Mt){return N}),this.nodeStrength=ot},r.prototype.getClusterMap=function(){var t=this,e=t.nodes,n={};e.forEach(function(o){if(n[o.cluster]===void 0){var s={name:o.cluster,cx:0,cy:0,count:0};n[o.cluster]=s}var l=n[o.cluster];(0,f.isNumber)(o.x)&&(l.cx+=o.x),(0,f.isNumber)(o.y)&&(l.cy+=o.y),l.count++});for(var a in n)n[a].cx/=n[a].count,n[a].cy/=n[a].count;return n},r.prototype.applyClusterForce=function(t,e){var n=this,a=n.gravity,o=n.nodes,s=n.clusterGravity||a,l=this.alpha;o.forEach(function(h,c){if(!(!(0,f.isNumber)(h.x)||!(0,f.isNumber)(h.y))){var v=t[h.cluster],x=h.x-v.cx,M=h.y-v.cy,k=Math.sqrt(x*x+M*M);e[c].x-=x*s*l/k,e[c].y-=M*s*l/k}});for(var u in t)t[u].cx=0,t[u].cy=0,t[u].count=0;o.forEach(function(h){var c=t[h.cluster];(0,f.isNumber)(h.x)&&(c.cx+=h.x),(0,f.isNumber)(h.y)&&(c.cy+=h.y),c.count++});for(var u in t)t[u].cx/=t[u].count,t[u].cy/=t[u].count},r.prototype.applyCalculate=function(t,e,n){var a=this,o={};t.forEach(function(s,l){n[l]={x:0,y:0},t.forEach(function(u,h){if(!(l<h)){var c=s.x-u.x,v=s.y-u.y,x=c*c+v*v;x<1&&(x=Math.sqrt(x)),c===0&&(c=Math.random()*.01,x+=c*c),v===0&&(v=Math.random()*.01,x+=v*v);var M=Math.sqrt(x);o[s.id+"-"+u.id]={vx:c,vy:v,vl:x,sqrtVl:M},o[u.id+"-"+s.id]={vx:-c,vy:-v,vl:x,sqrtVl:M}}})}),a.calRepulsive(t,n,o),a.calAttractive(e,n,o)},r.prototype.calRepulsive=function(t,e,n){var a=this.width*this.optimizeRangeFactor*this.width*this.optimizeRangeFactor,o=this.nodeStrength,s=this.alpha,l=this.collideStrength,u=this.preventOverlap,h=this.nodeSize;t.forEach(function(c,v){t.forEach(function(x,M){if(v!==M&&!(!(0,f.isNumber)(c.x)||!(0,f.isNumber)(x.x)||!(0,f.isNumber)(c.y)||!(0,f.isNumber)(x.y))){var k=n[c.id+"-"+x.id],R=k.vl,G=k.vx,N=k.vy;if(!(R>a)&&(e[v].x+=G*o(x)*s/R,e[v].y+=N*o(x)*s/R,u&&v<M)){var ot=h(c),ut=h(x),Mt=ot+ut;if(R<Mt*Mt){var zt=n[c.id+"-"+x.id].sqrtVl,$t=(Mt-zt)/zt*l,ee=ut*ut/(ot*ot+ut*ut),Ut=G*$t,le=N*$t;e[v].x+=Ut*ee,e[v].y+=le*ee,ee=1-ee,e[M].x-=Ut*ee,e[M].y-=le*ee}}}})})},r.prototype.calAttractive=function(t,e,n){var a=this,o=this.linkDistance,s=this.alpha,l=this.linkStrength,u=this.bias;t.forEach(function(h,c){if(!(!h.source||!h.target)){var v=a.nodeIdxMap[h.source],x=a.nodeIdxMap[h.target];if(v!==x){var M=a.nodeMap[h.source],k=a.nodeMap[h.target];if(!(!(0,f.isNumber)(k.x)||!(0,f.isNumber)(M.x)||!(0,f.isNumber)(k.y)||!(0,f.isNumber)(M.y))){var R=n[h.target+"-"+h.source],G=R.vl,N=R.sqrtVl,ot=R.vx,ut=R.vy,Mt=(N-o(h))/N*s*l(h),zt=ot*Mt,$t=ut*Mt,ee=u[c];e[x].x-=zt*ee,e[x].y-=$t*ee,e[v].x+=zt*(1-ee),e[v].y+=$t*(1-ee)}}}})},r}(_a),S3=w3,C3=800,M3=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.center=[0,0],t.maxIteration=1e3,t.gravity=10,t.speed=1,t.clustering=!1,t.clusterGravity=10,t.nodes=[],t.edges=[],t.width=300,t.height=300,t.nodeMap={},t.nodeIdxMap={},t}return r.prototype.getDefaultCfg=function(){return{maxIteration:1e3,center:[0,0],gravity:10,speed:1,clustering:!1,clusterGravity:10}},r.prototype.execute=function(){var t=this,e=this,n=e.nodes,a=e.center;if(!(!n||n.length===0)){if(n.length===1){n[0].x=a[0],n[0].y=a[1];return}var o={},s={};n.forEach(function(l,u){(0,f.isNumber)(l.x)||(l.x=Math.random()*t.width),(0,f.isNumber)(l.y)||(l.y=Math.random()*t.height),o[l.id]=l,s[l.id]=u}),e.nodeMap=o,e.nodeIdxMap=s,e.run()}},r.prototype.run=function(){var t=this,e=t.nodes,n=t.edges,a=t.maxIteration;!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight);var o=t.center,s=t.width/10,l=Math.sqrt(t.width*t.height/(e.length+1)),u=t.gravity,h=t.speed,c=t.clustering,v={};if(c){e.forEach(function(R){if(v[R.cluster]===void 0){var G={name:R.cluster,cx:0,cy:0,count:0};v[R.cluster]=G}var N=v[R.cluster];(0,f.isNumber)(R.x)&&(N.cx+=R.x),(0,f.isNumber)(R.y)&&(N.cy+=R.y),N.count++});for(var x in v)v[x].cx/=v[x].count,v[x].cy/=v[x].count}for(var M=function(G){var N=[];if(e.forEach(function(Mt,zt){N[zt]={x:0,y:0}}),t.applyCalculate(e,n,N,l),c){var ot=t.clusterGravity||u;e.forEach(function(Mt,zt){if(!(!(0,f.isNumber)(Mt.x)||!(0,f.isNumber)(Mt.y))){var $t=v[Mt.cluster],ee=Math.sqrt((Mt.x-$t.cx)*(Mt.x-$t.cx)+(Mt.y-$t.cy)*(Mt.y-$t.cy)),Ut=l*ot;N[zt].x-=Ut*(Mt.x-$t.cx)/ee,N[zt].y-=Ut*(Mt.y-$t.cy)/ee}});for(var ut in v)v[ut].cx=0,v[ut].cy=0,v[ut].count=0;e.forEach(function(Mt){var zt=v[Mt.cluster];(0,f.isNumber)(Mt.x)&&(zt.cx+=Mt.x),(0,f.isNumber)(Mt.y)&&(zt.cy+=Mt.y),zt.count++});for(var ut in v)v[ut].cx/=v[ut].count,v[ut].cy/=v[ut].count}e.forEach(function(Mt,zt){if(!(!(0,f.isNumber)(Mt.x)||!(0,f.isNumber)(Mt.y))){var $t=.01*l*u;N[zt].x-=$t*(Mt.x-o[0]),N[zt].y-=$t*(Mt.y-o[1])}}),e.forEach(function(Mt,zt){if(!(!(0,f.isNumber)(Mt.x)||!(0,f.isNumber)(Mt.y))){var $t=Math.sqrt(N[zt].x*N[zt].x+N[zt].y*N[zt].y);if($t>0){var ee=Math.min(s*(h/C3),$t);Mt.x+=N[zt].x/$t*ee,Mt.y+=N[zt].y/$t*ee}}})},k=0;k<a;k++)M(k)},r.prototype.applyCalculate=function(t,e,n,a){var o=this;o.calRepulsive(t,n,a),o.calAttractive(e,n,a)},r.prototype.calRepulsive=function(t,e,n){t.forEach(function(a,o){e[o]={x:0,y:0},t.forEach(function(s,l){if(o!==l&&!(!(0,f.isNumber)(a.x)||!(0,f.isNumber)(s.x)||!(0,f.isNumber)(a.y)||!(0,f.isNumber)(s.y))){var u=a.x-s.x,h=a.y-s.y,c=u*u+h*h;if(c===0){c=1;var v=o>l?1:-1;u=.01*v,h=.01*v}var x=n*n/c;e[o].x+=u*x,e[o].y+=h*x}})})},r.prototype.calAttractive=function(t,e,n){var a=this;t.forEach(function(o){if(!(!o.source||!o.target)){var s=a.nodeIdxMap[o.source],l=a.nodeIdxMap[o.target];if(s!==l){var u=a.nodeMap[o.source],h=a.nodeMap[o.target];if(!(!(0,f.isNumber)(h.x)||!(0,f.isNumber)(u.x)||!(0,f.isNumber)(h.y)||!(0,f.isNumber)(u.y))){var c=h.x-u.x,v=h.y-u.y,x=Math.sqrt(c*c+v*v),M=x*x/n;e[l].x-=c/x*M,e[l].y-=v/x*M,e[s].x+=c/x*M,e[s].y+=v/x*M}}}})},r}(_a),E3=M3,_3=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.begin=[0,0],t.preventOverlap=!0,t.preventOverlapPadding=10,t.condense=!1,t.sortBy="degree",t.nodeSize=30,t.nodes=[],t.edges=[],t.center=[0,0],t.width=300,t.height=300,t.row=0,t.col=0,t.cellWidth=0,t.cellHeight=0,t.cellUsed={},t.id2manPos={},t}return r.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},r.prototype.execute=function(){var t=this,e=t.nodes,n=e.length,a=t.center;if(n!==0){if(n===1){e[0].x=a[0],e[0].y=a[1];return}var o=t.edges,s=[];e.forEach(function(N){s.push(N)});var l={};if(s.forEach(function(N,ot){l[N.id]=ot}),(t.sortBy==="degree"||!(0,Cn.default)(t.sortBy)||s[0][t.sortBy]===void 0)&&(t.sortBy="degree",ro(e[0].degree))){var u=Ql(s.length,l,o);s.forEach(function(N,ot){N.degree=u[ot]})}s.sort(function(N,ot){return ot[t.sortBy]-N[t.sortBy]}),!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight);var h=t.rows,c=t.cols!=null?t.cols:t.columns;if(t.cells=n,h!=null&&c!=null?(t.rows=h,t.cols=c):h!=null&&c==null?(t.rows=h,t.cols=Math.ceil(t.cells/t.rows)):h==null&&c!=null?(t.cols=c,t.rows=Math.ceil(t.cells/t.cols)):(t.splits=Math.sqrt(t.cells*t.height/t.width),t.rows=Math.round(t.splits),t.cols=Math.round(t.width/t.height*t.splits)),t.cols*t.rows>t.cells){var v=t.small(),x=t.large();(v-1)*x>=t.cells?t.small(v-1):(x-1)*v>=t.cells&&t.large(x-1)}else for(;t.cols*t.rows<t.cells;){var v=t.small(),x=t.large();(x+1)*v>=t.cells?t.large(x+1):t.small(v+1)}t.cellWidth=t.width/t.cols,t.cellHeight=t.height/t.rows,t.condense&&(t.cellWidth=0,t.cellHeight=0),t.preventOverlap&&s.forEach(function(N){(!N.x||!N.y)&&(N.x=0,N.y=0);var ot,ut;(0,f.isArray)(N.size)?(ot=N.size[0],ut=N.size[1]):(0,f.isNumber)(N.size)&&(ot=N.size,ut=N.size),(ot===void 0||ut===void 0)&&((0,f.isArray)(t.nodeSize)?(ot=t.nodeSize[0],ut=t.nodeSize[1]):(0,f.isNumber)(t.nodeSize)?(ot=t.nodeSize,ut=t.nodeSize):(ot=30,ut=30));var Mt=t.preventOverlapPadding,zt=ot+Mt,$t=ut+Mt;t.cellWidth=Math.max(t.cellWidth,zt),t.cellHeight=Math.max(t.cellHeight,$t)}),t.cellUsed={},t.row=0,t.col=0,t.id2manPos={};for(var M=0;M<s.length;M++){var k=s[M],R=void 0;if(t.position&&(R=t.position(k)),R&&(R.row!==void 0||R.col!==void 0)){var G={row:R.row,col:R.col};if(G.col===void 0)for(G.col=0;t.used(G.row,G.col);)G.col++;else if(G.row===void 0)for(G.row=0;t.used(G.row,G.col);)G.row++;t.id2manPos[k.id]=G,t.use(G.row,G.col)}t.getPos(k)}}},r.prototype.small=function(t){var e=this,n,a=e.rows||5,o=e.cols||5;if(t==null)n=Math.min(a,o);else{var s=Math.min(a,o);s===e.rows?e.rows=t:e.cols=t}return n},r.prototype.large=function(t){var e=this,n,a=e.rows||5,o=e.cols||5;if(t==null)n=Math.max(a,o);else{var s=Math.max(a,o);s===e.rows?e.rows=t:e.cols=t}return n},r.prototype.used=function(t,e){var n=this;return n.cellUsed["c-"+t+"-"+e]||!1},r.prototype.use=function(t,e){var n=this;n.cellUsed["c-"+t+"-"+e]=!0},r.prototype.moveToNextCell=function(){var t=this,e=t.cols||5;t.col++,t.col>=e&&(t.col=0,t.row++)},r.prototype.getPos=function(t){var e=this,n=e.begin,a=e.cellWidth,o=e.cellHeight,s,l,u=e.id2manPos[t.id];if(u)s=u.col*a+a/2+n[0],l=u.row*o+o/2+n[1];else{for(;e.used(e.row,e.col);)e.moveToNextCell();s=e.col*a+a/2+n[0],l=e.row*o+o/2+n[1],e.use(e.row,e.col),e.moveToNextCell()}t.x=s,t.y=l},r}(_a),A3=_3,T3=p(79320),Lx=p(81306),Ox=p(59206),cu=p(69610),vu=p(54941);const P3=Object.prototype.toString;function ya(i){return P3.call(i).endsWith("Array]")}function L3(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!ya(i))throw new TypeError("input must be an array");if(i.length===0)throw new TypeError("input must not be empty");var t=r.fromIndex,e=t===void 0?0:t,n=r.toIndex,a=n===void 0?i.length:n;if(e<0||e>=i.length||!Number.isInteger(e))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=e||a>i.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=i[e],s=e+1;s<a;s++)i[s]>o&&(o=i[s]);return o}function O3(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!ya(i))throw new TypeError("input must be an array");if(i.length===0)throw new TypeError("input must not be empty");var t=r.fromIndex,e=t===void 0?0:t,n=r.toIndex,a=n===void 0?i.length:n;if(e<0||e>=i.length||!Number.isInteger(e))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=e||a>i.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=i[e],s=e+1;s<a;s++)i[s]<o&&(o=i[s]);return o}function Ix(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ya(i)){if(i.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var t;if(r.output!==void 0){if(!ya(r.output))throw new TypeError("output option must be an array if specified");t=r.output}else t=new Array(i.length);var e=O3(i),n=L3(i);if(e===n)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var a=r.min,o=a===void 0?r.autoMinMax?e:0:a,s=r.max,l=s===void 0?r.autoMinMax?n:1:s;if(o>=l)throw new RangeError("min option must be smaller than max option");for(var u=(l-o)/(n-e),h=0;h<i.length;h++)t[h]=(i[h]-e)*u+o;return t}var du=" ".repeat(2),kx=" ".repeat(4);function I3(){return Bx(this)}function Bx(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=r.maxRows,e=t===void 0?15:t,n=r.maxColumns,a=n===void 0?10:n,o=r.maxNumSize,s=o===void 0?8:o;return"".concat(i.constructor.name,` {
`).concat(du,`[
`).concat(kx).concat(k3(i,e,a,s),`
`).concat(du,`]
`).concat(du,"rows: ").concat(i.rows,`
`).concat(du,"columns: ").concat(i.columns,`
}`)}function k3(i,r,t,e){for(var n=i.rows,a=i.columns,o=Math.min(n,r),s=Math.min(a,t),l=[],u=0;u<o;u++){for(var h=[],c=0;c<s;c++)h.push(B3(i.get(u,c),e));l.push("".concat(h.join(" ")))}return s!==a&&(l[l.length-1]+=" ... ".concat(a-t," more columns")),o!==n&&l.push("... ".concat(n-r," more rows")),l.join(`
`.concat(kx))}function B3(i,r){var t=String(i);if(t.length<=r)return t.padEnd(r," ");var e=i.toPrecision(r-2);if(e.length<=r)return e;var n=i.toExponential(r-2),a=n.indexOf("e"),o=n.slice(a);return n.slice(0,r-o.length)+o}function D3(i,r){i.prototype.add=function(e){return typeof e=="number"?this.addS(e):this.addM(e)},i.prototype.addS=function(e){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)+e);return this},i.prototype.addM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)+e.get(n,a));return this},i.add=function(e,n){var a=new r(e);return a.add(n)},i.prototype.sub=function(e){return typeof e=="number"?this.subS(e):this.subM(e)},i.prototype.subS=function(e){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)-e);return this},i.prototype.subM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)-e.get(n,a));return this},i.sub=function(e,n){var a=new r(e);return a.sub(n)},i.prototype.subtract=i.prototype.sub,i.prototype.subtractS=i.prototype.subS,i.prototype.subtractM=i.prototype.subM,i.subtract=i.sub,i.prototype.mul=function(e){return typeof e=="number"?this.mulS(e):this.mulM(e)},i.prototype.mulS=function(e){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)*e);return this},i.prototype.mulM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)*e.get(n,a));return this},i.mul=function(e,n){var a=new r(e);return a.mul(n)},i.prototype.multiply=i.prototype.mul,i.prototype.multiplyS=i.prototype.mulS,i.prototype.multiplyM=i.prototype.mulM,i.multiply=i.mul,i.prototype.div=function(e){return typeof e=="number"?this.divS(e):this.divM(e)},i.prototype.divS=function(e){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)/e);return this},i.prototype.divM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)/e.get(n,a));return this},i.div=function(e,n){var a=new r(e);return a.div(n)},i.prototype.divide=i.prototype.div,i.prototype.divideS=i.prototype.divS,i.prototype.divideM=i.prototype.divM,i.divide=i.div,i.prototype.mod=function(e){return typeof e=="number"?this.modS(e):this.modM(e)},i.prototype.modS=function(e){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)%e);return this},i.prototype.modM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)%e.get(n,a));return this},i.mod=function(e,n){var a=new r(e);return a.mod(n)},i.prototype.modulus=i.prototype.mod,i.prototype.modulusS=i.prototype.modS,i.prototype.modulusM=i.prototype.modM,i.modulus=i.mod,i.prototype.and=function(e){return typeof e=="number"?this.andS(e):this.andM(e)},i.prototype.andS=function(e){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)&e);return this},i.prototype.andM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)&e.get(n,a));return this},i.and=function(e,n){var a=new r(e);return a.and(n)},i.prototype.or=function(e){return typeof e=="number"?this.orS(e):this.orM(e)},i.prototype.orS=function(e){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)|e);return this},i.prototype.orM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)|e.get(n,a));return this},i.or=function(e,n){var a=new r(e);return a.or(n)},i.prototype.xor=function(e){return typeof e=="number"?this.xorS(e):this.xorM(e)},i.prototype.xorS=function(e){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)^e);return this},i.prototype.xorM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)^e.get(n,a));return this},i.xor=function(e,n){var a=new r(e);return a.xor(n)},i.prototype.leftShift=function(e){return typeof e=="number"?this.leftShiftS(e):this.leftShiftM(e)},i.prototype.leftShiftS=function(e){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)<<e);return this},i.prototype.leftShiftM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)<<e.get(n,a));return this},i.leftShift=function(e,n){var a=new r(e);return a.leftShift(n)},i.prototype.signPropagatingRightShift=function(e){return typeof e=="number"?this.signPropagatingRightShiftS(e):this.signPropagatingRightShiftM(e)},i.prototype.signPropagatingRightShiftS=function(e){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)>>e);return this},i.prototype.signPropagatingRightShiftM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)>>e.get(n,a));return this},i.signPropagatingRightShift=function(e,n){var a=new r(e);return a.signPropagatingRightShift(n)},i.prototype.rightShift=function(e){return typeof e=="number"?this.rightShiftS(e):this.rightShiftM(e)},i.prototype.rightShiftS=function(e){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)>>>e);return this},i.prototype.rightShiftM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)>>>e.get(n,a));return this},i.rightShift=function(e,n){var a=new r(e);return a.rightShift(n)},i.prototype.zeroFillRightShift=i.prototype.rightShift,i.prototype.zeroFillRightShiftS=i.prototype.rightShiftS,i.prototype.zeroFillRightShiftM=i.prototype.rightShiftM,i.zeroFillRightShift=i.rightShift,i.prototype.not=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,~this.get(e,n));return this},i.not=function(e){var n=new r(e);return n.not()},i.prototype.abs=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.abs(this.get(e,n)));return this},i.abs=function(e){var n=new r(e);return n.abs()},i.prototype.acos=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.acos(this.get(e,n)));return this},i.acos=function(e){var n=new r(e);return n.acos()},i.prototype.acosh=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.acosh(this.get(e,n)));return this},i.acosh=function(e){var n=new r(e);return n.acosh()},i.prototype.asin=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.asin(this.get(e,n)));return this},i.asin=function(e){var n=new r(e);return n.asin()},i.prototype.asinh=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.asinh(this.get(e,n)));return this},i.asinh=function(e){var n=new r(e);return n.asinh()},i.prototype.atan=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.atan(this.get(e,n)));return this},i.atan=function(e){var n=new r(e);return n.atan()},i.prototype.atanh=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.atanh(this.get(e,n)));return this},i.atanh=function(e){var n=new r(e);return n.atanh()},i.prototype.cbrt=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.cbrt(this.get(e,n)));return this},i.cbrt=function(e){var n=new r(e);return n.cbrt()},i.prototype.ceil=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.ceil(this.get(e,n)));return this},i.ceil=function(e){var n=new r(e);return n.ceil()},i.prototype.clz32=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.clz32(this.get(e,n)));return this},i.clz32=function(e){var n=new r(e);return n.clz32()},i.prototype.cos=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.cos(this.get(e,n)));return this},i.cos=function(e){var n=new r(e);return n.cos()},i.prototype.cosh=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.cosh(this.get(e,n)));return this},i.cosh=function(e){var n=new r(e);return n.cosh()},i.prototype.exp=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.exp(this.get(e,n)));return this},i.exp=function(e){var n=new r(e);return n.exp()},i.prototype.expm1=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.expm1(this.get(e,n)));return this},i.expm1=function(e){var n=new r(e);return n.expm1()},i.prototype.floor=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.floor(this.get(e,n)));return this},i.floor=function(e){var n=new r(e);return n.floor()},i.prototype.fround=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.fround(this.get(e,n)));return this},i.fround=function(e){var n=new r(e);return n.fround()},i.prototype.log=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.log(this.get(e,n)));return this},i.log=function(e){var n=new r(e);return n.log()},i.prototype.log1p=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.log1p(this.get(e,n)));return this},i.log1p=function(e){var n=new r(e);return n.log1p()},i.prototype.log10=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.log10(this.get(e,n)));return this},i.log10=function(e){var n=new r(e);return n.log10()},i.prototype.log2=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.log2(this.get(e,n)));return this},i.log2=function(e){var n=new r(e);return n.log2()},i.prototype.round=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.round(this.get(e,n)));return this},i.round=function(e){var n=new r(e);return n.round()},i.prototype.sign=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.sign(this.get(e,n)));return this},i.sign=function(e){var n=new r(e);return n.sign()},i.prototype.sin=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.sin(this.get(e,n)));return this},i.sin=function(e){var n=new r(e);return n.sin()},i.prototype.sinh=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.sinh(this.get(e,n)));return this},i.sinh=function(e){var n=new r(e);return n.sinh()},i.prototype.sqrt=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.sqrt(this.get(e,n)));return this},i.sqrt=function(e){var n=new r(e);return n.sqrt()},i.prototype.tan=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.tan(this.get(e,n)));return this},i.tan=function(e){var n=new r(e);return n.tan()},i.prototype.tanh=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.tanh(this.get(e,n)));return this},i.tanh=function(e){var n=new r(e);return n.tanh()},i.prototype.trunc=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.trunc(this.get(e,n)));return this},i.trunc=function(e){var n=new r(e);return n.trunc()},i.pow=function(e,n){var a=new r(e);return a.pow(n)},i.prototype.pow=function(e){return typeof e=="number"?this.powS(e):this.powM(e)},i.prototype.powS=function(e){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,Math.pow(this.get(n,a),e));return this},i.prototype.powM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,Math.pow(this.get(n,a),e.get(n,a)));return this}}function Ia(i,r,t){var e=t?i.rows:i.rows-1;if(r<0||r>e)throw new RangeError("Row index out of range")}function ka(i,r,t){var e=t?i.columns:i.columns-1;if(r<0||r>e)throw new RangeError("Column index out of range")}function ns(i,r){if(r.to1DArray&&(r=r.to1DArray()),r.length!==i.columns)throw new RangeError("vector size must be the same as the number of columns");return r}function is(i,r){if(r.to1DArray&&(r=r.to1DArray()),r.length!==i.rows)throw new RangeError("vector size must be the same as the number of rows");return r}function F3(i,r){if(!ya(r))throw new TypeError("row indices must be an array");for(var t=0;t<r.length;t++)if(r[t]<0||r[t]>=i.rows)throw new RangeError("row indices are out of range")}function R3(i,r){if(!ya(r))throw new TypeError("column indices must be an array");for(var t=0;t<r.length;t++)if(r[t]<0||r[t]>=i.columns)throw new RangeError("column indices are out of range")}function Dx(i,r,t,e,n){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(gu("startRow",r),gu("endRow",t),gu("startColumn",e),gu("endColumn",n),r>t||e>n||r<0||r>=i.rows||t<0||t>=i.rows||e<0||e>=i.columns||n<0||n>=i.columns)throw new RangeError("Submatrix indices are out of range")}function pu(i){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=[],e=0;e<i;e++)t.push(r);return t}function gu(i,r){if(typeof r!="number")throw new TypeError("".concat(i," must be a number"))}function as(i){if(i.isEmpty())throw new Error("Empty matrix has no elements to index")}function N3(i){for(var r=pu(i.rows),t=0;t<i.rows;++t)for(var e=0;e<i.columns;++e)r[t]+=i.get(t,e);return r}function G3(i){for(var r=pu(i.columns),t=0;t<i.rows;++t)for(var e=0;e<i.columns;++e)r[e]+=i.get(t,e);return r}function Y3(i){for(var r=0,t=0;t<i.rows;t++)for(var e=0;e<i.columns;e++)r+=i.get(t,e);return r}function z3(i){for(var r=pu(i.rows,1),t=0;t<i.rows;++t)for(var e=0;e<i.columns;++e)r[t]*=i.get(t,e);return r}function X3(i){for(var r=pu(i.columns,1),t=0;t<i.rows;++t)for(var e=0;e<i.columns;++e)r[e]*=i.get(t,e);return r}function V3(i){for(var r=1,t=0;t<i.rows;t++)for(var e=0;e<i.columns;e++)r*=i.get(t,e);return r}function H3(i,r,t){for(var e=i.rows,n=i.columns,a=[],o=0;o<e;o++){for(var s=0,l=0,u=0,h=0;h<n;h++)u=i.get(o,h)-t[o],s+=u,l+=u*u;r?a.push((l-s*s/n)/(n-1)):a.push((l-s*s/n)/n)}return a}function W3(i,r,t){for(var e=i.rows,n=i.columns,a=[],o=0;o<n;o++){for(var s=0,l=0,u=0,h=0;h<e;h++)u=i.get(h,o)-t[o],s+=u,l+=u*u;r?a.push((l-s*s/e)/(e-1)):a.push((l-s*s/e)/e)}return a}function j3(i,r,t){for(var e=i.rows,n=i.columns,a=e*n,o=0,s=0,l=0,u=0;u<e;u++)for(var h=0;h<n;h++)l=i.get(u,h)-t,o+=l,s+=l*l;return r?(s-o*o/a)/(a-1):(s-o*o/a)/a}function U3(i,r){for(var t=0;t<i.rows;t++)for(var e=0;e<i.columns;e++)i.set(t,e,i.get(t,e)-r[t])}function Z3(i,r){for(var t=0;t<i.rows;t++)for(var e=0;e<i.columns;e++)i.set(t,e,i.get(t,e)-r[e])}function K3(i,r){for(var t=0;t<i.rows;t++)for(var e=0;e<i.columns;e++)i.set(t,e,i.get(t,e)-r)}function $3(i){for(var r=[],t=0;t<i.rows;t++){for(var e=0,n=0;n<i.columns;n++)e+=Math.pow(i.get(t,n),2)/(i.columns-1);r.push(Math.sqrt(e))}return r}function Q3(i,r){for(var t=0;t<i.rows;t++)for(var e=0;e<i.columns;e++)i.set(t,e,i.get(t,e)/r[t])}function J3(i){for(var r=[],t=0;t<i.columns;t++){for(var e=0,n=0;n<i.rows;n++)e+=Math.pow(i.get(n,t),2)/(i.rows-1);r.push(Math.sqrt(e))}return r}function q3(i,r){for(var t=0;t<i.rows;t++)for(var e=0;e<i.columns;e++)i.set(t,e,i.get(t,e)/r[e])}function t4(i){for(var r=i.size-1,t=0,e=0;e<i.columns;e++)for(var n=0;n<i.rows;n++)t+=Math.pow(i.get(n,e),2)/r;return Math.sqrt(t)}function e4(i,r){for(var t=0;t<i.rows;t++)for(var e=0;e<i.columns;e++)i.set(t,e,i.get(t,e)/r)}var Ti=function(){function i(){(0,cu.Z)(this,i)}return(0,vu.Z)(i,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(t){if(typeof t!="function")throw new TypeError("callback must be a function");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.call(this,e,n);return this}},{key:"to1DArray",value:function(){for(var t=[],e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.push(this.get(e,n));return t}},{key:"to2DArray",value:function(){for(var t=[],e=0;e<this.rows;e++){t.push([]);for(var n=0;n<this.columns;n++)t[e].push(this.get(e,n))}return t}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var t=0,e=0,n=-1,a=!0,o=!1;t<this.rows&&a;){for(e=0,o=!1;e<this.columns&&o===!1;)this.get(t,e)===0?e++:this.get(t,e)===1&&e>n?(o=!0,n=e):(a=!1,o=!0);t++}return a}},{key:"isReducedEchelonForm",value:function(){for(var t=0,e=0,n=-1,a=!0,o=!1;t<this.rows&&a;){for(e=0,o=!1;e<this.columns&&o===!1;)this.get(t,e)===0?e++:this.get(t,e)===1&&e>n?(o=!0,n=e):(a=!1,o=!0);for(var s=e+1;s<this.rows;s++)this.get(t,s)!==0&&(a=!1);t++}return a}},{key:"echelonForm",value:function(){for(var t=this.clone(),e=0,n=0;e<t.rows&&n<t.columns;){for(var a=e,o=e;o<t.rows;o++)t.get(o,n)>t.get(a,n)&&(a=o);if(t.get(a,n)===0)n++;else{t.swapRows(e,a);for(var s=t.get(e,n),l=n;l<t.columns;l++)t.set(e,l,t.get(e,l)/s);for(var u=e+1;u<t.rows;u++){var h=t.get(u,n)/t.get(e,n);t.set(u,n,0);for(var c=n+1;c<t.columns;c++)t.set(u,c,t.get(u,c)-t.get(e,c)*h)}e++,n++}}return t}},{key:"reducedEchelonForm",value:function(){for(var t=this.echelonForm(),e=t.columns,n=t.rows,a=n-1;a>=0;)if(t.maxRow(a)===0)a--;else{for(var o=0,s=!1;o<n&&s===!1;)t.get(a,o)===1?s=!0:o++;for(var l=0;l<a;l++)for(var u=t.get(l,o),h=o;h<e;h++){var c=t.get(l,h)-u*t.get(a,h);t.set(l,h,c)}a--}return t}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof t!="object")throw new TypeError("options must be an object");var e=t.rows,n=e===void 0?1:e,a=t.columns,o=a===void 0?1:a;if(!Number.isInteger(n)||n<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(o)||o<=0)throw new TypeError("columns must be a positive integer");for(var s=new tn(this.rows*n,this.columns*o),l=0;l<n;l++)for(var u=0;u<o;u++)s.setSubMatrix(this,this.rows*l,this.columns*u);return s}},{key:"fill",value:function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,t);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(t){Ia(this,t);for(var e=[],n=0;n<this.columns;n++)e.push(this.get(t,n));return e}},{key:"getRowVector",value:function(t){return tn.rowVector(this.getRow(t))}},{key:"setRow",value:function(t,e){Ia(this,t),e=ns(this,e);for(var n=0;n<this.columns;n++)this.set(t,n,e[n]);return this}},{key:"swapRows",value:function(t,e){Ia(this,t),Ia(this,e);for(var n=0;n<this.columns;n++){var a=this.get(t,n);this.set(t,n,this.get(e,n)),this.set(e,n,a)}return this}},{key:"getColumn",value:function(t){ka(this,t);for(var e=[],n=0;n<this.rows;n++)e.push(this.get(n,t));return e}},{key:"getColumnVector",value:function(t){return tn.columnVector(this.getColumn(t))}},{key:"setColumn",value:function(t,e){ka(this,t),e=is(this,e);for(var n=0;n<this.rows;n++)this.set(n,t,e[n]);return this}},{key:"swapColumns",value:function(t,e){ka(this,t),ka(this,e);for(var n=0;n<this.rows;n++){var a=this.get(n,t);this.set(n,t,this.get(n,e)),this.set(n,e,a)}return this}},{key:"addRowVector",value:function(t){t=ns(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[n]);return this}},{key:"subRowVector",value:function(t){t=ns(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[n]);return this}},{key:"mulRowVector",value:function(t){t=ns(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[n]);return this}},{key:"divRowVector",value:function(t){t=ns(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[n]);return this}},{key:"addColumnVector",value:function(t){t=is(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[e]);return this}},{key:"subColumnVector",value:function(t){t=is(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[e]);return this}},{key:"mulColumnVector",value:function(t){t=is(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[e]);return this}},{key:"divColumnVector",value:function(t){t=is(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[e]);return this}},{key:"mulRow",value:function(t,e){Ia(this,t);for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this}},{key:"mulColumn",value:function(t,e){ka(this,t);for(var n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*e);return this}},{key:"max",value:function(t){if(this.isEmpty())return NaN;switch(t){case"row":{for(var e=new Array(this.rows).fill(Number.NEGATIVE_INFINITY),n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.get(n,a)>e[n]&&(e[n]=this.get(n,a));return e}case"column":{for(var o=new Array(this.columns).fill(Number.NEGATIVE_INFINITY),s=0;s<this.rows;s++)for(var l=0;l<this.columns;l++)this.get(s,l)>o[l]&&(o[l]=this.get(s,l));return o}case void 0:{for(var u=this.get(0,0),h=0;h<this.rows;h++)for(var c=0;c<this.columns;c++)this.get(h,c)>u&&(u=this.get(h,c));return u}default:throw new Error("invalid option: ".concat(t))}}},{key:"maxIndex",value:function(){as(this);for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.get(n,a)>t&&(t=this.get(n,a),e[0]=n,e[1]=a);return e}},{key:"min",value:function(t){if(this.isEmpty())return NaN;switch(t){case"row":{for(var e=new Array(this.rows).fill(Number.POSITIVE_INFINITY),n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.get(n,a)<e[n]&&(e[n]=this.get(n,a));return e}case"column":{for(var o=new Array(this.columns).fill(Number.POSITIVE_INFINITY),s=0;s<this.rows;s++)for(var l=0;l<this.columns;l++)this.get(s,l)<o[l]&&(o[l]=this.get(s,l));return o}case void 0:{for(var u=this.get(0,0),h=0;h<this.rows;h++)for(var c=0;c<this.columns;c++)this.get(h,c)<u&&(u=this.get(h,c));return u}default:throw new Error("invalid option: ".concat(t))}}},{key:"minIndex",value:function(){as(this);for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.get(n,a)<t&&(t=this.get(n,a),e[0]=n,e[1]=a);return e}},{key:"maxRow",value:function(t){if(Ia(this,t),this.isEmpty())return NaN;for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}},{key:"maxRowIndex",value:function(t){Ia(this,t),as(this);for(var e=this.get(t,0),n=[t,0],a=1;a<this.columns;a++)this.get(t,a)>e&&(e=this.get(t,a),n[1]=a);return n}},{key:"minRow",value:function(t){if(Ia(this,t),this.isEmpty())return NaN;for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}},{key:"minRowIndex",value:function(t){Ia(this,t),as(this);for(var e=this.get(t,0),n=[t,0],a=1;a<this.columns;a++)this.get(t,a)<e&&(e=this.get(t,a),n[1]=a);return n}},{key:"maxColumn",value:function(t){if(ka(this,t),this.isEmpty())return NaN;for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t));return e}},{key:"maxColumnIndex",value:function(t){ka(this,t),as(this);for(var e=this.get(0,t),n=[0,t],a=1;a<this.rows;a++)this.get(a,t)>e&&(e=this.get(a,t),n[0]=a);return n}},{key:"minColumn",value:function(t){if(ka(this,t),this.isEmpty())return NaN;for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t));return e}},{key:"minColumnIndex",value:function(t){ka(this,t),as(this);for(var e=this.get(0,t),n=[0,t],a=1;a<this.rows;a++)this.get(a,t)<e&&(e=this.get(a,t),n[0]=a);return n}},{key:"diag",value:function(){for(var t=Math.min(this.rows,this.columns),e=[],n=0;n<t;n++)e.push(this.get(n,n));return e}},{key:"norm",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",e=0;if(t==="max")return this.max();if(t==="frobenius"){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)e=e+this.get(n,a)*this.get(n,a);return Math.sqrt(e)}else throw new RangeError("unknown norm type: ".concat(t))}},{key:"cumulativeSum",value:function(){for(var t=0,e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t+=this.get(e,n),this.set(e,n,t);return this}},{key:"dot",value:function(t){i.isMatrix(t)&&(t=t.to1DArray());var e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");for(var n=0,a=0;a<e.length;a++)n+=e[a]*t[a];return n}},{key:"mmul",value:function(t){t=tn.checkMatrix(t);for(var e=this.rows,n=this.columns,a=t.columns,o=new tn(e,a),s=new Float64Array(n),l=0;l<a;l++){for(var u=0;u<n;u++)s[u]=t.get(u,l);for(var h=0;h<e;h++){for(var c=0,v=0;v<n;v++)c+=this.get(h,v)*s[v];o.set(h,l,c)}}return o}},{key:"strassen2x2",value:function(t){t=tn.checkMatrix(t);var e=new tn(2,2),n=this.get(0,0),a=t.get(0,0),o=this.get(0,1),s=t.get(0,1),l=this.get(1,0),u=t.get(1,0),h=this.get(1,1),c=t.get(1,1),v=(n+h)*(a+c),x=(l+h)*a,M=n*(s-c),k=h*(u-a),R=(n+o)*c,G=(l-n)*(a+s),N=(o-h)*(u+c),ot=v+k-R+N,ut=M+R,Mt=x+k,zt=v-x+M+G;return e.set(0,0,ot),e.set(0,1,ut),e.set(1,0,Mt),e.set(1,1,zt),e}},{key:"strassen3x3",value:function(t){t=tn.checkMatrix(t);var e=new tn(3,3),n=this.get(0,0),a=this.get(0,1),o=this.get(0,2),s=this.get(1,0),l=this.get(1,1),u=this.get(1,2),h=this.get(2,0),c=this.get(2,1),v=this.get(2,2),x=t.get(0,0),M=t.get(0,1),k=t.get(0,2),R=t.get(1,0),G=t.get(1,1),N=t.get(1,2),ot=t.get(2,0),ut=t.get(2,1),Mt=t.get(2,2),zt=(n+a+o-s-l-c-v)*G,$t=(n-s)*(-M+G),ee=l*(-x+M+R-G-N-ot+Mt),Ut=(-n+s+l)*(x-M+G),le=(s+l)*(-x+M),xe=n*x,ye=(-n+h+c)*(x-k+N),Oe=(-n+h)*(k-N),Ge=(h+c)*(-x+k),Ne=(n+a+o-l-u-h-c)*N,qe=c*(-x+k+R-G-N-ot+ut),tr=(-o+c+v)*(G+ot-ut),rr=(o-v)*(G-ut),$e=o*ot,Qe=(c+v)*(-ot+ut),br=(-o+l+u)*(N+ot-Mt),yr=(o-u)*(N-Mt),_r=(l+u)*(-ot+Mt),ir=a*R,wr=u*ut,Dr=s*k,Er=h*M,Mr=v*Mt,zr=xe+$e+ir,qr=zt+Ut+le+xe+tr+$e+Qe,Lr=xe+ye+Ge+Ne+$e+br+_r,We=$t+ee+Ut+xe+$e+br+yr,lr=$t+Ut+le+xe+wr,Xr=$e+br+yr+_r+Dr,Ur=xe+ye+Oe+qe+tr+rr+$e,Br=tr+rr+$e+Qe+Er,en=xe+ye+Oe+Ge+Mr;return e.set(0,0,zr),e.set(0,1,qr),e.set(0,2,Lr),e.set(1,0,We),e.set(1,1,lr),e.set(1,2,Xr),e.set(2,0,Ur),e.set(2,1,Br),e.set(2,2,en),e}},{key:"mmulStrassen",value:function(t){t=tn.checkMatrix(t);var e=this.clone(),n=e.rows,a=e.columns,o=t.rows,s=t.columns;a!==o&&console.warn("Multiplying ".concat(n," x ").concat(a," and ").concat(o," x ").concat(s," matrix: dimensions do not match."));function l(v,x,M){var k=v.rows,R=v.columns;if(k===x&&R===M)return v;var G=i.zeros(x,M);return G=G.setSubMatrix(v,0,0),G}var u=Math.max(n,o),h=Math.max(a,s);e=l(e,u,h),t=l(t,u,h);function c(v,x,M,k){if(M<=512||k<=512)return v.mmul(x);M%2==1&&k%2==1?(v=l(v,M+1,k+1),x=l(x,M+1,k+1)):M%2==1?(v=l(v,M+1,k),x=l(x,M+1,k)):k%2==1&&(v=l(v,M,k+1),x=l(x,M,k+1));var R=parseInt(v.rows/2,10),G=parseInt(v.columns/2,10),N=v.subMatrix(0,R-1,0,G-1),ot=x.subMatrix(0,R-1,0,G-1),ut=v.subMatrix(0,R-1,G,v.columns-1),Mt=x.subMatrix(0,R-1,G,x.columns-1),zt=v.subMatrix(R,v.rows-1,0,G-1),$t=x.subMatrix(R,x.rows-1,0,G-1),ee=v.subMatrix(R,v.rows-1,G,v.columns-1),Ut=x.subMatrix(R,x.rows-1,G,x.columns-1),le=c(i.add(N,ee),i.add(ot,Ut),R,G),xe=c(i.add(zt,ee),ot,R,G),ye=c(N,i.sub(Mt,Ut),R,G),Oe=c(ee,i.sub($t,ot),R,G),Ge=c(i.add(N,ut),Ut,R,G),Ne=c(i.sub(zt,N),i.add(ot,Mt),R,G),qe=c(i.sub(ut,ee),i.add($t,Ut),R,G),tr=i.add(le,Oe);tr.sub(Ge),tr.add(qe);var rr=i.add(ye,Ge),$e=i.add(xe,Oe),Qe=i.sub(le,xe);Qe.add(ye),Qe.add(Ne);var br=i.zeros(2*tr.rows,2*tr.columns);return br=br.setSubMatrix(tr,0,0),br=br.setSubMatrix(rr,tr.rows,0),br=br.setSubMatrix($e,0,tr.columns),br=br.setSubMatrix(Qe,tr.rows,tr.columns),br.subMatrix(0,M-1,0,k-1)}return c(e,t,u,h)}},{key:"scaleRows",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof t!="object")throw new TypeError("options must be an object");var e=t.min,n=e===void 0?0:e,a=t.max,o=a===void 0?1:a;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(o))throw new TypeError("max must be a number");if(n>=o)throw new RangeError("min must be smaller than max");for(var s=new tn(this.rows,this.columns),l=0;l<this.rows;l++){var u=this.getRow(l);u.length>0&&Ix(u,{min:n,max:o,output:u}),s.setRow(l,u)}return s}},{key:"scaleColumns",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof t!="object")throw new TypeError("options must be an object");var e=t.min,n=e===void 0?0:e,a=t.max,o=a===void 0?1:a;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(o))throw new TypeError("max must be a number");if(n>=o)throw new RangeError("min must be smaller than max");for(var s=new tn(this.rows,this.columns),l=0;l<this.columns;l++){var u=this.getColumn(l);u.length&&Ix(u,{min:n,max:o,output:u}),s.setColumn(l,u)}return s}},{key:"flipRows",value:function(){for(var t=Math.ceil(this.columns/2),e=0;e<this.rows;e++)for(var n=0;n<t;n++){var a=this.get(e,n),o=this.get(e,this.columns-1-n);this.set(e,n,o),this.set(e,this.columns-1-n,a)}return this}},{key:"flipColumns",value:function(){for(var t=Math.ceil(this.rows/2),e=0;e<this.columns;e++)for(var n=0;n<t;n++){var a=this.get(n,e),o=this.get(this.rows-1-n,e);this.set(n,e,o),this.set(this.rows-1-n,e,a)}return this}},{key:"kroneckerProduct",value:function(t){t=tn.checkMatrix(t);for(var e=this.rows,n=this.columns,a=t.rows,o=t.columns,s=new tn(e*a,n*o),l=0;l<e;l++)for(var u=0;u<n;u++)for(var h=0;h<a;h++)for(var c=0;c<o;c++)s.set(a*l+h,o*u+c,this.get(l,u)*t.get(h,c));return s}},{key:"kroneckerSum",value:function(t){if(t=tn.checkMatrix(t),!this.isSquare()||!t.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var e=this.rows,n=t.rows,a=this.kroneckerProduct(tn.eye(n,n)),o=tn.eye(e,e).kroneckerProduct(t);return a.add(o)}},{key:"transpose",value:function(){for(var t=new tn(this.columns,this.rows),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(n,e,this.get(e,n));return t}},{key:"sortRows",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Fx,e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}},{key:"sortColumns",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Fx,e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}},{key:"subMatrix",value:function(t,e,n,a){Dx(this,t,e,n,a);for(var o=new tn(e-t+1,a-n+1),s=t;s<=e;s++)for(var l=n;l<=a;l++)o.set(s-t,l-n,this.get(s,l));return o}},{key:"subMatrixRow",value:function(t,e,n){if(e===void 0&&(e=0),n===void 0&&(n=this.columns-1),e>n||e<0||e>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");for(var a=new tn(t.length,n-e+1),o=0;o<t.length;o++)for(var s=e;s<=n;s++){if(t[o]<0||t[o]>=this.rows)throw new RangeError("Row index out of range: ".concat(t[o]));a.set(o,s-e,this.get(t[o],s))}return a}},{key:"subMatrixColumn",value:function(t,e,n){if(e===void 0&&(e=0),n===void 0&&(n=this.rows-1),e>n||e<0||e>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");for(var a=new tn(n-e+1,t.length),o=0;o<t.length;o++)for(var s=e;s<=n;s++){if(t[o]<0||t[o]>=this.columns)throw new RangeError("Column index out of range: ".concat(t[o]));a.set(s-e,o,this.get(s,t[o]))}return a}},{key:"setSubMatrix",value:function(t,e,n){if(t=tn.checkMatrix(t),t.isEmpty())return this;var a=e+t.rows-1,o=n+t.columns-1;Dx(this,e,a,n,o);for(var s=0;s<t.rows;s++)for(var l=0;l<t.columns;l++)this.set(e+s,n+l,t.get(s,l));return this}},{key:"selection",value:function(t,e){F3(this,t),R3(this,e);for(var n=new tn(t.length,e.length),a=0;a<t.length;a++)for(var o=t[a],s=0;s<e.length;s++){var l=e[s];n.set(a,s,this.get(o,l))}return n}},{key:"trace",value:function(){for(var t=Math.min(this.rows,this.columns),e=0,n=0;n<t;n++)e+=this.get(n,n);return e}},{key:"clone",value:function(){for(var t=new tn(this.rows,this.columns),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(e,n,this.get(e,n));return t}},{key:"sum",value:function(t){switch(t){case"row":return N3(this);case"column":return G3(this);case void 0:return Y3(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"product",value:function(t){switch(t){case"row":return z3(this);case"column":return X3(this);case void 0:return V3(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"mean",value:function(t){var e=this.sum(t);switch(t){case"row":{for(var n=0;n<this.rows;n++)e[n]/=this.columns;return e}case"column":{for(var a=0;a<this.columns;a++)e[a]/=this.rows;return e}case void 0:return e/this.size;default:throw new Error("invalid option: ".concat(t))}}},{key:"variance",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof t=="object"&&(e=t,t=void 0),typeof e!="object")throw new TypeError("options must be an object");var n=e,a=n.unbiased,o=a===void 0?!0:a,s=n.mean,l=s===void 0?this.mean(t):s;if(typeof o!="boolean")throw new TypeError("unbiased must be a boolean");switch(t){case"row":{if(!ya(l))throw new TypeError("mean must be an array");return H3(this,o,l)}case"column":{if(!ya(l))throw new TypeError("mean must be an array");return W3(this,o,l)}case void 0:{if(typeof l!="number")throw new TypeError("mean must be a number");return j3(this,o,l)}default:throw new Error("invalid option: ".concat(t))}}},{key:"standardDeviation",value:function(t,e){typeof t=="object"&&(e=t,t=void 0);var n=this.variance(t,e);if(t===void 0)return Math.sqrt(n);for(var a=0;a<n.length;a++)n[a]=Math.sqrt(n[a]);return n}},{key:"center",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof t=="object"&&(e=t,t=void 0),typeof e!="object")throw new TypeError("options must be an object");var n=e,a=n.center,o=a===void 0?this.mean(t):a;switch(t){case"row":{if(!ya(o))throw new TypeError("center must be an array");return U3(this,o),this}case"column":{if(!ya(o))throw new TypeError("center must be an array");return Z3(this,o),this}case void 0:{if(typeof o!="number")throw new TypeError("center must be a number");return K3(this,o),this}default:throw new Error("invalid option: ".concat(t))}}},{key:"scale",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof t=="object"&&(e=t,t=void 0),typeof e!="object")throw new TypeError("options must be an object");var n=e.scale;switch(t){case"row":{if(n===void 0)n=$3(this);else if(!ya(n))throw new TypeError("scale must be an array");return Q3(this,n),this}case"column":{if(n===void 0)n=J3(this);else if(!ya(n))throw new TypeError("scale must be an array");return q3(this,n),this}case void 0:{if(n===void 0)n=t4(this);else if(typeof n!="number")throw new TypeError("scale must be a number");return e4(this,n),this}default:throw new Error("invalid option: ".concat(t))}}},{key:"toString",value:function(t){return Bx(this,t)}}],[{key:"from1DArray",value:function(t,e,n){var a=t*e;if(a!==n.length)throw new RangeError("data length does not match given dimensions");for(var o=new tn(t,e),s=0;s<t;s++)for(var l=0;l<e;l++)o.set(s,l,n[s*e+l]);return o}},{key:"rowVector",value:function(t){for(var e=new tn(1,t.length),n=0;n<t.length;n++)e.set(0,n,t[n]);return e}},{key:"columnVector",value:function(t){for(var e=new tn(t.length,1),n=0;n<t.length;n++)e.set(n,0,t[n]);return e}},{key:"zeros",value:function(t,e){return new tn(t,e)}},{key:"ones",value:function(t,e){return new tn(t,e).fill(1)}},{key:"rand",value:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof n!="object")throw new TypeError("options must be an object");for(var a=n.random,o=a===void 0?Math.random:a,s=new tn(t,e),l=0;l<t;l++)for(var u=0;u<e;u++)s.set(l,u,o());return s}},{key:"randInt",value:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof n!="object")throw new TypeError("options must be an object");var a=n.min,o=a===void 0?0:a,s=n.max,l=s===void 0?1e3:s,u=n.random,h=u===void 0?Math.random:u;if(!Number.isInteger(o))throw new TypeError("min must be an integer");if(!Number.isInteger(l))throw new TypeError("max must be an integer");if(o>=l)throw new RangeError("min must be smaller than max");for(var c=l-o,v=new tn(t,e),x=0;x<t;x++)for(var M=0;M<e;M++){var k=o+Math.round(h()*c);v.set(x,M,k)}return v}},{key:"eye",value:function(t,e,n){e===void 0&&(e=t),n===void 0&&(n=1);for(var a=Math.min(t,e),o=this.zeros(t,e),s=0;s<a;s++)o.set(s,s,n);return o}},{key:"diag",value:function(t,e,n){var a=t.length;e===void 0&&(e=a),n===void 0&&(n=e);for(var o=Math.min(a,e,n),s=this.zeros(e,n),l=0;l<o;l++)s.set(l,l,t[l]);return s}},{key:"min",value:function(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,a=t.columns,o=new tn(n,a),s=0;s<n;s++)for(var l=0;l<a;l++)o.set(s,l,Math.min(t.get(s,l),e.get(s,l)));return o}},{key:"max",value:function(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,a=t.columns,o=new this(n,a),s=0;s<n;s++)for(var l=0;l<a;l++)o.set(s,l,Math.max(t.get(s,l),e.get(s,l)));return o}},{key:"checkMatrix",value:function(t){return i.isMatrix(t)?t:new tn(t)}},{key:"isMatrix",value:function(t){return t!=null&&t.klass==="Matrix"}}]),i}();Ti.prototype.klass="Matrix",typeof Symbol!="undefined"&&(Ti.prototype[Symbol.for("nodejs.util.inspect.custom")]=I3);function Fx(i,r){return i-r}function r4(i){return i.every(function(r){return typeof r=="number"})}Ti.random=Ti.rand,Ti.randomInt=Ti.randInt,Ti.diagonal=Ti.diag,Ti.prototype.diagonal=Ti.prototype.diag,Ti.identity=Ti.eye,Ti.prototype.negate=Ti.prototype.neg,Ti.prototype.tensorProduct=Ti.prototype.kroneckerProduct;var tn=function(i){(0,Lx.Z)(t,i);var r=(0,Ox.Z)(t);function t(e,n){var a;if((0,cu.Z)(this,t),a=r.call(this),t.isMatrix(e))return(0,T3.Z)(a,e.clone());if(Number.isInteger(e)&&e>=0)if(a.data=[],Number.isInteger(n)&&n>=0)for(var o=0;o<e;o++)a.data.push(new Float64Array(n));else throw new TypeError("nColumns must be a positive integer");else if(ya(e)){var s=e;if(e=s.length,n=e?s[0].length:0,typeof n!="number")throw new TypeError("Data must be a 2D array with at least one element");a.data=[];for(var l=0;l<e;l++){if(s[l].length!==n)throw new RangeError("Inconsistent array dimensions");if(!r4(s[l]))throw new TypeError("Input data contains non-numeric values");a.data.push(Float64Array.from(s[l]))}}else throw new TypeError("First argument must be a positive number or an array");return a.rows=e,a.columns=n,a}return(0,vu.Z)(t,[{key:"set",value:function(n,a,o){return this.data[n][a]=o,this}},{key:"get",value:function(n,a){return this.data[n][a]}},{key:"removeRow",value:function(n){return Ia(this,n),this.data.splice(n,1),this.rows-=1,this}},{key:"addRow",value:function(n,a){return a===void 0&&(a=n,n=this.rows),Ia(this,n,!0),a=Float64Array.from(ns(this,a)),this.data.splice(n,0,a),this.rows+=1,this}},{key:"removeColumn",value:function(n){ka(this,n);for(var a=0;a<this.rows;a++){for(var o=new Float64Array(this.columns-1),s=0;s<n;s++)o[s]=this.data[a][s];for(var l=n+1;l<this.columns;l++)o[l-1]=this.data[a][l];this.data[a]=o}return this.columns-=1,this}},{key:"addColumn",value:function(n,a){typeof a=="undefined"&&(a=n,n=this.columns),ka(this,n,!0),a=is(this,a);for(var o=0;o<this.rows;o++){for(var s=new Float64Array(this.columns+1),l=0;l<n;l++)s[l]=this.data[o][l];for(s[l++]=a[o];l<this.columns+1;l++)s[l]=this.data[o][l-1];this.data[o]=s}return this.columns+=1,this}}]),t}(Ti);D3(Ti,tn);var n4=function(i){(0,Lx.Z)(t,i);var r=(0,Ox.Z)(t);function t(e){var n;return(0,cu.Z)(this,t),n=r.call(this),n.data=e,n.rows=e.length,n.columns=e[0].length,n}return(0,vu.Z)(t,[{key:"set",value:function(n,a,o){return this.data[n][a]=o,this}},{key:"get",value:function(n,a){return this.data[n][a]}}]),t}(Ti);function os(i,r){var t=0;return Math.abs(i)>Math.abs(r)?(t=r/i,Math.abs(i)*Math.sqrt(1+t*t)):r!==0?(t=i/r,Math.abs(r)*Math.sqrt(1+t*t)):0}var Rx=function(){function i(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if((0,cu.Z)(this,i),r=n4.checkMatrix(r),r.isEmpty())throw new Error("Matrix must be non-empty");var e=r.rows,n=r.columns,a=t.computeLeftSingularVectors,o=a===void 0?!0:a,s=t.computeRightSingularVectors,l=s===void 0?!0:s,u=t.autoTranspose,h=u===void 0?!1:u,c=Boolean(o),v=Boolean(l),x=!1,M;if(e<n)if(!h)M=r.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{M=r.transpose(),e=M.rows,n=M.columns,x=!0;var k=c;c=v,v=k}else M=r.clone();for(var R=Math.min(e,n),G=Math.min(e+1,n),N=new Float64Array(G),ot=new tn(e,R),ut=new tn(n,n),Mt=new Float64Array(n),zt=new Float64Array(e),$t=new Float64Array(G),ee=0;ee<G;ee++)$t[ee]=ee;for(var Ut=Math.min(e-1,n),le=Math.max(0,Math.min(n-2,e)),xe=Math.max(Ut,le),ye=0;ye<xe;ye++){if(ye<Ut){N[ye]=0;for(var Oe=ye;Oe<e;Oe++)N[ye]=os(N[ye],M.get(Oe,ye));if(N[ye]!==0){M.get(ye,ye)<0&&(N[ye]=-N[ye]);for(var Ge=ye;Ge<e;Ge++)M.set(Ge,ye,M.get(Ge,ye)/N[ye]);M.set(ye,ye,M.get(ye,ye)+1)}N[ye]=-N[ye]}for(var Ne=ye+1;Ne<n;Ne++){if(ye<Ut&&N[ye]!==0){for(var qe=0,tr=ye;tr<e;tr++)qe+=M.get(tr,ye)*M.get(tr,Ne);qe=-qe/M.get(ye,ye);for(var rr=ye;rr<e;rr++)M.set(rr,Ne,M.get(rr,Ne)+qe*M.get(rr,ye))}Mt[Ne]=M.get(ye,Ne)}if(c&&ye<Ut)for(var $e=ye;$e<e;$e++)ot.set($e,ye,M.get($e,ye));if(ye<le){Mt[ye]=0;for(var Qe=ye+1;Qe<n;Qe++)Mt[ye]=os(Mt[ye],Mt[Qe]);if(Mt[ye]!==0){Mt[ye+1]<0&&(Mt[ye]=0-Mt[ye]);for(var br=ye+1;br<n;br++)Mt[br]/=Mt[ye];Mt[ye+1]+=1}if(Mt[ye]=-Mt[ye],ye+1<e&&Mt[ye]!==0){for(var yr=ye+1;yr<e;yr++)zt[yr]=0;for(var _r=ye+1;_r<e;_r++)for(var ir=ye+1;ir<n;ir++)zt[_r]+=Mt[ir]*M.get(_r,ir);for(var wr=ye+1;wr<n;wr++)for(var Dr=-Mt[wr]/Mt[ye+1],Er=ye+1;Er<e;Er++)M.set(Er,wr,M.get(Er,wr)+Dr*zt[Er])}if(v)for(var Mr=ye+1;Mr<n;Mr++)ut.set(Mr,ye,Mt[Mr])}}var zr=Math.min(n,e+1);if(Ut<n&&(N[Ut]=M.get(Ut,Ut)),e<zr&&(N[zr-1]=0),le+1<zr&&(Mt[le]=M.get(le,zr-1)),Mt[zr-1]=0,c){for(var qr=Ut;qr<R;qr++){for(var Lr=0;Lr<e;Lr++)ot.set(Lr,qr,0);ot.set(qr,qr,1)}for(var We=Ut-1;We>=0;We--)if(N[We]!==0){for(var lr=We+1;lr<R;lr++){for(var Xr=0,Ur=We;Ur<e;Ur++)Xr+=ot.get(Ur,We)*ot.get(Ur,lr);Xr=-Xr/ot.get(We,We);for(var Br=We;Br<e;Br++)ot.set(Br,lr,ot.get(Br,lr)+Xr*ot.get(Br,We))}for(var en=We;en<e;en++)ot.set(en,We,-ot.get(en,We));ot.set(We,We,1+ot.get(We,We));for(var $r=0;$r<We-1;$r++)ot.set($r,We,0)}else{for(var Vr=0;Vr<e;Vr++)ot.set(Vr,We,0);ot.set(We,We,1)}}if(v)for(var rn=n-1;rn>=0;rn--){if(rn<le&&Mt[rn]!==0)for(var pn=rn+1;pn<n;pn++){for(var Fn=0,En=rn+1;En<n;En++)Fn+=ut.get(En,rn)*ut.get(En,pn);Fn=-Fn/ut.get(rn+1,rn);for(var Xn=rn+1;Xn<n;Xn++)ut.set(Xn,pn,ut.get(Xn,pn)+Fn*ut.get(Xn,rn))}for(var Qn=0;Qn<n;Qn++)ut.set(Qn,rn,0);ut.set(rn,rn,1)}for(var zi=zr-1,Ki=0,pi=Number.EPSILON;zr>0;){var Rr=void 0,Vn=void 0;for(Rr=zr-2;Rr>=-1&&Rr!==-1;Rr--){var Pi=Number.MIN_VALUE+pi*Math.abs(N[Rr]+Math.abs(N[Rr+1]));if(Math.abs(Mt[Rr])<=Pi||Number.isNaN(Mt[Rr])){Mt[Rr]=0;break}}if(Rr===zr-2)Vn=4;else{var wi=void 0;for(wi=zr-1;wi>=Rr&&wi!==Rr;wi--){var Za=(wi!==zr?Math.abs(Mt[wi]):0)+(wi!==Rr+1?Math.abs(Mt[wi-1]):0);if(Math.abs(N[wi])<=pi*Za){N[wi]=0;break}}wi===Rr?Vn=3:wi===zr-1?Vn=1:(Vn=2,Rr=wi)}switch(Rr++,Vn){case 1:{var Li=Mt[zr-2];Mt[zr-2]=0;for(var _n=zr-2;_n>=Rr;_n--){var Sn=os(N[_n],Li),Rn=N[_n]/Sn,zn=Li/Sn;if(N[_n]=Sn,_n!==Rr&&(Li=-zn*Mt[_n-1],Mt[_n-1]=Rn*Mt[_n-1]),v)for(var $i=0;$i<n;$i++)Sn=Rn*ut.get($i,_n)+zn*ut.get($i,zr-1),ut.set($i,zr-1,-zn*ut.get($i,_n)+Rn*ut.get($i,zr-1)),ut.set($i,_n,Sn)}break}case 2:{var No=Mt[Rr-1];Mt[Rr-1]=0;for(var Ba=Rr;Ba<zr;Ba++){var zs=os(N[Ba],No),oc=N[Ba]/zs,sc=No/zs;if(N[Ba]=zs,No=-sc*Mt[Ba],Mt[Ba]=oc*Mt[Ba],c)for(var xo=0;xo<e;xo++)zs=oc*ot.get(xo,Ba)+sc*ot.get(xo,Rr-1),ot.set(xo,Rr-1,-sc*ot.get(xo,Ba)+oc*ot.get(xo,Rr-1)),ot.set(xo,Ba,zs)}break}case 3:{var Xs=Math.max(Math.abs(N[zr-1]),Math.abs(N[zr-2]),Math.abs(Mt[zr-2]),Math.abs(N[Rr]),Math.abs(Mt[Rr])),ls=N[zr-1]/Xs,B1=N[zr-2]/Xs,Du=Mt[zr-2]/Xs,lc=N[Rr]/Xs,J9=Mt[Rr]/Xs,Go=((B1+ls)*(B1-ls)+Du*Du)/2,Fu=ls*Du*(ls*Du),Vs=0;(Go!==0||Fu!==0)&&(Go<0?Vs=0-Math.sqrt(Go*Go+Fu):Vs=Math.sqrt(Go*Go+Fu),Vs=Fu/(Go+Vs));for(var Yo=(lc+ls)*(lc-ls)+Vs,us=lc*J9,An=Rr;An<zr-1;An++){var la=os(Yo,us);la===0&&(la=Number.MIN_VALUE);var Da=Yo/la,Fa=us/la;if(An!==Rr&&(Mt[An-1]=la),Yo=Da*N[An]+Fa*Mt[An],Mt[An]=Da*Mt[An]-Fa*N[An],us=Fa*N[An+1],N[An+1]=Da*N[An+1],v)for(var bo=0;bo<n;bo++)la=Da*ut.get(bo,An)+Fa*ut.get(bo,An+1),ut.set(bo,An+1,-Fa*ut.get(bo,An)+Da*ut.get(bo,An+1)),ut.set(bo,An,la);if(la=os(Yo,us),la===0&&(la=Number.MIN_VALUE),Da=Yo/la,Fa=us/la,N[An]=la,Yo=Da*Mt[An]+Fa*N[An+1],N[An+1]=-Fa*Mt[An]+Da*N[An+1],us=Fa*Mt[An+1],Mt[An+1]=Da*Mt[An+1],c&&An<e-1)for(var wo=0;wo<e;wo++)la=Da*ot.get(wo,An)+Fa*ot.get(wo,An+1),ot.set(wo,An+1,-Fa*ot.get(wo,An)+Da*ot.get(wo,An+1)),ot.set(wo,An,la)}Mt[zr-2]=Yo,Ki=Ki+1;break}case 4:{if(N[Rr]<=0&&(N[Rr]=N[Rr]<0?-N[Rr]:0,v))for(var Ru=0;Ru<=zi;Ru++)ut.set(Ru,Rr,-ut.get(Ru,Rr));for(;Rr<zi&&!(N[Rr]>=N[Rr+1]);){var Hs=N[Rr];if(N[Rr]=N[Rr+1],N[Rr+1]=Hs,v&&Rr<n-1)for(var fs=0;fs<n;fs++)Hs=ut.get(fs,Rr+1),ut.set(fs,Rr+1,ut.get(fs,Rr)),ut.set(fs,Rr,Hs);if(c&&Rr<e-1)for(var hs=0;hs<e;hs++)Hs=ot.get(hs,Rr+1),ot.set(hs,Rr+1,ot.get(hs,Rr)),ot.set(hs,Rr,Hs);Rr++}Ki=0,zr--;break}}}if(x){var q9=ut;ut=ot,ot=q9}this.m=e,this.n=n,this.s=N,this.U=ot,this.V=ut}return(0,vu.Z)(i,[{key:"solve",value:function(t){for(var e=t,n=this.threshold,a=this.s.length,o=tn.zeros(a,a),s=0;s<a;s++)Math.abs(this.s[s])<=n?o.set(s,s,0):o.set(s,s,1/this.s[s]);for(var l=this.U,u=this.rightSingularVectors,h=u.mmul(o),c=u.rows,v=l.rows,x=tn.zeros(c,v),M=0;M<c;M++)for(var k=0;k<v;k++){for(var R=0,G=0;G<a;G++)R+=h.get(M,G)*l.get(k,G);x.set(M,k,R)}return x.mmul(e)}},{key:"solveForDiagonal",value:function(t){return this.solve(tn.diag(t))}},{key:"inverse",value:function(){for(var t=this.V,e=this.threshold,n=t.rows,a=t.columns,o=new tn(n,this.s.length),s=0;s<n;s++)for(var l=0;l<a;l++)Math.abs(this.s[l])>e&&o.set(s,l,t.get(s,l)/this.s[l]);for(var u=this.U,h=u.rows,c=u.columns,v=new tn(n,h),x=0;x<n;x++)for(var M=0;M<h;M++){for(var k=0,R=0;R<c;R++)k+=o.get(x,R)*u.get(M,R);v.set(x,M,k)}return v}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,n=this.s,a=0,o=n.length;a<o;a++)n[a]>t&&e++;return e}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return tn.diag(this.s)}}]),i}(),i4=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.center=[0,0],t.linkDistance=50,t.scaledDistances=null,t}return r.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},r.prototype.execute=function(){var t=this,e=t.nodes,n=t.edges,a=n===void 0?[]:n,o=t.center;if(!(!e||e.length===0)){if(e.length===1){e[0].x=o[0],e[0].y=o[1];return}var s=t.linkDistance,l=Th({nodes:e,edges:a},!1),u=Ah(l);t.handleInfinity(u);var h=Om(u,s);t.scaledDistances=h;var c=t.runMDS();t.positions=c,c.forEach(function(v,x){e[x].x=v[0]+o[0],e[x].y=v[1]+o[1]})}},r.prototype.runMDS=function(){var t=this,e=2,n=t.scaledDistances,a=tn.mul(tn.pow(n,2),-.5),o=a.mean("row"),s=a.mean("column"),l=a.mean();a.add(l).subRowVector(o).subColumnVector(s);var u=new Rx(a),h=tn.sqrt(u.diagonalMatrix).diagonal();return u.leftSingularVectors.toJSON().map(function(c){return tn.mul([c],[h]).toJSON()[0].splice(0,e)})},r.prototype.handleInfinity=function(t){var e=-999999;t.forEach(function(n){n.forEach(function(a){a!==Infinity&&e<a&&(e=a)})}),t.forEach(function(n,a){n.forEach(function(o,s){o===Infinity&&(t[a][s]=e)})})},r}(_a),a4=i4,o4=function(){function i(r){this.distances=r.distances,this.dimension=r.dimension||2,this.linkDistance=r.linkDistance}return i.prototype.layout=function(){var r=this,t=r.dimension,e=r.distances,n=r.linkDistance;try{var a=tn.mul(tn.pow(e,2),-.5),o=a.mean("row"),s=a.mean("column"),l=a.mean();a.add(l).subRowVector(o).subColumnVector(s);var u=new Rx(a),h=tn.sqrt(u.diagonalMatrix).diagonal();return u.leftSingularVectors.toJSON().map(function(k){return tn.mul([k],[h]).toJSON()[0].splice(0,t)})}catch(k){for(var c=[],v=0;v<e.length;v++){var x=Math.random()*n,M=Math.random()*n;c.push([x,M])}return c}},i}(),s4=o4,l4=800,u4=function(){function i(r){this.disp=[],this.positions=r.positions,this.adjMatrix=r.adjMatrix,this.focusID=r.focusID,this.radii=r.radii,this.iterations=r.iterations||10,this.height=r.height||10,this.width=r.width||10,this.speed=r.speed||100,this.gravity=r.gravity||10,this.nodeSizeFunc=r.nodeSizeFunc,this.k=r.k||5,this.strictRadial=r.strictRadial,this.nodes=r.nodes}return i.prototype.layout=function(){var r=this,t=r.positions,e=[],n=r.iterations,a=r.width/10;r.maxDisplace=a,r.disp=e;for(var o=0;o<n;o++)t.forEach(function(s,l){e[l]={x:0,y:0}}),r.getRepulsion(),r.updatePositions();return t},i.prototype.getRepulsion=function(){var r=this,t=r.positions,e=r.nodes,n=r.disp,a=r.k,o=r.radii||[];t.forEach(function(s,l){n[l]={x:0,y:0},t.forEach(function(u,h){if(l!==h&&o[l]===o[h]){var c=s[0]-u[0],v=s[1]-u[1],x=Math.sqrt(c*c+v*v);if(x===0){x=1;var M=l>h?1:-1;c=.01*M,v=.01*M}if(x<r.nodeSizeFunc(e[l])/2+r.nodeSizeFunc(e[h])/2){var k=a*a/x;n[l].x+=c/x*k,n[l].y+=v/x*k}}})})},i.prototype.updatePositions=function(){var r=this,t=r.positions,e=r.disp,n=r.speed,a=r.strictRadial,o=r.focusID,s=r.maxDisplace||r.width/10;a&&e.forEach(function(u,h){var c=t[h][0]-t[o][0],v=t[h][1]-t[o][1],x=Math.sqrt(c*c+v*v),M=v/x,k=-c/x,R=Math.sqrt(u.x*u.x+u.y*u.y),G=Math.acos((M*u.x+k*u.y)/R);G>Math.PI/2&&(G-=Math.PI/2,M*=-1,k*=-1);var N=Math.cos(G)*R;u.x=M*N,u.y=k*N});var l=r.radii;t.forEach(function(u,h){if(h!==o){var c=Math.sqrt(e[h].x*e[h].x+e[h].y*e[h].y);if(c>0&&h!==o){var v=Math.min(s*(n/l4),c);if(u[0]+=e[h].x/c*v,u[1]+=e[h].y/c*v,a){var x=u[0]-t[o][0],M=u[1]-t[o][1],k=Math.sqrt(x*x+M*M);x=x/k*l[h],M=M/k*l[h],u[0]=t[o][0]+x,u[1]=t[o][1]+M}}}})},i}(),f4=u4;function h4(i){for(var r=i.length,t=i[0].length,e=[],n=0;n<r;n++){for(var a=[],o=0;o<t;o++)i[n][o]!==0?a.push(1/(i[n][o]*i[n][o])):a.push(0);e.push(a)}return e}function c4(i,r){var t=-1;return i.forEach(function(e,n){e.id===r&&(t=n)}),t}function Nx(i,r){return Math.sqrt((i[0]-r[0])*(i[0]-r[0])+(i[1]-r[1])*(i[1]-r[1]))}var v4=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.center=[0,0],t.maxIteration=1e3,t.focusNode=null,t.unitRadius=null,t.linkDistance=50,t.preventOverlap=!1,t.strictRadial=!0,t.maxPreventOverlapIteration=200,t.sortStrength=10,t}return r.prototype.getDefaultCfg=function(){return{center:[0,0],maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}},r.prototype.execute=function(){var t=this,e=t.nodes,n=t.edges||[],a=t.center;if(!(!e||e.length===0)){if(e.length===1){e[0].x=a[0],e[0].y=a[1];return}var o=t.linkDistance,s=null;if((0,Cn.default)(t.focusNode)){for(var l=!1,u=0;u<e.length;u++)e[u].id===t.focusNode&&(s=e[u],t.focusNode=s,l=!0,u=e.length);l||(s=null)}else s=t.focusNode;s||(s=e[0],t.focusNode=s);var h=c4(e,s.id);t.focusIndex=h;var c=Th({nodes:e,edges:n},!1),v=Ah(c),x=t.maxToFocus(v,h);t.handleInfinity(v,h,x+1),t.distances=v;var M=v[h];!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight);var k=t.width||500,R=t.height||500,G=k-a[0]>a[0]?a[0]:k-a[0],N=R-a[1]>a[1]?a[1]:R-a[1];G===0&&(G=k/2),N===0&&(N=R/2);var ot=N>G?G:N,ut=Math.max.apply(Math,M),Mt=[];M.forEach(function(rr,$e){t.unitRadius||(t.unitRadius=ot/ut),Mt[$e]=rr*t.unitRadius}),t.radii=Mt;var zt=t.eIdealDisMatrix();t.eIdealDistances=zt;var $t=h4(zt);t.weights=$t;var ee=new s4({distances:zt,linkDistance:o}),Ut=ee.layout();Ut.forEach(function(rr){ro(rr[0])&&(rr[0]=Math.random()*o),ro(rr[1])&&(rr[1]=Math.random()*o)}),t.positions=Ut,Ut.forEach(function(rr,$e){e[$e].x=rr[0]+a[0],e[$e].y=rr[1]+a[1]}),Ut.forEach(function(rr){rr[0]-=Ut[h][0],rr[1]-=Ut[h][1]}),t.run();var le=t.preventOverlap,xe=t.nodeSize,ye,Oe=t.strictRadial;if(le){var Ge=t.nodeSpacing,Ne;(0,La.default)(Ge)?Ne=function(){return Ge}:(0,$s.default)(Ge)?Ne=Ge:Ne=function(){return 0},xe?(0,Ri.default)(xe)?ye=function($e){var Qe=xe[0]>xe[1]?xe[0]:xe[1];return Qe+Ne($e)}:ye=function($e){return xe+Ne($e)}:ye=function($e){if($e.size){if((0,Ri.default)($e.size)){var Qe=$e.size[0]>$e.size[1]?$e.size[0]:$e.size[1];return Qe+Ne($e)}return $e.size+Ne($e)}return 10+Ne($e)};var qe={nodeSizeFunc:ye,adjMatrix:c,positions:Ut,radii:Mt,height:R,width:k,strictRadial:Oe,focusID:h,iterations:t.maxPreventOverlapIteration||200,k:Ut.length/4.5,nodes:e},tr=new f4(qe);Ut=tr.layout()}Ut.forEach(function(rr,$e){e[$e].x=rr[0]+a[0],e[$e].y=rr[1]+a[1]})}},r.prototype.run=function(){for(var t=this,e=t.maxIteration,n=t.positions||[],a=t.weights||[],o=t.eIdealDistances||[],s=t.radii||[],l=0;l<=e;l++){var u=l/e;t.oneIteration(u,n,s,o,a)}},r.prototype.oneIteration=function(t,e,n,a,o){var s=this,l=1-t,u=s.focusIndex;e.forEach(function(h,c){var v=Nx(h,[0,0]),x=v===0?0:1/v;if(c!==u){var M=0,k=0,R=0;e.forEach(function(N,ot){if(c!==ot){var ut=Nx(h,N),Mt=ut===0?0:1/ut,zt=a[ot][c];R+=o[c][ot],M+=o[c][ot]*(N[0]+zt*(h[0]-N[0])*Mt),k+=o[c][ot]*(N[1]+zt*(h[1]-N[1])*Mt)}});var G=n[c]===0?0:1/n[c];R*=l,R+=t*G*G,M*=l,M+=t*G*h[0]*x,h[0]=M/R,k*=l,k+=t*G*h[1]*x,h[1]=k/R}})},r.prototype.eIdealDisMatrix=function(){var t=this,e=t.nodes;if(!e)return[];var n=t.distances,a=t.linkDistance,o=t.radii||[],s=t.unitRadius||50,l=[];return n&&n.forEach(function(u,h){var c=[];u.forEach(function(v,x){if(h===x)c.push(0);else if(o[h]===o[x])if(t.sortBy==="data")c.push(v*(Math.abs(h-x)*t.sortStrength)/(o[h]/s));else if(t.sortBy){var M=e[h][t.sortBy]||0,k=e[x][t.sortBy]||0;(0,Cn.default)(M)&&(M=M.charCodeAt(0)),(0,Cn.default)(k)&&(k=k.charCodeAt(0)),c.push(v*(Math.abs(M-k)*t.sortStrength)/(o[h]/s))}else c.push(v*a/(o[h]/s));else{var R=(a+s)/2;c.push(v*R)}}),l.push(c)}),l},r.prototype.handleInfinity=function(t,e,n){for(var a=t.length,o=0;o<a;o++)if(t[e][o]===Infinity){t[e][o]=n,t[o][e]=n;for(var s=0;s<a;s++)t[o][s]!==Infinity&&t[e][s]===Infinity&&(t[e][s]=n+t[o][s],t[s][e]=n+t[o][s])}for(var o=0;o<a;o++)if(o!==e){for(var s=0;s<a;s++)if(t[o][s]===Infinity){var l=Math.abs(t[e][o]-t[e][s]);l=l===0?1:l,t[o][s]=l}}},r.prototype.maxToFocus=function(t,e){for(var n=0,a=0;a<t[e].length;a++)t[e][a]!==Infinity&&(n=t[e][a]>n?t[e][a]:n);return n},r}(_a),d4=v4,p4=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.center=[0,0],t.width=300,t.height=300,t}return r.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},r.prototype.execute=function(){var t=this,e=t.nodes,n=.9,a=t.center;!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),e&&e.forEach(function(o){o.x=(Math.random()-.5)*n*t.width+a[0],o.y=(Math.random()-.5)*n*t.height+a[1]})},r}(_a),g4=p4,y4=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.center=[0,0],t.maxIteration=100,t.gravity=10,t.comboGravity=10,t.linkDistance=10,t.alpha=1,t.alphaMin=.001,t.alphaDecay=1-Math.pow(t.alphaMin,1/300),t.alphaTarget=0,t.velocityDecay=.6,t.edgeStrength=.2,t.nodeStrength=30,t.preventOverlap=!1,t.preventNodeOverlap=!1,t.preventComboOverlap=!1,t.collideStrength=void 0,t.nodeCollideStrength=void 0,t.comboCollideStrength=void 0,t.optimizeRangeFactor=1,t.onTick=function(){},t.onLayoutEnd=function(){},t.depthAttractiveForceScale=.5,t.depthRepulsiveForceScale=2,t.nodes=[],t.edges=[],t.combos=[],t.comboTrees=[],t.width=300,t.height=300,t.bias=[],t.nodeMap={},t.oriComboMap={},t.nodeIdxMap={},t.comboMap={},t.previousLayouted=!1,t}return r.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.2,nodeStrength:30,linkDistance:10}},r.prototype.execute=function(){var t=this,e=t.nodes,n=t.center;if(t.comboTree={id:"comboTreeRoot",depth:-1,children:t.comboTrees},!(!e||e.length===0)){if(e.length===1){e[0].x=n[0],e[0].y=n[1];return}t.initVals(),t.run(),t.onLayoutEnd()}},r.prototype.run=function(){var t=this,e=t.nodes,n=t.previousLayouted?t.maxIteration/5:t.maxIteration;!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight);var a=t.center,o=t.velocityDecay,s=t.comboMap;t.previousLayouted||t.initPos(s);for(var l=function(x){var M=[];e.forEach(function(k,R){M[R]={x:0,y:0}}),t.applyCalculate(M),t.applyComboCenterForce(M),e.forEach(function(k,R){!(0,f.isNumber)(k.x)||!(0,f.isNumber)(k.y)||(k.x+=M[R].x*o,k.y+=M[R].y*o)}),t.alpha+=(t.alphaTarget-t.alpha)*t.alphaDecay,t.onTick()},u=0;u<n;u++)l(u);var h=[0,0];e.forEach(function(v){!(0,f.isNumber)(v.x)||!(0,f.isNumber)(v.y)||(h[0]+=v.x,h[1]+=v.y)}),h[0]/=e.length,h[1]/=e.length;var c=[a[0]-h[0],a[1]-h[1]];e.forEach(function(v,x){!(0,f.isNumber)(v.x)||!(0,f.isNumber)(v.y)||(v.x+=c[0],v.y+=c[1])}),t.combos.forEach(function(v){var x=s[v.id];x&&x.empty&&(v.x=x.cx||v.x,v.y=x.cy||v.y)}),t.previousLayouted=!0},r.prototype.initVals=function(){var t=this,e=t.edges,n=t.nodes,a=t.combos,o={},s={},l={};n.forEach(function(Ne,qe){s[Ne.id]=Ne,l[Ne.id]=qe}),t.nodeMap=s,t.nodeIdxMap=l;var u={};a.forEach(function(Ne){u[Ne.id]=Ne}),t.oriComboMap=u,t.comboMap=t.getComboMap();var h=t.preventOverlap;t.preventComboOverlap=t.preventComboOverlap||h,t.preventNodeOverlap=t.preventNodeOverlap||h;var c=t.collideStrength;c&&(t.comboCollideStrength=c,t.nodeCollideStrength=c);for(var v=0;v<e.length;++v)o[e[v].source]?o[e[v].source]++:o[e[v].source]=1,o[e[v].target]?o[e[v].target]++:o[e[v].target]=1;for(var x=[],v=0;v<e.length;++v)x[v]=o[e[v].source]/(o[e[v].source]+o[e[v].target]);this.bias=x;var M=t.nodeSize,k=t.nodeSpacing,R,G;if((0,f.isNumber)(k)?G=function(){return k}:(0,f.isFunction)(k)?G=k:G=function(){return 0},this.nodeSpacing=G,!M)R=function(qe){if(qe.size){if((0,f.isArray)(qe.size)){var tr=qe.size[0]>qe.size[1]?qe.size[0]:qe.size[1];return tr/2}return qe.size/2}return 10};else if((0,f.isFunction)(M))R=function(qe){return M(qe)};else if((0,f.isArray)(M)){var N=M[0]>M[1]?M[0]:M[1],ot=N/2;R=function(qe){return ot}}else{var ut=M/2;R=function(qe){return ut}}this.nodeSize=R;var Mt=t.comboSpacing,zt;(0,f.isNumber)(Mt)?zt=function(){return Mt}:(0,f.isFunction)(Mt)?zt=Mt:zt=function(){return 0},this.comboSpacing=zt;var $t=t.comboPadding,ee;(0,f.isNumber)($t)?ee=function(){return $t}:(0,f.isArray)($t)?ee=function(){return Math.max.apply(null,$t)}:(0,f.isFunction)($t)?ee=$t:ee=function(){return 0},this.comboPadding=ee;var Ut=this.linkDistance,le;Ut||(Ut=10),(0,f.isNumber)(Ut)?le=function(qe){return Ut}:le=Ut,this.linkDistance=le;var xe=this.edgeStrength,ye;xe||(xe=1),(0,f.isNumber)(xe)?ye=function(qe){return xe}:ye=xe,this.edgeStrength=ye;var Oe=this.nodeStrength,Ge;Oe||(Oe=30),(0,f.isNumber)(Oe)?Ge=function(qe){return Oe}:Ge=Oe,this.nodeStrength=Ge},r.prototype.initPos=function(t){var e=this,n=e.nodes;n.forEach(function(a,o){if(a.comboId){var s=t[a.comboId];a.x=s.cx+100/(o+1),a.y=s.cy+100/(o+1)}else a.x=100/(o+1),a.y=100/(o+1)})},r.prototype.getComboMap=function(){var t=this,e=t.nodeMap,n=t.nodeIdxMap,a=t.comboTrees,o=t.oriComboMap,s={};return(a||[]).forEach(function(l){var u=[];Ea(l,function(h){if(h.itemType==="node"||!o[h.id])return!0;if(s[h.id]===void 0){var c={name:h.id,cx:0,cy:0,count:0,depth:t.oriComboMap[h.id].depth,children:[]};s[h.id]=c}var v=h.children;v&&v.forEach(function(N){if(!s[N.id]&&!e[N.id])return!0;u.push(N)});var x=s[h.id];if(x.cx=0,x.cy=0,u.length===0){x.empty=!0;var M=o[h.id],k=Object.keys(e).length,R=h.id+"-visual-child-"+k,G={id:R,x:M.x,y:M.y,depth:x.depth+1,itemType:"node"};t.nodes.push(G),e[R]=G,n[R]=k,x.cx=M.x,x.cy=M.y,u.push(G)}return u.forEach(function(N){if(x.count++,N.itemType!=="node"){var ot=s[N.id];(0,f.isNumber)(ot.cx)&&(x.cx+=ot.cx),(0,f.isNumber)(ot.cy)&&(x.cy+=ot.cy);return}var ut=e[N.id];!ut||((0,f.isNumber)(ut.x)&&(x.cx+=ut.x),(0,f.isNumber)(ut.y)&&(x.cy+=ut.y))}),x.cx/=x.count,x.cy/=x.count,x.children=u,!0})}),s},r.prototype.applyComboCenterForce=function(t){var e=this,n=e.gravity,a=e.comboGravity||n,o=this.alpha,s=e.comboTrees,l=e.nodeIdxMap,u=e.nodeMap,h=e.comboMap;(s||[]).forEach(function(c){Ea(c,function(v){if(v.itemType==="node")return!0;var x=h[v.id];if(!x)return!0;var M=h[v.id],k=(M.depth+1)*.5,R=M.cx,G=M.cy;return M.cx=0,M.cy=0,M.children.forEach(function(N){if(N.itemType!=="node"){var ot=h[N.id];ot&&(0,f.isNumber)(ot.cx)&&(M.cx+=ot.cx),ot&&(0,f.isNumber)(ot.cy)&&(M.cy+=ot.cy);return}var ut=u[N.id],Mt=ut.x-R||.005,zt=ut.y-G||.005,$t=Math.sqrt(Mt*Mt+zt*zt),ee=l[ut.id],Ut=a*o/$t*k;t[ee].x-=Mt*Ut,t[ee].y-=zt*Ut,(0,f.isNumber)(ut.x)&&(M.cx+=ut.x),(0,f.isNumber)(ut.y)&&(M.cy+=ut.y)}),M.cx/=M.count,M.cy/=M.count,!0})})},r.prototype.applyCalculate=function(t){var e=this,n=e.comboMap,a=e.nodes,o={};a.forEach(function(l,u){a.forEach(function(h,c){if(!(u<c)){var v=l.x-h.x||.005,x=l.y-h.y||.005,M=v*v+x*x,k=Math.sqrt(M);M<1&&(M=k),o[l.id+"-"+h.id]={vx:v,vy:x,vl2:M,vl:k},o[h.id+"-"+l.id]={vx:-v,vy:-x,vl2:M,vl:k}}})}),e.updateComboSizes(n),e.calRepulsive(t,o),e.calAttractive(t,o);var s=e.preventComboOverlap;s&&e.comboNonOverlapping(t,n)},r.prototype.updateComboSizes=function(t){var e=this,n=e.comboTrees,a=e.nodeMap,o=e.nodeSize,s=e.comboSpacing,l=e.comboPadding;(n||[]).forEach(function(u){var h=[];Ea(u,function(c){if(c.itemType==="node")return!0;var v=t[c.id];if(!!v){var x=c.children;x&&x.forEach(function(R){!t[R.id]&&!a[R.id]||h.push(R)}),v.minX=Infinity,v.minY=Infinity,v.maxX=-Infinity,v.maxY=-Infinity,h.forEach(function(R){if(R.itemType!=="node")return!0;var G=a[R.id];if(!G)return!0;var N=o(G),ot=G.x-N,ut=G.y-N,Mt=G.x+N,zt=G.y+N;v.minX>ot&&(v.minX=ot),v.minY>ut&&(v.minY=ut),v.maxX<Mt&&(v.maxX=Mt),v.maxY<zt&&(v.maxY=zt)});var M=e.oriComboMap[c.id].size||Ke.defaultCombo.size;(0,f.isArray)(M)&&(M=M[0]);var k=Math.max(v.maxX-v.minX,v.maxY-v.minY,M);return v.r=k/2+s(v)/2+l(v),!0}})})},r.prototype.comboNonOverlapping=function(t,e){var n=this,a=n.comboTree,o=n.comboCollideStrength,s=n.nodeIdxMap,l=n.nodeMap;Ea(a,function(u){if(!(!e[u.id]&&!l[u.id]&&u.id!=="comboTreeRoot")){var h=u.children;return h&&h.length>1&&h.forEach(function(c,v){if(c.itemType!=="node"){var x=e[c.id];!x||h.forEach(function(M,k){if(!(v<=k)&&M.itemType!=="node"){var R=e[M.id];if(!!R){var G=x.cx-R.cx||.005,N=x.cy-R.cy||.005,ot=G*G+N*N,ut=x.r,Mt=R.r,zt=ut+Mt,$t=Mt*Mt,ee=ut*ut;if(ot<zt*zt){var Ut=c.children;if(!Ut||Ut.length===0)return;var le=M.children;if(!le||le.length===0)return;var xe=Math.sqrt(ot),ye=(zt-xe)/xe*o,Oe=G*ye,Ge=N*ye,Ne=$t/(ee+$t),qe=1-Ne;Ut.forEach(function(tr){if(tr.itemType==="node"&&!!l[tr.id]){var rr=s[tr.id];le.forEach(function($e){if($e.itemType==="node"&&!!l[$e.id]){var Qe=s[$e.id];t[rr].x+=Oe*Ne,t[rr].y+=Ge*Ne,t[Qe].x-=Oe*qe,t[Qe].y-=Ge*qe}})}})}}}})}}),!0}})},r.prototype.calRepulsive=function(t,e){var n=this,a=n.nodes,o=n.width*n.optimizeRangeFactor,s=n.nodeStrength,l=n.alpha,u=n.nodeCollideStrength,h=n.preventNodeOverlap,c=n.nodeSize,v=n.nodeSpacing,x=n.depthRepulsiveForceScale,M=n.center;a.forEach(function(k,R){if(!(!k.x||!k.y)){if(M){var G=n.gravity,N=k.x-M[0]||.005,ot=k.y-M[1]||.005,ut=Math.sqrt(N*N+ot*ot);t[R].x-=N*G*l/ut,t[R].y-=ot*G*l/ut}a.forEach(function(Mt,zt){if(R!==zt&&!(!Mt.x||!Mt.y)){var $t=e[k.id+"-"+Mt.id],ee=$t.vl2,Ut=$t.vl;if(!(Ut>o)){var le=e[k.id+"-"+Mt.id],xe=le.vx,ye=le.vy,Oe=Math.abs(Mt.depth-k.depth)+1||1;Mt.comboId!==k.comboId&&Oe++;var Ge=Oe?Math.pow(x,Oe):1,Ne=s(Mt)*l/ee*Ge;if(t[R].x+=xe*Ne,t[R].y+=ye*Ne,R<zt&&h){var qe=c(k)+v(k),tr=c(Mt)+v(Mt),rr=qe+tr;if(ee<rr*rr){var $e=(rr-Ut)/Ut*u,Qe=tr*tr,br=Qe/(qe*qe+Qe),yr=xe*$e,_r=ye*$e;t[R].x+=yr*br,t[R].y+=_r*br,br=1-br,t[zt].x-=yr*br,t[zt].y-=_r*br}}}}})}})},r.prototype.calAttractive=function(t,e){var n=this,a=n.edges,o=n.linkDistance,s=n.alpha,l=n.edgeStrength,u=n.bias,h=n.depthAttractiveForceScale;a.forEach(function(c,v){if(!(!c.source||!c.target||c.source===c.target)){var x=n.nodeIdxMap[c.source],M=n.nodeIdxMap[c.target],k=n.nodeMap[c.source],R=n.nodeMap[c.target],G=Math.abs(k.depth-R.depth);k.comboId===R.comboId&&(G=G/2);var N=G?Math.pow(h,G):1;if(k.comboId!==R.comboId&&N===1?N=h/2:k.comboId===R.comboId&&(N=2),!(!(0,f.isNumber)(R.x)||!(0,f.isNumber)(k.x)||!(0,f.isNumber)(R.y)||!(0,f.isNumber)(k.y))){var ot=e[c.target+"-"+c.source],ut=ot.vl,Mt=ot.vx,zt=ot.vy,$t=(ut-o(c))/ut*s*l(c)*N,ee=Mt*$t,Ut=zt*$t,le=u[v];t[M].x-=ee*le,t[M].y-=Ut*le,t[x].x+=ee*(1-le),t[x].y+=Ut*(1-le)}}})},r}(_a),m4=y4,x4={circular:LN,concentric:IN,dagre:DN,force:m3,g6force:S3,comboForce:m4,fruchterman:E3,grid:A3,mds:a4,radial:d4,random:g4};(0,Tn.default)(x4,function(i,r){mx.registerLayout(r,{},i)});var Fs=mx,Uh=self;function b4(i){var r=i.data.type;return r===ao.RUN}function w4(i){var r=i.data.type;switch(r){case ao.RUN:{var t=i.data,e=t.nodes,n=t.edges,a=t.layoutCfg,o=a===void 0?{}:a,s=o.type,l=Fs[s];if(!l){Uh.postMessage({type:ao.ERROR,message:"layout "+s+" not found"});break}var u=new l(o);u.init({nodes:e,edges:n}),u.execute(),Uh.postMessage({type:ao.END,nodes:e}),u.destroy();break}default:break}}Uh.onmessage=function(i){b4(i)&&w4(i)};var S4=null;function yu(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?yu=function(t){return typeof t}:yu=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yu(i)}var C4=function(r){return setTimeout(r,16)},M4=function(r){return clearTimeout(r)},mu={requestAnimationFrame:function(r){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||C4;return t(r)},cancelAnimationFrame:function(r){var t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||M4;return t(r)}},E4=function(){function i(r){this.graph=r,this.layoutCfg=r.get("layout")||{},this.layoutType=this.layoutCfg.type,this.worker=null,this.workerData={},this.initLayout()}return i.prototype.initLayout=function(){},i.prototype.getWorker=function(){return this.worker?this.worker:(typeof Worker=="undefined"?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=new S4,this.worker)},i.prototype.stopWorker=function(){var r=this.workerData;!this.worker||(this.worker.terminate(),this.worker=null,r.requestId&&(mu.cancelAnimationFrame(r.requestId),r.requestId=null),r.requestId2&&(mu.cancelAnimationFrame(r.requestId2),r.requestId2=null))},i.prototype.getLayoutType=function(){return this.layoutCfg.type},i.prototype.layout=function(r){var t=this.graph;this.data=this.setDataFromGraph();var e=this.data.nodes;if(!e)return!1;var n=t.get("width"),a=t.get("height"),o={};Object.assign(o,{width:n,height:a,center:[n/2,a/2]},this.layoutCfg),this.layoutCfg=o;var s=!!this.layoutType,l=this.layoutMethod;l&&l.destroy(),t.emit("beforelayout");var u=this.initPositions(o.center,e);if(this.stopWorker(),o.workerEnabled&&this.layoutWithWorker(this.data,r))return!0;if(this.layoutType==="force"||this.layoutType==="g6force"){var h=o.onTick,c=function(){h&&h(),t.refreshPositions()};o.tick=c;var v=o.onLayoutEnd;o.onLayoutEnd=function(){v&&v(),t.emit("afterlayout")}}else this.layoutType==="comboForce"&&(o.comboTrees=t.get("comboTrees"));var x=!1;if(this.layoutType!==void 0){try{l=new Fs[this.layoutType](o)}catch(G){return console.warn("The layout method: "+this.layoutType+" does not exist! Please specify it first."),!1}if(x=l.enableTick,x){var M=o.onTick,k=o.onLayoutEnd,c=function(){M&&M(),t.refreshPositions()};l.tick=c;var R=function(){k&&k(),t.emit("afterlayout")};l.onLayoutEnd=R}l.init(this.data),s&&l.execute(),this.layoutMethod=l}return(s||!u)&&this.layoutType!=="force"&&!x&&(t.emit("afterlayout"),this.refreshLayout()),!1},i.prototype.layoutWithWorker=function(r,t){var e=this,n=r.nodes,a=r.edges,o=this,s=o.layoutCfg,l=o.graph,u=this.getWorker(),h=this.workerData;if(!u)return!1;h.requestId=null,h.requestId2=null,h.currentTick=null,h.currentTickData=null;var c=A4(s,function(v){return typeof v!="function"});return u.postMessage({type:ao.RUN,nodes:n,edges:a,layoutCfg:c}),u.onmessage=function(v){e.handleWorkerMessage(v,r,t)},!0},i.prototype.handleWorkerMessage=function(r,t,e){var n=this,a=n.graph,o=n.workerData,s=n.layoutCfg,l=r.data,u=l.type,h=function(){s.onTick&&s.onTick()},c=function(){s.onLayoutEnd&&s.onLayoutEnd(),a.emit("afterlayout")};switch(u){case ao.TICK:o.currentTick=l.currentTick,o.currentTickData=l,o.requestId||(o.requestId=mu.requestAnimationFrame(function(){Zh(t,l),a.refreshPositions(),h(),l.currentTick===1&&e&&e(),l.currentTick===l.totalTicks?c():o.currentTick===l.totalTicks&&(o.requestId2=mu.requestAnimationFrame(function(){Zh(t,o.currentTickData),a.refreshPositions(),o.requestId2=null,h(),c()})),o.requestId=null}));break;case ao.END:o.currentTick==null&&(Zh(t,l),this.refreshLayout(),e&&e(),a.emit("afterlayout"));break;case ao.ERROR:break;default:break}},i.prototype.refreshLayout=function(){var r=this.graph;r.get("animate")?r.positionsAnimate():r.refreshPositions()},i.prototype.updateLayoutCfg=function(r){var t=this,e=t.graph,n=t.layoutMethod;if(this.layoutType=r.type,!n){console.warn("You did not assign any layout type and the graph has no previous layout method!");return}this.data=this.setDataFromGraph(),this.stopWorker(),!(r.workerEnabled&&this.layoutWithWorker(this.data,null))&&(n.init(this.data),n.updateCfg(r),e.emit("beforelayout"),n.execute(),this.layoutType!=="force"&&!n.enableTick&&e.emit("afterlayout"),this.refreshLayout())},i.prototype.changeLayout=function(r){var t=this,e=t.graph,n=t.layoutMethod;this.layoutType=r,this.layoutCfg=e.get("layout")||{},this.layoutCfg.type=r,n&&n.destroy(),this.layout()},i.prototype.changeData=function(){var r=this.layoutMethod;r&&r.destroy(),this.layout()},i.prototype.destroyLayout=function(){var r=this,t=r.layoutMethod,e=r.graph;t&&t.destroy(),e.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethod=void 0},i.prototype.setDataFromGraph=function(){var r=[],t=[],e=[],n=this.graph.getNodes(),a=this.graph.getEdges(),o=this.graph.getCombos();n.forEach(function(l){if(!!l.isVisible()){var u=l.getModel();r.push(u)}}),a.forEach(function(l){if(!(l.destroyed||!l.isVisible())){var u=l.getModel();u.isComboEdge||t.push(u)}}),o.forEach(function(l){if(!(l.destroyed||!l.isVisible())){var u=l.getModel();e.push(u)}});var s={nodes:r,edges:t,combos:e};return s},i.prototype.relayout=function(r){var t=this,e=t.graph,n=t.layoutMethod,a=t.layoutCfg;if(r){this.data=this.setDataFromGraph();var o=this.data.nodes;if(!o)return!1;this.initPositions(a.center,o),n.init(this.data)}this.layoutType==="force"&&(n.ticking=!1,n.forceSimulation.stop()),e.emit("beforelayout"),n.execute(r),this.layoutType!=="force"&&!n.enableTick&&e.emit("afterlayout"),this.refreshLayout()},i.prototype.layoutAnimate=function(){},i.prototype.moveToZero=function(){var r=this.graph,t=r.get("data"),e=t.nodes;if(!(e[0].x===void 0||e[0].x===null||ro(e[0].x))){var n=[0,0];e.forEach(function(a){n[0]+=a.x,n[1]+=a.y}),n[0]/=e.length,n[1]/=e.length,e.forEach(function(a){a.x-=n[0],a.y-=n[1]})}},i.prototype.initPositions=function(r,t){var e=this.graph;if(!t)return!1;var n=!0,a=e.get("width")*.85,o=e.get("height")*.85,s=t.length,l=Math.ceil(Math.sqrt(s)*(a/o)),u=Math.ceil(s/l),h=a/(l-1),c=o/(u-1);(!isFinite(h)||!h)&&(h=0),(!isFinite(c)||!h)&&(c=0);var v=r[0]-a/2,x=r[1]-o/2;return t.forEach(function(M,k){ro(M.x)&&(n=!1,M.x=k%l*h+v),ro(M.y)&&(n=!1,M.y=Math.floor(k/l)*c+x)}),n},i.prototype.destroy=function(){var r=this.layoutMethod;this.graph=null,r&&r.destroy();var t=this.worker;t&&(t.terminate(),this.worker=null),this.destroyed=!0},i}(),_4=E4;function Zh(i,r){var t=i.nodes,e=r.nodes;t.forEach(function(n,a){n.x=e[a].x,n.y=e[a].y})}function A4(i,r){var t={};return i&&yu(i)==="object"?(Object.keys(i).forEach(function(e){i.hasOwnProperty(e)&&r(i[e])&&(t[e]=i[e])}),t):i}var Ro=null,T4=function(){function i(r){this.graph=r,this.cachedStates={enabled:{},disabled:{}},this.destroyed=!1}return i.checkCache=function(r,t,e){if(!!e[t]){var n=e[t].indexOf(r);n>=0&&e[t].splice(n,1)}},i.cacheState=function(r,t,e){e[t]||(e[t]=[]),e[t].push(r)},i.prototype.updateState=function(r,t,e){var n=this,a=i.checkCache,o=i.cacheState;if(!r.destroyed){var s=this.cachedStates,l=s.enabled,u=s.disabled;e?(a(r,t,u),o(r,t,l)):(a(r,t,l),o(r,t,u)),Ro&&clearTimeout(Ro),Ro=setTimeout(function(){Ro=null,n.updateGraphStates()},16)}},i.prototype.updateStates=function(r,t,e){var n=this;(0,Cn.default)(t)?this.updateState(r,t,e):t.forEach(function(a){n.updateState(r,a,e)})},i.prototype.updateGraphStates=function(){var r=this.graph.get("states"),t=this.cachedStates;(0,Tn.default)(t.disabled,function(e,n){r[n]&&(r[n]=r[n].filter(function(a){return e.indexOf(a)<0&&!e.destroyed}))}),(0,Tn.default)(t.enabled,function(e,n){if(!r[n])r[n]=e;else{var a={};r[n].forEach(function(o){o.destroyed||(a[o.get("id")]=!0)}),e.forEach(function(o){if(!o.destroyed){var s=o.get("id");a[s]||(a[s]=!0,r[n].push(o))}})}}),this.graph.emit("graphstatechange",{states:r}),this.cachedStates={enabled:{},disabled:{}}},i.prototype.destroy=function(){this.graph=null,this.cachedStates=null,Ro&&clearTimeout(Ro),Ro=null,this.destroyed=!0},i}(),P4=T4,Kh=null,L4=function(){function i(r){this.graph=r;var t=r.get("groupStyle");this.styles=(0,Ui.default)({},i.getDefaultCfg(),t),this.customGroup={},this.delegateInGroup={},this.nodePoint=[],this.destroyed=!1}return i.getDefaultCfg=function(){return{default:{lineWidth:1,stroke:"#A3B1BF",strokeOpacity:.9,fill:"#F3F9FF",fillOpacity:.8,opacity:.8,disCoefficient:.6,minDis:30,maxDis:30},hover:{stroke:"#faad14",fill:"#ffe58f",fillOpacity:.3,opacity:.3,lineWidth:3},collapse:{r:30,width:80,height:40,stroke:"#A3B1BF",lineWidth:3,fill:"#F3F9FF",offsetX:-15,offsetY:5},icon:"https://gw.alipayobjects.com/zos/rmsportal/MXXetJAxlqrbisIuZxDO.svg",operatorBtn:{collapse:{img:"https://gw.alipayobjects.com/zos/rmsportal/uZVdwjJGqDooqKLKtvGA.svg",width:16,height:16},expand:{width:16,height:16,img:"https://gw.alipayobjects.com/zos/rmsportal/MXXetJAxlqrbisIuZxDO.svg"}},visible:!1}},i.prototype.create=function(r,t,e,n,a,o){e===void 0&&(e="circle"),n===void 0&&(n=0),a===void 0&&(a=!1),o===void 0&&(o={});var s=this.graph,l=s.get("customGroup"),u=l.get("children").map(function(_r){return _r.get("id")});if(u.indexOf(r)>-1){console.warn("\u5DF2\u7ECF\u5B58\u5728ID\u4E3A "+r+" \u7684\u5206\u7EC4\uFF0C\u8BF7\u91CD\u65B0\u8BBE\u7F6E\u5206\u7EC4ID\uFF01");return}var h=l.addGroup({id:r,zIndex:n}),c=this.styles.default,v=this.calculationGroupPosition(t),x=v.x,M=v.y,k=v.width,R=v.height,G=v.maxX,N=this.getGroupPadding(r),ot=s.get("groupBBoxs");ot[r]={x,y:M,width:k,height:R,maxX:G};var ut=null;if(a){var Mt=s.get("groups");t.forEach(function(_r){var ir=s.findById(_r),wr=ir.getModel();wr.groupId||(wr.groupId=r)}),Mt.find(function(_r){return _r.id===r})||(Mt.push({id:r,title:o}),s.set({groups:Mt}))}var zt=s.get("groups").filter(function(_r){return _r.id===r});zt&&zt.length>0&&(ut=zt[0].title);var $t=0,ee=0,Ut=null;if(e==="circle"){var le=k>R?k/2:R/2,xe=(k+2*x)/2,ye=(R+2*M)/2,Oe=le+N;Ut=h.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},c),{x:xe,y:ye,r:Oe}),draggable:!0,capture:!0,zIndex:n,groupId:r,name:"circle-group-shape"}),$t=xe,ee=ye-Oe,this.setDeletageGroupByStyle(r,h,{width:k,height:R,x:xe,y:ye,r:Oe})}else{var Ge=N*c.disCoefficient;Ut=h.addShape("rect",{attrs:(0,V.__assign)((0,V.__assign)({},c),{x:x-Ge,y:M-Ge,width:k+Ge*2,height:R+Ge*2}),draggable:!0,capture:!0,zIndex:n,groupId:r,name:"rect-group-shape"}),$t=x-Ge+15,ee=M-Ge+15,this.setDeletageGroupByStyle(r,h,{x:x-Ge,y:M-Ge,width:k+Ge,height:R+Ge,btnOffset:G-3})}if(ut){var Ne=ut.offsetX,qe=Ne===void 0?0:Ne,tr=ut.offsetY,rr=tr===void 0?0:tr,$e=ut.text,Qe=$e===void 0?ut:$e,br=(0,V.__rest)(ut,["offsetX","offsetY","text"]),yr=h.addShape("text",{attrs:(0,V.__assign)({text:Qe,stroke:"#444",x:$t+qe,y:ee+rr},br),className:"group-title",name:"group-title-shape"});yr.set("capture",!1)}h.set("keyShape",Ut),s.get("groupNodes")[r]=t},i.prototype.setGroupStyle=function(r,t){if(!(!r||r.get("destroyed"))){var e={},n=this.styles,a=n.hover,o=n.default;(0,Cn.default)(t)?t==="default"?e=(0,Ui.default)({},o):t==="hover"&&(e=(0,Ui.default)({},a)):e=(0,Ui.default)({},o,t),Object.keys(e).forEach(function(s){r.attr(s,e[s])})}},i.prototype.calculationGroupPosition=function(r,t){if(t===void 0&&(t={x:100,y:100}),r.length===0)return{x:t.x,y:t.y,width:100,height:100};var e=this.graph,n=Infinity,a=-Infinity,o=Infinity,s=-Infinity;r.forEach(function(v){var x=(0,Cn.default)(v)?e.findById(v):v,M=x.getBBox(),k=M.minX,R=M.minY,G=M.maxX,N=M.maxY;k<n&&(n=k),R<o&&(o=R),G>a&&(a=G),N>s&&(s=N)});var l=Math.floor(n),u=Math.floor(o),h=Math.ceil(a)-l,c=Math.ceil(s)-u;return{x:l,y:u,width:h,height:c,maxX:Math.ceil(a)}},i.prototype.flatToTree=function(r,t,e){t===void 0&&(t="id"),e===void 0&&(e="parentId");var n="children",a=[],o=[];return r.forEach(function(s){a[s[t]]=s}),r.forEach(function(s){var l=a[s[e]];l?(l[n]=l[n]||[],l[n].push(s)):o.push(s)}),o},i.prototype.getGroupPadding=function(r){var t=this.graph,e=this.styles.default,n=t.get("groups"),a=n.filter(function(h){return h.parentId===r}),o=1;a.length>0&&(Kh||(Kh=this.flatToTree(n)),Ji(Kh[0],function(h){if(h.parentId===r&&h.children)return o+=h.children.length,!0}));var s=n.filter(function(h){return h.id===r&&!h.parentId});s.length>0&&(o+=1);var l=n.filter(function(h){return h.parentId===r}).length>0,u=l?e.maxDis+(o>1?o/2:1)*30:e.minDis;return u},i.prototype.setDeletageGroupByStyle=function(r,t,e){var n=e.width,a=e.height,o=e.x,s=e.y,l=e.r,u=e.btnOffset,h=this.customGroup[r];if(!h)this.customGroup[r]={nodeGroup:t,groupStyle:{width:n,height:a,x:o,y:s,r:l,btnOffset:u}};else{var c=h.groupStyle,v=(0,Ui.default)({},c,e);this.customGroup[r]={nodeGroup:t,groupStyle:v}}},i.prototype.getDeletageGroupById=function(r){return this.customGroup[r]},i.prototype.collapseExpandGroup=function(r){var t=this.getDeletageGroupById(r),e=t.nodeGroup,n=e.get("hasHidden");n?(e.set("hasHidden",!1),this.expandGroup(r)):(e.set("hasHidden",!0),this.collapseGroup(r))},i.prototype.setGroupTmpNode=function(r,t){var e=this.graph,n=e.get("groupNodes"),a=e.get("groups");n[r].indexOf(t)<0&&n[r].push(t);var o=a.filter(function(l){return l.id===r}),s=null;o.length>0&&(s=o[0].parentId),s&&this.setGroupTmpNode(s,t)},i.prototype.collapseGroup=function(r){var t=this,e=this.getDeletageGroupById(r),n=e.nodeGroup,a=this.styles.collapse,o=this.graph,s=o.get("groupType"),l=o.get("groupNodes")[r],u=n.get("keyShape"),h=a.r,c=a.width,v=a.height,x=a.offsetX,M=a.offsetY,k=(0,V.__rest)(a,["r","width","height","offsetX","offsetY"]);Object.keys(k).forEach(function($t){u.attr($t,k[$t])});var R={groupId:r,id:r+"-custom-node",x:u.attr("x"),y:u.attr("y"),style:{r:h},type:"circle"},G=n.find(function($t){return $t.get("className")==="group-title"});s==="circle"?(u.animate({r:h},{duration:500,easing:"easeCubic"}),G&&G.attr({x:u.attr("x")+x,y:u.attr("y")+M})):s==="rect"&&(u.animate({width:c,height:v},{duration:500,easing:"easeCubic"}),G&&G.attr({x:u.attr("x")+10,y:u.attr("y")+v/2+5}),R={groupId:r,id:r+"-custom-node",x:u.attr("x")+c/2,y:u.attr("y")+v/2,size:[c,v],type:"rect"});var N=o.getEdges(),ot=N.filter(function($t){var ee=$t.getModel();return!l.includes(ee.source)&&l.includes(ee.target)}),ut=N.filter(function($t){var ee=$t.getModel();return l.includes(ee.source)&&!l.includes(ee.target)}),Mt=N.filter(function($t){var ee=$t.getModel();return l.includes(ee.source)&&l.includes(ee.target)});if(l.forEach(function($t){var ee=o.findById($t),Ut=ee.getModel(),le=Ut.groupId;if(le&&le!==r){var xe=t.getDeletageGroupById(le),ye=xe.nodeGroup;ye.hide()}ee.hide()}),Mt.forEach(function($t){var ee=$t.getSource(),Ut=$t.getTarget();ee.isVisible()&&Ut.isVisible()?$t.show():$t.hide()}),ot.length>0||ut.length>0){var zt=o.add("node",R);zt.set("capture",!1),zt.hide(),this.delegateInGroup[r]={delegateNode:zt},this.setGroupTmpNode(r,r+"-custom-node"),this.updateEdgeInGroupLinks(r,ot,ut)}},i.prototype.updateEdgeInGroupLinks=function(r,t,e){var n=this.graph,a={};t.map(function(s){var l=s.getModel(),u=s.get("id"),h=l.target;return a[u]=h,n.updateItem(s,{target:r+"-custom-node"}),!0});var o={};e.map(function(s){var l=s.getModel(),u=s.get("id"),h=l.source;return o[u]=h,n.updateItem(s,{source:r+"-custom-node"}),!0}),this.delegateInGroup[r]=(0,Ui.default)({sourceOutTargetInEdges:t,sourceInTargetOutEdges:e,edgesOuts:a,edgesIn:o},this.delegateInGroup[r])},i.prototype.expandGroup=function(r){var t=this,e=this.graph,n=e.get("groupType"),a=e.get("groupNodes")[r],o=a.filter(function(tr){return tr.indexOf("custom-node")===-1}),s=this.calculationGroupPosition(o),l=s.width,u=s.height,h=this.getDeletageGroupById(r).nodeGroup,c=h.get("keyShape"),v=this.styles,x=v.default,M=v.collapse;Object.keys(x).forEach(function(tr){c.attr(tr,x[tr])});var k=h.find(function(tr){return tr.get("className")==="group-title"}),R=this.getGroupPadding(r);if(n==="circle"){var G=l>u?l/2:u/2;c.animate({r:G+R},{duration:500,easing:"easeCubic"})}else if(n==="rect"){var N=M.width,ot=M.height;c.animate({width:N+l+R*x.disCoefficient*2,height:ot+u+R*x.disCoefficient*2},{duration:500,easing:"easeCubic"})}if(k){var ut=null,Mt=e.get("groups").filter(function(tr){return tr.id===r});Mt&&Mt.length>0&&(ut=Mt[0].title);var zt=ut.offsetX,$t=zt===void 0?0:zt,ee=ut.offsetY,Ut=ee===void 0?0:ee;n==="circle"?k.animate({x:c.attr("x")+$t,y:c.attr("y")-c.attr("r")+Ut},{duration:600,easing:"easeCubic"}):n==="rect"&&k.animate({x:c.attr("x")+(15+$t),y:c.attr("y")+(15+Ut)},{duration:600,easing:"easeCubic"})}setTimeout(function(){a.forEach(function($e){var Qe=e.findById($e),br=Qe.getModel(),yr=br.groupId;if(yr&&yr!==r){var _r=t.getDeletageGroupById(yr),ir=_r.nodeGroup;ir.show();var wr=ir.get("hasHidden");wr||Qe.show()}else Qe.show()});var tr=e.getEdges(),rr=tr.filter(function($e){var Qe=$e.getModel();return a.includes(Qe.source)||a.includes(Qe.target)});rr.forEach(function($e){var Qe=$e.getSource(),br=$e.getTarget();Qe.isVisible()&&br.isVisible()&&$e.show()})},300);var le=this.delegateInGroup[r];if(le){var xe=le.sourceOutTargetInEdges,ye=le.sourceInTargetOutEdges,Oe=le.edgesOuts,Ge=le.edgesIn,Ne=le.delegateNode;xe.map(function(tr){var rr=tr.get("id"),$e=Oe[rr];return e.updateItem(tr,{target:$e}),!0}),ye.map(function(tr){var rr=tr.get("id"),$e=Ge[rr];return e.updateItem(tr,{source:$e}),!0});var qe=Ne.getModel();this.deleteTmpNode(r,qe.id),e.remove(Ne),delete this.delegateInGroup[r]}},i.prototype.deleteTmpNode=function(r,t){var e=this.graph,n=e.get("groups"),a=e.get("groupNodes")[r],o=a.indexOf(t);a.splice(o,1);var s=n.filter(function(u){return u.id===r}),l=null;s.length>0&&(l=s[0].parentId),l&&this.deleteTmpNode(l,t)},i.prototype.remove=function(r){var t=this.graph,e=this.getDeletageGroupById(r);if(!!e){var n=e.nodeGroup,a=t.get("groupNodes"),o=a[r];o.forEach(function(x){var M=t.findById(x),k=M.getModel(),R=k.groupId;!R||r===R&&(delete k.groupId,t.updateItem(M,k))}),n.destroy(),delete this.customGroup[r];var s=t.get("groups");if(s.length>0){var l=s.filter(function(x){return x.id!==r});t.set("groups",l)}for(var u=null,h=null,c=0;c<s.length;c++){var v=s[c];if(r===v.id){u=v.parentId,h=v;break}}h&&delete h.parentId,delete a[r],u&&(a[u]=a[u].filter(function(x){return!o.includes(x)}))}},i.prototype.updateGroup=function(r,t,e){var n=this.graph,a=n.get("groupType");this.updateItemInGroup(r,t,e);for(var o=n.save().groups,s=null,l=null,u=0;u<o.length;u++){var h=o[u];if(r===h.id){s=h.parentId,l=h;break}}if(s){var c=this.getDeletageGroupById(s).nodeGroup,v=c.get("keyShape");this.setGroupStyle(v,"default");var x=v.getBBox(),M=x.minX,k=x.minY,R=x.maxX,G=x.maxY,N=this.getDeletageGroupById(r).nodeGroup,ot=N.get("keyShape"),ut=ot.getBBox(),Mt=ut.x,zt=ut.y;if(!(Mt<R&&Mt>M&&zt<G&&zt>k)){delete l.parentId;var $t=n.get("groupNodes"),ee=$t[r],Ut=$t[s];$t[s]=Ut.filter(function(Er){return ee.indexOf(Er)===-1});var le=this.calculationGroupPosition($t[s]),xe=le.x,ye=le.y,Oe=le.width,Ge=le.height,Ne=this.getGroupPadding(s),qe=c.find(function(Er){return Er.get("className")==="group-title"}),tr=0,rr=0;if(a==="circle"){var $e=Oe>Ge?Oe/2:Ge/2,Qe=xe,br=ye;v.attr({r:$e+Ne,x:Qe,y:br}),tr=Qe,rr=br-v.attr("r")}else if(a==="rect"){var yr=this.styles.default,_r=Ne*yr.disCoefficient;v.attr({x:xe-_r,y:ye-_r}),tr=xe-_r+15,rr=ye-_r+15}if(qe){var ir=l.title,wr=0,Dr=0;ir&&(wr=ir.offsetX,Dr=ir.offsetY),qe.attr({x:tr+wr,y:rr+Dr})}}}},i.prototype.updateItemInGroup=function(r,t,e){var n=this,a=this.graph,o=a.get("groupType"),s=a.get("groupNodes"),l=s[r],u=this.getDeletageGroupById(r).nodeGroup,h=u.getBBox(),c=[];l.forEach(function(v,x){var M=a.findById(v),k=M.getModel(),R=k.groupId;R&&!c.includes(R)&&c.push(R),n.nodePoint[x]||(n.nodePoint[x]={x:k.x,y:k.y});var G=t.x-h.x+n.nodePoint[x].x,N=t.y-h.y+n.nodePoint[x].y;n.nodePoint[x]={x:G,y:N},a.updateItem(M,{x:G,y:N})}),c.includes(r)||c.push(r),c.forEach(function(v){var x=n.getDeletageGroupById(v).nodeGroup,M=x.get("keyShape"),k=s[v].filter(function(Ge){return Ge.indexOf("custom-node")===-1}),R=n.calculationGroupPosition(k,t),G=R.x,N=R.y,ot=R.width,ut=R.height,Mt=0,zt=0;if(o==="circle"){var $t=(ot+2*G)/2,ee=(ut+2*N)/2;M.attr({x:$t,y:ee}),Mt=$t,zt=ee-M.attr("r")}else if(o==="rect"){var Ut=x.get("hasHidden"),le=n.getGroupPadding(v),xe={},ye=n.styles.default,Oe=le*ye.disCoefficient;Mt=G-Oe+15,zt=N-Oe+15,Ut?(xe={x:G-Oe,y:N-Oe},zt=zt+10):xe={x:G-Oe,y:N-Oe,width:ot+Oe*2,height:ut+Oe*2},M.attr(xe)}n.updateGroupTitle(x,v,Mt,zt)})},i.prototype.updateGroupTitle=function(r,t,e,n){var a=this.graph,o=r.find(function(c){return c.get("className")==="group-title"});if(o){var s=null,l=a.get("groups").filter(function(c){return c.id===t});l&&l.length>0&&(s=l[0].title);var u=0,h=0;s&&(u=s.offsetX||0,h=s.offsetY||0),o.attr({x:e+u,y:n+h})}},i.prototype.dynamicChangeGroupSize=function(r,t,e){var n=r.item,a=n.getModel(),o=a.groupId,s=this.graph,l=s.get("groupType"),u=s.get("groupNodes"),h=u[o];if(h.length===0){delete u[o];var c=s.get("groups");s.set("groups",c.filter(function(Ut){return Ut.id!==o})),t.remove()}else{var v=this.calculationGroupPosition(h),x=v.x,M=v.y,k=v.width,R=v.height,G=this.getGroupPadding(o),N=0,ot=0;if(l==="circle"){var ut=k>R?k/2:R/2,Mt=(k+2*x)/2,zt=(R+2*M)/2;e.attr({r:ut+G,x:Mt,y:zt}),N=Mt,ot=zt-e.attr("r")}else if(l==="rect"){var $t=this.styles.default,ee=G*$t.disCoefficient;e.attr({x:x-ee,y:M-ee,width:k+ee*2,height:R+ee*2}),N=x-ee+15,ot=M-ee+15}this.updateGroupTitle(t,o,N,ot)}this.setGroupStyle(e,"default")},i.prototype.resetNodePoint=function(){this.nodePoint.length=0},i.prototype.destroy=function(){this.graph=null,this.styles={},this.customGroup={},this.delegateInGroup={},this.resetNodePoint(),this.destroyed=!0},i}(),O4=L4,I4=function(r){var t={};return r.getNodes().forEach(function(e){t[e.getID()]={degree:0,inDegree:0,outDegree:0}}),r.getEdges().forEach(function(e){t[e.getSource().getID()].degree++,t[e.getSource().getID()].outDegree++,t[e.getTarget().getID()].degree++,t[e.getTarget().getID()].inDegree++}),t},Gx=I4,k4=function(){function i(r){this.compare=r||i.defaultCompareFunction}return i.defaultCompareFunction=function(r,t){return r===t?0:r<t?-1:1},i.prototype.equal=function(r,t){return this.compare(r,t)===0},i.prototype.lessThan=function(r,t){return this.compare(r,t)<0},i.prototype.greaterThan=function(r,t){return this.compare(r,t)>0},i.prototype.lessThanOrEqual=function(r,t){return this.lessThan(r,t)||this.equal(r,t)},i.prototype.greaterThanOrEqual=function(r,t){return this.greaterThan(r,t)||this.equal(r,t)},i.prototype.reverse=function(){var r=this.compare;this.compare=function(t,e){return r(e,t)}},i}(),B4=k4,Yx=function(){function i(r,t){t===void 0&&(t=null),this.value=r,this.next=t}return i.prototype.toString=function(r){return r?r(this.value):""+this.value},i}(),D4=function(){function i(r){r===void 0&&(r=null),this.head=null,this.tail=null,this.compare=new B4(r)}return i.prototype.prepend=function(r){var t=new Yx(r,this.head);return this.head=t,this.tail||(this.tail=t),this},i.prototype.append=function(r){var t=new Yx(r);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},i.prototype.delete=function(r){if(!this.head)return null;for(var t=null;this.head&&this.compare.equal(this.head.value,r);)t=this.head,this.head=this.head.next;var e=this.head;if(e!==null)for(;e.next;)this.compare.equal(e.next.value,r)?(t=e.next,e.next=e.next.next):e=e.next;return this.compare.equal(this.tail.value,r)&&(this.tail=e),t},i.prototype.find=function(r){var t=r.value,e=t===void 0?void 0:t,n=r.callback,a=n===void 0?void 0:n;if(!this.head)return null;for(var o=this.head;o;){if(a&&a(o.value)||e!==void 0&&this.compare.equal(o.value,e))return o;o=o.next}return null},i.prototype.deleteTail=function(){var r=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,r;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,r},i.prototype.deleteHead=function(){if(!this.head)return null;var r=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),r},i.prototype.fromArray=function(r){var t=this;return r.forEach(function(e){return t.append(e)}),this},i.prototype.toArray=function(){for(var r=[],t=this.head;t;)r.push(t),t=t.next;return r},i.prototype.reverse=function(){for(var r=this.head,t=null,e=null;r;)e=r.next,r.next=t,t=r,r=e;this.tail=this.head,this.head=t},i.prototype.toString=function(r){return r===void 0&&(r=void 0),this.toArray().map(function(t){return t.toString(r)}).toString()},i}(),zx=D4,F4=function(){function i(r){r===void 0&&(r=10),this.linkedList=new zx,this.maxStep=r}return Object.defineProperty(i.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),i.prototype.isEmpty=function(){return!this.linkedList.head},i.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},i.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},i.prototype.push=function(r){this.linkedList.prepend(r),this.length>this.maxStep&&this.linkedList.deleteTail()},i.prototype.pop=function(){var r=this.linkedList.deleteHead();return r?r.value:null},i.prototype.toArray=function(){return this.linkedList.toArray().map(function(r){return r.value})},i.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},i}(),Xx=F4,R4=function(r,t){var e=r.getNodes(),n=r.getEdges(),a=[],o={};if(!e)throw new Error("invalid nodes data!");return e&&e.forEach(function(s,l){o[s.getID()]=l;var u=[];a.push(u)}),n&&n.forEach(function(s){var l=s.getModel(),u=l.source,h=l.target,c=o[u],v=o[h];a[c][v]=1,t||(a[v][c]=1)}),a},xu=R4,N4=function(r,t){var e=r.get("adjMatrix");e||(e=xu(r,t));for(var n=[],a=e.length,o=0;o<a;o+=1){n[o]=[];for(var s=0;s<a;s+=1)o===s?n[o][s]=0:e[o][s]===0||!e[o][s]?n[o][s]=Infinity:n[o][s]=e[o][s]}for(var l=0;l<a;l+=1)for(var o=0;o<a;o+=1)for(var s=0;s<a;s+=1)n[o][s]>n[o][l]+n[l][s]&&(n[o][s]=n[o][l]+n[l][s]);return n},Vx=N4,Hx=function(r,t,e){return(r.y-e.y)*(t.x-e.x)-(r.x-e.x)*(t.y-e.y)},Wx=function(r){var t=r.map(function(s){return{x:s.getModel().x,y:s.getModel().y}});t.sort(function(s,l){return s.x===l.x?s.y-l.y:s.x-l.x});for(var e=[],n=0;n<t.length;n++){for(;e.length>=2&&Hx(e[e.length-2],e[e.length-1],t[n])<=0;)e.pop();e.push(t[n])}for(var a=[],n=t.length-1;n>=0;n--){for(;a.length>=2&&Hx(a[a.length-2],a[a.length-1],t[n])<=0;)a.pop();a.push(t[n])}a.pop(),e.pop();var o=e.concat(a);return o},G4={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function Y4(i,r,t){var e=!1,n=function(l,u){return r.cells[l+u*r.width]},a=function(l,u){var h=0;return n(l-1,u-1)>=t&&(h+=1),n(l,u-1)>t&&(h+=2),n(l-1,u)>t&&(h+=4),n(l,u)>t&&(h+=8),h},o=function(l,u){for(var h=l,c=u,v,x,M=0;M<r.width*r.height;M++){if(v=h,x=c,i.findIndex(function(R){return R.x===h&&R.y===c})>-1){if(!(i[0].x!==h||i[0].y!==c))return!0}else i.push({x:h,y:c});var k=a(h,c);switch(k){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:h++;break;case 12:case 14:case 4:h--;break;case 6:v===0&&(x===-1?h-=1:h+=1);break;case 1:case 13:case 5:c--;break;case 9:v===1&&(x===0?c-=1:c+=1);break;case 10:case 8:case 11:c++;break;default:return console.warn("Marching squares invalid state: "+k),!0}}};this.march=function(){for(var s=0;s<r.width&&!e;s+=1)for(var l=0;l<r.height&&!e;l+=1)n(s,l)>t&&a(s,l)!==15&&(e=o(s,l));return e}}var z4=function(r,t,e){var n=Math.ceil(r/e),a=Math.ceil(t/e),o=new Float32Array(Math.max(0,n*a)).fill(0);return{cells:o,width:n,height:a}},X4=function(r,t,e){var n=null,a=Number.POSITIVE_INFINITY;return t.forEach(function(o){var s={x:r.getModel().x,y:r.getModel().y},l={x:o.getModel().x,y:o.getModel().y},u=Jl(s,l),h=new Do(s.x,s.y,l.x,l.y),c=e.reduce(function(v,x){return Oh(x,h)>0?v+1:v},0);u*Math.pow(c+1,2)<a&&(n=o,a=u*Math.pow(c+1,2))}),n},jx=function(r,t){var e=Number.POSITIVE_INFINITY,n=null;return r.forEach(function(a){var o=Oh(a,t);o>=0&&o<e&&(n=a,e=o)}),n},V4=function(r,t,e,n){var a=[],o=[];o.push(r);for(var s=!0,l=0,u=function(x,M){var k=!1;return M.forEach(function(R){k||(Ih(x,{x:R.x1,y:R.y1})||Ih(x,{x:R.x2,y:R.y2}))&&(k=!0)}),k},h=function(x,M){for(var k=0,R=M;k<R.length;k++){var G=R[k],N=G.getBBox(),ot=[[N.x,N.y],[N.x+N.width,N.y],[N.x,N.y+N.height],[N.x+N.width,N.y+N.height]];if(Is(ot,x.x,x.y))return!0}return!1};s&&l<e;){s=!1;for(var c=function(){var x=o.pop(),M=jx(t,x);if(M){var k=Dm(M,x),R=k[0],G=k[1];if(G===2){var N=function(ut){for(var Mt=n,zt=Ux(M,Mt,R,ut),$t=u(zt,o)||u(zt,a),ee=h(zt,t);!$t&&ee&&Mt>=1;)Mt/=1.5,zt=Ux(M,Mt,R,ut),$t=u(zt,o)||u(zt,a),ee=h(zt,t);zt&&!$t&&(!ut||!ee)&&(o.push(new Do(x.x1,x.y1,zt.x,zt.y)),o.push(new Do(zt.x,zt.y,x.x2,x.y2)),s=!0)};N(!0),s||N(!1)}}s||a.push(x),l+=1};!s&&o.length;)c()}for(;o.length;)a.push(o.pop());return a};function H4(i,r,t,e,n){var a=X4(i,t,r);if(a===null)return[];var o=function(c){for(var v=[];c.length>0;){var x=c.pop();if(c.length===0){v.push(x);break}var M=c.pop(),k=new Do(x.x1,x.y1,M.x2,M.y2),R=jx(r,k);R?(v.push(x),c.push(M)):c.push(k)}return v},s=new Do(i.getModel().x,i.getModel().y,a.getModel().x,a.getModel().y),l=V4(s,r,e,n),u=o(l);return u}var W4=function(r,t,e){var n=Object.assign(G4,e),a=Fm(r.map(function(N){return{x:N.getModel().x,y:N.getModel().y}}));r=r.sort(function(N,ot){return Jl({x:N.getModel().x,y:N.getModel().y},a)-Jl({x:ot.getModel().x,y:ot.getModel().y},a)});var o=[],s=[];r.forEach(function(N){var ot=H4(N,t,o,n.maxRoutingIterations,n.morphBuffer);ot.forEach(function(ut){s.push(ut)}),o.push(N)});for(var l=j4(r,s,n.nodeR0),u=z4(l.width,l.height,n.pixelGroupSize),h=[],c=[],v=0;v<n.maxMarchingIterations;v++)if(U4(r,t,s,l,u,n),h=[],c=[],!!new Y4(h,u,n.threshold).march()){var x=h.map(function(N){return{x:Math.round(N.x*n.pixelGroupSize+l.minX),y:Math.round(N.y*n.pixelGroupSize+l.minY)}});if(x){var M=x.length;if(n.skip>1)for(M=Math.floor(x.length/n.skip);M<3&&n.skip>1;)n.skip-=1,M=Math.floor(x.length/n.skip);for(var k=0,R=0;R<M;R+=1,k+=n.skip)c.push({x:x[k].x,y:x[k].y})}var G=function(){for(var ot=0,ut=r;ot<ut.length;ot++){var Mt=ut[ot],zt=c.map(function($t){return[$t.x,$t.y]});if(!Is(zt,Mt.getBBox().centerX,Mt.getBBox().centerY))return!1}return!0};if(c&&G())return c;if(n.threshold*=.9,v<=n.maxMarchingIterations*.5)n.memberInfluenceFactor*=1.2,n.edgeInfluenceFactor*=1.2;else if(n.nonMemberInfluenceFactor!==0&&t.length>0)n.nonMemberInfluenceFactor*=.8;else break}return c};function j4(i,r,t){var e={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},n=[];i.forEach(function(l){n.push(l.getBBox())}),r.forEach(function(l){n.push(l.getBBox())});for(var a=0,o=n;a<o.length;a++){var s=o[a];e.minX=(s.minX<e.minX?s.minX:e.minX)-t,e.minY=(s.minY<e.minY?s.minY:e.minY)-t,e.maxX=(s.maxX>e.maxX?s.maxX:e.maxX)+t,e.maxY=(s.maxY>e.maxY?s.maxY:e.maxY)+t}return e.width=e.maxX-e.minX,e.height=e.maxY-e.minY,e.x=e.minX,e.y=e.minY,e}function U4(i,r,t,e,n,a){function o(x,M){var k=Math.floor((x-M)/a.pixelGroupSize);return k<0?0:k}function s(x,M){return x*a.pixelGroupSize+M}var l=(a.nodeR0-a.nodeR1)*(a.nodeR0-a.nodeR1),u=(a.edgeR0-a.edgeR1)*(a.edgeR0-a.edgeR1),h=function(M,k){var R=Math.min(o(M.minX,k+e.minX),n.width),G=Math.min(o(M.minY,k+e.minY),n.height),N=Math.min(o(M.maxX,-k+e.minX),n.width),ot=Math.min(o(M.maxY,-k+e.minY),n.height);return[R,G,N,ot]},c=function(M,k){for(var R=M.getBBox(),G=h(R,a.nodeR1),N=G[0],ot=G[1],ut=G[2],Mt=G[3],zt=ot;zt<Mt;zt+=1)for(var $t=N;$t<ut;$t+=1)if(!(k<0&&n[$t+zt*n.width]<=0)){var ee=s($t,e.minX),Ut=s(zt,e.minY),le=Nm({x:ee,y:Ut},{x:R.minX,y:R.minY,width:R.width,height:R.height});if(le<Math.pow(a.nodeR1,2)){var xe=Math.sqrt(le)-a.nodeR1;n.cells[$t+zt*n.width]+=k*xe*xe}}},v=function(M,k){for(var R=M.getBBox(),G=h(R,a.edgeR1),N=G[0],ot=G[1],ut=G[2],Mt=G[3],zt=ot;zt<Mt;zt+=1)for(var $t=N;$t<ut;$t+=1)if(!(k<0&&n.cells[$t+zt*n.width]<=0)){var ee=s($t,e.minX),Ut=s(zt,e.minY),le=Rm({x:ee,y:Ut},M);if(le<Math.pow(a.edgeR1,2)){var xe=Math.sqrt(le)-a.edgeR1;n.cells[$t+zt*n.width]+=k*xe*xe}}};a.nodeInfluenceFactor&&i.forEach(function(x){c(x,a.nodeInfluenceFactor/l)}),a.edgeInfluenceFactor&&t.forEach(function(x){v(x,a.edgeInfluenceFactor/u)}),a.negativeNodeInfluenceFactor&&r.forEach(function(x){c(x,a.negativeNodeInfluenceFactor/l)})}function Ux(i,r,t,e){var n=i.getBBox(),a=t[0],o=t[1],s=t[2],l=t[3],u={topLeft:{x:n.minX-r,y:n.minY-r},topRight:{x:n.maxX+r,y:n.minY-r},bottomLeft:{x:n.minX-r,y:n.maxY+r},bottomRight:{x:n.maxX+r,y:n.maxY+r}},h=n.height*n.width;function c(M,k){return n.width*((M.y-n.minY+(k.y-n.minY))*.5)}if(o){if(a)return e?u.topLeft:u.bottomRight;if(s)return e?u.bottomLeft:u.topRight;var v=c(o,l);return v<h*.5?o.y>l.y?e?u.topLeft:u.bottomRight:e?u.topRight:u.bottomLeft:o.y<l.y?e?u.bottomLeft:u.topRight:e?u.bottomRight:u.topLeft}if(l){if(a)return e?u.topRight:u.bottomLeft;if(s)return e?u.bottomRight:u.topLeft}var x=c(a,s);return x<h*.5?a.x>s.x?e?u.topLeft:u.bottomRight:e?u.bottomLeft:u.topRight:a.x<s.x?e?u.topRight:u.bottomLeft:e?u.bottomRight:u.topLeft}var Z4=function(){function i(r,t){this.cfg=(0,f.deepMix)(this.getDefaultCfg(),t),this.graph=r,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(e){return(0,f.isString)(e)?r.findById(e):e}),this.nonMembers=this.cfg.nonMembers.map(function(e){return(0,f.isString)(e)?r.findById(e):e}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return i.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},i.prototype.setPadding=function(){var r=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+r:10+r,this.cfg.bubbleCfg={nodeR0:this.padding-r,nodeR1:this.padding-r,morphBuffer:this.padding-r}},i.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},i.prototype.calcPath=function(r,t){var e,n,a;switch(this.type){case"round-convex":e=Wx(r),a=Hm(e.map(function(o){return[o.x,o.y]}),this.padding),n=(0,Us.parsePathString)(a);break;case"smooth-convex":e=Wx(r),a=Wm(e.map(function(o){return[o.x,o.y]}),this.padding),n=e.length>=2&&kh(a);break;case"bubble":e=W4(r,t,this.cfg.bubbleCfg),n=e.length>=2&&kh(e);break;default:}return n},i.prototype.render=function(){this.group.addShape("path",{attrs:(0,V.__assign)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id}),this.group.toBack()},i.prototype.addMember=function(r){if(!!r){(0,f.isString)(r)&&(r=this.graph.findById(r)),this.members.push(r);var t=this.nonMembers.indexOf(r);return t>-1&&this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},i.prototype.addNonMember=function(r){if(!!r){(0,f.isString)(r)&&(r=this.graph.findById(r)),this.nonMembers.push(r);var t=this.members.indexOf(r);return t>-1&&this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},i.prototype.removeMember=function(r){if(!!r){(0,f.isString)(r)&&(r=this.graph.findById(r));var t=this.members.indexOf(r);return t>-1?(this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},i.prototype.removeNonMember=function(r){if(!!r){(0,f.isString)(r)&&(r=this.graph.findById(r));var t=this.nonMembers.indexOf(r);return t>-1?(this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},i.prototype.updateData=function(r,t){var e=this;this.group.findById(this.id).remove(),r&&(this.members=r.map(function(n){return(0,f.isString)(n)?e.graph.findById(n):n})),t&&(this.nonMembers=t.map(function(n){return(0,f.isString)(n)?e.graph.findById(n):n})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},i.prototype.updateStyle=function(r){var t=this.group.findById(this.id);t.attr((0,V.__assign)({},r))},i.prototype.updateCfg=function(r){var t=this;this.cfg=(0,f.deepMix)(this.cfg,r),this.id=this.cfg.id,this.group=this.cfg.group,r.members&&(this.members=this.cfg.members.map(function(e){return(0,f.isString)(e)?t.graph.findById(e):e})),r.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(e){return(0,f.isString)(e)?t.graph.findById(e):e})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},i.prototype.contain=function(r){var t=this,e;(0,f.isString)(r)?e=this.graph.findById(r):e=r;var n,a=e.getKeyShape();if(e.get("type")==="path")n=tu(a.attr("path"));else{var o=a.getCanvasBBox();n=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return n=n.map(function(s){var l=t.graph.getPointByCanvas(s[0],s[1]);return[l.x,l.y]}),Ph(n,tu(this.path))},i.prototype.destroy=function(){this.group.remove(),this.cfg=null},i}(),K4=Z4,$4="node",Q4="svg",J4=function(i){(0,V.__extends)(r,i);function r(t){var e=i.call(this)||this;return e.cfg=(0,f.deepMix)(e.getDefaultCfg(),t),e.init(),e.animating=!1,e.destroyed=!1,e.cfg.enabledStack&&(e.undoStack=new Xx(e.cfg.maxStep),e.redoStack=new Xx(e.cfg.maxStep)),e}return r.prototype.init=function(){this.initCanvas();var t=new nN(this),e=new eN(this),n=new qR(this),a=new EN(this),o=new _4(this),s=new P4(this),l=new O4(this);this.set({eventController:t,viewController:e,modeController:n,itemController:a,layoutController:o,stateController:s,customGroupControll:l}),this.initPlugin()},r.prototype.initCanvas=function(){var t=this.get("container");if((0,f.isString)(t)&&(t=document.getElementById(t),this.set("container",t)),!t)throw new Error("invalid container");var e=this.get("width"),n=this.get("height"),a=this.get("renderer"),o;if(a===Q4)o=new ks.Z({container:t,width:e,height:n});else{var s={container:t,width:e,height:n},l=this.get("pixelRatio");l&&(s.pixelRatio=l),o=new Fo.Z(s)}this.set("canvas",o),this.initGroups()},r.prototype.initPlugin=function(){var t=this;(0,f.each)(t.get("plugins"),function(e){!e.destroyed&&e.initPlugin&&e.initPlugin(t)})},r.prototype.initGroups=function(){var t=this.get("canvas"),e=this.get("canvas").get("el"),n=e.id,a=t.addGroup({id:n+"-root",className:Ke.rootContainerClassName});if(this.get("groupByTypes")){var o=a.addGroup({id:n+"-edge",className:Ke.edgeContainerClassName}),s=a.addGroup({id:n+"-node",className:Ke.nodeContainerClassName}),l=a.addGroup({id:n+"-combo",className:Ke.comboContainerClassName}),u=a.addGroup({id:n+"-group",className:Ke.customGroupContainerClassName});u.toBack(),l.toBack(),this.set({nodeGroup:s,edgeGroup:o,customGroup:u,comboGroup:l})}var h=a.addGroup({id:n+"-delegate",className:Ke.delegateContainerClassName});this.set({delegateGroup:h}),this.set("group",a)},r.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.2,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,groupType:"circle",groupBBoxs:{},groupNodes:{},groups:[],groupStyle:{},enabledStack:!1,maxStep:10,tooltips:[]}},r.prototype.set=function(t,e){return(0,f.isPlainObject)(t)?this.cfg=(0,V.__assign)((0,V.__assign)({},this.cfg),t):this.cfg[t]=e,this},r.prototype.get=function(t){return this.cfg[t]},r.prototype.getGroup=function(){return this.get("group")},r.prototype.getContainer=function(){return this.get("container")},r.prototype.getMinZoom=function(){return this.get("minZoom")},r.prototype.setMinZoom=function(t){return this.set("minZoom",t)},r.prototype.getMaxZoom=function(){return this.get("maxZoom")},r.prototype.setMaxZoom=function(t){return this.set("maxZoom",t)},r.prototype.getWidth=function(){return this.get("width")},r.prototype.getHeight=function(){return this.get("height")},r.prototype.clearItemStates=function(t,e){(0,f.isString)(t)&&(t=this.findById(t));var n=this.get("itemController");e||(e=t.get("states")),n.clearItemStates(t,e);var a=this.get("stateController");a.updateStates(t,e,!1)},r.prototype.node=function(t){typeof t=="function"&&this.set("nodeMapper",t)},r.prototype.edge=function(t){typeof t=="function"&&this.set("edgeMapper",t)},r.prototype.combo=function(t){typeof t=="function"&&this.set("comboMapper",t)},r.prototype.findById=function(t){return this.get("itemMap")[t]},r.prototype.find=function(t,e){var n,a=this.get(t+"s");return(0,f.each)(a,function(o,s){if(e(o,s))return n=o,n}),n},r.prototype.findAll=function(t,e){var n=[];return(0,f.each)(this.get(t+"s"),function(a,o){e(a,o)&&n.push(a)}),n},r.prototype.findAllByState=function(t,e){return this.findAll(t,function(n){return n.hasState(e)})},r.prototype.translate=function(t,e){var n=this.get("group"),a=(0,f.clone)(n.getMatrix());a||(a=[1,0,0,0,1,0,0,0,1]),Oa.wO.translate(a,a,[t,e]),n.setMatrix(a),this.emit("viewportchange",{action:"translate",matrix:n.getMatrix()}),this.autoPaint()},r.prototype.moveTo=function(t,e){var n=this.get("group");km(n,{x:t,y:e}),this.emit("viewportchange",{action:"move",matrix:n.getMatrix()})},r.prototype.fitView=function(t){t&&this.set("fitViewPadding",t);var e=this.get("viewController");e.fitView(),this.autoPaint()},r.prototype.fitCenter=function(){var t=this.get("viewController");t.fitCenter(),this.autoPaint()},r.prototype.addBehaviors=function(t,e){var n=this.get("modeController");return n.manipulateBehaviors(t,e,!0),this},r.prototype.removeBehaviors=function(t,e){var n=this.get("modeController");return n.manipulateBehaviors(t,e,!1),this},r.prototype.zoom=function(t,e){var n=this.get("group"),a=(0,f.clone)(n.getMatrix()),o=this.get("minZoom"),s=this.get("maxZoom");a||(a=[1,0,0,0,1,0,0,0,1]),e?(Oa.wO.translate(a,a,[-e.x,-e.y]),Oa.wO.scale(a,a,[t,t]),Oa.wO.translate(a,a,[e.x,e.y])):Oa.wO.scale(a,a,[t,t]),!(o&&a[0]<o||s&&a[0]>s)&&(n.setMatrix(a),this.emit("viewportchange",{action:"zoom",matrix:a}),this.autoPaint())},r.prototype.zoomTo=function(t,e){var n=t/this.getZoom();this.zoom(n,e)},r.prototype.focusItem=function(t,e,n){var a=this.get("viewController"),o=!1;e?o=!0:e===void 0&&(o=this.get("animate"));var s={};n?s=n:n===void 0&&(s=this.get("animateCfg")),a.focus(t,o,s),this.autoPaint()},r.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},r.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},r.prototype.getPointByClient=function(t,e){var n=this.get("viewController");return n.getPointByClient(t,e)},r.prototype.getClientByPoint=function(t,e){var n=this.get("viewController");return n.getClientByPoint(t,e)},r.prototype.getPointByCanvas=function(t,e){var n=this.get("viewController");return n.getPointByCanvas(t,e)},r.prototype.getCanvasByPoint=function(t,e){var n=this.get("viewController");return n.getCanvasByPoint(t,e)},r.prototype.showItem=function(t,e){e===void 0&&(e=!0);var n=this.get("itemController"),a=n.changeItemVisibility(t,!0);if(e&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),l={},u={};switch(s){case"node":l.nodes=[{id:o,visible:!1}],u.nodes=[{id:o,visible:!0}];break;case"edge":l.nodes=[{id:o,visible:!1}],u.edges=[{id:o,visible:!0}];break;case"combo":l.nodes=[{id:o,visible:!1}],u.combos=[{id:o,visible:!0}];break;default:break}this.pushStack("visible",{before:l,after:u})}},r.prototype.hideItem=function(t,e){e===void 0&&(e=!0);var n=this.get("itemController"),a=n.changeItemVisibility(t,!1);if(e&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),l={},u={};switch(s){case"node":l.nodes=[{id:o,visible:!0}],u.nodes=[{id:o,visible:!1}];break;case"edge":l.nodes=[{id:o,visible:!0}],u.edges=[{id:o,visible:!1}];break;case"combo":l.nodes=[{id:o,visible:!0}],u.combos=[{id:o,visible:!1}];break;default:break}this.pushStack("visible",{before:l,after:u})}},r.prototype.refreshItem=function(t){var e=this.get("itemController");e.refreshItem(t)},r.prototype.setAutoPaint=function(t){var e=this;e.set("autoPaint",t);var n=e.get("canvas");n.set("autoDraw",t)},r.prototype.remove=function(t,e){e===void 0&&(e=!0),this.removeItem(t,e)},r.prototype.removeItem=function(t,e){e===void 0&&(e=!0);var n=t;if((0,f.isString)(t)&&(n=this.findById(t)),!n&&(0,f.isString)(t)){console.warn("The item to be removed does not exist!");var a=this.get("customGroupControll");a.remove(t)}else if(n){var o="";if(n.getType&&(o=n.getType()),e&&this.get("enabledStack")){var s=(0,V.__assign)((0,V.__assign)({},n.getModel()),{itemType:o}),l={};switch(o){case"node":{l.nodes=[s],l.edges=[];for(var u=n.getEdges(),h=u.length-1;h>=0;h--)l.edges.push((0,V.__assign)((0,V.__assign)({},u[h].getModel()),{itemType:"edge"}));break}case"edge":l.edges=[s];break;case"combo":l.combos=[s];break;default:break}this.pushStack("delete",{before:l,after:{}})}var c=this.get("itemController");if(c.removeItem(t),o==="combo"){var v=Rh(this.get("comboTrees"));this.set("comboTrees",v)}}},r.prototype.addItem=function(t,e,n,a){n===void 0&&(n=!0),a===void 0&&(a=!0);var o=this.get("comboSorted");this.set("comboSorted",o&&!a);var s=this.get("itemController");if(t==="group"){var l=e.groupId,u=e.nodes,h=e.type,c=e.zIndex,v=e.title,x=v;return(0,f.isString)(v)&&(x={text:v}),this.get("customGroupControll").create(l,u,h,c,!0,x)}if(e.id&&this.findById(e.id)){console.warn("This item exists already. Be sure the id %c"+e.id+"%c is unique.","font-size: 20px; color: red;","");return}var M,k=this.get("comboTrees");if(k||(k=[]),t==="combo"){var R=this.get("itemMap"),G=!1;if(k.forEach(function(le){G||Ea(le,function(xe){if(e.parentId===xe.id){G=!0;var ye=(0,V.__assign)({id:e.id,depth:xe.depth+2},e);xe.children?xe.children.push(ye):xe.children=[ye],e.depth=ye.depth,M=s.addItem(t,e)}var Oe=R[xe.id];return G&&Oe&&Oe.getType&&Oe.getType()==="combo"&&s.updateCombo(Oe,xe.children),!0})}),!G){var N=(0,V.__assign)({id:e.id,depth:0},e);e.depth=N.depth,k.push(N),M=s.addItem(t,e)}this.set("comboTrees",k)}else if(t==="node"&&(0,f.isString)(e.comboId)&&k){var ot=this.findById(e.comboId);if(ot&&ot.getType&&ot.getType()!=="combo"){console.warn("'"+e.comboId+"' is a not id of a combo in the graph, the node will be added without combo.");return}M=s.addItem(t,e);var ut=this.get("itemMap"),Mt=!1,zt=!1;(k||[]).forEach(function(le){zt||Mt||Ea(le,function(xe){if(xe.id===e.id)return zt=!0,!1;if(e.comboId===xe.id&&!zt){Mt=!0;var ye=(0,f.clone)(e);ye.itemType="node",xe.children?xe.children.push(ye):xe.children=[ye],e.depth=xe.depth+1}return Mt&&ut[xe.id].getType&&ut[xe.id].getType()==="combo"&&s.updateCombo(ut[xe.id],xe.children),!0})})}else M=s.addItem(t,e);if(t==="node"&&e.comboId||t==="combo"&&e.parentId){var ot=this.findById(e.comboId||e.parentId);ot&&ot.addChild(M)}var $t=this.get("combos");if($t&&$t.length>0&&this.sortCombos(),this.autoPaint(),n&&this.get("enabledStack")){var ee=(0,V.__assign)((0,V.__assign)({},M.getModel()),{itemType:t}),Ut={};switch(t){case"node":Ut.nodes=[ee];break;case"edge":Ut.edges=[ee];break;case"combo":Ut.combos=[ee];break;default:break}this.pushStack("add",{before:{},after:Ut})}return M},r.prototype.add=function(t,e,n,a){return n===void 0&&(n=!0),a===void 0&&(a=!0),this.addItem(t,e,n,a)},r.prototype.updateItem=function(t,e,n){var a=this;n===void 0&&(n=!0);var o=this.get("itemController"),s;(0,f.isString)(t)?s=this.findById(t):s=t;var l=(0,f.clone)(s.getModel()),u="";s.getType&&(u=s.getType());var h=(0,V.__spreadArrays)(s.getStates());if(u==="combo"&&(0,f.each)(h,function(M){return a.setItemState(s,M,!1)}),o.updateItem(s,e),u==="combo"&&(0,f.each)(h,function(M){return a.setItemState(s,M,!0)}),n&&this.get("enabledStack")){var c={nodes:[],edges:[],combos:[]},v={nodes:[],edges:[],combos:[]},x=(0,V.__assign)({id:l.id},e);switch(u){case"node":c.nodes.push(l),v.nodes.push(x);break;case"edge":c.edges.push(l),v.edges.push(x);break;case"combo":c.combos.push(l),v.combos.push(x);break;default:break}u==="node"&&c.nodes.push(l),this.pushStack("update",{before:c,after:v})}},r.prototype.update=function(t,e,n){n===void 0&&(n=!0),this.updateItem(t,e,n)},r.prototype.setItemState=function(t,e,n){(0,f.isString)(t)&&(t=this.findById(t));var a=this.get("itemController");a.setItemState(t,e,n);var o=this.get("stateController");(0,f.isString)(n)?o.updateState(t,e+":"+n,!0):o.updateState(t,e,n)},r.prototype.priorityState=function(t,e){var n=this.get("itemController");n.priorityState(t,e)},r.prototype.data=function(t){this.set("data",t)},r.prototype.render=function(){var t=this;this.set("comboSorted",!1);var e=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!e)throw new Error("data must be defined first");var n=e.nodes,a=n===void 0?[]:n,o=e.edges,s=o===void 0?[]:o,l=e.combos,u=l===void 0?[]:l;if(this.clear(),this.emit("beforerender"),(0,f.each)(a,function(N){t.add("node",N,!1,!1)}),u&&u.length!==0){var h=Fh(u,a);this.set("comboTrees",h),t.addCombos(u)}(0,f.each)(s,function(N){t.add("edge",N,!1,!1)});var c=t.get("animate");(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",!1);var v=t.get("layoutController");v.layout(x)||x();function x(){t.get("fitView")?t.fitView():t.get("fitCenter")&&t.fitCenter(),t.autoPaint(),t.emit("afterrender"),(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",c)}if(!this.get("groupByTypes"))if(u&&u.length!==0)this.sortCombos();else if(e.nodes&&e.edges&&e.nodes.length<e.edges.length){var M=this.getNodes();M.forEach(function(N){N.toFront()})}else{var k=this.getEdges();k.forEach(function(N){N.toBack()})}if(e.nodes){var R=e.nodes.filter(function(N){return N.groupId});if(R.length>0){var G=t.get("groupType");this.renderCustomGroup(e,G)}}this.get("enabledStack")&&this.pushStack("render")},r.prototype.read=function(t){this.data(t),this.render()},r.prototype.diffItems=function(t,e,n){var a=this,o,s=this.get("itemMap");(0,f.each)(n,function(l){if(o=s[l.id],o){if(a.get("animate")&&t===$4){var u=o.getContainer().getMatrix();u||(u=[1,0,0,0,1,0,0,0,1]),o.set("originAttrs",{x:u[6],y:u[7]})}a.updateItem(o,l,!1)}else o=a.addItem(t,l,!1);e[t+"s"].push(o)})},r.prototype.changeData=function(t,e){e===void 0&&(e=!0);var n=this;if(!t)return this;e&&this.get("enabledStack")&&this.pushStack("changedata",{before:n.save(),after:t}),this.set("comboSorted",!1),this.getNodes().map(function(k){return n.clearItemStates(k)}),this.getEdges().map(function(k){return n.clearItemStates(k)});var a=this.get("canvas"),o=a.get("localRefresh");a.set("localRefresh",!1),n.get("data")||(n.data(t),n.render());var s=this.get("itemMap"),l={nodes:[],edges:[]},u=t.combos;if(u){var h=Fh(u,t.nodes);this.set("comboTrees",h)}this.diffItems("node",l,t.nodes),(0,f.each)(s,function(k,R){s[R].getModel().depth=0,!(k.getType&&k.getType()==="edge")&&(k.getType&&k.getType()==="combo"?(delete s[R],k.destroy()):l.nodes.indexOf(k)<0&&(delete s[R],n.remove(k,!1)))});for(var c=this.getCombos(),v=c.length,x=v-1;x>=0;x--)c[x].destroyed&&c.splice(x,1);u&&(n.addCombos(u),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",l,t.edges),(0,f.each)(s,function(k,R){k.getType&&(k.getType()==="node"||k.getType()==="combo")||l.edges.indexOf(k)<0&&(delete s[R],n.remove(k,!1))}),this.set({nodes:l.nodes,edges:l.edges});var M=this.get("layoutController");return M.changeData(),n.get("animate")&&!M.getLayoutType()?n.positionsAnimate():n.autoPaint(),setTimeout(function(){a.set("localRefresh",o)},16),this},r.prototype.addCombos=function(t){var e=this,n=e.get("comboTrees"),a=this.get("itemController");a.addCombos(n,t)},r.prototype.createCombo=function(t,e){var n=this;this.set("comboSorted",!1);var a="",o;if(!!t){if((0,f.isString)(t))a=t,o={id:t};else{if(a=t.id,!a){console.warn("Create combo failed. Please assign a unique string id for the adding combo.");return}o=t}var s=e.map(function(u){var h=n.findById(u),c="";h.getType&&(c=h.getType());var v={id:h.getID(),itemType:c};return c==="combo"?v.parentId=a:c==="node"&&(v.comboId=a),v});o.children=s,this.addItem("combo",o,!1),this.set("comboSorted",!1);var l=this.get("comboTrees");(l||[]).forEach(function(u){Ea(u,function(h){return h.id===a?(h.itemType="combo",h.children=s,!1):!0})}),l&&this.sortCombos()}},r.prototype.uncombo=function(t){var e=this,n,a=this,o=t;if((0,f.isString)(t)&&(o=this.findById(t)),!o||o.getType&&o.getType()!=="combo"){console.warn("The item is not a combo!");return}var s=o.getModel().parentId,l=a.get("comboTrees");l||(l=[]);var u=this.get("itemMap"),h=o.get("id"),c,v=[],x=this.get("combos"),M=this.findById(s);if(l.forEach(function(R){c||Ea(R,function(G){var N;if(G.id===h){c=G;var ot=o.getEdges();ot.forEach(function(Mt){e.removeItem(Mt,!1)});var ut=x.indexOf(t);x.splice(ut,1),delete u[h],o.destroy()}if(s&&c&&G.id===s){M.removeCombo(o),v=G.children;var ut=v.indexOf(c);return ut!==-1&&v.splice(ut,1),(N=c.children)===null||N===void 0||N.forEach(function(zt){var $t=e.findById(zt.id),ee=$t.getModel();$t.getType&&$t.getType()==="combo"?(zt.parentId=s,delete zt.comboId,ee.parentId=s,delete ee.comboId):$t.getType&&$t.getType()==="node"&&(zt.comboId=s,ee.comboId=s),M.addChild($t),v.push(zt)}),!1}return!0})}),!s&&c){var k=l.indexOf(c);l.splice(k,1),(n=c.children)===null||n===void 0||n.forEach(function(R){R.parentId=void 0;var G=e.findById(R.id).getModel();G.parentId=void 0,R.itemType!=="node"&&l.push(R)})}},r.prototype.updateCombos=function(){var t=this,e=this,n=this.get("comboTrees"),a=e.get("itemController"),o=e.get("itemMap");(n||[]).forEach(function(s){Ea(s,function(l){if(!l)return!0;var u=o[l.id];if(u&&u.getType&&u.getType()==="combo"){var h=(0,V.__spreadArrays)(u.getStates());(0,f.each)(h,function(c){return t.setItemState(u,c,!1)}),a.updateCombo(u,l.children),(0,f.each)(h,function(c){return t.setItemState(u,c,!0)})}return!0})}),e.sortCombos()},r.prototype.updateCombo=function(t){var e=this,n=this,a=t,o;if((0,f.isString)(t)&&(a=this.findById(t)),!a||a.getType&&a.getType()!=="combo"){console.warn("The item to be updated is not a combo!");return}o=a.get("id");var s=this.get("comboTrees"),l=n.get("itemController"),u=n.get("itemMap");(s||[]).forEach(function(h){Ea(h,function(c){if(!c)return!0;var v=u[c.id];if(o===c.id&&v&&v.getType&&v.getType()==="combo"){var x=(0,V.__spreadArrays)(v.getStates());(0,f.each)(x,function(M){v.getStateStyle(M)&&e.setItemState(v,M,!1)}),l.updateCombo(v,c.children),(0,f.each)(x,function(M){v.getStateStyle(M)&&e.setItemState(v,M,!0)}),o&&(o=c.parentId)}return!0})})},r.prototype.updateComboTree=function(t,e){var n=this;this.set("comboSorted",!1);var a;(0,f.isString)(t)?a=n.findById(t):a=t;var o=a.getModel(),s=o.comboId||o.parentId;if(e&&a.getType&&a.getType()==="combo"){var l=this.get("comboTrees"),u=!0,h;if((l||[]).forEach(function(k){h||Ji(k,function(R){if(!h)return R.id===a.getID()&&(h=R),!0})}),Ji(h,function(k){return k.id===e?(u=!1,!1):!0}),!u){console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!");return}}if(o.parentId||o.comboId){var c=this.findById(o.parentId||o.comboId);c&&c.removeChild(a)}var v="";if(a.getType&&(v=a.getType()),v==="combo"?o.parentId=e:v==="node"&&(o.comboId=e),e){var x=this.findById(e);x&&x.addChild(a)}if(s){var x=this.findById(s);x&&x.removeChild(a)}var M=Rh(this.get("comboTrees"),o.id,e);this.set("comboTrees",M),this.updateCombos()},r.prototype.renderCustomGroup=function(t,e){var n=this,a=t.groups,o=t.nodes,s=o===void 0?[]:o,l=10;if(a){this.set({groups:a});var v=QR(t);Object.keys(v).forEach(function(M){var k=v[M];n.get("customGroupControll").create(M,k,e,l),l--});var x=this.get("customGroup");x.sort()}else{var u=s.filter(function(M){return M.groupId}),h=[],c=(0,f.groupBy)(u,"groupId");Object.keys(c).forEach(function(M){var k=c[M].map(function(R){return R.id});n.get("customGroupControll").create(M,k,e,l),l--,h.find(function(R){return R.id===M})||h.push({id:M})}),this.set({groups:h})}},r.prototype.save=function(){var t=[],e=[],n=[];return(0,f.each)(this.get("nodes"),function(a){t.push(a.getModel())}),(0,f.each)(this.get("edges"),function(a){e.push(a.getModel())}),(0,f.each)(this.get("combos"),function(a){n.push(a.getModel())}),{nodes:t,edges:e,combos:n,groups:this.get("groups")}},r.prototype.changeSize=function(t,e){var n=this.get("viewController");return n.changeSize(t,e),this},r.prototype.refresh=function(){var t=this;if(t.emit("beforegraphrefresh"),t.get("animate"))t.positionsAnimate();else{var e=t.get("nodes"),n=t.get("edges"),a=t.get("edges");(0,f.each)(e,function(o){o.refresh()}),(0,f.each)(n,function(o){o.refresh()}),(0,f.each)(a,function(o){o.refresh()})}t.emit("aftergraphrefresh"),t.autoPaint()},r.prototype.getNodes=function(){return this.get("nodes")},r.prototype.getEdges=function(){return this.get("edges")},r.prototype.getCombos=function(){return this.get("combos")},r.prototype.getComboChildren=function(t){if((0,f.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo does not exist!");return}return t.getChildren()},r.prototype.positionsAnimate=function(){var t=this;t.emit("beforeanimate");var e=t.get("animateCfg"),n=e.onFrame,a=t.getNodes(),o=a.map(function(l){var u=l.getModel();return{id:u.id,x:u.x,y:u.y}});t.isAnimating()&&t.stopAnimate();var s=t.get("canvas");s.animate(function(l){(0,f.each)(o,function(u){var h=t.findById(u.id);if(!(!h||h.destroyed)){var c=h.get("originAttrs"),v=h.get("model");if(!c){var x=h.getContainer().getMatrix();x||(x=[1,0,0,0,1,0,0,0,1]),c={x:x[6],y:x[7]},h.set("originAttrs",c)}if(n){var M=n(h,l,u,c);h.set("model",Object.assign(v,M))}else v.x=c.x+(u.x-c.x)*l,v.y=c.y+(u.y-c.y)*l}}),t.refreshPositions()},{duration:e.duration,easing:e.easing,callback:function(){(0,f.each)(a,function(u){u.set("originAttrs",null)}),e.callback&&e.callback(),t.emit("afteranimate"),t.animating=!1}})},r.prototype.refreshPositions=function(){var t=this;t.emit("beforegraphrefreshposition");var e=t.get("nodes"),n=t.get("edges"),a=t.get("vedges"),o=t.get("combos"),s,l={};(0,f.each)(e,function(u){s=u.getModel();var h=u.get("originAttrs");h&&s.x===h.x&&s.y===h.y||(u.updatePosition({x:s.x,y:s.y}),l[s.id]=!0,s.comboId&&(l[s.comboId]=!0))}),o&&o.length!==0&&t.updateCombos(),(0,f.each)(n,function(u){var h=u.getSource().getModel(),c=u.getTarget().getModel();(l[h.id]||l[c.id]||u.getModel().isComboEdge)&&u.refresh()}),(0,f.each)(a,function(u){u.refresh()}),t.emit("aftergraphrefreshposition"),t.autoPaint()},r.prototype.stopAnimate=function(){this.get("canvas").stopAnimate()},r.prototype.isAnimating=function(){return this.animating},r.prototype.getZoom=function(){var t=this.get("group").getMatrix();return t?t[0]:1},r.prototype.getCurrentMode=function(){var t=this.get("modeController");return t.getMode()},r.prototype.setMode=function(t){var e=this.get("modeController");return e.setMode(t),this},r.prototype.clear=function(){var t=this.get("canvas");return t.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],groups:[],combos:[],comboTrees:[]}),this.emit("afterrender"),this},r.prototype.toDataURL=function(t,e){var n=this.get("canvas"),a=n.getRenderer(),o=n.get("el");t||(t="image/png");var s="";if(a==="svg"){var l=o.cloneNode(!0),u=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),h=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",u);h.replaceChild(l,h.documentElement);var c=new XMLSerializer().serializeToString(h);s="data:image/svg+xml;charset=utf8,"+encodeURIComponent(c)}else{var v=void 0,x=o.getContext("2d"),M=this.get("width"),k=this.get("height"),R=void 0;if(e){var G=window.devicePixelRatio;v=x.getImageData(0,0,M*G,k*G),R=x.globalCompositeOperation,x.globalCompositeOperation="destination-over",x.fillStyle=e,x.fillRect(0,0,M,k)}s=o.toDataURL(t),e&&(x.clearRect(0,0,M,k),x.putImageData(v,0,0),x.globalCompositeOperation=R)}return s},r.prototype.toFullDataURL=function(t,e,n){var a=this.get("group").getCanvasBBox(),o=a.height,s=a.width,l=this.get("renderer"),u=(0,di.Z)('<id="virtual-image"></div>'),h=n?n.backgroundColor:void 0,c=n?n.padding:void 0;c?(0,f.isNumber)(c)&&(c=[c,c,c,c]):c=[0,0,0,0];var v=o+c[0]+c[2],x=s+c[1]+c[3],M={container:u,height:v,width:x,quickHit:!0},k=l==="svg"?new ks.Z(M):new Fo.Z(M),R=this.get("group"),G=R.clone(),N=(0,f.clone)(G.getMatrix());N||(N=[1,0,0,0,1,0,0,0,1]);var ot=(a.maxX+a.minX)/2,ut=(a.maxY+a.minY)/2;Oa.wO.translate(N,N,[-ot,-ut]),Oa.wO.translate(N,N,[s/2+c[3],o/2+c[0]]),G.resetMatrix(),G.setMatrix(N),k.add(G);var Mt=k.get("el"),zt="";e||(e="image/png"),setTimeout(function(){if(l==="svg"){var $t=Mt.cloneNode(!0),ee=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),Ut=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",ee);Ut.replaceChild($t,Ut.documentElement);var le=new XMLSerializer().serializeToString(Ut);zt="data:image/svg+xml;charset=utf8,"+encodeURIComponent(le)}else{var xe=void 0,ye=Mt.getContext("2d"),Oe=void 0;if(h){var Ge=window.devicePixelRatio;xe=ye.getImageData(0,0,x*Ge,v*Ge),Oe=ye.globalCompositeOperation,ye.globalCompositeOperation="destination-over",ye.fillStyle=h,ye.fillRect(0,0,x,v)}zt=Mt.toDataURL(e),h&&(ye.clearRect(0,0,x,v),ye.putImageData(xe,0,0),ye.globalCompositeOperation=Oe)}t==null||t(zt)},16)},r.prototype.downloadFullImage=function(t,e,n){var a=this,o=this.get("group").getCanvasBBox(),s=o.height,l=o.width,u=this.get("renderer"),h=(0,di.Z)('<id="virtual-image"></div>'),c=n?n.backgroundColor:void 0,v=n?n.padding:void 0;v?(0,f.isNumber)(v)&&(v=[v,v,v,v]):v=[0,0,0,0];var x=s+v[0]+v[2],M=l+v[1]+v[3],k={container:h,height:x,width:M},R=u==="svg"?new ks.Z(k):new Fo.Z(k),G=this.get("group"),N=G.clone(),ot=(0,f.clone)(N.getMatrix());ot||(ot=[1,0,0,0,1,0,0,0,1]);var ut=(o.maxX+o.minX)/2,Mt=(o.maxY+o.minY)/2;Oa.wO.translate(ot,ot,[-ut,-Mt]),Oa.wO.translate(ot,ot,[l/2+v[3],s/2+v[0]]),N.resetMatrix(),N.setMatrix(ot),R.add(N);var zt=R.get("el");e||(e="image/png"),setTimeout(function(){var $t="";if(u==="svg"){var ee=zt.cloneNode(!0),Ut=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),le=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",Ut);le.replaceChild(ee,le.documentElement);var xe=new XMLSerializer().serializeToString(le);$t="data:image/svg+xml;charset=utf8,"+encodeURIComponent(xe)}else{var ye=void 0,Oe=zt.getContext("2d"),Ge=void 0;if(c){var Ne=window.devicePixelRatio;ye=Oe.getImageData(0,0,M*Ne,x*Ne),Ge=Oe.globalCompositeOperation,Oe.globalCompositeOperation="destination-over",Oe.fillStyle=c,Oe.fillRect(0,0,M,x)}$t=zt.toDataURL(e),c&&(Oe.clearRect(0,0,M,x),Oe.putImageData(ye,0,0),Oe.globalCompositeOperation=Ge)}var qe=document.createElement("a"),tr=(t||"graph")+(u==="svg"?".svg":"."+e.split("/")[1]);a.dataURLToImage($t,u,qe,tr);var rr=document.createEvent("MouseEvents");rr.initEvent("click",!1,!1),qe.dispatchEvent(rr)},16)},r.prototype.downloadImage=function(t,e,n){var a=this,o=this;o.isAnimating()&&o.stopAnimate();var s=o.get("canvas"),l=s.getRenderer();e||(e="image/png");var u=(t||"graph")+(l==="svg"?".svg":e.split("/")[1]),h=document.createElement("a");setTimeout(function(){var c=o.toDataURL(e,n);a.dataURLToImage(c,l,h,u);var v=document.createEvent("MouseEvents");v.initEvent("click",!1,!1),h.dispatchEvent(v)},16)},r.prototype.dataURLToImage=function(t,e,n,a){if(typeof window!="undefined")if(window.Blob&&window.URL&&e!=="svg"){var o=t.split(","),s="";if(o&&o.length>0){var l=o[0].match(/:(.*?);/);l&&l.length>=2&&(s=l[1])}for(var u=atob(o[1]),h=u.length,c=new Uint8Array(h);h--;)c[h]=u.charCodeAt(h);var v=new Blob([c],{type:s});window.navigator.msSaveBlob?window.navigator.msSaveBlob(v,a):n.addEventListener("click",function(){n.download=a,n.href=window.URL.createObjectURL(v)})}else n.addEventListener("click",function(){n.download=a,n.href=t})},r.prototype.updateLayout=function(t){var e=this.get("layoutController"),n;(0,f.isString)(t)?(n=t,t={type:n}):n=t.type;var a=this.get("layout"),o=a?a.type:void 0;if(!n||o===n){var s={};Object.assign(s,a,t),s.type=o||"random",this.set("layout",s),e.updateLayoutCfg(s)}else this.set("layout",t),e.changeLayout(n)},r.prototype.destroyLayout=function(){var t=this.get("layoutController");t.destroyLayout()},r.prototype.layout=function(){var t=this.get("layoutController"),e=this.get("layout");if(!!e){if(e.workerEnabled){t.layout();return}t.layoutMethod?t.relayout(!0):t.layout()}},r.prototype.collapseCombo=function(t){var e=this;if((0,f.isString)(t)&&(t=this.findById(t)),!t){console.warn("The combo to be collapsed does not exist!");return}var n=t.getModel(),a=this.get("itemController");a.collapseCombo(t),n.collapsed=!0;var o=this.getEdges().concat(this.get("vedges")),s=[],l=[],u=this.get("comboTrees"),h=!1,c={};(u||[]).forEach(function(M){c[M.id]=M}),(u||[]).forEach(function(M){h||Ji(M,function(k){if(h&&c[k.id])return!1;if(n.parentId===k.id?(c={},k.children.forEach(function(G){c[G.id]=G})):n.id===k.id&&(h=!0),h){var R=e.findById(k.id);R&&R.getType&&R.getType()==="combo"&&(s=s.concat(R.getNodes()),l=l.concat(R.getCombos()))}return!0})});var v={},x=[];o.forEach(function(M){if(!(M.isVisible()&&!M.getModel().isVEdge)){var k=M.getSource(),R=M.getTarget();if((s.includes(k)||l.includes(k))&&!s.includes(R)&&!l.includes(R)||k.getModel().id===n.id){var G=M.getModel();if(G.isVEdge){e.removeItem(M,!1);return}for(var N=R.getModel();!R.isVisible();){if(R=e.findById(N.parentId||N.comboId),!R||!N.parentId&&!N.comboId)return;N=R.getModel()}var ot=N.id;if(v[n.id+"-"+ot]){v[n.id+"-"+ot]+=G.size||1;return}var ut=e.addItem("vedge",{source:n.id,target:ot,isVEdge:!0},!1);v[n.id+"-"+ot]=G.size||1,x.push(ut)}else if(!s.includes(k)&&!l.includes(k)&&(s.includes(R)||l.includes(R))||R.getModel().id===n.id){var G=M.getModel();if(G.isVEdge){e.removeItem(M,!1);return}for(var Mt=k.getModel();!k.isVisible();){if(k=e.findById(Mt.parentId||Mt.comboId),!k||!Mt.parentId&&!Mt.comboId)return;Mt=k.getModel()}var zt=Mt.id;if(v[zt+"-"+n.id]){v[zt+"-"+n.id]+=G.size||1;return}var ut=e.addItem("vedge",{target:n.id,source:zt,isVEdge:!0},!1);v[zt+"-"+n.id]=G.size||1,x.push(ut)}}}),x.forEach(function(M){var k=M.getModel();e.updateItem(M,{size:v[k.source+"-"+k.target]},!1)})},r.prototype.expandCombo=function(t){var e=this;if((0,f.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo to be collapsed does not exist!");return}var n=t.getModel(),a=this.get("itemController");a.expandCombo(t),n.collapsed=!1;var o=this.getEdges().concat(this.get("vedges")),s=[],l=[],u=this.get("comboTrees"),h=!1,c={};(u||[]).forEach(function(M){c[M.id]=M}),(u||[]).forEach(function(M){h||Ji(M,function(k){if(h&&c[k.id])return!1;if(n.parentId===k.id?(c={},k.children.forEach(function(G){c[G.id]=G})):n.id===k.id&&(h=!0),h){var R=e.findById(k.id);R&&R.getType&&R.getType()==="combo"&&(s=s.concat(R.getNodes()),l=l.concat(R.getCombos()))}return!0})});var v={},x={};o.forEach(function(M){if(!(M.isVisible()&&!M.getModel().isVEdge)){var k=M.getSource(),R=M.getTarget(),G=k.get("id"),N=R.get("id");if((s.includes(k)||l.includes(k))&&!s.includes(R)&&!l.includes(R)||G===n.id){if(M.getModel().isVEdge){e.removeItem(M,!1);return}for(var ot=R.getModel();!R.isVisible();){if(R=e.findById(ot.comboId||ot.parentId),!R||!ot.parentId&&!ot.comboId)return;ot=R.getModel()}N=ot.id;for(var ut=k.getModel();!k.isVisible();){if(k=e.findById(ut.comboId||ut.parentId),!k||!ut.parentId&&!ut.comboId)return;if(ut.comboId===n.id||ut.parentId===n.id)break;ut=k.getModel()}if(G=ut.id,N){var Mt=G+"-"+N;if(v[Mt]){v[Mt]+=M.getModel().size||1,e.updateItem(x[Mt],{size:v[Mt]},!1);return}var zt=e.addItem("vedge",{source:G,target:N,isVEdge:!0},!1);v[Mt]=M.getModel().size||1,x[Mt]=zt}}else if(!s.includes(k)&&!l.includes(k)&&(s.includes(R)||l.includes(R))||N===n.id){if(M.getModel().isVEdge){e.removeItem(M,!1);return}for(var ut=k.getModel();!k.isVisible();){if(k=e.findById(ut.comboId||ut.parentId),!k||!ut.parentId&&!ut.comboId)return;ut=k.getModel()}G=ut.id;for(var ot=R.getModel();!R.isVisible();){if(R=e.findById(ot.comboId||ot.parentId),!R||!ot.parentId&&!ot.comboId)return;if(ot.comboId===n.id||ot.parentId===n.id)break;ot=R.getModel()}if(N=ot.id,G){var Mt=G+"-"+N;if(v[Mt]){v[Mt]+=M.getModel().size||1,e.updateItem(x[Mt],{size:v[Mt]},!1);return}var zt=e.addItem("vedge",{target:N,source:G,isVEdge:!0},!1);v[Mt]=M.getModel().size||1,x[Mt]=zt}}else(s.includes(k)||l.includes(k))&&(s.includes(R)||l.includes(R))&&k.isVisible()&&R.isVisible()&&M.show()}})},r.prototype.collapseExpandCombo=function(t){if((0,f.isString)(t)&&(t=this.findById(t)),!(t.getType&&t.getType()!=="combo")){for(var e=t.getModel(),n=this.findById(e.parentId);n;){var a=n.getModel();if(a.collapsed){console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),n=void 0;return}n=this.findById(a.parentId)}var o=e.collapsed;o?this.expandCombo(t):this.collapseCombo(t),this.updateCombo(t)}},r.prototype.collapseGroup=function(t){var e=this.get("customGroupControll");e.collapseGroup(t)},r.prototype.expandGroup=function(t){var e=this.get("customGroupControll");e.expandGroup(t)},r.prototype.addPlugin=function(t){var e=this;t.destroyed||(e.get("plugins").push(t),t.initPlugin(e))},r.prototype.removePlugin=function(t){var e=this.get("plugins"),n=e.indexOf(t);n>=0&&(t.destroyPlugin(),e.splice(n,1))},r.prototype.sortCombos=function(){var t=this,e=this.get("comboSorted");if(!e){this.set("comboSorted",!0);var n=[],a={},o=this.get("comboTrees");(o||[]).forEach(function(l){Ji(l,function(u){return n[u.depth]?n[u.depth].push(u.id):n[u.depth]=[u.id],a[u.id]=u.depth,!0})});var s=this.getEdges().concat(this.get("vedges"));(s||[]).forEach(function(l){var u=l.getModel(),h=a[u.source]||0,c=a[u.target]||0,v=Math.max(h,c);n[v]?n[v].push(u.id):n[v]=[u.id]}),n.forEach(function(l){if(!(!l||!l.length))for(var u=l.length-1;u>=0;u--){var h=t.findById(l[u]);h==null||h.toFront()}})}},r.prototype.getNeighbors=function(t,e){var n=t;return(0,f.isString)(t)&&(n=this.findById(t)),n.getNeighbors(e)},r.prototype.getNodeDegree=function(t,e){e===void 0&&(e=void 0);var n=t;(0,f.isString)(t)&&(n=this.findById(t));var a=this.get("degrees");a||(a=Gx(this)),this.set("degees",a);var o=a[n.getID()],s;switch(e){case"in":s=o.inDegree;break;case"out":s=o.outDegree;break;case"all":s=o;break;default:s=o.degree;break}return s},r.prototype.getUndoStack=function(){return this.undoStack},r.prototype.getRedoStack=function(){return this.redoStack},r.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},r.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear())},r.prototype.pushStack=function(t,e,n){if(t===void 0&&(t="update"),n===void 0&&(n="undo"),!this.get("enabledStack")){console.warn("\u8BF7\u5148\u542F\u7528 undo & redo \u529F\u80FD\uFF0C\u5728\u5B9E\u4F8B\u5316 Graph \u65F6\u5019\u914D\u7F6E enabledStack: true !");return}var a=e?(0,f.clone)(e):{before:{},after:(0,f.clone)(this.save())};n==="redo"?this.redoStack.push({action:t,data:a}):this.undoStack.push({action:t,data:a}),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack})},r.prototype.getAdjMatrix=function(t,e){t===void 0&&(t=!0),e===void 0&&(e=this.get("directed"));var n=this.get("adjMatrix");return(!n||!t)&&(n=xu(this,e),this.set("adjMatrix",n)),n},r.prototype.getShortestPathMatrix=function(t,e){t===void 0&&(t=!0),e===void 0&&(e=this.get("directed"));var n=this.get("adjMatrix"),a=this.get("shortestPathMatrix");return(!n||!t)&&(n=xu(this,e),this.set("adjMatrix",n)),(!a||!t)&&(a=Vx(this,e),this.set("shortestPathMatrix",a)),a},r.prototype.destroy=function(){this.clear(),this.clearStack(),(0,f.each)(this.get("plugins"),function(o){o.destroyPlugin()});var t=this.get("tooltips");if(t)for(var e=0;e<t.length;e++){var n=t[e];if(!!n){var a=n.parentElement;!a||a.removeChild(n)}}this.get("eventController").destroy(),this.get("itemController").destroy(),this.get("modeController").destroy(),this.get("viewController").destroy(),this.get("stateController").destroy(),this.get("layoutController").destroy(),this.get("customGroupControll").destroy(),this.get("canvas").destroy(),this.get("graphWaterMarker")&&this.get("graphWaterMarker").destroy(),document.querySelector(".g6-graph-watermarker")&&document.querySelector(".g6-graph-watermarker").remove(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null},r.prototype.createHull=function(t){var e=this.get("hullGroup"),n=this.get("hullMap");if(n||(n={},this.set("hullMap",n)),e||(e=this.get("group").addGroup({id:"hullGroup"}),e.toBack(),this.set("hullGroup",e)),n[t.id])return console.warn("Existed hull id."),n[t.id];var a=e.addGroup({id:t.id+"-container"}),o=new K4(this,(0,V.__assign)((0,V.__assign)({},t),{group:a})),s=o.id;return n[s]=o,o},r.prototype.getHulls=function(){return this.get("hullMap")},r.prototype.getHullById=function(t){return this.get("hullMap")[t]},r.prototype.removeHull=function(t){var e;(0,f.isString)(t)?e=this.getHullById(t):e=t;var n=this.get("hullMap");delete n[e.id],e.destroy()},r.prototype.setImageWaterMarker=function(t,e){t===void 0&&(t=Ke.waterMarkerImage);var n=this.get("container");(0,f.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var a=this.get("graphWaterMarker"),o=(0,f.deepMix)({},Ke.imageWaterMarkerConfig,e),s=o.width,l=o.height,u=o.compatible,h=o.image;if(!a){var c={container:n,width:s,height:l,capture:!1},v=this.get("pixelRatio");v&&(c.pixelRatio=v),a=new Fo.Z(c),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var x=a.get("context"),M=h.rotate,k=h.x,R=h.y;x.rotate(-M*Math.PI/180);var G=new Image;G.crossOrigin="anonymous",G.src=t,G.onload=function(){if(x.drawImage(G,k,R,h.width,h.height),x.rotate(M*Math.PI/180),u)n.style.cssText="background-image: url("+a.get("el").toDataURL("image/png")+");background-repeat:repeat;";else{var N=document.querySelector(".g6-graph-watermarker");N||(N=document.createElement("div"),N.className="g6-graph-watermarker"),N.className="g6-graph-watermarker",a.destroyed||(N.style.cssText="background-image: url("+a.get("el").toDataURL("image/png")+");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;",n.appendChild(N))}}},r.prototype.setTextWaterMarker=function(t,e){var n=this.get("container");(0,f.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var a=this.get("graphWaterMarker"),o=(0,f.deepMix)({},Ke.textWaterMarkerConfig,e),s=o.width,l=o.height,u=o.compatible,h=o.text;if(!a){var c={container:n,width:s,height:l,capture:!1},v=this.get("pixelRatio");v&&(c.pixelRatio=v),a=new Fo.Z(c),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var x=a.get("context"),M=h.rotate,k=h.fill,R=h.fontFamily,G=h.fontSize,N=h.baseline,ot=h.x,ut=h.y,Mt=h.lineHeight;x.rotate(-M*Math.PI/180),x.font=G+"px "+R,x.fillStyle=k,x.textBaseline=N;for(var zt=t.length-1;zt>=0;zt--)x.fillText(t[zt],ot,ut+zt*Mt);if(x.rotate(M*Math.PI/180),u)n.style.cssText="background-image: url("+a.get("el").toDataURL("image/png")+");background-repeat:repeat;";else{var $t=document.querySelector(".g6-graph-watermarker");$t||($t=document.createElement("div"),$t.className="g6-graph-watermarker"),$t.style.cssText="background-image: url("+a.get("el").toDataURL("image/png")+");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;",n.appendChild($t)}},r}(te.default),Zx=J4,q4=p(77201),Kx=p.n(q4),t6=function(i){(0,V.__extends)(r,i);function r(t){var e=i.call(this,t)||this;return e.layoutAnimating=!1,e.set("removeList",[]),e.set("layoutMethod",e.getLayout()),e}return r.prototype.getLayout=function(){var t=this.get("layout");return t?typeof t=="function"?t:(t.type||(t.type="dendrogram"),t.direction||(t.direction="TB"),t.radial?function(e){var n=Kx()[t.type](e,t);return nx(n),n}:function(e){return Kx()[t.type](e,t)}):null},r.indexOfChild=function(t,e){var n=-1;return(0,$n.S6)(t,function(a,o){if(e===a.id)return n=o,!1}),n},r.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.animate=!0,t},r.prototype.innerAddChild=function(t,e,n){var a=this,o=t.data;o&&(o.x=t.x,o.y=t.y,o.depth=t.depth);var s=a.addItem("node",o,!1);if(e){if(s.set("parent",e),n){var l=e.get("originAttrs");if(l)s.set("originAttrs",l);else{var u=e.getModel();s.set("originAttrs",{x:u.x,y:u.y})}}var h=e.get("children");h?h.push(s):e.set("children",[s]),a.addItem("edge",{source:e,target:s,id:e.get("id")+":"+s.get("id")},!1)}return(0,$n.S6)(t.children||[],function(c){a.innerAddChild(c,s,n)}),a.emit("afteraddchild",{item:s,parent:e}),s},r.prototype.innerUpdateChild=function(t,e,n){var a=this,o=a.findById(t.id);if(!o){a.innerAddChild(t,e,n);return}(0,$n.S6)(t.children||[],function(M){a.innerUpdateChild(M,o,n)});var s=o.get("children");if(s){var l=s.length;if(l>0)for(var u=s.length-1;u>=0;u--){var h=s[u].getModel();r.indexOfChild(t.children||[],h.id)===-1&&(a.innerRemoveChild(h.id,{x:t.x,y:t.y},n),s.splice(u,1))}}var c,v;o.get("originAttrs")&&(c=o.get("originAttrs").x,v=o.get("originAttrs").y);var x=o.getModel();n&&o.set("originAttrs",{x:x.x,y:x.y}),o.set("model",t.data),(c!==t.x||v!==t.y)&&o.updatePosition({x:t.x,y:t.y})},r.prototype.innerRemoveChild=function(t,e,n){var a=this,o=a.findById(t);if(!!o)if((0,$n.S6)(o.get("children"),function(l){a.innerRemoveChild(l.getModel().id,e,n)}),n){var s=o.getModel();o.set("to",e),o.set("originAttrs",{x:s.x,y:s.y}),a.get("removeList").push(o)}else a.removeItem(o)},r.prototype.changeData=function(t){var e=this;this.getNodes().map(function(n){return e.clearItemStates(n)}),this.getEdges().map(function(n){return e.clearItemStates(n)}),t?(e.data(t),e.render()):e.layout(this.get("fitView"))},r.prototype.changeLayout=function(t){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");var e=this;e.updateLayout(t)},r.prototype.updateLayout=function(t){var e=this;if(!t){console.warn("layout cannot be null");return}e.set("layout",t),e.set("layoutMethod",e.getLayout()),e.layout()},r.prototype.refreshLayout=function(t){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");var e=this;e.layout(t)},r.prototype.layout=function(t){var e=this,n=e.get("data"),a=e.get("layoutMethod"),o=a(n,e.get("layout")),s=e.get("animate");if(e.emit("beforerefreshlayout",{data:n,layoutData:o}),e.emit("beforelayout"),e.innerUpdateChild(o,void 0,s),t){var l=e.get("viewController");l.fitView()}s?e.layoutAnimate(o):(e.refresh(),e.paint()),e.emit("afterrefreshlayout",{data:n,layoutData:o}),e.emit("afterlayout")},r.prototype.addChild=function(t,e){var n=this;n.emit("beforeaddchild",{model:t,parent:e}),(0,$n.HD)(e)||(e=e.get("id"));var a=n.findDataById(e);a&&(a.children||(a.children=[]),a.children.push(t),n.changeData())},r.prototype.updateChild=function(t,e){var n=this;if(!e||!n.findById(e)){n.changeData(t);return}var a=n.findById(e).getModel(),o=n.findById(t.id);if(a.children||(a.children=[]),!o)a.children.push(t);else{var s=r.indexOfChild(a.children,t.id);a.children[s]=t}n.changeData()},r.prototype.removeChild=function(t){var e=this,n=e.findById(t);if(!!n){var a=n.get("parent");if(a&&!a.destroyed){var o=e.findDataById(a.get("id")),s=o&&o.children||[],l=n.getModel(),u=r.indexOfChild(s,l.id);s.splice(u,1)}e.changeData()}},r.prototype.findDataById=function(t,e){var n=this;if(e||(e=n.get("data")),t===e.id)return e;var a=null;return(0,$n.S6)(e.children||[],function(o){if(o.id===t)return a=o,!1;if(a=n.findDataById(t,o),a)return!1}),a},r.prototype.layoutAnimate=function(t,e){var n=this,a=this.get("animateCfg");n.emit("beforeanimate",{data:t}),n.getEdges().forEach(function(o){var s=o.get("model");s.sourceAnchor||(s.sourceAnchor=o.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(o){Ji(t,function(s){var l=n.findById(s.id);if(l){var u=l.get("originAttrs"),h=l.get("model");if(u||(u={x:h.x,y:h.y},l.set("originAttrs",u)),e){var c=e(l,o,u,t);l.set("model",Object.assign(h,c))}else h.x=u.x+(s.x-u.x)*o,h.y=u.y+(s.y-u.y)*o}return!0}),(0,$n.S6)(n.get("removeList"),function(s){var l=s.getModel(),u=s.get("originAttrs"),h=s.get("to");l.x=u.x+(h.x-u.x)*o,l.y=u.y+(h.y-u.y)*o}),n.refreshPositions()},{duration:a.duration,easing:a.ease,callback:function(){(0,$n.S6)(n.getNodes(),function(s){s.set("originAttrs",null)}),(0,$n.S6)(n.get("removeList"),function(s){n.removeItem(s)}),n.set("removeList",[]),a.callback&&a.callback(),n.emit("afteranimate",{data:t})},delay:a.delay})},r.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},r.prototype.isLayoutAnimating=function(){return this.layoutAnimating},r.prototype.render=function(){var t=this,e=t.get("data");if(!e)throw new Error("data must be defined first");t.clear(),t.emit("beforerender"),t.layout(this.get("fitView")),t.emit("afterrender")},r.prototype.save=function(){return this.get("data")},r}(Zx),e6=t6,r6="-shape",$x="-label",bu=["startArrow","endArrow"],$h="-label-bg",Qh={options:{},itemType:"",type:"",getCustomConfig:function(r){return{}},getOptions:function(r){return(0,f.deepMix)({labelCfg:{style:{fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}},descriptionCfg:{style:{fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}}},this.options,this.getCustomConfig(r)||{},r)},draw:function(r,t){var e=this.drawShape(r,t);if(e.set("className",this.itemType+r6),r.label){var n=this.drawLabel(r,t);n.set("className",this.itemType+$x)}return e},afterDraw:function(r,t,e){},drawShape:function(r,t){return null},drawLabel:function(r,t){var e=this.getOptions(r).labelCfg,n=e||{},a=this.getLabelStyle(r,n,t),o=a.rotate;delete a.rotate;var s=t.addShape("text",{attrs:a,draggable:!0,className:"text-shape",name:"text-shape"});if(o){var l=s.getBBox(),u=s.getMatrix();if(u||(u=[1,0,0,0,1,0,0,0,1]),a.rotateCenter)switch(a.rotateCenter){case"center":u=za(u,[["t",-l.width/2,-l.height/2],["r",o],["t",l.width/2,l.height/2]]);break;case"lefttop":u=za(u,[["t",-a.x,-a.y],["r",o],["t",a.x,a.y]]);break;case"leftcenter":u=za(u,[["t",-a.x,-a.y-l.height/2],["r",o],["t",a.x,a.y+l.height/2]]);break;default:u=za(u,[["t",-l.width/2,-l.height/2],["r",o],["t",l.width/2,l.height/2]]);break}else u=za(u,[["t",-a.x,-a.y-l.height/2],["r",o],["t",a.x,a.y+l.height/2]]);s.setMatrix(u)}if(a.background){var h=this.drawLabelBg(r,t,s),c=this.itemType+$h;h.set("classname",c),s.toFront()}return s},drawLabelBg:function(r,t,e){var n=this.options.labelCfg,a=(0,f.mix)({},n,r.labelCfg),o=this.getLabelBgStyleByPosition(e,r,a,t),s=t.addShape("rect",{name:"text-bg-shape",attrs:o});return s},getLabelStyleByPosition:function(r,t,e){return{text:r.label}},getLabelBgStyleByPosition:function(r,t,e,n){return{}},getLabelStyle:function(r,t,e){var n=this.getLabelStyleByPosition(r,t,e),a=this.itemType+"Label",o=Ke[a]?Ke[a].style:null,s=(0,V.__assign)((0,V.__assign)((0,V.__assign)({},o),n),t.style);return s},getShapeStyle:function(r){return r.style},update:function(r,t){this.updateShapeStyle(r,t),this.updateLabel(r,t)},updateShapeStyle:function(r,t){var e=t.getContainer(),n=t.getKeyShape(),a=(0,f.mix)({},n.attr(),r.style),o=function(u){var h,c=a[u];if((0,f.isPlainObject)(c)){var v=e.find(function(x){return x.get("name")===u});v&&v.attr(c)}else n.attr((h={},h[u]=c,h))};for(var s in a)o(s)},updateLabel:function(r,t){var e=t.getContainer(),n=this.getOptions({}).labelCfg,a=this.itemType+$x,o=e.find(function(ut){return ut.get("className")===a}),s=this.itemType+$h,l=e.find(function(ut){return ut.get("classname")===s});if(r.label||r.label==="")if(o){var h={};t.getModel&&(h=t.getModel().labelCfg);var c=(0,f.deepMix)({},n,h,r.labelCfg),v=this.getLabelStyleByPosition(r,c,e),x=r.labelCfg?r.labelCfg.style:void 0,M=c.style&&c.style.background,k=(0,V.__assign)((0,V.__assign)((0,V.__assign)({},o.attr()),v),x),R=k.rotate;if(delete k.rotate,R){var G=[1,0,0,0,1,0,0,0,1];G=za(G,[["t",-k.x,-k.y],["r",R],["t",k.x,k.y]]),o.resetMatrix(),o.attr((0,V.__assign)((0,V.__assign)({},k),{matrix:G}))}else o.resetMatrix(),o.attr(k);if(!l)k.background&&(l=this.drawLabelBg(r,e,o),l.set("classname",s),o.toFront());else if(k.background){var N=this.getLabelBgStyleByPosition(o,r,c,e),ot=(0,V.__assign)((0,V.__assign)({},N),M);l.resetMatrix(),R&&l.rotateAtStart(R),l.attr(ot)}else e.removeChild(l)}else{var u=this.drawLabel(r,e);u.set("className",a)}},afterUpdate:function(r,t){},setState:function(r,t,e){var n,a,o=e.get("keyShape");if(!!o){var s=e.getType(),l=(0,f.isBoolean)(t)?r:r+":"+t,u=this.getStateStyle(l,e),h=e.getStateStyle(l);if(!(!h&&!u)){var c=(0,f.mix)({},h||u),v=e.getContainer();if(t){var x=function(ye){var Oe,Ge=c[ye];if((0,f.isPlainObject)(Ge)&&!bu.includes(ye)){var Ne=v.find(function(qe){return qe.get("name")===ye});Ne&&Ne.attr(Ge)}else o.attr((Oe={},Oe[ye]=Ge,Oe))};for(var M in c)x(M)}else{var k=(0,f.clone)(e.getCurrentStatesStyle()),R=e.getModel(),G=(0,f.mix)({},R.style,(0,f.clone)(e.getOriginStyle())),N=o.get("name"),ot=o.attr(),ut={},Mt=function(ye){var Oe=c[ye];if((0,f.isPlainObject)(Oe)&&!bu.includes(ye)){var Ge=v.find(function(tr){return tr.get("name")===ye});if(Ge){var Ne=Ge.attr();(0,f.each)(Oe,function(tr,rr){(Ne[rr]||Ne[rr]===0)&&delete Ne[rr]}),ut[ye]=Ne}}else{var qe={x:1,y:1,cx:1,cy:1};ot[ye]&&!qe[ye]&&delete ot[ye]}};for(var zt in c)Mt(zt);N?ut[N]=ot:(0,f.mix)(ut,ot);for(var M in k){var $t=k[M];(!(0,f.isPlainObject)($t)||bu.includes(M))&&(N?((0,f.mix)(G[N],(a={},a[M]=$t,a)),delete G[M]):(0,f.mix)(G,(n={},n[M]=$t,n)),delete k[M])}var ee={};(0,f.deepMix)(ee,G,ut,k);var Ut=function(ye){var Oe,Ge,Ne=ee[ye];if((0,f.isPlainObject)(Ne)&&!bu.includes(ye)){var qe=v.find(function(tr){return tr.get("name")===ye});qe&&qe.attr(Ne)}else s==="combo"?N||o.attr((Oe={},Oe[ye]=Ne,Oe)):o.attr((Ge={},Ge[ye]=Ne,Ge))};for(var le in ee)Ut(le)}}}},getStateStyle:function(r,t){var e=t.getModel(),n=t.getType(),a=this.getOptions(e),o=a.stateStyles,s=a.style,l=s===void 0?{}:s,u=e.stateStyles?e.stateStyles[r]:o&&o[r];return n==="combo"?(0,f.clone)(u):(0,f.mix)({},l,u)},getControlPoints:function(r){return r.controlPoints},getAnchorPoints:function(r){var t=this.getOptions(r).anchorPoints;return t}},n6={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:Ke.nodeLabel.offset,getSize:function(r){var t=r.size||this.getOptions({}).size||Ke.defaultNode.size;return(0,f.isArray)(t)&&t.length===1&&(t=[t[0],t[0]]),(0,f.isArray)(t)||(t=[t,t]),t},getLabelStyleByPosition:function(r,t){var e=t.position||this.labelPosition;if(e==="center")return{x:0,y:0,text:r.label};var n=t.offset;(0,f.isNil)(n)&&(n=this.offset);var a=this.getSize(r),o=a[0],s=a[1],l;switch(e){case"top":l={x:0,y:0-s/2-n,textBaseline:"bottom"};break;case"bottom":l={x:0,y:s/2+n,textBaseline:"top"};break;case"left":l={x:0-o/2-n,y:0,textAlign:"right"};break;default:l={x:o/2+n,y:0,textAlign:"left"};break}return l.text=r.label,l},getLabelBgStyleByPosition:function(r,t,e,n){if(!r)return{};var a=r.getBBox(),o=e.style&&e.style.background;if(!o)return{};var s=Sh(o.padding),l=a.width+s[1]+s[3],u=a.height+s[0]+s[2],h=e.offset;(0,f.isNil)(h)&&(h=this.offset);var c;return c={x:a.minX-s[3],y:a.minY-s[0]},c=(0,V.__assign)((0,V.__assign)((0,V.__assign)({},c),o),{width:l,height:u}),c},drawShape:function(r,t){var e=this.shapeType,n=this.getShapeStyle(r),a=t.addShape(e,{attrs:n,draggable:!0,name:"node-shape"});return a},updateLinkPoints:function(r,t){var e=this.getOptions(r).linkPoints,n=t.find(function($t){return $t.get("className")==="link-point-left"}),a=t.find(function($t){return $t.get("className")==="link-point-right"}),o=t.find(function($t){return $t.get("className")==="link-point-top"}),s=t.find(function($t){return $t.get("className")==="link-point-bottom"}),l;n&&(l=n.attr()),a&&!l&&(l=a.attr()),o&&!l&&(l=o.attr()),s&&!l&&(l=s.attr()),l||(l=e);var u=(0,f.mix)({},l,r.linkPoints),h=u.fill,c=u.stroke,v=u.lineWidth,x=u.size/2;x||(x=u.r);var M=r.linkPoints?r.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},k=M.left,R=M.right,G=M.top,N=M.bottom,ot=this.getSize(r),ut=ot[0],Mt=ot[1],zt={r:x,fill:h,stroke:c,lineWidth:v};n?!k&&k!==void 0?n.remove():n.attr((0,V.__assign)((0,V.__assign)({},zt),{x:-ut/2,y:0})):k&&t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},zt),{x:-ut/2,y:0}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),a?(!R&&R!==void 0&&a.remove(),a.attr((0,V.__assign)((0,V.__assign)({},zt),{x:ut/2,y:0}))):R&&t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},zt),{x:ut/2,y:0}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),o?(!G&&G!==void 0&&o.remove(),o.attr((0,V.__assign)((0,V.__assign)({},zt),{x:0,y:-Mt/2}))):G&&t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},zt),{x:0,y:-Mt/2}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),s?!N&&N!==void 0?s.remove():s.attr((0,V.__assign)((0,V.__assign)({},zt),{x:0,y:Mt/2})):N&&t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},zt),{x:0,y:Mt/2}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},updateShape:function(r,t,e,n){var a=t.get("keyShape");a.attr((0,V.__assign)({},e)),this.updateLabel(r,t),n&&this.updateIcon(r,t)},updateIcon:function(r,t){var e=this,n=t.getContainer(),a=this.getOptions(r).icon,o=(r.icon?r.icon:{show:void 0}).show,s=n.find(function(v){return v.get("className")===e.type+"-icon"});if(s)if(o||o===void 0){var l=(0,f.mix)({},s.attr(),a),u=l.width,h=l.height;s.attr((0,V.__assign)((0,V.__assign)({},l),{x:-u/2,y:-h/2}))}else s.remove();else if(o){var u=a.width,h=a.height;n.addShape("image",{attrs:(0,V.__assign)((0,V.__assign)({},a),{x:-u/2,y:-h/2}),className:this.type+"-icon",name:this.type+"-icon"});var c=n.find(function(M){return M.get("className")==="node-label"});c&&c.toFront()}}},i6=(0,V.__assign)((0,V.__assign)({},Qh),n6);ni.registerNode("single-node",i6);var wu="edge-shape";function a6(i){var r=i;return i==="start"?r="end":i==="end"&&(r="start"),r}var o6={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:Ke.defaultEdge.size,style:{x:0,y:0,stroke:Ke.defaultEdge.style.stroke,lineAppendWidth:Ke.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Ke.edgeLabel.style.fill,fontSize:Ke.edgeLabel.style.fontSize}},stateStyles:(0,V.__assign)({},Ke.edgeStateStyles)},getPath:function(r){var t=[];return(0,f.each)(r,function(e,n){n===0?t.push(["M",e.x,e.y]):t.push(["L",e.x,e.y])}),t},getShapeStyle:function(r){var t=this.options.style,e={stroke:r.color},n=(0,f.mix)({},t,e,r.style),a=r.size||Ke.defaultEdge.size;r=this.getPathPoints(r);var o=r.startPoint,s=r.endPoint,l=this.getControlPoints(r),u=[o];l&&(u=u.concat(l)),u.push(s);var h=this.getPath(u),c=(0,f.mix)({},Ke.defaultEdge.style,{stroke:Ke.defaultEdge.color,lineWidth:a,path:h},n);return c},updateShapeStyle:function(r,t){var e=t.getContainer(),n={stroke:r.color},a=e.find(function(G){return G.get("className")==="edge-shape"})||t.getKeyShape(),o=r.size;r=this.getPathPoints(r);var s=r.startPoint,l=r.endPoint,u=this.getControlPoints(r),h=[s];u&&(h=h.concat(u)),h.push(l);var c=(0,f.mix)({},n,a.attr(),r.style),v=r.sourceNode,x=r.targetNode,M={radius:c.radius};u||(M={source:v,target:x,offset:c.offset,radius:c.radius});var k=this.getPath(h,M),R=(0,f.mix)(n,a.attr(),{lineWidth:o,path:k},r.style);a&&a.attr(R)},getLabelStyleByPosition:function(r,t,e){var n=t.position||this.labelPosition,a={},o=e&&e.find(function(v){return v.get("className")===wu}),s;n==="start"?s=0:n==="end"?s=1:s=.5;var l=t.refX||this.refX,u=t.refY||this.refY;if(r.startPoint.x===r.endPoint.x&&r.startPoint.y===r.endPoint.y)return a.x=r.startPoint.x+l,a.y=r.startPoint.y+u,a.text=r.label,a;var h=(0,f.isNil)(t.autoRotate)?this.labelAutoRotate:t.autoRotate,c=nu(o,s,l,u,h);return a.x=c.x,a.y=c.y,a.rotate=c.rotate,a.textAlign=this._getTextAlign(n,c.angle),a.text=r.label,a},getLabelBgStyleByPosition:function(r,t,e,n){if(!r)return{};var a=r.getBBox(),o=e.style&&e.style.background;if(!o)return{};var s=o.padding,l=a.width+s[1]+s[3],u=a.height+s[0]+s[2],h=e.position||this.labelPosition,c=(0,V.__assign)((0,V.__assign)({},o),{width:l,height:u,x:a.minX-s[2],y:a.minY-s[0],rotate:0}),v=(0,f.isNil)(e.autoRotate)?this.labelAutoRotate:e.autoRotate,x=n&&n.find(function(ot){return ot.get("className")===wu}),M;h==="start"?M=0:h==="end"?M=1:M=.5;var k=e.refX||this.refX,R=e.refY||this.refY;if(t.startPoint.x===t.endPoint.x&&t.startPoint.y===t.endPoint.y)return c.x=t.startPoint.x+k,c.y=t.startPoint.y+R,c;var G=nu(x,M,k-l/2,R+u/2,v),N=G.angle;return N>1/2*Math.PI&&N<3*1/2*Math.PI&&(G=nu(x,M,k+l/2,R+u/2,v)),v&&(c.x=G.x,c.y=G.y),c.rotate=G.rotate,c},_getTextAlign:function(r,t){var e="center";return t?(t=t%(Math.PI*2),r!=="center"&&(t>=0&&t<=Math.PI/2||t>=3/2*Math.PI&&t<2*Math.PI?e=r:e=a6(r)),e):r},getControlPoints:function(r){return r.controlPoints},getPathPoints:function(r){return r},drawShape:function(r,t){var e=this.getShapeStyle(r),n=t.addShape("path",{className:wu,name:wu,attrs:e});return n},drawLabel:function(r,t){var e=this.options.labelCfg,n=(0,f.deepMix)({fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},e,r.labelCfg),a=this.getLabelStyle(r,n,t),o=a.rotate;delete a.rotate;var s=t.addShape("text",{attrs:a,name:"text-shape"});if(o&&s.rotateAtStart(o),a.background){var l=this.drawLabelBg(r,t,s),u=this.itemType+$h;l.set("classname",u),s.toFront()}return s},drawLabelBg:function(r,t,e){var n=this.options.labelCfg,a=(0,f.deepMix)({},n,r.labelCfg),o=this.getLabelStyle(r,a,t),s=o.rotate,l=this.getLabelBgStyleByPosition(e,r,a,t);delete l.rotate;var u=t.addShape("rect",{name:"text-bg-shape",attrs:l});return s&&u.rotateAtStart(s),u}},s6=(0,V.__assign)((0,V.__assign)({},Qh),o6);ni.registerEdge("single-edge",s6),ni.registerEdge("line",{getControlPoints:function(){}},"single-edge"),ni.registerEdge("spline",{getPath:function(r){var t=Gm(r);return t}},"single-edge"),ni.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(r){var t=r.startPoint,e=r.endPoint,n={x:(t.x+e.x)/2,y:(t.y+e.y)/2},a,o;if(r.controlPoints!==void 0){if(o=r.controlPoints[0],a=_h(t,o,e),t.x<=e.x&&t.y>e.y?this.clockwise=a.x>o.x?0:1:t.x<=e.x&&t.y<e.y?this.clockwise=a.x>o.x?1:0:t.x>e.x&&t.y<=e.y?this.clockwise=a.y<o.y?0:1:this.clockwise=a.y<o.y?1:0,(o.x-t.x)/(o.y-t.y)==(e.x-t.x)/(e.y-t.y))return[]}else{r.curveOffset===void 0&&(r.curveOffset=this.curveOffset),(0,Ri.default)(r.curveOffset)&&(r.curveOffset=r.curveOffset[0]),r.curveOffset<0?this.clockwise=0:this.clockwise=1;var s={x:e.x-t.x,y:e.y-t.y},l=Math.atan2(s.y,s.x);o={x:r.curveOffset*Math.cos(-Math.PI/2+l)+n.x,y:r.curveOffset*Math.sin(-Math.PI/2+l)+n.y},a=_h(t,o,e)}var u=Os(t,a),h=[{x:u,y:u}];return h},getPath:function(r){var t=[];return t.push(["M",r[0].x,r[0].y]),r.length===2?t.push(["L",r[1].x,r[1].y]):t.push(["A",r[1].x,r[1].y,0,0,this.clockwise,r[2].x,r[2].y]),t}},"single-edge"),ni.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(r){var t=r.controlPoints;if(!t||!t.length){var e=r.startPoint,n=r.endPoint;r.curveOffset===void 0&&(r.curveOffset=this.curveOffset),r.curvePosition===void 0&&(r.curvePosition=this.curvePosition),(0,Ri.default)(this.curveOffset)&&(r.curveOffset=r.curveOffset[0]),(0,Ri.default)(this.curvePosition)&&(r.curvePosition=r.curveOffset[0]);var a=ql(e,n,r.curvePosition,r.curveOffset);t=[a]}return t},getPath:function(r){var t=[];return t.push(["M",r[0].x,r[0].y]),t.push(["Q",r[1].x,r[1].y,r[2].x,r[2].y]),t}},"single-edge"),ni.registerEdge("cubic",{curvePosition:[1/2,1/2],curveOffset:[-20,20],getControlPoints:function(r){var t=r.controlPoints;if(r.curveOffset===void 0&&(r.curveOffset=this.curveOffset),r.curvePosition===void 0&&(r.curvePosition=this.curvePosition),(0,La.default)(r.curveOffset)&&(r.curveOffset=[r.curveOffset,-r.curveOffset]),(0,La.default)(r.curvePosition)&&(r.curvePosition=[r.curvePosition,1-r.curvePosition]),!t||!t.length||t.length<2){var e=r.startPoint,n=r.endPoint,a=ql(e,n,r.curvePosition[0],r.curveOffset[0]),o=ql(e,n,r.curvePosition[1],r.curveOffset[1]);t=[a,o]}return t},getPath:function(r){var t=[];return t.push(["M",r[0].x,r[0].y]),t.push(["C",r[1].x,r[1].y,r[2].x,r[2].y,r[3].x,r[3].y]),t}},"single-edge"),ni.registerEdge("cubic-vertical",{curvePosition:[1/2,1/2],getControlPoints:function(r){var t=r.startPoint,e=r.endPoint;r.curvePosition!==void 0&&(this.curvePosition=r.curvePosition),(0,La.default)(this.curvePosition)&&(this.curvePosition=[this.curvePosition,1-this.curvePosition]);var n={x:t.x,y:(e.y-t.y)*this.curvePosition[0]+t.y},a={x:e.x,y:(e.y-t.y)*this.curvePosition[1]+t.y},o=[n,a];return o}},"cubic"),ni.registerEdge("cubic-horizontal",{curvePosition:[1/2,1/2],getControlPoints:function(r){var t=r.startPoint,e=r.endPoint;r.curvePosition!==void 0&&(this.curvePosition=r.curvePosition),(0,La.default)(this.curvePosition)&&(this.curvePosition=[this.curvePosition,1-this.curvePosition]);var n={x:(e.x-t.x)*this.curvePosition[0]+t.x,y:t.y},a={x:(e.x-t.x)*this.curvePosition[1]+t.x,y:e.y},o=[n,a];return o}},"cubic"),ni.registerEdge("loop",{getPathPoints:function(r){return ex(r)},getControlPoints:function(r){return r.controlPoints},afterDraw:function(r){r.controlPoints=void 0},afterUpdate:function(r){r.controlPoints=void 0}},"cubic");var l6={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:Ke.comboLabel.refX,refY:Ke.comboLabel.refY,options:{style:{stroke:Ke.defaultCombo.style.stroke,fill:Ke.defaultCombo.style.fill,lineWidth:Ke.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Ke.comboLabel.style.fill,fontSize:Ke.comboLabel.style.fontSize}},stateStyles:(0,V.__assign)({},Ke.comboStateStyles)},getSize:function(r){var t=(0,f.clone)(r.size||this.options.size||Ke.defaultCombo.size);return(0,f.isArray)(t)&&t.length===1&&(t=[t[0],t[0]]),(0,f.isArray)(t)||(t=[t,t]),t},getLabelStyleByPosition:function(r,t){var e=t.position||this.labelPosition,n=r.style,a=r.padding||this.options.padding;(0,f.isArray)(a)&&(a=a[0]);var o=t.refX,s=t.refY;(0,f.isNil)(o)&&(o=this.refX),(0,f.isNil)(s)&&(s=this.refY);var l=this.getSize(r),u=Math.max(n.r,l[0]/2)||l[0]/2,h=u+a,c;switch(e){case"top":c={x:0,y:-h-s,textBaseline:"bottom",textAlign:"center"};break;case"bottom":c={x:0,y:h+s,textBaseline:"bottom",textAlign:"center"};break;case"left":c={x:-h+o,y:0,textAlign:"left"};break;case"center":c={x:0,y:0,text:r.label,textAlign:"center"};break;default:c={x:h+o,y:0,textAlign:"right"};break}return c.text=r.label,c},drawShape:function(r,t){var e=this.shapeType,n=this.getShapeStyle(r),a=t.addShape(e,{attrs:n,draggable:!0,name:"combo-shape"});return a},updateShape:function(r,t,e){var n=t.get("keyShape"),a=r.animate===void 0?this.options.animate:r.animate;a&&n.animate?n.animate(e,{duration:200,easing:"easeLinear"}):n.attr((0,V.__assign)({},e)),this.updateLabel(r,t)}},u6=(0,V.__assign)((0,V.__assign)({},Qh),l6);ni.registerCombo("single-combo",u6),ni.registerCombo("circle",{options:{size:[Ke.defaultCombo.size[0],Ke.defaultCombo.size[0]],padding:Ke.defaultCombo.padding[0],animate:!0,style:{stroke:Ke.defaultCombo.style.stroke,fill:Ke.defaultCombo.style.fill,lineWidth:Ke.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Ke.comboLabel.style.fill,fontSize:Ke.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:(0,V.__assign)({},Ke.comboStateStyles)},shapeType:"circle",labelPosition:"top",drawShape:function(r,t){var e=this.getShapeStyle(r);delete e.height,delete e.width;var n=t.addShape("circle",{attrs:e,className:"circle-combo",name:"circle-combo",draggable:!0});return n},getShapeStyle:function(r){var t=this.options.style,e=r.padding||this.options.padding;(0,f.isArray)(e)&&(e=e[0]);var n={stroke:r.color},a=(0,f.mix)({},t,n,r.style),o=this.getSize(r),s;!(0,f.isNumber)(a.r)||isNaN(a.r)?s=o[0]/2||Ke.defaultCombo.style.r:s=Math.max(a.r,o[0]/2)||o[0]/2,a.r=s+e;var l=(0,V.__assign)({x:0,y:0},a);return r.style?r.style.r=s:r.style={r:s},l},update:function(r,t){var e=this.getSize(r),n=r.padding||this.options.padding;(0,f.isArray)(n)&&(n=n[0]);var a=(0,f.clone)(r.style),o=Math.max(a.r,e[0]/2)||e[0]/2;a.r=o+n;var s=t.get("sizeCache");s&&(s.r=a.r);var l={stroke:r.color},u=t.get("keyShape"),h=(0,f.mix)({},u.attr(),l,a);r.style?r.style.r=o:r.style={r:o},this.updateShape(r,t,h,!0)}},"single-combo"),ni.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:Ke.defaultCombo.style.stroke,fill:Ke.defaultCombo.style.fill,lineWidth:Ke.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Ke.comboLabel.style.fill,fontSize:Ke.comboLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,V.__assign)({},Ke.comboStateStyles)},shapeType:"rect",labelPosition:"top",drawShape:function(r,t){var e=this.getShapeStyle(r),n=t.addShape("rect",{attrs:e,className:"rect-combo",name:"rect-combo",draggable:!0});return n},getLabelStyleByPosition:function(r,t){var e=t.position||this.labelPosition,n=r.style,a=r.padding||this.options.padding;(0,f.isNumber)(a)&&(a=[a,a,a,a]);var o=t.refX,s=t.refY;(0,f.isNil)(o)&&(o=this.refX),(0,f.isNil)(s)&&(s=this.refY);var l=n.width/2+a[3],u=n.height/2+a[0],h;switch(e){case"top":h={x:0-l+o,y:0-u+s,textBaseline:"top",textAlign:"left"};break;case"bottom":h={x:0,y:u+s,textBaseline:"bottom",textAlign:"center"};break;case"left":h={x:0-l+s,y:0,textAlign:"left"};break;case"center":h={x:0,y:0,text:r.label,textAlign:"center"};break;default:h={x:l+o,y:0,textAlign:"right"};break}return h.text=r.label,h},getShapeStyle:function(r){var t=this.options.style,e=r.padding||this.options.padding;(0,f.isNumber)(e)&&(e=[e,e,e,e]);var n={stroke:r.color},a=(0,f.mix)({},t,n,r.style),o=this.getSize(r),s,l;!(0,f.isNumber)(a.width)||isNaN(a.width)?s=o[0]||Ke.defaultCombo.style.width:s=Math.max(a.width,o[0])||o[0],!(0,f.isNumber)(a.height)||isNaN(a.height)?l=o[1]||Ke.defaultCombo.style.height:l=Math.max(a.height,o[1])||o[1];var u=-s/2-e[3],h=-l/2-e[0];a.width=s+e[1]+e[3],a.height=l+e[0]+e[2];var c=(0,V.__assign)({x:u,y:h},a);return r.style?(r.style.width=s,r.style.height=l):r.style={width:s,height:l},c},update:function(r,t){var e=this.getSize(r),n=r.padding||this.options.padding;(0,f.isNumber)(n)&&(n=[n,n,n,n]);var a=(0,f.clone)(r.style),o=Math.max(a.width,e[0])||e[0],s=Math.max(a.height,e[1])||e[1];a.width=o+n[1]+n[3],a.height=s+n[0]+n[2];var l=t.get("sizeCache");l&&(l.width=a.width,l.height=a.height),a.x=-o/2-n[3],a.y=-s/2-n[0];var u={stroke:r.color},h=t.get("keyShape"),c=(0,f.mix)({},h.attr(),u,a);r.style?(r.style.width=o,r.style.height=s):r.style={width:o,height:s},this.updateShape(r,t,c,!1)},updateShape:function(r,t,e){var n=t.get("keyShape"),a=r.animate===void 0?this.options.animate:r.animate;a&&n.animate?n.animate(e,{duration:200,easing:"easeLinear"}):n.attr((0,V.__assign)({},e)),this.updateLabel(r,t)}},"single-combo"),ni.registerNode("circle",{options:{size:Ke.defaultNode.size,style:{x:0,y:0,stroke:Ke.defaultNode.style.stroke,fill:Ke.defaultNode.style.fill,lineWidth:Ke.defaultNode.style.lineWidth},labelCfg:{style:{fill:Ke.nodeLabel.style.fill,fontSize:Ke.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Ke.defaultNode.linkPoints.size,lineWidth:Ke.defaultNode.linkPoints.lineWidth,fill:Ke.defaultNode.linkPoints.fill,stroke:Ke.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,V.__assign)({},Ke.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(r,t){var e=this.getOptions(r).icon,n=e===void 0?{}:e,a=this.getShapeStyle(r),o=(0,Ui.default)({},n,r.icon),s=t.addShape("circle",{attrs:a,className:this.type+"-keyShape",draggable:!0}),l=o.width,u=o.height,h=o.show;return h&&t.addShape("image",{attrs:(0,V.__assign)({x:-l/2,y:-u/2},o),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}),this.drawLinkPoints(r,t),s},drawLinkPoints:function(r,t){var e=this.getOptions(r).linkPoints,n=e===void 0?{}:e,a=n.top,o=n.left,s=n.right,l=n.bottom,u=n.size,h=n.r,c=(0,V.__rest)(n,["top","left","right","bottom","size","r"]),v=this.getSize(r),x=v[0]/2;o&&t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},c),{x:-x,y:0,r:u/2||h||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),s&&t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},c),{x,y:0,r:u/2||h||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),a&&t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},c),{x:0,y:-x,r:u/2||h||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),l&&t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},c),{x:0,y:x,r:u/2||h||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(r){var t=this.getOptions(r).style,e={stroke:r.color},n=(0,Ui.default)({},t,e),a=this.getSize(r),o=a[0]/2,s=(0,V.__assign)({x:0,y:0,r:o},n);return s},update:function(r,t){var e=t.getContainer(),n=this.getSize(r),a={stroke:r.color,r:n[0]/2},o=t.get("keyShape"),s=(0,Ui.default)({},o.attr(),a,r.style);this.updateShape(r,t,s,!0),this.updateLinkPoints(r,e)}},"single-node"),ni.registerNode("rect",{options:{size:[100,30],style:{radius:0,stroke:Ke.defaultNode.style.stroke,fill:Ke.defaultNode.style.fill,lineWidth:Ke.defaultNode.style.lineWidth},labelCfg:{style:{fill:Ke.nodeLabel.style.fill,fontSize:Ke.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Ke.defaultNode.linkPoints.size,lineWidth:Ke.defaultNode.linkPoints.lineWidth,fill:Ke.defaultNode.linkPoints.fill,stroke:Ke.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,V.__assign)({},Ke.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(r,t){var e=this.getShapeStyle(r),n=t.addShape("rect",{attrs:e,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawLinkPoints(r,t),n},drawLinkPoints:function(r,t){var e=this.getOptions(r).linkPoints,n=e===void 0?{}:e,a=n.top,o=n.left,s=n.right,l=n.bottom,u=n.size,h=n.r,c=(0,V.__rest)(n,["top","left","right","bottom","size","r"]),v=this.getSize(r),x=v[0],M=v[1];o&&t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},c),{x:-x/2,y:0,r:u/2||h||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),s&&t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},c),{x:x/2,y:0,r:u/2||h||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),a&&t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},c),{x:0,y:-M/2,r:u/2||h||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),l&&t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},c),{x:0,y:M/2,r:u/2||h||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(r){var t=this.getOptions(r).style,e={stroke:r.color},n=(0,f.mix)({},t,e),a=this.getSize(r),o=n.width||a[0],s=n.height||a[1],l=(0,V.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return l},update:function(r,t){var e=t.getContainer(),n=this.getOptions({}).style,a=this.getSize(r),o=t.get("keyShape");r.size||(a[0]=o.attr("width")||n.width,a[1]=o.attr("height")||n.height);var s={stroke:r.color,x:-a[0]/2,y:-a[1]/2,width:a[0],height:a[1]},l=(0,f.mix)({},n,o.attr(),s);l=(0,f.mix)(l,r.style),this.updateShape(r,t,l,!1),this.updateLinkPoints(r,e)}},"single-node"),ni.registerNode("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:Ke.defaultNode.style.stroke,fill:Ke.defaultNode.style.fill,lineWidth:Ke.defaultNode.style.lineWidth},labelCfg:{style:{fill:Ke.nodeLabel.style.fill,fontSize:Ke.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Ke.defaultNode.linkPoints.size,lineWidth:Ke.defaultNode.linkPoints.lineWidth,fill:Ke.defaultNode.linkPoints.fill,stroke:Ke.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,V.__assign)({},Ke.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(r,t){var e=this.getOptions(r).icon,n=e===void 0?{}:e,a=this.getShapeStyle(r),o=t.addShape("ellipse",{attrs:a,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0}),s=n.width,l=n.height,u=n.show;if(u)var h=t.addShape("image",{attrs:(0,V.__assign)({x:-s/2,y:-l/2},n),className:this.type+"-icon",name:this.type+"-icon",draggable:!0});return this.drawLinkPoints(r,t),o},drawLinkPoints:function(r,t){var e=this.getOptions(r).linkPoints,n=e===void 0?{}:e,a=n.top,o=n.left,s=n.right,l=n.bottom,u=n.size,h=n.r,c=(0,V.__rest)(n,["top","left","right","bottom","size","r"]),v=this.getSize(r),x=v[0]/2,M=v[1]/2;o&&t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},c),{x:-x,y:0,r:u/2||h||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),s&&t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},c),{x,y:0,r:u/2||h||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),a&&t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},c),{x:0,y:-M,r:u/2||h||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),l&&t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},c),{x:0,y:M,r:u/2||h||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(r){var t=this.getOptions(r).style,e={stroke:r.color},n=(0,f.mix)({},t,e),a=this.getSize(r),o=a[0]/2,s=a[1]/2,l=(0,V.__assign)({x:0,y:0,rx:o,ry:s},n);return l},update:function(r,t){var e=t.getContainer(),n=this.getOptions({}).style,a=this.getSize(r),o={stroke:r.color,rx:a[0]/2,ry:a[1]/2},s=t.get("keyShape"),l=(0,f.mix)({},n,s.attr(),o);l=(0,f.mix)(l,r.style),this.updateShape(r,t,l,!0),this.updateLinkPoints(r,e)}},"single-node"),ni.registerNode("diamond",{options:{size:[80,80],style:{stroke:Ke.defaultNode.style.stroke,fill:Ke.defaultNode.style.fill,lineWidth:Ke.defaultNode.style.lineWidth},labelCfg:{style:{fill:Ke.nodeLabel.style.fill,fontSize:Ke.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Ke.defaultNode.linkPoints.size,lineWidth:Ke.defaultNode.linkPoints.lineWidth,fill:Ke.defaultNode.linkPoints.fill,stroke:Ke.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,V.__assign)({},Ke.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(r,t){var e=this.getOptions(r).icon,n=e===void 0?{}:e,a=this.getShapeStyle(r),o=t.addShape("path",{attrs:a,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),s=n.width,l=n.height,u=n.show;if(u)var h=t.addShape("image",{attrs:(0,V.__assign)({x:-s/2,y:-l/2},n),className:this.type+"-icon",name:this.type+"-icon",draggable:!0});return this.drawLinkPoints(r,t),o},drawLinkPoints:function(r,t){var e=this.getOptions(r).linkPoints,n=e===void 0?{}:e,a=n.top,o=n.left,s=n.right,l=n.bottom,u=n.size,h=n.r,c=(0,V.__rest)(n,["top","left","right","bottom","size","r"]),v=this.getSize(r),x=v[0],M=v[1];o&&t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},c),{x:-x/2,y:0,r:u/2||h||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),s&&t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},c),{x:x/2,y:0,r:u/2||h||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),a&&t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},c),{x:0,y:-M/2,r:u/2||h||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),l&&t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},c),{x:0,y:M/2,r:u/2||h||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getPath:function(r){var t=this.getSize(r),e=t[0],n=t[1],a=[["M",0,-n/2],["L",e/2,0],["L",0,n/2],["L",-e/2,0],["Z"]];return a},getShapeStyle:function(r){var t=this.getOptions(r).style,e={stroke:r.color},n=(0,f.mix)({},t,e),a=this.getPath(r),o=(0,V.__assign)({path:a},n);return o},update:function(r,t){var e=t.getContainer(),n=this.getOptions({}).style,a=this.getPath(r),o={stroke:r.color,path:a},s=t.get("keyShape"),l=(0,f.mix)({},n,s.attr(),o);l=(0,f.mix)(l,r.style),this.updateShape(r,t,l,!0),this.updateLinkPoints(r,e)}},"single-node"),ni.registerNode("triangle",{options:{size:40,direction:"up",style:{stroke:Ke.defaultNode.style.stroke,fill:Ke.defaultNode.style.fill,lineWidth:Ke.defaultNode.style.lineWidth},labelCfg:{style:{fill:Ke.nodeLabel.style.fill,fontSize:Ke.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Ke.defaultNode.linkPoints.size,lineWidth:Ke.defaultNode.linkPoints.lineWidth,fill:Ke.defaultNode.linkPoints.fill,stroke:Ke.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:(0,V.__assign)({},Ke.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(r,t){var e=this.getOptions(r),n=e.icon,a=n===void 0?{}:n,o=e.direction,s=this.getShapeStyle(r),l=r.direction||o,u=t.addShape("path",{attrs:s,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),h=a.width,c=a.height,v=a.show,x=a.offset;if(v){var M=-h/2,k=-c/2;(l==="up"||l==="down")&&(k+=x),(l==="left"||l==="right")&&(M+=x),t.addShape("image",{attrs:(0,V.__assign)({x:M,y:k},a),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})}return this.drawLinkPoints(r,t),u},drawLinkPoints:function(r,t){var e=this.getOptions(r),n=e.linkPoints,a=n===void 0?{}:n,o=e.direction,s=r.direction||o,l=a.top,u=a.left,h=a.right,c=a.bottom,v=a.size,x=a.r,M=(0,V.__rest)(a,["top","left","right","bottom","size","r"]),k=this.getSize(r),R=k[0];if(u){var G=null,N=R*Math.sin(1/3*Math.PI),ot=R*Math.sin(1/3*Math.PI);s==="up"?G=[-ot,N]:s==="down"?G=[-ot,-N]:s==="left"&&(G=[-ot,ot-N]),G&&t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},M),{x:G[0],y:G[1],r:v/2||x||5}),className:"link-point-left",name:"link-point-left"})}if(h){var ut=null,N=R*Math.sin(1/3*Math.PI),ot=R*Math.sin(1/3*Math.PI);s==="up"?ut=[ot,N]:s==="down"?ut=[ot,-N]:s==="right"&&(ut=[ot,ot-N]),ut&&t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},M),{x:ut[0],y:ut[1],r:v/2||x||5}),className:"link-point-right",name:"link-point-right"})}if(l){var Mt=null,N=R*Math.sin(1/3*Math.PI),ot=R*Math.sin(1/3*Math.PI);s==="up"?Mt=[ot-N,-N]:s==="left"?Mt=[ot,-N]:s==="right"&&(Mt=[-ot,-N]),Mt&&t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},M),{x:Mt[0],y:Mt[1],r:v/2||x||5}),className:"link-point-top",name:"link-point-top"})}if(c){var zt=null,N=R*Math.sin(1/3*Math.PI),ot=R*Math.sin(1/3*Math.PI);s==="down"?zt=[-ot+N,N]:s==="left"?zt=[ot,N]:s==="right"&&(zt=[-ot,N]),zt&&t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},M),{x:zt[0],y:zt[1],r:v/2||x||5}),className:"link-point-bottom",name:"link-point-bottom"})}},getPath:function(r){var t=this.getOptions(r).direction,e=r.direction||t,n=this.getSize(r),a=n[0],o=a*Math.sin(1/3*Math.PI),s=a*Math.sin(1/3*Math.PI),l=[["M",-s,o],["L",0,-o],["L",s,o],["Z"]];return e==="down"?l=[["M",-s,-o],["L",s,-o],["L",0,o],["Z"]]:e==="left"?l=[["M",-s,s-o],["L",s,-s],["L",s,s],["Z"]]:e==="right"&&(l=[["M",s,s-o],["L",-s,s],["L",-s,-s],["Z"]]),l},getShapeStyle:function(r){var t=this.getOptions(r).style,e={stroke:r.color},n=(0,f.mix)({},t,e),a=this.getPath(r),o=(0,V.__assign)({path:a},n);return o},update:function(r,t){var e=t.getContainer(),n=this.getOptions({}).style,a=this.getPath(r),o={stroke:r.color,path:a},s=t.get("keyShape"),l=(0,f.mix)({},n,s.attr(),o);l=(0,f.mix)(l,r.style),this.updateShape(r,t,l,!0),this.updateLinkPoints(r,e)},updateLinkPoints:function(r,t){var e=this.getOptions({}),n=e.linkPoints,a=e.direction,o=r.direction||a,s=t.find(function(qe){return qe.get("className")==="link-point-left"}),l=t.find(function(qe){return qe.get("className")==="link-point-right"}),u=t.find(function(qe){return qe.get("className")==="link-point-top"}),h=t.find(function(qe){return qe.get("className")==="link-point-bottom"}),c=n,v=s||l||u||h;v&&(c=v.attr());var x=(0,f.mix)({},c,r.linkPoints),M=x.fill,k=x.stroke,R=x.lineWidth,G=x.size/2;G||(G=x.r);var N=r.linkPoints?r.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},ot=N.left,ut=N.right,Mt=N.top,zt=N.bottom,$t=this.getSize(r),ee=$t[0],Ut={r:G,fill:M,stroke:k,lineWidth:R},le=null,xe=ee*Math.sin(1/3*Math.PI),ye=ee*Math.sin(1/3*Math.PI);o==="up"?le=[-ye,xe]:o==="down"?le=[-ye,-xe]:o==="left"&&(le=[-ye,ye-xe]),le&&(s?!ot&&ot!==void 0?s.remove():s.attr((0,V.__assign)((0,V.__assign)({},Ut),{x:le[0],y:le[1]})):ot&&t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},Ut),{x:le[0],y:le[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}));var Oe=null;o==="up"?Oe=[ye,xe]:o==="down"?Oe=[ye,-xe]:o==="right"&&(Oe=[ye,ye-xe]),Oe&&(l?!ut&&ut!==void 0?l.remove():l.attr((0,V.__assign)((0,V.__assign)({},Ut),{x:Oe[0],y:Oe[1]})):ut&&t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},Ut),{x:Oe[0],y:Oe[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}));var Ge=null;o==="up"?Ge=[ye-xe,-xe]:o==="left"?Ge=[ye,-xe]:o==="right"&&(Ge=[-ye,-xe]),Ge&&(u?!Mt&&Mt!==void 0?u.remove():u.attr((0,V.__assign)((0,V.__assign)({},Ut),{x:Ge[0],y:Ge[1]})):Mt&&t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},Ut),{x:Ge[0],y:Ge[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}));var Ne=null;o==="down"?Ne=[-ye+xe,xe]:o==="left"?Ne=[ye,xe]:o==="right"&&(Ne=[-ye,xe]),Ne&&(h?!zt&&zt!==void 0?h.remove():h.attr((0,V.__assign)((0,V.__assign)({},Ut),{x:Ne[0],y:Ne[1]})):zt&&t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},Ut),{x:Ne[0],y:Ne[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))}},"single-node"),ni.registerNode("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:Ke.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf"},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(r,t){var e=this.getOptions(r).preRect,n=e===void 0?{}:e,a=this.getShapeStyle(r),o=this.getSize(r),s=o[0],l=o[1],u=t.addShape("rect",{attrs:a,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),h=n.show,c=(0,V.__rest)(n,["show"]);return h&&t.addShape("rect",{attrs:(0,V.__assign)({x:-s/2,y:-l/2,height:l},c),className:"pre-rect",name:"pre-rect",draggable:!0}),this.drawLogoIcon(r,t),this.drawStateIcon(r,t),this.drawLinkPoints(r,t),u},drawLogoIcon:function(r,t){var e=this.getOptions(r).logoIcon,n=e===void 0?{}:e,a=this.getSize(r),o=a[0];if(n.show){var s=n.width,l=n.height,u=n.x,h=n.y,c=n.offset,v=(0,V.__rest)(n,["width","height","x","y","offset"]);t.addShape("image",{attrs:(0,V.__assign)((0,V.__assign)({},v),{x:u||-o/2+s+c,y:h||-l/2,width:s,height:l}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(r,t){var e=this.getOptions(r).stateIcon,n=e===void 0?{}:e,a=this.getSize(r),o=a[0];if(n.show){var s=n.width,l=n.height,u=n.x,h=n.y,c=n.offset,v=(0,V.__rest)(n,["width","height","x","y","offset"]);t.addShape("image",{attrs:(0,V.__assign)((0,V.__assign)({},v),{x:u||o/2-s+c,y:h||-l/2,width:s,height:l}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(r,t){var e=this.getOptions(r).linkPoints,n=e===void 0?{}:e,a=n.top,o=n.left,s=n.right,l=n.bottom,u=n.size,h=n.r,c=(0,V.__rest)(n,["top","left","right","bottom","size","r"]),v=this.getSize(r),x=v[0],M=v[1];o&&t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},c),{x:-x/2,y:0,r:u/2||h||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),s&&t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},c),{x:x/2,y:0,r:u/2||h||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),a&&t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},c),{x:0,y:-M/2,r:u/2||h||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),l&&t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},c),{x:0,y:M/2,r:u/2||h||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},drawLabel:function(r,t){var e=this.getOptions(r),n=e.labelCfg,a=n===void 0?{}:n,o=e.logoIcon,s=o===void 0?{}:o,l=e.descriptionCfg,u=l===void 0?{}:l,h=this.getSize(r),c=h[0],v=null,x=s.show,M=s.width,k=-c/2+a.offset;x&&(k=-c/2+M+a.offset);var R=a.style,G=u.style,N=u.paddingTop;return(0,f.isString)(r.description)?(v=t.addShape("text",{attrs:(0,V.__assign)((0,V.__assign)({},R),{x:k,y:-5,text:r.label}),className:"text-shape",name:"text-shape",draggable:!0}),t.addShape("text",{attrs:(0,V.__assign)((0,V.__assign)({},G),{x:k,y:17+(N||0),text:r.description}),className:"rect-description",name:"rect-description",draggable:!0})):v=t.addShape("text",{attrs:(0,V.__assign)((0,V.__assign)({},R),{x:k,y:7,text:r.label}),draggable:!0}),v},getShapeStyle:function(r){var t=this.getOptions(r).style,e={stroke:r.color},n=(0,f.mix)({},t,e),a=this.getSize(r),o=n.width||a[0],s=n.height||a[1],l=(0,V.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return l},update:function(r,t){var e=this.getOptions(r),n=e.style,a=n===void 0?{}:n,o=e.labelCfg,s=o===void 0?{}:o,l=e.descriptionCfg,u=l===void 0?{}:l,h=this.getSize(r),c=h[0],v=h[1],x=t.get("keyShape");x.attr((0,V.__assign)((0,V.__assign)({},a),{x:-c/2,y:-v/2,width:c,height:v}));var M=t.getContainer(),k=M.find(function(Dr){return Dr.get("className")==="rect-logo-icon"}),R=k?k.attr():{},G=(0,f.mix)({},R,r.logoIcon),N=G.width;N===void 0&&(N=this.options.logoIcon.width);var ot=r.logoIcon?r.logoIcon.show:void 0,ut=s.offset,Mt=-c/2+N+ut;!ot&&ot!==void 0&&(Mt=-c/2+ut);var zt=M.find(function(Dr){return Dr.get("className")==="node-label"}),$t=M.find(function(Dr){return Dr.get("className")==="rect-description"});if(r.label)if(!zt)M.addShape("text",{attrs:(0,V.__assign)((0,V.__assign)({},s.style),{x:Mt,y:r.description?-5:7,text:r.label}),className:"node-label",name:"node-label",draggable:!0});else{var ee=r.labelCfg?r.labelCfg.style:{},Ut=(0,f.mix)({},zt.attr(),ee);r.label&&(Ut.text=r.label),Ut.x=Mt,(0,f.isString)(r.description)&&(Ut.y=-5),$t&&($t.resetMatrix(),$t.attr({x:Mt})),zt.resetMatrix(),zt.attr(Ut)}if((0,f.isString)(r.description)){var le=u.paddingTop;if(!$t)M.addShape("text",{attrs:(0,V.__assign)((0,V.__assign)({},u.style),{x:Mt,y:17+(le||0),text:r.description}),className:"rect-description",name:"rect-description",draggable:!0});else{var ee=r.descriptionCfg?r.descriptionCfg.style:{},xe=(0,f.mix)({},$t.attr(),ee);(0,f.isString)(r.description)&&(xe.text=r.description),xe.x=Mt,$t.resetMatrix(),$t.attr((0,V.__assign)((0,V.__assign)({},xe),{y:17+(le||0)}))}}var ye=M.find(function(Dr){return Dr.get("className")==="pre-rect"});if(ye){var Oe=(0,f.mix)({},ye.attr(),r.preRect);ye.attr((0,V.__assign)((0,V.__assign)({},Oe),{x:-c/2,y:-v/2,height:v}))}if(k)if(!ot&&ot!==void 0)k.remove();else{var Ge=G.width,Ne=G.height,qe=G.x,tr=G.y,rr=G.offset,$e=(0,V.__rest)(G,["width","height","x","y","offset"]);k.attr((0,V.__assign)((0,V.__assign)({},$e),{x:qe||-c/2+Ge+rr,y:tr||-Ne/2,width:Ge,height:Ne}))}else ot&&this.drawLogoIcon(r,M);var Qe=M.find(function(Dr){return Dr.get("className")==="rect-state-icon"}),br=Qe?Qe.attr():{},yr=(0,f.mix)({},br,r.stateIcon);if(Qe){!yr.show&&yr.show!==void 0&&Qe.remove();var _r=yr.width,Ne=yr.height,qe=yr.x,tr=yr.y,ir=yr.offset,wr=(0,V.__rest)(yr,["width","height","x","y","offset"]);Qe.attr((0,V.__assign)((0,V.__assign)({},wr),{x:qe||c/2-_r+ir,y:tr||-Ne/2,width:_r,height:Ne}))}else yr.show&&this.drawStateIcon(r,M);this.updateLinkPoints(r,M)}},"single-node"),ni.registerNode("star",{options:{size:60,style:{stroke:Ke.defaultNode.style.stroke,fill:Ke.defaultNode.style.fill,lineWidth:Ke.defaultNode.style.lineWidth},labelCfg:{style:{fill:Ke.nodeLabel.style.fill,fontSize:Ke.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Ke.defaultNode.linkPoints.size,lineWidth:Ke.defaultNode.linkPoints.lineWidth,fill:Ke.defaultNode.linkPoints.fill,stroke:Ke.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,V.__assign)({},Ke.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(r,t){var e=this.getOptions(r).icon,n=e===void 0?{}:e,a=this.getShapeStyle(r),o=t.addShape("path",{attrs:a,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),s=n.width,l=n.height,u=n.show;if(u)var h=t.addShape("image",{attrs:(0,V.__assign)({x:-s/2,y:-l/2},n),className:this.type+"-icon",name:this.type+"-icon",draggable:!0});return this.drawLinkPoints(r,t),o},drawLinkPoints:function(r,t){var e=this.getOptions(r).linkPoints,n=e===void 0?{}:e,a=n.top,o=n.left,s=n.right,l=n.leftBottom,u=n.rightBottom,h=n.size,c=n.r,v=(0,V.__rest)(n,["top","left","right","leftBottom","rightBottom","size","r"]),x=this.getSize(r),M=x[0];if(s){var k=Math.cos((18+72*0)/180*Math.PI)*M,R=Math.sin((18+72*0)/180*Math.PI)*M;t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},v),{x:k,y:-R,r:h/2||c||5}),className:"link-point-right",name:"link-point-right"})}if(a){var k=Math.cos((18+72*1)/180*Math.PI)*M,R=Math.sin((18+72*1)/180*Math.PI)*M;t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},v),{x:k,y:-R,r:h/2||c||5}),className:"link-point-top",name:"link-point-top"})}if(o){var k=Math.cos((18+72*2)/180*Math.PI)*M,R=Math.sin((18+72*2)/180*Math.PI)*M;t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},v),{x:k,y:-R,r:h/2||c||5}),className:"link-point-left",name:"link-point-left"})}if(l){var k=Math.cos((18+72*3)/180*Math.PI)*M,R=Math.sin((18+72*3)/180*Math.PI)*M;t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},v),{x:k,y:-R,r:h/2||c||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(u){var k=Math.cos((18+72*4)/180*Math.PI)*M,R=Math.sin((18+72*4)/180*Math.PI)*M;t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},v),{x:k,y:-R,r:h/2||c||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(r){for(var t=this.getSize(r),e=t[0],n=e*3/8,a=r.innerR||n,o=[],s=0;s<5;s++){var l=Math.cos((18+72*s)/180*Math.PI)*e,u=Math.sin((18+72*s)/180*Math.PI)*e,h=Math.cos((54+72*s)/180*Math.PI)*a,c=Math.sin((54+72*s)/180*Math.PI)*a;s===0?o.push(["M",l,-u]):o.push(["L",l,-u]),o.push(["L",h,-c])}return o.push(["Z"]),o},getShapeStyle:function(r){var t=this.getOptions(r).style,e={stroke:r.color},n=(0,f.mix)({},t,e),a=this.getPath(r),o=(0,V.__assign)({path:a},n);return o},update:function(r,t){var e=t.getContainer(),n=this.getOptions({}).style,a=this.getPath(r),o={stroke:r.color,path:a},s=t.get("keyShape"),l=(0,f.mix)({},n,s.attr(),o);l=(0,f.mix)(l,r.style),this.updateShape(r,t,l,!0),this.updateLinkPoints(r,e)},updateLinkPoints:function(r,t){var e=this.getOptions({}).linkPoints,n=t.find(function(xe){return xe.get("className")==="link-point-left"}),a=t.find(function(xe){return xe.get("className")==="link-point-right"}),o=t.find(function(xe){return xe.get("className")==="link-point-top"}),s=t.find(function(xe){return xe.get("className")==="link-point-left-bottom"}),l=t.find(function(xe){return xe.get("className")==="link-point-right-bottom"}),u=e,h=n||a||o||s||l;h&&(u=h.attr());var c=(0,f.mix)({},u,r.linkPoints),v=c.fill,x=c.stroke,M=c.lineWidth,k=c.size/2;k||(k=c.r);var R=r.linkPoints?r.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},G=R.left,N=R.right,ot=R.top,ut=R.leftBottom,Mt=R.rightBottom,zt=this.getSize(r),$t=zt[0],ee={r:k,fill:v,stroke:x,lineWidth:M},Ut=Math.cos((18+72*0)/180*Math.PI)*$t,le=Math.sin((18+72*0)/180*Math.PI)*$t;a?!N&&N!==void 0?a.remove():a.attr((0,V.__assign)((0,V.__assign)({},ee),{x:Ut,y:-le})):N&&t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},ee),{x:Ut,y:-le}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),Ut=Math.cos((18+72*1)/180*Math.PI)*$t,le=Math.sin((18+72*1)/180*Math.PI)*$t,o?!ot&&ot!==void 0?o.remove():o.attr((0,V.__assign)((0,V.__assign)({},ee),{x:Ut,y:-le})):ot&&t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},ee),{x:Ut,y:-le}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),Ut=Math.cos((18+72*2)/180*Math.PI)*$t,le=Math.sin((18+72*2)/180*Math.PI)*$t,n?!G&&G!==void 0?n.remove():n.attr((0,V.__assign)((0,V.__assign)({},ee),{x:Ut,y:-le})):G&&t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},ee),{x:Ut,y:-le}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),Ut=Math.cos((18+72*3)/180*Math.PI)*$t,le=Math.sin((18+72*3)/180*Math.PI)*$t,s?!ut&&ut!==void 0?s.remove():s.attr((0,V.__assign)((0,V.__assign)({},ee),{x:Ut,y:-le})):ut&&t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},ee),{x:Ut,y:-le}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0}),Ut=Math.cos((18+72*4)/180*Math.PI)*$t,le=Math.sin((18+72*4)/180*Math.PI)*$t,l?!Mt&&Mt!==void 0?s.remove():l.attr((0,V.__assign)((0,V.__assign)({},ee),{x:Ut,y:-le})):Mt&&t.addShape("circle",{attrs:(0,V.__assign)((0,V.__assign)({},ee),{x:Ut,y:-le}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0})}},"single-node"),ni.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(r,t){var e=this.shapeType,n=this.getShapeStyle(r);delete n.fill;var a=t.addShape(e,{attrs:n,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawClip(r,a),a},drawClip:function(r,t){var e=this.getOptions(r).clipCfg;if(!!e.show){var n=e.type,a=e.x,o=e.y,s=e.style;if(n==="circle"){var l=e.r;t.setClip({type:"circle",attrs:(0,V.__assign)({r:l,x:a,y:o},s)})}else if(n==="rect"){var u=e.width,h=e.height,c=a-u/2,v=o-h/2;t.setClip({type:"rect",attrs:(0,V.__assign)({x:c,y:v,width:u,height:h},s)})}else if(n==="ellipse"){var x=e.rx,M=e.ry;t.setClip({type:"ellipse",attrs:(0,V.__assign)({x:a,y:o,rx:x,ry:M},s)})}else if(n==="polygon"){var k=e.points;t.setClip({type:"polygon",attrs:(0,V.__assign)({points:k},s)})}else if(n==="path"){var R=e.path;t.setClip({type:"path",attrs:(0,V.__assign)({path:R},s)})}}},getShapeStyle:function(r){var t=this.getOptions(r).style,e=this.getSize(r),n=this.getOptions(r).img,a=e[0],o=e[1];t&&(a=t.width||e[0],o=t.height||e[1]);var s=(0,V.__assign)({x:-a/2,y:-o/2,width:a,height:o,img:n},t);return s},updateShapeStyle:function(r,t){var e=t.getContainer(),n=this.itemType+"-shape",a=e.find(function(s){return s.get("className")===n})||t.getKeyShape(),o=this.getShapeStyle(r);a&&a.attr(o)}},"single-node");function Su(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Su=function(t){return typeof t}:Su=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Su(i)}var Cu=function(r){var t=r.x,e=r.y;return{x:t,y:e,centerX:t,centerY:e,minX:t,minY:e,maxX:t,maxY:e,height:0,width:0}},f6=function(r){r===void 0&&(r=[]);var t=[],e=[];r.forEach(function(l){t.push(l.x),e.push(l.y)});var n=Math.min.apply(Math,t),a=Math.max.apply(Math,t),o=Math.min.apply(Math,e),s=Math.max.apply(Math,e);return{centerX:(n+a)/2,centerY:(o+s)/2,maxX:a,maxY:s,minX:n,minY:o,height:s-o,width:a-n}},Qx=function(r,t){return Math.abs(r.centerX-t.centerX)*2<r.width+t.width&&Math.abs(r.centerY-t.centerY)*2<r.height+t.height},Jh=function(r){var t=[],e={};return r.forEach(function(n){var a=n.x+"-"+n.y;n.id=a,e[a]=n}),(0,f.each)(e,function(n){t.push(n)}),t},Mu=function(r){return r=Jh(r),r},Jx=function(r,t){return[r,{x:r.x,y:t.y},t]},Eu=function(r,t){return r.width===0&&r.height===0?r:{centerX:r.centerX,centerY:r.centerY,minX:r.minX-t,minY:r.minY-t,maxX:r.maxX+t,maxY:r.maxY+t,height:r.height+2*t,width:r.width+2*t}},h6=function(r,t){var e=Math.abs(r.x-t.centerX),n=Math.abs(r.y-t.centerY);return e/t.width>n/t.height},qh=function(r,t){var e=h6(t,r);return e?{x:t.x>r.centerX?r.maxX:r.minX,y:t.y}:{x:t.x,y:t.y>r.centerY?r.maxY:r.minY}},tc=function(r,t){var e=Math.min(r.minX,t.minX),n=Math.min(r.minY,t.minY),a=Math.max(r.maxX,t.maxX),o=Math.max(r.maxY,t.maxY);return{centerX:(e+a)/2,centerY:(n+o)/2,minX:e,minY:n,maxX:a,maxY:o,height:o-n,width:a-e}},ec=function(r){var t=r.minX,e=r.minY,n=r.maxX,a=r.maxY;return[{x:t,y:e},{x:n,y:e},{x:n,y:a},{x:t,y:a}]},_u=function(r,t){var e=r.x,n=r.y;return e<t.minX||e>t.maxX||n<t.minY||n>t.maxY},c6=function(r,t){return t<r.minX||t>r.maxX?[]:[{x:t,y:r.minY},{x:t,y:r.maxY}]},v6=function(r,t){return t<r.minY||t>r.maxY?[]:[{x:r.minX,y:t},{x:r.maxX,y:t}]},d6=function(r,t){return c6(r,t.x).concat(v6(r,t.y))},Rs=function(r,t){return Math.abs(r.x-t.x)+Math.abs(r.y-t.y)},p6=function(r,t){var e=-2,n=0;return t.forEach(function(a){a&&(r.x===a.x&&(n+=e),r.y===a.y&&(n+=e))}),n},qx=function(r,t,e,n,a){return Rs(r,t)+Rs(r,e)+p6(r,[t,e,n,a])},g6=function i(r,t,e,n,a){a===void 0&&(a=0),r.unshift(t[n]),e[n]&&e[n]!==n&&a<=100&&i(r,t,e,e[n],a+1)},y6=function(r,t){var e=r.indexOf(t);e>-1&&r.splice(e,1)},Au=function(r,t,e,n){var a=t.x-r.x,o=t.y-r.y,s=n.x-e.x,l=n.y-e.y,u=(-o*(r.x-e.x)+a*(r.y-e.y))/(-s*o+a*l),h=(s*(r.y-e.y)-l*(r.x-e.x))/(-s*o+a*l);return u>=0&&u<=1&&h>=0&&h<=1},rc=function(r,t,e){if(e.width===0&&e.height===0)return!1;var n=ec(e),a=n[0],o=n[1],s=n[2],l=n[3];return Au(r,t,a,o)||Au(r,t,a,l)||Au(r,t,o,s)||Au(r,t,s,l)},m6=function(r,t,e,n){var a=[];return r.forEach(function(o){o!==t&&(o.x===t.x||o.y===t.y)&&!rc(o,t,e)&&!rc(o,t,n)&&a.push(o)}),Jh(a)},x6=function(r,t,e,n,a,o,s){var l=[],u=[t],h={},c={},v={};c[t.id]=0,v[t.id]=qx(t,e,t);var x={};r.forEach(function(R){x[R.id]=R});for(var M=function(){var G,N=Infinity;if(u.forEach(function(ut){v[ut.id]<N&&(N=v[ut.id],G=ut)}),G===e){var ot=[];return g6(ot,x,h,e.id),{value:ot}}y6(u,G),l.push(G),m6(r,G,n,a).forEach(function(ut){if(l.indexOf(ut)===-1){u.indexOf(ut)===-1&&u.push(ut);var Mt=v[G.id]+Rs(G,ut);c[ut.id]&&Mt>=c[ut.id]||(h[ut.id]=G.id,c[ut.id]=Mt,v[ut.id]=c[ut.id]+qx(ut,e,t,o,s))}})};u.length;){var k=M();if(Su(k)==="object")return k.value}return[t,e]},b6=function(r,t,e){return!(r.x===t.x&&t.x===e.x||r.y===t.y&&t.y===e.y)},w6=function(r,t,e,n){var a=Rs(r,t),o=Rs(e,t);a<n&&(n=a),o<n&&(n=o);var s={x:t.x-n/a*(t.x-r.x),y:t.y-n/a*(t.y-r.y)},l={x:t.x-n/o*(t.x-e.x),y:t.y-n/o*(t.y-e.y)};return[s,l]},t1=function(r,t){var e=[],n=r[0];return e.push("M"+n.x+" "+n.y),r.forEach(function(a,o){var s=r[o+1],l=r[o+2];if(s&&l)if(b6(a,s,l)){var u=w6(a,s,l,t),h=u[0],c=u[1];e.push("L"+h.x+" "+h.y),e.push("Q"+s.x+" "+s.y+" "+c.x+" "+c.y),e.push("L"+c.x+" "+c.y)}else e.push("L"+s.x+" "+s.y);else s&&e.push("L"+s.x+" "+s.y)}),e.join("")},S6=function(r,t,e,n,a){var o,s;if(!e||!e.getType())o=Cu(r);else if(e.getType()==="combo"){var l=e.getKeyShape();o=l.getCanvasBBox()||Cu(r),o.centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=e.getBBox();if(!n||!n.getType())s=Cu(t);else if(n.getType()==="combo"){var u=n.getKeyShape();s=u.getCanvasBBox()||Cu(t),s.centerX=(s.minX+s.maxX)/2,s.centerY=(s.minY+s.maxY)/2}else s=n&&n.getBBox();if(Qx(o,s))return Mu(Jx(r,t));var h=Eu(o,a),c=Eu(s,a);if(Qx(h,c))return Mu(Jx(r,t));var v=qh(h,r),x=qh(c,t),M=f6([v,x]),k=tc(h,c),R=tc(h,M),G=tc(c,M),N=[];N=N.concat(ec(R)),N=N.concat(ec(G));var ot={x:(r.x+t.x)/2,y:(r.y+t.y)/2};[M,R,G].forEach(function(Mt){N=N.concat(d6(Mt,ot).filter(function(zt){return _u(zt,h)&&_u(zt,c)}))}),[{x:v.x,y:x.y},{x:x.x,y:v.y}].forEach(function(Mt){_u(Mt,h)&&_u(Mt,c)&&N.push(Mt)}),N.unshift(v),N.push(x),N=Jh(N);var ut=x6(N,v,x,o,s,r,t);return ut.unshift(r),ut.push(t),Mu(ut)};function Tu(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Tu=function(t){return typeof t}:Tu=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tu(i)}var C6=function(r,t){return Math.abs(r.x-t.x)+Math.abs(r.y-t.y)},M6=function(r,t){return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))},E6=function(r,t){return[r,t]},_6=function(r,t,e,n,a){return Mu(S6(r,t,e,n,a.offset))},A6={offset:20,maxAllowedDirectionChange:90,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:C6,fallbackRoute:_6},NY={maxAllowedDirectionChange:45,directions:[{stepX:1,stepY:0},{stepX:1,stepY:1},{stepX:0,stepY:1},{stepX:-1,stepY:1},{stepX:-1,stepY:0},{stepX:-1,stepY:-1},{stepX:0,stepY:-1},{stepX:1,stepY:-1}],distFunc:M6,fallbackRoute:E6},ma=function(r,t){var e=Math.floor(r/t);return e<0?0:e},T6=function(r,t,e){var n={};return r.forEach(function(a){if(a)for(var o=Eu(a.getBBox(),e),s=ma(o.minX,t);s<=ma(o.maxX,t);s+=1)for(var l=ma(o.minY,t);l<=ma(o.maxY,t);l+=1){var u=s+"-"+l;n[u]=!0}}),n},nc=function(r,t){var e=t.x-r.x,n=t.y-r.y;if(!e&&!n)return 0;var a=(360+Math.atan2(n,e)*180/Math.PI)%360;return a},e1=function(r,t){var e=Math.abs(r-t);return e>180?360-e:e},r1=function(r,t,e){for(var n=Infinity,a=0,o=t.length;a<o;a++){var s=e(r,t[a]);s<n&&(n=s)}return n},n1=function(r,t,e){var n=[];if(!t)return n;var a=e.directions,o=e.offset,s=t.getBBox(),l=Eu(t.getBBox(),o);for(var u in l)l[u]=ma(l[u],e.gridSize);var h=r.x>ma(s.minX,e.gridSize)&&r.x<ma(s.maxX,e.gridSize)&&r.y>ma(s.minY,e.gridSize)&&r.y<ma(s.maxY,e.gridSize);if(h)for(var c=0,v=a;c<v.length;c++)for(var x=v[c],M=[[{x:l.minX,y:l.minY},{x:l.maxX,y:l.minY}],[{x:l.minX,y:l.minY},{x:l.minX,y:l.maxY}],[{x:l.maxX,y:l.minY},{x:l.maxX,y:l.maxY}],[{x:l.minX,y:l.maxY},{x:l.maxX,y:l.maxY}]],u=0;u<4;u++){var k=M[u],R=Ps(r,{x:r.x+x.stepX*l.width,y:r.y+x.stepY*l.height},k[0],k[1]);R&&!rc(r,R,t.getBBox())&&(R.id=R.x+"-"+R.y,n.push(R))}else{var R=qh(l,r);R.id=R.x+"-"+R.y,n.push(R)}return n},i1=function(r,t,e,n,a){var o=(0,Ui.default)(A6,a);o.obstacles=o.obstacles||[];var s=T6(o.obstacles.concat([e,n]),o.gridSize,o.offset),l={x:ma(r.x,o.gridSize),y:ma(r.y,o.gridSize)},u={x:ma(t.x,o.gridSize),y:ma(t.y,o.gridSize)};r.id=l.x+"-"+l.y,t.id=u.x+"-"+u.y;var h=n1(l,e,o),c=n1(u,n,o);h.forEach(function(ee){delete s[ee.id]}),c.forEach(function(ee){delete s[ee.id]});for(var v={},x={},M={},k={},R={},G=0;G<h.length;G++){var N=h[G];v[N.id]=N,k[N.id]=0,R[N.id]=r1(N,c,o.distFunc)}for(var ot=function(Ut,le){var xe=nc(Ut,le),ye;if(M[Ut.id]){var Ge=nc({x:parseFloat(M[Ut.id].split("-")[0]),y:parseFloat(M[Ut.id].split("-")[1])},Ut);ye=e1(Ge,xe)}else{var Oe=nc(l,Ut);ye=e1(Oe,xe)}return ye},ut=function(Ut){var le=[t],xe={x:parseFloat(Ut.split("-")[0]),y:parseFloat(Ut.split("-")[1]),id:Ut};for(ot(xe,u)&&le.unshift({x:xe.x===u.x?t.x:xe.x*o.gridSize,y:xe.y===u.y?t.y:xe.y*o.gridSize});M[Ut]&&M[Ut]!==Ut;){var ye={x:parseFloat(Ut.split("-")[0]),y:parseFloat(Ut.split("-")[1]),id:Ut},Oe=M[Ut],Ge={x:parseFloat(Oe.split("-")[0]),y:parseFloat(Oe.split("-")[1]),id:Oe},Ne=ot(Ge,ye);Ne&&le.unshift({x:Ge.x===ye.x?le[0].x:Ge.x*o.gridSize,y:Ge.y===ye.y?le[0].y:Ge.y*o.gridSize}),Ut=Oe}var qe={x:parseFloat(Ut.split("-")[0]),y:parseFloat(Ut.split("-")[1]),id:Ut};return le[0].x=qe.x===l.x?r.x:le[0].x,le[0].y=qe.y===l.y?r.y:le[0].y,le.unshift(r),le},Mt=o.maximumLoops,zt=function(){var Ut,le=Infinity;for(var xe in v)R[xe]<=le&&(le=R[xe],Ut=v[xe]);if(!Ut)return"break";if(c.findIndex(function($e){return $e.x===Ut.x&&$e.y===Ut.y})>-1){var ye=ut(Ut.id);return{value:ye}}delete v[Ut.id],x[Ut.id]=!0;for(var Oe=0;Oe<o.directions.length;Oe++){var Ge=o.directions[Oe],Ne={x:Ut.x+Ge.stepX,y:Ut.y+Ge.stepY,id:Ut.x+Ge.stepX+"-"+(Ut.y+Ge.stepY)};if(!x[Ne.id]){var qe=ot(Ut,Ne);if(!(qe>o.maxAllowedDirectionChange)&&!s[Ne.id]){v[Ne.id]||(v[Ne.id]=Ne);var tr=o.distFunc(Ut,Ne)+(isNaN(o.penalties[qe])?o.gridSize:o.penalties[qe]),rr=k[Ut.id]+tr;k[Ne.id]&&rr>=k[Ne.id]||(M[Ne.id]=Ut.id,k[Ne.id]=rr,R[Ne.id]=rr+r1(Ne,c,o.distFunc))}}}Mt-=1};Object.keys(v).length>0&&Mt>0;){var $t=zt();if(Tu($t)==="object")return $t.value;if($t==="break")break}return o.fallbackRoute(r,t,e,n,o)};ni.registerEdge("polyline",{options:{color:Ke.defaultEdge.color,size:Ke.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:Ke.defaultEdge.style.stroke,lineAppendWidth:Ke.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Ke.edgeLabel.style.fill,fontSize:Ke.edgeLabel.style.fontSize}},routeCfg:{obstacles:[],maxAllowedDirectionChange:90,maximumLoops:1e3,gridSize:10},stateStyles:(0,V.__assign)({},Ke.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(r,t){var e=this.getShapeStyle(r);e.radius===0&&delete e.radius;var n=t.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:e});return n},getShapeStyle:function(r){var t=this.options.style,e={stroke:r.color},n=(0,f.mix)({},t,e,r.style);r=this.getPathPoints(r),this.radius=n.radius,this.offset=n.offset;var a=r.startPoint,o=r.endPoint,s=this.getControlPoints(r),l=[a];s&&(l=l.concat(s)),l.push(o);var u=r.sourceNode,h=r.targetNode,c=n.radius,v=this.options.routeCfg;v.offset=n.offset;var x=this.getPath(l,u,h,c,v);((0,f.isArray)(x)&&x.length<=1||(0,f.isString)(x)&&x.indexOf("L")===-1)&&(x="M0 0, L0 0"),(isNaN(a.x)||isNaN(a.y)||isNaN(o.x)||isNaN(o.y))&&(x="M0 0, L0 0");var M=(0,f.mix)({},Ke.defaultEdge.style,n,{lineWidth:r.size,path:x});return M},updateShapeStyle:function(r,t){var e=t.getContainer(),n={stroke:r.color},a=e.find(function(N){return N.get("className")==="edge-shape"})||t.getKeyShape(),o=r.size;r=this.getPathPoints(r);var s=r.startPoint,l=r.endPoint,u=this.getControlPoints(r),h=[s];u&&(h=h.concat(u)),h.push(l);var c=(0,f.mix)({},n,a.attr(),r.style),v=r.sourceNode,x=r.targetNode,M=c.radius,k=this.options.routeCfg;k.offset=c.offset;var R=this.getPath(h,v,x,M,k);((0,f.isArray)(R)&&R.length<=1||(0,f.isString)(R)&&R.indexOf("L")===-1)&&(R="M0 0, L0 0"),(isNaN(s.x)||isNaN(s.y)||isNaN(l.x)||isNaN(l.y))&&(R="M0 0, L0 0");var G=(0,f.mix)(n,a.attr(),{lineWidth:o,path:R},r.style);a&&a.attr(G)},getPath:function(r,t,e,n,a){var o=a.offset;if(!o||r.length>2){if(n)return t1(r,n);var s=[];return(0,f.each)(r,function(c,v){v===0?s.push(["M",c.x,c.y]):s.push(["L",c.x,c.y])}),s}var l;if(n){l=i1(r[0],r[r.length-1],t,e,a);var u=t1(l,n);return u}l=i1(r[0],r[r.length-1],t,e,a);var h=Ym(l);return h}},"single-edge");var P6={triangle:function(r,t,e){r===void 0&&(r=10),t===void 0&&(t=15),e===void 0&&(e=0);var n=e*2,a="M "+n+",0 L "+(n+t)+",-"+r/2+" L "+(n+t)+","+r/2+" Z";return a},vee:function(r,t,e){r===void 0&&(r=15),t===void 0&&(t=20),e===void 0&&(e=0);var n=e*2,a="M "+n+",0 L "+(n+t)+",-"+r/2+`
        L `+(n+2*t/3)+",0 L "+(n+t)+","+r/2+" Z";return a},circle:function(r,t){r===void 0&&(r=5),t===void 0&&(t=0);var e=t*2,n="M "+e+`, 0
            a `+r+","+r+" 0 1,0 "+r*2+`,0
            a `+r+","+r+" 0 1,0 "+-r*2+",0";return n},rect:function(r,t,e){r===void 0&&(r=10),t===void 0&&(t=10),e===void 0&&(e=0);var n=e*2,a="M "+n+","+-r/2+` 
        L `+(n+t)+","+-r/2+` 
        L `+(n+t)+","+r/2+` 
        L `+n+","+r/2+" Z";return a},diamond:function(r,t,e){r===void 0&&(r=15),t===void 0&&(t=15),e===void 0&&(e=0);var n=e*2,a="M "+n+`,0 
        L `+(n+t/2)+","+-r/2+` 
        L `+(n+t)+`,0 
        L `+(n+t/2)+","+r/2+" Z";return a},triangleRect:function(r,t,e,n,a,o){r===void 0&&(r=15),t===void 0&&(t=15),e===void 0&&(e=15),n===void 0&&(n=3),a===void 0&&(a=5),o===void 0&&(o=0);var s=o*2,l=s+t+a,u="M "+s+",0 L "+(s+t)+",-"+r/2+" L "+(s+t)+","+r/2+` Z
            M `+l+", -"+e/2+`
            L `+(l+n)+" -"+e/2+`
            L `+(l+n)+" "+e/2+`
            L `+l+" "+e/2+`
            Z`;return u}},L6={collapse:function(r,t,e){return[["M",r-e,t],["a",e,e,0,1,0,e*2,0],["a",e,e,0,1,0,-e*2,0],["M",r-e+4,t],["L",r+e-4,t]]},expand:function(r,t,e){return[["M",r-e,t],["a",e,e,0,1,0,e*2,0],["a",e,e,0,1,0,-e*2,0],["M",r-e+4,t],["L",r-e+2*e-4,t],["M",r-e+e,t-e+4],["L",r,t+e-4]]},upTriangle:function(r,t,e){var n=e*Math.cos(Math.PI/6),a=e*Math.sin(Math.PI/6);return[["M",r-n,t+a],["L",r+n,t+a],["L",r,t-e],["Z"]]},downTriangle:function(r,t,e){var n=e*Math.cos(Math.PI/6),a=e*Math.sin(Math.PI/6);return[["M",r-n,t-a],["L",r+n,t-a],["L",r,t+e],["Z"]]}},ss=ni,O6={mat3:Oa.wO,mix:Ds.default,deepMix:Ui.default,transform:Oa.vs},I6=(0,V.__assign)((0,V.__assign)((0,V.__assign)((0,V.__assign)((0,V.__assign)((0,V.__assign)({},O6),Gt),dt),Q),nt),Z),k6=I6,B6=function(){function i(r){this._cfgs=(0,Ui.default)(this.getDefaultCfgs(),r),this._events={},this.destroyed=!1}return i.prototype.getDefaultCfgs=function(){return{}},i.prototype.initPlugin=function(r){var t=this;t.set("graph",r);var e=t.getEvents(),n={};(0,Tn.default)(e,function(a,o){var s=(0,eu.default)(t,a);n[o]=s,r.on(o,s)}),this._events=n,this.init()},i.prototype.init=function(){},i.prototype.getEvents=function(){return{}},i.prototype.get=function(r){return this._cfgs[r]},i.prototype.set=function(r,t){this._cfgs[r]=t},i.prototype.destroy=function(){},i.prototype.destroyPlugin=function(){this.destroy();var r=this.get("graph"),t=this._events;(0,Tn.default)(t,function(e,n){r.off(n,e)}),this._events=null,this._cfgs=null,this.destroyed=!0},i}(),Va=B6,a1="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",D6=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfgs=function(){return{img:a1}},r.prototype.init=function(){var t=this.get("graph"),e=t.get("minZoom"),n=t.get("container"),a=t.get("canvas").get("el"),o=t.get("width"),s=t.get("height"),l=this.get("img")||a1,u=(0,di.Z)(`<div class='g6-grid-container' style="position: absolute; left:0;top:0;right:0;bottom:0;overflow: hidden;z-index: -1;"></div>`),h=(0,di.Z)(`<div 
        class='g6-grid' 
        style='position:absolute;
        transform-origin: 0% 0% 0px;
        background-image: `+l+`;
        user-select: none
        '></div>`);u.appendChild(h),(0,On.Z)(u,{width:o+"px",height:s+"px",left:n.offsetLeft+"px",top:n.offsetTop+"px"}),(0,On.Z)(h,{width:o/e+"px",height:s/e+"px",left:"0px",top:"0px"}),n.insertBefore(u,a),this.set("container",u),this.set("gridContainer",h)},r.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},r.prototype.updateGrid=function(t){var e=this.get("gridContainer"),n=t.matrix;n||(n=[1,0,0,0,1,0,0,0,1]);var a="matrix("+n[0]+", "+n[1]+", "+n[3]+", "+n[4]+", 0, 0)";(0,On.Z)(e,{transform:a})},r.prototype.getContainer=function(){return this.get("container")},r.prototype.destroy=function(){var t=this.get("graph"),e=t.get("container"),n=this.get("container");e.removeChild(n)},r}(Va),F6=D6,R6=p(38186),ic=p.n(R6);ic()(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var N6=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(e){return`
          <ul class='g6-contextmenu-ul'>
            <li>\u83DC\u5355\u98791</li>
            <li>\u83DC\u5355\u98792</li>
          </ul>
        `},shouldBegin:function(e){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"]}},r.prototype.getEvents=function(){return{contextmenu:"onMenuShow"}},r.prototype.init=function(){var t=this.get("className"),e=(0,di.Z)("<div class="+(t||"g6-component-contextmenu")+"></div>");(0,On.Z)(e,{top:"0px",position:"absolute",visibility:"hidden"});var n=this.get("container");n||(n=this.get("graph").get("container")),n.appendChild(e),this.set("menu",e)},r.prototype.onMenuShow=function(t){var e=this;if(t.preventDefault(),t.stopPropagation(),!!t.item){var n=this.get("shouldBegin");if(!!n(t)){var a=this.get("itemTypes");if(t.item&&t.item.getType&&a.indexOf(t.item.getType())===-1){e.onMenuHide();return}if(!!t.item){var o=this.get("menu"),s=this.get("getContent"),l=this.get("graph"),u=s(t,l);(0,Cn.default)(u)?o.innerHTML=u:o.innerHTML=u.outerHTML,this.removeMenuEventListener();var h=this.get("handleMenuClick");if(h){var c=function($t){h($t.target,t.item,l)};this.set("handleMenuClickWrapper",c),o.addEventListener("click",c)}var v=l.get("width"),x=l.get("height"),M=o.getBoundingClientRect(),k=this.get("offsetX")||0,R=this.get("offsetY")||0,G=l.getContainer().offsetTop,N=l.getContainer().offsetLeft,ot=t.canvasX+N+k,ut=t.canvasY+G+R;ot+M.width>v&&(ot=t.canvasX-M.width-k+N),ut+M.height>x&&(ut=t.canvasY-M.height-R+G),(0,On.Z)(o,{top:ut+"px",left:ot+"px",visibility:"visible"});var Mt=function($t){e.onMenuHide()};document.body.addEventListener("click",Mt),this.set("handler",Mt)}}}},r.prototype.removeMenuEventListener=function(){var t=this.get("handleMenuClickWrapper"),e=this.get("handler");if(t){var n=this.get("menu");n.removeEventListener("click",t),this.set("handleMenuClickWrapper",null)}e&&document.body.removeEventListener("click",e)},r.prototype.onMenuHide=function(){var t=this.get("menu");t&&(0,On.Z)(t,{visibility:"hidden"}),this.removeMenuEventListener()},r.prototype.destroy=function(){var t=this.get("menu");if(this.removeMenuEventListener(),t){var e=this.get("container");e||(e=this.get("graph").get("container")),e.removeChild(t)}},r}(Va),G6=N6,o1=Math.max,Y6="default",z6="keyShape",X6="delegate",s1="svg",V6=function(i){(0,V.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.handleUpdateCanvas=(0,f.debounce)(function(e){var n=t;n.destroyed||n.updateCanvas()},100,!1),t}return r.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},r.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},r.prototype.disableRefresh=function(){this.set("refresh",!1)},r.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},r.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},r.prototype.initViewport=function(){var t=this,e=this._cfgs,n=e.size,a=e.graph;if(!this.destroyed){var o=this.get("canvas"),s=o.get("container"),l=(0,di.Z)(`
      <div
        class=`+e.viewportClassName+`
        style='position:absolute;
          left:0;
          top:0;
          box-sizing:border-box;
          border: 2px solid #1980ff'
        draggable=true>
      </div>`),u=0,h=0,c=!1,v=0,x=0,M=0,k=0,R=0,G=0;l.addEventListener("dragstart",function(N){if(N.dataTransfer){var ot=new Image;ot.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",N.dataTransfer.setDragImage(ot,0,0),N.dataTransfer.setData("text","view-port-minimap")}if(e.refresh=!1,N.target===l){var ut=l.style;v=parseInt(ut.left,10),x=parseInt(ut.top,10),M=parseInt(ut.width,10),k=parseInt(ut.height,10),!(M>n[0]||k>n[1])&&(G=a.getZoom(),R=t.get("ratio"),c=!0,u=N.clientX,h=N.clientY)}},!1),l.addEventListener("drag",function(N){if(!(!c||(0,Fi.default)(N.clientX)||(0,Fi.default)(N.clientY))){var ot=u-N.clientX,ut=h-N.clientY;(v-ot<0||v-ot+M>=n[0])&&(ot=0),(x-ut<0||x-ut+k>=n[1])&&(ut=0),v-=ot,x-=ut,(0,On.Z)(l,{left:v+"px",top:x+"px"}),a.translate(ot*G/R,ut*G/R),u=N.clientX,h=N.clientY}},!1),l.addEventListener("dragend",function(){c=!1,e.refresh=!0},!1),this.set("viewport",l),s.appendChild(l)}},r.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),e=this.get("dx"),n=this.get("dy"),a=this.get("totaldx"),o=this.get("totaldy"),s=this.get("graph"),l=this.get("size"),u=s.get("width"),h=s.get("height"),c=s.getPointByCanvas(0,0),v=s.getPointByCanvas(u,h),x=this.get("viewport");x||this.initViewport();var M=s.getZoom(),k=(v.x-c.x)*t,R=(v.y-c.y)*t,G=c.x*t+a,N=c.y*t+o,ot=G+k,ut=N+R;G<0&&(k+=G,G=0),ot>l[0]&&(k=k-(ot-l[0])),N<0&&(R+=N,N=0),ut>l[1]&&(R=R-(ut-l[1])),this.set("ratio",t);var Mt=G+"px",zt=N+"px";(0,On.Z)(x,{left:Mt,top:zt,width:k+"px",height:R+"px"})}},r.prototype.updateGraphShapes=function(){var t=this._cfgs.graph,e=this.get("canvas"),n=t.get("group");if(!n.destroyed){var a=n.clone();a.resetMatrix(),e.clear(),e.add(a);var o=t.get("renderer");o===s1&&this.updateVisible(a)}},r.prototype.updateVisible=function(t){var e=this;if(!t.isGroup()&&!t.get("visible"))t.hide();else{var n=t.get("children");if(!n||!n.length)return;n.forEach(function(a){a.get("visible")||a.hide(),e.updateVisible(a)})}},r.prototype.updateKeyShapes=function(){var t=this,e=this._cfgs.graph;(0,Tn.default)(e.getEdges(),function(n){t.updateOneEdgeKeyShape(n)}),(0,Tn.default)(e.getNodes(),function(n){t.updateOneNodeKeyShape(n)}),this.clearDestroyedShapes()},r.prototype.updateOneNodeKeyShape=function(t){var e=this.get("canvas"),n=e.get("children")[0]||e.addGroup(),a=this.get("itemMap")||{},o=a[t.get("id")],s=t.getBBox(),l=t.get("keyShape").clone(),u=l.attr(),h={x:s.centerX,y:s.centerY};o?h=Object.assign(u,h):(o=l,n.add(o));var c=o.get("type");(c==="rect"||c==="image")&&(h.x=s.minX,h.y=s.minY),o.attr(h),t.isVisible()||o.hide(),o.exist=!0,a[t.get("id")]=o,this.set("itemMap",a)},r.prototype.updateDelegateShapes=function(){var t=this,e=this._cfgs.graph;(0,Tn.default)(e.getEdges(),function(n){t.updateOneEdgeKeyShape(n)}),(0,Tn.default)(e.getNodes(),function(n){t.updateOneNodeDelegateShape(n)}),this.clearDestroyedShapes()},r.prototype.clearDestroyedShapes=function(){var t=this.get("itemMap")||{},e=Object.keys(t);if(!(!e||e.length===0))for(var n=e.length-1;n>=0;n--){var a=t[e[n]],o=a.exist;a.exist=!1,o||(a.remove(),delete t[e[n]])}},r.prototype.updateOneEdgeKeyShape=function(t){var e=this.get("canvas"),n=e.get("children")[0]||e.addGroup(),a=this.get("itemMap")||{},o=a[t.get("id")];if(o){var s=t.get("keyShape").attr("path");o.attr("path",s)}else o=t.get("keyShape").clone(),n.add(o),o.toBack();t.isVisible()||o.hide(),o.exist=!0,a[t.get("id")]=o,this.set("itemMap",a)},r.prototype.updateOneNodeDelegateShape=function(t){var e=this.get("canvas"),n=e.get("children")[0]||e.addGroup(),a=this.get("delegateStyle"),o=this.get("itemMap")||{},s=o[t.get("id")],l=t.getBBox();if(s){var u={x:l.minX,y:l.minY,width:l.width,height:l.height};s.attr(u)}else s=n.addShape("rect",{attrs:(0,V.__assign)({x:l.minX,y:l.minY,width:l.width,height:l.height},a),name:"minimap-node-shape"});t.isVisible()||s.hide(),s.exist=!0,o[t.get("id")]=s,this.set("itemMap",o)},r.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},r.prototype.initContainer=function(){var t=this,e=t.get("graph"),n=t.get("size"),a=t.get("className"),o=t.get("container"),s=(0,di.Z)("<div class='"+a+"' style='width: "+n[0]+"px; height: "+n[1]+"px; overflow: hidden'></div>");(0,Cn.default)(o)&&(o=document.getElementById(o)),o?o.appendChild(s):e.get("container").appendChild(s),t.set("container",s);var l=(0,di.Z)('<div class="g6-minimap-container" style="position: relative;"></div>');s.appendChild(l);var u,h=e.get("renderer");h===s1?u=new ks.Z({container:l,width:n[0],height:n[1]}):u=new Fo.Z({container:l,width:n[0],height:n[1]}),t.set("canvas",u),t.updateCanvas()},r.prototype.updateCanvas=function(){var t=this.get("refresh");if(!!t){var e=this.get("graph");if(!e.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("size"),a=this.get("canvas"),o=this.get("type"),s=this.get("padding");if(!a.destroyed){switch(o){case Y6:this.updateGraphShapes();break;case z6:this.updateKeyShapes();break;case X6:this.updateDelegateShapes();break;default:break}var l=a.get("children")[0];if(!!l){l.resetMatrix();var u=l.getCanvasBBox(),h=e.get("canvas").getBBox(),c=h.width,v=h.height;Number.isFinite(u.width)&&(c=o1(u.width,c),v=o1(u.height,v)),c+=2*s,v+=2*s;var x=Math.min(n[0]/c,n[1]/v),M=[1,0,0,0,1,0,0,0,1],k=0,R=0;Number.isFinite(u.minX)&&(k=-u.minX),Number.isFinite(u.minY)&&(R=-u.minY);var G=(n[0]-(c-2*s)*x)/2,N=(n[1]-(v-2*s)*x)/2;M=za(M,[["t",k,R],["s",x,x],["t",G,N]]),l.setMatrix(M),this.set("ratio",x),this.set("totaldx",G+k*x),this.set("totaldy",N+R*x),this.set("dx",G),this.set("dy",N),this.updateViewport()}}}}},r.prototype.getCanvas=function(){return this.get("canvas")},r.prototype.getViewport=function(){return this.get("viewport")},r.prototype.getContainer=function(){return this.get("container")},r.prototype.destroy=function(){this.get("canvas").destroy();var t=this.get("container");t.parentNode.removeChild(t)},r}(Va),H6=V6;function Ha(i,r,t){var e=i.x-r.x,n=i.y-r.y;return!t||Math.abs(e)>t||Math.abs(n)>t?Math.sqrt(e*e+n*n):t}function W6(i,r){return i.x*r.x+i.y*r.y}function l1(i,r){var t=(r.source.y-r.target.y)/(r.source.x-r.target.x),e=(t*t*r.source.x+t*(i.y-r.source.y)+i.x)/(t*t+1),n=t*(e-r.source.x)+r.source.y;return{x:e,y:n}}var j6=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},r.prototype.init=function(){var t=this.get("graph"),e=this.get("onTick"),n=function(){e&&e(),t.refreshPositions()};this.set("tick",n)},r.prototype.bundling=function(t){var e=this;if(e.set("data",t),!e.isTicking()){var n=t.edges||[],a=t.nodes||[],o={},s=!1;if(a.forEach(function(ut){(ut.x===null||!ut.y===null||ut.x===void 0||!ut.y===void 0)&&(s=!0),o[ut.id]=ut}),s)throw new Error("please layout the graph or assign x and y for nodes first");e.set("nodeIdMap",o);var l=e.get("divisions"),u=e.get("divRate"),h=e.divideEdges(l);e.set("edgePoints",h);var c=e.getEdgeBundles();e.set("edgeBundles",c);for(var v=e.get("cycles"),x=e.get("iterations"),M=e.get("iterRate"),k=e.get("lambda"),R=0;R<v;R++){for(var G=function(Mt){var zt=[];n.forEach(function($t,ee){if($t.source!==$t.target){var Ut=o[$t.source],le=o[$t.target];zt[ee]=e.getEdgeForces({source:Ut,target:le},ee,l,k);for(var xe=0;xe<l+1;xe++)h[ee][xe].x+=zt[ee][xe].x,h[ee][xe].y+=zt[ee][xe].y}})},N=0;N<x;N++)G(N);k=k/2,l*=u,x*=M,h=e.divideEdges(l),e.set("edgePoints",h)}n.forEach(function(ut,Mt){ut.source!==ut.target&&(ut.shape="polyline",ut.type="polyline",ut.controlPoints=h[Mt].slice(1,h[Mt].length-1))});var ot=e.get("graph");ot.refresh()}},r.prototype.updateBundling=function(t){var e=this,n=t.data;if(n&&e.set("data",n),e.get("ticking")&&e.set("ticking",!1),Object.keys(t).forEach(function(o){e.set(o,t[o])}),t.onTick){var a=this.get("graph");e.set("tick",function(){t.onTick(),a.refresh()})}e.bundling(n)},r.prototype.divideEdges=function(t){var e=this,n=e.get("data").edges,a=e.get("nodeIdMap"),o=e.get("edgePoints");return(!o||o===void 0)&&(o=[]),n.forEach(function(s,l){(!o[l]||o[l]===void 0)&&(o[l]=[]);var u=a[s.source],h=a[s.target];if(t===1)o[l].push({x:u.x,y:u.y}),o[l].push({x:.5*(u.x+h.x),y:.5*(u.y+h.y)}),o[l].push({x:h.x,y:h.y});else{var c=0;!o[l]||o[l]===[]?c=Ha({x:u.x,y:u.y},{x:h.x,y:h.y}):c=e.getEdgeLength(o[l]);var v=c/(t+1),x=v,M=[{x:u.x,y:u.y}];o[l].forEach(function(k,R){if(R!==0){for(var G=Ha(k,o[l][R-1]);G>x;){var N=x/G,ot={x:o[l][R-1].x,y:o[l][R-1].y};ot.x+=N*(k.x-o[l][R-1].x),ot.y+=N*(k.y-o[l][R-1].y),M.push(ot),G-=x,x=v}x-=G}}),M.push({x:h.x,y:h.y}),o[l]=M}}),o},r.prototype.getEdgeLength=function(t){var e=0;return t.forEach(function(n,a){a!==0&&(e+=Ha(n,t[a-1]))}),e},r.prototype.getEdgeBundles=function(){var t=this,e=t.get("data"),n=e.edges||[],a=t.get("bundleThreshold"),o=t.get("nodeIdMap"),s=t.get("edgeBundles");return s||(s=[]),n.forEach(function(l,u){(!s[u]||s[u]===void 0)&&(s[u]=[])}),n.forEach(function(l,u){var h=o[l.source],c=o[l.target];n.forEach(function(v,x){if(!(x<=u)){var M=o[v.source],k=o[v.target],R=t.getBundleScore({source:h,target:c},{source:M,target:k});R>=a&&(s[u].push(x),s[x].push(u))}})}),s},r.prototype.getBundleScore=function(t,e){var n=this;t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,e.vx=e.target.x-e.source.x,e.vy=e.target.y-e.source.y,t.length=Ha({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),e.length=Ha({x:e.source.x,y:e.source.y},{x:e.target.x,y:e.target.y});var a=n.getAngleScore(t,e),o=n.getScaleScore(t,e),s=n.getPositionScore(t,e),l=n.getVisibilityScore(t,e);return a*o*s*l},r.prototype.getAngleScore=function(t,e){var n=W6({x:t.vx,y:t.vy},{x:e.vx,y:e.vy});return n/(t.length*e.length)},r.prototype.getScaleScore=function(t,e){var n=(t.length+e.length)/2,a=2/(n/Math.min(t.length,e.length)+Math.max(t.length,e.length)/n);return a},r.prototype.getPositionScore=function(t,e){var n=(t.length+e.length)/2,a={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2},o={x:(e.source.x+e.target.x)/2,y:(e.source.y+e.target.y)/2},s=Ha(a,o);return n/(n+s)},r.prototype.getVisibilityScore=function(t,e){var n=this.getEdgeVisibility(t,e),a=this.getEdgeVisibility(e,t);return n<a?n:a},r.prototype.getEdgeVisibility=function(t,e){var n=l1(e.source,t),a=l1(e.target,t),o={x:(n.x+a.x)/2,y:(n.y+a.y)/2},s={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2};return Math.max(0,1-2*Ha(o,s)/Ha(n,a))},r.prototype.getEdgeForces=function(t,e,n,a){for(var o=this,s=o.get("edgePoints"),l=o.get("K"),u=l/(Ha(t.source,t.target)*(n+1)),h=[{x:0,y:0}],c=1;c<n;c++){var v={x:0,y:0},x=o.getSpringForce({pre:s[e][c-1],cur:s[e][c],next:s[e][c+1]},u),M=o.getElectrostaticForce(c,e);v.x=a*(x.x+M.x),v.y=a*(x.y+M.y),h.push(v)}return h.push({x:0,y:0}),h},r.prototype.getSpringForce=function(t,e){var n=t.pre.x+t.next.x-2*t.cur.x,a=t.pre.y+t.next.y-2*t.cur.y;return n*=e,a*=e,{x:n,y:a}},r.prototype.getElectrostaticForce=function(t,e){var n=this,a=n.get("eps"),o=n.get("edgeBundles"),s=n.get("edgePoints"),l=o[e],u={x:0,y:0};return l.forEach(function(h){var c={x:s[h][t].x-s[e][t].x,y:s[h][t].y-s[e][t].y};if(Math.abs(c.x)>a||Math.abs(c.y)>a){var v=Ha(s[h][t],s[e][t]),x=1/v;u.x+=c.x*x,u.y+=c.y*x}}),u},r.prototype.isTicking=function(){return this.get("ticking")},r.prototype.getSimulation=function(){return this.get("forceSimulation")},r.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),i.prototype.destroy.call(this)},r}(Va),U6=j6,Pu=.05,u1={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},Z6=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:(0,$n.d9)(u1),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},r.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"magnify"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"magnify"};break}return t},r.prototype.init=function(){var t=this,e=t.get("r");t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{}),t.set("r2",e*e);var n=t.get("d");t.set("molecularParam",(n+1)*e)},r.prototype.createDelegate=function(t){var e=this,n=this,a=n.get("delegate");(!a||a.destroyed)&&(n.magnify(t),a=n.get("delegate"),a.on("dragstart",function(o){n.set("delegateCenterDiff",{x:a.attr("x")-o.x,y:a.attr("y")-o.y})}),a.on("drag",function(o){n.magnify(o)}),this.get("scaleDBy")==="wheel"&&a.on("mousewheel",function(o){e.scaleDByWheel(o)}),this.get("scaleRBy")==="wheel"&&a.on("mousewheel",function(o){n.scaleRByWheel(o)}))},r.prototype.scaleRByWheel=function(t){var e=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=e.get("graph"),a,o=e.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,l=s||n.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-Pu:a=1/(1-Pu);var u=e.get("maxR"),h=e.get("minR"),c=e.get("r");(c>(u||n.get("height"))&&a>1||c<(h||n.get("height")*.05)&&a<1)&&(a=1),c*=a,e.set("r",c),e.set("r2",c*c);var v=e.get("d");e.set("molecularParam",(v+1)*c),e.set("delegateCenterDiff",void 0),e.magnify(t,l)}},r.prototype.scaleRByDrag=function(t){var e=this;if(!!t){var n=e.get("dragPrePos"),a=e.get("graph"),o,s=a.getPointByClient(t.clientX,t.clientY);t.x-n.x<0?o=1-Pu:o=1/(1-Pu);var l=e.get("maxR"),u=e.get("minR"),h=e.get("r");(h>(l||a.get("height"))&&o>1||h<(u||a.get("height")*.05)&&o<1)&&(o=1),h*=o,e.set("r",h),e.set("r2",h*h);var c=e.get("d");e.set("molecularParam",(c+1)*h),e.magnify(t,s),e.set("dragPrePos",{x:t.x,y:t.y})}},r.prototype.scaleDByWheel=function(t){var e=this;if(!(!t&&!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=0;t.originalEvent.wheelDelta<0?n=-.1:n=.1;var a=e.get("d"),o=a+n,s=e.get("maxD"),l=e.get("minD");if(o<s&&o>l){e.set("d",o);var u=e.get("r");e.set("molecularParam",(o+1)*u);var h=e.get("delegate"),c=h?{x:h.attr("x"),y:h.attr("y")}:void 0;e.set("delegateCenterDiff",void 0),e.magnify(t,c)}}},r.prototype.scaleDByDrag=function(t){var e=this,n=e.get("dragPrePos"),a=t.x-n.x>0?.1:-.1,o=e.get("d"),s=o+a,l=e.get("maxD"),u=e.get("minD");if(s<l&&s>u){e.set("d",s);var h=e.get("r");e.set("molecularParam",(s+1)*h),e.magnify(t)}e.set("dragPrePos",{x:t.x,y:t.y})},r.prototype.magnify=function(t,e){var n=this;n.restoreCache();var a=n.get("graph"),o=n.get("cachedMagnifiedModels"),s=n.get("cachedOriginPositions"),l=n.get("showLabel"),u=n.get("r"),h=n.get("r2"),c=n.get("d"),v=n.get("molecularParam"),x=a.getNodes(),M=x.length,k=e?{x:e.x,y:e.y}:{x:t.x,y:t.y};n.get("dragging")&&(n.get("trigger")==="mousemove"||n.get("trigger")==="click")&&(k=n.get("cacheCenter"));var R=n.get("delegateCenterDiff");R&&(k.x+=R.x,k.y+=R.y),n.updateDelegate(k,u);for(var G=0;G<M;G++){var N=x[G].getModel(),ot=N.x,ut=N.y;if(!(isNaN(ot)||isNaN(ut))){var Mt=(ot-k.x)*(ot-k.x)+(ut-k.y)*(ut-k.y);if(!isNaN(Mt)&&Mt<h&&Mt!==0){var zt=Math.sqrt(Mt),$t=v*zt/(c*zt+u),ee=(ot-k.x)/zt,Ut=(ut-k.y)/zt;if(N.x=ee*$t+k.x,N.y=Ut*$t+k.y,s[N.id]||(s[N.id]={x:ot,y:ut,texts:[]}),o.push(N),l&&2*zt<u)for(var le=x[G],xe=le.getContainer(),ye=xe.getChildren(),Oe=ye.length,Ge=0;Ge<Oe;Ge++){var Ne=ye[Ge];Ne.get("type")==="text"&&(s[N.id].texts.push({visible:Ne.get("visible"),shape:Ne}),Ne.set("visible",!0))}}}}a.refreshPositions()},r.prototype.restoreCache=function(){for(var t=this,e=t.get("cachedMagnifiedModels"),n=t.get("cachedOriginPositions"),a=e.length,o=0;o<a;o++){var s=e[o],l=s.id,u=n[l];s.x=u.x,s.y=u.y;for(var h=u.texts.length,c=0;c<h;c++){var v=u.texts[c];v.shape.set("visible",v.visible)}}t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{})},r.prototype.updateParams=function(t){var e=this,n=t.r,a=t.d,o=t.trigger,s=t.minD,l=t.maxD,u=t.minR,h=t.maxR,c=t.scaleDBy,v=t.scaleRBy;isNaN(t.r)||(e.set("r",n),e.set("r2",n*n)),isNaN(a)||e.set("d",a),isNaN(l)||e.set("maxD",l),isNaN(s)||e.set("minD",s),isNaN(h)||e.set("maxR",h),isNaN(u)||e.set("minR",u);var x=e.get("d"),M=e.get("r");if(e.set("molecularParam",(x+1)*M),(o==="mousemove"||o==="click"||o==="drag")&&e.set("trigger",o),c==="drag"||c==="wheel"||c==="unset"){e.set("scaleDBy",c),e.get("delegate").remove(),e.get("delegate").destroy();var k=e.get("dPercentText");k&&(k.remove(),k.destroy())}if(v==="drag"||v==="wheel"||v==="unset"){e.set("scaleRBy",v),e.get("delegate").remove(),e.get("delegate").destroy();var k=e.get("dPercentText");k&&(k.remove(),k.destroy())}},r.prototype.updateDelegate=function(t,e){var n=this,a=this,o=a.get("graph"),s=a.get("delegate");if(!s||s.destroyed){var l=o.get("group"),u=a.get("delegateStyle")||u1;s=l.addShape("circle",{attrs:(0,V.__assign)({r:e/1.5,x:t.x,y:t.y},u),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&(this.get("scaleRBy")==="wheel"?s.on("mousewheel",function(M){a.scaleRByWheel(M)}):this.get("scaleRBy")==="drag"&&(s.on("dragstart",function(M){a.set("dragging",!0),a.set("cacheCenter",{x:M.x,y:M.y}),a.set("dragPrePos",{x:M.x,y:M.y})}),s.on("drag",function(M){a.scaleRByDrag(M)}),s.on("dragend",function(M){a.set("dragging",!1)})),this.get("scaleDBy")==="wheel"?s.on("mousewheel",function(M){n.scaleDByWheel(M)}):this.get("scaleDBy")==="drag"&&(s.on("dragstart",function(M){a.set("dragging",!0),a.set("cacheCenter",{x:M.x,y:M.y}),a.set("dragPrePos",{x:M.x,y:M.y})}),s.on("drag",function(M){n.scaleDByDrag(M)}),s.on("dragend",function(M){a.set("dragging",!1)})))}else s.attr({x:t.x,y:t.y,r:e/1.5});if(a.get("showDPercent")){var h=Math.round((a.get("d")-a.get("minD"))/(a.get("maxD")-a.get("minD"))*100),c=a.get("dPercentText"),v=t.y+e/1.5+16;if(!c||c.destroyed){var x=o.get("group");c=x.addShape("text",{attrs:{text:h+"%",x:t.x,y:v,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),a.set("dPercentText",c)}else c.attr({text:h+"%",x:t.x,y:v})}a.set("delegate",s)},r.prototype.clear=function(){var t=this.get("graph");this.restoreCache(),t.refreshPositions();var e=this.get("delegate");e&&!e.destroyed&&(e.remove(),e.destroy());var n=this.get("dPercentText");n&&!n.destroyed&&(n.remove(),n.destroy())},r.prototype.destroy=function(){this.clear()},r}(Va),K6=Z6;ic()(`
  .g6-component-toolbar {
    position: absolute;
    list-style-type: none;
    padding: 6px;
    left: 0px;
    top: 0px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    margin: 0;
  }
  .g6-component-toolbar li {
    float: left;
    text-align: center;
    width: 35px;
    height: 24px;
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-toolbar li .icon {
    opacity: 0.7;
  }
  .g6-component-toolbar li .icon:hover {
    opacity: 1;
  }
`);var $6=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(e){return`
          <ul class='g6-component-toolbar'>
            <li code='redo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>
              </svg>
            </li>
            <li code='undo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>
              </svg>
            </li>
            <li  code='zoomOut'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
              </svg>
            </li>
            <li code='zoomIn'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
              </svg>
            </li>
            <li code='realZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
              </svg>
            </li>
            <li code='autoZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
              </svg>
            </li>
          </ul>
        `}}},r.prototype.init=function(){var t=this,e=this.get("graph"),n=this.get("getContent"),a=n(e),o=a;(0,$n.HD)(a)&&(o=(0,di.Z)(a));var s=this.get("className");o.setAttribute("class",s||"g6-component-toolbar");var l=this.get("container");l||(l=this.get("graph").get("container")),l.appendChild(o),this.set("toolBar",o);var u=this.get("handleClick");o.addEventListener("click",function(c){var v=c.path.filter(function(M){return M.nodeName==="LI"});if(v.length!==0){var x=v[0].getAttribute("code");!x||(u?u(x,e):t.handleDefaultOperator(x,e))}});var h=this.get("position");h&&(0,On.Z)(o,{top:h.y+"px",left:h.x+"px"}),this.bindUndoRedo()},r.prototype.bindUndoRedo=function(){var t=this.get("graph"),e=document.querySelector('.g6-component-toolbar li[code="undo"]'),n=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),a=document.querySelector('.g6-component-toolbar li[code="redo"]'),o=document.querySelector('.g6-component-toolbar li[code="redo"] svg');!e||!n||!a||!o||t.on("stackchange",function(s){var l=s.undoStack,u=s.redoStack,h=l.length,c=u.length;h===1?(e.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4")):(e.removeAttribute("style"),n.removeAttribute("style")),c===0?(a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4")):(a.removeAttribute("style"),o.removeAttribute("style"))})},r.prototype.undo=function(){var t=this.get("graph"),e=t.getUndoStack();if(!(!e||e.length===0)){var n=e.pop();if(n){var a=n.action;t.pushStack(a,(0,$n.d9)(n.data),"redo");var o=n.data.before;if(a==="add"&&(o=n.data.after),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){var h=t.findById(u.id);u.visible?t.showItem(h,!1):t.hideItem(h,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){t.updateItem(u.id,u,!1)})});break;case"changedata":t.changeData(o,!1);break;case"delete":{Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){var h=u.itemType;delete u.itemType,t.addItem(h,u,!1)})});break}case"add":Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){t.removeItem(u.id,!1)})});break;default:}}}},r.prototype.redo=function(){var t=this.get("graph"),e=t.getRedoStack();if(!(!e||e.length===0)){var n=e.pop();if(n){var a=n.action,o=n.data.after;if(t.pushStack(a,(0,$n.d9)(n.data)),a==="delete"&&(o=n.data.before),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){var h=t.findById(u.id);u.visible?t.showItem(h,!1):t.hideItem(h,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){t.updateItem(u.id,u,!1)})});break;case"changedata":t.changeData(o,!1);break;case"delete":o.edges&&o.edges.forEach(function(s){t.removeItem(s.id,!1)}),o.nodes&&o.nodes.forEach(function(s){t.removeItem(s.id,!1)}),o.combos&&o.combos.forEach(function(s){t.removeItem(s.id,!1)});break;case"add":{Object.keys(o).forEach(function(s){var l=o[s];!l||l.forEach(function(u){var h=u.itemType;delete u.itemType,t.addItem(h,u,!1)})});break}default:}}}},r.prototype.handleDefaultOperator=function(t,e){var n=e.getZoom();switch(t){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":{var a=1+.05*5;if(a*n>5)return;e.zoomTo(n*1.1);break}case"zoomIn":{var o=1-.05*5;if(o*n<.3)return;e.zoomTo(n*.9);break}case"realZoom":e.zoomTo(1);break;case"autoZoom":e.fitView([20,20]);break;default:}},r.prototype.destroy=function(){var t=this.get("toolBar");if(t){var e=this.get("container");e||(e=this.get("graph").get("container")),e.removeChild(t)}var n=this.get("handleClick");n&&t.removeEventListener("click",n)},r}(Va),Q6=$6;ic()(`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .tooltip-type {
    padding: 0;
    margin: 0;
  }
  .tooltip-id {
    color: #531dab;
  }
`);var J6=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(e){return`
          <h4 class='tooltip-type'>\u7C7B\u578B\uFF1A`+e.item.getType()+`</h4>
          <span class='tooltip-id'>ID\uFF1A`+e.item.getID()+`</span>
        `},shouldBegin:function(e){return!0},itemTypes:["node","edge","combo"]}},r.prototype.getEvents=function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},r.prototype.init=function(){var t=this.get("className")||"g6-component-tooltip",e=(0,di.Z)("<div class="+t+"></div>"),n=this.get("container");n||(n=this.get("graph").get("container")),(0,On.Z)(e,{position:"absolute",visibility:"hidden"}),n.appendChild(e),this.set("tooltip",e)},r.prototype.onMouseEnter=function(t){var e=this.get("itemTypes");if(!(t.item&&t.item.getType&&e.indexOf(t.item.getType())===-1)){var n=t.item,a=this.get("graph");this.currentTarget=n,this.showTooltip(t),a.emit("tooltipchange",{item:t.item,action:"show"})}},r.prototype.onMouseMove=function(t){var e=this.get("itemTypes");t.item&&t.item.getType&&e.indexOf(t.item.getType())===-1||!this.currentTarget||t.item!==this.currentTarget||this.showTooltip(t)},r.prototype.onMouseLeave=function(){this.hideTooltip();var t=this.get("graph");t.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},r.prototype.showTooltip=function(t){if(!!t.item){var e=this.get("itemTypes");if(!(t.item.getType&&e.indexOf(t.item.getType())===-1)){var n=this.get("tooltip"),a=this.get("getContent"),o=a(t);(0,Cn.default)(o)?n.innerHTML=o:n.innerHTML=o.outerHTML,this.updatePosition(t)}}},r.prototype.hideTooltip=function(){var t=this.get("tooltip");t&&(0,On.Z)(t,{visibility:"hidden"})},r.prototype.updatePosition=function(t){var e=this.get("shouldBegin"),n=this.get("tooltip");if(!e(t)){(0,On.Z)(n,{visibility:"hidden"});return}var a=this.get("graph"),o=a.get("width"),s=a.get("height"),l=this.get("offsetX")||0,u=this.get("offsetY")||0,h=a.getPointByClient(t.clientX,t.clientY),c=a.getCanvasByPoint(h.x,h.y),v=c.x,x=c.y;v+=l,x+=u;var M=n.getBoundingClientRect();v+M.width>o&&(v=v-M.width-l),x+M.height>s&&(x=x-M.height-u),(0,On.Z)(n,{left:v+"px",top:x+"px",visibility:"visible"})},r.prototype.hide=function(){this.onMouseLeave()},r.prototype.destroy=function(){var t=this.get("tooltip");if(t){var e=this.get("container");e||(e=this.get("graph").get("container")),e.removeChild(t)}},r}(Va),q6=J6,f1=p(89539);function t8(i){return(0,f.map)(i,function(r,t){var e=t===0?"M":"L",n=r[0],a=r[1];return[e,n,a]})}function h1(i){return t8(i)}function e8(i){if(i.length<=2)return h1(i);var r=[];(0,f.each)(i,function(o){(0,f.isEqual)(o,r.slice(r.length-2))||r.push(o[0],o[1])});var t=Us.catmullRom2Bezier(r,!1),e=(0,f.head)(i),n=e[0],a=e[1];return t.unshift(["M",n,a]),t}function r8(i,r,t,e){e===void 0&&(e=!0);var n=new Or.Linear({values:i}),a=new Or.Category({values:(0,f.map)(i,function(s,l){return l})}),o=(0,f.map)(i,function(s,l){return[a.scale(l)*r,t-n.scale(s)*t]});return e?e8(o):h1(o)}function n8(i,r,t){for(var e=new Or.Linear({values:i}),n=new Or.Category({values:(0,f.map)(i,function(c,v){return v})}),a=(0,f.map)(i,function(c,v){return[n.scale(v)*r,t-e.scale(c)*t]}),o=[],s=0;s<a.length;s++){var l=a[s],u={x:l[0],y:l[1],y0:t,size:5},h=o8(u);o.push.apply(o,h)}return s8(o)}function i8(i,r){var t=new Or.Linear({values:i}),e=Math.max(0,t.min);return r-t.scale(e)*r}function a8(i,r,t,e){var n=(0,V.__spreadArrays)(i),a=i8(e,t);return n.push(["L",r,a]),n.push(["L",0,a]),n.push(["Z"]),n}function o8(i){var r=i.x,t=i.y,e=i.y0,n=i.size,a,o;(0,f1.isArray)(t)?(a=t[0],o=t[1]):(a=e,o=t);var s,l;(0,f1.isArray)(r)?(s=r[0],l=r[1]):(s=r-n/2,l=r+n/2);var u=[{x:s,y:a},{x:s,y:o}];return u.push({x:l,y:o},{x:l,y:a}),u}function s8(i,r){r===void 0&&(r=!0);var t=[],e=i[0];t.push(["M",e.x,e.y]);for(var n=1,a=i.length;n<a;n++)t.push(["L",i[n].x,i[n].y]);return r&&(t.push(["L",e.x,e.y]),t.push(["z"])),t}var GY={opacity:.5},l8={stroke:"#C5C5C5",strokeOpacity:.85},u8={fill:"#CACED4",opacity:.85},f8=function(){function i(r){var t=r.x,e=t===void 0?0:t,n=r.y,a=n===void 0?0:n,o=r.width,s=o===void 0?200:o,l=r.height,u=l===void 0?26:l,h=r.smooth,c=h===void 0?!0:h,v=r.isArea,x=v===void 0?!1:v,M=r.data,k=M===void 0?[]:M,R=r.lineStyle,G=r.areaStyle,N=r.group,ot=r.interval,ut=ot===void 0?null:ot;this.group=N,this.x=e,this.y=a,this.width=s,this.height=u,this.data=k,this.smooth=c,this.isArea=x,this.lineStyle=Object.assign({},l8,R),this.areaStyle=Object.assign({},u8,G),this.intervalConfig=ut,this.renderLine()}return i.prototype.renderLine=function(){var r=this,t=r.x,e=r.y,n=r.width,a=r.height,o=r.data,s=r.smooth,l=r.isArea,u=r.backgroundStyle,h=r.lineStyle,c=r.areaStyle,v=this.group.addGroup({name:"trend-group"});if(o){var x=r8(o,n,a,s);if(v.addShape("path",{attrs:(0,V.__assign)({path:x},h)}),l){var M=a8(x,n,a,o);v.addShape("path",{attrs:(0,V.__assign)({path:M},c)})}}this.intervalConfig&&v.addShape("path",{attrs:(0,V.__assign)({path:n8(this.intervalConfig.data,n,a)},this.intervalConfig.style)}),v.move(t,e)},i.prototype.destory=function(){this.group.destroy()},i}(),h8=f8,c8={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},v8={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize"},d8=function(){function i(r){var t=r.group,e=r.name,n=r.type,a=r.x,o=a===void 0?0:a,s=r.y,l=s===void 0?0:s,u=r.width,h=u===void 0?2:u,c=r.height,v=c===void 0?24:c,x=r.style,M=x===void 0?{}:x;this.group=t,this.name=e,this.handleType=n,this.x=o,this.y=l,this.width=h,this.height=v,n==="trend"?this.style=(0,V.__assign)((0,V.__assign)({},c8),M):n==="simple"&&(this.style=(0,V.__assign)((0,V.__assign)({},v8),M)),this.renderHandle()}return i.prototype.setX=function(r){this.setXY(r,void 0)},i.prototype.setY=function(r){this.setXY(void 0,r)},i.prototype.setXY=function(r,t){(0,f.isNumber)(r)&&(this.x=r),(0,f.isNumber)(t)&&(this.y=t),this.updateXY()},i.prototype.renderHandle=function(){var r=this,t=r.width,e=r.height,n=r.style,a=r.name,o=n.fill,s=n.stroke,l=n.radius,u=n.opacity,h=n.cursor;this.handleGroup=this.group.addGroup(),this.handleType==="trend"?(this.background=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:t,height:e,fill:o,stroke:s,radius:l,opacity:u,cursor:h},name:a+"-handler"}),this.handleGroup.addShape("circle",{attrs:{x:t/2,y:0,r:2*t,fill:o,stroke:s,radius:l,opacity:u,cursor:h},name:a+"-handler"}),this.handleGroup.addShape("circle",{attrs:{x:t/2,y:e,r:2*t,fill:o,stroke:s,radius:l,opacity:u,cursor:h},name:a+"-handler"})):this.handleType==="simple"&&(this.handleGroup.addShape("circle",{attrs:{x:t/2,y:e/2,r:2*t,fill:o,stroke:s,radius:l,opacity:u,cursor:h},name:a+"-handler"}),this.handleGroup.addShape("circle",{attrs:{x:t/2,y:e/2,r:2*t,fill:o,stroke:s,radius:l,opacity:u,cursor:h},name:a+"-handler"})),this.updateXY(),this.handleType==="trend"&&this.bindEvents()},i.prototype.bindEvents=function(){var r=this,t=this.name;this.handleGroup.on(t+"-handler:mouseenter",function(){var e=r.style.highLightFill;r.background.attr("fill",e)}),this.handleGroup.on(t+"-handler:mouseleave",function(){var e=r.style.fill;r.background.attr("fill",e)})},i.prototype.show=function(){this.handleGroup.show()},i.prototype.hide=function(){this.handleGroup.hide()},i.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},i}(),c1=d8,p8=function(){function i(r){this.config=(0,f.deepMix)({},r),this.init()}return i.prototype.update=function(r){this.config=(0,f.deepMix)({},this.config,r),this.updateElement(),this.renderMarker()},i.prototype.init=function(){this.initElement(),this.renderMarker()},i.prototype.initElement=function(){var r=this.config,t=r.group,e=r.style;this.circle=t.addShape("circle",{attrs:(0,V.__assign)({x:this.config.x,y:this.config.y,r:this.config.r},e)}),this.startMarker=t.addShape("path",{attrs:{path:this.getStartMarkerPath(),fill:"#ccc"},name:"playPauseBtn"}),this.pauseGroupMarker=t.addGroup();var n=1/4*this.config.r,a=.5*this.config.r*Math.sqrt(3);this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x-(1/4+1/8)*this.config.r,y:this.config.y-a/2,width:n*2.5,height:a,fill:"#fff"},name:"playPauseBtn"}),this.pauseLeftMarker=this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x-(1/4+1/8)*this.config.r,y:this.config.y-a/2,width:n,height:a,fill:"#ccc"},name:"playPauseBtn"}),this.pauseRightMarker=this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x+1/8*this.config.r,y:this.config.y-a/2,width:n,height:a,fill:"#ccc"},name:"playPauseBtn"})},i.prototype.updateElement=function(){this.circle.attr("x",this.config.x),this.circle.attr("y",this.config.y),this.circle.attr("r",this.config.r),this.startMarker.attr("path",this.getStartMarkerPath());var r=1/4*this.config.r,t=.5*this.config.r*Math.sqrt(3);this.pauseLeftMarker.attr("x",this.config.x-(1/4+1/8)*this.config.r),this.pauseLeftMarker.attr("y",this.config.y-t/2),this.pauseLeftMarker.attr("width",r),this.pauseLeftMarker.attr("height",t),this.pauseRightMarker.attr("x",this.config.x+1/8*this.config.r),this.pauseRightMarker.attr("y",this.config.y-t/2),this.pauseRightMarker.attr("width",r),this.pauseRightMarker.attr("height",t)},i.prototype.renderMarker=function(){this.config.isPlay?(this.startMarker.hide(),this.pauseGroupMarker.show()):(this.startMarker.show(),this.pauseGroupMarker.hide())},i.prototype.getStartMarkerPath=function(){var r=.5*this.config.r*Math.sqrt(3);return[["M",this.config.x-r/Math.sqrt(3)/2,this.config.y-r/2],["L",this.config.x+r/Math.sqrt(3),this.config.y],["L",this.config.x-r/Math.sqrt(3)/2,this.config.y+r/2]]},i}(),g8=p8,y8="#ccc",m8="green",x8={fill:"#607889",stroke:"#607889"},b8={fill:"#fff"},w8={fill:"green"},S8={speed:2,loop:!1,fill:"#fff",stroke:"#fff",hiddleToggle:!1,preBtnStyle:{fill:"#ccc",stroke:"#ccc"},nextBtnStyle:{fill:"#ccc",stroke:"#ccc"},playBtnStyle:{fill:"#fff",stroke:"#ccc"}},Ns=110,Wa=50,C8=function(){function i(r){this.controllerCfg=(0,f.deepMix)({},S8,r),this.group=r.group,this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType="range",this.init()}return i.prototype.init=function(){this.renderPlayButton()},i.prototype.getNextMarkerPath=function(r,t,e){return[["M",r,t-e],["L",r+e,t],["L",r,t+e]]},i.prototype.getPreMarkerPath=function(r,t,e){return[["M",r,t-e],["L",r-e,t],["L",r,t+e]]},i.prototype.renderPlayButton=function(){var r=this.controllerCfg,t=r.width,e=r.height,n=r.x,a=r.y,o=r.hiddleToggle,s=r.fill,l=s===void 0?y8:s,u=r.stroke,h=u===void 0?m8:u,c=r.playBtnStyle,v=c===void 0?x8:c,x=r.preBtnStyle,M=x===void 0?b8:x,k=r.nextBtnStyle,R=k===void 0?w8:k,G=e/2-5,N=a+10,ot=this.group.addShape("rect",{attrs:{x:n,y:N,width:t,height:e,stroke:h,fill:l},name:"container-rect"});this.playButton?this.playButton.update({x:t/2,y:N,r:G}):this.playButton=new g8({group:this.group,x:t/2,y:N+G+5,r:G,isPlay:this.isPlay,style:v}),this.group.addShape("path",{attrs:(0,V.__assign)({path:this.getPreMarkerPath(t/2-5*G,N+G+5,G*.5)},M),name:"preStepBtn"}),this.group.addShape("path",{attrs:(0,V.__assign)({path:this.getPreMarkerPath(t/2-4.5*G,N+G+5,G*.5)},M),name:"preStepBtn"}),this.group.addShape("path",{attrs:(0,V.__assign)({path:this.getNextMarkerPath(t/2+5*G,N+G+5,G*.5)},R),name:"nextStepBtn"}),this.group.addShape("path",{attrs:(0,V.__assign)({path:this.getNextMarkerPath(t/2+4.5*G,N+G+5,G*.5)},R),name:"nextStepBtn"}),ot.toBack(),this.renderSpeedBtn(),o||this.renderToggleTime(),this.bindEvent()},i.prototype.renderSpeedBtn=function(){var r=this.controllerCfg,t=r.y,e=r.width,n=r.hiddleToggle,a=this.group.addGroup({name:"speed-group"});this.speedGroup=a;for(var o=1,s=[],l=9,u=0;u<5;u++){var h=t+15+u*(u+1)+o;a.addShape("rect",{attrs:{x:e-(n?Wa:Ns),y:h,width:15,height:2,fill:"#ccc"},speed:l,name:"speed-rect"}),this.speedAxisY.push(h),s.push(l),l=l-2,o++}for(var u=0;u<4;u++)a.addShape("rect",{attrs:{x:e-(n?Wa:Ns),y:this.speedAxisY[u]+2,width:15,height:2*u+1,fill:"#fff",opacity:.3},speed:s[u]-1,name:"speed-rect"});this.speedText=a.addShape("text",{attrs:{x:e-(n?Wa:Ns)+20,y:this.speedAxisY[1]+15,text:"1.0X",fill:"#ccc"}}),this.speedPoint=a.addShape("path",{attrs:{path:this.getPath(e-(n?Wa:Ns),this.speedAxisY[4]),fill:"#ccc"}})},i.prototype.getPath=function(r,t){return[["M",r,t],["L",r-12,t-6],["L",r-12,t+6],["Z"]]},i.prototype.renderToggleTime=function(){var r=this.controllerCfg.width;this.toggleGroup=this.group.addGroup({name:"toggle-group"}),this.toggleGroup.addShape("rect",{attrs:{width:14,height:14,x:r-Wa,y:this.speedAxisY[1],fill:"#fff",stroke:"#ccc",lineWidth:2,radius:3},isChecked:!1,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:{path:[["M",r-Wa+3,this.speedAxisY[1]+6],["L",r-Wa+7,this.speedAxisY[1]+10],["L",r-Wa+12,this.speedAxisY[1]+4]],stroke:"green",lineWidth:3},capture:!1}),this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:{text:"\u5355\u4E00\u65F6\u95F4",x:r-Wa+20,y:this.speedAxisY[1]+15,fill:"#ccc"}})},i.prototype.bindEvent=function(){var r=this,t=this.controllerCfg,e=t.width,n=t.hiddleToggle;this.speedGroup.on("speed-rect:click",function(a){r.speedPoint.attr("path",r.getPath(e-(n?Wa:Ns),a.y)),r.currentSpeed=a.target.get("speed"),r.speedText.attr("text",r.currentSpeed+".0X"),r.group.emit("timebarConfigChanged",{speed:r.currentSpeed,type:r.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(a){var o=a.target.get("isChecked");o?(r.checkedIcon.hide(),r.checkedText.attr("text","\u5355\u4E00\u65F6\u95F4"),r.currentType="range"):(r.checkedIcon.show(),r.checkedText.attr("text","\u65F6\u95F4\u8303\u56F4"),r.currentType="single"),a.target.set("isChecked",!o),r.group.emit("timebarConfigChanged",{type:r.currentType,speed:r.currentSpeed})})},i.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},i}(),v1=C8,d1="timelinestart",p1="timelineend",ja="valueChange",Lu="timebarConfigChanged",Ou="playPauseBtn",Iu="nextStepBtn",ku="preStepBtn",M8={fill:"#416180",opacity:.05},E8={fill:"#416180",opacity:.15,radius:5},_8={fill:"#5B8FF9",opacity:.3,cursor:"move"},ac=2,A8={width:ac,height:24},T8={textBaseline:"middle",fill:"#000",opacity:.45},P8=function(){function i(r){var t=this;this.prevX=0,this.onMouseDown=function(Qe){return function(br){t.currentHandler=Qe;var yr=br.originalEvent;yr.stopPropagation(),yr.preventDefault(),t.prevX=(0,f.get)(yr,"touches.0.pageX",yr.pageX);var _r=t.canvas.get("container");_r.addEventListener("mousemove",t.onMouseMove),_r.addEventListener("mouseup",t.onMouseUp),_r.addEventListener("mouseleave",t.onMouseUp),_r.addEventListener("touchmove",t.onMouseMove),_r.addEventListener("touchend",t.onMouseUp),_r.addEventListener("touchcancel",t.onMouseUp)}},this.onMouseMove=function(Qe){Qe.stopPropagation(),Qe.preventDefault();var br=(0,f.get)(Qe,"touches.0.pageX",Qe.pageX),yr=br-t.prevX,_r=t.adjustOffsetRange(yr/t.width);t.updateStartEnd(_r),t.updateUI(),t.prevX=br},this.onMouseUp=function(){t.currentHandler&&(t.currentHandler=void 0);var Qe=t.canvas.get("container");Qe&&(Qe.removeEventListener("mousemove",t.onMouseMove),Qe.removeEventListener("mouseup",t.onMouseUp),Qe.removeEventListener("mouseleave",t.onMouseUp),Qe.removeEventListener("touchmove",t.onMouseMove),Qe.removeEventListener("touchend",t.onMouseUp),Qe.removeEventListener("touchcancel",t.onMouseUp))};var e=r.x,n=e===void 0?0:e,a=r.y,o=a===void 0?0:a,s=r.width,l=s===void 0?100:s,u=r.height,h=r.padding,c=h===void 0?10:h,v=r.trendCfg,x=r.controllerCfg,M=x===void 0?{speed:1}:x,k=r.backgroundStyle,R=k===void 0?{}:k,G=r.foregroundStyle,N=G===void 0?{}:G,ot=r.handlerStyle,ut=ot===void 0?{}:ot,Mt=r.textStyle,zt=Mt===void 0?{}:Mt,$t=r.start,ee=$t===void 0?0:$t,Ut=r.end,le=Ut===void 0?1:Ut,xe=r.minText,ye=xe===void 0?"":xe,Oe=r.maxText,Ge=Oe===void 0?"":Oe,Ne=r.group,qe=r.graph,tr=r.canvas,rr=r.ticks,$e=r.type;this.graph=qe,this.canvas=tr,this.group=Ne,this.timeBarType=$e,this.x=n,this.y=o,this.width=l,this.height=u,this.padding=c,this.ticks=rr,this.trendCfg=v,this.controllerCfg=M,this.currentSpeed=M.speed,$e==="trend"?this.backgroundStyle=(0,V.__assign)((0,V.__assign)({},M8),R):$e==="simple"&&(this.backgroundStyle=(0,V.__assign)((0,V.__assign)({},E8),R)),this.foregroundStyle=(0,V.__assign)((0,V.__assign)({},_8),N),this.handlerStyle=(0,V.__assign)((0,V.__assign)({},A8),ut),this.textStyle=(0,V.__assign)((0,V.__assign)({},T8),zt),this.currentMode="range",this.start=ee,this.end=le,this.minText=ye,this.maxText=Ge,this.renderSlider()}return i.prototype.update=function(r){var t=r.x,e=r.y,n=r.width,a=r.height,o=r.minText,s=r.maxText,l=r.start,u=r.end;this.start=Math.min(1,Math.max(l,0)),this.end=Math.min(1,Math.max(u,0)),(0,f.assign)(this,{x:t,y:e,width:n,height:a,minText:o,maxText:s}),this.updateUI()},i.prototype.setText=function(r,t){this.minTextShape.attr("text",r),this.maxTextShape.attr("text",t)},i.prototype.renderSlider=function(){var r=this,t=this,e=t.width,n=t.height,a=t.timeBarType;if(a==="trend"&&(0,f.size)((0,f.get)(this.trendCfg,"data"))){var o=new h8((0,V.__assign)((0,V.__assign)({x:this.x,y:this.y,width:e,height:n},this.trendCfg),{group:this.group}));this.trendComponent=o}var s=this.group.addGroup({name:"slider-group"});s.addShape("rect",{attrs:(0,V.__assign)({x:0,y:0,width:e,height:n},this.backgroundStyle)});var l=this.group.addGroup();a==="trend"?(this.minTextShape=l.addShape("text",{attrs:(0,V.__assign)({x:0,y:n/2+this.y,textAlign:"right",text:this.minText,silent:!1},this.textStyle),capture:!1}),this.maxTextShape=l.addShape("text",{attrs:(0,V.__assign)({y:n/2+this.y,textAlign:"left",text:this.maxText,silent:!1},this.textStyle),capture:!1})):(this.minTextShape=l.addShape("text",{attrs:(0,V.__assign)({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1},this.textStyle),capture:!1}),this.maxTextShape=l.addShape("text",{attrs:(0,V.__assign)({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1},this.textStyle),capture:!1})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:(0,V.__assign)({x:0,y:this.y,height:n},this.foregroundStyle)});var u=(0,f.get)(this.handlerStyle,"width",2),h=(0,f.get)(this.handlerStyle,"height",24),c=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new c1((0,V.__assign)({name:"minHandlerShape",group:c,type:a,x:this.x,y:this.y,width:u,height:h,cursor:"ew-resize"},this.handlerStyle));var v=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new c1((0,V.__assign)({name:"maxHandlerShape",group:v,type:a,x:this.x,y:this.y,width:u,height:h,cursor:"ew-resize"},this.handlerStyle));var x=this.ticks,M=e/(x.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(R){R.destroy()});var k=-Infinity;this.textList=x.map(function(R,G){r.tickPosList.push(r.x+G*M);var N=r.group.addShape("text",{attrs:{x:r.x+G*M,y:r.y+n+5,text:R,textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35}}),ot=r.group.addShape("line",{attrs:{x1:r.x+G*M,y1:r.y+n+2,x2:r.x+G*M,y2:r.y+n+6,lineWidth:1,stroke:"#ccc"}}),ut=N.getBBox();return ut.minX>k?(N.show(),ot.show(),k=ut.minX+ut.width+10):(N.hide(),ot.hide()),N}),this.controllerBtnGroup=new v1({group:this.group,x:this.x,y:this.y+n+25,width:e,height:40}),this.updateUI(),s.move(this.x,this.y),this.bindEvents()},i.prototype.bindEvents=function(){var r=this,t=this.group.find(function(n){return n.get("name")==="minHandlerShape"});t&&(t.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),t.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var e=this.group.find(function(n){return n.get("name")==="maxHandlerShape"});e&&(e.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),e.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on(Ou+":click",function(){r.isPlay=!r.isPlay,r.currentHandler=r.maxHandlerShape,r.changePlayStatus()}),this.group.on(Iu+":click",function(){r.currentHandler=r.maxHandlerShape,r.updateStartEnd(.01),r.updateUI()}),this.group.on(ku+":click",function(){r.currentHandler=r.maxHandlerShape,r.updateStartEnd(-.01),r.updateUI()}),this.group.on(Lu,function(n){var a=n.type,o=n.speed;r.currentSpeed=o,r.currentMode=a,a==="single"?(r.minHandlerShape.hide(),r.foregroundShape.hide(),r.minTextShape.hide()):a==="range"&&(r.minHandlerShape.show(),r.foregroundShape.show(),r.minTextShape.show())})},i.prototype.adjustTickIndex=function(r){for(var t=0;t<this.tickPosList.length-1;t++)if(this.tickPosList[t]<=r&&r<=this.tickPosList[t+1])return Math.abs(this.tickPosList[t]-r)<Math.abs(r-this.tickPosList[t+1])?t:t+1},i.prototype.adjustOffsetRange=function(r){switch(this.currentHandler){case this.minHandlerShape:{var t=0-this.start,e=1-this.start;return Math.min(e,Math.max(t,r))}case this.maxHandlerShape:{var t=0-this.end,e=1-this.end;return Math.min(e,Math.max(t,r))}case this.foregroundShape:{var t=0-this.start,e=1-this.end;return Math.min(e,Math.max(t,r))}default:return 0}},i.prototype.updateStartEnd=function(r){switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=r,this.minText=this.ticks[this.adjustTickIndex(this.start*this.width)];break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=r,this.maxText=this.ticks[this.adjustTickIndex(this.end*this.width)];break;case this.foregroundShape:this.start+=r,this.end+=r,this.minText=this.ticks[this.adjustTickIndex(this.start*this.width)],this.maxText=this.ticks[this.adjustTickIndex(this.end*this.width)];break;default:break}},i.prototype.updateUI=function(){var r=this;this.start<0&&(this.start=0),this.end>1&&(this.end=1);var t=this.start*this.width,e=this.end*this.width;this.foregroundShape.attr("x",t),this.foregroundShape.attr("width",e-t);var n=(0,f.get)(this.handlerStyle,"width",ac);this.setText(this.minText,this.maxText);var a=this.dodgeText([t,e]),o=a[0],s=a[1];this.minHandlerShape.setX(t-n/2),(0,f.each)(o,function(l,u){return r.minTextShape.attr(u,l)}),this.maxHandlerShape.setX(e-n/2),(0,f.each)(s,function(l,u){return r.maxTextShape.attr(u,l)}),this.currentMode==="range"?this.graph.emit(ja,{value:[this.start,this.end].sort()}):this.currentMode==="single"&&this.graph.emit(ja,{value:[this.end,this.end]})},i.prototype.dodgeText=function(r){var t,e,n=2,a=(0,f.get)(this.handlerStyle,"width",ac),o=this.minTextShape,s=this.maxTextShape,l=r[0],u=r[1],h=!1;l>u&&(t=[u,l],l=t[0],u=t[1],e=[s,o],o=e[0],s=e[1],h=!0);var c=o.getBBox(),v=s.getBBox(),x=null,M=null;return this.timeBarType==="trend"?(x=c.width>l-n?{x:l+a/2+n,textAlign:"left"}:{x:l-a/2-n,textAlign:"right"},M=v.width>this.width-u-n?{x:u-a/2-n,textAlign:"right"}:{x:u+a/2+n,textAlign:"left"}):this.timeBarType==="simple"&&(x=c.width>l-n?{x:l+a/2+n,textAlign:"center"}:{x:l-a/2-n,textAlign:"center"},M=v.width>this.width-u-n?{x:u-a/2-n,textAlign:"center"}:{x:u+a/2+n,textAlign:"center"}),h?[M,x]:[x,M]},i.prototype.startPlay=function(){var r=this;return window.requestAnimationFrame(function(){var t=r,e=t.ticks,n=t.width,a=r.currentSpeed,o=n/e.length,s=o/((10-a)*1e3/60),l=r.adjustOffsetRange(s/r.width);r.updateStartEnd(l),r.updateUI(),r.isPlay&&(r.playHandler=r.startPlay())})},i.prototype.changePlayStatus=function(r){r===void 0&&(r=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(d1,null)):this.playHandler&&(window.cancelAnimationFrame(this.playHandler),r&&this.graph.emit(p1,null))},i.prototype.destory=function(){this.graph.off(ja);var r=this.group,t=r.find(function(n){return n.get("name")==="minHandlerShape"});t&&(t.off("minHandlerShape-handler:mousedown"),t.off("minHandlerShape-handler:touchstart"),t.destroy());var e=r.find(function(n){return n.get("name")==="maxHandlerShape"});e&&(e.off("maxHandlerShape-handler:mousedown"),e.off("maxHandlerShape-handler:touchstart"),e.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),r.off(Ou+":click"),r.off(Iu+":click"),r.off(ku+":click"),r.off(Lu),r.destroy(),this.trendComponent&&this.trendComponent.destory()},i}(),L8=P8,YY={opacity:.5,fill:"#000"},zY={opacity:.5,fill:"#000",r:5},XY={fill:"#fff",fontSize:12},O8=function(){function i(r){var t=r.x,e=t===void 0?0:t,n=r.y,a=n===void 0?0:n,o=r.container,s=r.text,l=r.padding,u=l===void 0?[4,4,4,4]:l,h=r.className,c=h===void 0?"g6-component-timebar-tooltip":h,v=r.backgroundColor,x=v===void 0?"#000":v,M=r.textColor,k=M===void 0?"#fff":M,R=r.opacity,G=R===void 0?.8:R,N=r.fontSize,ot=N===void 0?12:N;this.container=o,this.className=c,this.backgroundColor=x,this.textColor=k,this.x=e,this.y=a,this.text=s,this.padding=u,this.opacity=G,this.fontSize=ot,this.render()}return i.prototype.render=function(){var r=this,t=r.className,e=r.x,n=r.y,a=r.backgroundColor,o=r.textColor,s=r.text,l=r.padding,u=r.opacity,h=r.fontSize,c=r.container,v=(0,di.Z)("<div class='"+t+`' style="position: absolute; width: fit-content; height: fit-content; opacity: `+u+'"></div>');(0,f.isString)(c)&&(c=document.getElementById(c)),c.appendChild(v),r.parentHeight=c.offsetHeight,r.parentWidth=c.offsetWidth,(0,On.Z)(v,{visibility:"hidden",top:0,left:0});var x=(0,di.Z)(`
      <div style='position: absolute; white-space:nowrap; background-color: `+a+"; font-size: "+h+"px; border-radius: 4px; width: fit-content; height: fit-content; color: "+o+"; padding: "+l[0]+"px "+l[1]+"px "+l[2]+"px "+l[3]+"px'></div>");x.innerHTML=s,v.appendChild(x),r.backgroundDOM=x;var M=(0,di.Z)("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid "+a+"'></div>");v.appendChild(M),r.arrowDOM=M,r.container=v},i.prototype.show=function(r){var t=this,e=r.text,n=r.x,a=r.y,o=r.clientX,s=r.clientY;t.backgroundDOM.innerHTML=e;var l=t.backgroundDOM.offsetWidth,u=t.backgroundDOM.offsetHeight,h=t.arrowDOM.offsetWidth,c=t.arrowDOM.offsetHeight;(0,On.Z)(t.container,{top:-u-c+"px",left:n+"px",visibility:"visible"}),(0,On.Z)(t.backgroundDOM,{marginLeft:-l/2+"px"}),(0,On.Z)(t.arrowDOM,{marginLeft:-h/2+"px",top:u+"px"});var v=n-l/2,x=n+l/2;v<0?(0,On.Z)(t.backgroundDOM,{marginLeft:-l/2-v+"px"}):x>t.parentWidth&&(0,On.Z)(t.backgroundDOM,{marginLeft:-l/2-x+t.parentWidth+12+"px"})},i.prototype.hide=function(){(0,On.Z)(this.container,{top:0,left:0,visibility:"hidden"})},i}(),I8=O8,k8={fill:"#5B8FF9"},B8={fill:"#e6e8e9"},D8=function(){function i(r){this.frameCount=0;var t=r.graph,e=r.canvas,n=r.group,a=r.width,o=r.height,s=r.padding,l=r.data,u=r.start,h=r.end,c=r.x,v=c===void 0?0:c,x=r.y,M=x===void 0?0:x,k=r.tickLabelFormatter,R=r.selectedTickStyle,G=R===void 0?k8:R,N=r.unselectedTickStyle,ot=N===void 0?B8:N,ut=r.tooltipBackgroundColor,Mt=r.tooltipFomatter;this.graph=t,this.group=n,this.sliceGroup=n.addGroup({name:"slice-group"}),this.canvas=e,this.width=a,this.height=o,this.padding=s,this.data=l,this.start=u,this.end=h,this.tickLabelFormatter=k,this.selectedTickStyle=G,this.unselectedTickStyle=ot,this.x=v,this.y=M,this.tooltipBackgroundColor=ut,this.tooltipFomatter=Mt,this.renderSlices(),this.initEvent()}return i.prototype.renderSlices=function(){var r=this,t=r.width,e=r.height,n=r.padding,a=r.data,o=r.start,s=r.end,l=r.tickLabelFormatter,u=r.selectedTickStyle,h=r.unselectedTickStyle,c=t-2*n,v=10,x=4,M=3*n+x+v,k=e-M-2*n,R=2,G=a.length,N=(c-R*(G-1))/G;this.tickWidth=N;var ot=this.sliceGroup,ut=[],Mt=[],zt=Math.round(G*o),$t=Math.round(G*s);this.startTickRectId=zt,this.endTickRectId=$t,a.forEach(function(Ut,le){var xe=le>=zt&&le<=$t,ye=xe?u:h,Oe=ot.addShape("rect",{attrs:(0,V.__assign)({x:n+le*(N+R),y:n,width:N,height:k},ye),draggable:!0,name:"tick-rect-"+le}),Ge=ot.addShape("rect",{attrs:{x:n+le*N+R*(2*le-1)/2,y:n,width:le===0||le===G-1?N+R/2:N+R,height:k,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-"+le});Ge.toFront();var Ne=Oe.getBBox(),qe=(Ne.minX+Ne.maxX)/2;ut.push({rect:Oe,pickRect:Ge,value:Ut.date,x:qe,y:Ne.minY});var tr;if(l?(tr=l(Ut),!(0,f.isString)(tr)&&tr&&(tr=Ut.date)):le%Math.round(G/10)==0&&(tr=Ut.date),tr){Mt.push(tr);var rr=Ne.maxY+n*2;ot.addShape("line",{attrs:{stroke:"#BFBFBF",x1:qe,y1:rr,x2:qe,y2:rr+x}});var $e=rr+x+n,Qe=ot.addShape("text",{attrs:{fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:qe,y:$e,textAlign:"center",text:tr,textBaseline:"top",fontSize:10},capture:!1}),br=Qe.getBBox();br.maxX>t?Qe.attr("textAlign","right"):br.minX<0&&Qe.attr("textAlign","left")}}),this.tickRects=ut;var ee=this.group;this.currentSpeed=1,this.controllerBtnGroup=new v1({group:ee,x:this.x,y:this.y+e+5,width:t,height:40,hiddleToggle:!0,speed:this.currentSpeed})},i.prototype.initEvent=function(){var r=this,t=this.sliceGroup;t.on("click",function(h){var c=h.target;if(!(c.get("type")!=="rect"||!c.get("name"))){var v=parseInt(c.get("name").split("-")[2],10);if(!isNaN(v)){var x=r.tickRects,M=r.unselectedTickStyle;x.forEach(function(N){N.rect.attr(M)});var k=r.selectedTickStyle;x[v].rect.attr(k),r.startTickRectId=v,r.endTickRectId=v;var R=x.length,G=v/R;r.graph.emit(ja,{value:[G,G]})}}}),t.on("dragstart",function(h){var c=r.tickRects,v=r.unselectedTickStyle;c.forEach(function(N){N.rect.attr(v)});var x=h.target,M=parseInt(x.get("name").split("-")[2],10),k=r.selectedTickStyle;c[M].rect.attr(k),r.startTickRectId=M;var R=c.length,G=M/R;r.graph.emit(ja,{value:[G,G]}),r.dragging=!0}),t.on("dragover",function(h){if(!!r.dragging&&h.target.get("type")==="rect"){for(var c=parseInt(h.target.get("name").split("-")[2],10),v=r.startTickRectId,x=r.tickRects,M=r.selectedTickStyle,k=r.unselectedTickStyle,R=0;R<x.length;R++){var G=R>=v&&R<=c?M:k;x[R].rect.attr(G)}var N=x.length;r.endTickRectId=c;var ot=v/N,ut=c/N;r.graph.emit(ja,{value:[ot,ut]})}}),t.on("drop",function(h){if(!!r.dragging&&(r.dragging=!1,h.target.get("type")==="rect")){var c=r.startTickRectId,v=parseInt(h.target.get("name").split("-")[2],10);if(!(v<c)){var x=r.selectedTickStyle,M=r.tickRects;M[v].rect.attr(x),r.endTickRectId=v;var k=M.length,R=c/k,G=v/k;r.graph.emit(ja,{value:[R,G]})}}});var e=this,n=e.tooltipBackgroundColor,a=e.tooltipFomatter,o=e.canvas,s=new I8({container:o.get("container"),backgroundColor:n}),l=this.tickRects;l.forEach(function(h){var c=h.pickRect;c.on("mouseenter",function(v){var x=v.target;if(x.get("type")==="rect"){var M=parseInt(x.get("name").split("-")[2],10),k=o.getClientByPoint(l[M].x,l[M].y);s.show({x:l[M].x,y:l[M].y,clientX:k.x,clientY:k.y,text:a?a(l[M].value):l[M].value})}}),c.on("mouseleave",function(v){s.hide()})});var u=this.group;u.on(Ou+":click",function(){r.isPlay=!r.isPlay,r.changePlayStatus()}),u.on(Iu+":click",function(){r.updateStartEnd(1)}),u.on(ku+":click",function(){r.updateStartEnd(-1)}),u.on(Lu,function(h){var c=h.type,v=h.speed;r.currentSpeed=v})},i.prototype.changePlayStatus=function(r){r===void 0&&(r=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(d1,null)):this.playHandler&&(window.cancelAnimationFrame(this.playHandler),r&&this.graph.emit(p1,null))},i.prototype.startPlay=function(){var r=this;return window.requestAnimationFrame(function(){var t=r.currentSpeed;r.frameCount%(60/t)==0&&(r.frameCount=0,r.updateStartEnd(1)),r.frameCount++,r.isPlay&&(r.playHandler=r.startPlay())})},i.prototype.updateStartEnd=function(r){var t=this,e=this.tickRects,n=e.length,a=this.unselectedTickStyle,o=this.selectedTickStyle,s=t.endTickRectId;if(r>0?t.endTickRectId++:(e[t.endTickRectId].rect.attr(a),t.endTickRectId--),s!==t.startTickRectId)t.endTickRectId<t.startTickRectId&&(t.startTickRectId=t.endTickRectId);else{for(var l=t.startTickRectId;l<=t.endTickRectId-1;l++)e[l].rect.attr(a);t.startTickRectId=t.endTickRectId}if(e[t.endTickRectId]){e[t.endTickRectId].rect.attr(o);var u=t.startTickRectId/n,h=t.endTickRectId/n;this.graph.emit(ja,{value:[u,h]})}},i.prototype.destory=function(){this.graph.off(ja);var r=this.sliceGroup;r.off("click"),r.off("dragstart"),r.off("dragover"),r.off("drop"),this.tickRects.forEach(function(t){var e=t.pickRect;e.off("mouseenter"),e.off("mouseleave")}),this.tickRects.length=0,r.off(Ou+":click"),r.off(Iu+":click"),r.off(ku+":click"),r.off(Lu),this.sliceGroup.destroy()},i}(),F8=D8,R8=8,N8=26,G8=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:2,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]}}},r.prototype.initContainer=function(){var t=this.get("graph"),e=this._cfgs,n=e.width,a=e.height,o=this.get("className")||"g6-component-timebar",s=this.get("container"),l=this.get("graph").get("container"),u;s?u=s:(u=(0,di.Z)("<div class='"+o+"'></div>"),(0,On.Z)(u,{position:"relative"})),l.appendChild(u),this.set("timeBarContainer",u);var h,c=t.get("renderer");c==="SVG"?h=new ks.Z({container:u,width:n,height:a}):h=new Fo.Z({container:u,width:n,height:a}),this.set("canvas",h)},r.prototype.init=function(){this.initContainer();var t=this.get("canvas"),e=t.addGroup({name:"timebar-group"});this.set("timeBarGroup",e),this.renderTrend(),this.initEvent()},r.prototype.renderTrend=function(){var t=this._cfgs,e=t.width,n=t.x,a=t.y,o=t.padding,s=t.type,l=t.trend,u=t.slider,h=t.controllerCfg,c=l.data,v=(0,V.__rest)(l,["data"]),x=e-2*o,M=s==="trend"?N8:R8,k=this.get("graph"),R=this.get("timeBarGroup"),G=this.get("canvas"),N=null;if(s==="trend"||s==="simple")N=new L8((0,V.__assign)((0,V.__assign)({graph:k,canvas:G,group:R,type:s,x:n+o,y:s==="trend"?a+o:a+o+15,width:x,height:M,padding:o,trendCfg:(0,V.__assign)((0,V.__assign)({},v),{data:c.map(function(ut){return ut.value})})},u),{ticks:c.map(function(ut){return ut.date}),handlerStyle:(0,V.__assign)((0,V.__assign)({},u.handlerStyle),{height:u.height||M}),controllerCfg:h}));else if(s==="tick"){var ot=this._cfgs.tick;N=new F8((0,V.__assign)({graph:k,canvas:G,group:R,x:n+o,y:a+o},ot))}this.set("timebar",N)},r.prototype.filterData=function(t){var e=t.value,n=null,a=this._cfgs.type;if(a==="trend"||a==="simple"?n=this._cfgs.trend.data:a==="tick"&&(n=this._cfgs.tick.data),!n||n.length===0){console.warn("\u8BF7\u914D\u7F6E TimeBar \u7EC4\u4EF6\u7684\u6570\u636E");return}var o=this.get("rangeChange"),s=this.get("graph"),l=Math.round(n.length*e[0]),u=Math.round(n.length*e[1]);u=u>=n.length?n.length-1:u;var h=n[l].date,c=n[u].date;if(a!=="tick"){var v=this.get("timebar");v.setText(h,c)}if(o)o(s,h,c);else{var x=s.save();(!this.cacheGraphData||this.cacheGraphData.nodes&&this.cacheGraphData.nodes.length===0)&&(this.cacheGraphData=x);var M=this.cacheGraphData.nodes.filter(function(G){return G.date>=h&&G.date<=c}),k=M.map(function(G){return G.id}),R=this.cacheGraphData.edges.filter(function(G){return k.includes(G.source)&&k.includes(G.target)});s.changeData({nodes:M,edges:R})}},r.prototype.initEvent=function(){var t=this,e=0,n=0,a=this._cfgs.type;!a||a==="trend"||a==="simple"?(e=this._cfgs.slider.start,n=this._cfgs.slider.end):a==="tick"&&(e=this._cfgs.tick.start,n=this._cfgs.tick.end);var o=this.get("graph");o.on("afterrender",function(){t.filterData({value:[e,n]})}),o.on(ja,function(s){t.filterData(s)})},r.prototype.destroy=function(){var t=this.get("timebar");t&&t.destory&&t.destory(),i.prototype.destroy.call(this);var e=this.get("timeBarContainer");if(e){var n=this.get("container");n||(n=this.get("graph").get("container")),n.removeChild(e)}},r}(Va),Y8=G8;function z8(i,r){var t,e;if(i.naturalWidth)t=i.naturalWidth,e=i.naturalHeight;else{var n=new Image;n.src=i.src,n.onload=function(){r==null||r(n.width,n.height)}}return[t,e]}var X8=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},r.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},r.prototype.disableRefresh=function(){this.set("refresh",!1)},r.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},r.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},r.prototype.initViewport=function(){var t=this,e=this._cfgs,n=e.graph;if(!this.destroyed){var a=this.get("container"),o=(0,di.Z)("<div class="+e.viewportClassName+`
      style='position:absolute;
        left:0;
        top:0;
        box-sizing:border-box;
        border: 2px solid #1980ff'>
      </div>`),s=0,l=0,u=!1,h=0,c=0,v=0,x=0,M=0,k=0;a.addEventListener("mousedown",function(R){if(e.refresh=!1,R.target===o){var G=o.style;v=parseInt(G.width,10),x=parseInt(G.height,10);var N=t.get("width"),ot=t.get("height");v>N||x>ot||(k=n.getZoom(),M=t.get("ratio"),u=!0,s=R.clientX,l=R.clientY)}},!1),a.addEventListener("mousemove",function(R){if(!(!u||(0,Fi.default)(R.clientX)||(0,Fi.default)(R.clientY))){var G=t.get("width"),N=t.get("height"),ot=o.style;h=parseInt(ot.left,10),c=parseInt(ot.top,10),v=parseInt(ot.width,10),x=parseInt(ot.height,10);var ut=s-R.clientX,Mt=l-R.clientY;h-ut<0?ut=h:h-ut+v>=G&&(ut=0),c-Mt<0?Mt=c:c-Mt+x>=N&&(Mt=0),h-=ut,c-=Mt,(0,On.Z)(o,{left:h+"px",top:c+"px"}),n.translate(ut*k/M,Mt*k/M),s=R.clientX,l=R.clientY}},!1),a.addEventListener("mouseleave",function(){u=!1,e.refresh=!0},!1),a.addEventListener("mouseup",function(){u=!1,e.refresh=!0},!1),this.set("viewport",o),a.appendChild(o)}},r.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),e=this.get("width"),n=this.get("height"),a=this.get("graph"),o=a.get("width"),s=a.get("height"),l=o/s,u=a.getGroup(),h=u.getCanvasBBox(),c=[(h.minX+h.maxX)/2,(h.minY+h.maxY)/2],v=[h.maxX-h.minX,h.maxY-h.minY],x={centerX:c[0],centerY:c[1],width:0,height:0,minX:0,minY:0};h[0]/h[1]>l?(x.width=v[0],x.height=x.width/l):(x.height=v[1],x.width=x.height*l),x.minX=c[0]-x.width/2,x.minY=c[1]-x.height/2;var M=u.getMatrix();M||(M=[1,0,0,0,1,0,0,0,1]);var k=no.invert([],M),R=Ls({x:x.minX,y:x.minY},k),G=a.getCanvasByPoint(R.x,R.y),N=this.get("viewport");N||this.initViewport();var ot=o/x.width,ut=ot*e,Mt=ot*n,zt=e*-G.x/x.width,$t=n*-G.y/x.height,ee=zt+ut,Ut=$t+Mt;zt<0&&(ut+=zt,zt=0),ee>e&&(ut=ut-(ee-e)),$t<0&&(Mt+=$t,$t=0),Ut>n&&(Mt=Mt-(Ut-n)),this.set("ratio",t);var le=zt+"px",xe=$t+"px";(0,On.Z)(N,{left:le,top:xe,width:ut+"px",height:Mt+"px"})}},r.prototype.init=function(){this.initContainer()},r.prototype.initContainer=function(){var t=this,e=t.get("graph"),n=e.get("width"),a=e.get("height"),o=a/n,s=t.get("className"),l=t.get("container"),u=t.get("width"),h=t.get("height");!u&&!h&&(u=200),u?(h=o*u,t.set("height",h)):(u=1/o*h,t.set("width",u));var c=(0,di.Z)("<div class='"+s+"' style='width: "+u+"px; height: "+h+"px; overflow: hidden; position: relative;'></div>");(0,Cn.default)(l)&&(l=document.getElementById(l)),l?l.appendChild(c):e.get("container").appendChild(c),t.set("container",c);var v=(0,di.Z)('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');c.appendChild(v);var x=(0,di.Z)('<span style="display: table-cell; vertical-align: middle; "></span>');v.appendChild(x),t.set("containerDOM",v),t.set("containerSpan",x);var M=(0,di.Z)('<img alt="" src="'+this.get("graphImg")+'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>');t.set("imgDOM",M),t.updateImgSize(),x.appendChild(M),t.updateCanvas()},r.prototype.updateImgSize=function(){var t=this,e=t.get("imgDOM"),n=t.get("width"),a=t.get("height");e.onload=function(){var o=z8(e);o[0]>o[1]?e.width=n:e.height=a}},r.prototype.updateCanvas=function(){var t=this.get("refresh");if(!!t){var e=this.get("graph");if(!e.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("width"),a=e.get("canvas").getCanvasBBox(),o=a.width,s=n/o;this.set("ratio",s),this.updateViewport()}}},r.prototype.getViewport=function(){return this.get("viewport")},r.prototype.getContainer=function(){return this.get("container")},r.prototype.updateGraphImg=function(t){var e=this,n=e.get("imgDOM");n.remove(),e.set("graphImg",t);var a=(0,di.Z)('<img alt="" src="'+t+'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>');e.set("imgDOM",a),a.src=t,e.updateImgSize();var o=e.get("containerSpan");o.appendChild(a),e.updateCanvas()},r.prototype.destroy=function(){var t=this.get("container");t.parentNode.removeChild(t)},r}(Va),V8=X8,g1=.05,y1={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},H8=function(i){(0,V.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:(0,$n.d9)(y1),showLabel:"edge",scaleRBy:"wheel"}},r.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"filter"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"filter"};break}return t},r.prototype.init=function(){var t=this,e=t.get("showLabel"),n=e==="node"||e==="both",a=e==="edge"||e==="both";t.set("showNodeLabel",n),t.set("showEdgeLabel",a);var o=t.get("shouldShow");o||t.set("shouldShow",function(){return!0})},r.prototype.createDelegate=function(t){var e=this,n=e.get("delegate");(!n||n.destroyed)&&(e.filter(t),n=e.get("delegate"),n.on("dragstart",function(a){}),n.on("drag",function(a){e.filter(a)}),this.get("scaleRBy")==="wheel"&&n.on("mousewheel",function(a){e.scaleRByWheel(a)}))},r.prototype.scaleRByWheel=function(t){var e=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=e.get("graph"),a,o=e.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,l=s||n.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-g1:a=1/(1-g1);var u=e.get("maxR"),h=e.get("minR"),c=e.get("r");(c>(u||n.get("height"))&&a>1||c<(h||n.get("height")*.05)&&a<1)&&(a=1),c*=a,e.set("r",c),e.filter(t)}},r.prototype.filter=function(t){var e=this,n=e.get("graph"),a=n.getNodes(),o={},s=e.get("r"),l=e.get("type"),u={x:t.x,y:t.y};e.updateDelegate(u,s);var h=e.get("shouldShow"),c=e.get("vShapes");c&&c.forEach(function(G){G.remove(),G.destroy()}),c=[],a.forEach(function(G){var N=G.getModel(),ot=N.x,ut=N.y;Os({x:ot,y:ut},u)<s&&(o[N.id]=G)});var v=n.getEdges(),x=[];v.forEach(function(G){var N=G.getModel(),ot=N.source,ut=N.target;h(N)&&(l==="only-source"||l==="one"?o[ot]&&!o[ut]&&x.push(G):l==="only-target"||l==="one"?o[ut]&&!o[ot]&&x.push(G):l==="both"&&o[ot]&&o[ut]&&x.push(G))});var M=e.get("showNodeLabel"),k=e.get("showEdgelabel"),R=n.get("group");x.forEach(function(G){var N=G.get("group").get("children");N.forEach(function(ot){var ut=ot.get("type"),Mt=R.addShape(ut,{attrs:ot.attr()});c.push(Mt),M&&ut==="text"&&Mt.set("visible",!0)})}),Object.keys(o).forEach(function(G){var N=o[G],ot=N.get("group").clone();if(R.add(ot),c.push(ot),k)for(var ut=ot.get("children"),Mt=0;Mt<ut.length;Mt++){var zt=ut[Mt];zt.get("type")==="text"&&zt.set("visible",!0)}}),e.set("vShapes",c)},r.prototype.updateParams=function(t){var e=this,n=t.r,a=t.trigger,o=t.minR,s=t.maxR,l=t.scaleRBy,u=t.showLabel,h=t.shouldShow;if(isNaN(t.r)||e.set("r",n),isNaN(s)||e.set("maxR",s),isNaN(o)||e.set("minR",o),(a==="mousemove"||a==="click")&&e.set("trigger",a),l==="wheel"||l==="unset"){e.set("scaleRBy",l),e.get("delegate").remove(),e.get("delegate").destroy();var c=e.get("dPercentText");c&&(c.remove(),c.destroy())}(u==="node"||u==="both")&&e.set("showNodeLabel",!0),(u==="edge"||u==="both")&&e.set("showEdgeLabel",!0),h&&e.set("shouldShow",h)},r.prototype.updateDelegate=function(t,e){var n=this,a=n.get("graph"),o=n.get("delegate");if(!o||o.destroyed){var s=a.get("group"),l=n.get("delegateStyle")||y1;o=s.addShape("circle",{attrs:(0,V.__assign)({r:e,x:t.x,y:t.y},l),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&this.get("scaleRBy")==="wheel"&&o.on("mousewheel",function(u){n.scaleRByWheel(u)})}else o.attr({x:t.x,y:t.y,r:e});n.set("delegate",o)},r.prototype.clear=function(){var t=this,e=t.get("vShapes");e&&e.forEach(function(a){a.remove(),a.destroy()}),e=[],t.set("vShapes",e);var n=t.get("delegate");n&&!n.destroyed&&(n.remove(),n.destroy())},r.prototype.destroy=function(){this.clear()},r}(Va),W8=H8,qi={Menu:G6,Grid:F6,Minimap:H6,Bundling:U6,ToolBar:Q6,Tooltip:q6,Fisheye:K6,TimeBar:Y8,ImageMinimap:V8,EdgeFilterLens:W8};function j8(i){i===void 0&&(i={});var r=i,t=function(){},e=function(){var n={};return function(a){var o=a.next;return n[o.get("id")]?!1:(n[o.get("id")]=!0,!0)}}();return r.allowTraversal=i.allowTraversal||e,r.enter=i.enter||t,r.leave=i.leave||t,r}function m1(i,r,t,e){e.enter({current:r,previous:t}),i.getNeighbors(r,"target").forEach(function(n){e.allowTraversal({previous:t,current:r,next:n})&&m1(i,n,r,e)}),e.leave({current:r,previous:t})}function x1(i,r,t){var e=null,n=i.findById(r);m1(i,n,e,j8(t))}var U8=function(){function i(){this.linkedList=new zx}return i.prototype.isEmpty=function(){return!this.linkedList.head},i.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},i.prototype.enqueue=function(r){this.linkedList.append(r)},i.prototype.dequeue=function(){var r=this.linkedList.deleteHead();return r?r.value:null},i.prototype.toString=function(r){return this.linkedList.toString(r)},i}(),Z8=U8;function K8(i){i===void 0&&(i={});var r=i,t=function(){},e=function(){var n={};return function(a){var o=a.next,s=o.get("id");return n[s]?!1:(n[s]=!0,!0)}}();return r.allowTraversal=i.allowTraversal||e,r.enter=i.enter||t,r.leave=i.leave||t,r}var $8=function(r,t,e){var n=K8(e),a=new Z8,o=r.findById(t);a.enqueue(o);for(var s=null,l=function(){var h=a.dequeue();n.enter({current:h,previous:s}),r.getNeighbors(h,"target").forEach(function(c){n.allowTraversal({previous:s,current:h,next:c})&&a.enqueue(c)}),n.leave({current:h,previous:s}),s=h};!a.isEmpty();)l()},Q8=$8;function J8(i){for(var r=[],t={},e=[],n=function l(u){e.push(u),t[u.get("id")]=!0;for(var h=u.getNeighbors(),c=0;c<h.length;++c){var v=h[c];t[v.get("id")]||l(v)}},a=0;a<i.length;a++){var o=i[a];if(!t[o.get("id")]){n(o);for(var s=[];e.length>0;)s.push(e.pop());r.push(s)}}return r}function b1(i){for(var r=[],t={},e={},n={},a=[],o=0,s=function c(v){e[v.get("id")]=o,n[v.get("id")]=o,o+=1,r.push(v),t[v.get("id")]=!0;for(var x=v.getNeighbors("target").filter(function(N){return i.indexOf(N)>-1}),M=0;M<x.length;M++){var k=x[M];!e[k.get("id")]&&e[k.get("id")]!==0?(c(k),n[v.get("id")]=Math.min(n[v.get("id")],n[k.get("id")])):t[k.get("id")]&&(n[v.get("id")]=Math.min(n[v.get("id")],e[k.get("id")]))}if(n[v.get("id")]===e[v.get("id")]){for(var R=[];r.length>0;){var G=r.pop();if(t[G.get("id")]=!1,R.push(G),G===v)break}R.length>0&&a.push(R)}},l=0,u=i;l<u.length;l++){var h=u[l];!e[h.get("id")]&&e[h.get("id")]!==0&&s(h)}return a}function w1(i,r){var t=r===void 0?i.get("directed"):r,e=i.getNodes();return t?b1(e):J8(e)}var q8=function(r){var t=null,e={},n={},a={},o={};r.getNodes().forEach(function(u){n[u.getID()]=u});for(var s={enter:function(h){var c=h.current,v=h.previous;if(a[c.getID()]){t={};for(var x=c,M=v;M.getID()!==c.getID();)t[x.getID()]=M,x=M,M=e[M.getID()];t[x.getID()]=M}else a[c.getID()]=c,delete n[c.getID()],e[c.getID()]=v},leave:function(h){var c=h.current;o[c.getID()]=c,delete a[c.getID()]},allowTraversal:function(h){var c=h.next;return t?!1:!o[c.getID()]}};Object.keys(n).length;){var l=Object.keys(n)[0];x1(r,l,s)}return t},S1=function(r,t,e){var n,a,o;e===void 0&&(e=!0);for(var s=[],l=w1(r,!1),u=0,h=l;u<h.length;u++){var c=h[u];if(!!c.length)for(var v=c[0],x=v.get("id"),M=[v],k=(n={},n[x]=v,n),R=(a={},a[x]=new Set,a);M.length>0;)for(var G=M.pop(),N=G.get("id"),ot=G.getNeighbors(),ut=0;ut<ot.length;ut+=1){var Mt=ot[ut],zt=Mt.get("id");if(zt===N)s.push((o={},o[Mt.getID()]=G,o));else if(!(zt in R))k[zt]=G,M.push(Mt),R[zt]=new Set([G]);else if(!R[N].has(Mt)){for(var $t=!0,ee=[Mt,G],Ut=k[N];R[zt].size&&!R[zt].has(Ut)&&(ee.push(Ut),Ut!==k[Ut.getID()]);)Ut=k[Ut.getID()];if(ee.push(Ut),t&&e?($t=!1,ee.findIndex(function(ye){return t.indexOf(ye.get("id"))>-1})>-1&&($t=!0)):t&&!e&&ee.findIndex(function(ye){return t.indexOf(ye.get("id"))>-1})>-1&&($t=!1),$t){for(var le={},xe=1;xe<ee.length;xe+=1)le[ee[xe-1].getID()]=ee[xe];ee.length&&(le[ee[ee.length-1].getID()]=ee[0]),s.push(le)}R[zt].add(G)}}}return s},C1=function(r,t,e){e===void 0&&(e=!0);for(var n=[],a=new Set,o=[],s=[],l={},u={},h=function(le){for(var xe=[le];xe.length>0;){var ye=xe.pop();a.has(ye)&&(a.delete(ye),o[ye.get("id")].forEach(function(Oe){xe.push(Oe)}),o[ye.get("id")].clear())}},c=function Ut(le,xe,ye){var Oe=!1;if(t&&e===!1&&t.indexOf(le.get("id"))>-1)return Oe;n.push(le),a.add(le);for(var Ge=ye[le.getID()],Ne=0;Ne<Ge.length;Ne+=1){var qe=l[Ge[Ne]];if(qe===xe){for(var tr={},rr=1;rr<n.length;rr+=1)tr[n[rr-1].getID()]=n[rr];n.length&&(tr[n[n.length-1].getID()]=n[0]),s.push(tr),Oe=!0}else a.has(qe)||Ut(qe,xe,ye)&&(Oe=!0)}if(Oe)h(le);else for(var Ne=0;Ne<Ge.length;Ne+=1){var qe=l[Ge[Ne]];o[qe.get("id")].has(le)||o[qe.get("id")].add(le)}return n.pop(),Oe},v=r.getNodes(),x=0;x<v.length;x+=1){var M=v[x],k=M.getID();u[k]=x,l[x]=M}if(t&&e)for(var x=0;x<t.length;x++){var k=t[x];u[v[x].getID()]=u[k],u[k]=0,l[0]=r.findById(k),l[u[v[x].getID()]]=v[x]}for(var R=function(le){for(var xe,ye,Oe=Infinity,Ge=0;Ge<le.length;Ge+=1)for(var Ne=le[Ge],qe=0;qe<Ne.length;qe++){var tr=u[Ne[qe].getID()];tr<Oe&&(Oe=tr,ye=Ge)}for(var rr=le[ye],$e=[],Ge=0;Ge<rr.length;Ge+=1){var Qe=rr[Ge];$e[Qe.getID()]=[];for(var br=0,yr=Qe.getNeighbors("target").filter(function(wr){return rr.indexOf(wr)>-1});br<yr.length;br++){var _r=yr[br];_r===Qe&&!(e===!1&&t.indexOf(Qe.getId())>-1)?s.push((xe={},xe[Qe.getID()]=Qe,xe)):$e[Qe.getID()].push(u[_r.getID()])}}return{component:rr,adjList:$e,minIdx:Oe}},G=0;G<v.length;){var N=v.filter(function(Ut){return u[Ut.getID()]>=G}),ot=b1(N).filter(function(Ut){return Ut.length>1});if(ot.length===0)break;var ut=R(ot),Mt=ut.minIdx,zt=ut.adjList,$t=ut.component;if($t.length>1){$t.forEach(function(Ut){o[Ut.get("id")]=new Set});var ee=l[Mt];if(t&&e&&t.indexOf(ee.get("id"))===-1)return s;c(ee,ee,zt),G=Mt+1}else break}return s},t9=function(r,t,e,n){return n===void 0&&(n=!0),t===void 0&&(t=r.get("directed")),t?C1(r,e,n):S1(r,e,n)},e9=q8,r9=function(r,t,e,n){var a=r.getNodes(),o=[],s={},l={},u={};a.forEach(function(R,G){var N=R.getID();o.push(N),l[N]=Infinity,N===t&&(l[N]=0)});for(var h=a.length,c=function(G){var N=n9(l,a,s),ot=N.get("id");if(s[ot]=!0,l[ot]===Infinity)return"continue";var ut=[];e?ut=N.getOutEdges():ut=N.getEdges(),ut.forEach(function(Mt){var zt=Mt.getTarget().getID(),$t=Mt.getSource().getID(),ee=zt===ot?$t:zt,Ut=n&&Mt.getModel()[n]?Mt.getModel()[n]:1;l[ee]>l[N.get("id")]+Ut&&(l[ee]=l[N.get("id")]+Ut,u[ee]=N.get("id"))})},v=0;v<h;v++)c(v);var x={};for(var M in l){x[M]=[M];for(var k=u[M];k!==void 0;)x[M].unshift(k),k=u[k]}return{length:l,path:x}};function n9(i,r,t){for(var e=Infinity,n,a=0;a<r.length;a++){var o=r[a].get("id");!t[o]&&i[o]<=e&&(e=i[o],n=r[a])}return n}var i9=r9,a9=function(r,t,e,n,a){(0,f.isString)(t)&&(t=r.findById(t)),(0,f.isString)(e)&&(e=r.findById(e));var o=i9(r,t.get("id"),n,a),s=o.length,l=o.path;return{length:s[e.get("id")],path:l[e.get("id")]}},o9=function(r,t,e,n){var a;if((0,f.isString)(t)&&(t=r.findById(t)),(0,f.isString)(e)&&(e=r.findById(e)),n===void 0&&(n=r.get("directed")),t===e)return[[t.get("id")]];var o=[t],s=(a={},a[t.get("id")]=!0,a),l=[],u=[],h=n?t.getNeighbors("target"):t.getNeighbors();for(l.push(h);o.length>0&&l.length>0;){var c=l[l.length-1];if(c.length){var v=c.shift();v&&(o.push(v),s[v.get("id")]=!0,h=n?v.getNeighbors("target"):v.getNeighbors(),l.push(h.filter(function(k){return!s[k.get("id")]})))}else{var x=o.pop();s[x.get("id")]=!1,l.pop();continue}if(o[o.length-1]===e){var M=o.map(function(R){return R.get("id")});u.push(M);var x=o.pop();s[x.get("id")]=!1,l.pop()}}return u},s9=function(){function i(r){this.count=r.length,this.parent={};for(var t=0,e=r;t<e.length;t++){var n=e[t];this.parent[n]=n}}return i.prototype.find=function(r){for(;this.parent[r]!==r;)r=this.parent[r];return r},i.prototype.union=function(r,t){var e=this.find(r),n=this.find(t);e!==n&&(e<n?(this.parent[t]!==t&&this.union(this.parent[t],r),this.parent[t]=this.parent[r]):(this.parent[r]!==r&&this.union(this.parent[r],t),this.parent[r]=this.parent[t]))},i.prototype.connected=function(r,t){return this.find(r)===this.find(t)},i}(),l9=s9,u9=function(r,t){return r-t},f9=function(){function i(r){r===void 0&&(r=u9),this.compareFn=r,this.list=[]}return i.prototype.getLeft=function(r){return 2*r+1},i.prototype.getRight=function(r){return 2*r+2},i.prototype.getParent=function(r){return r===0?null:Math.floor((r-1)/2)},i.prototype.isEmpty=function(){return this.list.length<=0},i.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},i.prototype.delMin=function(){var r=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),r},i.prototype.insert=function(r){if(r!==null){this.list.push(r);var t=this.list.length-1;return this.moveUp(t),!0}return!1},i.prototype.moveUp=function(r){for(var t=this.getParent(r);r&&r>0&&this.compareFn(this.list[t],this.list[r])>0;){var e=this.list[t];this.list[t]=this.list[r],this.list[r]=e,r=t,t=this.getParent(r)}},i.prototype.moveDown=function(r){var t,e=r,n=this.getLeft(r),a=this.getRight(r),o=this.list.length;n!==null&&n<o&&this.compareFn(this.list[e],this.list[n])>0?e=n:a!==null&&a<o&&this.compareFn(this.list[e],this.list[a])>0&&(e=a),r!==e&&(t=[this.list[e],this.list[r]],this.list[r]=t[0],this.list[e]=t[1],this.moveDown(e))},i}(),h9=f9,c9=function(r,t){var e=[],n=r.getNodes();if(n.length===0)return e;var a=n[0],o=new Set;o.add(a);var s=function(x,M){return t?x.getModel()[t]-M.getModel()[t]:0},l=new h9(s);for(a.getEdges().forEach(function(v){l.insert(v)});!l.isEmpty();){var u=l.delMin(),h=u.getSource(),c=u.getTarget();o.has(h)&&o.has(c)||(e.push(u),o.has(h)||(o.add(h),h.getEdges().forEach(function(v){l.insert(v)})),o.has(c)||(o.add(c),c.getEdges().forEach(function(v){l.insert(v)})))}return e},M1=function(r,t){var e=[];if(r.getNodes().length===0)return e;var n=r.getEdges().map(function(u){return u});t&&n.sort(function(u,h){return u.getModel()[t]-h.getModel()[t]});for(var a=new l9(r.getNodes().map(function(u){return u.get("id")}));n.length>0;){var o=n.shift(),s=o.getSource().get("id"),l=o.getTarget().get("id");a.connected(s,l)||(e.push(o),a.union(s,l))}return e};function v9(i,r,t){var e={prim:c9,kruskal:M1};return t?e[t](i,r):M1(i,r)}var d9=function(r,t,e){typeof t!="number"&&(t=1e-6),typeof e!="number"&&(e=.85);for(var n=1,a=0,o=1e3,s=r.getNodes(),l=s.length,u,h={},c={},v=0;v<l;++v){var x=s[v],M=x.get("id");h[M]=1/l,c[M]=1/l}for(;o>0&&n>t;){a=0;for(var v=0;v<l;++v){var x=s[v],M=x.get("id");if(u=0,r.getNodeDegree(x,"in")===0)h[M]=0;else{for(var k=x.getNeighbors("source"),R=0;R<k.length;++R){var G=k[R],N=r.getNodeDegree(G,"out");N>0&&(u+=c[G.get("id")]/N)}h[M]=e*u,a+=h[M]}}a=(1-a)/l,n=0;for(var v=0;v<l;++v){var x=s[v],M=x.get("id");u=h[M]+a,n+=Math.abs(u-c[M]),c[M]=u}o-=1}return c},p9=d9,VY=ss.registerNode,HY=ss.registerEdge,WY=ss.registerCombo,jY=$m.registerBehavior,UY=Fs.registerLayout,ZY=qi.Minimap,KY=qi.Grid,$Y=qi.Bundling,QY=qi.Menu,g9=qi.Fisheye,JY=qi.ToolBar,qY=qi.Tooltip,y9=qi.TimeBar,m9=qi.ImageMinimap,x9=qi.EdgeFilterLens,Zi={version:QF.i8,Graph:Zx,TreeGraph:e6,Util:k6,registerNode:ss.registerNode,registerEdge:ss.registerEdge,registerCombo:ss.registerCombo,registerBehavior:$m.registerBehavior,registerLayout:Fs.registerLayout,Layout:Fs,Global:Ke,Minimap:qi.Minimap,Grid:qi.Grid,Bundling:qi.Bundling,Menu:qi.Menu,ToolBar:qi.ToolBar,Tooltip:qi.Tooltip,TimeBar:y9,Fisheye:g9,ImageMinimap:m9,EdgeFilterLens:x9,Algorithm:lt,Arrow:P6,Marker:L6};function E1(i,r){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(i);r&&(e=e.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),t.push.apply(t,e)}return t}function Ua(i){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?E1(Object(t),!0).forEach(function(e){b9(i,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):E1(Object(t)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(t,e))})}return i}function b9(i,r,t){return r in i?Object.defineProperty(i,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[r]=t,i}Zi.registerNode("card-node",{draw:function(r,t){var e=r&&r.color?r.color:"#5B8FF9",n=r&&r.size?r.size:[100,30];typeof n=="number"&&(n=[n,n]);var a=r&&r.style?r.style:{};a=Object.assign({radius:2,fill:"#fff"},a),e=a.stroke||"#5B8FF9";var o=a.radius||0,s=t.addShape("rect",{attrs:Ua({x:-n[0]/2,y:-n[1]/2,width:n[0],height:n[1],stroke:e},a),name:"main-box",draggable:!0}),l=r.title||r.label,u,h=r&&r.labelCfg&&r.labelCfg.style?r.labelCfg.style:{};if(l){var c=Object.assign({fill:"#fff"},h);u=t.addShape("text",{attrs:Ua(Ua({textBaseline:"top",x:-n[0]/2+8,y:-n[1]/2+2,text:l},c),{},{fill:"#fff"}),name:"title"})}var v=u?u.getBBox():{height:n[1]/2},x=t.addShape("rect",{attrs:{x:-n[0]/2,y:-n[1]/2,width:n[0],height:v.height+4,fill:e,radius:[o,o,0,0]},name:"title-rect",draggable:!0});u&&u.toFront();var M;r.children&&(M=t.addShape("marker",{attrs:{x:n[0]/2,y:0,r:6,cursor:"pointer",symbol:r.collapsed?Zi.Marker.expand:Zi.Marker.collapse,stroke:e,lineWidth:1,fill:"#fff"},name:"collapse-icon"}));var k=r&&r.description?r.description:void 0,R=x.getBBox(),G;if(k&&(G=t.addShape("text",{attrs:Ua({textBaseline:"top",x:-n[0]/2+8,y:-n[1]/2+R.height+8,text:k},h),name:"description"})),G){var N,ot=G.getBBox(),ut=R.height+16+ot.height,Mt=n[0]>ot.width+16?n[0]:ot.width+16;s.attr({width:Mt,height:ut}),x==null||x.attr("width",Mt),(N=M)===null||N===void 0||N.attr({x:Mt-n[0]/2,y:ut/2-n[1]/2})}return s},update:void 0},"single-node"),Zi.registerNode("round-rect",{drawShape:function(r,t){var e=r&&r.color?r.color:"#5B8FF9",n=r&&r.size?r.size:[100,30];typeof n=="number"&&(n=[n,n]);var a=r&&r.style?r.style:{};a.stroke&&(e=a.stroke);var o=a&&a.fill?a.fill:"#fff";a=Object.assign({width:n[0],height:n[1],radius:n[1]/2,fill:o,lineWidth:1.2,stroke:e},a);var s=t.addShape("rect",{attrs:Ua({x:-n[0]/2,y:-n[1]/2},a),name:"rect-shape"});return t.addShape("circle",{attrs:{x:-n[0]/2,y:0,r:3,fill:a.stroke},name:"circle-shape"}),t.addShape("circle",{attrs:{x:n[0]/2,y:0,r:3,fill:a.stroke},name:"circle-shape2"}),s},getAnchorPoints:function(){return[[0,.5],[1,.5]]},update:function(r,t){var e=t.getContainer(),n=e.get("children"),a=n[0],o=n[1],s=n[2],l=r.style&&r.style.stroke?r.style.stroke:"#5B8FF9";l&&(a.attr("stroke",l),o.attr("fill",l),s.attr("fill",l))}},"single-node");var w9=function(r){Zi.registerNode("icon-node",{options:{size:[60,20],stroke:"#91d5ff",fill:"#91d5ff"},draw:function(e,n){var a=this.getShapeStyle(e),o=e.labelCfg,s=o===void 0?{}:o,l=n.addShape("rect",{attrs:Ua(Ua({},a),{},{x:0,y:0})}),u={fill:"#e6fffb"},h="https://g.alicdn.com/cm-design/arms-trace/1.0.155/styles/armsTrace/images/TAIR.png";return e.leftIcon&&(u=Object.assign({},u,e.leftIcon.style),h=e.leftIcon.img),n.addShape("rect",{attrs:Ua({x:1,y:1,width:38,height:a.height-2},u)}),n.addShape("image",{attrs:{x:8,y:8,width:24,height:24,img:h},name:"image-shape"}),r.enableEdit&&(n.addShape("marker",{attrs:{x:a.width/3,y:a.height+6,r:6,stroke:"#73d13d",cursor:"pointer",symbol:Zi.Marker.expand},name:"add-item"}),n.addShape("marker",{attrs:{x:a.width*2/3,y:a.height+6,r:6,stroke:"#ff4d4f",cursor:"pointer",symbol:Zi.Marker.collapse},name:"remove-item"})),e.label&&n.addShape("text",{attrs:Ua(Ua({},s.style),{},{text:e.label,x:a.width/2,y:a.height/1.5})}),l}},"rect")};Zi.registerEdge("fund-polyline",{draw:function(r,t){var e=r.startPoint,n=r.endPoint,a=n.y-e.y,o=a!==0?500/Math.abs(a):0,s=16,l=a<0?s:-s,u={x:e.x+o,y:n.y+l},h={x:u.x+s,y:n.y},c={x:(u.x-e.x)*(n.y-e.y)/(u.y-e.y)+e.x,y:n.y},v=[["M",e.x,e.y],["L",u.x,u.y],["Q",c.x,c.y,h.x,h.y],["L",n.x,n.y]];a===0&&(v=[["M",e.x,e.y],["L",n.x,n.y]]);var x=r||{},M=x.style,k=t.addShape("path",{attrs:{path:v,stroke:M.stroke||r.colorMap&&r.colorMap[r.dataType]?r.colorMap[r.dataType]:"#5B8FF9",lineWidth:M.lineWidth||1.2,endArrow:!1},name:"path-shape"}),R=0,G=8,N;if(r.label&&(N=t.addShape("text",{attrs:{text:r.label,x:h.x+R,y:n.y-G-2,fontSize:14,textAlign:"left",textBaseline:"middle",fill:"#000"},name:"text-shape-label"})),r.dataType){var ot=N?N.getBBox():{height:0};t.addShape("text",{attrs:{text:r.dataType,x:h.x+R,y:n.y-G-ot.height-2,fontSize:10,textAlign:"left",textBaseline:"middle",fill:"#000"},name:"text-shape-type"})}return r.subLabel&&t.addShape("text",{attrs:{text:r.subLabel,x:h.x+R,y:n.y+G+4,fontSize:12,fontWeight:300,textAlign:"left",textBaseline:"middle",fill:"#000"},name:"text-shape-sub-label"}),k},update:void 0},"single-edge"),Zi.registerEdge("flow-line",{draw:function(r,t){var e=r.startPoint,n=r.endPoint,a=r.style,o=a===void 0?{}:a,s=t.addShape("path",{attrs:{stroke:o.stroke,endArrow:o.endArrow,path:[["M",e.x,e.y],["L",e.x,(e.y+n.y)/2],["L",n.x,(e.y+n.y)/2],["L",n.x,n.y]]}});return s}});function _1(i,r){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(i);r&&(e=e.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),t.push.apply(t,e)}return t}function S9(i){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?_1(Object(t),!0).forEach(function(e){C9(i,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):_1(Object(t)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(t,e))})}return i}function C9(i,r,t){return r in i?Object.defineProperty(i,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[r]=t,i}var M9={show:!1,size:[150,100],type:"keyShape"},Gs=function(r,t,e){var n,a;return e&&e.current&&(n=e.current.offsetWidth,a=e.current.offsetHeight||500),console.log("graph size",n,a,t,r,e,e.current),!r&&!n||!t&&!a?(console.warn("\u8BF7\u4E3A Graph \u6307\u5B9A width \u4E0E height\uFF01\u5426\u5219\u5C06\u4F7F\u7528\u9ED8\u8BA4\u503C 500 * 500"),[500,500]):[r||n||500,t||a||500]},Ys=function(r,t){if(!(!t||t.destroyed)&&r&&r.show){var e=Object.assign(M9,r),n=new Zi.Minimap(S9({},e));return t.addPlugin(n),n}};function Bu(i,r,t){var e=(0,z.useRef)(),n=r.data,a=r.nodeStyle,o=r.nodeAnchorPoints,s=r.nodeType,l=r.edgeType,u=r.edgeStyle,h=r.width,c=r.height,v=r.layout,x=r.minimapCfg,M=r.behaviors,k=r.nodeLabelCfg,R=r.edgeLabelCfg,G;return(0,z.useEffect)(function(){i&&!i.destroyed&&(i.changeData(n),i.layout())},[n]),(0,z.useEffect)(function(){i&&!i.destroyed&&i.getNodes().forEach(function(N){i.updateItem(N,{type:s,style:a,anchorPoints:o,labelCfg:k})})},[a,o,s]),(0,z.useEffect)(function(){i&&!i.destroyed&&i.getEdges().forEach(function(N){i.updateItem(N,{type:l,style:u,labelCfg:R})})},[u,l]),(0,z.useEffect)(function(){if(i&&!i.destroyed){var N=Gs(h,c,t);i.changeSize(N[0],N[1])}},[t,h,c]),(0,z.useEffect)(function(){i&&!i.destroyed&&i.updateLayout(v)},[v]),(0,z.useEffect)(function(){if(!(!x||!i||i.destroyed))if(x.show)G=Ys(x,i),G&&G.updateCanvas();else{var N=i.get("plugins")[0];N&&i.removePlugin(N)}},[x]),(0,z.useEffect)(function(){if(i&&!i.destroyed){var N=i.get("modes"),ot=N.default,ut=[];ot.forEach(function(Mt){(0,f.isObject)(Mt)?ut.push(Mt.type):(0,f.isString)(Mt)&&ut.push(Mt)}),i.removeBehaviors(ut,"default"),i.addBehaviors(M,"default")}},[M]),(0,z.useEffect)(function(){if(e.current=i,i&&!i.destroyed)return function(){i.destroy(),i=void 0}},[]),{graphHook:e}}var A1={hover:{stroke:"#1890ff",lineWidth:2}},E9={fill:"#91d5ff",stroke:"#40a9ff",radius:5},_9={stroke:"#91d5ff",endArrow:{path:"M 0,0 L 12, 6 L 9,0 L 12, -6 Z",fill:"#91d5ff",d:-20}},A9={type:"compactBox",direction:"TB",getId:function(r){return r.id},getHeight:function(){return 16},getWidth:function(){return 16},getVGap:function(){return 40},getHGap:function(){return 70}},T1={style:{fill:"#000",fontSize:12}},Pn,T9=function(r){var t=r.data,e=r.className,n=r.style,a=r.width,o=r.height,s=r.nodeType,l=s===void 0?"rect":s,u=r.edgeType,h=u===void 0?"flow-line":u,c=r.collapseExpand,v=c===void 0?!1:c,x=r.nodeSize,M=x===void 0?[120,40]:x,k=r.nodeLabelCfg,R=k===void 0?T1:k,G=r.edgeLabelCfg,N=G===void 0?T1:G,ot=r.layout,ut=ot===void 0?A9:ot,Mt=r.enableEdit,zt=Mt===void 0?!1:Mt,$t=r.minimapCfg,ee=r.nodeStyle,Ut=ee===void 0?E9:ee,le=r.edgeStyle,xe=le===void 0?_9:le,ye=r.nodeStateStyles,Oe=ye===void 0?A1:ye,Ge=r.edgeStateStyles,Ne=Ge===void 0?A1:Ge,qe=r.handleNodeClick,tr=r.handleEdgeClick,rr=r.handleNodeHover,$e=r.handleNodeUnHover,Qe=r.handleEdgeHover,br=r.handleEdgeUnHover,yr=r.handleCanvasClick,_r=r.graphRef,ir={data:t,className:e,style:n,width:a,height:o,nodeType:l,edgeType:h,collapseExpand:v,nodeSize:M,nodeLabelCfg:R,edgeLabelCfg:N,layout:ut,enableEdit:zt,minimapCfg:$t,nodeStyle:Ut,edgeStyle:xe,nodeStateStyles:Oe,edgeStateStyles:Ne,handleNodeClick:qe,handleEdgeClick:tr,handleNodeHover:rr,handleNodeUnHover:$e,handleEdgeHover:Qe,handleEdgeUnHover:br,handleCanvasClick:yr,graphRef:_r},wr=z.useRef(null);return Bu(Pn,ir,wr),(0,z.useEffect)(function(){var Dr=Gs(a,o,wr);return(!Pn||Pn.destroyed)&&(l==="icon-node"&&w9({enableEdit:zt}),Pn=new Zi.TreeGraph({container:wr.current,width:Dr[0],height:Dr[1],linkCenter:!0,modes:{default:["drag-canvas","zoom-canvas"]},defaultNode:{type:l,size:M,style:Ut,labelCfg:R},defaultEdge:{type:h,style:xe,labelCfg:N},nodeStateStyles:Oe,edgeStateStyles:Ne,layout:ut}),_r&&(_r.current=Pn)),Ys($t,Pn),Pn.data(t),Pn.render(),Pn.fitView(),v&&Pn.addBehaviors({type:"collapse-expand",onChange:function(Mr,zr){if(!Mr)return!1;var qr=Mr.get("model").data;return qr.collapsed=zr,!0}},"default"),Pn.on("node:mouseenter",function(Er){var Mr=Er.item;Pn.setItemState(Mr,"hover",!0),rr&&rr(Mr,Pn)}),Pn.on("node:mouseleave",function(Er){var Mr=Er.item;Pn.setItemState(Mr,"hover",!1),$e&&$e(Mr,Pn)}),Pn.on("node:click",function(Er){var Mr=Er.item,zr=Er.target,qr=zr.get("type"),Lr=zr.get("name");if(qr==="marker"){var We=Mr.getModel();if(Lr==="add-item"){We.children||(We.children=[]);var lr=Math.random().toString(36).slice(-8);We.children.push({id:lr,label:lr}),Pn.updateChild(We,We.id)}else Lr==="remove-item"&&Pn.removeChild(We.id)}else qe&&qe(Mr,Pn)}),Pn.on("edge:mouseenter",function(Er){var Mr=Er.item;Pn.setItemState(Mr,"hover",!0),Qe&&Qe(Mr,Pn)}),Pn.on("edge:mouseleave",function(Er){var Mr=Er.item;Pn.setItemState(Mr,"hover",!1),br&&br(Mr,Pn)}),Pn.on("edge:click",function(Er){var Mr=Er.item;tr&&tr(Mr,Pn)}),Pn.on("canvas:click",function(Er){yr&&yr(Pn)}),function(){return Pn.destroy()}},[]),z.createElement(an,null,z.createElement("div",{className:e,style:n,ref:wr}))},P9=T9,P1={hover:{stroke:"#1890ff",lineWidth:2}},L9=[120,40],O9={stroke:"#40a9ff"},I9=[[.5,0],[.5,1]],k9={stroke:"#91d5ff",endArrow:{path:Zi.Arrow.vee(10,10),fill:"#91d5ff"}},B9={type:"dagre",rankdir:"TB",nodesepFunc:function(r){return 0},ranksepFunc:function(r){return 0},controlPoints:!0},L1={style:{fill:"#000",fontSize:12}},Yn,D9=function(r){var t=r.data,e=r.className,n=r.style,a=r.width,o=r.height,s=r.nodeType,l=s===void 0?"modelRect":s,u=r.edgeType,h=u===void 0?"polyline":u,c=r.behaviors,v=c===void 0?["zoom-canvas","drag-canvas"]:c,x=r.nodeSize,M=x===void 0?L9:x,k=r.nodeLabelCfg,R=k===void 0?L1:k,G=r.edgeLabelCfg,N=G===void 0?L1:G,ot=r.nodeAnchorPoints,ut=ot===void 0?I9:ot,Mt=r.layout,zt=Mt===void 0?B9:Mt,$t=r.minimapCfg,ee=r.nodeStyle,Ut=ee===void 0?O9:ee,le=r.edgeStyle,xe=le===void 0?k9:le,ye=r.nodeStateStyles,Oe=ye===void 0?P1:ye,Ge=r.edgeStateStyles,Ne=Ge===void 0?P1:Ge,qe=r.handleEdgeClick,tr=r.handleEdgeHover,rr=r.handleEdgeUnHover,$e=r.handleNodeClick,Qe=r.handleNodeHover,br=r.handleNodeUnHover,yr=r.handleCanvasClick,_r=r.graphRef,ir={data:t,className:e,style:n,width:a,height:o,nodeType:l,edgeType:h,behaviors:v,nodeSize:M,nodeLabelCfg:R,edgeLabelCfg:N,nodeAnchorPoints:ut,layout:zt,minimapCfg:$t,nodeStyle:Ut,edgeStyle:xe,nodeStateStyles:Oe,edgeStateStyles:Ne,handleEdgeClick:qe,handleEdgeHover:tr,handleEdgeUnHover:rr,handleNodeClick:$e,handleNodeHover:Qe,handleNodeUnHover:br,handleCanvasClick:yr,graphRef:_r},wr=z.useRef(null);return Bu(Yn,ir,wr),(0,z.useEffect)(function(){var Dr=Gs(a,o,wr);return(!Yn||Yn.destroyed)&&(Yn=new Zi.Graph({container:wr.current,width:Dr[0],height:Dr[1],modes:{default:v},defaultNode:{type:l,size:M,style:Ut,anchorPoints:ut,labelCfg:R},defaultEdge:{type:h,style:xe,labelCfg:N},nodeStateStyles:Oe,edgeStateStyles:Ne,layout:zt}),_r&&(_r.current=Yn)),Ys($t,Yn),Yn.data(t),Yn.render(),Yn.fitView(),Yn.on("edge:mouseenter",function(Er){var Mr=Er.item;Yn.setItemState(Mr,"hover",!0),tr&&tr(Mr,Yn)}),Yn.on("node:mouseenter",function(Er){var Mr=Er.item;Yn.setItemState(Mr,"hover",!1),Qe&&Qe(Mr,Yn)}),Yn.on("edge:mouseleave",function(Er){var Mr=Er.item;Yn.setItemState(Mr,"hover",!1),rr&&rr(Mr,Yn)}),Yn.on("node:mouseleave",function(Er){var Mr=Er.item;Yn.setItemState(Mr,"hover",!1),br&&br(Mr,Yn)}),Yn.on("edge:click",function(Er){var Mr=Er.item;qe&&qe(Mr,Yn)}),Yn.on("node:click",function(Er){var Mr=Er.item;$e&&$e(Mr,Yn)}),Yn.on("canvas:click",function(Er){yr&&yr(Yn)}),function(){return Yn.destroy()}},[]),z.createElement(an,null,z.createElement("div",{className:e,style:n,ref:wr}))},F9=D9,O1={hover:{stroke:"#1890ff",lineWidth:2}},R9=[150,30],N9={stroke:"#72CC4A",fill:"#f00"},G9=[[.5,0],[.5,1]],Y9={stroke:"#91d5ff",endArrow:{path:Zi.Arrow.vee(10,10),fill:"#91d5ff"}},z9={type:"dagre",rankdir:"LR",nodesep:30,ranksep:50},I1={style:{fill:"#000000A6",fontSize:10}},Dn,X9=function(r){var t=r.data,e=r.className,n=r.style,a=r.width,o=r.height,s=r.nodeType,l=s===void 0?"round-rect":s,u=r.edgeType,h=u===void 0?"fund-polyline":u,c=r.behaviors,v=c===void 0?["zoom-canvas","drag-canvas"]:c,x=r.nodeSize,M=x===void 0?R9:x,k=r.nodeLabelCfg,R=k===void 0?I1:k,G=r.edgeLabelCfg,N=G===void 0?I1:G,ot=r.nodeAnchorPoints,ut=ot===void 0?G9:ot,Mt=r.layout,zt=Mt===void 0?z9:Mt,$t=r.minimapCfg,ee=r.nodeStyle,Ut=ee===void 0?N9:ee,le=r.edgeStyle,xe=le===void 0?Y9:le,ye=r.nodeStateStyles,Oe=ye===void 0?O1:ye,Ge=r.edgeStateStyles,Ne=Ge===void 0?O1:Ge,qe=r.colorMap,tr=qe===void 0?{}:qe,rr=r.handleEdgeClick,$e=r.handleEdgeHover,Qe=r.handleEdgeUnHover,br=r.handleNodeClick,yr=r.handleNodeHover,_r=r.handleNodeUnHover,ir=r.handleCanvasClick,wr=r.graphRef,Dr=z.useRef(null),Er={data:t,className:e,style:n,width:a,height:o,nodeType:l,edgeType:h,behaviors:v,nodeSize:M,nodeLabelCfg:R,edgeLabelCfg:N,nodeAnchorPoints:ut,layout:zt,minimapCfg:$t,nodeStyle:Ut,edgeStyle:xe,nodeStateStyles:Oe,edgeStateStyles:Ne,colorMap:tr,handleEdgeClick:rr,handleEdgeHover:$e,handleEdgeUnHover:Qe,handleNodeClick:br,handleNodeHover:yr,handleNodeUnHover:_r,handleCanvasClick:ir,graphRef:wr};return Bu(Dn,Er,Dr),(0,z.useEffect)(function(){var Mr=Gs(a,o,Dr);(!Dn||Dn.destroyed)&&(Dn=new Zi.Graph({container:Dr.current,width:Mr[0],height:Mr[1],modes:{default:v},defaultNode:{type:l,size:M,style:Ut,anchorPoints:ut,labelCfg:R},defaultEdge:{type:h,style:xe,colorMap:tr,labelCfg:N},nodeStateStyles:Oe,edgeStateStyles:Ne,layout:zt}),wr&&(wr.current=Dn)),Ys($t,Dn),Dn.data(t),Dn.render();var zr=Dn.getEdges();return zr.forEach(function(qr){var Lr=qr.getKeyShape(),We=Lr.attr("stroke"),lr=qr.getTarget();lr.update({style:{stroke:We}})}),Dn.fitView(),Dn.on("edge:mouseenter",function(qr){var Lr=qr.item;Dn.setItemState(Lr,"hover",!0),$e&&$e(Lr,Dn)}),Dn.on("edge:mouseleave",function(qr){var Lr=qr.item;Dn.setItemState(Lr,"hover",!1),Qe&&Qe(Lr,Dn)}),Dn.on("edge:click",function(qr){var Lr=qr.item;rr&&rr(Lr,Dn)}),Dn.on("node:mouseenter",function(qr){var Lr=qr.item;Dn.setItemState(Lr,"hover",!1),yr&&yr(Lr,Dn)}),Dn.on("node:mouseleave",function(qr){var Lr=qr.item;Dn.setItemState(Lr,"hover",!1),_r&&_r(Lr,Dn)}),Dn.on("node:click",function(qr){var Lr=qr.item;br&&br(Lr,Dn)}),Dn.on("canvas:click",function(qr){ir&&ir(Dn)}),function(){return Dn.destroy()}},[]),z.createElement(an,null,z.createElement("div",{className:e,style:n,ref:Dr}))},V9=X9,k1={hover:{stroke:"#1890ff",lineWidth:2}},H9=[120,40],W9={stroke:"#40a9ff"},j9=[[0,.5],[1,.5]],U9={stroke:"#ccc",endArrow:{path:Zi.Arrow.vee(10,10),fill:"#ccc"}},Z9={type:"indented",direction:"LR",dropCap:!1,indent:250,getHeight:function(){return 60},getWidth:function(r){return 100}},K9={style:{fill:"#000",fontSize:12}},In,$9=function(r){var t=r.data,e=r.className,n=r.style,a=r.width,o=r.height,s=r.nodeType,l=s===void 0?"card-node":s,u=r.edgeType,h=u===void 0?"cubic-horizontal":u,c=r.behaviors,v=c===void 0?["zoom-canvas","drag-canvas"]:c,x=r.nodeSize,M=x===void 0?H9:x,k=r.nodeLabelCfg,R=k===void 0?K9:k,G=r.nodeAnchorPoints,N=G===void 0?j9:G,ot=r.layout,ut=ot===void 0?Z9:ot,Mt=r.minimapCfg,zt=r.nodeStyle,$t=zt===void 0?W9:zt,ee=r.edgeStyle,Ut=ee===void 0?U9:ee,le=r.nodeStateStyles,xe=le===void 0?k1:le,ye=r.edgeStateStyles,Oe=ye===void 0?k1:ye,Ge=r.collapseExpand,Ne=Ge===void 0?!0:Ge,qe=r.handleEdgeClick,tr=r.handleEdgeHover,rr=r.handleEdgeUnHover,$e=r.handleNodeClick,Qe=r.handleNodeHover,br=r.handleNodeUnHover,yr=r.handleCanvasClick,_r=r.graphRef,ir=z.useRef(null),wr={data:t,className:e,style:n,width:a,height:o,nodeType:l,edgeType:h,behaviors:v,nodeSize:M,nodeLabelCfg:R,nodeAnchorPoints:N,layout:ut,minimapCfg:Mt,nodeStyle:$t,edgeStyle:Ut,nodeStateStyles:xe,edgeStateStyles:Oe,collapseExpand:Ne,handleEdgeClick:qe,handleEdgeHover:tr,handleEdgeUnHover:rr,handleNodeClick:$e,handleNodeHover:Qe,handleNodeUnHover:br,handleCanvasClick:yr,graphRef:_r};return Bu(In,wr,ir),(0,z.useEffect)(function(){var Dr=Gs(a,o,ir);return(!In||In.destroyed)&&(In=new Zi.TreeGraph({container:ir.current,width:Dr[0],height:Dr[1],modes:{default:v},defaultNode:{type:l,size:M,style:$t,anchorPoints:N,labelCfg:R},defaultEdge:{type:h,style:Ut},nodeStateStyles:xe,edgeStateStyles:Oe,layout:ut}),_r&&(_r.current=In)),Ys(Mt,In),In.data(t),In.render(),In.fitView(),Ne&&In.on("node:click",function(Er){var Mr=Er.item;Er.target.get("name")==="collapse-icon"?(In.updateItem(Mr,{collapsed:!Mr.getModel().collapsed}),In.layout()):$e&&$e(Mr,In)}),In.on("edge:mouseenter",function(Er){var Mr=Er.item;In.setItemState(Mr,"hover",!0),tr&&tr(Mr,In)}),In.on("edge:mouseleave",function(Er){var Mr=Er.item;In.setItemState(Mr,"hover",!1),rr&&rr(Mr,In)}),In.on("edge:click",function(Er){var Mr=Er.item;qe&&qe(Mr,In)}),In.on("node:mouseenter",function(Er){var Mr=Er.item;In.setItemState(Mr,"hover",!1),Qe&&Qe(Mr,In)}),In.on("node:mouseleave",function(Er){var Mr=Er.item;In.setItemState(Mr,"hover",!1),br&&br(Mr,In)}),In.on("canvas:click",function(Er){yr&&yr(In)}),function(){return In.destroy()}},[]),z.createElement(an,null,z.createElement("div",{className:e,style:n,ref:ir}))},Q9=$9,tz={Area:LD,Bar:kD,Bubble:FD,Bullet:GD,Calendar:VD,Column:p0,ColumnLine:ZD,DensityHeatmap:QD,Donut:x0,DualLine:r5,FanGauge:a5,Funnel:u5,Gauge:c5,GroupedBar:p5,GroupedColumn:m5,GroupedColumnLine:w5,GroupedRose:M5,Heatmap:A5,Histogram:L5,Line:L0,Liquid:D5,MeterGauge:N5,PercentStackedArea:z5,PercentStackedBar:H5,PercentStackedColumn:U5,Pie:$5,Progress:N0,Radar:eF,RangeBar:iF,RangeColumn:sF,RingProgress:V0,Rose:cF,Scatter:pF,StackedArea:mF,StackedBar:wF,StackedColumn:MF,StackedColumnLine:AF,StackedRose:LF,StepLine:kF,TinyArea:q0,TinyColumn:em,TinyLine:YF,Treemap:VF,Waterfall:jF,WordCloud:$F,OrganizationTreeGraph:P9,DagreGraph:F9,IndentedTree:Q9,DagreFundFlowGraph:V9,G2:L}},89939:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(49242),I=p(15623),P=function(){function O(L){var A=L.xField,_=L.yField,E=L.adjustNames,g=E===void 0?["x","y"]:E,w=L.dimValuesMap;this.adjustNames=g,this.xField=A,this.yField=_,this.dimValuesMap=w}return O.prototype.isAdjust=function(L){return this.adjustNames.indexOf(L)>=0},O.prototype.getAdjustRange=function(L,A,_){var E=this.yField,g=_.indexOf(A),w=_.length,d,y;return!E&&this.isAdjust("y")?(d=0,y=1):w>1?(d=_[g===0?0:g-1],y=_[g===w-1?w-1:g+1],g!==0?d+=(A-d)/2:d-=(y-A)/2,g!==w-1?y-=(y-A)/2:y+=(A-_[w-2])/2):(d=A===0?0:A-.5,y=A===0?1:A+.5),{pre:d,next:y}},O.prototype.adjustData=function(L,A){var _=this,E=this.getDimValues(A);b.each(L,function(g,w){b.each(E,function(d,y){_.adjustDim(y,d,g,w)})})},O.prototype.groupData=function(L,A){return b.each(L,function(_){_[A]===void 0&&(_[A]=I.DEFAULT_Y)}),b.groupBy(L,A)},O.prototype.adjustDim=function(L,A,_,E){},O.prototype.getDimValues=function(L){var A=this,_=A.xField,E=A.yField,g=b.assign({},this.dimValuesMap),w=[];if(_&&this.isAdjust("x")&&w.push(_),E&&this.isAdjust("y")&&w.push(E),w.forEach(function(y){g&&g[y]||(g[y]=b.valuesOfKey(L,y).sort(function(m,C){return m-C}))}),!E&&this.isAdjust("y")){var d="y";g[d]=[I.DEFAULT_Y,1]}return g},O}();S.default=P},15623:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.GAP=S.DODGE_RATIO=S.MARGIN_RATIO=S.DEFAULT_Y=void 0,S.DEFAULT_Y=0,S.MARGIN_RATIO=1/2,S.DODGE_RATIO=1/2,S.GAP=.05},28014:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Adjust=S.registerAdjust=S.getAdjust=void 0;var b=p(60153),I=p(89939);S.Adjust=I.default;var P={},O=function(A){return P[A.toLowerCase()]};S.getAdjust=O;var L=function(A,_){if(O(A))throw new Error("Adjust type '"+A+"' existed.");P[A.toLowerCase()]=_};S.registerAdjust=L,b.__exportStar(p(48551),S)},48551:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0})},21392:function(Ct,S,p){"use strict";p.r(S),p.d(S,{Attribute:function(){return O},Color:function(){return E},Opacity:function(){return w},Position:function(){return y},Scale:function(){return D.Scale},Shape:function(){return C},Size:function(){return B},getAttribute:function(){return K},registerAttribute:function(){return H}});var b=p(49242),I=function(st,pt){return(0,b.isString)(pt)?pt:st.invert(st.scale(pt))},P=function(){function st(pt){this.names=[],this.scales=[],this.linear=!1,this.values=[],this.callback=function(){return[]},this._parseCfg(pt)}return st.prototype.mapping=function(){for(var pt=this,ct=[],Ot=0;Ot<arguments.length;Ot++)ct[Ot]=arguments[Ot];var Rt=ct.map(function(Qt,Gt){return pt._toOriginParam(Qt,pt.scales[Gt])});return this.callback.apply(this,Rt)},st.prototype.getLinearValue=function(pt){var ct=this.values.length-1,Ot=Math.floor(ct*pt),Rt=ct*pt-Ot,Qt=this.values[Ot],Gt=Ot===ct?Qt:this.values[Ot+1];return Qt+(Gt-Qt)*Rt},st.prototype.getNames=function(){for(var pt=this.scales,ct=this.names,Ot=Math.min(pt.length,ct.length),Rt=[],Qt=0;Qt<Ot;Qt+=1)Rt.push(ct[Qt]);return Rt},st.prototype.getFields=function(){return this.scales.map(function(pt){return pt.field})},st.prototype.getScale=function(pt){return this.scales[this.names.indexOf(pt)]},st.prototype.defaultCallback=function(){for(var pt=this,ct=[],Ot=0;Ot<arguments.length;Ot++)ct[Ot]=arguments[Ot];return ct.length===0?this.values:ct.map(function(Rt,Qt){var Gt=pt.scales[Qt];return Gt.type==="identity"?Gt.values[0]:pt._getAttributeValue(Gt,Rt)})},st.prototype._parseCfg=function(pt){var ct=this,Ot=pt.type,Rt=Ot===void 0?"base":Ot,Qt=pt.names,Gt=Qt===void 0?[]:Qt,Z=pt.scales,nt=Z===void 0?[]:Z,Q=pt.values,dt=Q===void 0?[]:Q,lt=pt.callback;this.type=Rt,this.scales=nt,this.values=dt,this.names=Gt,this.callback=function(){for(var z=[],$=0;$<arguments.length;$++)z[$]=arguments[$];if(lt){var j=lt.apply(void 0,z);if(!(0,b.isNil)(j))return[j]}return ct.defaultCallback.apply(ct,z)}},st.prototype._getAttributeValue=function(pt,ct){if(pt.isCategory&&!this.linear){var Ot=pt.translate(ct);return this.values[Ot%this.values.length]}var Rt=pt.scale(ct);return this.getLinearValue(Rt)},st.prototype._toOriginParam=function(pt,ct){return ct.isLinear?pt:(0,b.isArray)(pt)?pt.map(function(Ot){return I(ct,Ot)}):I(ct,pt)},st}(),O=P,L=p(60153),A=p(55223),_=function(st){(0,L.__extends)(pt,st);function pt(ct){var Ot=st.call(this,ct)||this;return Ot.type="color",Ot.names=["color"],(0,b.isString)(Ot.values)&&(Ot.linear=!0),Ot.gradient=A.default.gradient(Ot.values),Ot}return pt.prototype.getLinearValue=function(ct){return this.gradient(ct)},pt}(O),E=_,g=function(st){(0,L.__extends)(pt,st);function pt(ct){var Ot=st.call(this,ct)||this;return Ot.type="opacity",Ot.names=["opacity"],Ot}return pt}(O),w=g,d=function(st){(0,L.__extends)(pt,st);function pt(ct){var Ot=st.call(this,ct)||this;return Ot.names=["x","y"],Ot.type="position",Ot}return pt.prototype.mapping=function(ct,Ot){var Rt=this.scales,Qt=Rt[0],Gt=Rt[1];return(0,b.isNil)(ct)||(0,b.isNil)(Ot)?[]:[(0,b.isArray)(ct)?ct.map(function(Z){return Qt.scale(Z)}):Qt.scale(ct),(0,b.isArray)(Ot)?Ot.map(function(Z){return Gt.scale(Z)}):Gt.scale(Ot)]},pt}(O),y=d,m=function(st){(0,L.__extends)(pt,st);function pt(ct){var Ot=st.call(this,ct)||this;return Ot.type="shape",Ot.names=["shape"],Ot}return pt.prototype.getLinearValue=function(ct){var Ot=Math.round((this.values.length-1)*ct);return this.values[Ot]},pt}(O),C=m,T=function(st){(0,L.__extends)(pt,st);function pt(ct){var Ot=st.call(this,ct)||this;return Ot.type="size",Ot.names=["size"],Ot}return pt}(O),B=T,D=p(2443),Y={},K=function(st){return Y[st.toLowerCase()]},H=function(st,pt){if(K(st))throw new Error("Attribute type '"+st+"' existed.");Y[st.toLowerCase()]=pt};H("Color",E),H("Opacity",w),H("Position",y),H("Shape",C),H("Size",B)},74839:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(49242),I=function(O,L){return b.isString(L)?L:O.invert(O.scale(L))},P=function(){function O(L){this.names=[],this.scales=[],this.linear=!1,this.values=[],this.callback=function(){return[]},this._parseCfg(L)}return O.prototype.mapping=function(){for(var L=this,A=[],_=0;_<arguments.length;_++)A[_]=arguments[_];var E=A.map(function(g,w){return L._toOriginParam(g,L.scales[w])});return this.callback.apply(this,E)},O.prototype.getLinearValue=function(L){var A=this.values.length-1,_=Math.floor(A*L),E=A*L-_,g=this.values[_],w=_===A?g:this.values[_+1];return g+(w-g)*E},O.prototype.getNames=function(){for(var L=this.scales,A=this.names,_=Math.min(L.length,A.length),E=[],g=0;g<_;g+=1)E.push(A[g]);return E},O.prototype.getFields=function(){return this.scales.map(function(L){return L.field})},O.prototype.getScale=function(L){return this.scales[this.names.indexOf(L)]},O.prototype.defaultCallback=function(){for(var L=this,A=[],_=0;_<arguments.length;_++)A[_]=arguments[_];return A.length===0?this.values:A.map(function(E,g){var w=L.scales[g];return w.type==="identity"?w.values[0]:L._getAttributeValue(w,E)})},O.prototype._parseCfg=function(L){var A=this,_=L.type,E=_===void 0?"base":_,g=L.names,w=g===void 0?[]:g,d=L.scales,y=d===void 0?[]:d,m=L.values,C=m===void 0?[]:m,T=L.callback;this.type=E,this.scales=y,this.values=C,this.names=w,this.callback=function(){for(var B=[],D=0;D<arguments.length;D++)B[D]=arguments[D];if(T){var Y=T.apply(void 0,B);if(!b.isNil(Y))return[Y]}return A.defaultCallback.apply(A,B)}},O.prototype._getAttributeValue=function(L,A){if(L.isCategory&&!this.linear){var _=L.translate(A);return this.values[_%this.values.length]}var E=L.scale(A);return this.getLinearValue(E)},O.prototype._toOriginParam=function(L,A){return A.isLinear?L:b.isArray(L)?L.map(function(_){return I(A,_)}):I(A,L)},O}();S.default=P},24796:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Attribute=S.registerAttribute=S.getAttribute=void 0;var b=p(60153),I=p(74839);S.Attribute=I.default;var P={},O=function(A){return P[A.toLowerCase()]};S.getAttribute=O;var L=function(A,_){if(O(A))throw new Error("Attribute type '"+A+"' existed.");P[A.toLowerCase()]=_};S.registerAttribute=L,b.__exportStar(p(77290),S)},77290:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Scale=void 0;var b=p(2443);Object.defineProperty(S,"Scale",{enumerable:!0,get:function(){return b.Scale}})},55223:function(Ct,S,p){"use strict";p.r(S);var b=p(49242),I=/rgba?\(([\s.,0-9]+)\)/,P=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,O=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,L=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,A=function(D){return/^[r,R,L,l]{1}[\s]*\(/.test(D)},_=function(){var D=document.createElement("i");return D.title="Web Colour Picker",D.style.display="none",document.body.appendChild(D),D},E=function(D,Y,K,H){return D[H]+(Y[H]-D[H])*K};function g(D){return"#"+d(D[0])+d(D[1])+d(D[2])}var w=function(D){return[parseInt(D.substr(1,2),16),parseInt(D.substr(3,2),16),parseInt(D.substr(5,2),16)]},d=function(D){var Y=Math.round(D).toString(16);return Y.length===1?"0"+Y:Y},y=function(D,Y){var K=isNaN(Number(Y))||Y<0?0:Y>1?1:Number(Y),H=D.length-1,st=Math.floor(H*K),pt=H*K-st,ct=D[st],Ot=st===H?ct:D[st+1];return g([E(ct,Ot,pt,0),E(ct,Ot,pt,1),E(ct,Ot,pt,2)])},m,C=function(D){if(D[0]==="#"&&D.length===7)return D;m||(m=_()),m.style.color=D;var Y=document.defaultView.getComputedStyle(m,"").getPropertyValue("color"),K=I.exec(Y),H=K[1].split(/\s*,\s*/).map(function(st){return Number(st)});return Y=g(H),Y},T=function(D){var Y=(0,b.isString)(D)?D.split("-"):D,K=(0,b.map)(Y,function(H){return w(H.indexOf("#")===-1?C(H):H)});return function(H){return y(K,H)}},B=function(D){if(A(D)){var Y,K=void 0;if(D[0]==="l"){var H=P.exec(D),st=+H[1]+90;K=H[2],Y="linear-gradient("+st+"deg, "}else if(D[0]==="r"){Y="radial-gradient(";var H=O.exec(D);K=H[4]}var pt=K.match(L);return(0,b.each)(pt,function(ct,Ot){var Rt=ct.split(":");Y+=Rt[1]+" "+Rt[0]*100+"%",Ot!==pt.length-1&&(Y+=", ")}),Y+=")",Y}return D};S.default={rgb2arr:w,gradient:T,toRGB:(0,b.memoize)(C),toCSSGradient:B}},51441:function(Ct,S,p){"use strict";p.r(S),p.d(S,{Annotation:function(){return b},Axis:function(){return A},Component:function(){return bt},Crosshair:function(){return _},Grid:function(){return E},GroupComponent:function(){return q},HtmlComponent:function(){return ua},Legend:function(){return g},Scrollbar:function(){return Tr},Slider:function(){return ke},Tooltip:function(){return d}});var b={};p.r(b),p.d(b,{Arc:function(){return ii},DataMarker:function(){return ge},DataRegion:function(){return Pe},Image:function(){return ne},Line:function(){return Pr},Region:function(){return Si},RegionFilter:function(){return De},Text:function(){return nn}});var I={};p.r(I),p.d(I,{ellipsisHead:function(){return hr},ellipsisMiddle:function(){return vr},ellipsisTail:function(){return gr},getDefault:function(){return Sr}});var P={};p.r(P),p.d(P,{equidistance:function(){return Zr},getDefault:function(){return Wr},reserveBoth:function(){return Qr},reserveFirst:function(){return Nr},reserveLast:function(){return jr}});var O={};p.r(O),p.d(O,{fixedAngle:function(){return yi},getDefault:function(){return Hn},unfixedAngle:function(){return Jn}});var L={};p.r(L),p.d(L,{autoEllipsis:function(){return I},autoHide:function(){return P},autoRotate:function(){return O}});var A={};p.r(A),p.d(A,{Base:function(){return je},Circle:function(){return oi},Line:function(){return Mi}});var _={};p.r(_),p.d(_,{Base:function(){return ci},Circle:function(){return Ii},Html:function(){return mt},Line:function(){return vi}});var E={};p.r(E),p.d(E,{Base:function(){return Pt},Circle:function(){return de},Line:function(){return Fe}});var g={};p.r(g),p.d(g,{Base:function(){return Xe},Category:function(){return mr},Continuous:function(){return Gr}});var w={};p.r(w),p.d(w,{CONTAINER_CLASS:function(){return vn},CROSSHAIR_X:function(){return ei},CROSSHAIR_Y:function(){return Bi},LIST_CLASS:function(){return qn},LIST_ITEM_CLASS:function(){return ki},MARKER_CLASS:function(){return li},NAME_CLASS:function(){return ti},TITLE_CLASS:function(){return Ln},VALUE_CLASS:function(){return Wn}});var d={};p.r(d),p.d(d,{Html:function(){return fa}});var y=p(60153),m=p(49242),C=p(66192);function T(Yt,ft,F){var X=new C.default(ft,F);X.target=Yt,X.propagationPath.push(Yt),Yt.emitDelegation(ft,X);for(var U=Yt.getParent();U;)U.emitDelegation(ft,X),X.propagationPath.push(U),U=U.getParent()}var B=p(31506),D=p(31437),Y=[1,0,0,0,1,0,0,0,1];function K(Yt,ft,F){if(F===void 0&&(F=Y),!ft)return null;var X=B.transform(F,[["t",-Yt.x,-Yt.y],["r",ft],["t",Yt.x,Yt.y]]);return X}function H(Yt,ft){return!Yt.x&&!Yt.y?null:B.transform(ft||Y,[["t",Yt.x,Yt.y]])}function st(Yt){var ft=[1,0,0],F=[0,0,0];return vec3.transformMat3(F,ft,Yt),Math.atan2(F[1],F[0])}function pt(Yt,ft){var F=[0,0];return D.transformMat3(F,ft,Yt),F}function ct(Yt,ft){var F=pt(Yt,[ft.minX,ft.minY]),X=pt(Yt,[ft.maxX,ft.minY]),U=pt(Yt,[ft.minX,ft.maxY]),gt=pt(Yt,[ft.maxX,ft.maxY]),kt=Math.min(F[0],X[0],U[0],gt[0]),Ht=Math.max(F[0],X[0],U[0],gt[0]),se=Math.min(F[1],X[1],U[1],gt[1]),ce=Math.max(F[1],X[1],U[1],gt[1]);return{x:kt,y:se,minX:kt,minY:se,maxX:Ht,maxY:ce,width:Ht-kt,height:ce-se}}function Ot(Yt,ft,F,X){if(ft){var U=K({x:F,y:X},ft,Yt.getMatrix());Yt.setMatrix(U)}}function Rt(Yt,ft,F){var X=H({x:ft,y:F});Yt.attr("matrix",X)}function Qt(Yt){var ft=0,F=0,X=0,U=0;return(0,m.isNumber)(Yt)?ft=F=X=U=Yt:(0,m.isArray)(Yt)&&(ft=Yt[0],X=(0,m.isNil)(Yt[1])?Yt[0]:Yt[1],U=(0,m.isNil)(Yt[2])?Yt[0]:Yt[2],F=(0,m.isNil)(Yt[3])?X:Yt[3]),[ft,X,U,F]}function Gt(Yt){for(var ft=Yt.childNodes,F=ft.length,X=F-1;X>=0;X--)Yt.removeChild(ft[X])}function Z(Yt,ft){return!!Yt.className.match(new RegExp("(\\s|^)"+ft+"(\\s|$)"))}function nt(Yt){var ft=Yt.start,F=Yt.end,X=Math.min(ft.x,F.x),U=Math.min(ft.y,F.y),gt=Math.max(ft.x,F.x),kt=Math.max(ft.y,F.y);return{x:X,y:U,minX:X,minY:U,maxX:gt,maxY:kt,width:gt-X,height:kt-U}}function Q(Yt){var ft=Yt.map(function(Ht){return Ht.x}),F=Yt.map(function(Ht){return Ht.y}),X=Math.min.apply(Math,ft),U=Math.min.apply(Math,F),gt=Math.max.apply(Math,ft),kt=Math.max.apply(Math,F);return{x:X,y:U,minX:X,minY:U,maxX:gt,maxY:kt,width:gt-X,height:kt-U}}function dt(Yt,ft,F,X){return{x:Yt,y:ft,width:F,height:X,minX:Yt,minY:ft,maxX:Yt+F,maxY:ft+X}}function lt(Yt,ft,F){return(1-F)*Yt+ft*F}function z(Yt,ft,F){return{x:Yt.x+Math.cos(F)*ft,y:Yt.y+Math.sin(F)*ft}}function $(Yt,ft){var F=ft.x-Yt.x,X=ft.y-Yt.y;return Math.sqrt(F*F+X*X)}var j=function(Yt){return new Promise(function(ft){setTimeout(ft,Yt)})},f=function(Yt,ft){return[Yt,ft].includes(Infinity)?Math.abs(Yt)===Math.abs(ft):Math.abs(Yt-ft)<Math.pow(Number.EPSILON,.5)};function yt(Yt,ft){var F=Math.max(Yt.minX,ft.minX),X=Math.max(Yt.minY,ft.minY),U=Math.min(Yt.maxX,ft.maxX),gt=Math.min(Yt.maxY,ft.maxY);return dt(F,X,U-F,gt-X)}function _t(Yt,ft){var F=Math.min(Yt.minX,ft.minX),X=Math.min(Yt.minY,ft.minY),U=Math.max(Yt.maxX,ft.maxX),gt=Math.max(Yt.maxY,ft.maxY);return dt(F,X,U-F,gt-X)}function jt(Yt){var ft=Yt.getClip(),F=ft&&ft.getBBox(),X;if(!Yt.isGroup())X=Yt.getBBox();else{var U=Infinity,gt=-Infinity,kt=Infinity,Ht=-Infinity,se=Yt.getChildren();se.length>0?(0,m.each)(se,function(ce){if(ce.get("visible")){if(ce.isGroup()&&ce.get("children").length===0)return!0;var Me=jt(ce),Le=ce.applyToMatrix([Me.minX,Me.minY,1]),Ue=ce.applyToMatrix([Me.minX,Me.maxY,1]),Je=ce.applyToMatrix([Me.maxX,Me.minY,1]),xr=ce.applyToMatrix([Me.maxX,Me.maxY,1]),Yr=Math.min(Le[0],Ue[0],Je[0],xr[0]),kr=Math.max(Le[0],Ue[0],Je[0],xr[0]),on=Math.min(Le[1],Ue[1],Je[1],xr[1]),un=Math.max(Le[1],Ue[1],Je[1],xr[1]);Yr<U&&(U=Yr),kr>gt&&(gt=kr),on<kt&&(kt=on),un>Ht&&(Ht=un)}}):(U=0,gt=0,kt=0,Ht=0),X=dt(U,kt,gt-U,Ht-kt)}return F?yt(X,F):X}function qt(Yt,ft){if(!(!Yt.getClip()&&!ft.getClip())){var F=ft.getClip();if(!F){Yt.setClip(null);return}var X={type:F.get("type"),attrs:F.attr()};Yt.setClip(X)}}function Vt(Yt){return Yt+"px"}function re(Yt,ft,F,X){var U=$(Yt,ft),gt=X/U,kt=0;return F==="start"?kt=0-gt:F==="end"&&(kt=1+gt),{x:lt(Yt.x,ft.x,kt),y:lt(Yt.y,ft.y,kt)}}var ae=p(39014),Nt={none:[],point:["x","y"],region:["start","end"],points:["points"],circle:["center","radius","startAngle","endAngle"]},Lt=function(Yt){(0,y.__extends)(ft,Yt);function ft(F){var X=Yt.call(this,F)||this;return X.initCfg(),X}return ft.prototype.getDefaultCfg=function(){return{id:"",name:"",type:"",locationType:"none",offsetX:0,offsetY:0,animate:!1,capture:!0,updateAutoRender:!1,animateOption:{appear:null,update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},events:null,defaultCfg:{},visible:!0}},ft.prototype.clear=function(){},ft.prototype.update=function(F){var X=this,U=this.get("defaultCfg");(0,m.each)(F,function(gt,kt){var Ht=X.get(kt),se=gt;Ht!==gt&&((0,m.isObject)(gt)&&U[kt]&&(se=(0,m.deepMix)({},U[kt],gt)),X.set(kt,se))}),this.updateInner(F),this.afterUpdate(F)},ft.prototype.updateInner=function(F){},ft.prototype.afterUpdate=function(F){(0,m.hasKey)(F,"visible")&&(F.visible?this.show():this.hide()),(0,m.hasKey)(F,"capture")&&this.setCapture(F.capture)},ft.prototype.getLayoutBBox=function(){return this.getBBox()},ft.prototype.getLocationType=function(){return this.get("locationType")},ft.prototype.getOffset=function(){return{offsetX:this.get("offsetX"),offsetY:this.get("offsetY")}},ft.prototype.setOffset=function(F,X){this.update({offsetX:F,offsetY:X})},ft.prototype.setLocation=function(F){var X=(0,y.__assign)({},F);this.update(X)},ft.prototype.getLocation=function(){var F=this,X={},U=this.get("locationType"),gt=Nt[U];return(0,m.each)(gt,function(kt){X[kt]=F.get(kt)}),X},ft.prototype.isList=function(){return!1},ft.prototype.isSlider=function(){return!1},ft.prototype.init=function(){},ft.prototype.initCfg=function(){var F=this,X=this.get("defaultCfg");(0,m.each)(X,function(U,gt){var kt=F.get(gt);if((0,m.isObject)(kt)){var Ht=(0,m.deepMix)({},U,kt);F.set(gt,Ht)}})},ft}(ae.Base),bt=Lt,at="update_status",rt=["visible","tip","delegateObject"],vt=["container","group","shapesMap","isRegister","isUpdating","destroyed"],tt=function(Yt){(0,y.__extends)(ft,Yt);function ft(){return Yt!==null&&Yt.apply(this,arguments)||this}return ft.prototype.getDefaultCfg=function(){var F=Yt.prototype.getDefaultCfg.call(this);return(0,y.__assign)((0,y.__assign)({},F),{container:null,shapesMap:{},group:null,capture:!0,isRegister:!1,isUpdating:!1,isInit:!0})},ft.prototype.remove=function(){this.clear();var F=this.get("group");F.remove()},ft.prototype.clear=function(){var F=this.get("group");F.clear(),this.set("shapesMap",{}),this.clearOffScreenCache(),this.set("isInit",!0)},ft.prototype.getChildComponentById=function(F){var X=this.getElementById(F),U=X&&X.get("component");return U},ft.prototype.getElementById=function(F){return this.get("shapesMap")[F]},ft.prototype.getElementByLocalId=function(F){var X=this.getElementId(F);return this.getElementById(X)},ft.prototype.getElementsByName=function(F){var X=[];return(0,m.each)(this.get("shapesMap"),function(U){U.get("name")===F&&X.push(U)}),X},ft.prototype.getContainer=function(){return this.get("container")},ft.prototype.updateInner=function(F){this.offScreenRender(),this.get("updateAutoRender")&&this.render()},ft.prototype.render=function(){var F=this.get("offScreenGroup");F||(F=this.offScreenRender());var X=this.get("group");this.updateElements(F,X),this.deleteElements(),this.applyOffset(),this.get("eventInitted")||(this.initEvent(),this.set("eventInitted",!0)),this.set("isInit",!1)},ft.prototype.show=function(){var F=this.get("group");F.show(),this.set("visible",!0)},ft.prototype.hide=function(){var F=this.get("group");F.hide(),this.set("visible",!1)},ft.prototype.setCapture=function(F){var X=this.get("group");X.set("capture",F),this.set("capture",F)},ft.prototype.destroy=function(){this.removeEvent(),this.remove(),Yt.prototype.destroy.call(this)},ft.prototype.getBBox=function(){return this.get("group").getCanvasBBox()},ft.prototype.getLayoutBBox=function(){var F=this.get("group"),X=this.getInnerLayoutBBox(),U=F.getTotalMatrix();return U&&(X=ct(U,X)),X},ft.prototype.on=function(F,X,U){var gt=this.get("group");return gt.on(F,X,U),this},ft.prototype.off=function(F,X){var U=this.get("group");return U&&U.off(F,X),this},ft.prototype.emit=function(F,X){var U=this.get("group");U.emit(F,X)},ft.prototype.init=function(){Yt.prototype.init.call(this),this.get("group")||this.initGroup(),this.offScreenRender()},ft.prototype.getInnerLayoutBBox=function(){return this.get("offScreenBBox")||this.get("group").getBBox()},ft.prototype.delegateEmit=function(F,X){var U=this.get("group");X.target=U,U.emit(F,X),T(U,F,X)},ft.prototype.createOffScreenGroup=function(){var F=this.get("group"),X=F.getGroupBase(),U=new X({delegateObject:this.getDelegateObject()});return U},ft.prototype.applyOffset=function(){var F=this.get("offsetX"),X=this.get("offsetY");this.moveElementTo(this.get("group"),{x:F,y:X})},ft.prototype.initGroup=function(){var F=this.get("container");this.set("group",F.addGroup({id:this.get("id"),name:this.get("name"),capture:this.get("capture"),visible:this.get("visible"),isComponent:!0,component:this,delegateObject:this.getDelegateObject()}))},ft.prototype.offScreenRender=function(){this.clearOffScreenCache();var F=this.createOffScreenGroup();return this.renderInner(F),this.set("offScreenGroup",F),this.set("offScreenBBox",jt(F)),F},ft.prototype.addGroup=function(F,X){this.appendDelegateObject(F,X);var U=F.addGroup(X);return this.get("isRegister")&&this.registerElement(U),U},ft.prototype.addShape=function(F,X){this.appendDelegateObject(F,X);var U=F.addShape(X);return this.get("isRegister")&&this.registerElement(U),U},ft.prototype.addComponent=function(F,X){var U=X.id,gt=X.component,kt=(0,y.__rest)(X,["id","component"]),Ht=new gt((0,y.__assign)((0,y.__assign)({},kt),{id:U,container:F,updateAutoRender:this.get("updateAutoRender")}));return Ht.init(),Ht.render(),this.get("isRegister")&&this.registerElement(Ht.get("group")),Ht},ft.prototype.initEvent=function(){},ft.prototype.removeEvent=function(){var F=this.get("group");F.off()},ft.prototype.getElementId=function(F){var X=this.get("id"),U=this.get("name");return X+"-"+U+"-"+F},ft.prototype.registerElement=function(F){var X=F.get("id");this.get("shapesMap")[X]=F},ft.prototype.unregisterElement=function(F){var X=F.get("id");delete this.get("shapesMap")[X]},ft.prototype.moveElementTo=function(F,X){var U=H(X);F.attr("matrix",U)},ft.prototype.addAnimation=function(F,X,U){var gt=X.attr("opacity");(0,m.isNil)(gt)&&(gt=1),X.attr("opacity",0),X.animate({opacity:gt},U)},ft.prototype.removeAnimation=function(F,X,U){X.animate({opacity:0},U)},ft.prototype.updateAnimation=function(F,X,U,gt){X.animate(U,gt)},ft.prototype.updateElements=function(F,X){var U=this,gt=this.get("animate"),kt=this.get("animateOption"),Ht=F.getChildren().slice(0),se;(0,m.each)(Ht,function(ce){var Me=ce.get("id"),Le=U.getElementById(Me),Ue=ce.get("name");if(Le)if(ce.get("isComponent")){var Je=ce.get("component"),xr=Le.get("component"),Yr=(0,m.pick)(Je.cfg,(0,m.difference)((0,m.keys)(Je.cfg),vt));xr.update(Yr),Le.set(at,"update")}else{var kr=U.getReplaceAttrs(Le,ce);gt&&kt.update?U.updateAnimation(Ue,Le,kr,kt.update):Le.attr(kr),ce.isGroup()&&U.updateElements(ce,Le),(0,m.each)(rt,function(Bt){Le.set(Bt,ce.get(Bt))}),qt(Le,ce),se=Le,Le.set(at,"update")}else{X.add(ce);var on=X.getChildren();if(on.splice(on.length-1,1),se){var un=on.indexOf(se);on.splice(un+1,0,ce)}else on.unshift(ce);if(U.registerElement(ce),ce.set(at,"add"),ce.get("isComponent")){var Je=ce.get("component");Je.set("container",X)}else ce.isGroup()&&U.registerNewGroup(ce);if(se=ce,gt){var sn=U.get("isInit")?kt.appear:kt.enter;sn&&U.addAnimation(Ue,ce,sn)}}})},ft.prototype.clearUpdateStatus=function(F){var X=F.getChildren();(0,m.each)(X,function(U){U.set(at,null)})},ft.prototype.clearOffScreenCache=function(){var F=this.get("offScreenGroup");F&&F.destroy(),this.set("offScreenGroup",null),this.set("offScreenBBox",null)},ft.prototype.getDelegateObject=function(){var F,X=this.get("name"),U=(F={},F[X]=this,F.component=this,F);return U},ft.prototype.appendDelegateObject=function(F,X){var U=F.get("delegateObject");X.delegateObject||(X.delegateObject={}),(0,m.mix)(X.delegateObject,U)},ft.prototype.getReplaceAttrs=function(F,X){var U=F.attr(),gt=X.attr();return(0,m.each)(U,function(kt,Ht){gt[Ht]===void 0&&(gt[Ht]=void 0)}),gt},ft.prototype.registerNewGroup=function(F){var X=this,U=F.getChildren();(0,m.each)(U,function(gt){X.registerElement(gt),gt.set(at,"add"),gt.isGroup()&&X.registerNewGroup(gt)})},ft.prototype.deleteElements=function(){var F=this,X=this.get("shapesMap"),U=[];(0,m.each)(X,function(Ht,se){!Ht.get(at)||Ht.destroyed?U.push([se,Ht]):Ht.set(at,null)});var gt=this.get("animate"),kt=this.get("animateOption");(0,m.each)(U,function(Ht){var se=Ht[0],ce=Ht[1];if(!ce.destroyed){var Me=ce.get("name");if(gt&&kt.leave){var Le=(0,m.mix)({callback:function(){F.removeElement(ce)}},kt.leave);F.removeAnimation(Me,ce,Le)}else F.removeElement(ce)}delete X[se]})},ft.prototype.removeElement=function(F){if(F.get("isGroup")){var X=F.get("component");X&&X.destroy()}F.remove()},ft}(bt),q=tt,Et="\u2026";function It(Yt){for(var ft=0,F=0;F<Yt.length;F++)ft+=Kt(Yt,F);return ft}function Kt(Yt,ft){return Yt.charCodeAt(ft)>0&&Yt.charCodeAt(ft)<128?1:2}function ue(Yt,ft,F){F===void 0&&(F="tail");var X=Yt.length,U="";if(F==="tail"){for(var gt=0,kt=0;gt<ft;){var Ht=Kt(Yt,kt);if(gt+Ht<=ft)U+=Yt[kt],gt+=Kt(Yt,kt),kt++;else break}U+=Et}else if(F==="head"){for(var gt=0,kt=X-1;gt<ft;){var Ht=Kt(Yt,kt);if(gt+Ht<=ft)U+=Yt[kt],gt+=Kt(Yt,kt),kt--;else break}U=Et+U}else{for(var se="",ce="",gt=0,Me=0,Le=X-1;gt<ft;){var Ue=Kt(Yt,Me),Je=!1;Ue+gt<=ft&&(se+=Yt[Me],Me++,gt+=Ue,Je=!0);var xr=Kt(Yt,Le);if(xr+gt<=ft&&(ce=Yt[Le]+ce,gt+=xr,Le--,Je=!0),!Je)break}U=se+Et+ce}return U}var we="\u2026",Ye=2;function te(Yt){var ft=0;return(0,m.each)(Yt,function(F){var X=F.getBBox(),U=X.width;ft<U&&(ft=U)}),ft}function pe(Yt,ft){var F=ft.getCanvasBBox();return Yt?F.width:F.height}function Te(Yt,ft){return Yt.getBBox().width<ft}function ze(Yt,ft,F,X){X===void 0&&(X="tail");var U=ft.attr("text"),gt=pe(Yt,ft),kt=It(U),Ht=!1;if(F<gt){var se=Math.floor(F/gt*kt)-Ye,ce=void 0;se>=0?ce=ue(U,se,X):ce=we,ce&&(ft.attr("text",ce),Ht=!0)}return Ht?ft.set("tip",U):ft.set("tip",null),Ht}function ur(Yt,ft){var F=ft.x,X=ft.y,U=ft.content,gt=ft.style,kt=ft.id,Ht=ft.name,se=ft.rotate,ce=ft.maxLength,Me=ft.autoEllipsis,Le=ft.isVertical,Ue=ft.ellipsisPosition,Je=ft.background,xr=Yt.addGroup({id:kt+"-group",name:Ht+"-group",attrs:{x:F,y:X}}),Yr=xr.addShape({type:"text",id:kt,name:Ht,attrs:(0,y.__assign)({x:0,y:0,text:U},gt)}),kr=Qt((0,m.get)(Je,"padding",0));if(ce&&Me){var on=ce-(kr[1]+kr[3]);ze(!Le,Yr,on,Ue)}if(Je){var un=(0,m.get)(Je,"style",{}),sn=Yr.getCanvasBBox(),Bt=sn.minX,oe=sn.minY,be=sn.width,_e=sn.height,He=xr.addShape("rect",{id:kt+"-bg",name:kt+"-bg",attrs:(0,y.__assign)({x:Bt-kr[3],y:oe-kr[0],width:be+kr[1]+kr[3],height:_e+kr[0]+kr[2]},un)});He.toBack()}Rt(xr,F,X),Ot(xr,se,F,X)}var Ze={fontFamily:`
  "-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",
  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",
  SimSun, "sans-serif"`,textColor:"#2C3542",activeTextColor:"#333333",uncheckedColor:"#D8D8D8",lineColor:"#416180",regionColor:"#CCD7EB",verticalAxisRotate:-Math.PI/4,horizontalAxisRotate:Math.PI/4},pr=function(Yt){(0,y.__extends)(ft,Yt);function ft(){return Yt!==null&&Yt.apply(this,arguments)||this}return ft.prototype.getDefaultCfg=function(){var F=Yt.prototype.getDefaultCfg.call(this);return(0,y.__assign)((0,y.__assign)({},F),{name:"annotation",type:"line",locationType:"region",start:null,end:null,style:{},text:null,defaultCfg:{style:{fill:Ze.textColor,fontSize:12,textAlign:"center",textBaseline:"bottom",fontFamily:Ze.fontFamily},text:{position:"center",autoRotate:!0,content:null,offsetX:0,offsetY:0,style:{stroke:Ze.lineColor,lineWidth:1}}}})},ft.prototype.renderInner=function(F){this.renderLine(F),this.get("text")&&this.renderLabel(F)},ft.prototype.renderLine=function(F){var X=this.get("start"),U=this.get("end"),gt=this.get("style");this.addShape(F,{type:"line",id:this.getElementId("line"),name:"annotation-line",attrs:(0,y.__assign)({x1:X.x,y1:X.y,x2:U.x,y2:U.y},gt)})},ft.prototype.getLabelPoint=function(F,X,U){var gt;return U==="start"?gt=0:U==="center"?gt=.5:(0,m.isString)(U)&&U.indexOf("%")!==-1?gt=parseInt(U,10)/100:(0,m.isNumber)(U)?gt=U:gt=1,(gt>1||gt<0)&&(gt=1),{x:lt(F.x,X.x,gt),y:lt(F.y,X.y,gt)}},ft.prototype.renderLabel=function(F){var X=this.get("text"),U=this.get("start"),gt=this.get("end"),kt=X.position,Ht=X.content,se=X.style,ce=X.offsetX,Me=X.offsetY,Le=X.autoRotate,Ue=X.maxLength,Je=X.autoEllipsis,xr=X.ellipsisPosition,Yr=X.background,kr=X.isVertical,on=kr===void 0?!1:kr,un=this.getLabelPoint(U,gt,kt),sn=un.x+ce,Bt=un.y+Me,oe={id:this.getElementId("line-text"),name:"annotation-line-text",x:sn,y:Bt,content:Ht,style:se,maxLength:Ue,autoEllipsis:Je,ellipsisPosition:xr,background:Yr,isVertical:on};if(Le){var be=[gt.x-U.x,gt.y-U.y];oe.rotate=Math.atan2(be[1],be[0])}ur(F,oe)},ft}(q),Pr=pr,Or=function(Yt){(0,y.__extends)(ft,Yt);function ft(){return Yt!==null&&Yt.apply(this,arguments)||this}return ft.prototype.getDefaultCfg=function(){var F=Yt.prototype.getDefaultCfg.call(this);return(0,y.__assign)((0,y.__assign)({},F),{name:"annotation",type:"text",locationType:"point",x:0,y:0,content:"",rotate:null,style:{},background:null,maxLength:null,autoEllipsis:!0,isVertical:!1,ellipsisPosition:"tail",defaultCfg:{style:{fill:Ze.textColor,fontSize:12,textAlign:"center",textBaseline:"middle",fontFamily:Ze.fontFamily}}})},ft.prototype.setLocation=function(F){this.set("x",F.x),this.set("y",F.y),this.resetLocation()},ft.prototype.renderInner=function(F){var X=this.getLocation(),U=X.x,gt=X.y,kt=this.get("content"),Ht=this.get("style"),se=this.getElementId("text"),ce=this.get("name")+"-text",Me=this.get("maxLength"),Le=this.get("autoEllipsis"),Ue=this.get("isVertical"),Je=this.get("ellipsisPosition"),xr=this.get("background"),Yr=this.get("rotate"),kr={id:se,name:ce,x:U,y:gt,content:kt,style:Ht,maxLength:Me,autoEllipsis:Le,isVertical:Ue,ellipsisPosition:Je,background:xr,rotate:Yr};ur(F,kr)},ft.prototype.resetLocation=function(){var F=this.getElementByLocalId("text-group");if(F){var X=this.getLocation(),U=X.x,gt=X.y,kt=this.get("rotate");Rt(F,U,gt),Ot(F,kt,U,gt)}},ft}(q),nn=Or,kn=function(Yt){(0,y.__extends)(ft,Yt);function ft(){return Yt!==null&&Yt.apply(this,arguments)||this}return ft.prototype.getDefaultCfg=function(){var F=Yt.prototype.getDefaultCfg.call(this);return(0,y.__assign)((0,y.__assign)({},F),{name:"annotation",type:"arc",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2,style:{stroke:"#999",lineWidth:1}})},ft.prototype.renderInner=function(F){this.renderArc(F)},ft.prototype.getArcPath=function(){var F=this.getLocation(),X=F.center,U=F.radius,gt=F.startAngle,kt=F.endAngle,Ht=z(X,U,gt),se=z(X,U,kt),ce=kt-gt>Math.PI?1:0,Me=[["M",Ht.x,Ht.y]];if(kt-gt==Math.PI*2){var Le=z(X,U,gt+Math.PI);Me.push(["A",U,U,0,ce,1,Le.x,Le.y]),Me.push(["A",U,U,0,ce,1,se.x,se.y])}else Me.push(["A",U,U,0,ce,1,se.x,se.y]);return Me},ft.prototype.renderArc=function(F){var X=this.getArcPath(),U=this.get("style");this.addShape(F,{type:"path",id:this.getElementId("arc"),name:"annotation-arc",attrs:(0,y.__assign)({path:X},U)})},ft}(q),ii=kn,gi=function(Yt){(0,y.__extends)(ft,Yt);function ft(){return Yt!==null&&Yt.apply(this,arguments)||this}return ft.prototype.getDefaultCfg=function(){var F=Yt.prototype.getDefaultCfg.call(this);return(0,y.__assign)((0,y.__assign)({},F),{name:"annotation",type:"region",locationType:"region",start:null,end:null,style:{},defaultCfg:{style:{lineWidth:0,fill:Ze.regionColor,opacity:.4}}})},ft.prototype.renderInner=function(F){this.renderRegion(F)},ft.prototype.renderRegion=function(F){var X=this.get("start"),U=this.get("end"),gt=this.get("style"),kt=nt({start:X,end:U});this.addShape(F,{type:"rect",id:this.getElementId("region"),name:"annotation-region",attrs:(0,y.__assign)({x:kt.x,y:kt.y,width:kt.width,height:kt.height},gt)})},ft}(q),Si=gi,Zt=function(Yt){(0,y.__extends)(ft,Yt);function ft(){return Yt!==null&&Yt.apply(this,arguments)||this}return ft.prototype.getDefaultCfg=function(){var F=Yt.prototype.getDefaultCfg.call(this);return(0,y.__assign)((0,y.__assign)({},F),{name:"annotation",type:"image",locationType:"region",start:null,end:null,src:null,style:{}})},ft.prototype.renderInner=function(F){this.renderImage(F)},ft.prototype.getImageAttrs=function(){var F=this.get("start"),X=this.get("end"),U=this.get("style"),gt=nt({start:F,end:X}),kt=this.get("src");return(0,y.__assign)({x:gt.x,y:gt.y,img:kt,width:gt.width,height:gt.height},U)},ft.prototype.renderImage=function(F){this.addShape(F,{type:"image",id:this.getElementId("image"),name:"annotation-image",attrs:this.getImageAttrs()})},ft}(q),ne=Zt,ve=function(Yt){(0,y.__extends)(ft,Yt);function ft(){return Yt!==null&&Yt.apply(this,arguments)||this}return ft.prototype.getDefaultCfg=function(){var F=Yt.prototype.getDefaultCfg.call(this);return(0,y.__assign)((0,y.__assign)({},F),{name:"annotation",type:"dataMarker",locationType:"point",x:0,y:0,point:{},line:{},text:{},direction:"upward",autoAdjust:!0,coordinateBBox:null,defaultCfg:{point:{display:!0,style:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2}},line:{display:!0,length:20,style:{stroke:Ze.lineColor,lineWidth:1}},text:{content:"",display:!0,style:{fill:Ze.textColor,opacity:.65,fontSize:12,textAlign:"start",fontFamily:Ze.fontFamily}}}})},ft.prototype.renderInner=function(F){(0,m.get)(this.get("line"),"display")&&this.renderLine(F),(0,m.get)(this.get("text"),"display")&&this.renderText(F),(0,m.get)(this.get("point"),"display")&&this.renderPoint(F),this.get("autoAdjust")&&this.autoAdjust(F)},ft.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x")+this.get("offsetX"),y:this.get("y")+this.get("offsetY")})},ft.prototype.renderPoint=function(F){var X=this.getShapeAttrs().point;this.addShape(F,{type:"circle",id:this.getElementId("point"),name:"annotation-point",attrs:X})},ft.prototype.renderLine=function(F){var X=this.getShapeAttrs().line;this.addShape(F,{type:"path",id:this.getElementId("line"),name:"annotation-line",attrs:X})},ft.prototype.renderText=function(F){var X=this.getShapeAttrs().text,U=X.x,gt=X.y,kt=X.text,Ht=(0,y.__rest)(X,["x","y","text"]),se=this.get("text"),ce=se.background,Me=se.maxLength,Le=se.autoEllipsis,Ue=se.isVertival,Je=se.ellipsisPosition,xr={x:U,y:gt,id:this.getElementId("text"),name:"annotation-text",content:kt,style:Ht,background:ce,maxLength:Me,autoEllipsis:Le,isVertival:Ue,ellipsisPosition:Je};ur(F,xr)},ft.prototype.autoAdjust=function(F){var X=this.get("direction"),U=this.get("x"),gt=this.get("y"),kt=(0,m.get)(this.get("line"),"length",0),Ht=this.get("coordinateBBox"),se=F.getBBox(),ce=se.minX,Me=se.maxX,Le=se.minY,Ue=se.maxY,Je=F.findById(this.getElementId("text-group")),xr=F.findById(this.getElementId("text")),Yr=F.findById(this.getElementId("line"));if(!!Ht){if(Je){if(U+ce<=Ht.minX){var kr=Ht.minX-(U+ce);Rt(Je,Je.attr("x")+kr,Je.attr("y"))}if(U+Me>=Ht.maxX){var kr=U+Me-Ht.maxX;Rt(Je,Je.attr("x")-kr,Je.attr("y"))}}if(X==="upward"&&gt+Le<=Ht.minY||X!=="upward"&&gt+Ue>=Ht.maxY){var on=void 0,un=void 0;X==="upward"&&gt+Le<=Ht.minY?(on="top",un=1):(on="bottom",un=-1),xr.attr("textBaseline",on),Yr&&Yr.attr("path",[["M",0,0],["L",0,kt*un]]),Rt(Je,Je.attr("x"),(kt+2)*un)}}},ft.prototype.getShapeAttrs=function(){var F=(0,m.get)(this.get("line"),"display"),X=(0,m.get)(this.get("point"),"style",{}),U=(0,m.get)(this.get("line"),"style",{}),gt=(0,m.get)(this.get("text"),"style",{}),kt=this.get("direction"),Ht=F?(0,m.get)(this.get("line"),"length",0):0,se=kt==="upward"?-1:1;return{point:(0,y.__assign)({x:0,y:0},X),line:(0,y.__assign)({path:[["M",0,0],["L",0,Ht*se]]},U),text:(0,y.__assign)({x:0,y:(Ht+2)*se,text:(0,m.get)(this.get("text"),"content",""),textBaseline:kt==="upward"?"bottom":"top"},gt)}},ft}(q),ge=ve,Ae=function(Yt){(0,y.__extends)(ft,Yt);function ft(){return Yt!==null&&Yt.apply(this,arguments)||this}return ft.prototype.getDefaultCfg=function(){var F=Yt.prototype.getDefaultCfg.call(this);return(0,y.__assign)((0,y.__assign)({},F),{name:"annotation",type:"dataRegion",locationType:"points",points:[],lineLength:0,region:{},text:{},defaultCfg:{region:{style:{lineWidth:0,fill:Ze.regionColor,opacity:.4}},text:{content:"",style:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:Ze.textColor,fontFamily:Ze.fontFamily}}}})},ft.prototype.renderInner=function(F){var X=(0,m.get)(this.get("region"),"style",{}),U=(0,m.get)(this.get("text"),"style",{}),gt=this.get("lineLength")||0,kt=this.get("points");if(!!kt.length){var Ht=Q(kt),se=[];se.push(["M",kt[0].x,Ht.minY-gt]),kt.forEach(function(Me){se.push(["L",Me.x,Me.y])}),se.push(["L",kt[kt.length-1].x,kt[kt.length-1].y-gt]),this.addShape(F,{type:"path",id:this.getElementId("region"),name:"annotation-region",attrs:(0,y.__assign)({path:se},X)});var ce=(0,y.__assign)({id:this.getElementId("text"),name:"annotation-text",x:(Ht.minX+Ht.maxX)/2,y:Ht.minY-gt},this.get("text"));ur(F,ce)}},ft}(q),Pe=Ae,Ie=function(Yt){(0,y.__extends)(ft,Yt);function ft(){return Yt!==null&&Yt.apply(this,arguments)||this}return ft.prototype.getDefaultCfg=function(){var F=Yt.prototype.getDefaultCfg.call(this);return(0,y.__assign)((0,y.__assign)({},F),{name:"annotation",type:"regionFilter",locationType:"region",start:null,end:null,color:null,shape:[]})},ft.prototype.renderInner=function(F){var X=this,U=this.get("start"),gt=this.get("end"),kt=this.addGroup(F,{id:this.getElementId("region-filter"),capture:!1});(0,m.each)(this.get("shapes"),function(se,ce){var Me=se.get("type"),Le=(0,m.clone)(se.attr());X.adjustShapeAttrs(Le),X.addShape(kt,{id:X.getElementId("shape-"+Me+"-"+ce),capture:!1,type:Me,attrs:Le})});var Ht=nt({start:U,end:gt});kt.setClip({type:"rect",attrs:{x:Ht.minX,y:Ht.minY,width:Ht.width,height:Ht.height}})},ft.prototype.adjustShapeAttrs=function(F){var X=this.get("color");F.fill&&(F.fill=F.fillStyle=X),F.stroke=F.strokeStyle=X},ft}(q),De=Ie;function Ce(Yt,ft,F){var X=ft+"Style",U=null;return(0,m.each)(F,function(gt,kt){Yt[kt]&&gt[X]&&(U||(U={}),(0,m.mix)(U,gt[X]))}),U}var er=function(Yt){(0,y.__extends)(ft,Yt);function ft(){return Yt!==null&&Yt.apply(this,arguments)||this}return ft.prototype.getDefaultCfg=function(){var F=Yt.prototype.getDefaultCfg.call(this);return(0,y.__assign)((0,y.__assign)({},F),{name:"axis",ticks:[],line:{},tickLine:{},subTickLine:null,title:null,label:{},verticalFactor:1,verticalLimitLength:null,overlapOrder:["autoRotate","autoEllipsis","autoHide"],tickStates:{},defaultCfg:{line:{style:{lineWidth:1,stroke:Ze.lineColor}},tickLine:{style:{lineWidth:1,stroke:Ze.lineColor},alignTick:!0,length:5,displayWithLabel:!0},subTickLine:{style:{lineWidth:1,stroke:Ze.lineColor},count:4,length:2},label:{autoRotate:!0,autoHide:!1,autoEllipsis:!1,style:{fontSize:12,fill:Ze.textColor,textBaseline:"middle",fontFamily:Ze.fontFamily,fontWeight:"normal"},offset:10},title:{autoRotate:!0,spacing:5,position:"center",style:{fontSize:12,fill:Ze.textColor,textBaseline:"middle",fontFamily:Ze.fontFamily,textAlign:"center"}},tickStates:{active:{labelStyle:{fontWeight:500},tickLineStyle:{lineWidth:2}},inactive:{labelStyle:{fill:Ze.uncheckedColor}}}}})},ft.prototype.renderInner=function(F){this.get("line")&&this.drawLine(F),this.drawTicks(F),this.get("title")&&this.drawTitle(F)},ft.prototype.isList=function(){return!0},ft.prototype.getItems=function(){return this.get("ticks")},ft.prototype.setItems=function(F){this.update({ticks:F})},ft.prototype.updateItem=function(F,X){(0,m.mix)(F,X),this.clear(),this.render()},ft.prototype.clearItems=function(){var F=this.getElementByLocalId("label-group");F&&F.clear()},ft.prototype.setItemState=function(F,X,U){F[X]=U,this.updateTickStates(F)},ft.prototype.hasState=function(F,X){return!!F[X]},ft.prototype.getItemStates=function(F){var X=this.get("tickStates"),U=[];return(0,m.each)(X,function(gt,kt){F[kt]&&U.push(kt)}),U},ft.prototype.clearItemsState=function(F){var X=this,U=this.getItemsByState(F);(0,m.each)(U,function(gt){X.setItemState(gt,F,!1)})},ft.prototype.getItemsByState=function(F){var X=this,U=this.getItems();return(0,m.filter)(U,function(gt){return X.hasState(gt,F)})},ft.prototype.getSidePoint=function(F,X){var U=this,gt=U.getSideVector(X,F);return{x:F.x+gt[0],y:F.y+gt[1]}},ft.prototype.getTextAnchor=function(F){var X;return(0,m.isNumberEqual)(F[0],0)?X="center":F[0]>0?X="start":F[0]<0&&(X="end"),X},ft.prototype.processOverlap=function(F){},ft.prototype.drawLine=function(F){var X=this.getLinePath(),U=this.get("line");this.addShape(F,{type:"path",id:this.getElementId("line"),name:"axis-line",attrs:(0,m.mix)({path:X},U.style)})},ft.prototype.getTickLineItems=function(F){var X=this,U=[],gt=this.get("tickLine"),kt=gt.alignTick,Ht=gt.length,se=1,ce=F.length;return ce>=2&&(se=F[1].value-F[0].value),(0,m.each)(F,function(Me){var Le=Me.point;kt||(Le=X.getTickPoint(Me.value-se/2));var Ue=X.getSidePoint(Le,Ht);U.push({startPoint:Le,tickValue:Me.value,endPoint:Ue,tickId:Me.id,id:"tickline-"+Me.id})}),U},ft.prototype.getSubTickLineItems=function(F){var X=[],U=this.get("subTickLine"),gt=U.count,kt=F.length;if(kt>=2)for(var Ht=0;Ht<kt-1;Ht++)for(var se=F[Ht],ce=F[Ht+1],Me=0;Me<gt;Me++){var Le=(Me+1)/(gt+1),Ue=(1-Le)*se.tickValue+Le*ce.tickValue,Je=this.getTickPoint(Ue),xr=this.getSidePoint(Je,U.length);X.push({startPoint:Je,endPoint:xr,tickValue:Ue,id:"sub-"+se.id+"-"+Me})}return X},ft.prototype.getTickLineAttrs=function(F,X){var U=this.get(X).style,gt=F.startPoint,kt=F.endPoint,Ht=(0,m.mix)({x1:gt.x,y1:gt.y,x2:kt.x,y2:kt.y},U);return Ht},ft.prototype.drawTick=function(F,X,U){this.addShape(X,{type:"line",id:this.getElementId(F.id),name:"axis-"+U,attrs:this.getTickLineAttrs(F,U)})},ft.prototype.drawTickLines=function(F){var X=this,U=this.get("ticks"),gt=this.get("subTickLine"),kt=this.getTickLineItems(U),Ht=this.addGroup(F,{name:"axis-tickline-group",id:this.getElementId("tickline-group")}),se=this.get("tickLine");if((0,m.each)(kt,function(Me){if(se.displayWithLabel){var Le=X.getElementId("label-"+Me.tickId);F.findById(Le)&&X.drawTick(Me,Ht,"tickLine")}else X.drawTick(Me,Ht,"tickLine")}),gt){var ce=this.getSubTickLineItems(kt);(0,m.each)(ce,function(Me){X.drawTick(Me,Ht,"subTickLine")})}},ft.prototype.processTicks=function(){var F=this,X=this.get("ticks");(0,m.each)(X,function(U){U.point=F.getTickPoint(U.value),(0,m.isNil)(U.id)&&(U.id=U.name)})},ft.prototype.drawTicks=function(F){var X=this;this.processTicks(),this.get("label")&&this.drawLabels(F),this.get("tickLine")&&this.drawTickLines(F);var U=this.get("ticks");(0,m.each)(U,function(gt){X.applyTickStates(gt,F)})},ft.prototype.getLabelAttrs=function(F,X){var U=this.get("label"),gt=U.offset,kt=U.style,Ht=U.rotate,se=U.formatter,ce=this.getSidePoint(F.point,gt),Me=this.getSideVector(gt,ce),Le=se?se(F.name,F,X):F.name,Ue=(0,m.mix)({x:ce.x,y:ce.y,text:Le,textAlign:this.getTextAnchor(Me)},kt);return Ht&&(Ue.matrix=K(ce,Ht)),Ue},ft.prototype.drawLabels=function(F){var X=this,U=this.get("ticks"),gt=this.addGroup(F,{name:"axis-label-group",id:this.getElementId("label-group")});(0,m.each)(U,function(kt,Ht){X.addShape(gt,{type:"text",name:"axis-label",id:X.getElementId("label-"+kt.id),attrs:X.getLabelAttrs(kt,Ht),delegateObject:{tick:kt,item:kt,index:Ht}})}),this.processOverlap(gt)},ft.prototype.getTitleAttrs=function(){var F=this.get("title"),X=F.style,U=F.position,gt=F.offset,kt=F.spacing,Ht=kt===void 0?0:kt,se=F.autoRotate,ce=X.fontSize,Me=.5;U==="start"?Me=0:U==="end"&&(Me=1);var Le=this.getTickPoint(Me),Ue=this.getSidePoint(Le,gt||Ht+ce/2),Je=(0,m.mix)({x:Ue.x,y:Ue.y,text:F.text},X),xr=F.rotate,Yr=xr;if((0,m.isNil)(xr)&&se){var kr=this.getAxisVector(Le),on=[1,0];Yr=B.angleTo(kr,on,!0)}if(Yr){var un=K(Ue,Yr);Je.matrix=un}return Je},ft.prototype.drawTitle=function(F){this.addShape(F,{type:"text",id:this.getElementId("title"),name:"axis-title",attrs:this.getTitleAttrs()})},ft.prototype.applyTickStates=function(F,X){var U=this.getItemStates(F);if(U.length){var gt=this.get("tickStates"),kt=this.getElementId("label-"+F.id),Ht=X.findById(kt);if(Ht){var se=Ce(F,"label",gt);se&&Ht.attr(se)}var ce=this.getElementId("tickline-"+F.id),Me=X.findById(ce);if(Me){var Le=Ce(F,"tickLine",gt);Le&&Me.attr(Le)}}},ft.prototype.updateTickStates=function(F){var X=this.getItemStates(F),U=this.get("tickStates"),gt=this.get("label"),kt=this.getElementByLocalId("label-"+F.id),Ht=this.get("tickLine"),se=this.getElementByLocalId("tickline-"+F.id);if(X.length){if(kt){var ce=Ce(F,"label",U);ce&&kt.attr(ce)}if(se){var Me=Ce(F,"tickLine",U);Me&&se.attr(Me)}}else kt&&kt.attr(gt.style),se&&se.attr(Ht.style)},ft}(q),je=er;function fr(Yt,ft,F,X){var U=ft.getChildren(),gt=!1;return(0,m.each)(U,function(kt){var Ht=ze(Yt,kt,F,X);gt=gt||Ht}),gt}function Sr(){return gr}function hr(Yt,ft,F){return fr(Yt,ft,F,"head")}function gr(Yt,ft,F){return fr(Yt,ft,F,"tail")}function vr(Yt,ft,F){return fr(Yt,ft,F,"middle")}function Cr(Yt){var ft=Yt.attr("matrix");return ft&&ft[0]!==1}function or(Yt,ft,F,X,U){U===void 0&&(U=!1);var gt=!1;if(Yt)gt=Math.abs(F.y-X.y)<F.height;else if(ft){var kt=U?X.height:F.height;gt=Math.abs(F.x-X.x)<kt}else{var Ht=U?X.width:F.width;gt=Math.abs(F.x-X.x)<Ht}return gt}function Ir(Yt,ft,F){var X=ft.getChildren().slice();if(!X.length)return!1;var U=!1;F&&X.reverse();for(var gt=X.length,kt=X[0],Ht=Cr(kt),se=kt.getBBox(),ce=1;ce<gt;ce++){var Me=X[ce],Le=Me.getBBox(),Ue=or(Yt,Ht,se,Le,F);Ue?(Me.hide(),U=!0):se=Le}return U}function Wr(){return Zr}function Nr(Yt,ft){return Ir(Yt,ft,!1)}function jr(Yt,ft){return Ir(Yt,ft,!0)}function Qr(Yt,ft){var F=ft.getChildren().slice();if(F.length<=2)return!1;for(var X=!1,U=F.length,gt=F[0],kt=F[U-1],Ht=Cr(gt),se=gt.getBBox(),ce=gt,Me=1;Me<U-1;Me++){var Le=F[Me],Ue=Le.getBBox(),Je=or(Yt,Ht,se,Ue);Je?(Le.hide(),X=!0):(se=Ue,ce=Le)}var xr=kt.getBBox(),Yr=or(Yt,Ht,se,xr);return Yr&&(ce.hide(),X=!0),X}function Zr(Yt,ft){var F=ft.getChildren().slice();if(F.length<2)return!1;var X=!1,U=F[0],gt=U.getBBox(),kt=F[1],Ht=Cr(U),se=F.length,ce=0;if(Yt){var Me=Math.abs(kt.attr("y")-U.attr("y"));ce=gt.height/Me}else if(Ht){var Me=Math.abs(kt.attr("x")-U.attr("x"));ce=gt.width/Me}else{var Le=te(F),Me=Math.abs(kt.attr("x")-U.attr("x"));ce=Le/Me}if(ce>1){ce=Math.ceil(ce);for(var Ue=0;Ue<se;Ue++)Ue%ce!=0&&(F[Ue].hide(),X=!0)}return X}function Bn(Yt,ft){(0,m.each)(Yt,function(F){var X=F.attr("x"),U=F.attr("y"),gt=K({x:X,y:U},ft);F.attr("matrix",gt)})}function hn(Yt,ft,F,X){var U=ft.getChildren();if(!U.length||!Yt&&U.length<2)return!1;var gt=te(U),kt=!1;if(Yt)kt=!!F&&gt>F;else{var Ht=Math.abs(U[1].attr("x")-U[0].attr("x"));kt=gt>Ht}if(kt){var se=X(F,gt);Bn(U,se)}return kt}function Hn(){return yi}function yi(Yt,ft,F){return hn(Yt,ft,F,function(){return Yt?Ze.verticalAxisRotate:Ze.horizontalAxisRotate})}function Jn(Yt,ft,F){return hn(Yt,ft,F,function(X,U){if(!X)return Yt?Ze.verticalAxisRotate:Ze.horizontalAxisRotate;if(Yt)return-Math.acos(X/U);var gt=0;return X>U?gt=Math.PI/4:(gt=Math.asin(X/U),gt>Math.PI/4&&(gt=Math.PI/4)),gt})}var Ci=function(Yt){(0,y.__extends)(ft,Yt);function ft(){return Yt!==null&&Yt.apply(this,arguments)||this}return ft.prototype.getDefaultCfg=function(){var F=Yt.prototype.getDefaultCfg.call(this);return(0,y.__assign)((0,y.__assign)({},F),{type:"line",locationType:"region",start:null,end:null})},ft.prototype.getLinePath=function(){var F=this.get("start"),X=this.get("end"),U=[];return U.push(["M",F.x,F.y]),U.push(["L",X.x,X.y]),U},ft.prototype.getInnerLayoutBBox=function(){var F=this.get("start"),X=this.get("end"),U=Yt.prototype.getInnerLayoutBBox.call(this),gt=Math.min(F.x,X.x,U.x),kt=Math.min(F.y,X.y,U.y),Ht=Math.max(F.x,X.x,U.maxX),se=Math.max(F.y,X.y,U.maxY);return{x:gt,y:kt,minX:gt,minY:kt,maxX:Ht,maxY:se,width:Ht-gt,height:se-kt}},ft.prototype.isVertical=function(){var F=this.get("start"),X=this.get("end");return(0,m.isNumberEqual)(F.x,X.x)},ft.prototype.isHorizontal=function(){var F=this.get("start"),X=this.get("end");return(0,m.isNumberEqual)(F.y,X.y)},ft.prototype.getTickPoint=function(F){var X=this,U=X.get("start"),gt=X.get("end"),kt=gt.x-U.x,Ht=gt.y-U.y;return{x:U.x+kt*F,y:U.y+Ht*F}},ft.prototype.getSideVector=function(F){var X=this.getAxisVector(),U=D.normalize([0,0],X),gt=this.get("verticalFactor"),kt=[U[1],U[0]*-1];return D.scale([0,0],kt,F*gt)},ft.prototype.getAxisVector=function(){var F=this.get("start"),X=this.get("end");return[X.x-F.x,X.y-F.y]},ft.prototype.processOverlap=function(F){var X=this,U=this.isVertical(),gt=this.isHorizontal();if(!(!U&&!gt)){var kt=this.get("label"),Ht=this.get("title"),se=this.get("verticalLimitLength"),ce=kt.offset,Me=se,Le=0,Ue=0;Ht&&(Le=Ht.style.fontSize,Ue=Ht.spacing),Me&&(Me=Me-ce-Ue-Le);var Je=this.get("overlapOrder");if((0,m.each)(Je,function(kr){kt[kr]&&X.autoProcessOverlap(kr,kt[kr],F,Me)}),Ht){var xr=F.getBBox(),Yr=U?xr.width:xr.height;(0,m.isNil)(Ht.offset)&&(Ht.offset=ce+Yr+Ue+Le/2)}}},ft.prototype.autoProcessOverlap=function(F,X,U,gt){var kt=this,Ht=this.isVertical(),se=!1,ce=L[F];if(X===!0?se=ce.getDefault()(Ht,U,gt):(0,m.isFunction)(X)?se=X(Ht,U,gt):ce[X]&&(se=ce[X](Ht,U,gt)),F==="autoRotate"){if(se){var Me=U.getChildren(),Le=this.get("verticalFactor");(0,m.each)(Me,function(Je){var xr=Je.attr("textAlign");if(xr==="center"){var Yr=Le>0?"end":"start";Je.attr("textAlign",Yr)}})}}else if(F==="autoHide"){var Ue=U.getChildren().slice(0);(0,m.each)(Ue,function(Je){Je.get("visible")||(kt.get("isRegister")&&kt.unregisterElement(Je),Je.remove())})}},ft}(je),Mi=Ci,Fr=function(Yt){(0,y.__extends)(ft,Yt);function ft(){return Yt!==null&&Yt.apply(this,arguments)||this}return ft.prototype.getDefaultCfg=function(){var F=Yt.prototype.getDefaultCfg.call(this);return(0,y.__assign)((0,y.__assign)({},F),{type:"circle",locationType:"circle",center:null,radius:null,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},ft.prototype.getLinePath=function(){var F=this.get("center"),X=F.x,U=F.y,gt=this.get("radius"),kt=gt,Ht=this.get("startAngle"),se=this.get("endAngle"),ce=[];if(Math.abs(se-Ht)===Math.PI*2)ce=[["M",X,U-kt],["A",gt,kt,0,1,1,X,U+kt],["A",gt,kt,0,1,1,X,U-kt],["Z"]];else{var Me=this.getCirclePoint(Ht),Le=this.getCirclePoint(se),Ue=Math.abs(se-Ht)>Math.PI?1:0,Je=Ht>se?0:1;ce=[["M",X,U],["L",Me.x,Me.y],["A",gt,kt,0,Ue,Je,Le.x,Le.y],["L",X,U]]}return ce},ft.prototype.getTickPoint=function(F){var X=this.get("startAngle"),U=this.get("endAngle"),gt=X+(U-X)*F;return this.getCirclePoint(gt)},ft.prototype.getSideVector=function(F,X){var U=this.get("center"),gt=[X.x-U.x,X.y-U.y],kt=this.get("verticalFactor"),Ht=D.length(gt);return D.scale(gt,gt,kt*F/Ht),gt},ft.prototype.getAxisVector=function(F){var X=this.get("center"),U=[F.x-X.x,F.y-X.y];return[U[1],-1*U[0]]},ft.prototype.getCirclePoint=function(F,X){var U=this.get("center");return X=X||this.get("radius"),{x:U.x+Math.cos(F)*X,y:U.y+Math.sin(F)*X}},ft}(je),oi=Fr,Oi=function(Yt){(0,y.__extends)(ft,Yt);function ft(){return Yt!==null&&Yt.apply(this,arguments)||this}return ft.prototype.getDefaultCfg=function(){var F=Yt.prototype.getDefaultCfg.call(this);return(0,y.__assign)((0,y.__assign)({},F),{name:"crosshair",type:"base",line:{},text:null,textBackground:{},capture:!1,defaultCfg:{line:{style:{lineWidth:1,stroke:Ze.lineColor}},text:{position:"start",offset:10,autoRotate:!1,content:null,style:{fill:Ze.textColor,textAlign:"center",textBaseline:"middle",fontFamily:Ze.fontFamily}},textBackground:{padding:5,style:{stroke:Ze.lineColor}}}})},ft.prototype.renderInner=function(F){this.get("line")&&this.renderLine(F),this.get("text")&&(this.renderText(F),this.renderBackground(F))},ft.prototype.renderText=function(F){var X=this.get("text"),U=X.style,gt=X.autoRotate,kt=X.content;if(!(0,m.isNil)(kt)){var Ht=this.getTextPoint(),se=null;if(gt){var ce=this.getRotateAngle();se=K(Ht,ce)}this.addShape(F,{type:"text",name:"crosshair-text",id:this.getElementId("text"),attrs:(0,y.__assign)((0,y.__assign)((0,y.__assign)({},Ht),{text:kt,matrix:se}),U)})}},ft.prototype.renderLine=function(F){var X=this.getLinePath(),U=this.get("line"),gt=U.style;this.addShape(F,{type:"path",name:"crosshair-line",id:this.getElementId("line"),attrs:(0,y.__assign)({path:X},gt)})},ft.prototype.renderBackground=function(F){var X=this.getElementId("text"),U=F.findById(X),gt=this.get("textBackground");if(gt&&U){var kt=U.getBBox(),Ht=Qt(gt.padding),se=gt.style,ce=this.addShape(F,{type:"rect",name:"crosshair-text-background",id:this.getElementId("text-background"),attrs:(0,y.__assign)({x:kt.x-Ht[3],y:kt.y-Ht[0],width:kt.width+Ht[1]+Ht[3],height:kt.height+Ht[0]+Ht[2],matrix:U.attr("matrix")},se)});ce.toBack()}},ft}(q),ci=Oi,Mn=function(Yt){(0,y.__extends)(ft,Yt);function ft(){return Yt!==null&&Yt.apply(this,arguments)||this}return ft.prototype.getDefaultCfg=function(){var F=Yt.prototype.getDefaultCfg.call(this);return(0,y.__assign)((0,y.__assign)({},F),{type:"line",locationType:"region",start:null,end:null})},ft.prototype.getRotateAngle=function(){var F=this.getLocation(),X=F.start,U=F.end,gt=this.get("text").position,kt=Math.atan2(U.y-X.y,U.x-X.x),Ht=gt==="start"?kt-Math.PI/2:kt+Math.PI/2;return Ht},ft.prototype.getTextPoint=function(){var F=this.getLocation(),X=F.start,U=F.end,gt=this.get("text"),kt=gt.position,Ht=gt.offset;return re(X,U,kt,Ht)},ft.prototype.getLinePath=function(){var F=this.getLocation(),X=F.start,U=F.end;return[["M",X.x,X.y],["L",U.x,U.y]]},ft}(ci),vi=Mn,Xi=function(Yt){(0,y.__extends)(ft,Yt);function ft(){return Yt!==null&&Yt.apply(this,arguments)||this}return ft.prototype.getDefaultCfg=function(){var F=Yt.prototype.getDefaultCfg.call(this);return(0,y.__assign)((0,y.__assign)({},F),{type:"circle",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},ft.prototype.getRotateAngle=function(){var F=this.getLocation(),X=F.startAngle,U=F.endAngle,gt=this.get("text").position,kt=gt==="start"?X+Math.PI/2:U-Math.PI/2;return kt},ft.prototype.getTextPoint=function(){var F=this.get("text"),X=F.position,U=F.offset,gt=this.getLocation(),kt=gt.center,Ht=gt.radius,se=gt.startAngle,ce=gt.endAngle,Me=X==="start"?se:ce,Le=this.getRotateAngle()-Math.PI,Ue=z(kt,Ht,Me),Je=Math.cos(Le)*U,xr=Math.sin(Le)*U;return{x:Ue.x+Je,y:Ue.y+xr}},ft.prototype.getLinePath=function(){var F=this.getLocation(),X=F.center,U=F.radius,gt=F.startAngle,kt=F.endAngle,Ht=null;if(kt-gt==Math.PI*2){var se=X.x,ce=X.y;Ht=[["M",se,ce-U],["A",U,U,0,1,1,se,ce+U],["A",U,U,0,1,1,se,ce-U],["Z"]]}else{var Me=z(X,U,gt),Le=z(X,U,kt),Ue=Math.abs(kt-gt)>Math.PI?1:0,Je=gt>kt?0:1;Ht=[["M",Me.x,Me.y],["A",U,U,0,Ue,Je,Le.x,Le.y]]}return Ht},ft}(ci),Ii=Xi,si=p(6056),Zn=p(45442),Vi=function(Yt){(0,y.__extends)(ft,Yt);function ft(){return Yt!==null&&Yt.apply(this,arguments)||this}return ft.prototype.getDefaultCfg=function(){var F=Yt.prototype.getDefaultCfg.call(this);return(0,y.__assign)((0,y.__assign)({},F),{container:null,containerTpl:"<div></div>",updateAutoRender:!0,containerClassName:"",parent:null})},ft.prototype.getContainer=function(){return this.get("container")},ft.prototype.show=function(){var F=this.get("container");F.style.display="",this.set("visible",!0)},ft.prototype.hide=function(){var F=this.get("container");F.style.display="none",this.set("visible",!1)},ft.prototype.setCapture=function(F){var X=this.getContainer(),U=F?"auto":"none";X.style.pointerEvents=U,this.set("capture",F)},ft.prototype.getBBox=function(){var F=this.getContainer(),X=parseFloat(F.style.left)||0,U=parseFloat(F.style.top)||0;return dt(X,U,F.clientWidth,F.clientHeight)},ft.prototype.clear=function(){var F=this.get("container");Gt(F)},ft.prototype.destroy=function(){this.removeEvent(),this.removeDom(),Yt.prototype.destroy.call(this)},ft.prototype.init=function(){Yt.prototype.init.call(this),this.initContainer(),this.initDom(),this.resetStyles(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible()},ft.prototype.initCapture=function(){this.setCapture(this.get("capture"))},ft.prototype.initVisible=function(){this.get("visible")?this.show():this.hide()},ft.prototype.initDom=function(){},ft.prototype.initContainer=function(){var F=this.get("container");if((0,m.isNil)(F)){F=this.createDom();var X=this.get("parent");(0,m.isString)(X)&&(X=document.getElementById(X),this.set("parent",X)),X.appendChild(F),this.set("container",F)}else(0,m.isString)(F)&&(F=document.getElementById(F),this.set("container",F));this.get("parent")||this.set("parent",F.parentNode)},ft.prototype.resetStyles=function(){var F=this.get("domStyles"),X=this.get("defaultStyles");F?F=(0,m.deepMix)({},X,F):F=X,this.set("domStyles",F)},ft.prototype.applyStyles=function(){var F=this.get("domStyles");if(!!F){var X=this.getContainer();this.applyChildrenStyles(X,F);var U=this.get("containerClassName");if(U&&Z(X,U)){var gt=F[U];(0,Zn.Z)(X,gt)}}},ft.prototype.applyChildrenStyles=function(F,X){(0,m.each)(X,function(U,gt){var kt=F.getElementsByClassName(gt);(0,m.each)(kt,function(Ht){(0,Zn.Z)(Ht,U)})})},ft.prototype.applyStyle=function(F,X){var U=this.get("domStyles");(0,Zn.Z)(X,U[F])},ft.prototype.createDom=function(){var F=this.get("containerTpl");return(0,si.Z)(F)},ft.prototype.initEvent=function(){},ft.prototype.removeDom=function(){var F=this.get("container");F&&F.parentNode.removeChild(F)},ft.prototype.removeEvent=function(){},ft.prototype.updateInner=function(F){(0,m.hasKey)(F,"domStyles")&&(this.resetStyles(),this.applyStyles()),this.resetPosition()},ft.prototype.resetPosition=function(){},ft}(bt),ua=Vi,Ft="g2-crosshair",At=Ft+"-line",ht=Ft+"-text",wt,Xt=(wt={},wt[""+Ft]={position:"relative"},wt[""+At]={position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.25)"},wt[""+ht]={position:"absolute",color:Ze.textColor,fontFamily:Ze.fontFamily},wt),it=function(Yt){(0,y.__extends)(ft,Yt);function ft(){return Yt!==null&&Yt.apply(this,arguments)||this}return ft.prototype.getDefaultCfg=function(){var F=Yt.prototype.getDefaultCfg.call(this);return(0,y.__assign)((0,y.__assign)({},F),{name:"crosshair",type:"html",locationType:"region",start:{x:0,y:0},end:{x:0,y:0},capture:!1,text:null,containerTpl:'<div class="'+Ft+'"></div>',crosshairTpl:'<div class="'+At+'"></div>',textTpl:'<span class="'+ht+'">{content}</span>',domStyles:null,containerClassName:Ft,defaultStyles:Xt,defaultCfg:{text:{position:"start",content:null,align:"center",offset:10}}})},ft.prototype.render=function(){this.resetText(),this.resetPosition()},ft.prototype.initCrossHair=function(){var F=this.getContainer(),X=this.get("crosshairTpl"),U=(0,si.Z)(X);F.appendChild(U),this.applyStyle(At,U),this.set("crosshairEl",U)},ft.prototype.getTextPoint=function(){var F=this.getLocation(),X=F.start,U=F.end,gt=this.get("text"),kt=gt.position,Ht=gt.offset;return re(X,U,kt,Ht)},ft.prototype.resetText=function(){var F=this.get("text"),X=this.get("textEl");if(F){var U=F.content;if(!X){var gt=this.getContainer(),kt=(0,m.substitute)(this.get("textTpl"),F);X=(0,si.Z)(kt),gt.appendChild(X),this.applyStyle(ht,X),this.set("textEl",X)}X.innerHTML=U}else X&&X.remove()},ft.prototype.isVertical=function(F,X){return F.x===X.x},ft.prototype.resetPosition=function(){var F=this.get("crosshairEl");F||(this.initCrossHair(),F=this.get("crosshairEl"));var X=this.get("start"),U=this.get("end"),gt=Math.min(X.x,U.x),kt=Math.min(X.y,U.y);this.isVertical(X,U)?(0,Zn.Z)(F,{width:"1px",height:Vt(Math.abs(U.y-X.y))}):(0,Zn.Z)(F,{height:"1px",width:Vt(Math.abs(U.x-X.x))}),(0,Zn.Z)(F,{top:Vt(kt),left:Vt(gt)}),this.alignText()},ft.prototype.alignText=function(){var F=this.get("textEl");if(F){var X=this.get("text").align,U=F.clientWidth,gt=this.getTextPoint();switch(X){case"center":gt.x=gt.x-U/2;break;case"right":gt.x=gt.x-U;case"left":break}(0,Zn.Z)(F,{top:Vt(gt.y),left:Vt(gt.x)})}},ft.prototype.updateInner=function(F){(0,m.hasKey)(F,"text")&&this.resetText(),Yt.prototype.updateInner.call(this,F)},ft}(ua),mt=it,St=function(Yt){(0,y.__extends)(ft,Yt);function ft(){return Yt!==null&&Yt.apply(this,arguments)||this}return ft.prototype.getDefaultCfg=function(){var F=Yt.prototype.getDefaultCfg.call(this);return(0,y.__assign)((0,y.__assign)({},F),{name:"grid",line:{},alternateColor:null,capture:!1,items:[],closed:!1,defaultCfg:{line:{type:"line",style:{lineWidth:1,stroke:Ze.lineColor}}}})},ft.prototype.getLineType=function(){var F=this.get("line")||this.get("defaultCfg").line;return F.type},ft.prototype.renderInner=function(F){this.drawGrid(F)},ft.prototype.getAlternatePath=function(F,X){var U=this.getGridPath(F),gt=X.slice(0).reverse(),kt=this.getGridPath(gt,!0),Ht=this.get("closed");return Ht?U=U.concat(kt):(kt[0][0]="L",U=U.concat(kt),U.push(["Z"])),U},ft.prototype.getPathStyle=function(){return this.get("line").style},ft.prototype.drawGrid=function(F){var X=this,U=this.get("line"),gt=this.get("items"),kt=this.get("alternateColor"),Ht=null;(0,m.each)(gt,function(se,ce){var Me=se.id||ce;if(U){var Le=X.getPathStyle(),Ue=X.getElementId("line-"+Me),Je=X.getGridPath(se.points);X.addShape(F,{type:"path",name:"grid-line",id:Ue,attrs:(0,m.mix)({path:Je},Le)})}if(kt&&ce>0){var xr=X.getElementId("region-"+Me),Yr=ce%2==0;if((0,m.isString)(kt))Yr&&X.drawAlternateRegion(xr,F,Ht.points,se.points,kt);else{var kr=Yr?kt[1]:kt[0];X.drawAlternateRegion(xr,F,Ht.points,se.points,kr)}}Ht=se})},ft.prototype.drawAlternateRegion=function(F,X,U,gt,kt){var Ht=this.getAlternatePath(U,gt);this.addShape(X,{type:"path",id:F,name:"grid-region",attrs:{path:Ht,fill:kt}})},ft}(q),Pt=St;function Wt(Yt,ft,F,X){var U=F-Yt,gt=X-ft;return Math.sqrt(U*U+gt*gt)}var Jt=function(Yt){(0,y.__extends)(ft,Yt);function ft(){return Yt!==null&&Yt.apply(this,arguments)||this}return ft.prototype.getDefaultCfg=function(){var F=Yt.prototype.getDefaultCfg.call(this);return(0,y.__assign)((0,y.__assign)({},F),{type:"circle",center:null,closed:!0})},ft.prototype.getGridPath=function(F,X){var U=this.getLineType(),gt=this.get("closed"),kt=[];if(F.length)if(U==="circle"){var Ht=this.get("center"),se=F[0],ce=Wt(Ht.x,Ht.y,se.x,se.y),Me=X?0:1;gt?(kt.push(["M",Ht.x,Ht.y-ce]),kt.push(["A",ce,ce,0,0,Me,Ht.x,Ht.y+ce]),kt.push(["A",ce,ce,0,0,Me,Ht.x,Ht.y-ce]),kt.push(["Z"])):(0,m.each)(F,function(Le,Ue){Ue===0?kt.push(["M",Le.x,Le.y]):kt.push(["A",ce,ce,0,0,Me,Le.x,Le.y])})}else(0,m.each)(F,function(Le,Ue){Ue===0?kt.push(["M",Le.x,Le.y]):kt.push(["L",Le.x,Le.y])}),gt&&kt.push(["Z"]);return kt},ft}(Pt),de=Jt,Ee=function(Yt){(0,y.__extends)(ft,Yt);function ft(){return Yt!==null&&Yt.apply(this,arguments)||this}return ft.prototype.getDefaultCfg=function(){var F=Yt.prototype.getDefaultCfg.call(this);return(0,y.__assign)((0,y.__assign)({},F),{type:"line"})},ft.prototype.getGridPath=function(F){var X=[];return(0,m.each)(F,function(U,gt){gt===0?X.push(["M",U.x,U.y]):X.push(["L",U.x,U.y])}),X},ft}(Pt),Fe=Ee,me=function(Yt){(0,y.__extends)(ft,Yt);function ft(){return Yt!==null&&Yt.apply(this,arguments)||this}return ft.prototype.getDefaultCfg=function(){var F=Yt.prototype.getDefaultCfg.call(this);return(0,y.__assign)((0,y.__assign)({},F),{name:"legend",layout:"horizontal",locationType:"point",x:0,y:0,offsetX:0,offsetY:0,title:null,background:null})},ft.prototype.getLayoutBBox=function(){var F=Yt.prototype.getLayoutBBox.call(this),X=this.get("x"),U=this.get("y"),gt=this.get("offsetX"),kt=this.get("offsetY"),Ht=this.get("maxWidth"),se=this.get("maxHeight"),ce=X+gt,Me=U+kt,Le=F.maxX-ce,Ue=F.maxY-Me;return Ht&&(Le=Math.min(Le,Ht)),se&&(Ue=Math.min(Ue,se)),dt(ce,Me,Le,Ue)},ft.prototype.setLocation=function(F){this.set("x",F.x),this.set("y",F.y),this.resetLocation()},ft.prototype.resetLocation=function(){var F=this.get("x"),X=this.get("y"),U=this.get("offsetX"),gt=this.get("offsetY");this.moveElementTo(this.get("group"),{x:F+U,y:X+gt})},ft.prototype.applyOffset=function(){this.resetLocation()},ft.prototype.getDrawPoint=function(){return this.get("currentPoint")},ft.prototype.setDrawPoint=function(F){return this.set("currentPoint",F)},ft.prototype.renderInner=function(F){this.resetDraw(),this.get("title")&&this.drawTitle(F),this.drawLegendContent(F),this.get("background")&&this.drawBackground(F)},ft.prototype.drawBackground=function(F){var X=this.get("background"),U=F.getBBox(),gt=Qt(X.padding),kt=(0,y.__assign)({x:0,y:0,width:U.width+gt[1]+gt[3],height:U.height+gt[0]+gt[2]},X.style),Ht=this.addShape(F,{type:"rect",id:this.getElementId("background"),name:"legend-background",attrs:kt});Ht.toBack()},ft.prototype.drawTitle=function(F){var X=this.get("currentPoint"),U=this.get("title"),gt=U.spacing,kt=U.style,Ht=U.text,se=this.addShape(F,{type:"text",id:this.getElementId("title"),name:"legend-title",attrs:(0,y.__assign)({text:Ht,x:X.x,y:X.y},kt)}),ce=se.getBBox();this.set("currentPoint",{x:X.x,y:ce.maxY+gt})},ft.prototype.resetDraw=function(){var F=this.get("background"),X={x:0,y:0};if(F){var U=Qt(F.padding);X.x=U[3],X.y=U[0]}this.set("currentPoint",X)},ft}(q),Xe=me,dr=function(Yt){(0,y.__extends)(ft,Yt);function ft(){var F=Yt!==null&&Yt.apply(this,arguments)||this;return F.currentPageIndex=1,F.totalPagesCnt=1,F.pageWidth=0,F.pageHeight=0,F.startX=0,F.startY=0,F.onNavigationBack=function(){var X=F.getElementByLocalId("item-group");if(F.currentPageIndex>1){F.currentPageIndex-=1,F.updateNavigation();var U=F.getCurrentNavigationMatrix();F.get("animate")?X.animate({matrix:U},100):X.attr({matrix:U})}},F.onNavigationAfter=function(){var X=F.getElementByLocalId("item-group");if(F.currentPageIndex<F.totalPagesCnt){F.currentPageIndex+=1,F.updateNavigation();var U=F.getCurrentNavigationMatrix();F.get("animate")?X.animate({matrix:U},100):X.attr({matrix:U})}},F}return ft.prototype.getDefaultCfg=function(){var F=Yt.prototype.getDefaultCfg.call(this);return(0,y.__assign)((0,y.__assign)({},F),{name:"legend",type:"category",itemSpacing:24,maxItemWidth:null,itemWidth:null,itemHeight:null,itemName:{},itemValue:null,maxWidth:null,maxHeight:null,marker:{},items:[],itemStates:{},itemBackground:{},defaultCfg:{title:{spacing:5,style:{fill:Ze.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}},background:{padding:5,style:{stroke:Ze.lineColor}},itemBackground:{style:{opacity:0,fill:"#fff"}},itemName:{spacing:16,style:{fill:Ze.textColor,fontSize:12,textAlign:"start",textBaseline:"middle"}},marker:{spacing:8,style:{r:6,symbol:"circle"}},itemValue:{alignRight:!1,formatter:null,style:{fill:Ze.textColor,fontSize:12,textAlign:"start",textBaseline:"middle"}},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:Ze.uncheckedColor},markerStyle:{fill:Ze.uncheckedColor,stroke:Ze.uncheckedColor}},inactive:{nameStyle:{fill:Ze.uncheckedColor},markerStyle:{opacity:.2}}}}})},ft.prototype.isList=function(){return!0},ft.prototype.getItems=function(){return this.get("items")},ft.prototype.setItems=function(F){this.update({items:F})},ft.prototype.updateItem=function(F,X){(0,m.mix)(F,X),this.clear(),this.render()},ft.prototype.clearItems=function(){var F=this.getElementByLocalId("item-group");F&&F.clear()},ft.prototype.setItemState=function(F,X,U){F[X]=U;var gt=this.getElementByLocalId("item-"+F.id);if(gt){var kt=this.getItems(),Ht=kt.indexOf(F),se=this.createOffScreenGroup(),ce=this.drawItem(F,Ht,this.getItemHeight(),se);this.updateElements(ce,gt),this.clearUpdateStatus(gt)}},ft.prototype.hasState=function(F,X){return!!F[X]},ft.prototype.getItemStates=function(F){var X=this.get("itemStates"),U=[];return(0,m.each)(X,function(gt,kt){F[kt]&&U.push(kt)}),U},ft.prototype.clearItemsState=function(F){var X=this,U=this.getItemsByState(F);(0,m.each)(U,function(gt){X.setItemState(gt,F,!1)})},ft.prototype.getItemsByState=function(F){var X=this,U=this.getItems();return(0,m.filter)(U,function(gt){return X.hasState(gt,F)})},ft.prototype.drawLegendContent=function(F){this.processItems(),this.drawItems(F)},ft.prototype.processItems=function(){var F=this.get("items");(0,m.each)(F,function(X){X.id||(X.id=X.name)})},ft.prototype.drawItems=function(F){var X=this,U=this.addGroup(F,{id:this.getElementId("item-container-group"),name:"legend-item-container-group"}),gt=this.addGroup(U,{id:this.getElementId("item-group"),name:"legend-item-group"}),kt=this.getItemHeight(),Ht=this.get("itemWidth"),se=this.get("itemSpacing"),ce=this.get("currentPoint"),Me=ce.x,Le=ce.y,Ue=this.get("layout"),Je=this.get("items"),xr=!1,Yr=0,kr=this.get("maxWidth"),on=this.get("maxHeight");(0,m.each)(Je,function(un,sn){var Bt=X.drawItem(un,sn,kt,gt),oe=Bt.getBBox(),be=Ht||oe.width;be>Yr&&(Yr=be),Ue==="horizontal"?(kr&&kr<ce.x+be-Me&&(xr=!0,ce.x=Me,ce.y+=kt),X.moveElementTo(Bt,ce),ce.x+=be+se):(on&&on<ce.y+kt-Le&&(xr=!0,ce.x+=Yr+se,ce.y=Le,Yr=0),X.moveElementTo(Bt,ce),ce.y+=kt)}),xr&&this.get("flipPage")&&(this.pageHeight=0,this.pageWidth=0,this.totalPagesCnt=1,this.startX=Me,this.startY=Le,this.adjustNavigation(F,gt))},ft.prototype.getItemHeight=function(){var F=this.get("itemHeight");if(!F){var X=this.get("itemName");X&&(F=X.style.fontSize+8)}return F},ft.prototype.drawMarker=function(F,X,U,gt){var kt=(0,y.__assign)((0,y.__assign)((0,y.__assign)({x:0,y:gt/2},X.style),{symbol:(0,m.get)(U.marker,"symbol","circle")}),(0,m.get)(U.marker,"style",{})),Ht=this.addShape(F,{type:"marker",id:this.getElementId("item-"+U.id+"-marker"),name:"legend-item-marker",attrs:kt}),se=Ht.getBBox();Ht.attr("x",se.width/2);var ce=Ht.attr(),Me=ce.stroke,Le=ce.fill;return Me&&Ht.set("isStroke",!0),Le&&Ht.set("isFill",!0),Ht},ft.prototype.drawItemText=function(F,X,U,gt,kt,Ht,se){var ce=U.formatter,Me=(0,y.__assign)({x:Ht,y:kt/2,text:ce?ce(gt[X],gt,se):gt[X]},U.style);return this.addShape(F,{type:"text",id:this.getElementId("item-"+gt.id+"-"+X),name:"legend-item-"+X,attrs:Me})},ft.prototype.drawItem=function(F,X,U,gt){var kt="item-"+F.id,Ht=this.addGroup(gt,{name:"legend-item-container",id:this.getElementId("item-container-"+kt),delegateObject:{item:F,index:X}}),se=this.addGroup(Ht,{name:"legend-item",id:this.getElementId(kt),delegateObject:{item:F,index:X}}),ce=this.get("marker"),Me=this.get("itemName"),Le=this.get("itemValue"),Ue=this.get("itemBackground"),Je=this.getLimitItemWidth(),xr=0;if(ce){var Yr=this.drawMarker(se,ce,F,U);xr=Yr.getBBox().maxX+ce.spacing}if(Me){var kr=this.drawItemText(se,"name",Me,F,U,xr,X);Je&&ze(!0,kr,(0,m.clamp)(Je-xr,0,Je)),xr=kr.getBBox().maxX+Me.spacing}if(Le){var on=this.drawItemText(se,"value",Le,F,U,xr,X);Je&&(Le.alignRight?(on.attr({textAlign:"right",x:Je}),ze(!0,on,(0,m.clamp)(Je-xr,0,Je),"head")):ze(!0,on,(0,m.clamp)(Je-xr,0,Je)))}if(Ue){var un=se.getBBox(),sn=this.addShape(se,{type:"rect",name:"legend-item-background",id:this.getElementId(kt+"-background"),attrs:(0,y.__assign)({x:0,y:0,width:un.width,height:U},Ue.style)});sn.toBack()}return this.applyItemStates(F,se),se},ft.prototype.adjustNavigation=function(F,X){var U=this,gt=this.startX,kt=this.startY,Ht=this.get("layout"),se=X.findAll(function(be){return be.get("name")==="legend-item"}),ce=this.get("maxWidth"),Me=this.get("maxHeight"),Le=this.get("itemWidth"),Ue=this.get("itemSpacing"),Je=this.getItemHeight(),xr=this.drawNavigation(F,Ht,"00/00",12),Yr=xr.getBBox(),kr={x:gt,y:kt},on=1,un=0,sn=0,Bt=0;if(Ht==="horizontal")this.pageHeight=Je,(0,m.each)(se,function(be){var _e=be.getBBox(),He=Le||_e.width;(un&&un<kr.x+He+Ue||ce<kr.x+He+Ue+Yr.width)&&(on===1&&(un=kr.x+Ue,U.pageWidth=un,U.moveElementTo(xr,{x:ce-Ue-Yr.width-Yr.minX,y:kr.y+Je/2-Yr.height/2-Yr.minY})),on+=1,kr.x=gt,kr.y+=Je),U.moveElementTo(be,kr),be.getParent().setClip({type:"rect",attrs:{x:kr.x,y:kr.y,width:He+Ue,height:Je}}),kr.x+=He+Ue});else{(0,m.each)(se,function(be){var _e=be.getBBox();_e.width>sn&&(sn=_e.width)}),Bt=sn,sn+=Ue,ce&&(sn=Math.min(ce,sn),Bt=Math.min(ce,Bt)),this.pageWidth=sn,this.pageHeight=Me-Math.max(Yr.height,Je);var oe=Math.floor(this.pageHeight/Je);(0,m.each)(se,function(be,_e){_e!==0&&_e%oe==0&&(on+=1,kr.x+=sn,kr.y=kt),U.moveElementTo(be,kr),be.getParent().setClip({type:"rect",attrs:{x:kr.x,y:kr.y,width:sn,height:Je}}),kr.y+=Je}),this.totalPagesCnt=on,this.moveElementTo(xr,{x:gt+Bt/2-Yr.width/2-Yr.minX,y:Me-Yr.height-Yr.minY})}this.pageHeight&&this.pageWidth&&X.getParent().setClip({type:"rect",attrs:{x:this.startX,y:this.startY,width:this.pageWidth,height:this.pageHeight}}),this.totalPagesCnt=on,this.currentPageIndex>this.totalPagesCnt&&(this.currentPageIndex=1),this.updateNavigation(xr),X.attr("matrix",this.getCurrentNavigationMatrix())},ft.prototype.drawNavigation=function(F,X,U,gt){var kt={x:0,y:0},Ht=this.addGroup(F,{id:this.getElementId("navigation-group"),name:"legend-navigation"}),se=this.drawArrow(Ht,kt,"navigation-arrow-left",X==="horizontal"?"up":"left",gt);se.on("click",this.onNavigationBack);var ce=se.getBBox();kt.x+=ce.width+2;var Me=this.addShape(Ht,{type:"text",id:this.getElementId("navigation-text"),name:"navigation-text",attrs:{x:kt.x,y:kt.y+gt/2,text:U,fontSize:12,fill:"#ccc",textBaseline:"middle"}}),Le=Me.getBBox();kt.x+=Le.width+2;var Ue=this.drawArrow(Ht,kt,"navigation-arrow-right",X==="horizontal"?"down":"right",gt);return Ue.on("click",this.onNavigationAfter),Ht},ft.prototype.updateNavigation=function(F){var X=this.currentPageIndex+"/"+this.totalPagesCnt,U=F?F.getChildren()[1]:this.getElementByLocalId("navigation-text"),gt=F?F.findById(this.getElementId("navigation-arrow-left")):this.getElementByLocalId("navigation-arrow-left"),kt=F?F.findById(this.getElementId("navigation-arrow-right")):this.getElementByLocalId("navigation-arrow-right"),Ht=U.getBBox();U.attr("text",X);var se=U.getBBox();U.attr("x",U.attr("x")-(se.width-Ht.width)/2),gt.attr("opacity",this.currentPageIndex===1?.45:1),gt.attr("cursor",this.currentPageIndex===1?"not-allowed":"pointer"),kt.attr("opacity",this.currentPageIndex===this.totalPagesCnt?.45:1),kt.attr("cursor",this.currentPageIndex===this.totalPagesCnt?"not-allowed":"pointer")},ft.prototype.drawArrow=function(F,X,U,gt,kt){var Ht=X.x,se=X.y,ce={right:90*Math.PI/180,left:(360-90)*Math.PI/180,up:0,down:180*Math.PI/180},Me=this.addShape(F,{type:"path",id:this.getElementId(U),name:U,attrs:{path:[["M",Ht+kt/2,se],["L",Ht,se+kt],["L",Ht+kt,se+kt],["Z"]],fill:"#000",cursor:"pointer"}});return Me.attr("matrix",K({x:Ht+kt/2,y:se+kt/2},ce[gt])),Me},ft.prototype.getCurrentNavigationMatrix=function(){var F=this,X=F.currentPageIndex,U=F.pageWidth,gt=F.pageHeight,kt=this.get("layout"),Ht=kt==="horizontal"?{x:0,y:gt*(1-X)}:{x:U*(1-X),y:0};return H(Ht)},ft.prototype.applyItemStates=function(F,X){var U=this.getItemStates(F),gt=U.length>0;if(gt){var kt=X.getChildren(),Ht=this.get("itemStates");(0,m.each)(kt,function(se){var ce=se.get("name"),Me=ce.split("-")[2],Le=Ce(F,Me,Ht);Le&&(se.attr(Le),Me==="marker"&&!(se.get("isStroke")&&se.get("isFill"))&&(se.get("isStroke")&&se.attr("fill",null),se.get("isFill")&&se.attr("stroke",null)))})}},ft.prototype.getLimitItemWidth=function(){var F=this.get("itemWidth"),X=this.get("maxItemWidth");return X?F&&(X=F<=X?F:X):F&&(X=F),X},ft}(Xe),mr=dr,Ar=1.4,sr=.4,nr=function(Yt){(0,y.__extends)(ft,Yt);function ft(){return Yt!==null&&Yt.apply(this,arguments)||this}return ft.prototype.getDefaultCfg=function(){var F=Yt.prototype.getDefaultCfg.call(this);return(0,y.__assign)((0,y.__assign)({},F),{type:"continue",min:0,max:100,value:null,colors:[],track:{},rail:{},label:{},handler:{},slidable:!0,tip:null,step:null,maxWidth:null,maxHeight:null,defaultCfg:{label:{align:"rail",spacing:5,formatter:null,style:{fontSize:12,fill:Ze.textColor,textBaseline:"middle",fontFamily:Ze.fontFamily}},handler:{size:10,style:{fill:"#fff",stroke:"#333"}},track:{},rail:{type:"color",size:20,defaultLength:100,style:{fill:"#DCDEE2"}},title:{spacing:5,style:{fill:Ze.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}}}})},ft.prototype.isSlider=function(){return!0},ft.prototype.getValue=function(){return this.getCurrentValue()},ft.prototype.getRange=function(){return{min:this.get("min"),max:this.get("max")}},ft.prototype.setRange=function(F,X){this.update({min:F,max:X})},ft.prototype.setValue=function(F){var X=this.getValue();this.set("value",F);var U=this.get("group");this.resetTrackClip(),this.get("slidable")&&this.resetHandlers(U),this.delegateEmit("valuechanged",{originValue:X,value:F})},ft.prototype.initEvent=function(){var F=this.get("group");this.bindSliderEvent(F),this.bindRailEvent(F),this.bindTrackEvent(F)},ft.prototype.drawLegendContent=function(F){this.drawRail(F),this.drawLabels(F),this.fixedElements(F),this.resetTrack(F),this.resetTrackClip(F),this.get("slidable")&&this.resetHandlers(F)},ft.prototype.bindSliderEvent=function(F){this.bindHandlersEvent(F)},ft.prototype.bindHandlersEvent=function(F){var X=this;F.on("legend-handler-min:drag",function(U){var gt=X.getValueByCanvasPoint(U.x,U.y),kt=X.getCurrentValue(),Ht=kt[1];Ht<gt&&(Ht=gt),X.setValue([gt,Ht])}),F.on("legend-handler-max:drag",function(U){var gt=X.getValueByCanvasPoint(U.x,U.y),kt=X.getCurrentValue(),Ht=kt[0];Ht>gt&&(Ht=gt),X.setValue([Ht,gt])})},ft.prototype.bindRailEvent=function(F){},ft.prototype.bindTrackEvent=function(F){var X=this,U=null;F.on("legend-track:dragstart",function(gt){U={x:gt.x,y:gt.y}}),F.on("legend-track:drag",function(gt){if(!!U){var kt=X.getValueByCanvasPoint(U.x,U.y),Ht=X.getValueByCanvasPoint(gt.x,gt.y),se=X.getCurrentValue(),ce=se[1]-se[0],Me=X.getRange(),Le=Ht-kt;Le<0?se[0]+Le>Me.min?X.setValue([se[0]+Le,se[1]+Le]):X.setValue([Me.min,Me.min+ce]):Le>0&&(Le>0&&se[1]+Le<Me.max?X.setValue([se[0]+Le,se[1]+Le]):X.setValue([Me.max-ce,Me.max])),U={x:gt.x,y:gt.y}}}),F.on("legend-track:dragend",function(gt){U=null})},ft.prototype.drawLabels=function(F){this.drawLabel("min",F),this.drawLabel("max",F)},ft.prototype.drawLabel=function(F,X){var U=this.get("label"),gt=U.style,kt=U.align,Ht=this.get(F),se=this.getLabelAlignAttrs(F,kt),ce="label-"+F;this.addShape(X,{type:"text",id:this.getElementId(ce),name:"legend-label-"+F,attrs:(0,y.__assign)((0,y.__assign)({x:0,y:0,text:Ht},gt),se)})},ft.prototype.getLabelAlignAttrs=function(F,X){var U=this.isVertical(),gt="center",kt="middle";return U?(gt="start",X!=="rail"?F==="min"?kt="top":kt="bottom":kt="top"):X!=="rail"?(kt="top",F==="min"?gt="start":gt="end"):(gt="start",kt="middle"),{textAlign:gt,textBaseline:kt}},ft.prototype.getRailPath=function(F,X,U,gt){var kt=this.get("rail"),Ht=kt.size,se=kt.defaultLength,ce=kt.type,Me=this.isVertical(),Le=se,Ue=U,Je=gt;Ue||(Ue=Me?Ht:Le),Je||(Je=Me?Le:Ht);var xr=[];return ce==="color"?(xr.push(["M",F,X]),xr.push(["L",F+Ue,X]),xr.push(["L",F+Ue,X+Je]),xr.push(["L",F,X+Je]),xr.push(["Z"])):(xr.push(["M",F+Ue,X]),xr.push(["L",F+Ue,X+Je]),xr.push(["L",F,X+Je]),xr.push(["Z"])),xr},ft.prototype.drawRail=function(F){var X=this.get("rail"),U=X.style;this.addShape(F,{type:"path",id:this.getElementId("rail"),name:"legend-rail",attrs:(0,y.__assign)({path:this.getRailPath(0,0)},U)})},ft.prototype.getTrackColor=function(F){var X=F.length;if(!X)return null;if(X===1)return F[0];var U;this.isVertical()?U="l(90)":U="l(0)";for(var gt=0;gt<X;gt++){var kt=gt/(X-1);U+=" "+kt+":"+F[gt]}return U},ft.prototype.getTrackPath=function(F){var X=this.getRailShape(F),U=X.attr("path");return(0,m.clone)(U)},ft.prototype.getClipTrackAttrs=function(F){var X=this.getCurrentValue(),U=X[0],gt=X[1],kt=this.getRailBBox(F),Ht=this.getPointByValue(U,F),se=this.getPointByValue(gt,F),ce=this.isVertical(),Me,Le,Ue,Je;return ce?(Me=kt.minX,Le=Ht.y,Ue=kt.width,Je=se.y-Ht.y):(Me=Ht.x,Le=kt.minY,Ue=se.x-Ht.x,Je=kt.height),{x:Me,y:Le,width:Ue,height:Je}},ft.prototype.getTrackAttrs=function(F){var X=this.get("track"),U=this.get("colors"),gt=this.getTrackPath(F);return(0,m.mix)({path:gt,fill:this.getTrackColor(U)},X.style)},ft.prototype.resetTrackClip=function(F){var X=F||this.get("group"),U=this.getElementId("track"),gt=X.findById(U),kt=gt.getClip(),Ht=this.getClipTrackAttrs(F);kt?kt.attr(Ht):gt.setClip({type:"rect",attrs:Ht})},ft.prototype.resetTrack=function(F){var X=this.getElementId("track"),U=F.findById(X),gt=this.getTrackAttrs(F);U?U.attr(gt):this.addShape(F,{type:"path",id:X,draggable:this.get("slidable"),name:"legend-track",attrs:gt})},ft.prototype.getPointByValue=function(F,X){var U=this.getRange(),gt=U.min,kt=U.max,Ht=(F-gt)/(kt-gt),se=this.getRailBBox(X),ce=this.isVertical(),Me={x:0,y:0};return ce?(Me.x=se.minX+se.width/2,Me.y=lt(se.minY,se.maxY,Ht)):(Me.x=lt(se.minX,se.maxX,Ht),Me.y=se.minY+se.height/2),Me},ft.prototype.getRailShape=function(F){var X=F||this.get("group");return X.findById(this.getElementId("rail"))},ft.prototype.getRailBBox=function(F){var X=this.getRailShape(F),U=X.getBBox();return U},ft.prototype.getRailCanvasBBox=function(){var F=this.get("group"),X=F.findById(this.getElementId("rail")),U=X.getCanvasBBox();return U},ft.prototype.isVertical=function(){return this.get("layout")==="vertical"},ft.prototype.getValueByCanvasPoint=function(F,X){var U=this.getRange(),gt=U.min,kt=U.max,Ht=this.getRailCanvasBBox(),se=this.isVertical(),ce=this.get("step"),Me;se?Me=(X-Ht.minY)/Ht.height:Me=(F-Ht.minX)/Ht.width;var Le=lt(gt,kt,Me);if(ce){var Ue=Math.round((Le-gt)/ce);Le=gt+Ue*ce}return Le>kt&&(Le=kt),Le<gt&&(Le=gt),Le},ft.prototype.getCurrentValue=function(){var F=this.get("value");return F||(F=[this.get("min"),this.get("max")]),F},ft.prototype.resetHandlers=function(F){var X=this.getCurrentValue(),U=X[0],gt=X[1];this.resetHandler(F,"min",U),this.resetHandler(F,"max",gt)},ft.prototype.getHandlerPath=function(F,X){var U=this.isVertical(),gt=[],kt=F.size,Ht=X.x,se=X.y,ce=kt*Ar,Me=kt/2,Le=kt/6;if(U){var Ue=Ht+ce*sr;gt.push(["M",Ht,se]),gt.push(["L",Ue,se+Me]),gt.push(["L",Ht+ce,se+Me]),gt.push(["L",Ht+ce,se-Me]),gt.push(["L",Ue,se-Me]),gt.push(["Z"]),gt.push(["M",Ue,se+Le]),gt.push(["L",Ht+ce-2,se+Le]),gt.push(["M",Ue,se-Le]),gt.push(["L",Ht+ce-2,se-Le])}else{var Je=se+ce*sr;gt.push(["M",Ht,se]),gt.push(["L",Ht-Me,Je]),gt.push(["L",Ht-Me,se+ce]),gt.push(["L",Ht+Me,se+ce]),gt.push(["L",Ht+Me,Je]),gt.push(["Z"]),gt.push(["M",Ht-Le,Je]),gt.push(["L",Ht-Le,se+ce-2]),gt.push(["M",Ht+Le,Je]),gt.push(["L",Ht+Le,se+ce-2])}return gt},ft.prototype.resetHandler=function(F,X,U){var gt=this.getPointByValue(U,F),kt=this.get("handler"),Ht=this.getHandlerPath(kt,gt),se=this.getElementId("handler-"+X),ce=F.findById(se),Me=this.isVertical();ce?ce.attr("path",Ht):this.addShape(F,{type:"path",name:"legend-handler-"+X,draggable:!0,id:se,attrs:(0,y.__assign)((0,y.__assign)({path:Ht},kt.style),{cursor:Me?"ns-resize":"ew-resize"})})},ft.prototype.fixedElements=function(F){var X=F.findById(this.getElementId("rail")),U=F.findById(this.getElementId("label-min")),gt=F.findById(this.getElementId("label-max")),kt=this.getDrawPoint();this.isVertical()?this.fixedVertail(U,gt,X,kt):this.fixedHorizontal(U,gt,X,kt)},ft.prototype.fitRailLength=function(F,X,U,gt){var kt=this.isVertical(),Ht=kt?"height":"width",se=this.get("label"),ce=se.align,Me=se.spacing,Le=this.get("max"+(0,m.upperFirst)(Ht));if(Le){var Ue=ce==="rail"?U[Ht]+F[Ht]+X[Ht]+Me*2:U[Ht],Je=Ue-Le;Je>0&&this.changeRailLength(gt,Ht,U[Ht]-Je)}},ft.prototype.changeRailLength=function(F,X,U){var gt=F.getBBox(),kt;X==="height"?kt=this.getRailPath(gt.x,gt.y,gt.width,U):kt=this.getRailPath(gt.x,gt.y,U,gt.height),F.attr("path",kt)},ft.prototype.changeRailPosition=function(F,X,U){var gt=F.getBBox(),kt=this.getRailPath(X,U,gt.width,gt.height);F.attr("path",kt)},ft.prototype.fixedHorizontal=function(F,X,U,gt){var kt=this.get("label"),Ht=kt.align,se=kt.spacing,ce=U.getBBox(),Me=F.getBBox(),Le=X.getBBox(),Ue=ce.height;this.fitRailLength(Me,Le,ce,U),ce=U.getBBox(),Ht==="rail"?(F.attr({x:gt.x,y:gt.y+Ue/2}),this.changeRailPosition(U,gt.x+Me.width+se,gt.y),X.attr({x:gt.x+Me.width+ce.width+se*2,y:gt.y+Ue/2})):Ht==="top"?(F.attr({x:gt.x,y:gt.y}),X.attr({x:gt.x+ce.width,y:gt.y}),this.changeRailPosition(U,gt.x,gt.y+Me.height+se)):(this.changeRailPosition(U,gt.x,gt.y),F.attr({x:gt.x,y:gt.y+ce.height+se}),X.attr({x:gt.x+ce.width,y:gt.y+ce.height+se}))},ft.prototype.fixedVertail=function(F,X,U,gt){var kt=this.get("label"),Ht=kt.align,se=kt.spacing,ce=U.getBBox(),Me=F.getBBox(),Le=X.getBBox();if(this.fitRailLength(Me,Le,ce,U),ce=U.getBBox(),Ht==="rail")F.attr({x:gt.x,y:gt.y}),this.changeRailPosition(U,gt.x,gt.y+Me.height+se),X.attr({x:gt.x,y:gt.y+Me.height+ce.height+se*2});else if(Ht==="right")F.attr({x:gt.x+ce.width+se,y:gt.y}),this.changeRailPosition(U,gt.x,gt.y),X.attr({x:gt.x+ce.width+se,y:gt.y+ce.height});else{var Ue=Math.max(Me.width,Le.width);F.attr({x:gt.x,y:gt.y}),this.changeRailPosition(U,gt.x+Ue+se,gt.y),X.attr({x:gt.x,y:gt.y+ce.height})}},ft}(Xe),Gr=nr,gn=p(55223),vn="g2-tooltip",Ln="g2-tooltip-title",qn="g2-tooltip-list",ki="g2-tooltip-list-item",li="g2-tooltip-marker",Wn="g2-tooltip-value",ti="g2-tooltip-name",ei="g2-tooltip-crosshair-x",Bi="g2-tooltip-crosshair-y",cn,Hi=(cn={},cn[""+vn]={position:"absolute",visibility:"visible",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:Ze.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},cn[""+Ln]={marginBottom:"4px"},cn[""+qn]={margin:"0px",listStyleType:"none",padding:"0px"},cn[""+ki]={listStyleType:"none",marginBottom:"4px"},cn[""+li]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},cn[""+Wn]={display:"inline-block",float:"right",marginLeft:"30px"},cn[""+ei]={position:"absolute",width:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},cn[""+Bi]={position:"absolute",height:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},cn);function ta(Yt,ft,F,X,U){var gt={left:Yt<U.x,right:Yt+F>U.x+U.width,top:ft<U.y,bottom:ft+X>U.y+U.height};return gt}function ui(Yt,ft,F,X,U,gt){var kt=Yt,Ht=ft;switch(gt){case"left":kt=Yt-X-F,Ht=ft-U/2;break;case"right":kt=Yt+F,Ht=ft-U/2;break;case"top":kt=Yt-X/2,Ht=ft-U-F;break;case"bottom":kt=Yt-X/2,Ht=ft+F;break;default:kt=Yt+F,Ht=ft-U-F;break}return{x:kt,y:Ht}}function pa(Yt,ft,F,X,U,gt,kt){var Ht=ui(Yt,ft,F,X,U,gt);if(kt){var se=ta(Ht.x,Ht.y,X,U,kt);gt==="auto"?(se.right&&(Ht.x=Math.max(0,Yt-X-F)),se.top&&(Ht.y=Math.max(0,ft-U-F))):gt==="top"||gt==="bottom"?(se.left&&(Ht.x=kt.x),se.right&&(Ht.x=kt.x+kt.width-X),gt==="top"&&se.top&&(Ht.y=ft+F),gt==="bottom"&&se.bottom&&(Ht.y=ft-U-F)):(se.top&&(Ht.y=kt.y),se.bottom&&(Ht.y=kt.y+kt.height-U),gt==="left"&&se.left&&(Ht.x=Yt+F),gt==="right"&&se.right&&(Ht.x=Yt-X-F))}return Ht}function mi(Yt,ft){var F=!1;return(0,m.each)(ft,function(X){if((0,m.hasKey)(Yt,X))return F=!0,!1}),F}var ea=function(Yt){(0,y.__extends)(ft,Yt);function ft(){return Yt!==null&&Yt.apply(this,arguments)||this}return ft.prototype.getDefaultCfg=function(){var F=Yt.prototype.getDefaultCfg.call(this);return(0,y.__assign)((0,y.__assign)({},F),{name:"tooltip",type:"html",x:0,y:0,items:[],customContent:null,containerTpl:'<div class="'+vn+'"><div class="'+Ln+'"></div><ul class="'+qn+'"></ul></div>',itemTpl:'<li class="'+ki+`" data-index={index}>
          <span class="`+li+`" style="background:{color}"></span>
          <span class="`+ti+`">{name}</span>:
          <span class="`+Wn+`">{value}</span>
        </li>`,xCrosshairTpl:'<div class="'+ei+'"></div>',yCrosshairTpl:'<div class="'+Bi+'"></div>',title:null,showTitle:!0,region:null,crosshairsRegion:null,containerClassName:vn,crosshairs:null,offset:10,position:"right",domStyles:null,defaultStyles:Hi})},ft.prototype.render=function(){this.get("customContent")?this.renderCustomContent():(this.resetTitle(),this.renderItems()),this.resetPosition()},ft.prototype.clear=function(){this.clearCrosshairs(),this.setTitle(""),this.clearItemDoms()},ft.prototype.show=function(){var F=this.getContainer();!F||this.destroyed||(this.set("visible",!0),(0,Zn.Z)(F,{visibility:"visible"}),this.setCrossHairsVisible(!0))},ft.prototype.hide=function(){var F=this.getContainer();!F||this.destroyed||(this.set("visible",!1),(0,Zn.Z)(F,{visibility:"hidden"}),this.setCrossHairsVisible(!1))},ft.prototype.getLocation=function(){return{x:this.get("x"),y:this.get("y")}},ft.prototype.setLocation=function(F){this.set("x",F.x),this.set("y",F.y),this.resetPosition()},ft.prototype.setCrossHairsVisible=function(F){var X=F?"":"none",U=this.get("xCrosshairDom"),gt=this.get("yCrosshairDom");U&&(0,Zn.Z)(U,{display:X}),gt&&(0,Zn.Z)(gt,{display:X})},ft.prototype.initContainer=function(){if(Yt.prototype.initContainer.call(this),this.get("customContent")){this.get("container")&&this.get("container").remove();var F=this.getHtmlContentNode();this.get("parent").appendChild(F),this.set("container",F),this.resetStyles(),this.applyStyles()}},ft.prototype.updateInner=function(F){this.get("customContent")?this.renderCustomContent():(mi(F,["title","showTitle"])&&this.resetTitle(),(0,m.hasKey)(F,"items")&&this.renderItems()),Yt.prototype.updateInner.call(this,F)},ft.prototype.initDom=function(){this.cacheDoms()},ft.prototype.removeDom=function(){Yt.prototype.removeDom.call(this),this.clearCrosshairs()},ft.prototype.resetPosition=function(){var F=this.get("x"),X=this.get("y"),U=this.get("offset"),gt=this.getOffset(),kt=gt.offsetX,Ht=gt.offsetY,se=this.get("position"),ce=this.get("region"),Me=this.getContainer(),Le=this.getBBox(),Ue=Le.width,Je=Le.height,xr;ce&&(xr=nt(ce));var Yr=pa(F,X,U,Ue,Je,se,xr);(0,Zn.Z)(Me,{left:Vt(Yr.x+kt),top:Vt(Yr.y+Ht)}),this.resetCrosshairs()},ft.prototype.renderCustomContent=function(){var F=this.getHtmlContentNode(),X=this.get("parent"),U=this.get("container");U&&U.parentNode===X?X.replaceChild(F,U):X.appendChild(F),this.set("container",F),this.resetStyles(),this.applyStyles()},ft.prototype.getHtmlContentNode=function(){var F,X=this.get("customContent");if(X){var U=X(this.get("title"),this.get("items"));(0,m.isElement)(U)?F=U:F=(0,si.Z)(U)}return F},ft.prototype.cacheDoms=function(){var F=this.getContainer(),X=F.getElementsByClassName(Ln)[0],U=F.getElementsByClassName(qn)[0];this.set("titleDom",X),this.set("listDom",U)},ft.prototype.resetTitle=function(){var F=this.get("title"),X=this.get("showTitle");X&&F?this.setTitle(F):this.setTitle("")},ft.prototype.setTitle=function(F){var X=this.get("titleDom");X&&(X.innerText=F)},ft.prototype.resetCrosshairs=function(){var F=this.get("crosshairsRegion"),X=this.get("crosshairs");if(!F||!X)this.clearCrosshairs();else{var U=nt(F),gt=this.get("xCrosshairDom"),kt=this.get("yCrosshairDom");X==="x"?(this.resetCrosshair("x",U),kt&&(kt.remove(),this.set("yCrosshairDom",null))):X==="y"?(this.resetCrosshair("y",U),gt&&(gt.remove(),this.set("xCrosshairDom",null))):(this.resetCrosshair("x",U),this.resetCrosshair("y",U)),this.setCrossHairsVisible(this.get("visible"))}},ft.prototype.resetCrosshair=function(F,X){var U=this.checkCrosshair(F),gt=this.get(F);F==="x"?(0,Zn.Z)(U,{left:Vt(gt),top:Vt(X.y),height:Vt(X.height)}):(0,Zn.Z)(U,{top:Vt(gt),left:Vt(X.x),width:Vt(X.width)})},ft.prototype.checkCrosshair=function(F){var X=F+"CrosshairDom",U=F+"CrosshairTpl",gt="CROSSHAIR_"+F.toUpperCase(),kt=w[gt],Ht=this.get(X),se=this.get("parent");return Ht||(Ht=(0,si.Z)(this.get(U)),this.applyStyle(kt,Ht),se.appendChild(Ht),this.set(X,Ht)),Ht},ft.prototype.renderItems=function(){this.clearItemDoms();var F=this.get("items"),X=this.get("itemTpl"),U=this.get("listDom");U&&((0,m.each)(F,function(gt){var kt=gn.default.toCSSGradient(gt.color),Ht=(0,y.__assign)((0,y.__assign)({},gt),{color:kt}),se=(0,m.substitute)(X,Ht),ce=(0,si.Z)(se);U.appendChild(ce)}),this.applyChildrenStyles(U,this.get("domStyles")))},ft.prototype.clearItemDoms=function(){this.get("listDom")&&Gt(this.get("listDom"))},ft.prototype.clearCrosshairs=function(){var F=this.get("xCrosshairDom"),X=this.get("yCrosshairDom");F&&F.remove(),X&&X.remove(),this.set("xCrosshairDom",null),this.set("yCrosshairDom",null)},ft}(ua),fa=ea,ha={opacity:0},Kn={stroke:"#C5C5C5",strokeOpacity:.85},ga={fill:"#CACED4",opacity:.85},Di=p(57350),xi=p(2443);function xa(Yt){return(0,m.map)(Yt,function(ft,F){var X=F===0?"M":"L",U=ft[0],gt=ft[1];return[X,U,gt]})}function Wi(Yt){return xa(Yt)}function Ra(Yt){if(Yt.length<=2)return Wi(Yt);var ft=[];(0,m.each)(Yt,function(kt){(0,m.isEqual)(kt,ft.slice(ft.length-2))||ft.push(kt[0],kt[1])});var F=(0,Di.catmullRom2Bezier)(ft,!1),X=(0,m.head)(Yt),U=X[0],gt=X[1];return F.unshift(["M",U,gt]),F}function ba(Yt,ft,F,X){X===void 0&&(X=!0);var U=new xi.Linear({values:Yt}),gt=new xi.Category({values:(0,m.map)(Yt,function(Ht,se){return se})}),kt=(0,m.map)(Yt,function(Ht,se){return[gt.scale(se)*ft,F-U.scale(Ht)*F]});return X?Ra(kt):Wi(kt)}function So(Yt,ft,F){var X=(0,y.__spreadArrays)(Yt);return X.push(["L",ft,0]),X.push(["L",0,F]),X.push(["Z"]),X}var oo=function(Yt){(0,y.__extends)(ft,Yt);function ft(){return Yt!==null&&Yt.apply(this,arguments)||this}return ft.prototype.getDefaultCfg=function(){var F=Yt.prototype.getDefaultCfg.call(this);return(0,y.__assign)((0,y.__assign)({},F),{name:"trend",x:0,y:0,width:200,height:16,smooth:!0,isArea:!1,data:[],backgroundStyle:ha,lineStyle:Kn,areaStyle:ga})},ft.prototype.renderInner=function(F){var X=this.cfg,U=X.width,gt=X.height,kt=X.data,Ht=X.smooth,se=X.isArea,ce=X.backgroundStyle,Me=X.lineStyle,Le=X.areaStyle;this.addShape(F,{id:this.getElementId("background"),type:"rect",attrs:(0,y.__assign)({x:0,y:0,width:U,height:gt},ce)});var Ue=ba(kt,U,gt,Ht);if(this.addShape(F,{id:this.getElementId("line"),type:"path",attrs:(0,y.__assign)({path:Ue},Me)}),se){var Je=So(Ue,U,gt);this.addShape(F,{id:this.getElementId("area"),type:"path",attrs:(0,y.__assign)({path:Je},Le)})}},ft.prototype.applyOffset=function(){var F=this.cfg,X=F.x,U=F.y;this.moveElementTo(this.get("group"),{x:X,y:U})},ft}(q),xt=null,et={fill:"#416180",opacity:.05},W={fill:"#5B8FF9",opacity:.15,cursor:"move"},J=10,Tt={width:J,height:24},Dt={textBaseline:"middle",fill:"#000",opacity:.45},ie="sliderchange",fe={fill:"#F7F7F7",stroke:"#BFBFBF",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#FFF"},he=function(Yt){(0,y.__extends)(ft,Yt);function ft(){return Yt!==null&&Yt.apply(this,arguments)||this}return ft.prototype.getDefaultCfg=function(){var F=Yt.prototype.getDefaultCfg.call(this);return(0,y.__assign)((0,y.__assign)({},F),{name:"handler",x:0,y:0,width:10,height:24,style:fe})},ft.prototype.renderInner=function(F){var X=this.cfg,U=X.width,gt=X.height,kt=X.style,Ht=kt.fill,se=kt.stroke,ce=kt.radius,Me=kt.opacity,Le=kt.cursor;this.addShape(F,{type:"rect",id:this.getElementId("background"),attrs:{x:0,y:0,width:U,height:gt,fill:Ht,stroke:se,radius:ce,opacity:Me,cursor:Le}});var Ue=1/3*U,Je=2/3*U,xr=1/4*gt,Yr=3/4*gt;this.addShape(F,{id:this.getElementId("line-left"),type:"line",attrs:{x1:Ue,y1:xr,x2:Ue,y2:Yr,stroke:se,cursor:Le}}),this.addShape(F,{id:this.getElementId("line-right"),type:"line",attrs:{x1:Je,y1:xr,x2:Je,y2:Yr,stroke:se,cursor:Le}})},ft.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},ft.prototype.initEvent=function(){this.bindEvents()},ft.prototype.bindEvents=function(){var F=this;this.get("group").on("mouseenter",function(){var X=F.get("style").highLightFill;F.getElementByLocalId("background").attr("fill",X),F.draw()}),this.get("group").on("mouseleave",function(){var X=F.get("style").fill;F.getElementByLocalId("background").attr("fill",X),F.draw()})},ft.prototype.draw=function(){var F=this.get("container").get("canvas");F&&F.draw()},ft}(q),Se=null,ke=function(Yt){(0,y.__extends)(ft,Yt);function ft(){var F=Yt!==null&&Yt.apply(this,arguments)||this;return F.onMouseDown=function(X){return function(U){F.currentTarget=X;var gt=U.originalEvent;gt.stopPropagation(),gt.preventDefault(),F.prevX=(0,m.get)(gt,"touches.0.pageX",gt.pageX),F.prevY=(0,m.get)(gt,"touches.0.pageY",gt.pageY);var kt=F.getContainerDOM();kt.addEventListener("mousemove",F.onMouseMove),kt.addEventListener("mouseup",F.onMouseUp),kt.addEventListener("mouseleave",F.onMouseUp),kt.addEventListener("touchmove",F.onMouseMove),kt.addEventListener("touchend",F.onMouseUp),kt.addEventListener("touchcancel",F.onMouseUp)}},F.onMouseMove=function(X){var U=F.cfg.width,gt=[F.get("start"),F.get("end")];X.stopPropagation(),X.preventDefault();var kt=(0,m.get)(X,"touches.0.pageX",X.pageX),Ht=(0,m.get)(X,"touches.0.pageY",X.pageY),se=kt-F.prevX,ce=F.adjustOffsetRange(se/U);F.updateStartEnd(ce),F.updateUI(F.getElementByLocalId("foreground"),F.getElementByLocalId("minText"),F.getElementByLocalId("maxText")),F.prevX=kt,F.prevY=Ht,F.draw(),F.emit(ie,[F.get("start"),F.get("end")].sort()),F.delegateEmit("valuechanged",{originValue:gt,value:[F.get("start"),F.get("end")]})},F.onMouseUp=function(){F.currentTarget&&(F.currentTarget=void 0);var X=F.getContainerDOM();X&&(X.removeEventListener("mousemove",F.onMouseMove),X.removeEventListener("mouseup",F.onMouseUp),X.removeEventListener("mouseleave",F.onMouseUp),X.removeEventListener("touchmove",F.onMouseMove),X.removeEventListener("touchend",F.onMouseUp),X.removeEventListener("touchcancel",F.onMouseUp))},F}return ft.prototype.setRange=function(F,X){this.set("minLimit",F),this.set("maxLimit",X);var U=this.get("start"),gt=this.get("end"),kt=(0,m.clamp)(U,F,X),Ht=(0,m.clamp)(gt,F,X);!this.get("isInit")&&(U!==kt||gt!==Ht)&&this.setValue([kt,Ht])},ft.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},ft.prototype.setValue=function(F){var X=this.getRange();if((0,m.isArray)(F)&&F.length===2){var U=[this.get("start"),this.get("end")];this.update({start:(0,m.clamp)(F[0],X.min,X.max),end:(0,m.clamp)(F[1],X.min,X.max)}),this.get("updateAutoRender")||this.render(),this.delegateEmit("valuechanged",{originValue:U,value:F})}},ft.prototype.getValue=function(){return[this.get("start"),this.get("end")]},ft.prototype.getDefaultCfg=function(){var F=Yt.prototype.getDefaultCfg.call(this);return(0,y.__assign)((0,y.__assign)({},F),{name:"slider",x:0,y:0,width:100,height:16,backgroundStyle:{},foregroundStyle:{},handlerStyle:{},textStyle:{},defaultCfg:{backgroundStyle:et,foregroundStyle:W,handlerStyle:Tt,textStyle:Dt}})},ft.prototype.update=function(F){var X=F.start,U=F.end,gt=(0,y.__assign)({},F);(0,m.isNil)(X)||(gt.start=(0,m.clamp)(X,0,1)),(0,m.isNil)(U)||(gt.end=(0,m.clamp)(U,0,1)),Yt.prototype.update.call(this,gt),this.minHandler=this.getChildComponentById(this.getElementId("minHandler")),this.maxHandler=this.getChildComponentById(this.getElementId("maxHandler"))},ft.prototype.init=function(){this.set("start",(0,m.clamp)(this.get("start"),0,1)),this.set("end",(0,m.clamp)(this.get("end"),0,1)),Yt.prototype.init.call(this)},ft.prototype.renderInner=function(F){var X=this.cfg,U=X.start,gt=X.end,kt=X.width,Ht=X.height,se=X.trendCfg,ce=se===void 0?{}:se,Me=X.minText,Le=X.maxText,Ue=X.backgroundStyle,Je=Ue===void 0?{}:Ue,xr=X.foregroundStyle,Yr=xr===void 0?{}:xr,kr=X.textStyle,on=kr===void 0?{}:kr,un=X.handlerStyle,sn=un===void 0?{}:un,Bt=U*kt,oe=gt*kt;(0,m.size)((0,m.get)(ce,"data"))&&this.addComponent(F,(0,y.__assign)({component:oo,id:this.getElementId("trend"),x:0,y:0,width:kt,height:Ht},ce)),this.addShape(F,{id:this.getElementId("background"),type:"rect",attrs:(0,y.__assign)({x:0,y:0,width:kt,height:Ht},Je)});var be=this.addShape(F,{id:this.getElementId("minText"),type:"text",attrs:(0,y.__assign)({y:Ht/2,textAlign:"right",text:Me,silent:!1},on)}),_e=this.addShape(F,{id:this.getElementId("maxText"),type:"text",attrs:(0,y.__assign)({y:Ht/2,textAlign:"left",text:Le,silent:!1},on)}),He=this.addShape(F,{id:this.getElementId("foreground"),name:"foreground",type:"rect",attrs:(0,y.__assign)({y:0,height:Ht},Yr)}),cr=(0,m.get)(sn,"height",24);this.minHandler=this.addComponent(F,(0,y.__assign)({component:he,id:this.getElementId("minHandler"),name:"handler-min",x:0,y:(Ht-cr)/2,width:kt,height:cr,cursor:"ew-resize"},sn)),this.maxHandler=this.addComponent(F,(0,y.__assign)({component:he,id:this.getElementId("maxHandler"),name:"handler-max",x:0,y:(Ht-cr)/2,width:kt,height:cr,cursor:"ew-resize"},sn)),this.updateUI(He,be,_e)},ft.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},ft.prototype.initEvent=function(){this.bindEvents()},ft.prototype.updateUI=function(F,X,U){var gt=this.cfg,kt=gt.start,Ht=gt.end,se=gt.width,ce=gt.minText,Me=gt.maxText,Le=gt.handlerStyle,Ue=kt*se,Je=Ht*se;F.attr("x",Ue),F.attr("width",Je-Ue);var xr=(0,m.get)(Le,"width",J);X.attr("text",ce),U.attr("text",Me);var Yr=this._dodgeText([Ue,Je],X,U),kr=Yr[0],on=Yr[1];this.minHandler&&(this.minHandler.update({x:Ue-xr/2}),this.get("updateAutoRender")||this.minHandler.render()),(0,m.each)(kr,function(un,sn){return X.attr(sn,un)}),this.maxHandler&&(this.maxHandler.update({x:Je-xr/2}),this.get("updateAutoRender")||this.maxHandler.render()),(0,m.each)(on,function(un,sn){return U.attr(sn,un)})},ft.prototype.bindEvents=function(){var F=this.get("group");F.on("handler-min:mousedown",this.onMouseDown("minHandler")),F.on("handler-min:touchstart",this.onMouseDown("minHandler")),F.on("handler-max:mousedown",this.onMouseDown("maxHandler")),F.on("handler-max:touchstart",this.onMouseDown("maxHandler"));var X=F.findById(this.getElementId("foreground"));X.on("mousedown",this.onMouseDown("foreground")),X.on("touchstart",this.onMouseDown("foreground"))},ft.prototype.adjustOffsetRange=function(F){var X=this.cfg,U=X.start,gt=X.end;switch(this.currentTarget){case"minHandler":{var kt=0-U,Ht=1-U;return Math.min(Ht,Math.max(kt,F))}case"maxHandler":{var kt=0-gt,Ht=1-gt;return Math.min(Ht,Math.max(kt,F))}case"foreground":{var kt=0-U,Ht=1-gt;return Math.min(Ht,Math.max(kt,F))}}},ft.prototype.updateStartEnd=function(F){var X=this.cfg,U=X.start,gt=X.end;switch(this.currentTarget){case"minHandler":U+=F;break;case"maxHandler":gt+=F;break;case"foreground":U+=F,gt+=F;break}this.set("start",U),this.set("end",gt)},ft.prototype._dodgeText=function(F,X,U){var gt,kt,Ht=this.cfg,se=Ht.handlerStyle,ce=Ht.width,Me=2,Le=(0,m.get)(se,"width",J),Ue=F[0],Je=F[1],xr=!1;Ue>Je&&(gt=[Je,Ue],Ue=gt[0],Je=gt[1],kt=[U,X],X=kt[0],U=kt[1],xr=!0);var Yr=X.getBBox(),kr=U.getBBox(),on=Yr.width>Ue-Me?{x:Ue+Le/2+Me,textAlign:"left"}:{x:Ue-Le/2-Me,textAlign:"right"},un=kr.width>ce-Je-Me?{x:Je-Le/2-Me,textAlign:"right"}:{x:Je+Le/2+Me,textAlign:"left"};return xr?[un,on]:[on,un]},ft.prototype.draw=function(){var F=this.get("container"),X=F&&F.get("canvas");X&&X.draw()},ft.prototype.getContainerDOM=function(){var F=this.get("container"),X=F&&F.get("canvas");return X&&X.get("container")},ft}(q),Be=null,Ve=p(57817),ar={trackColor:"rgba(0,0,0,0)",thumbColor:"rgba(0,0,0,0.15)",size:8,lineCap:"round"},Re={default:ar,hover:{thumbColor:"rgba(0,0,0,0.2)"}},Tr=function(Yt){(0,y.__extends)(ft,Yt);function ft(){var F=Yt!==null&&Yt.apply(this,arguments)||this;return F.clearEvents=m.noop,F.onStartEvent=function(X){return function(U){F.isMobile=X,U.originalEvent.preventDefault();var gt=X?(0,m.get)(U.originalEvent,"touches.0.clientX"):U.clientX,kt=X?(0,m.get)(U.originalEvent,"touches.0.clientY"):U.clientY;F.startPos=F.cfg.isHorizontal?gt:kt,F.bindLaterEvent()}},F.bindLaterEvent=function(){var X=F.getContainerDOM(),U=[];F.isMobile?U=[(0,Ve.Z)(X,"touchmove",F.onMouseMove),(0,Ve.Z)(X,"touchend",F.onMouseUp),(0,Ve.Z)(X,"touchcancel",F.onMouseUp)]:U=[(0,Ve.Z)(X,"mousemove",F.onMouseMove),(0,Ve.Z)(X,"mouseup",F.onMouseUp),(0,Ve.Z)(X,"mouseleave",F.onMouseUp)],F.clearEvents=function(){U.forEach(function(gt){gt.remove()})}},F.onMouseMove=function(X){var U=F.cfg,gt=U.isHorizontal,kt=U.thumbOffset;X.preventDefault();var Ht=F.isMobile?(0,m.get)(X,"touches.0.clientX"):X.clientX,se=F.isMobile?(0,m.get)(X,"touches.0.clientY"):X.clientY,ce=gt?Ht:se,Me=ce-F.startPos;F.startPos=ce,F.updateThumbOffset(kt+Me)},F.onMouseUp=function(X){X.preventDefault(),F.clearEvents()},F.onTrackClick=function(X){var U=F.cfg,gt=U.isHorizontal,kt=U.x,Ht=U.y,se=U.thumbLen,ce=F.getContainerDOM(),Me=ce.getBoundingClientRect(),Le=X.clientX,Ue=X.clientY,Je=gt?Le-Me.left-kt-se/2:Ue-Me.top-Ht-se/2,xr=F.validateRange(Je);F.updateThumbOffset(xr)},F.onThumbMouseOver=function(){var X=F.cfg.theme.hover.thumbColor;F.getElementByLocalId("thumb").attr("stroke",X),F.draw()},F.onThumbMouseOut=function(){var X=F.cfg.theme.default.thumbColor;F.getElementByLocalId("thumb").attr("stroke",X),F.draw()},F}return ft.prototype.setRange=function(F,X){this.set("minLimit",F),this.set("maxLimit",X);var U=this.getValue(),gt=(0,m.clamp)(U,F,X);U!==gt&&!this.get("isInit")&&this.setValue(gt)},ft.prototype.getRange=function(){var F=this.get("minLimit")||0,X=this.get("maxLimit")||1;return{min:F,max:X}},ft.prototype.setValue=function(F){var X=this.getRange(),U=this.getValue();this.update({thumbOffset:(this.get("trackLen")-this.get("thumbLen"))*(0,m.clamp)(F,X.min,X.max)}),this.delegateEmit("valuechange",{originalValue:U,value:this.getValue()})},ft.prototype.getValue=function(){return(0,m.clamp)(this.get("thumbOffset")/(this.get("trackLen")-this.get("thumbLen")),0,1)},ft.prototype.getDefaultCfg=function(){var F=Yt.prototype.getDefaultCfg.call(this);return(0,y.__assign)((0,y.__assign)({},F),{name:"scrollbar",isHorizontal:!0,minThumbLen:20,thumbOffset:0,theme:Re})},ft.prototype.renderInner=function(F){this.renderTrackShape(F),this.renderThumbShape(F)},ft.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},ft.prototype.initEvent=function(){this.bindEvents()},ft.prototype.renderTrackShape=function(F){var X=this.cfg,U=X.trackLen,gt=X.theme,kt=gt===void 0?{default:{}}:gt,Ht=kt.default,se=Ht.lineCap,ce=Ht.trackColor,Me=Ht.size,Le=this.get("isHorizontal")?{x1:0+Me/2,y1:Me/2,x2:U-Me/2,y2:Me/2,lineWidth:Me,stroke:ce,lineCap:se}:{x1:Me/2,y1:0+Me/2,x2:Me/2,y2:U-Me/2,lineWidth:Me,stroke:ce,lineCap:se};return this.addShape(F,{id:this.getElementId("track"),name:"track",type:"line",attrs:Le})},ft.prototype.renderThumbShape=function(F){var X=this.cfg,U=X.thumbOffset,gt=X.thumbLen,kt=X.theme,Ht=kt===void 0?{default:{}}:kt,se=Ht.default,ce=se.size,Me=se.lineCap,Le=se.thumbColor,Ue=this.get("isHorizontal")?{x1:U+ce/2,y1:ce/2,x2:U+gt-ce/2,y2:ce/2,lineWidth:ce,stroke:Le,lineCap:Me,cursor:"default"}:{x1:ce/2,y1:U+ce/2,x2:ce/2,y2:U+gt-ce/2,lineWidth:ce,stroke:Le,lineCap:Me,cursor:"default"};return this.addShape(F,{id:this.getElementId("thumb"),name:"thumb",type:"line",attrs:Ue})},ft.prototype.bindEvents=function(){var F=this.get("group");F.on("mousedown",this.onStartEvent(!1)),F.on("mouseup",this.onMouseUp),F.on("touchstart",this.onStartEvent(!0)),F.on("touchend",this.onMouseUp);var X=F.findById(this.getElementId("track"));X.on("click",this.onTrackClick);var U=F.findById(this.getElementId("thumb"));U.on("mouseover",this.onThumbMouseOver),U.on("mouseout",this.onThumbMouseOut)},ft.prototype.getContainerDOM=function(){var F=this.get("container"),X=F&&F.get("canvas");return X&&X.get("container")},ft.prototype.validateRange=function(F){var X=this.cfg,U=X.thumbLen,gt=X.trackLen,kt=F;return F+U>gt?kt=gt-U:F+U<U&&(kt=0),kt},ft.prototype.draw=function(){var F=this.get("container"),X=F&&F.get("canvas");X&&X.draw()},ft.prototype.updateThumbOffset=function(F){var X=this.cfg,U=X.thumbOffset,gt=X.isHorizontal,kt=X.thumbLen,Ht=X.size,se=this.validateRange(F);if(se!==U){var ce=this.getElementByLocalId("thumb");gt?ce.attr({x1:se+Ht/2,x2:se+kt-Ht/2}):ce.attr({y1:se+Ht/2,y2:se+kt-Ht/2}),this.emitOffsetChange(se)}},ft.prototype.emitOffsetChange=function(F){var X=this.cfg,U=X.thumbOffset,gt=X.trackLen,kt=X.thumbLen;this.cfg.thumbOffset=F,this.emit("scrollchange",{thumbOffset:F,ratio:(0,m.clamp)(F/(gt-kt),0,1)}),this.delegateEmit("valuechange",{originalValue:U,value:F})},ft}(q)},15110:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(60153),I=p(39014),P=p(49242),O={none:[],point:["x","y"],region:["start","end"],points:["points"],circle:["center","radius","startAngle","endAngle"]},L=function(A){b.__extends(_,A);function _(E){var g=A.call(this,E)||this;return g.initCfg(),g}return _.prototype.getDefaultCfg=function(){return{id:"",name:"",type:"",locationType:"none",offsetX:0,offsetY:0,animate:!1,capture:!0,updateAutoRender:!1,animateOption:{appear:null,update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},events:null,defaultCfg:{},visible:!0}},_.prototype.clear=function(){},_.prototype.update=function(E){var g=this,w=this.get("defaultCfg");P.each(E,function(d,y){var m=g.get(y),C=d;m!==d&&(P.isObject(d)&&w[y]&&(C=P.deepMix({},w[y],d)),g.set(y,C))}),this.updateInner(E),this.afterUpdate(E)},_.prototype.updateInner=function(E){},_.prototype.afterUpdate=function(E){P.hasKey(E,"visible")&&(E.visible?this.show():this.hide()),P.hasKey(E,"capture")&&this.setCapture(E.capture)},_.prototype.getLayoutBBox=function(){return this.getBBox()},_.prototype.getLocationType=function(){return this.get("locationType")},_.prototype.getOffset=function(){return{offsetX:this.get("offsetX"),offsetY:this.get("offsetY")}},_.prototype.setOffset=function(E,g){this.update({offsetX:E,offsetY:g})},_.prototype.setLocation=function(E){var g=b.__assign({},E);this.update(g)},_.prototype.getLocation=function(){var E=this,g={},w=this.get("locationType"),d=O[w];return P.each(d,function(y){g[y]=E.get(y)}),g},_.prototype.isList=function(){return!1},_.prototype.isSlider=function(){return!1},_.prototype.init=function(){},_.prototype.initCfg=function(){var E=this,g=this.get("defaultCfg");P.each(g,function(w,d){var y=E.get(d);if(P.isObject(y)){var m=P.deepMix({},w,y);E.set(d,m)}})},_}(I.Base);S.default=L},51964:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(60153),I=p(80478),P=p(49242),O=p(11594),L=p(15110),A=function(_){b.__extends(E,_);function E(){return _!==null&&_.apply(this,arguments)||this}return E.prototype.getDefaultCfg=function(){var g=_.prototype.getDefaultCfg.call(this);return b.__assign(b.__assign({},g),{container:null,containerTpl:"<div></div>",updateAutoRender:!0,containerClassName:"",parent:null})},E.prototype.getContainer=function(){return this.get("container")},E.prototype.show=function(){var g=this.get("container");g.style.display="",this.set("visible",!0)},E.prototype.hide=function(){var g=this.get("container");g.style.display="none",this.set("visible",!1)},E.prototype.setCapture=function(g){var w=this.getContainer(),d=g?"auto":"none";w.style.pointerEvents=d,this.set("capture",g)},E.prototype.getBBox=function(){var g=this.getContainer(),w=parseFloat(g.style.left)||0,d=parseFloat(g.style.top)||0;return O.createBBox(w,d,g.clientWidth,g.clientHeight)},E.prototype.clear=function(){var g=this.get("container");O.clearDom(g)},E.prototype.destroy=function(){this.removeEvent(),this.removeDom(),_.prototype.destroy.call(this)},E.prototype.init=function(){_.prototype.init.call(this),this.initContainer(),this.initDom(),this.resetStyles(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible()},E.prototype.initCapture=function(){this.setCapture(this.get("capture"))},E.prototype.initVisible=function(){this.get("visible")?this.show():this.hide()},E.prototype.initDom=function(){},E.prototype.initContainer=function(){var g=this.get("container");if(P.isNil(g)){g=this.createDom();var w=this.get("parent");P.isString(w)&&(w=document.getElementById(w),this.set("parent",w)),w.appendChild(g),this.set("container",g)}else P.isString(g)&&(g=document.getElementById(g),this.set("container",g));this.get("parent")||this.set("parent",g.parentNode)},E.prototype.resetStyles=function(){var g=this.get("domStyles"),w=this.get("defaultStyles");g?g=P.deepMix({},w,g):g=w,this.set("domStyles",g)},E.prototype.applyStyles=function(){var g=this.get("domStyles");if(!!g){var w=this.getContainer();this.applyChildrenStyles(w,g);var d=this.get("containerClassName");if(d&&O.hasClass(w,d)){var y=g[d];I.modifyCSS(w,y)}}},E.prototype.applyChildrenStyles=function(g,w){P.each(w,function(d,y){var m=g.getElementsByClassName(y);P.each(m,function(C){I.modifyCSS(C,d)})})},E.prototype.applyStyle=function(g,w){var d=this.get("domStyles");I.modifyCSS(w,d[g])},E.prototype.createDom=function(){var g=this.get("containerTpl");return I.createDom(g)},E.prototype.initEvent=function(){},E.prototype.removeDom=function(){var g=this.get("container");g&&g.parentNode.removeChild(g)},E.prototype.removeEvent=function(){},E.prototype.updateInner=function(g){P.hasKey(g,"domStyles")&&(this.resetStyles(),this.applyStyles()),this.resetPosition()},E.prototype.resetPosition=function(){},E}(L.default);S.default=A},7755:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.CROSSHAIR_Y=S.CROSSHAIR_X=S.NAME_CLASS=S.VALUE_CLASS=S.MARKER_CLASS=S.LIST_ITEM_CLASS=S.LIST_CLASS=S.TITLE_CLASS=S.CONTAINER_CLASS=void 0,S.CONTAINER_CLASS="g2-tooltip",S.TITLE_CLASS="g2-tooltip-title",S.LIST_CLASS="g2-tooltip-list",S.LIST_ITEM_CLASS="g2-tooltip-list-item",S.MARKER_CLASS="g2-tooltip-marker",S.VALUE_CLASS="g2-tooltip-value",S.NAME_CLASS="g2-tooltip-name",S.CROSSHAIR_X="g2-tooltip-crosshair-x",S.CROSSHAIR_Y="g2-tooltip-crosshair-y"},55225:function(Ct,S,p){"use strict";var b;Object.defineProperty(S,"__esModule",{value:!0});var I=p(52782),P=p(7755);S.default=(b={},b[""+P.CONTAINER_CLASS]={position:"absolute",visibility:"visible",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:I.default.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},b[""+P.TITLE_CLASS]={marginBottom:"4px"},b[""+P.LIST_CLASS]={margin:"0px",listStyleType:"none",padding:"0px"},b[""+P.LIST_ITEM_CLASS]={listStyleType:"none",marginBottom:"4px"},b[""+P.MARKER_CLASS]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},b[""+P.VALUE_CLASS]={display:"inline-block",float:"right",marginLeft:"30px"},b[""+P.CROSSHAIR_X]={position:"absolute",width:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},b[""+P.CROSSHAIR_Y]={position:"absolute",height:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},b)},88373:function(Ct,S,p){"use strict";var b;b={value:!0};var I=p(60153),P=p(55223),O=p(80478),L=p(49242),A=p(51964),_=p(11594),E=p(7755),g=p(55225),w=p(51227);function d(m,C){var T=!1;return L.each(C,function(B){if(L.hasKey(m,B))return T=!0,!1}),T}var y=function(m){I.__extends(C,m);function C(){return m!==null&&m.apply(this,arguments)||this}return C.prototype.getDefaultCfg=function(){var T=m.prototype.getDefaultCfg.call(this);return I.__assign(I.__assign({},T),{name:"tooltip",type:"html",x:0,y:0,items:[],customContent:null,containerTpl:'<div class="'+E.CONTAINER_CLASS+'"><div class="'+E.TITLE_CLASS+'"></div><ul class="'+E.LIST_CLASS+'"></ul></div>',itemTpl:'<li class="'+E.LIST_ITEM_CLASS+`" data-index={index}>
          <span class="`+E.MARKER_CLASS+`" style="background:{color}"></span>
          <span class="`+E.NAME_CLASS+`">{name}</span>:
          <span class="`+E.VALUE_CLASS+`">{value}</span>
        </li>`,xCrosshairTpl:'<div class="'+E.CROSSHAIR_X+'"></div>',yCrosshairTpl:'<div class="'+E.CROSSHAIR_Y+'"></div>',title:null,showTitle:!0,region:null,crosshairsRegion:null,containerClassName:E.CONTAINER_CLASS,crosshairs:null,offset:10,position:"right",domStyles:null,defaultStyles:g.default})},C.prototype.render=function(){this.get("customContent")?this.renderCustomContent():(this.resetTitle(),this.renderItems()),this.resetPosition()},C.prototype.clear=function(){this.clearCrosshairs(),this.setTitle(""),this.clearItemDoms()},C.prototype.show=function(){var T=this.getContainer();!T||this.destroyed||(this.set("visible",!0),O.modifyCSS(T,{visibility:"visible"}),this.setCrossHairsVisible(!0))},C.prototype.hide=function(){var T=this.getContainer();!T||this.destroyed||(this.set("visible",!1),O.modifyCSS(T,{visibility:"hidden"}),this.setCrossHairsVisible(!1))},C.prototype.getLocation=function(){return{x:this.get("x"),y:this.get("y")}},C.prototype.setLocation=function(T){this.set("x",T.x),this.set("y",T.y),this.resetPosition()},C.prototype.setCrossHairsVisible=function(T){var B=T?"":"none",D=this.get("xCrosshairDom"),Y=this.get("yCrosshairDom");D&&O.modifyCSS(D,{display:B}),Y&&O.modifyCSS(Y,{display:B})},C.prototype.initContainer=function(){if(m.prototype.initContainer.call(this),this.get("customContent")){this.get("container")&&this.get("container").remove();var T=this.getHtmlContentNode();this.get("parent").appendChild(T),this.set("container",T),this.resetStyles(),this.applyStyles()}},C.prototype.updateInner=function(T){this.get("customContent")?this.renderCustomContent():(d(T,["title","showTitle"])&&this.resetTitle(),L.hasKey(T,"items")&&this.renderItems()),m.prototype.updateInner.call(this,T)},C.prototype.initDom=function(){this.cacheDoms()},C.prototype.removeDom=function(){m.prototype.removeDom.call(this),this.clearCrosshairs()},C.prototype.resetPosition=function(){var T=this.get("x"),B=this.get("y"),D=this.get("offset"),Y=this.getOffset(),K=Y.offsetX,H=Y.offsetY,st=this.get("position"),pt=this.get("region"),ct=this.getContainer(),Ot=this.getBBox(),Rt=Ot.width,Qt=Ot.height,Gt;pt&&(Gt=_.regionToBBox(pt));var Z=w.getAlignPoint(T,B,D,Rt,Qt,st,Gt);O.modifyCSS(ct,{left:_.toPx(Z.x+K),top:_.toPx(Z.y+H)}),this.resetCrosshairs()},C.prototype.renderCustomContent=function(){var T=this.getHtmlContentNode(),B=this.get("parent"),D=this.get("container");D&&D.parentNode===B?B.replaceChild(T,D):B.appendChild(T),this.set("container",T),this.resetStyles(),this.applyStyles()},C.prototype.getHtmlContentNode=function(){var T,B=this.get("customContent");if(B){var D=B(this.get("title"),this.get("items"));L.isElement(D)?T=D:T=O.createDom(D)}return T},C.prototype.cacheDoms=function(){var T=this.getContainer(),B=T.getElementsByClassName(E.TITLE_CLASS)[0],D=T.getElementsByClassName(E.LIST_CLASS)[0];this.set("titleDom",B),this.set("listDom",D)},C.prototype.resetTitle=function(){var T=this.get("title"),B=this.get("showTitle");B&&T?this.setTitle(T):this.setTitle("")},C.prototype.setTitle=function(T){var B=this.get("titleDom");B&&(B.innerText=T)},C.prototype.resetCrosshairs=function(){var T=this.get("crosshairsRegion"),B=this.get("crosshairs");if(!T||!B)this.clearCrosshairs();else{var D=_.regionToBBox(T),Y=this.get("xCrosshairDom"),K=this.get("yCrosshairDom");B==="x"?(this.resetCrosshair("x",D),K&&(K.remove(),this.set("yCrosshairDom",null))):B==="y"?(this.resetCrosshair("y",D),Y&&(Y.remove(),this.set("xCrosshairDom",null))):(this.resetCrosshair("x",D),this.resetCrosshair("y",D)),this.setCrossHairsVisible(this.get("visible"))}},C.prototype.resetCrosshair=function(T,B){var D=this.checkCrosshair(T),Y=this.get(T);T==="x"?O.modifyCSS(D,{left:_.toPx(Y),top:_.toPx(B.y),height:_.toPx(B.height)}):O.modifyCSS(D,{top:_.toPx(Y),left:_.toPx(B.x),width:_.toPx(B.width)})},C.prototype.checkCrosshair=function(T){var B=T+"CrosshairDom",D=T+"CrosshairTpl",Y="CROSSHAIR_"+T.toUpperCase(),K=E[Y],H=this.get(B),st=this.get("parent");return H||(H=O.createDom(this.get(D)),this.applyStyle(K,H),st.appendChild(H),this.set(B,H)),H},C.prototype.renderItems=function(){this.clearItemDoms();var T=this.get("items"),B=this.get("itemTpl"),D=this.get("listDom");D&&(L.each(T,function(Y){var K=P.default.toCSSGradient(Y.color),H=I.__assign(I.__assign({},Y),{color:K}),st=L.substitute(B,H),pt=O.createDom(st);D.appendChild(pt)}),this.applyChildrenStyles(D,this.get("domStyles")))},C.prototype.clearItemDoms=function(){this.get("listDom")&&_.clearDom(this.get("listDom"))},C.prototype.clearCrosshairs=function(){var T=this.get("xCrosshairDom"),B=this.get("yCrosshairDom");T&&T.remove(),B&&B.remove(),this.set("xCrosshairDom",null),this.set("yCrosshairDom",null)},C}(A.default);S.Z=y},51227:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.getAlignPoint=S.getPointByPosition=S.getOutSides=void 0;function p(P,O,L,A,_){var E={left:P<_.x,right:P+L>_.x+_.width,top:O<_.y,bottom:O+A>_.y+_.height};return E}S.getOutSides=p;function b(P,O,L,A,_,E){var g=P,w=O;switch(E){case"left":g=P-A-L,w=O-_/2;break;case"right":g=P+L,w=O-_/2;break;case"top":g=P-A/2,w=O-_-L;break;case"bottom":g=P-A/2,w=O+L;break;default:g=P+L,w=O-_-L;break}return{x:g,y:w}}S.getPointByPosition=b;function I(P,O,L,A,_,E,g){var w=b(P,O,L,A,_,E);if(g){var d=p(w.x,w.y,A,_,g);E==="auto"?(d.right&&(w.x=Math.max(0,P-A-L)),d.top&&(w.y=Math.max(0,O-_-L))):E==="top"||E==="bottom"?(d.left&&(w.x=g.x),d.right&&(w.x=g.x+g.width-A),E==="top"&&d.top&&(w.y=O+L),E==="bottom"&&d.bottom&&(w.y=O-_-L)):(d.top&&(w.y=g.y),d.bottom&&(w.y=g.y+g.height-_),E==="left"&&d.left&&(w.x=P+L),E==="right"&&d.right&&(w.x=P-A-L))}return w}S.getAlignPoint=I},31207:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.propagationDelegate=void 0;var b=p(66192);function I(P,O,L){var A=new b.default(O,L);A.target=P,A.propagationPath.push(P),P.emitDelegation(O,A);for(var _=P.getParent();_;)_.emitDelegation(O,A),A.propagationPath.push(_),_=_.getParent()}S.propagationDelegate=I},52782:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.default={fontFamily:`
  "-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",
  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",
  SimSun, "sans-serif"`,textColor:"#2C3542",activeTextColor:"#333333",uncheckedColor:"#D8D8D8",lineColor:"#416180",regionColor:"#CCD7EB",verticalAxisRotate:-Math.PI/4,horizontalAxisRotate:Math.PI/4}},11594:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.getTextPoint=S.toPx=S.updateClip=S.getBBoxWithClip=S.mergeBBox=S.intersectBBox=S.near=S.wait=S.distance=S.getCirclePoint=S.getValueByPercent=S.createBBox=S.pointsToBBox=S.regionToBBox=S.hasClass=S.clearDom=S.formatPadding=void 0;var b=p(49242);function I(D){var Y=0,K=0,H=0,st=0;return b.isNumber(D)?Y=K=H=st=D:b.isArray(D)&&(Y=D[0],H=b.isNil(D[1])?D[0]:D[1],st=b.isNil(D[2])?D[0]:D[2],K=b.isNil(D[3])?H:D[3]),[Y,H,st,K]}S.formatPadding=I;function P(D){for(var Y=D.childNodes,K=Y.length,H=K-1;H>=0;H--)D.removeChild(Y[H])}S.clearDom=P;function O(D,Y){return!!D.className.match(new RegExp("(\\s|^)"+Y+"(\\s|$)"))}S.hasClass=O;function L(D){var Y=D.start,K=D.end,H=Math.min(Y.x,K.x),st=Math.min(Y.y,K.y),pt=Math.max(Y.x,K.x),ct=Math.max(Y.y,K.y);return{x:H,y:st,minX:H,minY:st,maxX:pt,maxY:ct,width:pt-H,height:ct-st}}S.regionToBBox=L;function A(D){var Y=D.map(function(Ot){return Ot.x}),K=D.map(function(Ot){return Ot.y}),H=Math.min.apply(Math,Y),st=Math.min.apply(Math,K),pt=Math.max.apply(Math,Y),ct=Math.max.apply(Math,K);return{x:H,y:st,minX:H,minY:st,maxX:pt,maxY:ct,width:pt-H,height:ct-st}}S.pointsToBBox=A;function _(D,Y,K,H){return{x:D,y:Y,width:K,height:H,minX:D,minY:Y,maxX:D+K,maxY:Y+H}}S.createBBox=_;function E(D,Y,K){return(1-K)*D+Y*K}S.getValueByPercent=E;function g(D,Y,K){return{x:D.x+Math.cos(K)*Y,y:D.y+Math.sin(K)*Y}}S.getCirclePoint=g;function w(D,Y){var K=Y.x-D.x,H=Y.y-D.y;return Math.sqrt(K*K+H*H)}S.distance=w,S.wait=function(D){return new Promise(function(Y){setTimeout(Y,D)})},S.near=function(D,Y){return[D,Y].includes(Infinity)?Math.abs(D)===Math.abs(Y):Math.abs(D-Y)<Math.pow(Number.EPSILON,.5)};function d(D,Y){var K=Math.max(D.minX,Y.minX),H=Math.max(D.minY,Y.minY),st=Math.min(D.maxX,Y.maxX),pt=Math.min(D.maxY,Y.maxY);return _(K,H,st-K,pt-H)}S.intersectBBox=d;function y(D,Y){var K=Math.min(D.minX,Y.minX),H=Math.min(D.minY,Y.minY),st=Math.max(D.maxX,Y.maxX),pt=Math.max(D.maxY,Y.maxY);return _(K,H,st-K,pt-H)}S.mergeBBox=y;function m(D){var Y=D.getClip(),K=Y&&Y.getBBox(),H;if(!D.isGroup())H=D.getBBox();else{var st=Infinity,pt=-Infinity,ct=Infinity,Ot=-Infinity,Rt=D.getChildren();Rt.length>0?b.each(Rt,function(Qt){if(Qt.get("visible")){if(Qt.isGroup()&&Qt.get("children").length===0)return!0;var Gt=m(Qt),Z=Qt.applyToMatrix([Gt.minX,Gt.minY,1]),nt=Qt.applyToMatrix([Gt.minX,Gt.maxY,1]),Q=Qt.applyToMatrix([Gt.maxX,Gt.minY,1]),dt=Qt.applyToMatrix([Gt.maxX,Gt.maxY,1]),lt=Math.min(Z[0],nt[0],Q[0],dt[0]),z=Math.max(Z[0],nt[0],Q[0],dt[0]),$=Math.min(Z[1],nt[1],Q[1],dt[1]),j=Math.max(Z[1],nt[1],Q[1],dt[1]);lt<st&&(st=lt),z>pt&&(pt=z),$<ct&&(ct=$),j>Ot&&(Ot=j)}}):(st=0,pt=0,ct=0,Ot=0),H=_(st,ct,pt-st,Ot-ct)}return K?d(H,K):H}S.getBBoxWithClip=m;function C(D,Y){if(!(!D.getClip()&&!Y.getClip())){var K=Y.getClip();if(!K){D.setClip(null);return}var H={type:K.get("type"),attrs:K.attr()};D.setClip(H)}}S.updateClip=C;function T(D){return D+"px"}S.toPx=T;function B(D,Y,K,H){var st=w(D,Y),pt=H/st,ct=0;return K==="start"?ct=0-pt:K==="end"&&(ct=1+pt),{x:E(D.x,Y.x,ct),y:E(D.y,Y.y,ct)}}S.getTextPoint=B},50782:function(Ct,S,p){"use strict";p.r(S),p.d(S,{Coordinate:function(){return z},getCoordinate:function(){return re},registerCoordinate:function(){return ae}});var b=function(Nt,Lt){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(bt,at){bt.__proto__=at}||function(bt,at){for(var rt in at)Object.prototype.hasOwnProperty.call(at,rt)&&(bt[rt]=at[rt])},b(Nt,Lt)};function I(Nt,Lt){if(typeof Lt!="function"&&Lt!==null)throw new TypeError("Class extends value "+String(Lt)+" is not a constructor or null");b(Nt,Lt);function bt(){this.constructor=Nt}Nt.prototype=Lt===null?Object.create(Lt):(bt.prototype=Lt.prototype,new bt)}var P=function(){return P=Object.assign||function(Lt){for(var bt,at=1,rt=arguments.length;at<rt;at++){bt=arguments[at];for(var vt in bt)Object.prototype.hasOwnProperty.call(bt,vt)&&(Lt[vt]=bt[vt])}return Lt},P.apply(this,arguments)};function O(Nt,Lt){var bt={};for(var at in Nt)Object.prototype.hasOwnProperty.call(Nt,at)&&Lt.indexOf(at)<0&&(bt[at]=Nt[at]);if(Nt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var rt=0,at=Object.getOwnPropertySymbols(Nt);rt<at.length;rt++)Lt.indexOf(at[rt])<0&&Object.prototype.propertyIsEnumerable.call(Nt,at[rt])&&(bt[at[rt]]=Nt[at[rt]]);return bt}function L(Nt,Lt,bt,at){var rt=arguments.length,vt=rt<3?Lt:at===null?at=Object.getOwnPropertyDescriptor(Lt,bt):at,tt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")vt=Reflect.decorate(Nt,Lt,bt,at);else for(var q=Nt.length-1;q>=0;q--)(tt=Nt[q])&&(vt=(rt<3?tt(vt):rt>3?tt(Lt,bt,vt):tt(Lt,bt))||vt);return rt>3&&vt&&Object.defineProperty(Lt,bt,vt),vt}function A(Nt,Lt){return function(bt,at){Lt(bt,at,Nt)}}function _(Nt,Lt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(Nt,Lt)}function E(Nt,Lt,bt,at){function rt(vt){return vt instanceof bt?vt:new bt(function(tt){tt(vt)})}return new(bt||(bt=Promise))(function(vt,tt){function q(Kt){try{It(at.next(Kt))}catch(ue){tt(ue)}}function Et(Kt){try{It(at.throw(Kt))}catch(ue){tt(ue)}}function It(Kt){Kt.done?vt(Kt.value):rt(Kt.value).then(q,Et)}It((at=at.apply(Nt,Lt||[])).next())})}function g(Nt,Lt){var bt={label:0,sent:function(){if(vt[0]&1)throw vt[1];return vt[1]},trys:[],ops:[]},at,rt,vt,tt;return tt={next:q(0),throw:q(1),return:q(2)},typeof Symbol=="function"&&(tt[Symbol.iterator]=function(){return this}),tt;function q(It){return function(Kt){return Et([It,Kt])}}function Et(It){if(at)throw new TypeError("Generator is already executing.");for(;bt;)try{if(at=1,rt&&(vt=It[0]&2?rt.return:It[0]?rt.throw||((vt=rt.return)&&vt.call(rt),0):rt.next)&&!(vt=vt.call(rt,It[1])).done)return vt;switch(rt=0,vt&&(It=[It[0]&2,vt.value]),It[0]){case 0:case 1:vt=It;break;case 4:return bt.label++,{value:It[1],done:!1};case 5:bt.label++,rt=It[1],It=[0];continue;case 7:It=bt.ops.pop(),bt.trys.pop();continue;default:if(vt=bt.trys,!(vt=vt.length>0&&vt[vt.length-1])&&(It[0]===6||It[0]===2)){bt=0;continue}if(It[0]===3&&(!vt||It[1]>vt[0]&&It[1]<vt[3])){bt.label=It[1];break}if(It[0]===6&&bt.label<vt[1]){bt.label=vt[1],vt=It;break}if(vt&&bt.label<vt[2]){bt.label=vt[2],bt.ops.push(It);break}vt[2]&&bt.ops.pop(),bt.trys.pop();continue}It=Lt.call(Nt,bt)}catch(Kt){It=[6,Kt],rt=0}finally{at=vt=0}if(It[0]&5)throw It[1];return{value:It[0]?It[1]:void 0,done:!0}}}var w=Object.create?function(Nt,Lt,bt,at){at===void 0&&(at=bt);var rt=Object.getOwnPropertyDescriptor(Lt,bt);(!rt||("get"in rt?!Lt.__esModule:rt.writable||rt.configurable))&&(rt={enumerable:!0,get:function(){return Lt[bt]}}),Object.defineProperty(Nt,at,rt)}:function(Nt,Lt,bt,at){at===void 0&&(at=bt),Nt[at]=Lt[bt]};function d(Nt,Lt){for(var bt in Nt)bt!=="default"&&!Object.prototype.hasOwnProperty.call(Lt,bt)&&w(Lt,Nt,bt)}function y(Nt){var Lt=typeof Symbol=="function"&&Symbol.iterator,bt=Lt&&Nt[Lt],at=0;if(bt)return bt.call(Nt);if(Nt&&typeof Nt.length=="number")return{next:function(){return Nt&&at>=Nt.length&&(Nt=void 0),{value:Nt&&Nt[at++],done:!Nt}}};throw new TypeError(Lt?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(Nt,Lt){var bt=typeof Symbol=="function"&&Nt[Symbol.iterator];if(!bt)return Nt;var at=bt.call(Nt),rt,vt=[],tt;try{for(;(Lt===void 0||Lt-- >0)&&!(rt=at.next()).done;)vt.push(rt.value)}catch(q){tt={error:q}}finally{try{rt&&!rt.done&&(bt=at.return)&&bt.call(at)}finally{if(tt)throw tt.error}}return vt}function C(){for(var Nt=[],Lt=0;Lt<arguments.length;Lt++)Nt=Nt.concat(m(arguments[Lt]));return Nt}function T(){for(var Nt=0,Lt=0,bt=arguments.length;Lt<bt;Lt++)Nt+=arguments[Lt].length;for(var at=Array(Nt),rt=0,Lt=0;Lt<bt;Lt++)for(var vt=arguments[Lt],tt=0,q=vt.length;tt<q;tt++,rt++)at[rt]=vt[tt];return at}function B(Nt,Lt,bt){if(bt||arguments.length===2)for(var at=0,rt=Lt.length,vt;at<rt;at++)(vt||!(at in Lt))&&(vt||(vt=Array.prototype.slice.call(Lt,0,at)),vt[at]=Lt[at]);return Nt.concat(vt||Array.prototype.slice.call(Lt))}function D(Nt){return this instanceof D?(this.v=Nt,this):new D(Nt)}function Y(Nt,Lt,bt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var at=bt.apply(Nt,Lt||[]),rt,vt=[];return rt={},tt("next"),tt("throw"),tt("return"),rt[Symbol.asyncIterator]=function(){return this},rt;function tt(we){at[we]&&(rt[we]=function(Ye){return new Promise(function(te,pe){vt.push([we,Ye,te,pe])>1||q(we,Ye)})})}function q(we,Ye){try{Et(at[we](Ye))}catch(te){ue(vt[0][3],te)}}function Et(we){we.value instanceof D?Promise.resolve(we.value.v).then(It,Kt):ue(vt[0][2],we)}function It(we){q("next",we)}function Kt(we){q("throw",we)}function ue(we,Ye){we(Ye),vt.shift(),vt.length&&q(vt[0][0],vt[0][1])}}function K(Nt){var Lt,bt;return Lt={},at("next"),at("throw",function(rt){throw rt}),at("return"),Lt[Symbol.iterator]=function(){return this},Lt;function at(rt,vt){Lt[rt]=Nt[rt]?function(tt){return(bt=!bt)?{value:D(Nt[rt](tt)),done:rt==="return"}:vt?vt(tt):tt}:vt}}function H(Nt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Lt=Nt[Symbol.asyncIterator],bt;return Lt?Lt.call(Nt):(Nt=typeof y=="function"?y(Nt):Nt[Symbol.iterator](),bt={},at("next"),at("throw"),at("return"),bt[Symbol.asyncIterator]=function(){return this},bt);function at(vt){bt[vt]=Nt[vt]&&function(tt){return new Promise(function(q,Et){tt=Nt[vt](tt),rt(q,Et,tt.done,tt.value)})}}function rt(vt,tt,q,Et){Promise.resolve(Et).then(function(It){vt({value:It,done:q})},tt)}}function st(Nt,Lt){return Object.defineProperty?Object.defineProperty(Nt,"raw",{value:Lt}):Nt.raw=Lt,Nt}var pt=Object.create?function(Nt,Lt){Object.defineProperty(Nt,"default",{enumerable:!0,value:Lt})}:function(Nt,Lt){Nt.default=Lt};function ct(Nt){if(Nt&&Nt.__esModule)return Nt;var Lt={};if(Nt!=null)for(var bt in Nt)bt!=="default"&&Object.prototype.hasOwnProperty.call(Nt,bt)&&w(Lt,Nt,bt);return pt(Lt,Nt),Lt}function Ot(Nt){return Nt&&Nt.__esModule?Nt:{default:Nt}}function Rt(Nt,Lt,bt,at){if(bt==="a"&&!at)throw new TypeError("Private accessor was defined without a getter");if(typeof Lt=="function"?Nt!==Lt||!at:!Lt.has(Nt))throw new TypeError("Cannot read private member from an object whose class did not declare it");return bt==="m"?at:bt==="a"?at.call(Nt):at?at.value:Lt.get(Nt)}function Qt(Nt,Lt,bt,at,rt){if(at==="m")throw new TypeError("Private method is not writable");if(at==="a"&&!rt)throw new TypeError("Private accessor was defined without a setter");if(typeof Lt=="function"?Nt!==Lt||!rt:!Lt.has(Nt))throw new TypeError("Cannot write private member to an object whose class did not declare it");return at==="a"?rt.call(Nt,bt):rt?rt.value=bt:Lt.set(Nt,bt),bt}function Gt(Nt,Lt){if(Lt===null||typeof Lt!="object"&&typeof Lt!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof Nt=="function"?Lt===Nt:Nt.has(Lt)}var Z=p(77160),nt=p(35600),Q=p(31506),dt=p(49242),lt=function(){function Nt(Lt){this.type="coordinate",this.isRect=!1,this.isHelix=!1,this.isPolar=!1,this.isReflectX=!1,this.isReflectY=!1;var bt=Lt.start,at=Lt.end,rt=Lt.matrix,vt=rt===void 0?[1,0,0,0,1,0,0,0,1]:rt,tt=Lt.isTransposed,q=tt===void 0?!1:tt;this.start=bt,this.end=at,this.matrix=vt,this.originalMatrix=B([],vt),this.isTransposed=q}return Nt.prototype.initial=function(){this.center={x:(this.start.x+this.end.x)/2,y:(this.start.y+this.end.y)/2},this.width=Math.abs(this.end.x-this.start.x),this.height=Math.abs(this.end.y-this.start.y)},Nt.prototype.update=function(Lt){(0,dt.assign)(this,Lt),this.initial()},Nt.prototype.convertDim=function(Lt,bt){var at,rt=this[bt],vt=rt.start,tt=rt.end;return this.isReflect(bt)&&(at=[tt,vt],vt=at[0],tt=at[1]),vt+Lt*(tt-vt)},Nt.prototype.invertDim=function(Lt,bt){var at,rt=this[bt],vt=rt.start,tt=rt.end;return this.isReflect(bt)&&(at=[tt,vt],vt=at[0],tt=at[1]),(Lt-vt)/(tt-vt)},Nt.prototype.applyMatrix=function(Lt,bt,at){at===void 0&&(at=0);var rt=this.matrix,vt=[Lt,bt,at];return Z.transformMat3(vt,vt,rt),vt},Nt.prototype.invertMatrix=function(Lt,bt,at){at===void 0&&(at=0);var rt=this.matrix,vt=nt.invert([0,0,0,0,0,0,0,0,0],rt),tt=[Lt,bt,at];return vt&&Z.transformMat3(tt,tt,vt),tt},Nt.prototype.convert=function(Lt){var bt=this.convertPoint(Lt),at=bt.x,rt=bt.y,vt=this.applyMatrix(at,rt,1);return{x:vt[0],y:vt[1]}},Nt.prototype.invert=function(Lt){var bt=this.invertMatrix(Lt.x,Lt.y,1);return this.invertPoint({x:bt[0],y:bt[1]})},Nt.prototype.rotate=function(Lt){var bt=this.matrix,at=this.center;return Q.leftTranslate(bt,bt,[-at.x,-at.y]),Q.leftRotate(bt,bt,Lt),Q.leftTranslate(bt,bt,[at.x,at.y]),this},Nt.prototype.reflect=function(Lt){return Lt==="x"?this.isReflectX=!this.isReflectX:this.isReflectY=!this.isReflectY,this},Nt.prototype.scale=function(Lt,bt){var at=this.matrix,rt=this.center;return Q.leftTranslate(at,at,[-rt.x,-rt.y]),Q.leftScale(at,at,[Lt,bt]),Q.leftTranslate(at,at,[rt.x,rt.y]),this},Nt.prototype.translate=function(Lt,bt){var at=this.matrix;return Q.leftTranslate(at,at,[Lt,bt]),this},Nt.prototype.transpose=function(){return this.isTransposed=!this.isTransposed,this},Nt.prototype.getCenter=function(){return this.center},Nt.prototype.getWidth=function(){return this.width},Nt.prototype.getHeight=function(){return this.height},Nt.prototype.getRadius=function(){return this.radius},Nt.prototype.isReflect=function(Lt){return Lt==="x"?this.isReflectX:this.isReflectY},Nt.prototype.resetMatrix=function(Lt){this.matrix=Lt||B([],this.originalMatrix)},Nt}(),z=lt,$=function(Nt){I(Lt,Nt);function Lt(bt){var at=Nt.call(this,bt)||this;return at.isRect=!0,at.type="cartesian",at.initial(),at}return Lt.prototype.initial=function(){Nt.prototype.initial.call(this);var bt=this.start,at=this.end;this.x={start:bt.x,end:at.x},this.y={start:bt.y,end:at.y}},Lt.prototype.convertPoint=function(bt){var at,rt=bt.x,vt=bt.y;return this.isTransposed&&(at=[vt,rt],rt=at[0],vt=at[1]),{x:this.convertDim(rt,"x"),y:this.convertDim(vt,"y")}},Lt.prototype.invertPoint=function(bt){var at,rt=this.invertDim(bt.x,"x"),vt=this.invertDim(bt.y,"y");return this.isTransposed&&(at=[vt,rt],rt=at[0],vt=at[1]),{x:rt,y:vt}},Lt}(z),j=$,f=p(31437),yt=function(Nt){I(Lt,Nt);function Lt(bt){var at=Nt.call(this,bt)||this;at.isHelix=!0,at.type="helix";var rt=bt.startAngle,vt=rt===void 0?1.25*Math.PI:rt,tt=bt.endAngle,q=tt===void 0?7.25*Math.PI:tt,Et=bt.innerRadius,It=Et===void 0?0:Et,Kt=bt.radius;return at.startAngle=vt,at.endAngle=q,at.innerRadius=It,at.radius=Kt,at.initial(),at}return Lt.prototype.initial=function(){Nt.prototype.initial.call(this);var bt=(this.endAngle-this.startAngle)/(2*Math.PI)+1,at=Math.min(this.width,this.height)/2;this.radius&&this.radius>=0&&this.radius<=1&&(at=at*this.radius),this.d=Math.floor(at*(1-this.innerRadius)/bt),this.a=this.d/(Math.PI*2),this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*at,end:this.innerRadius*at+this.d*.99}},Lt.prototype.convertPoint=function(bt){var at,rt=bt.x,vt=bt.y;this.isTransposed&&(at=[vt,rt],rt=at[0],vt=at[1]);var tt=this.convertDim(rt,"x"),q=this.a*tt,Et=this.convertDim(vt,"y");return{x:this.center.x+Math.cos(tt)*(q+Et),y:this.center.y+Math.sin(tt)*(q+Et)}},Lt.prototype.invertPoint=function(bt){var at,rt=this.d+this.y.start,vt=f.subtract([0,0],[bt.x,bt.y],[this.center.x,this.center.y]),tt=Q.angleTo(vt,[1,0],!0),q=tt*this.a;f.length(vt)<q&&(q=f.length(vt));var Et=Math.floor((f.length(vt)-q)/rt);tt=2*Et*Math.PI+tt;var It=this.a*tt,Kt=f.length(vt)-It;Kt=(0,dt.isNumberEqual)(Kt,0)?0:Kt;var ue=this.invertDim(tt,"x"),we=this.invertDim(Kt,"y");return ue=(0,dt.isNumberEqual)(ue,0)?0:ue,we=(0,dt.isNumberEqual)(we,0)?0:we,this.isTransposed&&(at=[we,ue],ue=at[0],we=at[1]),{x:ue,y:we}},Lt}(z),_t=yt,jt=function(Nt){I(Lt,Nt);function Lt(bt){var at=Nt.call(this,bt)||this;at.isPolar=!0,at.type="polar";var rt=bt.startAngle,vt=rt===void 0?-Math.PI/2:rt,tt=bt.endAngle,q=tt===void 0?Math.PI*3/2:tt,Et=bt.innerRadius,It=Et===void 0?0:Et,Kt=bt.radius;return at.startAngle=vt,at.endAngle=q,at.innerRadius=It,at.radius=Kt,at.initial(),at}return Lt.prototype.initial=function(){for(Nt.prototype.initial.call(this);this.endAngle<this.startAngle;)this.endAngle+=Math.PI*2;var bt=this.getOneBox(),at=bt.maxX-bt.minX,rt=bt.maxY-bt.minY,vt=Math.abs(bt.minX)/at,tt=Math.abs(bt.minY)/rt,q;this.height/rt>this.width/at?(q=this.width/at,this.circleCenter={x:this.center.x-(.5-vt)*this.width,y:this.center.y-(.5-tt)*q*rt}):(q=this.height/rt,this.circleCenter={x:this.center.x-(.5-vt)*q*at,y:this.center.y-(.5-tt)*this.height}),this.polarRadius=this.radius,this.radius?this.radius>0&&this.radius<=1?this.polarRadius=q*this.radius:(this.radius<=0||this.radius>q)&&(this.polarRadius=q):this.polarRadius=q,this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*this.polarRadius,end:this.polarRadius}},Lt.prototype.getRadius=function(){return this.polarRadius},Lt.prototype.convertPoint=function(bt){var at,rt=this.getCenter(),vt=bt.x,tt=bt.y;return this.isTransposed&&(at=[tt,vt],vt=at[0],tt=at[1]),vt=this.convertDim(vt,"x"),tt=this.convertDim(tt,"y"),{x:rt.x+Math.cos(vt)*tt,y:rt.y+Math.sin(vt)*tt}},Lt.prototype.invertPoint=function(bt){var at,rt=this.getCenter(),vt=[bt.x-rt.x,bt.y-rt.y],tt=this,q=tt.startAngle,Et=tt.endAngle;this.isReflect("x")&&(at=[Et,q],q=at[0],Et=at[1]);var It=[1,0,0,0,1,0,0,0,1];Q.leftRotate(It,It,q);var Kt=[1,0,0];Z.transformMat3(Kt,Kt,It);var ue=[Kt[0],Kt[1]],we=Q.angleTo(ue,vt,Et<q);(0,dt.isNumberEqual)(we,Math.PI*2)&&(we=0);var Ye=f.length(vt),te=we/(Et-q);te=Et-q>0?te:-te;var pe=this.invertDim(Ye,"y"),Te={x:0,y:0};return Te.x=this.isTransposed?pe:te,Te.y=this.isTransposed?te:pe,Te},Lt.prototype.getCenter=function(){return this.circleCenter},Lt.prototype.getOneBox=function(){var bt=this.startAngle,at=this.endAngle;if(Math.abs(at-bt)>=Math.PI*2)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var rt=[0,Math.cos(bt),Math.cos(at)],vt=[0,Math.sin(bt),Math.sin(at)],tt=Math.min(bt,at);tt<Math.max(bt,at);tt+=Math.PI/18)rt.push(Math.cos(tt)),vt.push(Math.sin(tt));return{minX:Math.min.apply(Math,rt),maxX:Math.max.apply(Math,rt),minY:Math.min.apply(Math,vt),maxY:Math.max.apply(Math,vt)}},Lt}(z),qt=jt,Vt={},re=function(Nt){return Vt[Nt.toLowerCase()]},ae=function(Nt,Lt){Vt[Nt.toLowerCase()]=Lt};ae("rect",j),ae("cartesian",j),ae("polar",qt),ae("helix",_t)},57817:function(Ct,S,p){"use strict";p.d(S,{Z:function(){return b}});function b(I,P,O){if(I){if(typeof I.addEventListener=="function")return I.addEventListener(P,O,!1),{remove:function(){I.removeEventListener(P,O,!1)}};if(typeof I.attachEvent=="function")return I.attachEvent("on"+P,O),{remove:function(){I.detachEvent("on"+P,O)}}}}},6056:function(Ct,S,p){"use strict";p.d(S,{Z:function(){return A}});var b,I,P,O;function L(){b=document.createElement("table"),I=document.createElement("tr"),P=/^\s*<(\w+|!)[^>]*>/,O={tr:document.createElement("tbody"),tbody:b,thead:b,tfoot:b,td:I,th:I,"*":document.createElement("div")}}function A(_){b||L();var E=P.test(_)&&RegExp.$1;(!E||!(E in O))&&(E="*");var g=O[E];_=typeof _=="string"?_.replace(/(^\s*)|(\s*$)/g,""):_,g.innerHTML=""+_;var w=g.childNodes[0];return w&&g.contains(w)&&g.removeChild(w),w}},10430:function(Ct,S,p){"use strict";p.d(S,{Z:function(){return I}});var b=p(99911);function I(P,O){var L=(0,b.Z)(P,"height",O);return L==="auto"&&(L=P.offsetHeight),parseFloat(L)}},79189:function(Ct,S,p){"use strict";p.d(S,{Z:function(){return P}});var b=p(99911),I=p(10430);function P(O,L){var A=(0,I.Z)(O,L),_=parseFloat((0,b.Z)(O,"borderTopWidth"))||0,E=parseFloat((0,b.Z)(O,"paddingTop"))||0,g=parseFloat((0,b.Z)(O,"paddingBottom"))||0,w=parseFloat((0,b.Z)(O,"borderBottomWidth"))||0,d=parseFloat((0,b.Z)(O,"marginTop"))||0,y=parseFloat((0,b.Z)(O,"marginBottom"))||0;return A+_+w+E+g+d+y}},89810:function(Ct,S,p){"use strict";p.d(S,{Z:function(){return P}});var b=p(99911),I=p(23408);function P(O,L){var A=(0,I.Z)(O,L),_=parseFloat((0,b.Z)(O,"borderLeftWidth"))||0,E=parseFloat((0,b.Z)(O,"paddingLeft"))||0,g=parseFloat((0,b.Z)(O,"paddingRight"))||0,w=parseFloat((0,b.Z)(O,"borderRightWidth"))||0,d=parseFloat((0,b.Z)(O,"marginRight"))||0,y=parseFloat((0,b.Z)(O,"marginLeft"))||0;return A+_+w+E+g+y+d}},99911:function(Ct,S,p){"use strict";p.d(S,{Z:function(){return b}});function b(I,P,O){var L;try{L=window.getComputedStyle?window.getComputedStyle(I,null)[P]:I.style[P]}catch(A){}finally{L=L===void 0?O:L}return L}},23408:function(Ct,S,p){"use strict";p.d(S,{Z:function(){return I}});var b=p(99911);function I(P,O){var L=(0,b.Z)(P,"width",O);return L==="auto"&&(L=P.offsetWidth),parseFloat(L)}},80478:function(Ct,S,p){"use strict";p.r(S),p.d(S,{addEventListener:function(){return b.Z},createDom:function(){return I.Z},getHeight:function(){return P.Z},getOuterHeight:function(){return O.Z},getOuterWidth:function(){return L.Z},getRatio:function(){return A},getStyle:function(){return _.Z},getWidth:function(){return E.Z},modifyCSS:function(){return g.Z}});var b=p(57817),I=p(6056),P=p(10430),O=p(79189),L=p(89810);function A(){return window.devicePixelRatio?window.devicePixelRatio:2}var _=p(99911),E=p(23408),g=p(45442)},45442:function(Ct,S,p){"use strict";p.d(S,{Z:function(){return b}});function b(I,P){if(I)for(var O in P)P.hasOwnProperty(O)&&(I.style[O]=P[O]);return I}},73136:function(Ct,S){"use strict";var p;p={value:!0};function b(I,P,O){if(I){if(typeof I.addEventListener=="function")return I.addEventListener(P,O,!1),{remove:function(){I.removeEventListener(P,O,!1)}};if(typeof I.attachEvent=="function")return I.attachEvent("on"+P,O),{remove:function(){I.detachEvent("on"+P,O)}}}}S.Z=b},57821:function(Ct,S){"use strict";var p;p={value:!0};var b,I,P,O;function L(){b=document.createElement("table"),I=document.createElement("tr"),P=/^\s*<(\w+|!)[^>]*>/,O={tr:document.createElement("tbody"),tbody:b,thead:b,tfoot:b,td:I,th:I,"*":document.createElement("div")}}function A(_){b||L();var E=P.test(_)&&RegExp.$1;(!E||!(E in O))&&(E="*");var g=O[E];_=typeof _=="string"?_.replace(/(^\s*)|(\s*$)/g,""):_,g.innerHTML=""+_;var w=g.childNodes[0];return w&&g.contains(w)&&g.removeChild(w),w}S.Z=A},1513:function(Ct,S){"use strict";var p;p={value:!0};function b(I,P){if(I)for(var O in P)P.hasOwnProperty(O)&&(I.style[O]=P[O]);return I}S.Z=b},90494:function(Ct,S,p){"use strict";p.r(S);var b="*",I=function(){function P(){this._events={}}return P.prototype.on=function(O,L,A){return this._events[O]||(this._events[O]=[]),this._events[O].push({callback:L,once:!!A}),this},P.prototype.once=function(O,L){return this.on(O,L,!0)},P.prototype.emit=function(O){for(var L=this,A=[],_=1;_<arguments.length;_++)A[_-1]=arguments[_];var E=this._events[O]||[],g=this._events[b]||[],w=function(d){for(var y=d.length,m=0;m<y;m++)if(!!d[m]){var C=d[m],T=C.callback,B=C.once;B&&(d.splice(m,1),d.length===0&&delete L._events[O],y--,m--),T.apply(L,A)}};w(E),w(g)},P.prototype.off=function(O,L){if(!O)this._events={};else if(!L)delete this._events[O];else{for(var A=this._events[O]||[],_=A.length,E=0;E<_;E++)A[E].callback===L&&(A.splice(E,1),_--,E--);A.length===0&&delete this._events[O]}return this},P.prototype.getEvents=function(){return this._events},P}();S.default=I},39014:function(Ct,S,p){"use strict";p.r(S),p.d(S,{AbstractCanvas:function(){return vi},AbstractGroup:function(){return Ii},AbstractShape:function(){return Zn},Base:function(){return Ye},Event:function(){return Vt},PathUtil:function(){return b},version:function(){return ua}});var b={};p.r(b),p.d(b,{catmullRomToBezier:function(){return _},fillPath:function(){return lt},fillPathByDiff:function(){return f},formatPath:function(){return jt},intersection:function(){return Z},parsePathArray:function(){return T},parsePathString:function(){return A},pathToAbsolute:function(){return g},pathToCurve:function(){return m},rectPath:function(){return st}});var I=p(49242),P=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,O=new RegExp("([a-z])["+P+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+P+"]*,?["+P+"]*)+)","ig"),L=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+P+"]*,?["+P+"]*","ig"),A=function(Ft){if(!Ft)return null;if((0,I.isArray)(Ft))return Ft;var At={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},ht=[];return String(Ft).replace(O,function(wt,Xt,it){var mt=[],St=Xt.toLowerCase();if(it.replace(L,function(Pt,Wt){Wt&&mt.push(+Wt)}),St==="m"&&mt.length>2&&(ht.push([Xt].concat(mt.splice(0,2))),St="l",Xt=Xt==="m"?"l":"L"),St==="o"&&mt.length===1&&ht.push([Xt,mt[0]]),St==="r")ht.push([Xt].concat(mt));else for(;mt.length>=At[St]&&(ht.push([Xt].concat(mt.splice(0,At[St]))),!!At[St]););return Ft}),ht},_=function(Ft,At){for(var ht=[],wt=0,Xt=Ft.length;Xt-2*!At>wt;wt+=2){var it=[{x:+Ft[wt-2],y:+Ft[wt-1]},{x:+Ft[wt],y:+Ft[wt+1]},{x:+Ft[wt+2],y:+Ft[wt+3]},{x:+Ft[wt+4],y:+Ft[wt+5]}];At?wt?Xt-4===wt?it[3]={x:+Ft[0],y:+Ft[1]}:Xt-2===wt&&(it[2]={x:+Ft[0],y:+Ft[1]},it[3]={x:+Ft[2],y:+Ft[3]}):it[0]={x:+Ft[Xt-2],y:+Ft[Xt-1]}:Xt-4===wt?it[3]=it[2]:wt||(it[0]={x:+Ft[wt],y:+Ft[wt+1]}),ht.push(["C",(-it[0].x+6*it[1].x+it[2].x)/6,(-it[0].y+6*it[1].y+it[2].y)/6,(it[1].x+6*it[2].x-it[3].x)/6,(it[1].y+6*it[2].y-it[3].y)/6,it[2].x,it[2].y])}return ht},E=function(Ft,At,ht,wt,Xt){var it=[];if(Xt===null&&wt===null&&(wt=ht),Ft=+Ft,At=+At,ht=+ht,wt=+wt,Xt!==null){var mt=Math.PI/180,St=Ft+ht*Math.cos(-wt*mt),Pt=Ft+ht*Math.cos(-Xt*mt),Wt=At+ht*Math.sin(-wt*mt),Jt=At+ht*Math.sin(-Xt*mt);it=[["M",St,Wt],["A",ht,ht,0,+(Xt-wt>180),0,Pt,Jt]]}else it=[["M",Ft,At],["m",0,-wt],["a",ht,wt,0,1,1,0,2*wt],["a",ht,wt,0,1,1,0,-2*wt],["z"]];return it},g=function(Ft){if(Ft=A(Ft),!Ft||!Ft.length)return[["M",0,0]];var At=[],ht=0,wt=0,Xt=0,it=0,mt=0,St,Pt;Ft[0][0]==="M"&&(ht=+Ft[0][1],wt=+Ft[0][2],Xt=ht,it=wt,mt++,At[0]=["M",ht,wt]);for(var Wt=Ft.length===3&&Ft[0][0]==="M"&&Ft[1][0].toUpperCase()==="R"&&Ft[2][0].toUpperCase()==="Z",Jt=void 0,de=void 0,Ee=mt,Fe=Ft.length;Ee<Fe;Ee++){if(At.push(Jt=[]),de=Ft[Ee],St=de[0],St!==St.toUpperCase())switch(Jt[0]=St.toUpperCase(),Jt[0]){case"A":Jt[1]=de[1],Jt[2]=de[2],Jt[3]=de[3],Jt[4]=de[4],Jt[5]=de[5],Jt[6]=+de[6]+ht,Jt[7]=+de[7]+wt;break;case"V":Jt[1]=+de[1]+wt;break;case"H":Jt[1]=+de[1]+ht;break;case"R":Pt=[ht,wt].concat(de.slice(1));for(var me=2,Xe=Pt.length;me<Xe;me++)Pt[me]=+Pt[me]+ht,Pt[++me]=+Pt[me]+wt;At.pop(),At=At.concat(_(Pt,Wt));break;case"O":At.pop(),Pt=E(ht,wt,de[1],de[2]),Pt.push(Pt[0]),At=At.concat(Pt);break;case"U":At.pop(),At=At.concat(E(ht,wt,de[1],de[2],de[3])),Jt=["U"].concat(At[At.length-1].slice(-2));break;case"M":Xt=+de[1]+ht,it=+de[2]+wt;break;default:for(var me=1,Xe=de.length;me<Xe;me++)Jt[me]=+de[me]+(me%2?ht:wt)}else if(St==="R")Pt=[ht,wt].concat(de.slice(1)),At.pop(),At=At.concat(_(Pt,Wt)),Jt=["R"].concat(de.slice(-2));else if(St==="O")At.pop(),Pt=E(ht,wt,de[1],de[2]),Pt.push(Pt[0]),At=At.concat(Pt);else if(St==="U")At.pop(),At=At.concat(E(ht,wt,de[1],de[2],de[3])),Jt=["U"].concat(At[At.length-1].slice(-2));else for(var dr=0,mr=de.length;dr<mr;dr++)Jt[dr]=de[dr];if(St=St.toUpperCase(),St!=="O")switch(Jt[0]){case"Z":ht=+Xt,wt=+it;break;case"H":ht=Jt[1];break;case"V":wt=Jt[1];break;case"M":Xt=Jt[Jt.length-2],it=Jt[Jt.length-1];break;default:ht=Jt[Jt.length-2],wt=Jt[Jt.length-1]}}return At},w=function(Ft,At,ht,wt){return[Ft,At,ht,wt,ht,wt]},d=function(Ft,At,ht,wt,Xt,it){var mt=1/3,St=2/3;return[mt*Ft+St*ht,mt*At+St*wt,mt*Xt+St*ht,mt*it+St*wt,Xt,it]},y=function(Ft,At,ht,wt,Xt,it,mt,St,Pt,Wt){ht===wt&&(ht+=1);var Jt=Math.PI*120/180,de=Math.PI/180*(+Xt||0),Ee=[],Fe,me,Xe,dr,mr,Ar=function(Di,xi,xa){var Wi=Di*Math.cos(xa)-xi*Math.sin(xa),Ra=Di*Math.sin(xa)+xi*Math.cos(xa);return{x:Wi,y:Ra}};if(Wt)me=Wt[0],Xe=Wt[1],dr=Wt[2],mr=Wt[3];else{Fe=Ar(Ft,At,-de),Ft=Fe.x,At=Fe.y,Fe=Ar(St,Pt,-de),St=Fe.x,Pt=Fe.y,Ft===St&&At===Pt&&(St+=1,Pt+=1);var sr=(Ft-St)/2,nr=(At-Pt)/2,Gr=sr*sr/(ht*ht)+nr*nr/(wt*wt);Gr>1&&(Gr=Math.sqrt(Gr),ht=Gr*ht,wt=Gr*wt);var gn=ht*ht,vn=wt*wt,Ln=(it===mt?-1:1)*Math.sqrt(Math.abs((gn*vn-gn*nr*nr-vn*sr*sr)/(gn*nr*nr+vn*sr*sr)));dr=Ln*ht*nr/wt+(Ft+St)/2,mr=Ln*-wt*sr/ht+(At+Pt)/2,me=Math.asin(((At-mr)/wt).toFixed(9)),Xe=Math.asin(((Pt-mr)/wt).toFixed(9)),me=Ft<dr?Math.PI-me:me,Xe=St<dr?Math.PI-Xe:Xe,me<0&&(me=Math.PI*2+me),Xe<0&&(Xe=Math.PI*2+Xe),mt&&me>Xe&&(me=me-Math.PI*2),!mt&&Xe>me&&(Xe=Xe-Math.PI*2)}var qn=Xe-me;if(Math.abs(qn)>Jt){var ki=Xe,li=St,Wn=Pt;Xe=me+Jt*(mt&&Xe>me?1:-1),St=dr+ht*Math.cos(Xe),Pt=mr+wt*Math.sin(Xe),Ee=y(St,Pt,ht,wt,Xt,0,mt,li,Wn,[Xe,ki,dr,mr])}qn=Xe-me;var ti=Math.cos(me),ei=Math.sin(me),Bi=Math.cos(Xe),cn=Math.sin(Xe),Hi=Math.tan(qn/4),ta=4/3*ht*Hi,ui=4/3*wt*Hi,pa=[Ft,At],mi=[Ft+ta*ei,At-ui*ti],ea=[St+ta*cn,Pt-ui*Bi],fa=[St,Pt];if(mi[0]=2*pa[0]-mi[0],mi[1]=2*pa[1]-mi[1],Wt)return[mi,ea,fa].concat(Ee);Ee=[mi,ea,fa].concat(Ee).join().split(",");for(var ha=[],Kn=0,ga=Ee.length;Kn<ga;Kn++)ha[Kn]=Kn%2?Ar(Ee[Kn-1],Ee[Kn],de).y:Ar(Ee[Kn],Ee[Kn+1],de).x;return ha},m=function(Ft,At){var ht=g(Ft),wt=At&&g(At),Xt={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},it={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},mt=[],St=[],Pt="",Wt="",Jt,de=function(sr,nr,Gr){var gn,vn;if(!sr)return["C",nr.x,nr.y,nr.x,nr.y,nr.x,nr.y];switch(!(sr[0]in{T:1,Q:1})&&(nr.qx=nr.qy=null),sr[0]){case"M":nr.X=sr[1],nr.Y=sr[2];break;case"A":sr=["C"].concat(y.apply(0,[nr.x,nr.y].concat(sr.slice(1))));break;case"S":Gr==="C"||Gr==="S"?(gn=nr.x*2-nr.bx,vn=nr.y*2-nr.by):(gn=nr.x,vn=nr.y),sr=["C",gn,vn].concat(sr.slice(1));break;case"T":Gr==="Q"||Gr==="T"?(nr.qx=nr.x*2-nr.qx,nr.qy=nr.y*2-nr.qy):(nr.qx=nr.x,nr.qy=nr.y),sr=["C"].concat(d(nr.x,nr.y,nr.qx,nr.qy,sr[1],sr[2]));break;case"Q":nr.qx=sr[1],nr.qy=sr[2],sr=["C"].concat(d(nr.x,nr.y,sr[1],sr[2],sr[3],sr[4]));break;case"L":sr=["C"].concat(w(nr.x,nr.y,sr[1],sr[2]));break;case"H":sr=["C"].concat(w(nr.x,nr.y,sr[1],nr.y));break;case"V":sr=["C"].concat(w(nr.x,nr.y,nr.x,sr[1]));break;case"Z":sr=["C"].concat(w(nr.x,nr.y,nr.X,nr.Y));break;default:break}return sr},Ee=function(sr,nr){if(sr[nr].length>7){sr[nr].shift();for(var Gr=sr[nr];Gr.length;)mt[nr]="A",wt&&(St[nr]="A"),sr.splice(nr++,0,["C"].concat(Gr.splice(0,6)));sr.splice(nr,1),Jt=Math.max(ht.length,wt&&wt.length||0)}},Fe=function(sr,nr,Gr,gn,vn){sr&&nr&&sr[vn][0]==="M"&&nr[vn][0]!=="M"&&(nr.splice(vn,0,["M",gn.x,gn.y]),Gr.bx=0,Gr.by=0,Gr.x=sr[vn][1],Gr.y=sr[vn][2],Jt=Math.max(ht.length,wt&&wt.length||0))};Jt=Math.max(ht.length,wt&&wt.length||0);for(var me=0;me<Jt;me++){ht[me]&&(Pt=ht[me][0]),Pt!=="C"&&(mt[me]=Pt,me&&(Wt=mt[me-1])),ht[me]=de(ht[me],Xt,Wt),mt[me]!=="A"&&Pt==="C"&&(mt[me]="C"),Ee(ht,me),wt&&(wt[me]&&(Pt=wt[me][0]),Pt!=="C"&&(St[me]=Pt,me&&(Wt=St[me-1])),wt[me]=de(wt[me],it,Wt),St[me]!=="A"&&Pt==="C"&&(St[me]="C"),Ee(wt,me)),Fe(ht,wt,Xt,it,me),Fe(wt,ht,it,Xt,me);var Xe=ht[me],dr=wt&&wt[me],mr=Xe.length,Ar=wt&&dr.length;Xt.x=Xe[mr-2],Xt.y=Xe[mr-1],Xt.bx=parseFloat(Xe[mr-4])||Xt.x,Xt.by=parseFloat(Xe[mr-3])||Xt.y,it.bx=wt&&(parseFloat(dr[Ar-4])||it.x),it.by=wt&&(parseFloat(dr[Ar-3])||it.y),it.x=wt&&dr[Ar-2],it.y=wt&&dr[Ar-1]}return wt?[ht,wt]:ht},C=/,?([a-z]),?/gi,T=function(Ft){return Ft.join(",").replace(C,"$1")},B=function(Ft,At,ht,wt,Xt){var it=-3*At+9*ht-9*wt+3*Xt,mt=Ft*it+6*At-12*ht+6*wt;return Ft*mt-3*At+3*ht},D=function(Ft,At,ht,wt,Xt,it,mt,St,Pt){Pt===null&&(Pt=1),Pt=Pt>1?1:Pt<0?0:Pt;for(var Wt=Pt/2,Jt=12,de=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Ee=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],Fe=0,me=0;me<Jt;me++){var Xe=Wt*de[me]+Wt,dr=B(Xe,Ft,ht,Xt,mt),mr=B(Xe,At,wt,it,St),Ar=dr*dr+mr*mr;Fe+=Ee[me]*Math.sqrt(Ar)}return Wt*Fe},Y=function(Ft,At,ht,wt,Xt,it,mt,St){for(var Pt=[],Wt=[[],[]],Jt,de,Ee,Fe,me=0;me<2;++me){if(me===0?(de=6*Ft-12*ht+6*Xt,Jt=-3*Ft+9*ht-9*Xt+3*mt,Ee=3*ht-3*Ft):(de=6*At-12*wt+6*it,Jt=-3*At+9*wt-9*it+3*St,Ee=3*wt-3*At),Math.abs(Jt)<1e-12){if(Math.abs(de)<1e-12)continue;Fe=-Ee/de,Fe>0&&Fe<1&&Pt.push(Fe);continue}var Xe=de*de-4*Ee*Jt,dr=Math.sqrt(Xe);if(!(Xe<0)){var mr=(-de+dr)/(2*Jt);mr>0&&mr<1&&Pt.push(mr);var Ar=(-de-dr)/(2*Jt);Ar>0&&Ar<1&&Pt.push(Ar)}}for(var sr=Pt.length,nr=sr,Gr;sr--;)Fe=Pt[sr],Gr=1-Fe,Wt[0][sr]=Gr*Gr*Gr*Ft+3*Gr*Gr*Fe*ht+3*Gr*Fe*Fe*Xt+Fe*Fe*Fe*mt,Wt[1][sr]=Gr*Gr*Gr*At+3*Gr*Gr*Fe*wt+3*Gr*Fe*Fe*it+Fe*Fe*Fe*St;return Wt[0][nr]=Ft,Wt[1][nr]=At,Wt[0][nr+1]=mt,Wt[1][nr+1]=St,Wt[0].length=Wt[1].length=nr+2,{min:{x:Math.min.apply(0,Wt[0]),y:Math.min.apply(0,Wt[1])},max:{x:Math.max.apply(0,Wt[0]),y:Math.max.apply(0,Wt[1])}}},K=function(Ft,At,ht,wt,Xt,it,mt,St){if(!(Math.max(Ft,ht)<Math.min(Xt,mt)||Math.min(Ft,ht)>Math.max(Xt,mt)||Math.max(At,wt)<Math.min(it,St)||Math.min(At,wt)>Math.max(it,St))){var Pt=(Ft*wt-At*ht)*(Xt-mt)-(Ft-ht)*(Xt*St-it*mt),Wt=(Ft*wt-At*ht)*(it-St)-(At-wt)*(Xt*St-it*mt),Jt=(Ft-ht)*(it-St)-(At-wt)*(Xt-mt);if(!!Jt){var de=Pt/Jt,Ee=Wt/Jt,Fe=+de.toFixed(2),me=+Ee.toFixed(2);if(!(Fe<+Math.min(Ft,ht).toFixed(2)||Fe>+Math.max(Ft,ht).toFixed(2)||Fe<+Math.min(Xt,mt).toFixed(2)||Fe>+Math.max(Xt,mt).toFixed(2)||me<+Math.min(At,wt).toFixed(2)||me>+Math.max(At,wt).toFixed(2)||me<+Math.min(it,St).toFixed(2)||me>+Math.max(it,St).toFixed(2)))return{x:de,y:Ee}}}},H=function(Ft,At,ht){return At>=Ft.x&&At<=Ft.x+Ft.width&&ht>=Ft.y&&ht<=Ft.y+Ft.height},st=function(Ft,At,ht,wt,Xt){if(Xt)return[["M",+Ft+ +Xt,At],["l",ht-Xt*2,0],["a",Xt,Xt,0,0,1,Xt,Xt],["l",0,wt-Xt*2],["a",Xt,Xt,0,0,1,-Xt,Xt],["l",Xt*2-ht,0],["a",Xt,Xt,0,0,1,-Xt,-Xt],["l",0,Xt*2-wt],["a",Xt,Xt,0,0,1,Xt,-Xt],["z"]];var it=[["M",Ft,At],["l",ht,0],["l",0,wt],["l",-ht,0],["z"]];return it.parsePathArray=T,it},pt=function(Ft,At,ht,wt){return Ft===null&&(Ft=At=ht=wt=0),At===null&&(At=Ft.y,ht=Ft.width,wt=Ft.height,Ft=Ft.x),{x:Ft,y:At,width:ht,w:ht,height:wt,h:wt,x2:Ft+ht,y2:At+wt,cx:Ft+ht/2,cy:At+wt/2,r1:Math.min(ht,wt)/2,r2:Math.max(ht,wt)/2,r0:Math.sqrt(ht*ht+wt*wt)/2,path:st(Ft,At,ht,wt),vb:[Ft,At,ht,wt].join(" ")}},ct=function(Ft,At){return Ft=pt(Ft),At=pt(At),H(At,Ft.x,Ft.y)||H(At,Ft.x2,Ft.y)||H(At,Ft.x,Ft.y2)||H(At,Ft.x2,Ft.y2)||H(Ft,At.x,At.y)||H(Ft,At.x2,At.y)||H(Ft,At.x,At.y2)||H(Ft,At.x2,At.y2)||(Ft.x<At.x2&&Ft.x>At.x||At.x<Ft.x2&&At.x>Ft.x)&&(Ft.y<At.y2&&Ft.y>At.y||At.y<Ft.y2&&At.y>Ft.y)},Ot=function(Ft,At,ht,wt,Xt,it,mt,St){(0,I.isArray)(Ft)||(Ft=[Ft,At,ht,wt,Xt,it,mt,St]);var Pt=Y.apply(null,Ft);return pt(Pt.min.x,Pt.min.y,Pt.max.x-Pt.min.x,Pt.max.y-Pt.min.y)},Rt=function(Ft,At,ht,wt,Xt,it,mt,St,Pt){var Wt=1-Pt,Jt=Math.pow(Wt,3),de=Math.pow(Wt,2),Ee=Pt*Pt,Fe=Ee*Pt,me=Jt*Ft+de*3*Pt*ht+Wt*3*Pt*Pt*Xt+Fe*mt,Xe=Jt*At+de*3*Pt*wt+Wt*3*Pt*Pt*it+Fe*St,dr=Ft+2*Pt*(ht-Ft)+Ee*(Xt-2*ht+Ft),mr=At+2*Pt*(wt-At)+Ee*(it-2*wt+At),Ar=ht+2*Pt*(Xt-ht)+Ee*(mt-2*Xt+ht),sr=wt+2*Pt*(it-wt)+Ee*(St-2*it+wt),nr=Wt*Ft+Pt*ht,Gr=Wt*At+Pt*wt,gn=Wt*Xt+Pt*mt,vn=Wt*it+Pt*St,Ln=90-Math.atan2(dr-Ar,mr-sr)*180/Math.PI;return{x:me,y:Xe,m:{x:dr,y:mr},n:{x:Ar,y:sr},start:{x:nr,y:Gr},end:{x:gn,y:vn},alpha:Ln}},Qt=function(Ft,At,ht){var wt=Ot(Ft),Xt=Ot(At);if(!ct(wt,Xt))return ht?0:[];for(var it=D.apply(0,Ft),mt=D.apply(0,At),St=~~(it/8),Pt=~~(mt/8),Wt=[],Jt=[],de={},Ee=ht?0:[],Fe=0;Fe<St+1;Fe++){var me=Rt.apply(0,Ft.concat(Fe/St));Wt.push({x:me.x,y:me.y,t:Fe/St})}for(var Fe=0;Fe<Pt+1;Fe++){var me=Rt.apply(0,At.concat(Fe/Pt));Jt.push({x:me.x,y:me.y,t:Fe/Pt})}for(var Fe=0;Fe<St;Fe++)for(var Xe=0;Xe<Pt;Xe++){var dr=Wt[Fe],mr=Wt[Fe+1],Ar=Jt[Xe],sr=Jt[Xe+1],nr=Math.abs(mr.x-dr.x)<.001?"y":"x",Gr=Math.abs(sr.x-Ar.x)<.001?"y":"x",gn=K(dr.x,dr.y,mr.x,mr.y,Ar.x,Ar.y,sr.x,sr.y);if(gn){if(de[gn.x.toFixed(4)]===gn.y.toFixed(4))continue;de[gn.x.toFixed(4)]=gn.y.toFixed(4);var vn=dr.t+Math.abs((gn[nr]-dr[nr])/(mr[nr]-dr[nr]))*(mr.t-dr.t),Ln=Ar.t+Math.abs((gn[Gr]-Ar[Gr])/(sr[Gr]-Ar[Gr]))*(sr.t-Ar.t);vn>=0&&vn<=1&&Ln>=0&&Ln<=1&&(ht?Ee+=1:Ee.push({x:gn.x,y:gn.y,t1:vn,t2:Ln}))}}return Ee},Gt=function(Ft,At,ht){Ft=m(Ft),At=m(At);for(var wt,Xt,it,mt,St,Pt,Wt,Jt,de,Ee,Fe=ht?0:[],me=0,Xe=Ft.length;me<Xe;me++){var dr=Ft[me];if(dr[0]==="M")wt=St=dr[1],Xt=Pt=dr[2];else{dr[0]==="C"?(de=[wt,Xt].concat(dr.slice(1)),wt=de[6],Xt=de[7]):(de=[wt,Xt,wt,Xt,St,Pt,St,Pt],wt=St,Xt=Pt);for(var mr=0,Ar=At.length;mr<Ar;mr++){var sr=At[mr];if(sr[0]==="M")it=Wt=sr[1],mt=Jt=sr[2];else{sr[0]==="C"?(Ee=[it,mt].concat(sr.slice(1)),it=Ee[6],mt=Ee[7]):(Ee=[it,mt,it,mt,Wt,Jt,Wt,Jt],it=Wt,mt=Jt);var nr=Qt(de,Ee,ht);if(ht)Fe+=nr;else{for(var Gr=0,gn=nr.length;Gr<gn;Gr++)nr[Gr].segment1=me,nr[Gr].segment2=mr,nr[Gr].bez1=de,nr[Gr].bez2=Ee;Fe=Fe.concat(nr)}}}}}return Fe},Z=function(Ft,At){return Gt(Ft,At)};function nt(Ft,At){var ht=[],wt=[];function Xt(it,mt){if(it.length===1)ht.push(it[0]),wt.push(it[0]);else{for(var St=[],Pt=0;Pt<it.length-1;Pt++)Pt===0&&ht.push(it[0]),Pt===it.length-2&&wt.push(it[Pt+1]),St[Pt]=[(1-mt)*it[Pt][0]+mt*it[Pt+1][0],(1-mt)*it[Pt][1]+mt*it[Pt+1][1]];Xt(St,mt)}}return Ft.length&&Xt(Ft,At),{left:ht,right:wt.reverse()}}function Q(Ft,At,ht){var wt=[[Ft[1],Ft[2]]];ht=ht||2;var Xt=[];At[0]==="A"?(wt.push(At[6]),wt.push(At[7])):At[0]==="C"?(wt.push([At[1],At[2]]),wt.push([At[3],At[4]]),wt.push([At[5],At[6]])):At[0]==="S"||At[0]==="Q"?(wt.push([At[1],At[2]]),wt.push([At[3],At[4]])):wt.push([At[1],At[2]]);for(var it=wt,mt=1/ht,St=0;St<ht-1;St++){var Pt=mt/(1-mt*St),Wt=nt(it,Pt);Xt.push(Wt.left),it=Wt.right}Xt.push(it);var Jt=Xt.map(function(de){var Ee=[];return de.length===4&&(Ee.push("C"),Ee=Ee.concat(de[2])),de.length>=3&&(de.length===3&&Ee.push("Q"),Ee=Ee.concat(de[1])),de.length===2&&Ee.push("L"),Ee=Ee.concat(de[de.length-1]),Ee});return Jt}var dt=function(Ft,At,ht){if(ht===1)return[[].concat(Ft)];var wt=[];if(At[0]==="L"||At[0]==="C"||At[0]==="Q")wt=wt.concat(Q(Ft,At,ht));else{var Xt=[].concat(Ft);Xt[0]==="M"&&(Xt[0]="L");for(var it=0;it<=ht-1;it++)wt.push(Xt)}return wt},lt=function(Ft,At){if(Ft.length===1)return Ft;var ht=Ft.length-1,wt=At.length-1,Xt=ht/wt,it=[];if(Ft.length===1&&Ft[0][0]==="M"){for(var mt=0;mt<wt-ht;mt++)Ft.push(Ft[0]);return Ft}for(var mt=0;mt<wt;mt++){var St=Math.floor(Xt*mt);it[St]=(it[St]||0)+1}var Pt=it.reduce(function(Wt,Jt,de){return de===ht?Wt.concat(Ft[ht]):Wt.concat(dt(Ft[de],Ft[de+1],Jt))},[]);return Pt.unshift(Ft[0]),(At[wt]==="Z"||At[wt]==="z")&&Pt.push("Z"),Pt},z=function(Ft,At){if(Ft.length!==At.length)return!1;var ht=!0;return(0,I.each)(Ft,function(wt,Xt){if(wt!==At[Xt])return ht=!1,!1}),ht};function $(Ft,At,ht){var wt=null,Xt=ht;return At<Xt&&(Xt=At,wt="add"),Ft<Xt&&(Xt=Ft,wt="del"),{type:wt,min:Xt}}var j=function(Ft,At){var ht=Ft.length,wt=At.length,Xt,it,mt=0;if(ht===0||wt===0)return null;for(var St=[],Pt=0;Pt<=ht;Pt++)St[Pt]=[],St[Pt][0]={min:Pt};for(var Wt=0;Wt<=wt;Wt++)St[0][Wt]={min:Wt};for(var Pt=1;Pt<=ht;Pt++){Xt=Ft[Pt-1];for(var Wt=1;Wt<=wt;Wt++){it=At[Wt-1],z(Xt,it)?mt=0:mt=1;var Jt=St[Pt-1][Wt].min+1,de=St[Pt][Wt-1].min+1,Ee=St[Pt-1][Wt-1].min+mt;St[Pt][Wt]=$(Jt,de,Ee)}}return St},f=function(Ft,At){var ht=j(Ft,At),wt=Ft.length,Xt=At.length,it=[],mt=1,St=1;if(ht[wt][Xt].min!==wt){for(var Pt=1;Pt<=wt;Pt++){var Wt=ht[Pt][Pt].min;St=Pt;for(var Jt=mt;Jt<=Xt;Jt++)ht[Pt][Jt].min<Wt&&(Wt=ht[Pt][Jt].min,St=Jt);mt=St,ht[Pt][mt].type&&it.push({index:Pt-1,type:ht[Pt][mt].type})}for(var Pt=it.length-1;Pt>=0;Pt--)mt=it[Pt].index,it[Pt].type==="add"?Ft.splice(mt,0,[].concat(Ft[mt])):Ft.splice(mt,1)}wt=Ft.length;var de=Xt-wt;if(wt<Xt)for(var Pt=0;Pt<de;Pt++)Ft[wt-1][0]==="z"||Ft[wt-1][0]==="Z"?Ft.splice(wt-2,0,Ft[wt-2]):Ft.push(Ft[wt-1]),wt+=1;return Ft};function yt(Ft,At,ht){for(var wt=[].concat(Ft),Xt,it=1/(ht+1),mt=_t(At)[0],St=1;St<=ht;St++)it*=St,Xt=Math.floor(Ft.length*it),Xt===0?wt.unshift([mt[0]*it+Ft[Xt][0]*(1-it),mt[1]*it+Ft[Xt][1]*(1-it)]):wt.splice(Xt,0,[mt[0]*it+Ft[Xt][0]*(1-it),mt[1]*it+Ft[Xt][1]*(1-it)]);return wt}function _t(Ft){var At=[];switch(Ft[0]){case"M":At.push([Ft[1],Ft[2]]);break;case"L":At.push([Ft[1],Ft[2]]);break;case"A":At.push([Ft[6],Ft[7]]);break;case"Q":At.push([Ft[3],Ft[4]]),At.push([Ft[1],Ft[2]]);break;case"T":At.push([Ft[1],Ft[2]]);break;case"C":At.push([Ft[5],Ft[6]]),At.push([Ft[1],Ft[2]]),At.push([Ft[3],Ft[4]]);break;case"S":At.push([Ft[3],Ft[4]]),At.push([Ft[1],Ft[2]]);break;case"H":At.push([Ft[1],Ft[1]]);break;case"V":At.push([Ft[1],Ft[1]]);break;default:}return At}var jt=function(Ft,At){if(Ft.length<=1)return Ft;for(var ht,wt=0;wt<At.length;wt++)if(Ft[wt][0]!==At[wt][0])switch(ht=_t(Ft[wt]),At[wt][0]){case"M":Ft[wt]=["M"].concat(ht[0]);break;case"L":Ft[wt]=["L"].concat(ht[0]);break;case"A":Ft[wt]=[].concat(At[wt]),Ft[wt][6]=ht[0][0],Ft[wt][7]=ht[0][1];break;case"Q":if(ht.length<2)if(wt>0)ht=yt(ht,Ft[wt-1],1);else{Ft[wt]=At[wt];break}Ft[wt]=["Q"].concat(ht.reduce(function(Xt,it){return Xt.concat(it)},[]));break;case"T":Ft[wt]=["T"].concat(ht[0]);break;case"C":if(ht.length<3)if(wt>0)ht=yt(ht,Ft[wt-1],2);else{Ft[wt]=At[wt];break}Ft[wt]=["C"].concat(ht.reduce(function(Xt,it){return Xt.concat(it)},[]));break;case"S":if(ht.length<2)if(wt>0)ht=yt(ht,Ft[wt-1],1);else{Ft[wt]=At[wt];break}Ft[wt]=["S"].concat(ht.reduce(function(Xt,it){return Xt.concat(it)},[]));break;default:Ft[wt]=At[wt]}return Ft},qt=function(){function Ft(At,ht){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=At,this.name=At,this.originalEvent=ht,this.timeStamp=ht.timeStamp}return Ft.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},Ft.prototype.stopPropagation=function(){this.propagationStopped=!0},Ft.prototype.toString=function(){var At=this.type;return"[Event (type="+At+")]"},Ft.prototype.save=function(){},Ft.prototype.restore=function(){},Ft}(),Vt=qt,re=p(60153),ae=p(90494),Nt=p(73890),Lt=p(46812),bt=p(21830),at=p(33643),rt=p(66631),vt=p(66974),tt=p(27154),q=p(85260);function Et(Ft,At){var ht=Ft.indexOf(At);ht!==-1&&Ft.splice(ht,1)}var It=typeof window!="undefined"&&typeof window.document!="undefined";function Kt(Ft,At){if(Ft.isCanvas())return!0;for(var ht=At.getParent(),wt=!1;ht;){if(ht===Ft){wt=!0;break}ht=ht.getParent()}return wt}function ue(Ft){return Ft.cfg.visible&&Ft.cfg.capture}var we=function(Ft){(0,re.__extends)(At,Ft);function At(ht){var wt=Ft.call(this)||this;wt.destroyed=!1;var Xt=wt.getDefaultCfg();return wt.cfg=(0,vt.default)(Xt,ht),wt}return At.prototype.getDefaultCfg=function(){return{}},At.prototype.get=function(ht){return this.cfg[ht]},At.prototype.set=function(ht,wt){this.cfg[ht]=wt},At.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},At}(ae.default),Ye=we,te=p(43631),pe=p(31506);function Te(Ft,At){var ht=[],wt=Ft[0],Xt=Ft[1],it=Ft[2],mt=Ft[3],St=Ft[4],Pt=Ft[5],Wt=Ft[6],Jt=Ft[7],de=Ft[8],Ee=At[0],Fe=At[1],me=At[2],Xe=At[3],dr=At[4],mr=At[5],Ar=At[6],sr=At[7],nr=At[8];return ht[0]=Ee*wt+Fe*mt+me*Wt,ht[1]=Ee*Xt+Fe*St+me*Jt,ht[2]=Ee*it+Fe*Pt+me*de,ht[3]=Xe*wt+dr*mt+mr*Wt,ht[4]=Xe*Xt+dr*St+mr*Jt,ht[5]=Xe*it+dr*Pt+mr*de,ht[6]=Ar*wt+sr*mt+nr*Wt,ht[7]=Ar*Xt+sr*St+nr*Jt,ht[8]=Ar*it+sr*Pt+nr*de,ht}function ze(Ft,At){var ht=[],wt=At[0],Xt=At[1];return ht[0]=Ft[0]*wt+Ft[3]*Xt+Ft[6],ht[1]=Ft[1]*wt+Ft[4]*Xt+Ft[7],ht}function ur(Ft){var At=[],ht=Ft[0],wt=Ft[1],Xt=Ft[2],it=Ft[3],mt=Ft[4],St=Ft[5],Pt=Ft[6],Wt=Ft[7],Jt=Ft[8],de=Jt*mt-St*Wt,Ee=-Jt*it+St*Pt,Fe=Wt*it-mt*Pt,me=ht*de+wt*Ee+Xt*Fe;return me?(me=1/me,At[0]=de*me,At[1]=(-Jt*wt+Xt*Wt)*me,At[2]=(St*wt-Xt*mt)*me,At[3]=Ee*me,At[4]=(Jt*ht-Xt*Pt)*me,At[5]=(-St*ht+Xt*it)*me,At[6]=Fe*me,At[7]=(-Wt*ht+wt*Pt)*me,At[8]=(mt*ht-wt*it)*me,At):null}var Ze="matrix",pr=["zIndex","capture","visible","type"],Pr=["repeat"],Or=":",nn="*";function kn(Ft){for(var At=[],ht=0;ht<Ft.length;ht++)(0,I.isArray)(Ft[ht])?At.push([].concat(Ft[ht])):At.push(Ft[ht]);return At}function ii(Ft,At){var ht={},wt=At.attrs;for(var Xt in Ft)ht[Xt]=wt[Xt];return ht}function gi(Ft,At){var ht={},wt=At.attr();return(0,I.each)(Ft,function(Xt,it){Pr.indexOf(it)===-1&&!(0,I.isEqual)(wt[it],Xt)&&(ht[it]=Xt)}),ht}function Si(Ft,At){if(At.onFrame)return Ft;var ht=At.startTime,wt=At.delay,Xt=At.duration,it=Object.prototype.hasOwnProperty;return(0,I.each)(Ft,function(mt){ht+wt<mt.startTime+mt.delay+mt.duration&&Xt>mt.delay&&(0,I.each)(At.toAttrs,function(St,Pt){it.call(mt.toAttrs,Pt)&&(delete mt.toAttrs[Pt],delete mt.fromAttrs[Pt])})}),Ft}var Zt=function(Ft){(0,re.__extends)(At,Ft);function At(ht){var wt=Ft.call(this,ht)||this;wt.attrs={};var Xt=wt.getDefaultAttrs();return(0,I.mix)(Xt,ht.attrs),wt.attrs=Xt,wt.initAttrs(Xt),wt.initAnimate(),wt}return At.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},At.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},At.prototype.onCanvasChange=function(ht){},At.prototype.initAttrs=function(ht){},At.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},At.prototype.isGroup=function(){return!1},At.prototype.getParent=function(){return this.get("parent")},At.prototype.getCanvas=function(){return this.get("canvas")},At.prototype.attr=function(){for(var ht,wt=[],Xt=0;Xt<arguments.length;Xt++)wt[Xt]=arguments[Xt];var it=wt[0],mt=wt[1];if(!it)return this.attrs;if((0,I.isObject)(it)){for(var St in it)this.setAttr(St,it[St]);return this.afterAttrsChange(it),this}return wt.length===2?(this.setAttr(it,mt),this.afterAttrsChange((ht={},ht[it]=mt,ht)),this):this.attrs[it]},At.prototype.isClipped=function(ht,wt){var Xt=this.getClip();return Xt&&!Xt.isHit(ht,wt)},At.prototype.setAttr=function(ht,wt){var Xt=this.attrs[ht];Xt!==wt&&(this.attrs[ht]=wt,this.onAttrChange(ht,wt,Xt))},At.prototype.onAttrChange=function(ht,wt,Xt){ht==="matrix"&&this.set("totalMatrix",null)},At.prototype.afterAttrsChange=function(ht){this.onCanvasChange("attr")},At.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},At.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},At.prototype.setZIndex=function(ht){this.set("zIndex",ht);var wt=this.getParent();return wt&&wt.sort(),this},At.prototype.toFront=function(){var ht=this.getParent();if(!!ht){var wt=ht.getChildren(),Xt=this.get("el"),it=wt.indexOf(this);wt.splice(it,1),wt.push(this),this.onCanvasChange("zIndex")}},At.prototype.toBack=function(){var ht=this.getParent();if(!!ht){var wt=ht.getChildren(),Xt=this.get("el"),it=wt.indexOf(this);wt.splice(it,1),wt.unshift(this),this.onCanvasChange("zIndex")}},At.prototype.remove=function(ht){ht===void 0&&(ht=!0);var wt=this.getParent();wt?(Et(wt.getChildren(),this),wt.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),ht&&this.destroy()},At.prototype.resetMatrix=function(){this.attr(Ze,this.getDefaultMatrix()),this.onCanvasChange("matrix")},At.prototype.getMatrix=function(){return this.attr(Ze)},At.prototype.setMatrix=function(ht){this.attr(Ze,ht),this.onCanvasChange("matrix")},At.prototype.getTotalMatrix=function(){var ht=this.get("totalMatrix");if(!ht){var wt=this.attr("matrix"),Xt=this.get("parentMatrix");Xt&&wt?ht=Te(Xt,wt):ht=wt||Xt,this.set("totalMatrix",ht)}return ht},At.prototype.applyMatrix=function(ht){var wt=this.attr("matrix"),Xt=null;ht&&wt?Xt=Te(ht,wt):Xt=wt||ht,this.set("totalMatrix",Xt),this.set("parentMatrix",ht)},At.prototype.getDefaultMatrix=function(){return null},At.prototype.applyToMatrix=function(ht){var wt=this.attr("matrix");return wt?ze(wt,ht):ht},At.prototype.invertFromMatrix=function(ht){var wt=this.attr("matrix");if(wt){var Xt=ur(wt);if(Xt)return ze(Xt,ht)}return ht},At.prototype.setClip=function(ht){var wt=this.getCanvas(),Xt=null;if(ht){var it=this.getShapeBase(),mt=(0,I.upperFirst)(ht.type),St=it[mt];St&&(Xt=new St({type:ht.type,isClipShape:!0,attrs:ht.attrs,canvas:wt}))}return this.set("clipShape",Xt),this.onCanvasChange("clip"),Xt},At.prototype.getClip=function(){var ht=this.cfg.clipShape;return ht||null},At.prototype.clone=function(){var ht=this,wt=this.attrs,Xt={};(0,I.each)(wt,function(St,Pt){(0,I.isArray)(wt[Pt])?Xt[Pt]=kn(wt[Pt]):Xt[Pt]=wt[Pt]});var it=this.constructor,mt=new it({attrs:Xt});return(0,I.each)(pr,function(St){mt.set(St,ht.get(St))}),mt},At.prototype.destroy=function(){var ht=this.destroyed;ht||(this.attrs={},Ft.prototype.destroy.call(this))},At.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},At.prototype.animate=function(){for(var ht=[],wt=0;wt<arguments.length;wt++)ht[wt]=arguments[wt];this.set("animating",!0);var Xt=this.get("timeline");Xt||(Xt=this.get("canvas").get("timeline"),this.set("timeline",Xt));var it=this.get("animations")||[];Xt.timer||Xt.initTimer();var mt=ht[0],St=ht[1],Pt=ht[2],Wt=Pt===void 0?"easeLinear":Pt,Jt=ht[3],de=Jt===void 0?I.noop:Jt,Ee=ht[4],Fe=Ee===void 0?0:Ee,me,Xe,dr,mr,Ar;(0,I.isFunction)(mt)?(me=mt,mt={}):(0,I.isObject)(mt)&&mt.onFrame&&(me=mt.onFrame,Xe=mt.repeat),(0,I.isObject)(St)?(Ar=St,St=Ar.duration,Wt=Ar.easing||"easeLinear",Fe=Ar.delay||0,Xe=Ar.repeat||Xe||!1,de=Ar.callback||I.noop,dr=Ar.pauseCallback||I.noop,mr=Ar.resumeCallback||I.noop):((0,I.isNumber)(de)&&(Fe=de,de=null),(0,I.isFunction)(Wt)?(de=Wt,Wt="easeLinear"):Wt=Wt||"easeLinear");var sr=gi(mt,this),nr={fromAttrs:ii(sr,this),toAttrs:sr,duration:St,easing:Wt,repeat:Xe,callback:de,pauseCallback:dr,resumeCallback:mr,delay:Fe,startTime:Xt.getTime(),id:(0,I.uniqueId)(),onFrame:me,pathFormatted:!1};it.length>0?it=Si(it,nr):Xt.addAnimator(this),it.push(nr),this.set("animations",it),this.set("_pause",{isPaused:!1})},At.prototype.stopAnimate=function(ht){var wt=this;ht===void 0&&(ht=!0);var Xt=this.get("animations");(0,I.each)(Xt,function(it){ht&&(it.onFrame?wt.attr(it.onFrame(1)):wt.attr(it.toAttrs)),it.callback&&it.callback()}),this.set("animating",!1),this.set("animations",[])},At.prototype.pauseAnimate=function(){var ht=this.get("timeline"),wt=this.get("animations"),Xt=ht.getTime();return(0,I.each)(wt,function(it){it._paused=!0,it._pauseTime=Xt,it.pauseCallback&&it.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:Xt}),this},At.prototype.resumeAnimate=function(){var ht=this.get("timeline"),wt=ht.getTime(),Xt=this.get("animations"),it=this.get("_pause").pauseTime;return(0,I.each)(Xt,function(mt){mt.startTime=mt.startTime+(wt-it),mt._paused=!1,mt._pauseTime=null,mt.resumeCallback&&mt.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",Xt),this},At.prototype.emitDelegation=function(ht,wt){var Xt=this,it=wt.propagationPath,mt=this.getEvents(),St;ht==="mouseenter"?St=wt.fromShape:ht==="mouseleave"&&(St=wt.toShape);for(var Pt=function(Ee){var Fe=it[Ee],me=Fe.get("name");if(me){if((Fe.isGroup()||Fe.isCanvas&&Fe.isCanvas())&&St&&Kt(Fe,St))return"break";(0,I.isArray)(me)?(0,I.each)(me,function(Xe){Xt.emitDelegateEvent(Fe,Xe,wt)}):Wt.emitDelegateEvent(Fe,me,wt)}},Wt=this,Jt=0;Jt<it.length;Jt++){var de=Pt(Jt);if(de==="break")break}},At.prototype.emitDelegateEvent=function(ht,wt,Xt){var it=this.getEvents(),mt=wt+Or+Xt.type;(it[mt]||it[nn])&&(Xt.name=mt,Xt.currentTarget=ht,Xt.delegateTarget=this,Xt.delegateObject=ht.get("delegateObject"),this.emit(mt,Xt))},At.prototype.translate=function(ht,wt){ht===void 0&&(ht=0),wt===void 0&&(wt=0);var Xt=this.getMatrix(),it=pe.transform(Xt,[["t",ht,wt]]);return this.setMatrix(it),this},At.prototype.move=function(ht,wt){var Xt=this.attr("x")||0,it=this.attr("y")||0;return this.translate(ht-Xt,wt-it),this},At.prototype.moveTo=function(ht,wt){return this.move(ht,wt)},At.prototype.scale=function(ht,wt){var Xt=this.getMatrix(),it=pe.transform(Xt,[["s",ht,wt||ht]]);return this.setMatrix(it),this},At.prototype.rotate=function(ht){var wt=this.getMatrix(),Xt=pe.transform(wt,[["r",ht]]);return this.setMatrix(Xt),this},At.prototype.rotateAtStart=function(ht){var wt=this.attr(),Xt=wt.x,it=wt.y,mt=this.getMatrix(),St=pe.transform(mt,[["t",-Xt,-it],["r",ht],["t",Xt,it]]);return this.setMatrix(St),this},At.prototype.rotateAtPoint=function(ht,wt,Xt){var it=this.getMatrix(),mt=pe.transform(it,[["t",-ht,-wt],["r",Xt],["t",ht,wt]]);return this.setMatrix(mt),this},At}(Ye),ne=Zt,ve={},ge="_INDEX";function Ae(Ft){Ft.isGroup()?(Ft.isEntityGroup()||Ft.get("children").length)&&Ft.onCanvasChange("add"):Ft.onCanvasChange("add")}function Pe(Ft,At){if(Ft.set("canvas",At),Ft.isGroup()){var ht=Ft.get("children");ht.length&&ht.forEach(function(wt){Pe(wt,At)})}}function Ie(Ft,At){if(Ft.set("timeline",At),Ft.isGroup()){var ht=Ft.get("children");ht.length&&ht.forEach(function(wt){Ie(wt,At)})}}function De(Ft,At){var ht=Ft.getChildren();return ht.indexOf(At)>=0}function Ce(Ft,At,ht){ht===void 0&&(ht=!0),ht?At.destroy():(At.set("parent",null),At.set("canvas",null)),Et(Ft.getChildren(),At)}function er(Ft){return function(At,ht){var wt=Ft(At,ht);return wt===0?At[ge]-ht[ge]:wt}}var je=function(Ft){(0,re.__extends)(At,Ft);function At(){return Ft!==null&&Ft.apply(this,arguments)||this}return At.prototype.isCanvas=function(){return!1},At.prototype.getBBox=function(){var ht=Infinity,wt=-Infinity,Xt=Infinity,it=-Infinity,mt=[],St=[],Pt=this.getChildren().filter(function(Jt){return Jt.get("visible")&&(!Jt.isGroup()||Jt.isGroup()&&Jt.getChildren().length>0)});Pt.length>0?((0,tt.default)(Pt,function(Jt){var de=Jt.getBBox();mt.push(de.minX,de.maxX),St.push(de.minY,de.maxY)}),ht=Math.min.apply(null,mt),wt=Math.max.apply(null,mt),Xt=Math.min.apply(null,St),it=Math.max.apply(null,St)):(ht=0,wt=0,Xt=0,it=0);var Wt={x:ht,y:Xt,minX:ht,minY:Xt,maxX:wt,maxY:it,width:wt-ht,height:it-Xt};return Wt},At.prototype.getCanvasBBox=function(){var ht=Infinity,wt=-Infinity,Xt=Infinity,it=-Infinity,mt=[],St=[],Pt=this.getChildren().filter(function(Jt){return Jt.get("visible")&&(!Jt.isGroup()||Jt.isGroup()&&Jt.getChildren().length>0)});Pt.length>0?((0,tt.default)(Pt,function(Jt){var de=Jt.getCanvasBBox();mt.push(de.minX,de.maxX),St.push(de.minY,de.maxY)}),ht=Math.min.apply(null,mt),wt=Math.max.apply(null,mt),Xt=Math.min.apply(null,St),it=Math.max.apply(null,St)):(ht=0,wt=0,Xt=0,it=0);var Wt={x:ht,y:Xt,minX:ht,minY:Xt,maxX:wt,maxY:it,width:wt-ht,height:it-Xt};return Wt},At.prototype.getDefaultCfg=function(){var ht=Ft.prototype.getDefaultCfg.call(this);return ht.children=[],ht},At.prototype.onAttrChange=function(ht,wt,Xt){if(Ft.prototype.onAttrChange.call(this,ht,wt,Xt),ht==="matrix"){var it=this.getTotalMatrix();this._applyChildrenMarix(it)}},At.prototype.applyMatrix=function(ht){var wt=this.getTotalMatrix();Ft.prototype.applyMatrix.call(this,ht);var Xt=this.getTotalMatrix();Xt!==wt&&this._applyChildrenMarix(Xt)},At.prototype._applyChildrenMarix=function(ht){var wt=this.getChildren();(0,tt.default)(wt,function(Xt){Xt.applyMatrix(ht)})},At.prototype.addShape=function(){for(var ht=[],wt=0;wt<arguments.length;wt++)ht[wt]=arguments[wt];var Xt=ht[0],it=ht[1];(0,at.default)(Xt)?it=Xt:it.type=Xt;var mt=ve[it.type];mt||(mt=(0,q.default)(it.type),ve[it.type]=mt);var St=this.getShapeBase(),Pt=new St[mt](it);return this.add(Pt),Pt},At.prototype.addGroup=function(){for(var ht=[],wt=0;wt<arguments.length;wt++)ht[wt]=arguments[wt];var Xt=ht[0],it=ht[1],mt;if((0,Lt.default)(Xt))it?mt=new Xt(it):mt=new Xt({parent:this});else{var St=Xt||{},Pt=this.getGroupBase();mt=new Pt(St)}return this.add(mt),mt},At.prototype.getCanvas=function(){var ht;return this.isCanvas()?ht=this:ht=this.get("canvas"),ht},At.prototype.getShape=function(ht,wt,Xt){if(!ue(this))return null;var it=this.getChildren(),mt;if(this.isCanvas())mt=this._findShape(it,ht,wt,Xt);else{var St=[ht,wt,1];St=this.invertFromMatrix(St),this.isClipped(St[0],St[1])||(mt=this._findShape(it,St[0],St[1],Xt))}return mt},At.prototype._findShape=function(ht,wt,Xt,it){for(var mt=null,St=ht.length-1;St>=0;St--){var Pt=ht[St];if(ue(Pt)&&(Pt.isGroup()?mt=Pt.getShape(wt,Xt,it):Pt.isHit(wt,Xt)&&(mt=Pt)),mt)break}return mt},At.prototype.add=function(ht){var wt=this.getCanvas(),Xt=this.getChildren(),it=this.get("timeline"),mt=ht.getParent();mt&&Ce(mt,ht,!1),ht.set("parent",this),wt&&Pe(ht,wt),it&&Ie(ht,it),Xt.push(ht),Ae(ht),this._applyElementMatrix(ht)},At.prototype._applyElementMatrix=function(ht){var wt=this.getTotalMatrix();wt&&ht.applyMatrix(wt)},At.prototype.getChildren=function(){return this.get("children")},At.prototype.sort=function(){var ht=this.getChildren();(0,tt.default)(ht,function(wt,Xt){return wt[ge]=Xt,wt}),ht.sort(er(function(wt,Xt){return wt.get("zIndex")-Xt.get("zIndex")})),this.onCanvasChange("sort")},At.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var ht=this.getChildren(),wt=ht.length-1;wt>=0;wt--)ht[wt].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},At.prototype.destroy=function(){this.get("destroyed")||(this.clear(),Ft.prototype.destroy.call(this))},At.prototype.getFirst=function(){return this.getChildByIndex(0)},At.prototype.getLast=function(){var ht=this.getChildren();return this.getChildByIndex(ht.length-1)},At.prototype.getChildByIndex=function(ht){var wt=this.getChildren();return wt[ht]},At.prototype.getCount=function(){var ht=this.getChildren();return ht.length},At.prototype.contain=function(ht){var wt=this.getChildren();return wt.indexOf(ht)>-1},At.prototype.removeChild=function(ht,wt){wt===void 0&&(wt=!0),this.contain(ht)&&ht.remove(wt)},At.prototype.findAll=function(ht){var wt=[],Xt=this.getChildren();return(0,tt.default)(Xt,function(it){ht(it)&&wt.push(it),it.isGroup()&&(wt=wt.concat(it.findAll(ht)))}),wt},At.prototype.find=function(ht){var wt=null,Xt=this.getChildren();return(0,tt.default)(Xt,function(it){if(ht(it)?wt=it:it.isGroup()&&(wt=it.find(ht)),wt)return!1}),wt},At.prototype.findById=function(ht){return this.find(function(wt){return wt.get("id")===ht})},At.prototype.findByClassName=function(ht){return this.find(function(wt){return wt.get("className")===ht})},At.prototype.findAllByName=function(ht){return this.findAll(function(wt){return wt.get("name")===ht})},At}(ne),fr=je,Sr=p(35374),hr=p(13681),gr=p(42800),vr=p(88122),Cr=function(Ft){return["fill","stroke","fillStyle","strokeStyle"].includes(Ft)},or=function(Ft){return/^[r,R,L,l]{1}[\s]*\(/.test(Ft)},Ir=[1,0,0,0,1,0,0,0,1];function Wr(Ft,At,ht){var wt={},Xt=At.fromAttrs,it=At.toAttrs;if(!Ft.destroyed){var mt;for(var St in it)if(!(0,I.isEqual)(Xt[St],it[St]))if(St==="path"){var Pt=it[St],Wt=Xt[St];Pt.length>Wt.length?(Pt=A(it[St]),Wt=A(Xt[St]),Wt=f(Wt,Pt),Wt=jt(Wt,Pt),At.fromAttrs.path=Wt,At.toAttrs.path=Pt):At.pathFormatted||(Pt=A(it[St]),Wt=A(Xt[St]),Wt=jt(Wt,Pt),At.fromAttrs.path=Wt,At.toAttrs.path=Pt,At.pathFormatted=!0),wt[St]=[];for(var Jt=0;Jt<Pt.length;Jt++){for(var de=Pt[Jt],Ee=Wt[Jt],Fe=[],me=0;me<de.length;me++)(0,I.isNumber)(de[me])&&Ee&&(0,I.isNumber)(Ee[me])?(mt=(0,gr.Z)(Ee[me],de[me]),Fe.push(mt(ht))):Fe.push(de[me]);wt[St].push(Fe)}}else if(St==="matrix"){var Xe=(0,vr.Z)(Xt[St]||Ir,it[St]||Ir),dr=Xe(ht);wt[St]=dr}else Cr(St)&&or(it[St])?wt[St]=it[St]:(0,I.isFunction)(it[St])||(mt=(0,gr.Z)(Xt[St],it[St]),wt[St]=mt(ht));Ft.attr(wt)}}function Nr(Ft,At,ht){var wt=At.startTime,Xt=At.delay;if(ht<wt+Xt||At._paused)return!1;var it,mt=At.duration,St=At.easing;if(ht=ht-wt-At.delay,At.repeat)it=ht%mt/mt,it=hr[St](it);else if(it=ht/mt,it<1)it=hr[St](it);else return At.onFrame?Ft.attr(At.onFrame(1)):Ft.attr(At.toAttrs),!0;if(At.onFrame){var Pt=At.onFrame(it);Ft.attr(Pt)}else Wr(Ft,At,it);return!1}var jr=function(){function Ft(At){this.animators=[],this.current=0,this.timer=null,this.canvas=At}return Ft.prototype.initTimer=function(){var At=this,ht=!1,wt,Xt,it;this.timer=Sr.HT(function(mt){if(At.current=mt,At.animators.length>0){for(var St=At.animators.length-1;St>=0;St--){if(wt=At.animators[St],wt.destroyed){At.removeAnimator(St);continue}if(!wt.isAnimatePaused()){Xt=wt.get("animations");for(var Pt=Xt.length-1;Pt>=0;Pt--)it=Xt[Pt],ht=Nr(wt,it,mt),ht&&(Xt.splice(Pt,1),ht=!1,it.callback&&it.callback())}Xt.length===0&&At.removeAnimator(St)}var Wt=At.canvas.get("autoDraw");Wt||At.canvas.draw()}})},Ft.prototype.addAnimator=function(At){this.animators.push(At)},Ft.prototype.removeAnimator=function(At){this.animators.splice(At,1)},Ft.prototype.isAnimating=function(){return!!this.animators.length},Ft.prototype.stop=function(){this.timer&&this.timer.stop()},Ft.prototype.stopAllAnimations=function(At){At===void 0&&(At=!0),this.animators.forEach(function(ht){ht.stopAnimate(At)}),this.animators=[],this.canvas.draw()},Ft.prototype.getTime=function(){return this.current},Ft}(),Qr=jr,Zr=40,Bn=0,hn=":",Hn=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function yi(Ft,At){for(var ht in Ft)if(Ft.hasOwnProperty(ht)&&ht.indexOf(hn+At)>=0)return!0;return!1}function Jn(Ft,At,ht){ht.name=At,ht.target=Ft,ht.currentTarget=Ft,ht.delegateTarget=Ft,Ft.emit(At,ht)}function Ci(Ft,At,ht){if(ht.bubbles){var wt=void 0,Xt=!1;if(At==="mouseenter"?(wt=ht.fromShape,Xt=!0):At==="mouseleave"&&(Xt=!0,wt=ht.toShape),Ft.isCanvas()&&Xt)return;if(wt&&Kt(Ft,wt)){ht.bubbles=!1;return}ht.name=At,ht.currentTarget=Ft,ht.delegateTarget=Ft,Ft.emit(At,ht)}}var Mi=function(){function Ft(At){var ht=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(wt){var Xt=wt.type;ht._triggerEvent(Xt,wt)},this._onDocumentMove=function(wt){var Xt=ht.canvas,it=Xt.get("el");if(it!==wt.target&&(ht.dragging||ht.currentShape)){var mt=ht._getPointInfo(wt);ht.dragging&&ht._emitEvent("drag",wt,mt,ht.draggingShape)}},this._onDocumentMouseUp=function(wt){var Xt=ht.canvas,it=Xt.get("el");if(it!==wt.target&&ht.dragging){var mt=ht._getPointInfo(wt);ht.draggingShape&&ht._emitEvent("drop",wt,mt,null),ht._emitEvent("dragend",wt,mt,ht.draggingShape),ht._afterDrag(ht.draggingShape,mt,wt)}},this.canvas=At.canvas}return Ft.prototype.init=function(){this._bindEvents()},Ft.prototype._bindEvents=function(){var At=this,ht=this.canvas.get("el");(0,tt.default)(Hn,function(wt){ht.addEventListener(wt,At._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},Ft.prototype._clearEvents=function(){var At=this,ht=this.canvas.get("el");(0,tt.default)(Hn,function(wt){ht.removeEventListener(wt,At._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},Ft.prototype._getEventObj=function(At,ht,wt,Xt,it,mt){var St=new Vt(At,ht);return St.fromShape=it,St.toShape=mt,St.x=wt.x,St.y=wt.y,St.clientX=wt.clientX,St.clientY=wt.clientY,St.propagationPath.push(Xt),St},Ft.prototype._getShape=function(At,ht){return this.canvas.getShape(At.x,At.y,ht)},Ft.prototype._getPointInfo=function(At){var ht=this.canvas,wt=ht.getClientByEvent(At),Xt=ht.getPointByEvent(At);return{x:Xt.x,y:Xt.y,clientX:wt.x,clientY:wt.y}},Ft.prototype._triggerEvent=function(At,ht){var wt=this._getPointInfo(ht),Xt=this._getShape(wt,ht),it=this["_on"+At],mt=!1;if(it)it.call(this,wt,Xt,ht);else{var St=this.currentShape;At==="mouseenter"||At==="dragenter"||At==="mouseover"?(this._emitEvent(At,ht,wt,null,null,Xt),Xt&&this._emitEvent(At,ht,wt,Xt,null,Xt),At==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",ht,wt,null)):At==="mouseleave"||At==="dragleave"||At==="mouseout"?(mt=!0,St&&this._emitEvent(At,ht,wt,St,St,null),this._emitEvent(At,ht,wt,null,St,null),At==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",ht,wt,null)):this._emitEvent(At,ht,wt,Xt,null,null)}if(mt||(this.currentShape=Xt),Xt&&!Xt.get("destroyed")){var Pt=this.canvas,Wt=Pt.get("el");Wt.style.cursor=Xt.attr("cursor")||Pt.get("cursor")}},Ft.prototype._onmousedown=function(At,ht,wt){wt.button===Bn&&(this.mousedownShape=ht,this.mousedownPoint=At,this.mousedownTimeStamp=wt.timeStamp),this._emitEvent("mousedown",wt,At,ht,null,null)},Ft.prototype._emitMouseoverEvents=function(At,ht,wt,Xt){var it=this.canvas.get("el");wt!==Xt&&(wt&&(this._emitEvent("mouseout",At,ht,wt,wt,Xt),this._emitEvent("mouseleave",At,ht,wt,wt,Xt),(!Xt||Xt.get("destroyed"))&&(it.style.cursor=this.canvas.get("cursor"))),Xt&&(this._emitEvent("mouseover",At,ht,Xt,wt,Xt),this._emitEvent("mouseenter",At,ht,Xt,wt,Xt)))},Ft.prototype._emitDragoverEvents=function(At,ht,wt,Xt,it){Xt?(Xt!==wt&&(wt&&this._emitEvent("dragleave",At,ht,wt,wt,Xt),this._emitEvent("dragenter",At,ht,Xt,wt,Xt)),it||this._emitEvent("dragover",At,ht,Xt)):wt&&this._emitEvent("dragleave",At,ht,wt,wt,Xt),it&&this._emitEvent("dragover",At,ht,Xt)},Ft.prototype._afterDrag=function(At,ht,wt){At&&(At.set("capture",!0),this.draggingShape=null),this.dragging=!1;var Xt=this._getShape(ht,wt);Xt!==At&&this._emitMouseoverEvents(wt,ht,At,Xt),this.currentShape=Xt},Ft.prototype._onmouseup=function(At,ht,wt){if(wt.button===Bn){var Xt=this.draggingShape;this.dragging?(Xt&&this._emitEvent("drop",wt,At,ht),this._emitEvent("dragend",wt,At,Xt),this._afterDrag(Xt,At,wt)):(this._emitEvent("mouseup",wt,At,ht),ht===this.mousedownShape&&this._emitEvent("click",wt,At,ht),this.mousedownShape=null,this.mousedownPoint=null)}},Ft.prototype._ondragover=function(At,ht,wt){wt.preventDefault();var Xt=this.currentShape;this._emitDragoverEvents(wt,At,Xt,ht,!0)},Ft.prototype._onmousemove=function(At,ht,wt){var Xt=this.canvas,it=this.currentShape,mt=this.draggingShape;if(this.dragging)mt&&this._emitDragoverEvents(wt,At,it,ht,!1),this._emitEvent("drag",wt,At,mt);else{var St=this.mousedownPoint;if(St){var Pt=this.mousedownShape,Wt=wt.timeStamp,Jt=Wt-this.mousedownTimeStamp,de=St.clientX-At.clientX,Ee=St.clientY-At.clientY,Fe=de*de+Ee*Ee;Jt>120||Fe>Zr?Pt&&Pt.get("draggable")?(mt=this.mousedownShape,mt.set("capture",!1),this.draggingShape=mt,this.dragging=!0,this._emitEvent("dragstart",wt,At,mt),this.mousedownShape=null,this.mousedownPoint=null):!Pt&&Xt.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",wt,At,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(wt,At,it,ht),this._emitEvent("mousemove",wt,At,ht)):(this._emitMouseoverEvents(wt,At,it,ht),this._emitEvent("mousemove",wt,At,ht))}else this._emitMouseoverEvents(wt,At,it,ht),this._emitEvent("mousemove",wt,At,ht)}},Ft.prototype._emitEvent=function(At,ht,wt,Xt,it,mt){var St=this._getEventObj(At,ht,wt,Xt,it,mt);if(Xt){St.shape=Xt,Jn(Xt,At,St);for(var Pt=Xt.getParent();Pt;)Pt.emitDelegation(At,St),St.propagationStopped||Ci(Pt,At,St),St.propagationPath.push(Pt),Pt=Pt.getParent()}else{var Wt=this.canvas;Jn(Wt,At,St)}},Ft.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},Ft}(),Fr=Mi,oi="px",Oi=(0,te.detect)(),ci=Oi&&Oi.name==="firefox",Mn=function(Ft){(0,re.__extends)(At,Ft);function At(ht){var wt=Ft.call(this,ht)||this;return wt.initContainer(),wt.initDom(),wt.initEvents(),wt.initTimeline(),wt}return At.prototype.getDefaultCfg=function(){var ht=Ft.prototype.getDefaultCfg.call(this);return ht.cursor="default",ht.supportCSSTransform=!1,ht},At.prototype.initContainer=function(){var ht=this.get("container");(0,bt.default)(ht)&&(ht=document.getElementById(ht),this.set("container",ht))},At.prototype.initDom=function(){var ht=this.createDom();this.set("el",ht);var wt=this.get("container");wt.appendChild(ht),this.setDOMSize(this.get("width"),this.get("height"))},At.prototype.initEvents=function(){var ht=new Fr({canvas:this});ht.init(),this.set("eventController",ht)},At.prototype.initTimeline=function(){var ht=new Qr(this);this.set("timeline",ht)},At.prototype.setDOMSize=function(ht,wt){var Xt=this.get("el");It&&(Xt.style.width=ht+oi,Xt.style.height=wt+oi)},At.prototype.changeSize=function(ht,wt){this.setDOMSize(ht,wt),this.set("width",ht),this.set("height",wt),this.onCanvasChange("changeSize")},At.prototype.getRenderer=function(){return this.get("renderer")},At.prototype.getCursor=function(){return this.get("cursor")},At.prototype.setCursor=function(ht){this.set("cursor",ht);var wt=this.get("el");It&&wt&&(wt.style.cursor=ht)},At.prototype.getPointByEvent=function(ht){var wt=this.get("supportCSSTransform");if(wt){if(ci&&!(0,Nt.default)(ht.layerX)&&ht.layerX!==ht.offsetX)return{x:ht.layerX,y:ht.layerY};if(!(0,Nt.default)(ht.offsetX))return{x:ht.offsetX,y:ht.offsetY}}var Xt=this.getClientByEvent(ht),it=Xt.x,mt=Xt.y;return this.getPointByClient(it,mt)},At.prototype.getClientByEvent=function(ht){var wt=ht;return ht.touches&&(ht.type==="touchend"?wt=ht.changedTouches[0]:wt=ht.touches[0]),{x:wt.clientX,y:wt.clientY}},At.prototype.getPointByClient=function(ht,wt){var Xt=this.get("el"),it=Xt.getBoundingClientRect();return{x:ht-it.left,y:wt-it.top}},At.prototype.getClientByPoint=function(ht,wt){var Xt=this.get("el"),it=Xt.getBoundingClientRect();return{x:ht+it.left,y:wt+it.top}},At.prototype.draw=function(){},At.prototype.removeDom=function(){var ht=this.get("el");ht.parentNode.removeChild(ht)},At.prototype.clearEvents=function(){var ht=this.get("eventController");ht.destroy()},At.prototype.isCanvas=function(){return!0},At.prototype.getParent=function(){return null},At.prototype.destroy=function(){var ht=this.get("timeline");this.get("destroyed")||(this.clear(),ht&&ht.stop(),this.clearEvents(),this.removeDom(),Ft.prototype.destroy.call(this))},At}(fr),vi=Mn,Xi=function(Ft){(0,re.__extends)(At,Ft);function At(){return Ft!==null&&Ft.apply(this,arguments)||this}return At.prototype.isGroup=function(){return!0},At.prototype.isEntityGroup=function(){return!1},At.prototype.clone=function(){for(var ht=Ft.prototype.clone.call(this),wt=this.getChildren(),Xt=0;Xt<wt.length;Xt++){var it=wt[Xt];ht.add(it.clone())}return ht},At}(fr),Ii=Xi,si=function(Ft){(0,re.__extends)(At,Ft);function At(ht){return Ft.call(this,ht)||this}return At.prototype._isInBBox=function(ht,wt){var Xt=this.getBBox();return Xt.minX<=ht&&Xt.maxX>=ht&&Xt.minY<=wt&&Xt.maxY>=wt},At.prototype.afterAttrsChange=function(ht){Ft.prototype.afterAttrsChange.call(this,ht),this.clearCacheBBox()},At.prototype.getBBox=function(){var ht=this.get("bbox");return ht||(ht=this.calculateBBox(),this.set("bbox",ht)),ht},At.prototype.getCanvasBBox=function(){var ht=this.get("canvasBox");return ht||(ht=this.calculateCanvasBBox(),this.set("canvasBox",ht)),ht},At.prototype.applyMatrix=function(ht){Ft.prototype.applyMatrix.call(this,ht),this.set("canvasBox",null)},At.prototype.calculateCanvasBBox=function(){var ht=this.getBBox(),wt=this.getTotalMatrix(),Xt=ht.minX,it=ht.minY,mt=ht.maxX,St=ht.maxY;if(wt){var Pt=ze(wt,[ht.minX,ht.minY]),Wt=ze(wt,[ht.maxX,ht.minY]),Jt=ze(wt,[ht.minX,ht.maxY]),de=ze(wt,[ht.maxX,ht.maxY]);Xt=Math.min(Pt[0],Wt[0],Jt[0],de[0]),mt=Math.max(Pt[0],Wt[0],Jt[0],de[0]),it=Math.min(Pt[1],Wt[1],Jt[1],de[1]),St=Math.max(Pt[1],Wt[1],Jt[1],de[1])}var Ee=this.attrs;if(Ee.shadowColor){var Fe=Ee.shadowBlur,me=Fe===void 0?0:Fe,Xe=Ee.shadowOffsetX,dr=Xe===void 0?0:Xe,mr=Ee.shadowOffsetY,Ar=mr===void 0?0:mr,sr=Xt-me+dr,nr=mt+me+dr,Gr=it-me+Ar,gn=St+me+Ar;Xt=Math.min(Xt,sr),mt=Math.max(mt,nr),it=Math.min(it,Gr),St=Math.max(St,gn)}return{x:Xt,y:it,minX:Xt,minY:it,maxX:mt,maxY:St,width:mt-Xt,height:St-it}},At.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBox",null)},At.prototype.isClipShape=function(){return this.get("isClipShape")},At.prototype.isInShape=function(ht,wt){return!1},At.prototype.isOnlyHitBox=function(){return!1},At.prototype.isHit=function(ht,wt){var Xt=this.get("startArrowShape"),it=this.get("endArrowShape"),mt=[ht,wt,1];mt=this.invertFromMatrix(mt);var St=mt[0],Pt=mt[1],Wt=this._isInBBox(St,Pt);return this.isOnlyHitBox()?Wt:!!(Wt&&!this.isClipped(St,Pt)&&(this.isInShape(St,Pt)||Xt&&Xt.isHit(St,Pt)||it&&it.isHit(St,Pt)))},At}(ne),Zn=si,Vi=p(76062),ua=Vi.version},40455:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});function p(b){var I=b.attr(),P=I.x,O=I.y,L=I.r;return{x:P-L,y:O-L,width:L*2,height:L*2}}S.default=p},27633:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});function p(b){var I=b.attr(),P=I.x,O=I.y,L=I.rx,A=I.ry;return{x:P-L,y:O-A,width:L*2,height:A*2}}S.default=p},41056:function(Ct,S,p){"use strict";var b;b={value:!0};var I=p(28648);S.b=I.getMethod;var P=p(3541),O=p(40455),L=p(10687),A=p(19914),_=p(92933),E=p(89372),g=p(74461),w=p(27633);I.register("rect",P.default),I.register("image",P.default),I.register("circle",O.default),I.register("marker",O.default),I.register("polyline",L.default),I.register("polygon",A.default),I.register("text",_.default),I.register("path",E.default),I.register("line",g.default),I.register("ellipse",w.default)},74461:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(3406);function I(P){var O=P.attr(),L=O.x1,A=O.y1,_=O.x2,E=O.y2,g=Math.min(L,_),w=Math.max(L,_),d=Math.min(A,E),y=Math.max(A,E),m={minX:g,maxX:w,minY:d,maxY:y};return m=b.mergeArrowBBox(P,m),{x:m.minX,y:m.minY,width:m.maxX-m.minX,height:m.maxY-m.minY}}S.default=I},89372:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(2879),I=p(15730),P=p(33418),O=p(49274),L=p(39984),A=p(3406);function _(w,d){for(var y=[],m=[],C=[],T=0;T<w.length;T++){var B=w[T],D=B.currentPoint,Y=B.params,K=B.prePoint,H=void 0;switch(B.command){case"Q":H=b.default.box(K[0],K[1],Y[1],Y[2],Y[3],Y[4]);break;case"C":H=I.default.box(K[0],K[1],Y[1],Y[2],Y[3],Y[4],Y[5],Y[6]);break;case"A":var st=B.arcParams;H=P.default.box(st.cx,st.cy,st.rx,st.ry,st.xRotation,st.startAngle,st.endAngle);break;default:y.push(D[0]),m.push(D[1]);break}H&&(B.box=H,y.push(H.x,H.x+H.width),m.push(H.y,H.y+H.height)),d&&(B.command==="L"||B.command==="M")&&B.prePoint&&B.nextPoint&&C.push(B)}y=y.filter(function(Gt){return!Number.isNaN(Gt)}),m=m.filter(function(Gt){return!Number.isNaN(Gt)});var pt=Math.min.apply(null,y),ct=Math.min.apply(null,m),Ot=Math.max.apply(null,y),Rt=Math.max.apply(null,m);if(C.length===0)return{x:pt,y:ct,width:Ot-pt,height:Rt-ct};for(var T=0;T<C.length;T++){var B=C[T],D=B.currentPoint,Qt=void 0;D[0]===pt?(Qt=E(B,d),pt=pt-Qt.xExtra):D[0]===Ot&&(Qt=E(B,d),Ot=Ot+Qt.xExtra),D[1]===ct?(Qt=E(B,d),ct=ct-Qt.yExtra):D[1]===Rt&&(Qt=E(B,d),Rt=Rt+Qt.yExtra)}return{x:pt,y:ct,width:Ot-pt,height:Rt-ct}}function E(w,d){var y=w.prePoint,m=w.currentPoint,C=w.nextPoint,T=Math.pow(m[0]-y[0],2)+Math.pow(m[1]-y[1],2),B=Math.pow(m[0]-C[0],2)+Math.pow(m[1]-C[1],2),D=Math.pow(y[0]-C[0],2)+Math.pow(y[1]-C[1],2),Y=Math.acos((T+B-D)/(2*Math.sqrt(T)*Math.sqrt(B)));if(!Y||Math.sin(Y)===0||L.default(Y,0))return{xExtra:0,yExtra:0};var K=Math.abs(Math.atan2(C[1]-m[1],C[0]-m[0])),H=Math.abs(Math.atan2(C[0]-m[0],C[1]-m[1]));K=K>Math.PI/2?Math.PI-K:K,H=H>Math.PI/2?Math.PI-H:H;var st={xExtra:Math.cos(Y/2-K)*(d/2*(1/Math.sin(Y/2)))-d/2||0,yExtra:Math.cos(H-Y/2)*(d/2*(1/Math.sin(Y/2)))-d/2||0};return st}function g(w){var d=w.attr(),y=d.path,m=d.stroke,C=m?d.lineWidth:0,T=w.get("segments")||O.default(y),B=_(T,C),D=B.x,Y=B.y,K=B.width,H=B.height,st={minX:D,minY:Y,maxX:D+K,maxY:Y+H};return st=A.mergeArrowBBox(w,st),{x:st.minX,y:st.minY,width:st.maxX-st.minX,height:st.maxY-st.minY}}S.default=g},19914:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(76256);function I(P){for(var O=P.attr(),L=O.points,A=[],_=[],E=0;E<L.length;E++){var g=L[E];A.push(g[0]),_.push(g[1])}return b.getBBoxByArray(A,_)}S.default=I},10687:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(76256),I=p(3406);function P(O){for(var L=O.attr(),A=L.points,_=[],E=[],g=0;g<A.length;g++){var w=A[g];_.push(w[0]),E.push(w[1])}var d=b.getBBoxByArray(_,E),y=d.x,m=d.y,C=d.width,T=d.height,B={minX:y,minY:m,maxX:y+C,maxY:m+T};return B=I.mergeArrowBBox(O,B),{x:B.minX,y:B.minY,width:B.maxX-B.minX,height:B.maxY-B.minY}}S.default=P},3541:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});function p(b){var I=b.attr(),P=I.x,O=I.y,L=I.width,A=I.height;return{x:P,y:O,width:L,height:A}}S.default=p},28648:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var p=new Map;function b(P,O){p.set(P,O)}S.register=b;function I(P){return p.get(P)}S.getMethod=I},92933:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(8914);function I(P){var O=P.attr(),L=O.x,A=O.y,_=O.text,E=O.fontSize,g=O.lineHeight,w=O.font;w||(w=b.assembleFont(O));var d=b.getTextWidth(_,w),y;if(!d)y={x:L,y:A,width:0,height:0};else{var m=O.textAlign,C=O.textBaseline,T=b.getTextHeight(_,E,g),B={x:L,y:A-T};m&&(m==="end"||m==="right"?B.x-=d:m==="center"&&(B.x-=d/2)),C&&(C==="top"?B.y+=T:C==="middle"&&(B.y+=T/2)),y={x:B.x,y:B.y,width:d,height:T}}return y}S.default=I},3406:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});function p(I,P){return!I||!P?I||P:{minX:Math.min(I.minX,P.minX),minY:Math.min(I.minY,P.minY),maxX:Math.max(I.maxX,P.maxX),maxY:Math.max(I.maxY,P.maxY)}}S.mergeBBox=p;function b(I,P){var O=I.get("startArrowShape"),L=I.get("endArrowShape"),A=null,_=null;return O&&(A=O.getCanvasBBox(),P=p(P,A)),L&&(_=L.getCanvasBBox(),P=p(P,_)),P}S.mergeArrowBBox=b},66192:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var p=function(){function b(I,P){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=I,this.name=I,this.originalEvent=P,this.timeStamp=P.timeStamp}return b.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},b.prototype.stopPropagation=function(){this.propagationStopped=!0},b.prototype.toString=function(){var I=this.type;return"[Event (type="+I+")]"},b.prototype.save=function(){},b.prototype.restore=function(){},b}();S.default=p},85424:function(Ct,S){"use strict";var p;p={value:!0}},4555:function(Ct,S){"use strict";Object.defineProperty(S,"X",{value:!0})},6052:function(Ct,S){"use strict";var p;p={value:!0};function b(O,L){var A=[],_=O[0],E=O[1],g=O[2],w=O[3],d=O[4],y=O[5],m=O[6],C=O[7],T=O[8],B=L[0],D=L[1],Y=L[2],K=L[3],H=L[4],st=L[5],pt=L[6],ct=L[7],Ot=L[8];return A[0]=B*_+D*w+Y*m,A[1]=B*E+D*d+Y*C,A[2]=B*g+D*y+Y*T,A[3]=K*_+H*w+st*m,A[4]=K*E+H*d+st*C,A[5]=K*g+H*y+st*T,A[6]=pt*_+ct*w+Ot*m,A[7]=pt*E+ct*d+Ot*C,A[8]=pt*g+ct*y+Ot*T,A}p=b;function I(O,L){var A=[],_=L[0],E=L[1];return A[0]=O[0]*_+O[3]*E+O[6],A[1]=O[1]*_+O[4]*E+O[7],A}S.rG=I;function P(O){var L=[],A=O[0],_=O[1],E=O[2],g=O[3],w=O[4],d=O[5],y=O[6],m=O[7],C=O[8],T=C*w-d*m,B=-C*g+d*y,D=m*g-w*y,Y=A*T+_*B+E*D;return Y?(Y=1/Y,L[0]=T*Y,L[1]=(-C*_+E*m)*Y,L[2]=(d*_-E*w)*Y,L[3]=B*Y,L[4]=(C*A-E*y)*Y,L[5]=(-d*A+E*g)*Y,L[6]=D*Y,L[7]=(-m*A+_*y)*Y,L[8]=(w*A-_*g)*Y,L):null}S.U_=P},26632:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var p=null;function b(){if(!p){var I=document.createElement("canvas");I.width=1,I.height=1,p=I.getContext("2d")}return p}S.getOffScreenContext=b},8914:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(22487),I=p(26632);function P(_,E,g){var w=1;if(b.isString(_)&&(w=_.split(`
`).length),w>1){var d=O(E,g);return E*w+d*(w-1)}return E}S.getTextHeight=P;function O(_,E){return E?E-_:_*.14}S.getLineSpaceing=O;function L(_,E){var g=I.getOffScreenContext(),w=0;if(b.isNil(_)||_==="")return w;if(g.save(),g.font=E,b.isString(_)&&_.includes(`
`)){var d=_.split(`
`);b.each(d,function(y){var m=g.measureText(y).width;w<m&&(w=m)})}else w=g.measureText(_).width;return g.restore(),w}S.getTextWidth=L;function A(_){var E=_.fontSize,g=_.fontFamily,w=_.fontWeight,d=_.fontStyle,y=_.fontVariant;return[d,y,w,E+"px",g].join(" ").trim()}S.assembleFont=A},22487:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});function b(y,m){var C=y.indexOf(m);C!==-1&&y.splice(C,1)}S.removeFromArray=b,S.isBrowser=typeof window!="undefined"&&typeof window.document!="undefined";var I=p(73890);S.isNil=I.default;var P=p(46812);S.isFunction=P.default;var O=p(21830);S.isString=O.default;var L=p(33643);S.isObject=L.default;var A=p(66631);S.isArray=A.default;var _=p(66974);S.mix=_.default;var E=p(27154);S.each=E.default;var g=p(85260);S.upperFirst=g.default;function w(y,m){if(y.isCanvas())return!0;for(var C=m.getParent(),T=!1;C;){if(C===y){T=!0;break}C=C.getParent()}return T}S.isParent=w;function d(y){return y.cfg.visible&&y.cfg.capture}S.isAllowCapture=d},76062:function(Ct){"use strict";Ct.exports=JSON.parse('{"name":"@antv/g-base","version":"0.4.7","description":"A common util collection for antv projects","main":"lib/index.js","module":"esm/index.js","types":"lib/index.d.ts","files":["package.json","esm","lib","LICENSE","README.md"],"scripts":{"build":"npm run clean && run-p build:*","build:esm":"tsc -p tsconfig.json --target ES5 --module ESNext --outDir esm","build:cjs":"tsc -p tsconfig.json --target ES5 --module commonjs --outDir lib","clean":"rm -rf esm lib","watch:cjs":"tsc-watch -p tsconfig.json --target ES5 --module commonjs --outDir lib --compiler typescript/bin/tsc","coverage":"npm run coverage-generator && npm run coverage-viewer","coverage-generator":"torch --coverage --compile --source-pattern src/*.js,src/**/*.js --opts tests/mocha.opts","coverage-viewer":"torch-coverage","test":"torch --renderer --compile --opts tests/mocha.opts","test-live":"torch --compile --interactive --opts tests/mocha.opts","tsc":"tsc --noEmit","typecheck":"tsc --noEmit"},"repository":{"type":"git","url":"git+https://github.com/antvis/util.git"},"keywords":["util","antv","g"],"publishConfig":{"access":"public"},"author":"https://github.com/orgs/antvis/people","license":"ISC","bugs":{"url":"https://github.com/antvis/util/issues"},"devDependencies":{"@antv/torch":"^1.0.0","gl-matrix":"^3.0.0","less":"^3.9.0","npm-run-all":"^4.1.5","tsc-watch":"^4.0.0"},"homepage":"https://github.com/antvis/util#readme","dependencies":{"@antv/event-emitter":"^0.1.1","@antv/g-math":"^0.1.3","@antv/matrix-util":"^3.1.0-beta.1","@antv/path-util":"~2.0.5","@antv/util":"~2.0.0","@types/d3-timer":"^1.0.9","d3-ease":"^1.0.5","d3-interpolate":"^1.3.2","d3-timer":"^1.0.9","detect-browser":"^5.1.0"},"__npminstall_done":false,"gitHead":"eb6a2503cb7bb8154697592b10680939d954a31a"}')},84909:function(Ct,S,p){"use strict";var b;b={value:!0};var I=p(48465);function P(_){return Math.sqrt(_[0]*_[0]+_[1]*_[1])}function O(_,E){return P(_)*P(E)?(_[0]*E[0]+_[1]*E[1])/(P(_)*P(E)):1}function L(_,E){return(_[0]*E[1]<_[1]*E[0]?-1:1)*Math.acos(O(_,E))}function A(_,E){var g=E[1],w=E[2],d=I.mod(I.toRadian(E[3]),Math.PI*2),y=E[4],m=E[5],C=_[0],T=_[1],B=E[6],D=E[7],Y=Math.cos(d)*(C-B)/2+Math.sin(d)*(T-D)/2,K=-1*Math.sin(d)*(C-B)/2+Math.cos(d)*(T-D)/2,H=Y*Y/(g*g)+K*K/(w*w);H>1&&(g*=Math.sqrt(H),w*=Math.sqrt(H));var st=g*g*(K*K)+w*w*(Y*Y),pt=st?Math.sqrt((g*g*(w*w)-st)/st):1;y===m&&(pt*=-1),isNaN(pt)&&(pt=0);var ct=w?pt*g*K/w:0,Ot=g?pt*-w*Y/g:0,Rt=(C+B)/2+Math.cos(d)*ct-Math.sin(d)*Ot,Qt=(T+D)/2+Math.sin(d)*ct+Math.cos(d)*Ot,Gt=[(Y-ct)/g,(K-Ot)/w],Z=[(-1*Y-ct)/g,(-1*K-Ot)/w],nt=L([1,0],Gt),Q=L(Gt,Z);return O(Gt,Z)<=-1&&(Q=Math.PI),O(Gt,Z)>=1&&(Q=0),m===0&&Q>0&&(Q=Q-2*Math.PI),m===1&&Q<0&&(Q=Q+2*Math.PI),{cx:Rt,cy:Qt,rx:I.isSamePoint(_,[B,D])?0:g,ry:I.isSamePoint(_,[B,D])?0:w,startAngle:nt,endAngle:nt+Q,xRotation:d,arcFlag:y,sweepFlag:m}}S.Z=A},48465:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.isSamePoint=S.mergeRegion=S.intersectRect=S.inBox=S.distance=S.getPixelRatio=void 0;function b(){return window?window.devicePixelRatio:1}S.getPixelRatio=b;function I(D,Y,K,H){var st=D-K,pt=Y-H;return Math.sqrt(st*st+pt*pt)}S.distance=I;function P(D,Y,K,H,st,pt){return st>=D&&st<=D+K&&pt>=Y&&pt<=Y+H}S.inBox=P;function O(D,Y){return!(Y.minX>D.maxX||Y.maxX<D.minX||Y.minY>D.maxY||Y.maxY<D.minY)}S.intersectRect=O;function L(D,Y){return!D||!Y?D||Y:{minX:Math.min(D.minX,Y.minX),minY:Math.min(D.minY,Y.minY),maxX:Math.max(D.maxX,Y.maxX),maxY:Math.max(D.maxY,Y.maxY)}}S.mergeRegion=L;function A(D,Y){return D[0]===Y[0]&&D[1]===Y[1]}S.isSamePoint=A;var _=p(73890);Object.defineProperty(S,"isNil",{enumerable:!0,get:function(){return _.default}});var E=p(21830);Object.defineProperty(S,"isString",{enumerable:!0,get:function(){return E.default}});var g=p(46812);Object.defineProperty(S,"isFunction",{enumerable:!0,get:function(){return g.default}});var w=p(66631);Object.defineProperty(S,"isArray",{enumerable:!0,get:function(){return w.default}});var d=p(27154);Object.defineProperty(S,"each",{enumerable:!0,get:function(){return d.default}});var y=p(9217);Object.defineProperty(S,"toRadian",{enumerable:!0,get:function(){return y.default}});var m=p(5253);Object.defineProperty(S,"mod",{enumerable:!0,get:function(){return m.default}});var C=p(39984);Object.defineProperty(S,"isNumberEqual",{enumerable:!0,get:function(){return C.default}});var T=p(98229);Object.defineProperty(S,"requestAnimationFrame",{enumerable:!0,get:function(){return T.default}});var B=p(35755);Object.defineProperty(S,"clearAnimationFrame",{enumerable:!0,get:function(){return B.default}})},71270:function(Ct){"use strict";Ct.exports=JSON.parse('{"name":"@antv/g-canvas","version":"0.4.15","description":"A canvas library which providing 2d","main":"lib/index.js","module":"esm/index.js","unpkg":"dist/g.min.js","types":"lib/index.d.ts","files":["package.json","esm","lib","dist","LICENSE","README.md"],"scripts":{"build":"npm run clean && run-p build:*","build:esm":"tsc -p tsconfig.json --target ES5 --module ESNext --outDir esm","build:cjs":"tsc -p tsconfig.json --target ES5 --module commonjs --outDir lib","build:umd":"webpack --config webpack.config.js --mode production","clean":"rm -rf esm lib dist","coverage":"npm run coverage-generator && npm run coverage-viewer","coverage-generator":"torch --coverage --compile --source-pattern src/*.js,src/**/*.js --opts tests/mocha.opts","coverage-viewer":"torch-coverage","test":"torch --renderer --compile --opts tests/mocha.opts","test-live":"torch --compile --interactive --opts tests/mocha.opts","tsc":"tsc --noEmit","typecheck":"tsc --noEmit","dist":"webpack --config webpack.config.js --mode production"},"repository":{"type":"git","url":"git+https://github.com/antvis/g.git"},"keywords":["util","antv","g"],"publishConfig":{"access":"public"},"author":"https://github.com/orgs/antvis/people","license":"ISC","bugs":{"url":"https://github.com/antvis/g/issues"},"devDependencies":{"@antv/torch":"^1.0.0","less":"^3.9.0","npm-run-all":"^4.1.5","webpack":"^4.26.1","webpack-cli":"^3.1.2"},"homepage":"https://github.com/antvis/g#readme","dependencies":{"@antv/g-base":"^0.4.7","@antv/g-math":"^0.1.3","@antv/path-util":"~2.0.5","@antv/util":"~2.0.0","gl-matrix":"^3.0.0"},"__npminstall_done":false,"gitHead":"9092384bf6b7efd6ec71bbcdec1b801a0079c403"}')},89838:function(Ct,S,p){"use strict";p.r(S),p.d(S,{Arc:function(){return yt},Cubic:function(){return Rt},Line:function(){return w},Polygon:function(){return Lt},Polyline:function(){return ae},Quad:function(){return K},Util:function(){return b}});var b={};p.r(b),p.d(b,{distance:function(){return O},getBBoxByArray:function(){return A},getBBoxRange:function(){return _},isNumberEqual:function(){return L},piMod:function(){return E}});function I(bt){return Math.min.apply(null,bt)}function P(bt){return Math.max.apply(null,bt)}function O(bt,at,rt,vt){var tt=bt-rt,q=at-vt;return Math.sqrt(tt*tt+q*q)}function L(bt,at){return Math.abs(bt-at)<.001}function A(bt,at){var rt=I(bt),vt=I(at),tt=P(bt),q=P(at);return{x:rt,y:vt,width:tt-rt,height:q-vt}}function _(bt,at,rt,vt){return{minX:I([bt,rt]),maxX:P([bt,rt]),minY:I([at,vt]),maxY:P([at,vt])}}function E(bt){return(bt+Math.PI*2)%(Math.PI*2)}var g=p(31437),w={box:function(bt,at,rt,vt){return A([bt,rt],[at,vt])},length:function(bt,at,rt,vt){return O(bt,at,rt,vt)},pointAt:function(bt,at,rt,vt,tt){return{x:(1-tt)*bt+tt*rt,y:(1-tt)*at+tt*vt}},pointDistance:function(bt,at,rt,vt,tt,q){var Et=(rt-bt)*(tt-bt)+(vt-at)*(q-at);if(Et<0)return O(bt,at,tt,q);var It=(rt-bt)*(rt-bt)+(vt-at)*(vt-at);return Et>It?O(rt,vt,tt,q):this.pointToLine(bt,at,rt,vt,tt,q)},pointToLine:function(bt,at,rt,vt,tt,q){var Et=[rt-bt,vt-at];if(g.exactEquals(Et,[0,0]))return Math.sqrt((tt-bt)*(tt-bt)+(q-at)*(q-at));var It=[-Et[1],Et[0]];g.normalize(It,It);var Kt=[tt-bt,q-at];return Math.abs(g.dot(Kt,It))},tangentAngle:function(bt,at,rt,vt){return Math.atan2(vt-at,rt-bt)}},d=1e-4;function y(bt,at,rt,vt,tt,q){var Et,It=Infinity,Kt=[rt,vt],ue=20;q&&q>200&&(ue=q/10);for(var we=1/ue,Ye=we/10,te=0;te<=ue;te++){var pe=te*we,Te=[tt.apply(null,bt.concat([pe])),tt.apply(null,at.concat([pe]))],ze=O(Kt[0],Kt[1],Te[0],Te[1]);ze<It&&(Et=pe,It=ze)}if(Et===0)return{x:bt[0],y:at[0]};if(Et===1){var ur=bt.length;return{x:bt[ur-1],y:at[ur-1]}}It=Infinity;for(var te=0;te<32&&!(Ye<d);te++){var Ze=Et-Ye,pr=Et+Ye,Te=[tt.apply(null,bt.concat([Ze])),tt.apply(null,at.concat([Ze]))],ze=O(Kt[0],Kt[1],Te[0],Te[1]);if(Ze>=0&&ze<It)Et=Ze,It=ze;else{var Pr=[tt.apply(null,bt.concat([pr])),tt.apply(null,at.concat([pr]))],Or=O(Kt[0],Kt[1],Pr[0],Pr[1]);pr<=1&&Or<It?(Et=pr,It=Or):Ye*=.5}}return{x:tt.apply(null,bt.concat([Et])),y:tt.apply(null,at.concat([Et]))}}function m(bt,at){for(var rt=0,vt=bt.length,tt=0;tt<vt;tt++){var q=bt[tt],Et=at[tt],It=bt[(tt+1)%vt],Kt=at[(tt+1)%vt];rt+=O(q,Et,It,Kt)}return rt/2}function C(bt,at,rt,vt){var tt=1-vt;return tt*tt*bt+2*vt*tt*at+vt*vt*rt}function T(bt,at,rt){var vt=bt+rt-2*at;if(L(vt,0))return[.5];var tt=(bt-at)/vt;return tt<=1&&tt>=0?[tt]:[]}function B(bt,at,rt,vt){return 2*(1-vt)*(at-bt)+2*vt*(rt-at)}function D(bt,at,rt,vt,tt,q,Et){var It=C(bt,rt,tt,Et),Kt=C(at,vt,q,Et),ue=w.pointAt(bt,at,rt,vt,Et),we=w.pointAt(rt,vt,tt,q,Et);return[[bt,at,ue.x,ue.y,It,Kt],[It,Kt,we.x,we.y,tt,q]]}function Y(bt,at,rt,vt,tt,q,Et){if(Et===0)return(O(bt,at,rt,vt)+O(rt,vt,tt,q)+O(bt,at,tt,q))/2;var It=D(bt,at,rt,vt,tt,q,.5),Kt=It[0],ue=It[1];return Kt.push(Et-1),ue.push(Et-1),Y.apply(null,Kt)+Y.apply(null,ue)}var K={box:function(bt,at,rt,vt,tt,q){var Et=T(bt,rt,tt)[0],It=T(at,vt,q)[0],Kt=[bt,tt],ue=[at,q];return Et!==void 0&&Kt.push(C(bt,rt,tt,Et)),It!==void 0&&ue.push(C(at,vt,q,It)),A(Kt,ue)},length:function(bt,at,rt,vt,tt,q){return Y(bt,at,rt,vt,tt,q,3)},nearestPoint:function(bt,at,rt,vt,tt,q,Et,It){return y([bt,rt,tt],[at,vt,q],Et,It,C)},pointDistance:function(bt,at,rt,vt,tt,q,Et,It){var Kt=this.nearestPoint(bt,at,rt,vt,tt,q,Et,It);return O(Kt.x,Kt.y,Et,It)},interpolationAt:C,pointAt:function(bt,at,rt,vt,tt,q,Et){return{x:C(bt,rt,tt,Et),y:C(at,vt,q,Et)}},divide:function(bt,at,rt,vt,tt,q,Et){return D(bt,at,rt,vt,tt,q,Et)},tangentAngle:function(bt,at,rt,vt,tt,q,Et){var It=B(bt,rt,tt,Et),Kt=B(at,vt,q,Et),ue=Math.atan2(Kt,It);return E(ue)}};function H(bt,at,rt,vt,tt){var q=1-tt;return q*q*q*bt+3*at*tt*q*q+3*rt*tt*tt*q+vt*tt*tt*tt}function st(bt,at,rt,vt,tt){var q=1-tt;return 3*(q*q*(at-bt)+2*q*tt*(rt-at)+tt*tt*(vt-rt))}function pt(bt,at,rt,vt){var tt=-3*bt+9*at-9*rt+3*vt,q=6*bt-12*at+6*rt,Et=3*at-3*bt,It=[],Kt,ue,we;if(L(tt,0))L(q,0)||(Kt=-Et/q,Kt>=0&&Kt<=1&&It.push(Kt));else{var Ye=q*q-4*tt*Et;L(Ye,0)?It.push(-q/(2*tt)):Ye>0&&(we=Math.sqrt(Ye),Kt=(-q+we)/(2*tt),ue=(-q-we)/(2*tt),Kt>=0&&Kt<=1&&It.push(Kt),ue>=0&&ue<=1&&It.push(ue))}return It}function ct(bt,at,rt,vt,tt,q,Et,It,Kt){var ue=H(bt,rt,tt,Et,Kt),we=H(at,vt,q,It,Kt),Ye=w.pointAt(bt,at,rt,vt,Kt),te=w.pointAt(rt,vt,tt,q,Kt),pe=w.pointAt(tt,q,Et,It,Kt),Te=w.pointAt(Ye.x,Ye.y,te.x,te.y,Kt),ze=w.pointAt(te.x,te.y,pe.x,pe.y,Kt);return[[bt,at,Ye.x,Ye.y,Te.x,Te.y,ue,we],[ue,we,ze.x,ze.y,pe.x,pe.y,Et,It]]}function Ot(bt,at,rt,vt,tt,q,Et,It,Kt){if(Kt===0)return m([bt,rt,tt,Et],[at,vt,q,It]);var ue=ct(bt,at,rt,vt,tt,q,Et,It,.5),we=ue[0],Ye=ue[1];return we.push(Kt-1),Ye.push(Kt-1),Ot.apply(null,we)+Ot.apply(null,Ye)}var Rt={extrema:pt,box:function(bt,at,rt,vt,tt,q,Et,It){for(var Kt=[bt,Et],ue=[at,It],we=pt(bt,rt,tt,Et),Ye=pt(at,vt,q,It),te=0;te<we.length;te++)Kt.push(H(bt,rt,tt,Et,we[te]));for(var te=0;te<Ye.length;te++)ue.push(H(at,vt,q,It,Ye[te]));return A(Kt,ue)},length:function(bt,at,rt,vt,tt,q,Et,It){return Ot(bt,at,rt,vt,tt,q,Et,It,3)},nearestPoint:function(bt,at,rt,vt,tt,q,Et,It,Kt,ue,we){return y([bt,rt,tt,Et],[at,vt,q,It],Kt,ue,H,we)},pointDistance:function(bt,at,rt,vt,tt,q,Et,It,Kt,ue,we){var Ye=this.nearestPoint(bt,at,rt,vt,tt,q,Et,It,Kt,ue,we);return O(Ye.x,Ye.y,Kt,ue)},interpolationAt:H,pointAt:function(bt,at,rt,vt,tt,q,Et,It,Kt){return{x:H(bt,rt,tt,Et,Kt),y:H(at,vt,q,It,Kt)}},divide:function(bt,at,rt,vt,tt,q,Et,It,Kt){return ct(bt,at,rt,vt,tt,q,Et,It,Kt)},tangentAngle:function(bt,at,rt,vt,tt,q,Et,It,Kt){var ue=st(bt,rt,tt,Et,Kt),we=st(at,vt,q,It,Kt);return E(Math.atan2(we,ue))}};function Qt(bt,at){var rt=Math.abs(bt);return at>0?rt:rt*-1}var Gt={box:function(bt,at,rt,vt){return{x:bt-rt,y:at-vt,width:rt*2,height:vt*2}},length:function(bt,at,rt,vt){return Math.PI*(3*(rt+vt)-Math.sqrt((3*rt+vt)*(rt+3*vt)))},nearestPoint:function(bt,at,rt,vt,tt,q){var Et=rt,It=vt;if(Et===0||It===0)return{x:bt,y:at};for(var Kt=tt-bt,ue=q-at,we=Math.abs(Kt),Ye=Math.abs(ue),te=Et*Et,pe=It*It,Te=Math.PI/4,ze,ur,Ze=0;Ze<4;Ze++){ze=Et*Math.cos(Te),ur=It*Math.sin(Te);var pr=(te-pe)*Math.pow(Math.cos(Te),3)/Et,Pr=(pe-te)*Math.pow(Math.sin(Te),3)/It,Or=ze-pr,nn=ur-Pr,kn=we-pr,ii=Ye-Pr,gi=Math.hypot(nn,Or),Si=Math.hypot(ii,kn),Zt=gi*Math.asin((Or*ii-nn*kn)/(gi*Si)),ne=Zt/Math.sqrt(te+pe-ze*ze-ur*ur);Te+=ne,Te=Math.min(Math.PI/2,Math.max(0,Te))}return{x:bt+Qt(ze,Kt),y:at+Qt(ur,ue)}},pointDistance:function(bt,at,rt,vt,tt,q){var Et=this.nearestPoint(bt,at,rt,vt,tt,q);return O(Et.x,Et.y,tt,q)},pointAt:function(bt,at,rt,vt,tt){var q=2*Math.PI*tt;return{x:bt+rt*Math.cos(q),y:at+vt*Math.sin(q)}},tangentAngle:function(bt,at,rt,vt,tt){var q=2*Math.PI*tt,Et=Math.atan2(vt*Math.cos(q),-rt*Math.sin(q));return E(Et)}};function Z(bt,at,rt,vt,tt,q,Et,It){return-1*rt*Math.cos(tt)*Math.sin(It)-vt*Math.sin(tt)*Math.cos(It)}function nt(bt,at,rt,vt,tt,q,Et,It){return-1*rt*Math.sin(tt)*Math.sin(It)+vt*Math.cos(tt)*Math.cos(It)}function Q(bt,at,rt){return Math.atan(-at/bt*Math.tan(rt))}function dt(bt,at,rt){return Math.atan(at/(bt*Math.tan(rt)))}function lt(bt,at,rt,vt,tt,q){return rt*Math.cos(tt)*Math.cos(q)-vt*Math.sin(tt)*Math.sin(q)+bt}function z(bt,at,rt,vt,tt,q){return rt*Math.sin(tt)*Math.cos(q)+vt*Math.cos(tt)*Math.sin(q)+at}function $(bt,at,rt,vt){var tt=Math.atan2(vt*bt,rt*at);return(tt+Math.PI*2)%(Math.PI*2)}function j(bt,at,rt){return{x:bt*Math.cos(rt),y:at*Math.sin(rt)}}function f(bt,at,rt){var vt=Math.cos(rt),tt=Math.sin(rt);return[bt*vt-at*tt,bt*tt+at*vt]}var yt={box:function(bt,at,rt,vt,tt,q,Et){for(var It=Q(rt,vt,tt),Kt=Infinity,ue=-Infinity,we=[q,Et],Ye=-Math.PI*2;Ye<=Math.PI*2;Ye+=Math.PI){var te=It+Ye;q<Et?q<te&&te<Et&&we.push(te):Et<te&&te<q&&we.push(te)}for(var Ye=0;Ye<we.length;Ye++){var pe=lt(bt,at,rt,vt,tt,we[Ye]);pe<Kt&&(Kt=pe),pe>ue&&(ue=pe)}for(var Te=dt(rt,vt,tt),ze=Infinity,ur=-Infinity,Ze=[q,Et],Ye=-Math.PI*2;Ye<=Math.PI*2;Ye+=Math.PI){var pr=Te+Ye;q<Et?q<pr&&pr<Et&&Ze.push(pr):Et<pr&&pr<q&&Ze.push(pr)}for(var Ye=0;Ye<Ze.length;Ye++){var Pr=z(bt,at,rt,vt,tt,Ze[Ye]);Pr<ze&&(ze=Pr),Pr>ur&&(ur=Pr)}return{x:Kt,y:ze,width:ue-Kt,height:ur-ze}},length:function(bt,at,rt,vt,tt,q,Et){},nearestPoint:function(bt,at,rt,vt,tt,q,Et,It,Kt){var ue=f(It-bt,Kt-at,-tt),we=ue[0],Ye=ue[1],te=Gt.nearestPoint(0,0,rt,vt,we,Ye),pe=$(rt,vt,te.x,te.y);pe<q?te=j(rt,vt,q):pe>Et&&(te=j(rt,vt,Et));var Te=f(te.x,te.y,tt);return{x:Te[0]+bt,y:Te[1]+at}},pointDistance:function(bt,at,rt,vt,tt,q,Et,It,Kt){var ue=this.nearestPoint(bt,at,rt,vt,It,Kt);return O(ue.x,ue.y,It,Kt)},pointAt:function(bt,at,rt,vt,tt,q,Et,It){var Kt=(Et-q)*It+q;return{x:lt(bt,at,rt,vt,tt,Kt),y:z(bt,at,rt,vt,tt,Kt)}},tangentAngle:function(bt,at,rt,vt,tt,q,Et,It){var Kt=(Et-q)*It+q,ue=Z(bt,at,rt,vt,tt,q,Et,Kt),we=nt(bt,at,rt,vt,tt,q,Et,Kt);return E(Math.atan2(we,ue))}};function _t(bt){for(var at=0,rt=[],vt=0;vt<bt.length-1;vt++){var tt=bt[vt],q=bt[vt+1],Et=O(tt[0],tt[1],q[0],q[1]),It={from:tt,to:q,length:Et};rt.push(It),at+=Et}return{segments:rt,totalLength:at}}function jt(bt){if(bt.length<2)return 0;for(var at=0,rt=0;rt<bt.length-1;rt++){var vt=bt[rt],tt=bt[rt+1];at+=O(vt[0],vt[1],tt[0],tt[1])}return at}function qt(bt,at){if(at>1||at<0||bt.length<2)return null;var rt=_t(bt),vt=rt.segments,tt=rt.totalLength;if(tt===0)return{x:bt[0][0],y:bt[0][1]};for(var q=0,Et=null,It=0;It<vt.length;It++){var Kt=vt[It],ue=Kt.from,we=Kt.to,Ye=Kt.length/tt;if(at>=q&&at<=q+Ye){var te=(at-q)/Ye;Et=w.pointAt(ue[0],ue[1],we[0],we[1],te);break}q+=Ye}return Et}function Vt(bt,at){if(at>1||at<0||bt.length<2)return 0;for(var rt=_t(bt),vt=rt.segments,tt=rt.totalLength,q=0,Et=0,It=0;It<vt.length;It++){var Kt=vt[It],ue=Kt.from,we=Kt.to,Ye=Kt.length/tt;if(at>=q&&at<=q+Ye){Et=Math.atan2(we[1]-ue[1],we[0]-ue[0]);break}q+=Ye}return Et}function re(bt,at,rt){for(var vt=Infinity,tt=0;tt<bt.length-1;tt++){var q=bt[tt],Et=bt[tt+1],It=w.pointDistance(q[0],q[1],Et[0],Et[1],at,rt);It<vt&&(vt=It)}return vt}var ae={box:function(bt){for(var at=[],rt=[],vt=0;vt<bt.length;vt++){var tt=bt[vt];at.push(tt[0]),rt.push(tt[1])}return A(at,rt)},length:function(bt){return jt(bt)},pointAt:function(bt,at){return qt(bt,at)},pointDistance:function(bt,at,rt){return re(bt,at,rt)},tangentAngle:function(bt,at){return Vt(bt,at)}};function Nt(bt){var at=bt.slice(0);return bt.length&&at.push(bt[0]),at}var Lt={box:function(bt){return ae.box(bt)},length:function(bt){return jt(Nt(bt))},pointAt:function(bt,at){return qt(Nt(bt),at)},pointDistance:function(bt,at,rt){return re(Nt(bt),at,rt)},tangentAngle:function(bt,at){return Vt(Nt(bt),at)}}},33418:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(76256),I=p(55397);function P(y,m,C,T,B,D,Y,K){return-1*C*Math.cos(B)*Math.sin(K)-T*Math.sin(B)*Math.cos(K)}function O(y,m,C,T,B,D,Y,K){return-1*C*Math.sin(B)*Math.sin(K)+T*Math.cos(B)*Math.cos(K)}function L(y,m,C){return Math.atan(-m/y*Math.tan(C))}function A(y,m,C){return Math.atan(m/(y*Math.tan(C)))}function _(y,m,C,T,B,D){return C*Math.cos(B)*Math.cos(D)-T*Math.sin(B)*Math.sin(D)+y}function E(y,m,C,T,B,D){return C*Math.sin(B)*Math.cos(D)+T*Math.cos(B)*Math.sin(D)+m}function g(y,m,C,T){var B=Math.atan2(T*y,C*m);return(B+Math.PI*2)%(Math.PI*2)}function w(y,m,C){return{x:y*Math.cos(C),y:m*Math.sin(C)}}function d(y,m,C){var T=Math.cos(C),B=Math.sin(C);return[y*T-m*B,y*B+m*T]}S.default={box:function(y,m,C,T,B,D,Y){for(var K=L(C,T,B),H=Infinity,st=-Infinity,pt=[D,Y],ct=-Math.PI*2;ct<=Math.PI*2;ct+=Math.PI){var Ot=K+ct;D<Y?D<Ot&&Ot<Y&&pt.push(Ot):Y<Ot&&Ot<D&&pt.push(Ot)}for(var ct=0;ct<pt.length;ct++){var Rt=_(y,m,C,T,B,pt[ct]);Rt<H&&(H=Rt),Rt>st&&(st=Rt)}for(var Qt=A(C,T,B),Gt=Infinity,Z=-Infinity,nt=[D,Y],ct=-Math.PI*2;ct<=Math.PI*2;ct+=Math.PI){var Q=Qt+ct;D<Y?D<Q&&Q<Y&&nt.push(Q):Y<Q&&Q<D&&nt.push(Q)}for(var ct=0;ct<nt.length;ct++){var dt=E(y,m,C,T,B,nt[ct]);dt<Gt&&(Gt=dt),dt>Z&&(Z=dt)}return{x:H,y:Gt,width:st-H,height:Z-Gt}},length:function(y,m,C,T,B,D,Y){},nearestPoint:function(y,m,C,T,B,D,Y,K,H){var st=d(K-y,H-m,-B),pt=st[0],ct=st[1],Ot=I.default.nearestPoint(0,0,C,T,pt,ct),Rt=g(C,T,Ot.x,Ot.y);Rt<D?Ot=w(C,T,D):Rt>Y&&(Ot=w(C,T,Y));var Qt=d(Ot.x,Ot.y,B);return{x:Qt[0]+y,y:Qt[1]+m}},pointDistance:function(y,m,C,T,B,D,Y,K,H){var st=this.nearestPoint(y,m,C,T,K,H);return b.distance(st.x,st.y,K,H)},pointAt:function(y,m,C,T,B,D,Y,K){var H=(Y-D)*K+D;return{x:_(y,m,C,T,B,H),y:E(y,m,C,T,B,H)}},tangentAngle:function(y,m,C,T,B,D,Y,K){var H=(Y-D)*K+D,st=P(y,m,C,T,B,D,Y,H),pt=O(y,m,C,T,B,D,Y,H);return b.piMod(Math.atan2(pt,st))}}},87335:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.snapLength=S.nearestPoint=void 0;var b=p(76256),I=1e-4;function P(L,A,_,E,g,w){var d,y=Infinity,m=[_,E],C=20;w&&w>200&&(C=w/10);for(var T=1/C,B=T/10,D=0;D<=C;D++){var Y=D*T,K=[g.apply(null,L.concat([Y])),g.apply(null,A.concat([Y]))],H=b.distance(m[0],m[1],K[0],K[1]);H<y&&(d=Y,y=H)}if(d===0)return{x:L[0],y:A[0]};if(d===1){var st=L.length;return{x:L[st-1],y:A[st-1]}}y=Infinity;for(var D=0;D<32&&!(B<I);D++){var pt=d-B,ct=d+B,K=[g.apply(null,L.concat([pt])),g.apply(null,A.concat([pt]))],H=b.distance(m[0],m[1],K[0],K[1]);if(pt>=0&&H<y)d=pt,y=H;else{var Ot=[g.apply(null,L.concat([ct])),g.apply(null,A.concat([ct]))],Rt=b.distance(m[0],m[1],Ot[0],Ot[1]);ct<=1&&Rt<y?(d=ct,y=Rt):B*=.5}}return{x:g.apply(null,L.concat([d])),y:g.apply(null,A.concat([d]))}}S.nearestPoint=P;function O(L,A){for(var _=0,E=L.length,g=0;g<E;g++){var w=L[g],d=A[g],y=L[(g+1)%E],m=A[(g+1)%E];_+=b.distance(w,d,y,m)}return _/2}S.snapLength=O},15730:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(76256),I=p(23646),P=p(87335);function O(g,w,d,y,m){var C=1-m;return C*C*C*g+3*w*m*C*C+3*d*m*m*C+y*m*m*m}function L(g,w,d,y,m){var C=1-m;return 3*(C*C*(w-g)+2*C*m*(d-w)+m*m*(y-d))}function A(g,w,d,y){var m=-3*g+9*w-9*d+3*y,C=6*g-12*w+6*d,T=3*w-3*g,B=[],D,Y,K;if(b.isNumberEqual(m,0))b.isNumberEqual(C,0)||(D=-T/C,D>=0&&D<=1&&B.push(D));else{var H=C*C-4*m*T;b.isNumberEqual(H,0)?B.push(-C/(2*m)):H>0&&(K=Math.sqrt(H),D=(-C+K)/(2*m),Y=(-C-K)/(2*m),D>=0&&D<=1&&B.push(D),Y>=0&&Y<=1&&B.push(Y))}return B}function _(g,w,d,y,m,C,T,B,D){var Y=O(g,d,m,T,D),K=O(w,y,C,B,D),H=I.default.pointAt(g,w,d,y,D),st=I.default.pointAt(d,y,m,C,D),pt=I.default.pointAt(m,C,T,B,D),ct=I.default.pointAt(H.x,H.y,st.x,st.y,D),Ot=I.default.pointAt(st.x,st.y,pt.x,pt.y,D);return[[g,w,H.x,H.y,ct.x,ct.y,Y,K],[Y,K,Ot.x,Ot.y,pt.x,pt.y,T,B]]}function E(g,w,d,y,m,C,T,B,D){if(D===0)return P.snapLength([g,d,m,T],[w,y,C,B]);var Y=_(g,w,d,y,m,C,T,B,.5),K=Y[0],H=Y[1];return K.push(D-1),H.push(D-1),E.apply(null,K)+E.apply(null,H)}S.default={extrema:A,box:function(g,w,d,y,m,C,T,B){for(var D=[g,T],Y=[w,B],K=A(g,d,m,T),H=A(w,y,C,B),st=0;st<K.length;st++)D.push(O(g,d,m,T,K[st]));for(var st=0;st<H.length;st++)Y.push(O(w,y,C,B,H[st]));return b.getBBoxByArray(D,Y)},length:function(g,w,d,y,m,C,T,B){return E(g,w,d,y,m,C,T,B,3)},nearestPoint:function(g,w,d,y,m,C,T,B,D,Y,K){return P.nearestPoint([g,d,m,T],[w,y,C,B],D,Y,O,K)},pointDistance:function(g,w,d,y,m,C,T,B,D,Y,K){var H=this.nearestPoint(g,w,d,y,m,C,T,B,D,Y,K);return b.distance(H.x,H.y,D,Y)},interpolationAt:O,pointAt:function(g,w,d,y,m,C,T,B,D){return{x:O(g,d,m,T,D),y:O(w,y,C,B,D)}},divide:function(g,w,d,y,m,C,T,B,D){return _(g,w,d,y,m,C,T,B,D)},tangentAngle:function(g,w,d,y,m,C,T,B,D){var Y=L(g,d,m,T,D),K=L(w,y,C,B,D);return b.piMod(Math.atan2(K,Y))}}},55397:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(76256);function I(P,O){var L=Math.abs(P);return O>0?L:L*-1}S.default={box:function(P,O,L,A){return{x:P-L,y:O-A,width:L*2,height:A*2}},length:function(P,O,L,A){return Math.PI*(3*(L+A)-Math.sqrt((3*L+A)*(L+3*A)))},nearestPoint:function(P,O,L,A,_,E){var g=L,w=A;if(g===0||w===0)return{x:P,y:O};for(var d=_-P,y=E-O,m=Math.abs(d),C=Math.abs(y),T=g*g,B=w*w,D=Math.PI/4,Y,K,H=0;H<4;H++){Y=g*Math.cos(D),K=w*Math.sin(D);var st=(T-B)*Math.pow(Math.cos(D),3)/g,pt=(B-T)*Math.pow(Math.sin(D),3)/w,ct=Y-st,Ot=K-pt,Rt=m-st,Qt=C-pt,Gt=Math.hypot(Ot,ct),Z=Math.hypot(Qt,Rt),nt=Gt*Math.asin((ct*Qt-Ot*Rt)/(Gt*Z)),Q=nt/Math.sqrt(T+B-Y*Y-K*K);D+=Q,D=Math.min(Math.PI/2,Math.max(0,D))}return{x:P+I(Y,d),y:O+I(K,y)}},pointDistance:function(P,O,L,A,_,E){var g=this.nearestPoint(P,O,L,A,_,E);return b.distance(g.x,g.y,_,E)},pointAt:function(P,O,L,A,_){var E=2*Math.PI*_;return{x:P+L*Math.cos(E),y:O+A*Math.sin(E)}},tangentAngle:function(P,O,L,A,_){var E=2*Math.PI*_,g=Math.atan2(A*Math.cos(E),-L*Math.sin(E));return b.piMod(g)}}},23646:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(76256),I=p(31437);S.default={box:function(P,O,L,A){return b.getBBoxByArray([P,L],[O,A])},length:function(P,O,L,A){return b.distance(P,O,L,A)},pointAt:function(P,O,L,A,_){return{x:(1-_)*P+_*L,y:(1-_)*O+_*A}},pointDistance:function(P,O,L,A,_,E){var g=(L-P)*(_-P)+(A-O)*(E-O);if(g<0)return b.distance(P,O,_,E);var w=(L-P)*(L-P)+(A-O)*(A-O);return g>w?b.distance(L,A,_,E):this.pointToLine(P,O,L,A,_,E)},pointToLine:function(P,O,L,A,_,E){var g=[L-P,A-O];if(I.exactEquals(g,[0,0]))return Math.sqrt((_-P)*(_-P)+(E-O)*(E-O));var w=[-g[1],g[0]];I.normalize(w,w);var d=[_-P,E-O];return Math.abs(I.dot(d,w))},tangentAngle:function(P,O,L,A){return Math.atan2(A-O,L-P)}}},65386:function(Ct,S,p){"use strict";var b;b={value:!0};var I=p(28171),P=p(76256);S.Z={box:function(O){for(var L=[],A=[],_=0;_<O.length;_++){var E=O[_];L.push(E[0]),A.push(E[1])}return P.getBBoxByArray(L,A)},length:function(O){return I.lengthOfSegment(O)},pointAt:function(O,L){return I.pointAtSegments(O,L)},pointDistance:function(O,L,A){return I.distanceAtSegment(O,L,A)},tangentAngle:function(O,L){return I.angleAtSegments(O,L)}}},2879:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(23646),I=p(76256),P=p(87335);function O(g,w,d,y){var m=1-y;return m*m*g+2*y*m*w+y*y*d}function L(g,w,d){var y=g+d-2*w;if(I.isNumberEqual(y,0))return[.5];var m=(g-w)/y;return m<=1&&m>=0?[m]:[]}function A(g,w,d,y){return 2*(1-y)*(w-g)+2*y*(d-w)}function _(g,w,d,y,m,C,T){var B=O(g,d,m,T),D=O(w,y,C,T),Y=b.default.pointAt(g,w,d,y,T),K=b.default.pointAt(d,y,m,C,T);return[[g,w,Y.x,Y.y,B,D],[B,D,K.x,K.y,m,C]]}function E(g,w,d,y,m,C,T){if(T===0)return(I.distance(g,w,d,y)+I.distance(d,y,m,C)+I.distance(g,w,m,C))/2;var B=_(g,w,d,y,m,C,.5),D=B[0],Y=B[1];return D.push(T-1),Y.push(T-1),E.apply(null,D)+E.apply(null,Y)}S.default={box:function(g,w,d,y,m,C){var T=L(g,d,m)[0],B=L(w,y,C)[0],D=[g,m],Y=[w,C];return T!==void 0&&D.push(O(g,d,m,T)),B!==void 0&&Y.push(O(w,y,C,B)),I.getBBoxByArray(D,Y)},length:function(g,w,d,y,m,C){return E(g,w,d,y,m,C,3)},nearestPoint:function(g,w,d,y,m,C,T,B){return P.nearestPoint([g,d,m],[w,y,C],T,B,O)},pointDistance:function(g,w,d,y,m,C,T,B){var D=this.nearestPoint(g,w,d,y,m,C,T,B);return I.distance(D.x,D.y,T,B)},interpolationAt:O,pointAt:function(g,w,d,y,m,C,T){return{x:O(g,d,m,T),y:O(w,y,C,T)}},divide:function(g,w,d,y,m,C,T){return _(g,w,d,y,m,C,T)},tangentAngle:function(g,w,d,y,m,C,T){var B=A(g,d,m,T),D=A(w,y,C,T),Y=Math.atan2(D,B);return I.piMod(Y)}}},28171:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.distanceAtSegment=S.angleAtSegments=S.pointAtSegments=S.lengthOfSegment=void 0;var b=p(23646),I=p(76256);function P(E){for(var g=0,w=[],d=0;d<E.length-1;d++){var y=E[d],m=E[d+1],C=I.distance(y[0],y[1],m[0],m[1]),T={from:y,to:m,length:C};w.push(T),g+=C}return{segments:w,totalLength:g}}function O(E){if(E.length<2)return 0;for(var g=0,w=0;w<E.length-1;w++){var d=E[w],y=E[w+1];g+=I.distance(d[0],d[1],y[0],y[1])}return g}S.lengthOfSegment=O;function L(E,g){if(g>1||g<0||E.length<2)return null;var w=P(E),d=w.segments,y=w.totalLength;if(y===0)return{x:E[0][0],y:E[0][1]};for(var m=0,C=null,T=0;T<d.length;T++){var B=d[T],D=B.from,Y=B.to,K=B.length/y;if(g>=m&&g<=m+K){var H=(g-m)/K;C=b.default.pointAt(D[0],D[1],Y[0],Y[1],H);break}m+=K}return C}S.pointAtSegments=L;function A(E,g){if(g>1||g<0||E.length<2)return 0;for(var w=P(E),d=w.segments,y=w.totalLength,m=0,C=0,T=0;T<d.length;T++){var B=d[T],D=B.from,Y=B.to,K=B.length/y;if(g>=m&&g<=m+K){C=Math.atan2(Y[1]-D[1],Y[0]-D[0]);break}m+=K}return C}S.angleAtSegments=A;function _(E,g,w){for(var d=Infinity,y=0;y<E.length-1;y++){var m=E[y],C=E[y+1],T=b.default.pointDistance(m[0],m[1],C[0],C[1],g,w);T<d&&(d=T)}return d}S.distanceAtSegment=_},76256:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.piMod=S.getBBoxRange=S.getBBoxByArray=S.isNumberEqual=S.distance=void 0;function p(_){return Math.min.apply(null,_)}function b(_){return Math.max.apply(null,_)}function I(_,E,g,w){var d=_-g,y=E-w;return Math.sqrt(d*d+y*y)}S.distance=I;function P(_,E){return Math.abs(_-E)<.001}S.isNumberEqual=P;function O(_,E){var g=p(_),w=p(E),d=b(_),y=b(E);return{x:g,y:w,width:d-g,height:y-w}}S.getBBoxByArray=O;function L(_,E,g,w){return{minX:p([_,g]),maxX:b([_,g]),minY:p([E,w]),maxY:b([E,w])}}S.getBBoxRange=L;function A(_){return(_+Math.PI*2)%(Math.PI*2)}S.piMod=A},56463:function(Ct,S,p){"use strict";var b=p(34155),I=this&&this.__spreadArrays||function(){for(var B=0,D=0,Y=arguments.length;D<Y;D++)B+=arguments[D].length;for(var K=Array(B),H=0,D=0;D<Y;D++)for(var st=arguments[D],pt=0,ct=st.length;pt<ct;pt++,H++)K[H]=st[pt];return K};Object.defineProperty(S,"__esModule",{value:!0});var P=function(){function B(D,Y,K){this.name=D,this.version=Y,this.os=K}return B}();S.BrowserInfo=P;var O=function(){function B(D){this.version=D,this.name="node",this.os=b.platform}return B}();S.NodeInfo=O;var L=function(){function B(){this.bot=!0,this.name="bot",this.version=null,this.os=null}return B}();S.BotInfo=L;var A=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,_=/(nuhk)|(Googlebot)|(Yammybot)|(Openbot)|(Slurp)|(MSNBot)|(Ask Jeeves\/Teoma)|(ia_archiver)/,E=3,g=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["vivaldi",/Vivaldi\/([0-9\.]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/Edg\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",A]],w=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/],["Search Bot",_]];function d(B){return B?y(B):typeof navigator!="undefined"?y(navigator.userAgent):C()}S.detect=d;function y(B){var D=B!==""&&g.reduce(function(st,pt){var ct=pt[0],Ot=pt[1];if(st)return st;var Rt=Ot.exec(B);return!!Rt&&[ct,Rt]},!1);if(!D)return null;var Y=D[0],K=D[1];if(Y==="searchbot")return new L;var H=K[1]&&K[1].split(/[._]/).slice(0,3);return H?H.length<E&&(H=I(H,T(E-H.length))):H=[],new P(Y,H.join("."),m(B))}S.parseUserAgent=y;function m(B){for(var D=0,Y=w.length;D<Y;D++){var K=w[D],H=K[0],st=K[1],pt=st.test(B);if(pt)return H}return null}S.detectOS=m;function C(){var B=typeof b!="undefined"&&b.version;return B?new O(b.version.slice(1)):null}S.getNodeVersion=C;function T(B){for(var D=[],Y=0;Y<B;Y++)D.push("0");return D}},23231:function(Ct){"use strict";Ct.exports=JSON.parse('{"name":"@antv/g-svg","version":"0.4.7","description":"A canvas library which providing 2d","main":"lib/index.js","module":"esm/index.js","unpkg":"dist/g.min.js","types":"lib/index.d.ts","files":["package.json","esm","lib","dist","LICENSE","README.md"],"scripts":{"build":"npm run clean && run-p build:*","build:esm":"tsc -p tsconfig.json --target ES5 --module ESNext --outDir esm","build:cjs":"tsc -p tsconfig.json --target ES5 --module commonjs --outDir lib","build:umd":"webpack --config webpack.config.js --mode production","clean":"rm -rf esm lib dist","coverage":"npm run coverage-generator && npm run coverage-viewer","coverage-generator":"torch --coverage --compile --source-pattern src/*.js,src/**/*.js --opts tests/mocha.opts","coverage-viewer":"torch-coverage","test":"torch --renderer --compile --opts tests/mocha.opts","test-live":"torch --compile --interactive --opts tests/mocha.opts","tsc":"tsc --noEmit","typecheck":"tsc --noEmit"},"repository":{"type":"git","url":"git+https://github.com/antvis/g.git"},"keywords":["util","antv","g"],"publishConfig":{"access":"public"},"author":"https://github.com/orgs/antvis/people","license":"ISC","bugs":{"url":"https://github.com/antvis/g/issues"},"devDependencies":{"@antv/torch":"^1.0.0","less":"^3.9.0","npm-run-all":"^4.1.5","webpack":"^4.39.3","webpack-cli":"^3.3.7"},"homepage":"https://github.com/antvis/g#readme","dependencies":{"@antv/g-base":"^0.4.7","@antv/g-math":"^0.1.3","@antv/util":"~2.0.0","detect-browser":"^4.6.0"},"__npminstall_done":false,"gitHead":"eb6a2503cb7bb8154697592b10680939d954a31a"}')},66002:function(){},92762:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.registerAnimation=S.getAnimation=void 0;var p={};function b(P){return p[P.toLowerCase()]}S.getAnimation=b;function I(P,O){p[P.toLowerCase()]=O}S.registerAnimation=I},27978:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.doGroupAppearAnimate=S.doAnimate=S.getDefaultAnimateCfg=S.DEFAULT_ANIMATE_CFG=void 0;var b=p(60517),I=p(49242),P=p(29583),O=p(92762);S.DEFAULT_ANIMATE_CFG={appear:{duration:450,easing:"easeQuadOut"},update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}};var L={interval:function(d){return{enter:{animation:d.isRect?d.isTransposed?"scale-in-x":"scale-in-y":"fade-in"},update:{animation:d.isPolar&&d.isTransposed?"sector-path-update":null},leave:{animation:"fade-out"}}},line:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},path:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},point:{appear:{animation:"zoom-in"},enter:{animation:"zoom-in"},leave:{animation:"zoom-out"}},area:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},polygon:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},schema:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},edge:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},label:{appear:{animation:"fade-in",delay:450},enter:{animation:"fade-in"},update:{animation:"position-update"},leave:{animation:"fade-out"}}},A={line:function(){return{animation:"wave-in"}},area:function(){return{animation:"wave-in"}},path:function(){return{animation:"fade-in"}},interval:function(d){var y;return d.isRect?y=d.isTransposed?"grow-in-x":"grow-in-y":(y="grow-in-xy",d.isPolar&&d.isTransposed&&(y="wave-in")),{animation:y}},schema:function(d){var y;return d.isRect?y=d.isTransposed?"grow-in-x":"grow-in-y":y="grow-in-xy",{animation:y}},polygon:function(){return{animation:"fade-in",duration:500}},edge:function(){return{animation:"fade-in"}}};function _(d,y){return{delay:I.isFunction(d.delay)?d.delay(y):d.delay,easing:I.isFunction(d.easing)?d.easing(y):d.easing,duration:I.isFunction(d.duration)?d.duration(y):d.duration,callback:d.callback}}function E(d,y,m){var C=L[d];return C&&(I.isFunction(C)&&(C=C(y)),C=I.deepMix({},S.DEFAULT_ANIMATE_CFG,C),m)?C[m]:C}S.getDefaultAnimateCfg=E;function g(d,y,m){var C=I.get(d.get("origin"),"data",P.FIELD_ORIGIN),T=y.animation,B=_(y,C);if(T){var D=O.getAnimation(T);D&&D(d,B,m)}else d.animate(m.toAttrs,B)}S.doAnimate=g;function w(d,y,m,C,T){if(A[m]){var B=A[m](C),D=O.getAnimation(I.get(B,"animation",""));if(D){var Y=b.__assign(b.__assign(b.__assign({},S.DEFAULT_ANIMATE_CFG.appear),B),y);d.stopAnimate(),D(d,Y,{coordinate:C,minYPoint:T,toAttrs:null})}}}S.doGroupAppearAnimate=w},29515:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(60517),I=b.__importDefault(p(90494)),P=function(O){b.__extends(L,O);function L(A){var _=O.call(this)||this;_.destroyed=!1;var E=A.visible,g=E===void 0?!0:E;return _.visible=g,_}return L.prototype.show=function(){var A=this.visible;A||this.changeVisible(!0)},L.prototype.hide=function(){var A=this.visible;A&&this.changeVisible(!1)},L.prototype.destroy=function(){this.off(),this.destroyed=!0},L.prototype.changeVisible=function(A){this.visible!==A&&(this.visible=A)},L}(I.default);S.default=P},17916:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Controller=void 0;var b=p(49242),I=function(){function P(O){this.visible=!0,this.components=[],this.view=O}return P.prototype.clear=function(){b.each(this.components,function(O){O.component.destroy()}),this.components=[]},P.prototype.destroy=function(){this.clear()},P.prototype.getComponents=function(){return this.components},P.prototype.changeVisible=function(O){this.visible!==O&&(this.components.forEach(function(L){O?L.component.show():L.component.hide()}),this.visible=O)},P}();S.Controller=I},45687:function(Ct,S,p){"use strict";var b;b={value:!0};var I=p(60517),P=p(17916),O=250,L=function(w,d){var y=d.x-w.x,m=d.y-w.y;return Math.abs(y)>Math.abs(m)?y>0?"right":"left":m>0?"down":"up"},A=function(w,d){var y=Math.abs(d.x-w.x),m=Math.abs(d.y-w.y);return Math.sqrt(y*y+m*m)},_=function(w,d){var y=(w.x+d.x)/2,m=(w.y+d.y)/2;return{x:y,y:m}},E=function(w,d){if(!!w){for(var y=[],m=w.length,C=0;C<m;C++){var T=w[C],B=T.clientX,D=T.clientY,Y=d.getPointByClient(B,D);y.push(Y)}return y}},g=function(w){I.__extends(d,w);function d(y){var m=w.call(this,y)||this;return m.processEvent={},m.touchStart=function(C){var T=E(C.originalEvent.touches,m.canvas);!T||(C.points=T,m.reset(),m.startTime=Date.now(),m.startPoints=T,T.length>1?(m.startDistance=A(T[0],T[1]),m.center=_(T[0],T[1])):m.pressTimeout=setTimeout(function(){var B="press";C.direction="none",m.emitStart(B,C),m.emitEvent(B,C),m.eventType=B},O))},m.touchMove=function(C){var T=E(C.originalEvent.touches,m.canvas);if(!!T){m.clearPressTimeout(),C.points=T;var B=m.startPoints;if(!!B)if(T.length>1){var D=m.startDistance,Y=A(T[0],T[1]);C.zoom=Y/D,C.center=m.center,m.emitStart("pinch",C),m.emitEvent("pinch",C)}else{var K=T[0].x-B[0].x,H=T[0].y-B[0].y,st=m.direction||L(B[0],T[0]);m.direction=st;var pt=m.getEventType(T);C.direction=st,C.deltaX=K,C.deltaY=H,m.emitStart(pt,C),m.emitEvent(pt,C);var ct=m.lastMoveTime,Ot=Date.now();Ot-ct>0&&(m.prevMoveTime=ct,m.prevMovePoints=m.lastMovePoints,m.lastMoveTime=Ot,m.lastMovePoints=T)}}},m.touchEnd=function(C){m.emitEnd(C);var T=m.lastMoveTime,B=Date.now();if(B-T<100){var D=m.prevMoveTime||m.startTime,Y=T-D;if(Y>0){var K=m.prevMovePoints||m.startPoints,H=m.lastMovePoints,st=A(K[0],H[0])/Y;st>.3&&(C.velocity=st,C.direction=L(K[0],H[0]),m.emitEvent("swipe",C))}}m.reset();var pt=C.touches;pt&&pt.length>0&&m.touchStart(C)},m.canvas=y.getCanvas(),m.delegateEvent(),m.processEvent={},m}return Object.defineProperty(d.prototype,"name",{get:function(){return"gesture"},enumerable:!1,configurable:!0}),d.prototype.init=function(){},d.prototype.render=function(){},d.prototype.layout=function(){},d.prototype.update=function(){},d.prototype.destroy=function(){this.reset(),this.offEvent(),this.processEvent=null},d.prototype.delegateEvent=function(){this.canvas.on("touchstart",this.touchStart),this.canvas.on("touchmove",this.touchMove),this.canvas.on("touchend",this.touchEnd)},d.prototype.offEvent=function(){this.canvas.off("touchstart",this.touchStart),this.canvas.off("touchmove",this.touchMove),this.canvas.off("touchend",this.touchEnd)},d.prototype.emitEvent=function(y,m){var C=this.view;C.emit(y,m)},d.prototype.emitStart=function(y,m){this.isProcess(y)||(this.enable(y),this.emitEvent(y+"start",m))},d.prototype.emitEnd=function(y){var m=this,C=this.processEvent;Object.keys(C).forEach(function(T){m.emitEvent(T+"end",y),delete C[T]})},d.prototype.enable=function(y){this.processEvent[y]=!0},d.prototype.isProcess=function(y){return this.processEvent[y]},d.prototype.reset=function(){this.clearPressTimeout(),this.startTime=0,this.startPoints=null,this.startDistance=0,this.direction=null,this.eventType=null,this.prevMoveTime=0,this.prevMovePoints=null,this.lastMoveTime=0,this.lastMovePoints=null},d.prototype.clearPressTimeout=function(){this.pressTimeout&&(clearTimeout(this.pressTimeout),this.pressTimeout=0)},d.prototype.getEventType=function(y){var m=this,C=m.eventType,T=m.view,B=m.startTime,D=m.startPoints;if(C)return C;var Y,K=T.getEvents().pan;if(!K||!K.length)Y="press";else{var H=Date.now();H-B>O&&A(D[0],y[0])<10?Y="press":Y="pan"}return this.eventType=Y,Y},d}(P.Controller);S.Z=g},64815:function(Ct,S,p){"use strict";var b;b={value:!0};var I=p(60517),P=p(49242),O=p(57029),L=p(22514),A=p(42770),_=p(99677),E=p(17916);function g(d){for(var y=[],m=function(T){var B=d[T],D=P.find(y,function(Y){return Y.color===B.color&&Y.name===B.name&&Y.value===B.value&&Y.title===B.title});D||y.push(B)},C=0;C<d.length;C++)m(C);return y}var w=function(d){I.__extends(y,d);function y(){var m=d!==null&&d.apply(this,arguments)||this;return m.isLocked=!1,m}return Object.defineProperty(y.prototype,"name",{get:function(){return"tooltip"},enumerable:!1,configurable:!0}),y.prototype.init=function(){},y.prototype.isVisible=function(){var m=this.view.getOptions().tooltip;return m!==!1},y.prototype.render=function(){},y.prototype.showTooltip=function(m){if(this.point=m,!!this.isVisible()){var C=this.view,T=this.getTooltipItems(m);if(!T.length){this.hideTooltip();return}var B=this.getTitle(T),D={x:T[0].x,y:T[0].y};C.emit("tooltip:show",I.__assign({items:T,title:B},m));var Y=this.getTooltipCfg(),K=Y.follow,H=Y.showMarkers,st=Y.showCrosshairs,pt=Y.showContent,ct=Y.marker,Ot=this.items,Rt=this.title;if(!P.isEqual(Rt,B)||!P.isEqual(Ot,T)?(C.emit("tooltip:change",I.__assign({items:T,title:B},m)),pt&&(this.tooltip||this.renderTooltip(),this.tooltip.update(P.mix({},Y,{items:T,title:B},K?m:{})),this.tooltip.show()),H&&this.renderTooltipMarkers(T,ct)):(this.tooltip&&K&&(this.tooltip.update(m),this.tooltip.show()),this.tooltipMarkersGroup&&this.tooltipMarkersGroup.show()),this.items=T,this.title=B,st){var Qt=P.get(Y,["crosshairs","follow"],!1);this.renderCrosshairs(Qt?m:D,Y)}}},y.prototype.hideTooltip=function(){var m=this.getTooltipCfg().follow;if(!m){this.point=null;return}var C=this.tooltipMarkersGroup;C&&C.hide();var T=this.xCrosshair,B=this.yCrosshair;T&&T.hide(),B&&B.hide();var D=this.tooltip;D&&D.hide(),this.view.emit("tooltip:hide",{}),this.point=null},y.prototype.lockTooltip=function(){this.isLocked=!0,this.tooltip&&this.tooltip.setCapture(!0)},y.prototype.unlockTooltip=function(){this.isLocked=!1;var m=this.getTooltipCfg();this.tooltip&&this.tooltip.setCapture(m.capture)},y.prototype.isTooltipLocked=function(){return this.isLocked},y.prototype.clear=function(){var m=this,C=m.tooltip,T=m.xCrosshair,B=m.yCrosshair,D=m.tooltipMarkersGroup;C&&(C.hide(),C.clear()),T&&T.clear(),B&&B.clear(),D&&D.clear()},y.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.xCrosshair&&this.xCrosshair.destroy(),this.yCrosshair&&this.yCrosshair.destroy(),this.guideGroup&&this.guideGroup.remove(!0),this.items=null,this.title=null,this.tooltipMarkersGroup=null,this.tooltipCrosshairsGroup=null,this.xCrosshair=null,this.yCrosshair=null,this.tooltip=null,this.guideGroup=null,this.isLocked=!1,this.point=null},y.prototype.changeVisible=function(m){if(this.visible!==m){var C=this,T=C.tooltip,B=C.tooltipMarkersGroup,D=C.xCrosshair,Y=C.yCrosshair;m?(T&&T.show(),B&&B.show(),D&&D.show(),Y&&Y.show()):(T&&T.hide(),B&&B.hide(),D&&D.hide(),Y&&Y.hide()),this.visible=m}},y.prototype.getTooltipItems=function(m){var C=this.findItemsFromView(this.view,m);if(C.length){C=P.flatten(C);for(var T=0,B=C;T<B.length;T++)for(var D=B[T],Y=0,K=D;Y<K.length;Y++){var H=K[Y],st=H.mappingData,pt=st.x,ct=st.y;H.x=P.isArray(pt)?pt[pt.length-1]:pt,H.y=P.isArray(ct)?ct[ct.length-1]:ct}var Ot=this.getTooltipCfg().shared;if(Ot===!1&&C.length>1){for(var Rt=C[0],Qt=Math.abs(m.y-Rt[0].y),Gt=0,Z=C;Gt<Z.length;Gt++){var nt=Z[Gt],Q=Math.abs(m.y-nt[0].y);Q<=Qt&&(Rt=nt,Qt=Q)}C=[Rt]}return g(P.flatten(C))}return[]},y.prototype.layout=function(){},y.prototype.update=function(){if(this.point&&this.showTooltip(this.point),this.tooltip){var m=this.view.getCanvas();this.tooltip.set("region",{start:{x:0,y:0},end:{x:m.get("width"),y:m.get("height")}})}},y.prototype.getTooltipCfg=function(){var m=this.view,C=m.getOptions().tooltip,T=m.getTheme(),B=P.get(T,["components","tooltip"],{}),D=P.isUndefined(P.get(C,"enterable"))?B.enterable:P.get(C,"enterable");return P.deepMix({},B,C,{capture:!!(D||this.isLocked)})},y.prototype.getTitle=function(m){var C=m[0].title||m[0].name;return this.title=C,C},y.prototype.renderTooltip=function(){var m=this.view.getCanvas(),C={start:{x:0,y:0},end:{x:m.get("width"),y:m.get("height")}},T=this.getTooltipCfg(),B=new O.HtmlTooltip(I.__assign(I.__assign({parent:m.get("el").parentNode,region:C},T),{visible:!1,crosshairs:null}));B.init(),this.tooltip=B},y.prototype.renderTooltipMarkers=function(m,C){for(var T=this.getTooltipMarkersGroup(),B=0,D=m;B<D.length;B++){var Y=D[B],K=Y.x,H=Y.y,st=I.__assign(I.__assign({fill:Y.color,symbol:"circle",shadowColor:Y.color},C),{x:K,y:H});T.addShape("marker",{attrs:st})}},y.prototype.renderCrosshairs=function(m,C){var T=P.get(C,["crosshairs","type"],"x");T==="x"?(this.yCrosshair&&this.yCrosshair.hide(),this.renderXCrosshairs(m,C)):T==="y"?(this.xCrosshair&&this.xCrosshair.hide(),this.renderYCrosshairs(m,C)):T==="xy"&&(this.renderXCrosshairs(m,C),this.renderYCrosshairs(m,C))},y.prototype.renderXCrosshairs=function(m,C){var T=this.getViewWithGeometry(this.view).getCoordinate();if(!!L.isPointInCoordinate(T,m)){var B,D;if(T.isRect)T.isTransposed?(B={x:T.start.x,y:m.y},D={x:T.end.x,y:m.y}):(B={x:m.x,y:T.end.y},D={x:m.x,y:T.start.y});else{var Y=L.getAngleByPoint(T,m),K=T.getCenter(),H=T.getRadius();D=A.polarToCartesian(K.x,K.y,H,Y),B=K}var st=P.deepMix({start:B,end:D,container:this.getTooltipCrosshairsGroup()},P.get(C,"crosshairs",{}),this.getCrosshairsText("x",m,C));delete st.type;var pt=this.xCrosshair;pt?pt.update(st):(pt=new O.Crosshair.Line(st),pt.init()),pt.render(),pt.show(),this.xCrosshair=pt}},y.prototype.renderYCrosshairs=function(m,C){var T=this.getViewWithGeometry(this.view).getCoordinate();if(!!L.isPointInCoordinate(T,m)){var B,D;if(T.isRect){var Y=void 0,K=void 0;T.isTransposed?(Y={x:m.x,y:T.end.y},K={x:m.x,y:T.start.y}):(Y={x:T.start.x,y:m.y},K={x:T.end.x,y:m.y}),B={start:Y,end:K},D="Line"}else B={center:T.getCenter(),radius:L.getDistanceToCenter(T,m),startAngle:T.startAngle,endAngle:T.endAngle},D="Circle";B=P.deepMix({container:this.getTooltipCrosshairsGroup()},B,P.get(C,"crosshairs",{}),this.getCrosshairsText("y",m,C)),delete B.type;var H=this.yCrosshair;H?T.isRect&&H.get("type")==="circle"||!T.isRect&&H.get("type")==="line"?(H=new O.Crosshair[D](B),H.init()):H.update(B):(H=new O.Crosshair[D](B),H.init()),H.render(),H.show(),this.yCrosshair=H}},y.prototype.getCrosshairsText=function(m,C,T){var B=P.get(T,["crosshairs","text"]),D=P.get(T,["crosshairs","follow"]),Y=this.items;if(B){var K=this.getViewWithGeometry(this.view),H=Y[0],st=K.getXScale(),pt=K.getYScales()[0],ct=void 0,Ot=void 0;if(D){var Rt=this.view.getCoordinate().invert(C);ct=st.invert(Rt.x),Ot=pt.invert(Rt.y)}else ct=H.data[st.field],Ot=H.data[pt.field];var Qt=m==="x"?ct:Ot;return P.isFunction(B)?B=B(m,Qt,Y,C):B.content=Qt,{text:B}}},y.prototype.getGuideGroup=function(){if(!this.guideGroup){var m=this.view.foregroundGroup;this.guideGroup=m.addGroup({name:"tooltipGuide",capture:!1})}return this.guideGroup},y.prototype.getTooltipMarkersGroup=function(){var m=this.tooltipMarkersGroup;return m&&!m.destroyed?(m.clear(),m.show()):(m=this.getGuideGroup().addGroup({name:"tooltipMarkersGroup"}),m.toFront(),this.tooltipMarkersGroup=m),m},y.prototype.getTooltipCrosshairsGroup=function(){var m=this.tooltipCrosshairsGroup;return m||(m=this.getGuideGroup().addGroup({name:"tooltipCrosshairsGroup",capture:!1}),m.toBack(),this.tooltipCrosshairsGroup=m),m},y.prototype.getTooltipItemsByHitShape=function(m,C,T){var B=[],D=m.container,Y=D.getShape(C.x,C.y);if(Y&&Y.get("visible")&&Y.get("origin")){var K=Y.get("origin").mappingData,H=_.getTooltipItems(K,m,T);H.length&&B.push(H)}return B},y.prototype.getTooltipItemsByFindData=function(m,C,T){var B=[],D=m.dataArray;m.sort(D);for(var Y=0,K=D;Y<K.length;Y++){var H=K[Y],st=_.findDataByPoint(C,H,m);if(st){var pt=m.getElementId(st),ct=m.elementsMap[pt];if(m.type==="heatmap"||ct.visible){var Ot=_.getTooltipItems(st,m,T);Ot.length&&B.push(Ot)}}}return B},y.prototype.findItemsFromView=function(m,C){if(m.getOptions().tooltip===!1)return[];for(var T=[],B=m.geometries,D=this.getTooltipCfg(),Y=D.shared,K=D.title,H=0,st=B;H<st.length;H++){var pt=st[H];if(pt.visible&&pt.tooltipOption!==!1){var ct=pt.type,Ot=void 0;["point","edge","polygon"].includes(ct)?Ot=this.getTooltipItemsByHitShape(pt,C,K):["area","line","path","heatmap"].includes(ct)?Ot=this.getTooltipItemsByFindData(pt,C,K):Y!==!1?Ot=this.getTooltipItemsByFindData(pt,C,K):Ot=this.getTooltipItemsByHitShape(pt,C,K),Ot.length&&T.push(Ot)}}for(var Rt=0,Qt=m.views;Rt<Qt.length;Rt++){var Gt=Qt[Rt];T=T.concat(this.findItemsFromView(Gt,C))}return T},y.prototype.getViewWithGeometry=function(m){var C=this;return m.geometries.length?m:P.find(m.views,function(T){return C.getViewWithGeometry(T)})},y}(E.Controller);S.Z=w},29583:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.COMPONENT_MAX_VIEW_PERCENTAGE=S.MIN_CHART_HEIGHT=S.MIN_CHART_WIDTH=S.FIELD_ORIGIN=S.GROUP_ATTRS=S.ELEMENT_STATE=S.PLOT_EVENTS=S.VIEW_LIFE_CIRCLE=S.GROUP_Z_INDEX=S.COMPONENT_TYPE=S.DIRECTION=S.LAYER=void 0;var p;(function(A){A.FORE="fore",A.MID="mid",A.BG="bg"})(p=S.LAYER||(S.LAYER={}));var b;(function(A){A.TOP="top",A.TOP_LEFT="top-left",A.TOP_RIGHT="top-right",A.RIGHT="right",A.RIGHT_TOP="right-top",A.RIGHT_BOTTOM="right-bottom",A.LEFT="left",A.LEFT_TOP="left-top",A.LEFT_BOTTOM="left-bottom",A.BOTTOM="bottom",A.BOTTOM_LEFT="bottom-left",A.BOTTOM_RIGHT="bottom-right",A.RADIUS="radius",A.CIRCLE="circle",A.NONE="none"})(b=S.DIRECTION||(S.DIRECTION={}));var I;(function(A){A.AXIS="axis",A.GRID="grid",A.LEGEND="legend",A.TOOLTIP="tooltip",A.ANNOTATION="annotation",A.OTHER="other"})(I=S.COMPONENT_TYPE||(S.COMPONENT_TYPE={})),S.GROUP_Z_INDEX={FORE:3,MID:2,BG:1};var P;(function(A){A.BEFORE_RENDER="beforerender",A.AFTER_RENDER="afterrender",A.BEFORE_PAINT="beforepaint",A.AFTER_PAINT="afterpaint",A.BEFORE_CHANGE_DATA="beforechangedata",A.AFTER_CHANGE_DATA="afterchangedata",A.BEFORE_CLEAR="beforeclear",A.AFTER_CLEAR="afterclear",A.BEFORE_DESTROY="beforedestroy"})(P=S.VIEW_LIFE_CIRCLE||(S.VIEW_LIFE_CIRCLE={}));var O;(function(A){A.MOUSE_ENTER="plot:mouseenter",A.MOUSE_DOWN="plot:mousedown",A.MOUSE_MOVE="plot:mousemove",A.MOUSE_UP="plot:mouseup",A.MOUSE_LEAVE="plot:mouseleave",A.TOUCH_START="plot:touchstart",A.TOUCH_MOVE="plot:touchmove",A.TOUCH_END="plot:touchend",A.TOUCH_CANCEL="plot:touchcancel",A.CLICK="plot:click",A.DBLCLICK="plot:dblclick",A.CONTEXTMENU="plot:contextmenu",A.LEAVE="plot:leave",A.ENTER="plot:enter"})(O=S.PLOT_EVENTS||(S.PLOT_EVENTS={}));var L;(function(A){A.ACTIVE="active",A.INACTIVE="inactive",A.SELECTED="selected",A.DEFAULT="default"})(L=S.ELEMENT_STATE||(S.ELEMENT_STATE={})),S.GROUP_ATTRS=["color","shape","size"],S.FIELD_ORIGIN="_origin",S.MIN_CHART_WIDTH=1,S.MIN_CHART_HEIGHT=1,S.COMPONENT_MAX_VIEW_PERCENTAGE=.25},57029:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Slider=S.HtmlTooltip=S.ContinuousLegend=S.CategoryLegend=S.CircleGrid=S.LineGrid=S.CircleAxis=S.LineAxis=S.Annotation=S.Crosshair=S.Component=S.GroupComponent=S.HtmlComponent=void 0;var b=p(39014);Object.defineProperty(S,"Event",{enumerable:!0,get:function(){return b.Event}}),Object.defineProperty(S,"AbstractGroup",{enumerable:!0,get:function(){return b.AbstractGroup}}),Object.defineProperty(S,"AbstractShape",{enumerable:!0,get:function(){return b.AbstractShape}});var I=p(28014);Object.defineProperty(S,"registerAdjust",{enumerable:!0,get:function(){return I.registerAdjust}}),Object.defineProperty(S,"getAdjust",{enumerable:!0,get:function(){return I.getAdjust}}),Object.defineProperty(S,"Adjust",{enumerable:!0,get:function(){return I.Adjust}});var P=p(24796);Object.defineProperty(S,"getAttribute",{enumerable:!0,get:function(){return P.getAttribute}}),Object.defineProperty(S,"Attribute",{enumerable:!0,get:function(){return P.Attribute}});var O=p(21392);Object.defineProperty(S,"Color",{enumerable:!0,get:function(){return O.Color}});var L=p(50782);Object.defineProperty(S,"getCoordinate",{enumerable:!0,get:function(){return L.getCoordinate}}),Object.defineProperty(S,"registerCoordinate",{enumerable:!0,get:function(){return L.registerCoordinate}}),Object.defineProperty(S,"Coordinate",{enumerable:!0,get:function(){return L.Coordinate}});var A=p(2443);Object.defineProperty(S,"getScale",{enumerable:!0,get:function(){return A.getScale}}),Object.defineProperty(S,"registerScale",{enumerable:!0,get:function(){return A.registerScale}}),Object.defineProperty(S,"Scale",{enumerable:!0,get:function(){return A.Scale}});var _=p(51441);Object.defineProperty(S,"Annotation",{enumerable:!0,get:function(){return _.Annotation}}),Object.defineProperty(S,"Component",{enumerable:!0,get:function(){return _.Component}}),Object.defineProperty(S,"Crosshair",{enumerable:!0,get:function(){return _.Crosshair}}),Object.defineProperty(S,"GroupComponent",{enumerable:!0,get:function(){return _.GroupComponent}}),Object.defineProperty(S,"HtmlComponent",{enumerable:!0,get:function(){return _.HtmlComponent}}),Object.defineProperty(S,"Slider",{enumerable:!0,get:function(){return _.Slider}});var E=_.Axis.Line,g=_.Axis.Circle;S.LineAxis=E,S.CircleAxis=g;var w=_.Grid.Line,d=_.Grid.Circle;S.LineGrid=w,S.CircleGrid=d;var y=_.Legend.Category,m=_.Legend.Continuous;S.CategoryLegend=y,S.ContinuousLegend=m;var C=_.Tooltip.Html;S.HtmlTooltip=C},38700:function(Ct,S,p){"use strict";var b;b={value:!0};var I=p(60517),P=p(49242),O=p(27978),L=I.__importDefault(p(29515)),A=p(42770),_=p(31207),E=function(g){I.__extends(w,g);function w(d){var y=g.call(this,d)||this;y.states=[];var m=d.shapeFactory,C=d.container,T=d.offscreenGroup,B=d.visible,D=B===void 0?!0:B;return y.shapeFactory=m,y.container=C,y.offscreenGroup=T,y.visible=D,y}return w.prototype.draw=function(d,y){y===void 0&&(y=!1),this.model=d,this.data=d.data,this.shapeType=this.getShapeType(d),this.drawShape(d,y),this.visible===!1&&this.changeVisible(!1)},w.prototype.update=function(d){var y=this,m=y.shapeFactory,C=y.shape;if(!!C){this.model=d,this.data=d.data,this.shapeType=this.getShapeType(d),this.setShapeInfo(C,d);var T=this.getOffscreenGroup(),B=m.drawShape(this.shapeType,d,T);B.cfg.data=this.data,B.cfg.origin=d,this.syncShapeStyle(C,B,"",this.getAnimateCfg("update"))}},w.prototype.destroy=function(){var d=this,y=d.shapeFactory,m=d.shape;if(m){var C=this.getAnimateCfg("leave");C?O.doAnimate(m,C,{coordinate:y.coordinate,toAttrs:I.__assign({},m.attr())}):m.remove(!0)}this.states=[],this.shapeFactory=void 0,this.container=void 0,this.shape=void 0,this.animate=void 0,this.geometry=void 0,this.labelShape=void 0,this.model=void 0,this.data=void 0,this.offscreenGroup=void 0,this.statesStyle=void 0,g.prototype.destroy.call(this)},w.prototype.changeVisible=function(d){g.prototype.changeVisible.call(this,d),d?(this.shape&&this.shape.show(),this.labelShape&&this.labelShape.forEach(function(y){y.show()})):(this.shape&&this.shape.hide(),this.labelShape&&this.labelShape.forEach(function(y){y.hide()}))},w.prototype.setState=function(d,y){var m=this,C=this,T=C.states,B=C.shapeFactory,D=C.model,Y=C.shape,K=C.shapeType,H=T.indexOf(d);if(y){if(H>-1)return;T.push(d),(d==="active"||d==="selected")&&Y.toFront()}else{if(H===-1)return;T.splice(H,1),(d==="active"||d==="selected")&&Y.toBack()}var st=B.drawShape(K,D,this.getOffscreenGroup());T.length?T.forEach(function(ct){m.syncShapeStyle(Y,st,ct,null)}):this.syncShapeStyle(Y,st,"reset",null),st.remove(!0);var pt={state:d,stateStatus:y,element:this,target:this.container};this.container.emit("statechange",pt),_.propagationDelegate(this.shape,"statechange",pt)},w.prototype.clearStates=function(){var d=this,y=this.states;P.each(y,function(m){d.setState(m,!1)}),this.states=[]},w.prototype.hasState=function(d){return this.states.includes(d)},w.prototype.getStates=function(){return this.states},w.prototype.getData=function(){return this.data},w.prototype.getModel=function(){return this.model},w.prototype.getBBox=function(){var d=this,y=d.shape,m=d.labelShape,C={x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};return y&&(C=y.getCanvasBBox()),m&&m.forEach(function(T){var B=T.getCanvasBBox();C.x=Math.min(B.x,C.x),C.y=Math.min(B.y,C.y),C.minX=Math.min(B.minX,C.minX),C.minY=Math.min(B.minY,C.minY),C.maxX=Math.max(B.maxX,C.maxX),C.maxY=Math.max(B.maxY,C.maxY)}),C.width=C.maxX-C.minX,C.height=C.maxY-C.minY,C},w.prototype.getStatesStyle=function(){if(!this.statesStyle){var d=this,y=d.shapeType,m=d.geometry,C=d.shapeFactory,T=m.stateOption,B=C.defaultShapeType,D=C.theme[y]||C.theme[B];this.statesStyle=P.deepMix({},D,T)}return this.statesStyle},w.prototype.getStateStyle=function(d,y){var m=this.getStatesStyle(),C=P.get(m,[d,"style"],{}),T=C[y]||C;return P.isFunction(T)?T(this):T},w.prototype.getAnimateCfg=function(d){var y=this.animate;return y?y[d]:null},w.prototype.drawShape=function(d,y){y===void 0&&(y=!1);var m=this,C=m.shapeFactory,T=m.container,B=m.shapeType;if(this.shape=C.drawShape(B,d,T),this.shape){this.setShapeInfo(this.shape,d);var D=this.shape.cfg.name;D?P.isString(D)&&(this.shape.cfg.name=["element",D]):this.shape.cfg.name=["element",this.shapeFactory.geometryType];var Y=y?"enter":"appear",K=this.getAnimateCfg(Y);K&&O.doAnimate(this.shape,K,{coordinate:C.coordinate,toAttrs:I.__assign({},this.shape.attr())})}},w.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var d=this.container.getGroupBase();this.offscreenGroup=new d({})}return this.offscreenGroup},w.prototype.setShapeInfo=function(d,y){var m=this;if(d.cfg.origin=y,d.cfg.element=this,d.isGroup()){var C=d.get("children");C.forEach(function(T){m.setShapeInfo(T,y)})}},w.prototype.syncShapeStyle=function(d,y,m,C,T){if(m===void 0&&(m=""),T===void 0&&(T=0),d.isGroup())for(var B=d.get("children"),D=y.get("children"),Y=0;Y<B.length;Y++)this.syncShapeStyle(B[Y],D[Y],m,C,T+Y);else{if(m&&m!=="reset"){var K=d.get("name");P.isArray(K)&&(K=K[1]);var H=this.getStateStyle(m,K||T);y.attr(H)}var st=A.getReplaceAttrs(d,y);this.animate?C?O.doAnimate(d,C,{coordinate:this.shapeFactory.coordinate,toAttrs:st,shapeModel:this.model}):m?(d.stopAnimate(),d.animate(st,{duration:300})):d.attr(st):d.attr(st)}},w.prototype.getShapeType=function(d){var y=P.get(d,"shape");return P.isArray(y)?y[0]:y},w}(L.default);b=E},75564:function(Ct,S,p){"use strict";var b;b={value:!0},S.iV=b=b=void 0;var I=p(60517),P=p(6750),O=p(26485);b=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"],b=["cross","tick","plus","hyphen","line"];function L(A,_,E,g,w){var d=O.getStyle(_,w,!w,"r"),y=A.parsePoints(_.points),m=y[0];if(_.isStack)m=y[1];else if(y.length>1){for(var C=E.addGroup(),T=0,B=y;T<B.length;T++){var D=B[T];C.addShape({type:"marker",attrs:I.__assign(I.__assign(I.__assign({},d),{symbol:P.MarkerSymbols[g]||g}),D)})}return C}return E.addShape({type:"marker",attrs:I.__assign(I.__assign(I.__assign({},d),{symbol:P.MarkerSymbols[g]||g}),m)})}S.iV=L},26485:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.getStyle=void 0;var b=p(60517),I=p(49242);function P(O,L,A,_){_===void 0&&(_="");var E=O.style,g=E===void 0?{}:E,w=O.defaultStyle,d=O.color,y=O.size,m=b.__assign(b.__assign({},w),g);return d&&(L&&(g.stroke||(m.stroke=d)),A&&(g.fill||(m.fill=d))),_&&I.isNil(g[_])&&!I.isNil(y)&&(m[_]=y),m}S.getStyle=P},36758:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.convertPolarPath=S.convertNormalPath=S.getSplinePath=S.getLinePath=S.catmullRom2bezier=S.smoothBezier=void 0;var b=p(43567),I=p(49242),P=p(22514);function O(m,C){var T=[];if(m.length){T.push(["M",m[0].x,m[0].y]);for(var B=1,D=m.length;B<D;B+=1){var Y=m[B];T.push(["L",Y.x,Y.y])}C&&T.push(["Z"])}return T}function L(m,C){for(var T=[m[0]],B=1,D=m.length;B<D;B=B+2){var Y=C.convert({x:m[B],y:m[B+1]});T.push(Y.x,Y.y)}return T}function A(m,C,T){var B=T.isTransposed,D=T.startAngle,Y=T.endAngle,K={x:m[1],y:m[2]},H={x:C[1],y:C[2]},st=[],pt=B?"y":"x",ct=Math.abs(H[pt]-K[pt])*(Y-D),Ot=H[pt]>=K[pt]?1:0,Rt=ct>Math.PI?1:0,Qt=T.convert(H),Gt=P.getDistanceToCenter(T,Qt);if(Gt>=.5)if(ct===Math.PI*2){var Z={x:(H.x+K.x)/2,y:(H.y+K.y)/2},nt=T.convert(Z);st.push(["A",Gt,Gt,0,Rt,Ot,nt.x,nt.y]),st.push(["A",Gt,Gt,0,Rt,Ot,Qt.x,Qt.y])}else st.push(["A",Gt,Gt,0,Rt,Ot,Qt.x,Qt.y]);return st}function _(m){I.each(m,function(C,T){var B=C;if(B[0].toLowerCase()==="a"){var D=m[T-1],Y=m[T+1];Y&&Y[0].toLowerCase()==="a"?D&&D[0].toLowerCase()==="l"&&(D[0]="M"):D&&D[0].toLowerCase()==="a"&&Y&&Y[0].toLowerCase()==="l"&&(Y[0]="M")}})}S.smoothBezier=function(m,C,T,B){var D=[],Y,K,H=!!B,st,pt;if(H){st=[Infinity,Infinity],pt=[-Infinity,-Infinity];for(var ct=0,Ot=m.length;ct<Ot;ct++){var Rt=m[ct];st=b.vec2.min([0,0],st,Rt),pt=b.vec2.max([0,0],pt,Rt)}st=b.vec2.min([0,0],st,B[0]),pt=b.vec2.max([0,0],pt,B[1])}for(var ct=0,Qt=m.length;ct<Qt;ct++){var Rt=m[ct];if(T)Y=m[ct?ct-1:Qt-1],K=m[(ct+1)%Qt];else if(ct===0||ct===Qt-1){D.push(Rt);continue}else Y=m[ct-1],K=m[ct+1];var Gt=[0,0];Gt=b.vec2.sub(Gt,K,Y),Gt=b.vec2.scale(Gt,Gt,C);var Z=b.vec2.distance(Rt,Y),nt=b.vec2.distance(Rt,K),Q=Z+nt;Q!==0&&(Z/=Q,nt/=Q);var dt=b.vec2.scale([0,0],Gt,-Z),lt=b.vec2.scale([0,0],Gt,nt),z=b.vec2.add([0,0],Rt,dt),$=b.vec2.add([0,0],Rt,lt);H&&(z=b.vec2.max([0,0],z,st),z=b.vec2.min([0,0],z,pt),$=b.vec2.max([0,0],$,st),$=b.vec2.min([0,0],$,pt)),D.push(z),D.push($)}return T&&D.push(D.shift()),D};function E(m,C,T){for(var B=!!C,D=[],Y=0,K=m.length;Y<K;Y+=2)D.push([m[Y],m[Y+1]]);for(var H=S.smoothBezier(D,.4,B,T),st=D.length,pt=[],ct,Ot,Rt,Y=0;Y<st-1;Y++)ct=H[Y*2],Ot=H[Y*2+1],Rt=D[Y+1],pt.push(["C",ct[0],ct[1],Ot[0],Ot[1],Rt[0],Rt[1]]);return B&&(ct=H[st],Ot=H[st+1],Rt=D[0],pt.push(["C",ct[0],ct[1],Ot[0],Ot[1],Rt[0],Rt[1]])),pt}S.catmullRom2bezier=E;function g(m,C){return O(m,C)}S.getLinePath=g;function w(m,C,T){var B=[],D=m[0],Y=null;if(m.length<=2)return g(m,C);for(var K=0,H=m.length;K<H;K++){var st=m[K];(!Y||!(Y.x===st.x&&Y.y===st.y))&&(B.push(st.x),B.push(st.y),Y=st)}var pt=T||[[0,0],[1,1]],ct=E(B,C,pt);return ct.unshift(["M",D.x,D.y]),ct}S.getSplinePath=w;function d(m,C){var T=[];return I.each(C,function(B){var D=B[0];switch(D.toLowerCase()){case"m":case"l":case"c":T.push(L(B,m));break;case"z":default:T.push(B);break}}),T}S.convertNormalPath=d;function y(m,C){var T=[],B,D,Y,K;return I.each(C,function(H,st){var pt=H[0];switch(pt.toLowerCase()){case"m":case"c":case"q":T.push(L(H,m));break;case"l":B=C[st-1],D=H,Y=m.isTransposed,K=Y?B[B.length-2]===D[1]:B[B.length-1]===D[2],K?T=T.concat(A(B,D,m)):T.push(L(H,m));break;case"z":default:T.push(H);break}}),_(T),T}S.convertPolarPath=y},33242:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(49242),I=function(){function P(O,L){this.context=O,this.cfg=L,O.addAction(this)}return P.prototype.applyCfg=function(O){b.assign(this,O)},P.prototype.init=function(){this.applyCfg(this.cfg)},P.prototype.destroy=function(){this.context.removeAction(this),this.context=null},P}();S.default=I},68842:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(60517),I=b.__importDefault(p(33242)),P=function(O){b.__extends(L,O);function L(){return O!==null&&O.apply(this,arguments)||this}return L.prototype.execute=function(){this.callback&&this.callback(this.context)},L.prototype.destroy=function(){O.prototype.destroy.call(this),this.callback=null},L}(I.default);S.default=P},93359:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.createCallbackAction=S.unregisterAction=S.registerAction=S.getActionClass=S.createAction=void 0;var b=p(60517),I=b.__importDefault(p(68842)),P=p(49242),O={};function L(w,d){var y=O[w],m=null;if(y){var C=y.ActionClass,T=y.cfg;m=new C(d,T),m.name=w,m.init()}return m}S.createAction=L;function A(w){var d=O[w];return P.get(d,"ActionClass")}S.getActionClass=A;function _(w,d,y){O[w]={ActionClass:d,cfg:y}}S.registerAction=_;function E(w){delete O[w]}S.unregisterAction=E;function g(w,d){var y=new I.default(d);return y.callback=w,y.name="callback",y}S.createCallbackAction=g},31882:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.getScaleByField=S.isInRecords=S.getSiblingPoint=S.getSilbings=S.isInBox=S.getSpline=S.distance=S.getComponents=S.getElementsByPath=S.getIntersectElements=S.intersectRect=S.getElementValue=S.getElementsByState=S.getElementsByField=S.getElements=S.getSiblingMaskElements=S.getMaskedElements=S.isMask=S.isSlider=S.isList=S.isElementChange=S.getDelegationObject=S.getCurrentElement=void 0;var b=p(60517),I=p(49242),P=p(36758),O=p(85800),L=b.__importDefault(p(70146));function A(z,$){var j=z.event,f=j.target,yt=f.getCanvasBBox();return yt.width>=$||yt.height>=$?yt:null}function _(z,$){var j=z.event,f=j.target,yt=f.getCanvasBBox();return yt.width>=$||yt.height>=$?f.attr("path"):null}function E(z){var $=z.event,j,f=$.target;return f&&(j=f.get("element")),j}S.getCurrentElement=E;function g(z){var $=z.event,j=$.target,f;return j&&(f=j.get("delegateObject")),f}S.getDelegationObject=g;function w(z){var $=z.event.gEvent;return!($&&$.fromShape&&$.toShape&&$.fromShape.get("element")===$.toShape.get("element"))}S.isElementChange=w;function d(z){return z&&z.component&&z.component.isList()}S.isList=d;function y(z){return z&&z.component&&z.component.isSlider()}S.isSlider=y;function m(z){var $=z.event,j=$.target;return j&&j.get("name")==="mask"}S.isMask=m;function C(z,$){var j=z.event.target;if(j.get("type")==="path"){var f=_(z,$);return f?ct(z.view,f):void 0}var yt=A(z,$);return yt?st(z.view,yt):null}S.getMaskedElements=C;function T(z,$,j){var f=A(z,j);if(!f)return null;var yt=z.view,_t=Q(yt,$,{x:f.x,y:f.y}),jt=Q(yt,$,{x:f.maxX,y:f.maxY}),qt={minX:_t.x,minY:_t.y,maxX:jt.x,maxY:jt.y};return st($,qt)}S.getSiblingMaskElements=T;function B(z){var $=z.geometries,j=[];return I.each($,function(f){var yt=f.elements;j=j.concat(yt)}),z.views&&z.views.length&&I.each(z.views,function(f){j=j.concat(B(f))}),j}S.getElements=B;function D(z,$,j){var f=B(z);return f.filter(function(yt){return K(yt,$)===j})}S.getElementsByField=D;function Y(z,$){var j=z.geometries,f=[];return I.each(j,function(yt){var _t=yt.getElementsBy(function(jt){return jt.hasState($)});f=f.concat(_t)}),f}S.getElementsByState=Y;function K(z,$){var j=z.getModel(),f=j.data,yt;return I.isArray(f)?yt=f[0][$]:yt=f[$],yt}S.getElementValue=K;function H(z,$){return!($.minX>z.maxX||$.maxX<z.minX||$.minY>z.maxY||$.maxY<z.minY)}S.intersectRect=H;function st(z,$){var j=B(z),f=[];return I.each(j,function(yt){var _t=yt.shape,jt=_t.getCanvasBBox();H($,jt)&&f.push(yt)}),f}S.getIntersectElements=st;function pt(z){var $=[];return I.each(z,function(j){var f=j[0];if(f!=="A")for(var yt=1;yt<j.length;yt=yt+2)$.push([j[yt],j[yt+1]]);else{var _t=j.length;$.push([j[_t-2],j[_t-1]])}}),$}function ct(z,$){var j=B(z),f=pt($),yt=j.filter(function(_t){var jt=_t.shape,qt;if(jt.get("type")==="path")qt=pt(jt.attr("path"));else{var Vt=jt.getCanvasBBox();qt=O.toPoints(Vt)}return L.default(f,qt)});return yt}S.getElementsByPath=ct;function Ot(z){return z.getComponents().map(function($){return $.component})}S.getComponents=Ot;function Rt(z,$){var j=$.x-z.x,f=$.y-z.y;return Math.sqrt(j*j+f*f)}S.distance=Rt;function Qt(z,$){if(z.length<=2)return P.getLinePath(z,!1);var j=z[0],f=[];I.each(z,function(_t){f.push(_t.x),f.push(_t.y)});var yt=P.catmullRom2bezier(f,$,null);return yt.unshift(["M",j.x,j.y]),yt}S.getSpline=Qt;function Gt(z,$){return z.x<=$.x&&z.maxX>=$.x&&z.y<=$.y&&z.maxY>$.y}S.isInBox=Gt;function Z(z){var $=z.parent,j=null;return $&&(j=$.views.filter(function(f){return f!==z})),j}S.getSilbings=Z;function nt(z,$){var j=z.getCoordinate();return j.invert($)}function Q(z,$,j){var f=nt(z,j);return $.getCoordinate().convert(f)}S.getSiblingPoint=Q;function dt(z,$,j,f){var yt=!1;return I.each(z,function(_t){if(_t[j]===$[j]&&_t[f]===$[f])return yt=!0,!1}),yt}S.isInRecords=dt;function lt(z,$){var j=z.getScaleByField($);return!j&&z.views&&I.each(z.views,function(f){if(j=lt(f,$),j)return!1}),j}S.getScaleByField=lt},43273:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(49242),I=p(31882),P=function(){function O(L){this.actions=[],this.event=null,this.cacheMap={},this.view=L}return O.prototype.cache=function(){for(var L=[],A=0;A<arguments.length;A++)L[A]=arguments[A];if(L.length===1)return this.cacheMap[L[0]];L.length===2&&(this.cacheMap[L[0]]=L[1])},O.prototype.getAction=function(L){return this.actions.find(function(A){return A.name===L})},O.prototype.addAction=function(L){this.actions.push(L)},O.prototype.removeAction=function(L){var A=this.actions,_=this.actions.indexOf(L);_>=0&&A.splice(_,1)},O.prototype.getCurrentPoint=function(){var L=this.event;if(L)if(L.target instanceof HTMLElement){var A=this.view.getCanvas(),_=A.getPointByClient(L.clientX,L.clientY);return _}else return{x:L.x,y:L.y};return null},O.prototype.getCurrentShape=function(){return b.get(this.event,["gEvent","shape"])},O.prototype.isInPlot=function(){var L=this.getCurrentPoint();return L?this.view.isPointInPlot(L):!1},O.prototype.isInShape=function(L){var A=this.getCurrentShape();return A?A.get("name")===L:!1},O.prototype.isInComponent=function(L){var A=I.getComponents(this.view),_=this.getCurrentPoint();return _?!!A.find(function(E){var g=E.getBBox();return L?E.get("name")===L&&I.isInBox(g,_):I.isInBox(g,_)}):!1},O.prototype.destroy=function(){this.view=null,this.event=null,b.each(this.actions.slice(),function(L){L.destroy()}),this.actions=null,this.cacheMap=null},O}();S.default=P},61058:function(Ct,S,p){"use strict";var b;b={value:!0};var I=p(60517),P=p(49242),O=p(93359),L=I.__importDefault(p(43273)),A=I.__importDefault(p(91513));function _(d,y){var m=d.split(":"),C=m[0],T=y.getAction(C)||O.createAction(C,y);if(!T)throw new Error("There is no action named "+C);var B=m[1];return{action:T,methodName:B}}function E(d){var y=d.action,m=d.methodName;if(y[m])y[m]();else throw new Error("Action("+y.name+") doesn't have a method called "+m)}var g={START:"start",SHOW_ENABLE:"showEnable",END:"end",ROLLBACK:"rollback",PROCESSING:"processing"},w=function(d){I.__extends(y,d);function y(m,C){var T=d.call(this,m,C)||this;return T.callbackCaches={},T.emitCaches={},T.steps=C,T}return y.prototype.init=function(){this.initContext(),d.prototype.init.call(this)},y.prototype.destroy=function(){d.prototype.destroy.call(this),this.steps=null,this.context&&(this.context.destroy(),this.context=null),this.callbackCaches=null,this.view=null},y.prototype.initEvents=function(){var m=this;P.each(this.steps,function(C,T){P.each(C,function(B){var D=m.getActionCallback(T,B);D&&m.bindEvent(B.trigger,D)})})},y.prototype.clearEvents=function(){var m=this;P.each(this.steps,function(C,T){P.each(C,function(B){var D=m.getActionCallback(T,B);D&&m.offEvent(B.trigger,D)})})},y.prototype.initContext=function(){var m=this.view,C=new L.default(m);this.context=C;var T=this.steps;P.each(T,function(B){P.each(B,function(D){if(P.isFunction(D.action))D.actionObject={action:O.createCallbackAction(D.action,C),methodName:"execute"};else if(P.isString(D.action))D.actionObject=_(D.action,C);else if(P.isArray(D.action)){var Y=D.action;D.actionObject=[],P.each(Y,function(K){D.actionObject.push(_(K,C))})}})})},y.prototype.isAllowStep=function(m){var C=this.currentStepName,T=this.steps;if(C===m||m===g.SHOW_ENABLE)return!0;if(m===g.PROCESSING)return C===g.START;if(m===g.START)return C!==g.PROCESSING;if(m===g.END)return C===g.PROCESSING||C===g.START;if(m===g.ROLLBACK){if(T[g.END])return C===g.END;if(C===g.START)return!0}return!1},y.prototype.isAllowExcute=function(m,C){if(this.isAllowStep(m)){var T=this.getKey(m,C);return C.once&&this.emitCaches[T]?!1:C.isEnable?C.isEnable(this.context):!0}return!1},y.prototype.enterStep=function(m){this.currentStepName=m,this.emitCaches={}},y.prototype.afterExecute=function(m,C){m!==g.SHOW_ENABLE&&this.currentStepName!==m&&this.enterStep(m);var T=this.getKey(m,C);this.emitCaches[T]=!0},y.prototype.getKey=function(m,C){return m+C.trigger+C.action},y.prototype.getActionCallback=function(m,C){var T=this,B=this.context,D=this.callbackCaches,Y=C.actionObject;if(C.action&&Y){var K=this.getKey(m,C);if(!D[K]){var H=function(st){B.event=st,T.isAllowExcute(m,C)?(P.isArray(Y)?P.each(Y,function(pt){B.event=st,E(pt)}):(B.event=st,E(Y)),T.afterExecute(m,C),C.callback&&(B.event=st,C.callback(B))):B.event=null};C.debounce?D[K]=P.debounce(H,C.debounce.wait,C.debounce.immediate):C.throttle?D[K]=P.throttle(H,C.throttle.wait,{leading:C.throttle.leading,trailing:C.throttle.trailing}):D[K]=H}return D[K]}return null},y.prototype.bindEvent=function(m,C){var T=m.split(":");T[0]==="window"?window.addEventListener(T[1],C):T[0]==="document"?document.addEventListener(T[1],C):this.view.on(m,C)},y.prototype.offEvent=function(m,C){var T=m.split(":");T[0]==="window"?window.removeEventListener(T[1],C):T[0]==="document"?document.removeEventListener(T[1],C):this.view.off(m,C)},y}(A.default);b=w},91513:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var p=function(){function b(I,P){this.view=I,this.cfg=P}return b.prototype.init=function(){this.initEvents()},b.prototype.initEvents=function(){},b.prototype.clearEvents=function(){},b.prototype.destroy=function(){this.clearEvents()},b}();S.default=p},85800:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.toPoints=S.getRegionBBox=S.BBox=void 0;var b=p(49242),I=p(29583),P=function(){function L(A,_,E,g){A===void 0&&(A=0),_===void 0&&(_=0),E===void 0&&(E=0),g===void 0&&(g=0),this.x=A,this.y=_,this.height=g,this.width=E}return L.fromRange=function(A,_,E,g){return new L(A,_,E-A,g-_)},Object.defineProperty(L.prototype,"minX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"maxX",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"minY",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"maxY",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"tl",{get:function(){return{x:this.x,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"tr",{get:function(){return{x:this.maxX,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"bl",{get:function(){return{x:this.x,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"br",{get:function(){return{x:this.maxX,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"top",{get:function(){return{x:this.x+this.width/2,y:this.minY}},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"right",{get:function(){return{x:this.maxX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"bottom",{get:function(){return{x:this.x+this.width/2,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"left",{get:function(){return{x:this.minX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),L.prototype.isEqual=function(A){return this.x===A.x&&this.y===A.y&&this.width===A.width&&this.height===A.height},L.prototype.clone=function(){return new L(this.x,this.y,this.width,this.height)},L.prototype.add=function(){for(var A=[],_=0;_<arguments.length;_++)A[_]=arguments[_];var E=this.clone();return b.each(A,function(g){E.x=Math.min(g.x,E.x),E.y=Math.min(g.y,E.y),E.width=Math.max(g.maxX,E.maxX)-E.x,E.height=Math.max(g.maxY,E.maxY)-E.y}),E},L.prototype.merge=function(){for(var A=[],_=0;_<arguments.length;_++)A[_]=arguments[_];var E=this.clone();return b.each(A,function(g){E.x=Math.max(g.x,E.x),E.y=Math.max(g.y,E.y),E.width=Math.min(g.maxX,E.maxX)-E.x,E.height=Math.min(g.maxY,E.maxY)-E.y}),E},L.prototype.cut=function(A,_){var E=A.width,g=A.height;switch(_){case I.DIRECTION.TOP:case I.DIRECTION.TOP_LEFT:case I.DIRECTION.TOP_RIGHT:return L.fromRange(this.minX,this.minY+g,this.maxX,this.maxY);case I.DIRECTION.RIGHT:case I.DIRECTION.RIGHT_TOP:case I.DIRECTION.RIGHT_BOTTOM:return L.fromRange(this.minX,this.minY,this.maxX-E,this.maxY);case I.DIRECTION.BOTTOM:case I.DIRECTION.BOTTOM_LEFT:case I.DIRECTION.BOTTOM_RIGHT:return L.fromRange(this.minX,this.minY,this.maxX,this.maxY-g);case I.DIRECTION.LEFT:case I.DIRECTION.LEFT_TOP:case I.DIRECTION.LEFT_BOTTOM:return L.fromRange(this.minX+E,this.minY,this.maxX,this.maxY);default:return this}},L.prototype.shrink=function(A){var _=A[0],E=A[1],g=A[2],w=A[3];return new L(this.x+w,this.y+_,this.width-w-E,this.height-_-g)},L.prototype.exceed=function(A){return[Math.max(-this.minY+A.minY,0),Math.max(this.maxX-A.maxX,0),Math.max(this.maxY-A.maxY,0),Math.max(-this.minX+A.minX,0)]},L.prototype.size=function(){return this.width*this.height},L}();S.BBox=P,S.getRegionBBox=function(L,A){var _=A.start,E=A.end;return new P(L.x+L.width*_.x,L.y+L.height*_.y,L.width*Math.abs(E.x-_.x),L.height*Math.abs(E.y-_.y))};function O(L){return[[L.minX,L.minY],[L.maxX,L.minY],[L.maxX,L.maxY],[L.minX,L.maxY]]}S.toPoints=O},22514:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.getCoordinateClipCfg=S.getAngleByPoint=S.isPointInCoordinate=S.getDistanceToCenter=S.isFullCircle=S.getXDimensionLength=void 0;var b=p(42770),I=p(86630);function P(g){if(g.isPolar&&!g.isTransposed)return(g.endAngle-g.startAngle)*g.getRadius();var w=g.convert({x:0,y:0}),d=g.convert({x:1,y:0});return Math.sqrt(Math.pow(d.x-w.x,2)+Math.pow(d.y-w.y,2))}S.getXDimensionLength=P;function O(g){if(g.isPolar){var w=g.startAngle,d=g.endAngle;return d-w==Math.PI*2}return!1}S.isFullCircle=O;function L(g,w){var d=g.getCenter();return Math.sqrt(Math.pow(w.x-d.x,2)+Math.pow(w.y-d.y,2))}S.getDistanceToCenter=L;function A(g,w){var d=!1;if(g)if(g.type==="theta"){var y=g.start,m=g.end;d=I.isBetween(w.x,y.x,m.x)&&I.isBetween(w.y,y.y,m.y)}else{var C=g.invert(w);d=I.isBetween(C.x,0,1)&&I.isBetween(C.y,0,1)}return d}S.isPointInCoordinate=A;function _(g,w){var d=g.getCenter();return Math.atan2(w.y-d.y,w.x-d.x)}S.getAngleByPoint=_;function E(g,w){w===void 0&&(w=0);var d=g.start,y=g.end,m=g.getWidth(),C=g.getHeight();if(g.isPolar){var T=g.startAngle,B=g.endAngle,D=g.getCenter(),Y=g.getRadius();return{type:"path",startState:{path:b.getSectorPath(D.x,D.y,Y+w,T,T)},endState:function(H){var st=(B-T)*H+T,pt=b.getSectorPath(D.x,D.y,Y+w,T,st);return{path:pt}},attrs:{path:b.getSectorPath(D.x,D.y,Y+w,T,B)}}}var K;return g.isTransposed?K={height:C+w*2}:K={width:m+w*2},{type:"rect",startState:{x:d.x-w,y:y.y-w,width:g.isTransposed?m+w*2:0,height:g.isTransposed?0:C+w*2},endState:K,attrs:{x:d.x-w,y:y.y-w,width:m+w*2,height:C+w*2}}}S.getCoordinateClipCfg=E},42770:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.getReplaceAttrs=S.getPolygonCentroid=S.getAngle=S.getArcPath=S.getSectorPath=S.polarToCartesian=void 0;var b=p(49242);function I(g){if(b.isEmpty(g))return null;var w=g[0].x,d=g[0].x,y=g[0].y,m=g[0].y;return b.each(g,function(C){w=w>C.x?C.x:w,d=d<C.x?C.x:d,y=y>C.y?C.y:y,m=m<C.y?C.y:m}),{minX:w,maxX:d,minY:y,maxY:m,centerX:(w+d)/2,centerY:(y+m)/2}}function P(g,w,d,y){return{x:g+d*Math.cos(y),y:w+d*Math.sin(y)}}S.polarToCartesian=P;function O(g,w,d,y,m,C){C===void 0&&(C=0);var T=P(g,w,d,y),B=P(g,w,d,m),D=P(g,w,C,y),Y=P(g,w,C,m);if(m-y==Math.PI*2){var K=P(g,w,d,y+Math.PI),H=P(g,w,C,y+Math.PI),st=[["M",T.x,T.y],["A",d,d,0,1,1,K.x,K.y],["A",d,d,0,1,1,B.x,B.y],["M",D.x,D.y]];return C&&(st.push(["A",C,C,0,1,0,H.x,H.y]),st.push(["A",C,C,0,1,0,Y.x,Y.y])),st.push(["M",T.x,T.y]),st.push(["Z"]),st}var pt=m-y<=Math.PI?0:1,ct=[["M",T.x,T.y],["A",d,d,0,pt,1,B.x,B.y],["L",Y.x,Y.y]];return C&&ct.push(["A",C,C,0,pt,0,D.x,D.y]),ct.push(["L",T.x,T.y]),ct.push(["Z"]),ct}S.getSectorPath=O;function L(g,w,d,y,m){var C=P(g,w,d,y),T=P(g,w,d,m);if(b.isNumberEqual(m-y,Math.PI*2)){var B=P(g,w,d,y+Math.PI);return[["M",C.x,C.y],["A",d,d,0,1,1,B.x,B.y],["A",d,d,0,1,1,C.x,C.y],["A",d,d,0,1,0,B.x,B.y],["A",d,d,0,1,0,C.x,C.y],["Z"]]}var D=m-y<=Math.PI?0:1;return[["M",C.x,C.y],["A",d,d,0,D,1,T.x,T.y]]}S.getArcPath=L;function A(g,w){var d=g.points,y=I(d),m,C,T=w.startAngle,B=w.endAngle,D=B-T;return w.isTransposed?(m=y.maxY*D,C=y.minY*D):(m=y.maxX*D,C=y.minX*D),m+=T,C+=T,{startAngle:C,endAngle:m}}S.getAngle=A;function _(g,w){if(b.isNumber(g)&&b.isNumber(w))return[g,w];for(var d=-1,y=0,m=0,C,T=g.length-1,B,D=0;++d<g.length;)C=T,T=d,D+=B=g[C]*w[T]-g[T]*w[C],y+=(g[C]+g[T])*B,m+=(w[C]+w[T])*B;return D*=3,[y/D,m/D]}S.getPolygonCentroid=_;function E(g,w){var d=g.attr(),y=w.attr();return b.each(d,function(m,C){y[C]===void 0&&(y[C]=void 0)}),y}S.getReplaceAttrs=E},86630:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.uniq=S.omit=S.padEnd=S.isBetween=void 0;var b=p(49242);function I(A,_,E){var g=Math.min(_,E),w=Math.max(_,E);return A>=g&&A<=w}S.isBetween=I;function P(A,_,E){if(b.isString(A))return A.padEnd(_,E);if(b.isArray(A)){var g=A.length;if(g<_)for(var w=_-g,d=0;d<w;d++)A.push(E)}return A}S.padEnd=P;function O(A,_){return _.forEach(function(E){delete A[E]}),A}S.omit=O;function L(A,_,E){_===void 0&&(_=[]),E===void 0&&(E={});for(var g=0,w=A;g<w.length;g++){var d=w[g];E[d]||(_.push(d),E[d]=!0)}return _}S.uniq=L},6750:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.MarkerSymbols=void 0,S.MarkerSymbols={hexagon:function(p,b,I){var P=I/2*Math.sqrt(3);return[["M",p,b-I],["L",p+P,b-I/2],["L",p+P,b+I/2],["L",p,b+I],["L",p-P,b+I/2],["L",p-P,b-I/2],["Z"]]},bowtie:function(p,b,I){var P=I-1.5;return[["M",p-I,b-P],["L",p+I,b+P],["L",p+I,b-P],["L",p-I,b+P],["Z"]]},cross:function(p,b,I){return[["M",p-I,b-I],["L",p+I,b+I],["M",p+I,b-I],["L",p-I,b+I]]},tick:function(p,b,I){return[["M",p-I/2,b-I],["L",p+I/2,b-I],["M",p,b-I],["L",p,b+I],["M",p-I/2,b+I],["L",p+I/2,b+I]]},plus:function(p,b,I){return[["M",p-I,b],["L",p+I,b],["M",p,b-I],["L",p,b+I]]},hyphen:function(p,b,I){return[["M",p-I,b],["L",p+I,b]]},line:function(p,b,I){return[["M",p,b-I],["L",p,b+I]]}}},16854:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.getName=S.syncScale=S.createScaleByField=void 0;var b=p(60517),I=p(49242),P=p(57029),O=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function L(g){var w="linear";return O.test(g)?w="time":I.isString(g)&&(w="cat"),w}function A(g,w,d){var y=w||[];if(I.isNumber(g)||I.isNil(I.firstValue(y,g))&&I.isEmpty(d)){var m=P.getScale("identity");return new m({field:g.toString(),values:[g]})}var C=I.valuesOfKey(y,g),T=I.get(d,"type",L(C[0])),B=P.getScale(T);return new B(b.__assign({field:g,values:C},d))}S.createScaleByField=A;function _(g,w){if(g.type!=="identity"&&w.type!=="identity"){var d={};for(var y in w)Object.prototype.hasOwnProperty.call(w,y)&&(d[y]=w[y]);g.change(d)}}S.syncScale=_;function E(g){return g.alias||g.field}S.getName=E},99677:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.getTooltipItems=S.findDataByPoint=void 0;var b=p(60517),I=p(49242),P=p(29583),O=p(16854);function L(B,D,Y){var K=Y.translate(B),H=Y.translate(D);return I.isNumberEqual(K,H)}function A(B,D){var Y=D.coordinate,K=D.getXScale(),H=K.range,st=H[H.length-1],pt=H[0],ct=Y.invert(B),Ot=ct.x;return Y.isPolar&&Ot>(1+st)/2&&(Ot=pt),K.translate(K.invert(Ot))}function _(B,D,Y){var K=Y.coordinate,H=Y.getYScale(),st=H.field,pt=K.invert(D),ct=H.invert(pt.y),Ot=I.find(B,function(Rt){var Qt=Rt[P.FIELD_ORIGIN];return Qt[st][0]<=ct&&Qt[st][1]>=ct});return Ot||B[B.length-1]}var E=I.memoize(function(B){if(B.isCategory)return 1;for(var D=B.values,Y=D.length,K=B.translate(D[0]),H=K,st=0;st<Y;st++){var pt=D[st],ct=B.translate(pt);ct<K&&(K=ct),ct>H&&(H=ct)}return(H-K)/(Y-1)});function g(B,D,Y){var K=Y;if(!Y){var H=D.getAttribute("position"),st=H.getFields();K=st[0]}var pt=D.scales;return pt[K]?pt[K].getText(B[K]):I.hasKey(B,K)?B[K]:K}function w(B){var D=I.values(B.attributes);return I.filter(D,function(Y){return I.contains(P.GROUP_ATTRS,Y.type)})}function d(B){for(var D=w(B),Y,K=0,H=D;K<H.length;K++){var st=H[K],pt=st.getScale(st.type);if(pt&&pt.isLinear){Y=pt;break}}var ct=B.getXScale(),Ot=B.getYScale();return Y||Ot||ct}function y(B,D){var Y=D.field,K=B[Y];if(I.isArray(K)){var H=K.map(function(st){return D.getText(st)});return H.join("-")}return D.getText(K)}function m(B,D){var Y,K=D.getGroupScales();if(K.length&&(Y=K[0]),Y){var H=Y.field;return Y.getText(B[H])}var st=d(D);return O.getName(st)}function C(B,D,Y){if(D.length===0)return null;var K=Y.type,H=Y.getXScale(),st=Y.getYScale(),pt=H.field,ct=st.field,Ot=null;if(K==="heatmap"||K==="point"){for(var Rt=Y.coordinate,Qt=Rt.invert(B),Gt=H.invert(Qt.x),Z=st.invert(Qt.y),nt=Infinity,Q=0;Q<D.length;Q++){var dt=D[Q],lt=dt[P.FIELD_ORIGIN],z=Math.pow(lt[pt]-Gt,2)+Math.pow(lt[ct]-Z,2);z<nt&&(nt=z,Ot=dt)}return Ot}var $=D[0],j=D[D.length-1],f=A(B,Y),yt=$[P.FIELD_ORIGIN][pt],_t=$[P.FIELD_ORIGIN][ct],jt=j[P.FIELD_ORIGIN][pt],qt=st.isLinear&&I.isArray(_t);if(I.isArray(yt)){for(var Q=0;Q<D.length;Q++){var Vt=D[Q],lt=Vt[P.FIELD_ORIGIN];if(H.translate(lt[pt][0])<=f&&H.translate(lt[pt][1])>=f)if(qt)I.isArray(Ot)||(Ot=[]),Ot.push(Vt);else{Ot=Vt;break}}I.isArray(Ot)&&(Ot=_(Ot,B,Y))}else{var re=void 0;if(!H.isLinear&&H.type!=="timeCat"){for(var Q=0;Q<D.length;Q++){var Vt=D[Q],lt=Vt[P.FIELD_ORIGIN];if(L(lt[pt],f,H))if(qt)I.isArray(Ot)||(Ot=[]),Ot.push(Vt);else{Ot=Vt;break}else H.translate(lt[pt])<=f&&(j=Vt,re=D[Q+1])}I.isArray(Ot)&&(Ot=_(Ot,B,Y))}else{if((f>H.translate(jt)||f<H.translate(yt))&&(f>H.max||f<H.min))return null;for(var ae=0,Nt=D.length-1,Lt=void 0;ae<=Nt;){Lt=Math.floor((ae+Nt)/2);var bt=D[Lt][P.FIELD_ORIGIN][pt];if(L(bt,f,H))return D[Lt];H.translate(bt)<=H.translate(f)?(ae=Lt+1,j=D[Lt],re=D[Lt+1]):(Nt===0&&(j=D[0]),Nt=Lt-1)}}j&&re&&Math.abs(H.translate(j[P.FIELD_ORIGIN][pt])-f)>Math.abs(H.translate(re[P.FIELD_ORIGIN][pt])-f)&&(j=re)}var at=E(Y.getXScale());return!Ot&&Math.abs(H.translate(j[P.FIELD_ORIGIN][pt])-f)<=at/2&&(Ot=j),Ot}S.findDataByPoint=C;function T(B,D,Y){Y===void 0&&(Y="");var K=B[P.FIELD_ORIGIN],H=g(K,D,Y),st=D.tooltipOption,pt=D.theme.defaultColor,ct=[],Ot,Rt;function Qt(_t,jt){if(!I.isNil(jt)&&jt!==""){var qt={title:H,data:K,mappingData:B,name:_t,value:jt,color:B.color||pt,marker:!0};ct.push(qt)}}if(I.isObject(st)){var Gt=st.fields,Z=st.callback;if(Z){var nt=Gt.map(function(_t){return B[P.FIELD_ORIGIN][_t]}),Q=Z.apply(void 0,nt),dt=b.__assign({data:B[P.FIELD_ORIGIN],mappingData:B,title:H,color:B.color||pt,marker:!0},Q);ct.push(dt)}else for(var lt=D.scales,z=0,$=Gt;z<$.length;z++){var j=$[z];if(!I.isNil(K[j])){var f=lt[j];Ot=O.getName(f),Rt=f.getText(K[j]),Qt(Ot,Rt)}}}else{var yt=d(D);I.isNil(K[yt.field])||(Rt=y(K,yt),Ot=m(K,D),Qt(Ot,Rt))}return ct}S.getTooltipItems=T},60517:function(Ct,S,p){"use strict";p.r(S),p.d(S,{__extends:function(){return I},__assign:function(){return P},__rest:function(){return O},__decorate:function(){return L},__param:function(){return A},__metadata:function(){return _},__awaiter:function(){return E},__generator:function(){return g},__createBinding:function(){return w},__exportStar:function(){return d},__values:function(){return y},__read:function(){return m},__spread:function(){return C},__spreadArrays:function(){return T},__spreadArray:function(){return B},__await:function(){return D},__asyncGenerator:function(){return Y},__asyncDelegator:function(){return K},__asyncValues:function(){return H},__makeTemplateObject:function(){return st},__importStar:function(){return ct},__importDefault:function(){return Ot},__classPrivateFieldGet:function(){return Rt},__classPrivateFieldSet:function(){return Qt},__classPrivateFieldIn:function(){return Gt}});var b=function(Z,nt){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,dt){Q.__proto__=dt}||function(Q,dt){for(var lt in dt)Object.prototype.hasOwnProperty.call(dt,lt)&&(Q[lt]=dt[lt])},b(Z,nt)};function I(Z,nt){if(typeof nt!="function"&&nt!==null)throw new TypeError("Class extends value "+String(nt)+" is not a constructor or null");b(Z,nt);function Q(){this.constructor=Z}Z.prototype=nt===null?Object.create(nt):(Q.prototype=nt.prototype,new Q)}var P=function(){return P=Object.assign||function(nt){for(var Q,dt=1,lt=arguments.length;dt<lt;dt++){Q=arguments[dt];for(var z in Q)Object.prototype.hasOwnProperty.call(Q,z)&&(nt[z]=Q[z])}return nt},P.apply(this,arguments)};function O(Z,nt){var Q={};for(var dt in Z)Object.prototype.hasOwnProperty.call(Z,dt)&&nt.indexOf(dt)<0&&(Q[dt]=Z[dt]);if(Z!=null&&typeof Object.getOwnPropertySymbols=="function")for(var lt=0,dt=Object.getOwnPropertySymbols(Z);lt<dt.length;lt++)nt.indexOf(dt[lt])<0&&Object.prototype.propertyIsEnumerable.call(Z,dt[lt])&&(Q[dt[lt]]=Z[dt[lt]]);return Q}function L(Z,nt,Q,dt){var lt=arguments.length,z=lt<3?nt:dt===null?dt=Object.getOwnPropertyDescriptor(nt,Q):dt,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")z=Reflect.decorate(Z,nt,Q,dt);else for(var j=Z.length-1;j>=0;j--)($=Z[j])&&(z=(lt<3?$(z):lt>3?$(nt,Q,z):$(nt,Q))||z);return lt>3&&z&&Object.defineProperty(nt,Q,z),z}function A(Z,nt){return function(Q,dt){nt(Q,dt,Z)}}function _(Z,nt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(Z,nt)}function E(Z,nt,Q,dt){function lt(z){return z instanceof Q?z:new Q(function($){$(z)})}return new(Q||(Q=Promise))(function(z,$){function j(_t){try{yt(dt.next(_t))}catch(jt){$(jt)}}function f(_t){try{yt(dt.throw(_t))}catch(jt){$(jt)}}function yt(_t){_t.done?z(_t.value):lt(_t.value).then(j,f)}yt((dt=dt.apply(Z,nt||[])).next())})}function g(Z,nt){var Q={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},dt,lt,z,$;return $={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&($[Symbol.iterator]=function(){return this}),$;function j(yt){return function(_t){return f([yt,_t])}}function f(yt){if(dt)throw new TypeError("Generator is already executing.");for(;Q;)try{if(dt=1,lt&&(z=yt[0]&2?lt.return:yt[0]?lt.throw||((z=lt.return)&&z.call(lt),0):lt.next)&&!(z=z.call(lt,yt[1])).done)return z;switch(lt=0,z&&(yt=[yt[0]&2,z.value]),yt[0]){case 0:case 1:z=yt;break;case 4:return Q.label++,{value:yt[1],done:!1};case 5:Q.label++,lt=yt[1],yt=[0];continue;case 7:yt=Q.ops.pop(),Q.trys.pop();continue;default:if(z=Q.trys,!(z=z.length>0&&z[z.length-1])&&(yt[0]===6||yt[0]===2)){Q=0;continue}if(yt[0]===3&&(!z||yt[1]>z[0]&&yt[1]<z[3])){Q.label=yt[1];break}if(yt[0]===6&&Q.label<z[1]){Q.label=z[1],z=yt;break}if(z&&Q.label<z[2]){Q.label=z[2],Q.ops.push(yt);break}z[2]&&Q.ops.pop(),Q.trys.pop();continue}yt=nt.call(Z,Q)}catch(_t){yt=[6,_t],lt=0}finally{dt=z=0}if(yt[0]&5)throw yt[1];return{value:yt[0]?yt[1]:void 0,done:!0}}}var w=Object.create?function(Z,nt,Q,dt){dt===void 0&&(dt=Q);var lt=Object.getOwnPropertyDescriptor(nt,Q);(!lt||("get"in lt?!nt.__esModule:lt.writable||lt.configurable))&&(lt={enumerable:!0,get:function(){return nt[Q]}}),Object.defineProperty(Z,dt,lt)}:function(Z,nt,Q,dt){dt===void 0&&(dt=Q),Z[dt]=nt[Q]};function d(Z,nt){for(var Q in Z)Q!=="default"&&!Object.prototype.hasOwnProperty.call(nt,Q)&&w(nt,Z,Q)}function y(Z){var nt=typeof Symbol=="function"&&Symbol.iterator,Q=nt&&Z[nt],dt=0;if(Q)return Q.call(Z);if(Z&&typeof Z.length=="number")return{next:function(){return Z&&dt>=Z.length&&(Z=void 0),{value:Z&&Z[dt++],done:!Z}}};throw new TypeError(nt?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(Z,nt){var Q=typeof Symbol=="function"&&Z[Symbol.iterator];if(!Q)return Z;var dt=Q.call(Z),lt,z=[],$;try{for(;(nt===void 0||nt-- >0)&&!(lt=dt.next()).done;)z.push(lt.value)}catch(j){$={error:j}}finally{try{lt&&!lt.done&&(Q=dt.return)&&Q.call(dt)}finally{if($)throw $.error}}return z}function C(){for(var Z=[],nt=0;nt<arguments.length;nt++)Z=Z.concat(m(arguments[nt]));return Z}function T(){for(var Z=0,nt=0,Q=arguments.length;nt<Q;nt++)Z+=arguments[nt].length;for(var dt=Array(Z),lt=0,nt=0;nt<Q;nt++)for(var z=arguments[nt],$=0,j=z.length;$<j;$++,lt++)dt[lt]=z[$];return dt}function B(Z,nt,Q){if(Q||arguments.length===2)for(var dt=0,lt=nt.length,z;dt<lt;dt++)(z||!(dt in nt))&&(z||(z=Array.prototype.slice.call(nt,0,dt)),z[dt]=nt[dt]);return Z.concat(z||Array.prototype.slice.call(nt))}function D(Z){return this instanceof D?(this.v=Z,this):new D(Z)}function Y(Z,nt,Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var dt=Q.apply(Z,nt||[]),lt,z=[];return lt={},$("next"),$("throw"),$("return"),lt[Symbol.asyncIterator]=function(){return this},lt;function $(qt){dt[qt]&&(lt[qt]=function(Vt){return new Promise(function(re,ae){z.push([qt,Vt,re,ae])>1||j(qt,Vt)})})}function j(qt,Vt){try{f(dt[qt](Vt))}catch(re){jt(z[0][3],re)}}function f(qt){qt.value instanceof D?Promise.resolve(qt.value.v).then(yt,_t):jt(z[0][2],qt)}function yt(qt){j("next",qt)}function _t(qt){j("throw",qt)}function jt(qt,Vt){qt(Vt),z.shift(),z.length&&j(z[0][0],z[0][1])}}function K(Z){var nt,Q;return nt={},dt("next"),dt("throw",function(lt){throw lt}),dt("return"),nt[Symbol.iterator]=function(){return this},nt;function dt(lt,z){nt[lt]=Z[lt]?function($){return(Q=!Q)?{value:D(Z[lt]($)),done:lt==="return"}:z?z($):$}:z}}function H(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var nt=Z[Symbol.asyncIterator],Q;return nt?nt.call(Z):(Z=typeof y=="function"?y(Z):Z[Symbol.iterator](),Q={},dt("next"),dt("throw"),dt("return"),Q[Symbol.asyncIterator]=function(){return this},Q);function dt(z){Q[z]=Z[z]&&function($){return new Promise(function(j,f){$=Z[z]($),lt(j,f,$.done,$.value)})}}function lt(z,$,j,f){Promise.resolve(f).then(function(yt){z({value:yt,done:j})},$)}}function st(Z,nt){return Object.defineProperty?Object.defineProperty(Z,"raw",{value:nt}):Z.raw=nt,Z}var pt=Object.create?function(Z,nt){Object.defineProperty(Z,"default",{enumerable:!0,value:nt})}:function(Z,nt){Z.default=nt};function ct(Z){if(Z&&Z.__esModule)return Z;var nt={};if(Z!=null)for(var Q in Z)Q!=="default"&&Object.prototype.hasOwnProperty.call(Z,Q)&&w(nt,Z,Q);return pt(nt,Z),nt}function Ot(Z){return Z&&Z.__esModule?Z:{default:Z}}function Rt(Z,nt,Q,dt){if(Q==="a"&&!dt)throw new TypeError("Private accessor was defined without a getter");if(typeof nt=="function"?Z!==nt||!dt:!nt.has(Z))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Q==="m"?dt:Q==="a"?dt.call(Z):dt?dt.value:nt.get(Z)}function Qt(Z,nt,Q,dt,lt){if(dt==="m")throw new TypeError("Private method is not writable");if(dt==="a"&&!lt)throw new TypeError("Private accessor was defined without a setter");if(typeof nt=="function"?Z!==nt||!lt:!nt.has(Z))throw new TypeError("Cannot write private member to an object whose class did not declare it");return dt==="a"?lt.call(Z,Q):lt?lt.value=Q:nt.set(Z,Q),Q}function Gt(Z,nt){if(nt===null||typeof nt!="object"&&typeof nt!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof Z=="function"?nt===Z:Z.has(nt)}},29126:function(Ct,S,p){"use strict";p.r(S),p.d(S,{AbstractCanvas:function(){return gn},AbstractGroup:function(){return Ln},AbstractShape:function(){return ki},Base:function(){return ge},Event:function(){return Vt},PathUtil:function(){return b},assembleFont:function(){return ga},getBBoxMethod:function(){return ti},getOffScreenContext:function(){return ea},getTextHeight:function(){return fa},invert:function(){return Cr},isAllowCapture:function(){return ne},multiplyVec2:function(){return vr},registerBBox:function(){return Wn},registerEasing:function(){return At},version:function(){return oo}});var b={};p.r(b),p.d(b,{catmullRomToBezier:function(){return _},fillPath:function(){return lt},fillPathByDiff:function(){return f},formatPath:function(){return jt},intersection:function(){return Z},parsePathArray:function(){return T},parsePathString:function(){return A},pathToAbsolute:function(){return g},pathToCurve:function(){return m},rectPath:function(){return st}});var I=p(49242),P=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,O=new RegExp("([a-z])["+P+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+P+"]*,?["+P+"]*)+)","ig"),L=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+P+"]*,?["+P+"]*","ig"),A=function(xt){if(!xt)return null;if((0,I.isArray)(xt))return xt;var et={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},W=[];return String(xt).replace(O,function(J,Tt,Dt){var ie=[],fe=Tt.toLowerCase();if(Dt.replace(L,function(he,Se){Se&&ie.push(+Se)}),fe==="m"&&ie.length>2&&(W.push([Tt].concat(ie.splice(0,2))),fe="l",Tt=Tt==="m"?"l":"L"),fe==="o"&&ie.length===1&&W.push([Tt,ie[0]]),fe==="r")W.push([Tt].concat(ie));else for(;ie.length>=et[fe]&&(W.push([Tt].concat(ie.splice(0,et[fe]))),!!et[fe]););return xt}),W},_=function(xt,et){for(var W=[],J=0,Tt=xt.length;Tt-2*!et>J;J+=2){var Dt=[{x:+xt[J-2],y:+xt[J-1]},{x:+xt[J],y:+xt[J+1]},{x:+xt[J+2],y:+xt[J+3]},{x:+xt[J+4],y:+xt[J+5]}];et?J?Tt-4===J?Dt[3]={x:+xt[0],y:+xt[1]}:Tt-2===J&&(Dt[2]={x:+xt[0],y:+xt[1]},Dt[3]={x:+xt[2],y:+xt[3]}):Dt[0]={x:+xt[Tt-2],y:+xt[Tt-1]}:Tt-4===J?Dt[3]=Dt[2]:J||(Dt[0]={x:+xt[J],y:+xt[J+1]}),W.push(["C",(-Dt[0].x+6*Dt[1].x+Dt[2].x)/6,(-Dt[0].y+6*Dt[1].y+Dt[2].y)/6,(Dt[1].x+6*Dt[2].x-Dt[3].x)/6,(Dt[1].y+6*Dt[2].y-Dt[3].y)/6,Dt[2].x,Dt[2].y])}return W},E=function(xt,et,W,J,Tt){var Dt=[];if(Tt===null&&J===null&&(J=W),xt=+xt,et=+et,W=+W,J=+J,Tt!==null){var ie=Math.PI/180,fe=xt+W*Math.cos(-J*ie),he=xt+W*Math.cos(-Tt*ie),Se=et+W*Math.sin(-J*ie),ke=et+W*Math.sin(-Tt*ie);Dt=[["M",fe,Se],["A",W,W,0,+(Tt-J>180),0,he,ke]]}else Dt=[["M",xt,et],["m",0,-J],["a",W,J,0,1,1,0,2*J],["a",W,J,0,1,1,0,-2*J],["z"]];return Dt},g=function(xt){if(xt=A(xt),!xt||!xt.length)return[["M",0,0]];var et=[],W=0,J=0,Tt=0,Dt=0,ie=0,fe,he;xt[0][0]==="M"&&(W=+xt[0][1],J=+xt[0][2],Tt=W,Dt=J,ie++,et[0]=["M",W,J]);for(var Se=xt.length===3&&xt[0][0]==="M"&&xt[1][0].toUpperCase()==="R"&&xt[2][0].toUpperCase()==="Z",ke=void 0,Be=void 0,Ve=ie,ar=xt.length;Ve<ar;Ve++){if(et.push(ke=[]),Be=xt[Ve],fe=Be[0],fe!==fe.toUpperCase())switch(ke[0]=fe.toUpperCase(),ke[0]){case"A":ke[1]=Be[1],ke[2]=Be[2],ke[3]=Be[3],ke[4]=Be[4],ke[5]=Be[5],ke[6]=+Be[6]+W,ke[7]=+Be[7]+J;break;case"V":ke[1]=+Be[1]+J;break;case"H":ke[1]=+Be[1]+W;break;case"R":he=[W,J].concat(Be.slice(1));for(var Re=2,Tr=he.length;Re<Tr;Re++)he[Re]=+he[Re]+W,he[++Re]=+he[Re]+J;et.pop(),et=et.concat(_(he,Se));break;case"O":et.pop(),he=E(W,J,Be[1],Be[2]),he.push(he[0]),et=et.concat(he);break;case"U":et.pop(),et=et.concat(E(W,J,Be[1],Be[2],Be[3])),ke=["U"].concat(et[et.length-1].slice(-2));break;case"M":Tt=+Be[1]+W,Dt=+Be[2]+J;break;default:for(var Re=1,Tr=Be.length;Re<Tr;Re++)ke[Re]=+Be[Re]+(Re%2?W:J)}else if(fe==="R")he=[W,J].concat(Be.slice(1)),et.pop(),et=et.concat(_(he,Se)),ke=["R"].concat(Be.slice(-2));else if(fe==="O")et.pop(),he=E(W,J,Be[1],Be[2]),he.push(he[0]),et=et.concat(he);else if(fe==="U")et.pop(),et=et.concat(E(W,J,Be[1],Be[2],Be[3])),ke=["U"].concat(et[et.length-1].slice(-2));else for(var Yt=0,ft=Be.length;Yt<ft;Yt++)ke[Yt]=Be[Yt];if(fe=fe.toUpperCase(),fe!=="O")switch(ke[0]){case"Z":W=+Tt,J=+Dt;break;case"H":W=ke[1];break;case"V":J=ke[1];break;case"M":Tt=ke[ke.length-2],Dt=ke[ke.length-1];break;default:W=ke[ke.length-2],J=ke[ke.length-1]}}return et},w=function(xt,et,W,J){return[xt,et,W,J,W,J]},d=function(xt,et,W,J,Tt,Dt){var ie=1/3,fe=2/3;return[ie*xt+fe*W,ie*et+fe*J,ie*Tt+fe*W,ie*Dt+fe*J,Tt,Dt]},y=function(xt,et,W,J,Tt,Dt,ie,fe,he,Se){W===J&&(W+=1);var ke=Math.PI*120/180,Be=Math.PI/180*(+Tt||0),Ve=[],ar,Re,Tr,Yt,ft,F=function(mn,fi,Ei){var ra=mn*Math.cos(Ei)-fi*Math.sin(Ei),Co=mn*Math.sin(Ei)+fi*Math.cos(Ei);return{x:ra,y:Co}};if(Se)Re=Se[0],Tr=Se[1],Yt=Se[2],ft=Se[3];else{ar=F(xt,et,-Be),xt=ar.x,et=ar.y,ar=F(fe,he,-Be),fe=ar.x,he=ar.y,xt===fe&&et===he&&(fe+=1,he+=1);var X=(xt-fe)/2,U=(et-he)/2,gt=X*X/(W*W)+U*U/(J*J);gt>1&&(gt=Math.sqrt(gt),W=gt*W,J=gt*J);var kt=W*W,Ht=J*J,se=(Dt===ie?-1:1)*Math.sqrt(Math.abs((kt*Ht-kt*U*U-Ht*X*X)/(kt*U*U+Ht*X*X)));Yt=se*W*U/J+(xt+fe)/2,ft=se*-J*X/W+(et+he)/2,Re=Math.asin(((et-ft)/J).toFixed(9)),Tr=Math.asin(((he-ft)/J).toFixed(9)),Re=xt<Yt?Math.PI-Re:Re,Tr=fe<Yt?Math.PI-Tr:Tr,Re<0&&(Re=Math.PI*2+Re),Tr<0&&(Tr=Math.PI*2+Tr),ie&&Re>Tr&&(Re=Re-Math.PI*2),!ie&&Tr>Re&&(Tr=Tr-Math.PI*2)}var ce=Tr-Re;if(Math.abs(ce)>ke){var Me=Tr,Le=fe,Ue=he;Tr=Re+ke*(ie&&Tr>Re?1:-1),fe=Yt+W*Math.cos(Tr),he=ft+J*Math.sin(Tr),Ve=y(fe,he,W,J,Tt,0,ie,Le,Ue,[Tr,Me,Yt,ft])}ce=Tr-Re;var Je=Math.cos(Re),xr=Math.sin(Re),Yr=Math.cos(Tr),kr=Math.sin(Tr),on=Math.tan(ce/4),un=4/3*W*on,sn=4/3*J*on,Bt=[xt,et],oe=[xt+un*xr,et-sn*Je],be=[fe+un*kr,he-sn*Yr],_e=[fe,he];if(oe[0]=2*Bt[0]-oe[0],oe[1]=2*Bt[1]-oe[1],Se)return[oe,be,_e].concat(Ve);Ve=[oe,be,_e].concat(Ve).join().split(",");for(var He=[],cr=0,Hr=Ve.length;cr<Hr;cr++)He[cr]=cr%2?F(Ve[cr-1],Ve[cr],Be).y:F(Ve[cr],Ve[cr+1],Be).x;return He},m=function(xt,et){var W=g(xt),J=et&&g(et),Tt={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},Dt={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},ie=[],fe=[],he="",Se="",ke,Be=function(X,U,gt){var kt,Ht;if(!X)return["C",U.x,U.y,U.x,U.y,U.x,U.y];switch(!(X[0]in{T:1,Q:1})&&(U.qx=U.qy=null),X[0]){case"M":U.X=X[1],U.Y=X[2];break;case"A":X=["C"].concat(y.apply(0,[U.x,U.y].concat(X.slice(1))));break;case"S":gt==="C"||gt==="S"?(kt=U.x*2-U.bx,Ht=U.y*2-U.by):(kt=U.x,Ht=U.y),X=["C",kt,Ht].concat(X.slice(1));break;case"T":gt==="Q"||gt==="T"?(U.qx=U.x*2-U.qx,U.qy=U.y*2-U.qy):(U.qx=U.x,U.qy=U.y),X=["C"].concat(d(U.x,U.y,U.qx,U.qy,X[1],X[2]));break;case"Q":U.qx=X[1],U.qy=X[2],X=["C"].concat(d(U.x,U.y,X[1],X[2],X[3],X[4]));break;case"L":X=["C"].concat(w(U.x,U.y,X[1],X[2]));break;case"H":X=["C"].concat(w(U.x,U.y,X[1],U.y));break;case"V":X=["C"].concat(w(U.x,U.y,U.x,X[1]));break;case"Z":X=["C"].concat(w(U.x,U.y,U.X,U.Y));break;default:break}return X},Ve=function(X,U){if(X[U].length>7){X[U].shift();for(var gt=X[U];gt.length;)ie[U]="A",J&&(fe[U]="A"),X.splice(U++,0,["C"].concat(gt.splice(0,6)));X.splice(U,1),ke=Math.max(W.length,J&&J.length||0)}},ar=function(X,U,gt,kt,Ht){X&&U&&X[Ht][0]==="M"&&U[Ht][0]!=="M"&&(U.splice(Ht,0,["M",kt.x,kt.y]),gt.bx=0,gt.by=0,gt.x=X[Ht][1],gt.y=X[Ht][2],ke=Math.max(W.length,J&&J.length||0))};ke=Math.max(W.length,J&&J.length||0);for(var Re=0;Re<ke;Re++){W[Re]&&(he=W[Re][0]),he!=="C"&&(ie[Re]=he,Re&&(Se=ie[Re-1])),W[Re]=Be(W[Re],Tt,Se),ie[Re]!=="A"&&he==="C"&&(ie[Re]="C"),Ve(W,Re),J&&(J[Re]&&(he=J[Re][0]),he!=="C"&&(fe[Re]=he,Re&&(Se=fe[Re-1])),J[Re]=Be(J[Re],Dt,Se),fe[Re]!=="A"&&he==="C"&&(fe[Re]="C"),Ve(J,Re)),ar(W,J,Tt,Dt,Re),ar(J,W,Dt,Tt,Re);var Tr=W[Re],Yt=J&&J[Re],ft=Tr.length,F=J&&Yt.length;Tt.x=Tr[ft-2],Tt.y=Tr[ft-1],Tt.bx=parseFloat(Tr[ft-4])||Tt.x,Tt.by=parseFloat(Tr[ft-3])||Tt.y,Dt.bx=J&&(parseFloat(Yt[F-4])||Dt.x),Dt.by=J&&(parseFloat(Yt[F-3])||Dt.y),Dt.x=J&&Yt[F-2],Dt.y=J&&Yt[F-1]}return J?[W,J]:W},C=/,?([a-z]),?/gi,T=function(xt){return xt.join(",").replace(C,"$1")},B=function(xt,et,W,J,Tt){var Dt=-3*et+9*W-9*J+3*Tt,ie=xt*Dt+6*et-12*W+6*J;return xt*ie-3*et+3*W},D=function(xt,et,W,J,Tt,Dt,ie,fe,he){he===null&&(he=1),he=he>1?1:he<0?0:he;for(var Se=he/2,ke=12,Be=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Ve=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],ar=0,Re=0;Re<ke;Re++){var Tr=Se*Be[Re]+Se,Yt=B(Tr,xt,W,Tt,ie),ft=B(Tr,et,J,Dt,fe),F=Yt*Yt+ft*ft;ar+=Ve[Re]*Math.sqrt(F)}return Se*ar},Y=function(xt,et,W,J,Tt,Dt,ie,fe){for(var he=[],Se=[[],[]],ke,Be,Ve,ar,Re=0;Re<2;++Re){if(Re===0?(Be=6*xt-12*W+6*Tt,ke=-3*xt+9*W-9*Tt+3*ie,Ve=3*W-3*xt):(Be=6*et-12*J+6*Dt,ke=-3*et+9*J-9*Dt+3*fe,Ve=3*J-3*et),Math.abs(ke)<1e-12){if(Math.abs(Be)<1e-12)continue;ar=-Ve/Be,ar>0&&ar<1&&he.push(ar);continue}var Tr=Be*Be-4*Ve*ke,Yt=Math.sqrt(Tr);if(!(Tr<0)){var ft=(-Be+Yt)/(2*ke);ft>0&&ft<1&&he.push(ft);var F=(-Be-Yt)/(2*ke);F>0&&F<1&&he.push(F)}}for(var X=he.length,U=X,gt;X--;)ar=he[X],gt=1-ar,Se[0][X]=gt*gt*gt*xt+3*gt*gt*ar*W+3*gt*ar*ar*Tt+ar*ar*ar*ie,Se[1][X]=gt*gt*gt*et+3*gt*gt*ar*J+3*gt*ar*ar*Dt+ar*ar*ar*fe;return Se[0][U]=xt,Se[1][U]=et,Se[0][U+1]=ie,Se[1][U+1]=fe,Se[0].length=Se[1].length=U+2,{min:{x:Math.min.apply(0,Se[0]),y:Math.min.apply(0,Se[1])},max:{x:Math.max.apply(0,Se[0]),y:Math.max.apply(0,Se[1])}}},K=function(xt,et,W,J,Tt,Dt,ie,fe){if(!(Math.max(xt,W)<Math.min(Tt,ie)||Math.min(xt,W)>Math.max(Tt,ie)||Math.max(et,J)<Math.min(Dt,fe)||Math.min(et,J)>Math.max(Dt,fe))){var he=(xt*J-et*W)*(Tt-ie)-(xt-W)*(Tt*fe-Dt*ie),Se=(xt*J-et*W)*(Dt-fe)-(et-J)*(Tt*fe-Dt*ie),ke=(xt-W)*(Dt-fe)-(et-J)*(Tt-ie);if(!!ke){var Be=he/ke,Ve=Se/ke,ar=+Be.toFixed(2),Re=+Ve.toFixed(2);if(!(ar<+Math.min(xt,W).toFixed(2)||ar>+Math.max(xt,W).toFixed(2)||ar<+Math.min(Tt,ie).toFixed(2)||ar>+Math.max(Tt,ie).toFixed(2)||Re<+Math.min(et,J).toFixed(2)||Re>+Math.max(et,J).toFixed(2)||Re<+Math.min(Dt,fe).toFixed(2)||Re>+Math.max(Dt,fe).toFixed(2)))return{x:Be,y:Ve}}}},H=function(xt,et,W){return et>=xt.x&&et<=xt.x+xt.width&&W>=xt.y&&W<=xt.y+xt.height},st=function(xt,et,W,J,Tt){if(Tt)return[["M",+xt+ +Tt,et],["l",W-Tt*2,0],["a",Tt,Tt,0,0,1,Tt,Tt],["l",0,J-Tt*2],["a",Tt,Tt,0,0,1,-Tt,Tt],["l",Tt*2-W,0],["a",Tt,Tt,0,0,1,-Tt,-Tt],["l",0,Tt*2-J],["a",Tt,Tt,0,0,1,Tt,-Tt],["z"]];var Dt=[["M",xt,et],["l",W,0],["l",0,J],["l",-W,0],["z"]];return Dt.parsePathArray=T,Dt},pt=function(xt,et,W,J){return xt===null&&(xt=et=W=J=0),et===null&&(et=xt.y,W=xt.width,J=xt.height,xt=xt.x),{x:xt,y:et,width:W,w:W,height:J,h:J,x2:xt+W,y2:et+J,cx:xt+W/2,cy:et+J/2,r1:Math.min(W,J)/2,r2:Math.max(W,J)/2,r0:Math.sqrt(W*W+J*J)/2,path:st(xt,et,W,J),vb:[xt,et,W,J].join(" ")}},ct=function(xt,et){return xt=pt(xt),et=pt(et),H(et,xt.x,xt.y)||H(et,xt.x2,xt.y)||H(et,xt.x,xt.y2)||H(et,xt.x2,xt.y2)||H(xt,et.x,et.y)||H(xt,et.x2,et.y)||H(xt,et.x,et.y2)||H(xt,et.x2,et.y2)||(xt.x<et.x2&&xt.x>et.x||et.x<xt.x2&&et.x>xt.x)&&(xt.y<et.y2&&xt.y>et.y||et.y<xt.y2&&et.y>xt.y)},Ot=function(xt,et,W,J,Tt,Dt,ie,fe){(0,I.isArray)(xt)||(xt=[xt,et,W,J,Tt,Dt,ie,fe]);var he=Y.apply(null,xt);return pt(he.min.x,he.min.y,he.max.x-he.min.x,he.max.y-he.min.y)},Rt=function(xt,et,W,J,Tt,Dt,ie,fe,he){var Se=1-he,ke=Math.pow(Se,3),Be=Math.pow(Se,2),Ve=he*he,ar=Ve*he,Re=ke*xt+Be*3*he*W+Se*3*he*he*Tt+ar*ie,Tr=ke*et+Be*3*he*J+Se*3*he*he*Dt+ar*fe,Yt=xt+2*he*(W-xt)+Ve*(Tt-2*W+xt),ft=et+2*he*(J-et)+Ve*(Dt-2*J+et),F=W+2*he*(Tt-W)+Ve*(ie-2*Tt+W),X=J+2*he*(Dt-J)+Ve*(fe-2*Dt+J),U=Se*xt+he*W,gt=Se*et+he*J,kt=Se*Tt+he*ie,Ht=Se*Dt+he*fe,se=90-Math.atan2(Yt-F,ft-X)*180/Math.PI;return{x:Re,y:Tr,m:{x:Yt,y:ft},n:{x:F,y:X},start:{x:U,y:gt},end:{x:kt,y:Ht},alpha:se}},Qt=function(xt,et,W){var J=Ot(xt),Tt=Ot(et);if(!ct(J,Tt))return W?0:[];for(var Dt=D.apply(0,xt),ie=D.apply(0,et),fe=~~(Dt/8),he=~~(ie/8),Se=[],ke=[],Be={},Ve=W?0:[],ar=0;ar<fe+1;ar++){var Re=Rt.apply(0,xt.concat(ar/fe));Se.push({x:Re.x,y:Re.y,t:ar/fe})}for(var ar=0;ar<he+1;ar++){var Re=Rt.apply(0,et.concat(ar/he));ke.push({x:Re.x,y:Re.y,t:ar/he})}for(var ar=0;ar<fe;ar++)for(var Tr=0;Tr<he;Tr++){var Yt=Se[ar],ft=Se[ar+1],F=ke[Tr],X=ke[Tr+1],U=Math.abs(ft.x-Yt.x)<.001?"y":"x",gt=Math.abs(X.x-F.x)<.001?"y":"x",kt=K(Yt.x,Yt.y,ft.x,ft.y,F.x,F.y,X.x,X.y);if(kt){if(Be[kt.x.toFixed(4)]===kt.y.toFixed(4))continue;Be[kt.x.toFixed(4)]=kt.y.toFixed(4);var Ht=Yt.t+Math.abs((kt[U]-Yt[U])/(ft[U]-Yt[U]))*(ft.t-Yt.t),se=F.t+Math.abs((kt[gt]-F[gt])/(X[gt]-F[gt]))*(X.t-F.t);Ht>=0&&Ht<=1&&se>=0&&se<=1&&(W?Ve+=1:Ve.push({x:kt.x,y:kt.y,t1:Ht,t2:se}))}}return Ve},Gt=function(xt,et,W){xt=m(xt),et=m(et);for(var J,Tt,Dt,ie,fe,he,Se,ke,Be,Ve,ar=W?0:[],Re=0,Tr=xt.length;Re<Tr;Re++){var Yt=xt[Re];if(Yt[0]==="M")J=fe=Yt[1],Tt=he=Yt[2];else{Yt[0]==="C"?(Be=[J,Tt].concat(Yt.slice(1)),J=Be[6],Tt=Be[7]):(Be=[J,Tt,J,Tt,fe,he,fe,he],J=fe,Tt=he);for(var ft=0,F=et.length;ft<F;ft++){var X=et[ft];if(X[0]==="M")Dt=Se=X[1],ie=ke=X[2];else{X[0]==="C"?(Ve=[Dt,ie].concat(X.slice(1)),Dt=Ve[6],ie=Ve[7]):(Ve=[Dt,ie,Dt,ie,Se,ke,Se,ke],Dt=Se,ie=ke);var U=Qt(Be,Ve,W);if(W)ar+=U;else{for(var gt=0,kt=U.length;gt<kt;gt++)U[gt].segment1=Re,U[gt].segment2=ft,U[gt].bez1=Be,U[gt].bez2=Ve;ar=ar.concat(U)}}}}}return ar},Z=function(xt,et){return Gt(xt,et)};function nt(xt,et){var W=[],J=[];function Tt(Dt,ie){if(Dt.length===1)W.push(Dt[0]),J.push(Dt[0]);else{for(var fe=[],he=0;he<Dt.length-1;he++)he===0&&W.push(Dt[0]),he===Dt.length-2&&J.push(Dt[he+1]),fe[he]=[(1-ie)*Dt[he][0]+ie*Dt[he+1][0],(1-ie)*Dt[he][1]+ie*Dt[he+1][1]];Tt(fe,ie)}}return xt.length&&Tt(xt,et),{left:W,right:J.reverse()}}function Q(xt,et,W){var J=[[xt[1],xt[2]]];W=W||2;var Tt=[];et[0]==="A"?(J.push(et[6]),J.push(et[7])):et[0]==="C"?(J.push([et[1],et[2]]),J.push([et[3],et[4]]),J.push([et[5],et[6]])):et[0]==="S"||et[0]==="Q"?(J.push([et[1],et[2]]),J.push([et[3],et[4]])):J.push([et[1],et[2]]);for(var Dt=J,ie=1/W,fe=0;fe<W-1;fe++){var he=ie/(1-ie*fe),Se=nt(Dt,he);Tt.push(Se.left),Dt=Se.right}Tt.push(Dt);var ke=Tt.map(function(Be){var Ve=[];return Be.length===4&&(Ve.push("C"),Ve=Ve.concat(Be[2])),Be.length>=3&&(Be.length===3&&Ve.push("Q"),Ve=Ve.concat(Be[1])),Be.length===2&&Ve.push("L"),Ve=Ve.concat(Be[Be.length-1]),Ve});return ke}var dt=function(xt,et,W){if(W===1)return[[].concat(xt)];var J=[];if(et[0]==="L"||et[0]==="C"||et[0]==="Q")J=J.concat(Q(xt,et,W));else{var Tt=[].concat(xt);Tt[0]==="M"&&(Tt[0]="L");for(var Dt=0;Dt<=W-1;Dt++)J.push(Tt)}return J},lt=function(xt,et){if(xt.length===1)return xt;var W=xt.length-1,J=et.length-1,Tt=W/J,Dt=[];if(xt.length===1&&xt[0][0]==="M"){for(var ie=0;ie<J-W;ie++)xt.push(xt[0]);return xt}for(var ie=0;ie<J;ie++){var fe=Math.floor(Tt*ie);Dt[fe]=(Dt[fe]||0)+1}var he=Dt.reduce(function(Se,ke,Be){return Be===W?Se.concat(xt[W]):Se.concat(dt(xt[Be],xt[Be+1],ke))},[]);return he.unshift(xt[0]),(et[J]==="Z"||et[J]==="z")&&he.push("Z"),he},z=function(xt,et){if(xt.length!==et.length)return!1;var W=!0;return(0,I.each)(xt,function(J,Tt){if(J!==et[Tt])return W=!1,!1}),W};function $(xt,et,W){var J=null,Tt=W;return et<Tt&&(Tt=et,J="add"),xt<Tt&&(Tt=xt,J="del"),{type:J,min:Tt}}var j=function(xt,et){var W=xt.length,J=et.length,Tt,Dt,ie=0;if(W===0||J===0)return null;for(var fe=[],he=0;he<=W;he++)fe[he]=[],fe[he][0]={min:he};for(var Se=0;Se<=J;Se++)fe[0][Se]={min:Se};for(var he=1;he<=W;he++){Tt=xt[he-1];for(var Se=1;Se<=J;Se++){Dt=et[Se-1],z(Tt,Dt)?ie=0:ie=1;var ke=fe[he-1][Se].min+1,Be=fe[he][Se-1].min+1,Ve=fe[he-1][Se-1].min+ie;fe[he][Se]=$(ke,Be,Ve)}}return fe},f=function(xt,et){var W=j(xt,et),J=xt.length,Tt=et.length,Dt=[],ie=1,fe=1;if(W[J][Tt].min!==J){for(var he=1;he<=J;he++){var Se=W[he][he].min;fe=he;for(var ke=ie;ke<=Tt;ke++)W[he][ke].min<Se&&(Se=W[he][ke].min,fe=ke);ie=fe,W[he][ie].type&&Dt.push({index:he-1,type:W[he][ie].type})}for(var he=Dt.length-1;he>=0;he--)ie=Dt[he].index,Dt[he].type==="add"?xt.splice(ie,0,[].concat(xt[ie])):xt.splice(ie,1)}J=xt.length;var Be=Tt-J;if(J<Tt)for(var he=0;he<Be;he++)xt[J-1][0]==="z"||xt[J-1][0]==="Z"?xt.splice(J-2,0,xt[J-2]):xt.push(xt[J-1]),J+=1;return xt};function yt(xt,et,W){for(var J=[].concat(xt),Tt,Dt=1/(W+1),ie=_t(et)[0],fe=1;fe<=W;fe++)Dt*=fe,Tt=Math.floor(xt.length*Dt),Tt===0?J.unshift([ie[0]*Dt+xt[Tt][0]*(1-Dt),ie[1]*Dt+xt[Tt][1]*(1-Dt)]):J.splice(Tt,0,[ie[0]*Dt+xt[Tt][0]*(1-Dt),ie[1]*Dt+xt[Tt][1]*(1-Dt)]);return J}function _t(xt){var et=[];switch(xt[0]){case"M":et.push([xt[1],xt[2]]);break;case"L":et.push([xt[1],xt[2]]);break;case"A":et.push([xt[6],xt[7]]);break;case"Q":et.push([xt[3],xt[4]]),et.push([xt[1],xt[2]]);break;case"T":et.push([xt[1],xt[2]]);break;case"C":et.push([xt[5],xt[6]]),et.push([xt[1],xt[2]]),et.push([xt[3],xt[4]]);break;case"S":et.push([xt[3],xt[4]]),et.push([xt[1],xt[2]]);break;case"H":et.push([xt[1],xt[1]]);break;case"V":et.push([xt[1],xt[1]]);break;default:}return et}var jt=function(xt,et){if(xt.length<=1)return xt;for(var W,J=0;J<et.length;J++)if(xt[J][0]!==et[J][0])switch(W=_t(xt[J]),et[J][0]){case"M":xt[J]=["M"].concat(W[0]);break;case"L":xt[J]=["L"].concat(W[0]);break;case"A":xt[J]=[].concat(et[J]),xt[J][6]=W[0][0],xt[J][7]=W[0][1];break;case"Q":if(W.length<2)if(J>0)W=yt(W,xt[J-1],1);else{xt[J]=et[J];break}xt[J]=["Q"].concat(W.reduce(function(Tt,Dt){return Tt.concat(Dt)},[]));break;case"T":xt[J]=["T"].concat(W[0]);break;case"C":if(W.length<3)if(J>0)W=yt(W,xt[J-1],2);else{xt[J]=et[J];break}xt[J]=["C"].concat(W.reduce(function(Tt,Dt){return Tt.concat(Dt)},[]));break;case"S":if(W.length<2)if(J>0)W=yt(W,xt[J-1],1);else{xt[J]=et[J];break}xt[J]=["S"].concat(W.reduce(function(Tt,Dt){return Tt.concat(Dt)},[]));break;default:xt[J]=et[J]}return xt},qt=function(){function xt(et,W){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=et,this.name=et,this.originalEvent=W,this.timeStamp=W.timeStamp}return xt.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},xt.prototype.stopPropagation=function(){this.propagationStopped=!0},xt.prototype.toString=function(){var et=this.type;return"[Event (type="+et+")]"},xt.prototype.save=function(){},xt.prototype.restore=function(){},xt}(),Vt=qt,re=function(xt,et){return re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,J){W.__proto__=J}||function(W,J){for(var Tt in J)Object.prototype.hasOwnProperty.call(J,Tt)&&(W[Tt]=J[Tt])},re(xt,et)};function ae(xt,et){if(typeof et!="function"&&et!==null)throw new TypeError("Class extends value "+String(et)+" is not a constructor or null");re(xt,et);function W(){this.constructor=xt}xt.prototype=et===null?Object.create(et):(W.prototype=et.prototype,new W)}var Nt=function(){return Nt=Object.assign||function(et){for(var W,J=1,Tt=arguments.length;J<Tt;J++){W=arguments[J];for(var Dt in W)Object.prototype.hasOwnProperty.call(W,Dt)&&(et[Dt]=W[Dt])}return et},Nt.apply(this,arguments)};function Lt(xt,et){var W={};for(var J in xt)Object.prototype.hasOwnProperty.call(xt,J)&&et.indexOf(J)<0&&(W[J]=xt[J]);if(xt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Tt=0,J=Object.getOwnPropertySymbols(xt);Tt<J.length;Tt++)et.indexOf(J[Tt])<0&&Object.prototype.propertyIsEnumerable.call(xt,J[Tt])&&(W[J[Tt]]=xt[J[Tt]]);return W}function bt(xt,et,W,J){var Tt=arguments.length,Dt=Tt<3?et:J===null?J=Object.getOwnPropertyDescriptor(et,W):J,ie;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Dt=Reflect.decorate(xt,et,W,J);else for(var fe=xt.length-1;fe>=0;fe--)(ie=xt[fe])&&(Dt=(Tt<3?ie(Dt):Tt>3?ie(et,W,Dt):ie(et,W))||Dt);return Tt>3&&Dt&&Object.defineProperty(et,W,Dt),Dt}function at(xt,et){return function(W,J){et(W,J,xt)}}function rt(xt,et){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(xt,et)}function vt(xt,et,W,J){function Tt(Dt){return Dt instanceof W?Dt:new W(function(ie){ie(Dt)})}return new(W||(W=Promise))(function(Dt,ie){function fe(ke){try{Se(J.next(ke))}catch(Be){ie(Be)}}function he(ke){try{Se(J.throw(ke))}catch(Be){ie(Be)}}function Se(ke){ke.done?Dt(ke.value):Tt(ke.value).then(fe,he)}Se((J=J.apply(xt,et||[])).next())})}function tt(xt,et){var W={label:0,sent:function(){if(Dt[0]&1)throw Dt[1];return Dt[1]},trys:[],ops:[]},J,Tt,Dt,ie;return ie={next:fe(0),throw:fe(1),return:fe(2)},typeof Symbol=="function"&&(ie[Symbol.iterator]=function(){return this}),ie;function fe(Se){return function(ke){return he([Se,ke])}}function he(Se){if(J)throw new TypeError("Generator is already executing.");for(;W;)try{if(J=1,Tt&&(Dt=Se[0]&2?Tt.return:Se[0]?Tt.throw||((Dt=Tt.return)&&Dt.call(Tt),0):Tt.next)&&!(Dt=Dt.call(Tt,Se[1])).done)return Dt;switch(Tt=0,Dt&&(Se=[Se[0]&2,Dt.value]),Se[0]){case 0:case 1:Dt=Se;break;case 4:return W.label++,{value:Se[1],done:!1};case 5:W.label++,Tt=Se[1],Se=[0];continue;case 7:Se=W.ops.pop(),W.trys.pop();continue;default:if(Dt=W.trys,!(Dt=Dt.length>0&&Dt[Dt.length-1])&&(Se[0]===6||Se[0]===2)){W=0;continue}if(Se[0]===3&&(!Dt||Se[1]>Dt[0]&&Se[1]<Dt[3])){W.label=Se[1];break}if(Se[0]===6&&W.label<Dt[1]){W.label=Dt[1],Dt=Se;break}if(Dt&&W.label<Dt[2]){W.label=Dt[2],W.ops.push(Se);break}Dt[2]&&W.ops.pop(),W.trys.pop();continue}Se=et.call(xt,W)}catch(ke){Se=[6,ke],Tt=0}finally{J=Dt=0}if(Se[0]&5)throw Se[1];return{value:Se[0]?Se[1]:void 0,done:!0}}}var q=Object.create?function(xt,et,W,J){J===void 0&&(J=W);var Tt=Object.getOwnPropertyDescriptor(et,W);(!Tt||("get"in Tt?!et.__esModule:Tt.writable||Tt.configurable))&&(Tt={enumerable:!0,get:function(){return et[W]}}),Object.defineProperty(xt,J,Tt)}:function(xt,et,W,J){J===void 0&&(J=W),xt[J]=et[W]};function Et(xt,et){for(var W in xt)W!=="default"&&!Object.prototype.hasOwnProperty.call(et,W)&&q(et,xt,W)}function It(xt){var et=typeof Symbol=="function"&&Symbol.iterator,W=et&&xt[et],J=0;if(W)return W.call(xt);if(xt&&typeof xt.length=="number")return{next:function(){return xt&&J>=xt.length&&(xt=void 0),{value:xt&&xt[J++],done:!xt}}};throw new TypeError(et?"Object is not iterable.":"Symbol.iterator is not defined.")}function Kt(xt,et){var W=typeof Symbol=="function"&&xt[Symbol.iterator];if(!W)return xt;var J=W.call(xt),Tt,Dt=[],ie;try{for(;(et===void 0||et-- >0)&&!(Tt=J.next()).done;)Dt.push(Tt.value)}catch(fe){ie={error:fe}}finally{try{Tt&&!Tt.done&&(W=J.return)&&W.call(J)}finally{if(ie)throw ie.error}}return Dt}function ue(){for(var xt=[],et=0;et<arguments.length;et++)xt=xt.concat(Kt(arguments[et]));return xt}function we(){for(var xt=0,et=0,W=arguments.length;et<W;et++)xt+=arguments[et].length;for(var J=Array(xt),Tt=0,et=0;et<W;et++)for(var Dt=arguments[et],ie=0,fe=Dt.length;ie<fe;ie++,Tt++)J[Tt]=Dt[ie];return J}function Ye(xt,et,W){if(W||arguments.length===2)for(var J=0,Tt=et.length,Dt;J<Tt;J++)(Dt||!(J in et))&&(Dt||(Dt=Array.prototype.slice.call(et,0,J)),Dt[J]=et[J]);return xt.concat(Dt||Array.prototype.slice.call(et))}function te(xt){return this instanceof te?(this.v=xt,this):new te(xt)}function pe(xt,et,W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var J=W.apply(xt,et||[]),Tt,Dt=[];return Tt={},ie("next"),ie("throw"),ie("return"),Tt[Symbol.asyncIterator]=function(){return this},Tt;function ie(Ve){J[Ve]&&(Tt[Ve]=function(ar){return new Promise(function(Re,Tr){Dt.push([Ve,ar,Re,Tr])>1||fe(Ve,ar)})})}function fe(Ve,ar){try{he(J[Ve](ar))}catch(Re){Be(Dt[0][3],Re)}}function he(Ve){Ve.value instanceof te?Promise.resolve(Ve.value.v).then(Se,ke):Be(Dt[0][2],Ve)}function Se(Ve){fe("next",Ve)}function ke(Ve){fe("throw",Ve)}function Be(Ve,ar){Ve(ar),Dt.shift(),Dt.length&&fe(Dt[0][0],Dt[0][1])}}function Te(xt){var et,W;return et={},J("next"),J("throw",function(Tt){throw Tt}),J("return"),et[Symbol.iterator]=function(){return this},et;function J(Tt,Dt){et[Tt]=xt[Tt]?function(ie){return(W=!W)?{value:te(xt[Tt](ie)),done:Tt==="return"}:Dt?Dt(ie):ie}:Dt}}function ze(xt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var et=xt[Symbol.asyncIterator],W;return et?et.call(xt):(xt=typeof It=="function"?It(xt):xt[Symbol.iterator](),W={},J("next"),J("throw"),J("return"),W[Symbol.asyncIterator]=function(){return this},W);function J(Dt){W[Dt]=xt[Dt]&&function(ie){return new Promise(function(fe,he){ie=xt[Dt](ie),Tt(fe,he,ie.done,ie.value)})}}function Tt(Dt,ie,fe,he){Promise.resolve(he).then(function(Se){Dt({value:Se,done:fe})},ie)}}function ur(xt,et){return Object.defineProperty?Object.defineProperty(xt,"raw",{value:et}):xt.raw=et,xt}var Ze=Object.create?function(xt,et){Object.defineProperty(xt,"default",{enumerable:!0,value:et})}:function(xt,et){xt.default=et};function pr(xt){if(xt&&xt.__esModule)return xt;var et={};if(xt!=null)for(var W in xt)W!=="default"&&Object.prototype.hasOwnProperty.call(xt,W)&&q(et,xt,W);return Ze(et,xt),et}function Pr(xt){return xt&&xt.__esModule?xt:{default:xt}}function Or(xt,et,W,J){if(W==="a"&&!J)throw new TypeError("Private accessor was defined without a getter");if(typeof et=="function"?xt!==et||!J:!et.has(xt))throw new TypeError("Cannot read private member from an object whose class did not declare it");return W==="m"?J:W==="a"?J.call(xt):J?J.value:et.get(xt)}function nn(xt,et,W,J,Tt){if(J==="m")throw new TypeError("Private method is not writable");if(J==="a"&&!Tt)throw new TypeError("Private accessor was defined without a setter");if(typeof et=="function"?xt!==et||!Tt:!et.has(xt))throw new TypeError("Cannot write private member to an object whose class did not declare it");return J==="a"?Tt.call(xt,W):Tt?Tt.value=W:et.set(xt,W),W}function kn(xt,et){if(et===null||typeof et!="object"&&typeof et!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof xt=="function"?et===xt:xt.has(et)}var ii=p(90494);function gi(xt,et){var W=xt.indexOf(et);W!==-1&&xt.splice(W,1)}var Si=typeof window!="undefined"&&typeof window.document!="undefined";function Zt(xt,et){if(xt.isCanvas())return!0;for(var W=et.getParent(),J=!1;W;){if(W===xt){J=!0;break}W=W.getParent()}return J}function ne(xt){return xt.cfg.visible&&xt.cfg.capture}var ve=function(xt){ae(et,xt);function et(W){var J=xt.call(this)||this;J.destroyed=!1;var Tt=J.getDefaultCfg();return J.cfg=(0,I.mix)(Tt,W),J}return et.prototype.getDefaultCfg=function(){return{}},et.prototype.get=function(W){return this.cfg[W]},et.prototype.set=function(W,J){this.cfg[W]=J},et.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},et}(ii.default),ge=ve,Ae=p(43631),Pe=p(35600);function Ie(xt,et,W){var J=[0,0,0,0,0,0,0,0,0];return Pe.fromTranslation(J,W),Pe.multiply(xt,J,et)}function De(xt,et,W){var J=[0,0,0,0,0,0,0,0,0];return Pe.fromRotation(J,W),Pe.multiply(xt,J,et)}function Ce(xt,et,W){var J=[0,0,0,0,0,0,0,0,0];return Pe.fromScaling(J,W),Pe.multiply(xt,J,et)}function er(xt,et,W){return Pe.multiply(xt,W,et)}function je(xt,et){for(var W=xt?[].concat(xt):[1,0,0,0,1,0,0,0,1],J=0,Tt=et.length;J<Tt;J++){var Dt=et[J];switch(Dt[0]){case"t":Ie(W,W,[Dt[1],Dt[2]]);break;case"s":Ce(W,W,[Dt[1],Dt[2]]);break;case"r":De(W,W,Dt[1]);break;case"m":er(W,W,Dt[1]);break;default:break}}return W}function fr(xt,et){return xt[0]*et[1]-et[0]*xt[1]}function Sr(xt,et,W){var J=vec2.angle(xt,et),Tt=fr(xt,et)>=0;return W?Tt?Math.PI*2-J:J:Tt?J:Math.PI*2-J}function hr(xt,et,W){return W?(xt[0]=et[1],xt[1]=-1*et[0]):(xt[0]=-1*et[1],xt[1]=et[0]),xt}function gr(xt,et){var W=[],J=xt[0],Tt=xt[1],Dt=xt[2],ie=xt[3],fe=xt[4],he=xt[5],Se=xt[6],ke=xt[7],Be=xt[8],Ve=et[0],ar=et[1],Re=et[2],Tr=et[3],Yt=et[4],ft=et[5],F=et[6],X=et[7],U=et[8];return W[0]=Ve*J+ar*ie+Re*Se,W[1]=Ve*Tt+ar*fe+Re*ke,W[2]=Ve*Dt+ar*he+Re*Be,W[3]=Tr*J+Yt*ie+ft*Se,W[4]=Tr*Tt+Yt*fe+ft*ke,W[5]=Tr*Dt+Yt*he+ft*Be,W[6]=F*J+X*ie+U*Se,W[7]=F*Tt+X*fe+U*ke,W[8]=F*Dt+X*he+U*Be,W}function vr(xt,et){var W=[],J=et[0],Tt=et[1];return W[0]=xt[0]*J+xt[3]*Tt+xt[6],W[1]=xt[1]*J+xt[4]*Tt+xt[7],W}function Cr(xt){var et=[],W=xt[0],J=xt[1],Tt=xt[2],Dt=xt[3],ie=xt[4],fe=xt[5],he=xt[6],Se=xt[7],ke=xt[8],Be=ke*ie-fe*Se,Ve=-ke*Dt+fe*he,ar=Se*Dt-ie*he,Re=W*Be+J*Ve+Tt*ar;return Re?(Re=1/Re,et[0]=Be*Re,et[1]=(-ke*J+Tt*Se)*Re,et[2]=(fe*J-Tt*ie)*Re,et[3]=Ve*Re,et[4]=(ke*W-Tt*he)*Re,et[5]=(-fe*W+Tt*Dt)*Re,et[6]=ar*Re,et[7]=(-Se*W+J*he)*Re,et[8]=(ie*W-J*Dt)*Re,et):null}var or=je,Ir="matrix",Wr=["zIndex","capture","visible","type"],Nr=["repeat"],jr=":",Qr="*";function Zr(xt){for(var et=[],W=0;W<xt.length;W++)(0,I.isArray)(xt[W])?et.push([].concat(xt[W])):et.push(xt[W]);return et}function Bn(xt,et){var W={},J=et.attrs;for(var Tt in xt)W[Tt]=J[Tt];return W}function hn(xt,et){var W={},J=et.attr();return(0,I.each)(xt,function(Tt,Dt){Nr.indexOf(Dt)===-1&&!(0,I.isEqual)(J[Dt],Tt)&&(W[Dt]=Tt)}),W}function Hn(xt,et){if(et.onFrame)return xt;var W=et.startTime,J=et.delay,Tt=et.duration,Dt=Object.prototype.hasOwnProperty;return(0,I.each)(xt,function(ie){W+J<ie.startTime+ie.delay+ie.duration&&Tt>ie.delay&&(0,I.each)(et.toAttrs,function(fe,he){Dt.call(ie.toAttrs,he)&&(delete ie.toAttrs[he],delete ie.fromAttrs[he])})}),xt}var yi=function(xt){ae(et,xt);function et(W){var J=xt.call(this,W)||this;J.attrs={};var Tt=J.getDefaultAttrs();return(0,I.mix)(Tt,W.attrs),J.attrs=Tt,J.initAttrs(Tt),J.initAnimate(),J}return et.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},et.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},et.prototype.onCanvasChange=function(W){},et.prototype.initAttrs=function(W){},et.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},et.prototype.isGroup=function(){return!1},et.prototype.getParent=function(){return this.get("parent")},et.prototype.getCanvas=function(){return this.get("canvas")},et.prototype.attr=function(){for(var W,J=[],Tt=0;Tt<arguments.length;Tt++)J[Tt]=arguments[Tt];var Dt=J[0],ie=J[1];if(!Dt)return this.attrs;if((0,I.isObject)(Dt)){for(var fe in Dt)this.setAttr(fe,Dt[fe]);return this.afterAttrsChange(Dt),this}return J.length===2?(this.setAttr(Dt,ie),this.afterAttrsChange((W={},W[Dt]=ie,W)),this):this.attrs[Dt]},et.prototype.isClipped=function(W,J){var Tt=this.getClip();return Tt&&!Tt.isHit(W,J)},et.prototype.setAttr=function(W,J){var Tt=this.attrs[W];Tt!==J&&(this.attrs[W]=J,this.onAttrChange(W,J,Tt))},et.prototype.onAttrChange=function(W,J,Tt){W==="matrix"&&this.set("totalMatrix",null)},et.prototype.afterAttrsChange=function(W){if(this.cfg.isClipShape){var J=this.cfg.applyTo;J&&J.onCanvasChange("clip")}else this.onCanvasChange("attr")},et.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},et.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},et.prototype.setZIndex=function(W){this.set("zIndex",W);var J=this.getParent();return J&&J.sort(),this},et.prototype.toFront=function(){var W=this.getParent();if(!!W){var J=W.getChildren(),Tt=this.get("el"),Dt=J.indexOf(this);J.splice(Dt,1),J.push(this),this.onCanvasChange("zIndex")}},et.prototype.toBack=function(){var W=this.getParent();if(!!W){var J=W.getChildren(),Tt=this.get("el"),Dt=J.indexOf(this);J.splice(Dt,1),J.unshift(this),this.onCanvasChange("zIndex")}},et.prototype.remove=function(W){W===void 0&&(W=!0);var J=this.getParent();J?(gi(J.getChildren(),this),J.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),W&&this.destroy()},et.prototype.resetMatrix=function(){this.attr(Ir,this.getDefaultMatrix()),this.onCanvasChange("matrix")},et.prototype.getMatrix=function(){return this.attr(Ir)},et.prototype.setMatrix=function(W){this.attr(Ir,W),this.onCanvasChange("matrix")},et.prototype.getTotalMatrix=function(){var W=this.cfg.totalMatrix;if(!W){var J=this.attr("matrix"),Tt=this.cfg.parentMatrix;Tt&&J?W=gr(Tt,J):W=J||Tt,this.set("totalMatrix",W)}return W},et.prototype.applyMatrix=function(W){var J=this.attr("matrix"),Tt=null;W&&J?Tt=gr(W,J):Tt=J||W,this.set("totalMatrix",Tt),this.set("parentMatrix",W)},et.prototype.getDefaultMatrix=function(){return null},et.prototype.applyToMatrix=function(W){var J=this.attr("matrix");return J?vr(J,W):W},et.prototype.invertFromMatrix=function(W){var J=this.attr("matrix");if(J){var Tt=Cr(J);if(Tt)return vr(Tt,W)}return W},et.prototype.setClip=function(W){var J=this.getCanvas(),Tt=null;if(W){var Dt=this.getShapeBase(),ie=(0,I.upperFirst)(W.type),fe=Dt[ie];fe&&(Tt=new fe({type:W.type,isClipShape:!0,applyTo:this,attrs:W.attrs,canvas:J}))}return this.set("clipShape",Tt),this.onCanvasChange("clip"),Tt},et.prototype.getClip=function(){var W=this.cfg.clipShape;return W||null},et.prototype.clone=function(){var W=this,J=this.attrs,Tt={};(0,I.each)(J,function(fe,he){(0,I.isArray)(J[he])?Tt[he]=Zr(J[he]):Tt[he]=J[he]});var Dt=this.constructor,ie=new Dt({attrs:Tt});return(0,I.each)(Wr,function(fe){ie.set(fe,W.get(fe))}),ie},et.prototype.destroy=function(){var W=this.destroyed;W||(this.attrs={},xt.prototype.destroy.call(this))},et.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},et.prototype.animate=function(){for(var W=[],J=0;J<arguments.length;J++)W[J]=arguments[J];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var Tt=this.get("timeline");Tt||(Tt=this.get("canvas").get("timeline"),this.set("timeline",Tt));var Dt=this.get("animations")||[];Tt.timer||Tt.initTimer();var ie=W[0],fe=W[1],he=W[2],Se=he===void 0?"easeLinear":he,ke=W[3],Be=ke===void 0?I.noop:ke,Ve=W[4],ar=Ve===void 0?0:Ve,Re,Tr,Yt,ft,F;(0,I.isFunction)(ie)?(Re=ie,ie={}):(0,I.isObject)(ie)&&ie.onFrame&&(Re=ie.onFrame,Tr=ie.repeat),(0,I.isObject)(fe)?(F=fe,fe=F.duration,Se=F.easing||"easeLinear",ar=F.delay||0,Tr=F.repeat||Tr||!1,Be=F.callback||I.noop,Yt=F.pauseCallback||I.noop,ft=F.resumeCallback||I.noop):((0,I.isNumber)(Be)&&(ar=Be,Be=null),(0,I.isFunction)(Se)?(Be=Se,Se="easeLinear"):Se=Se||"easeLinear");var X=hn(ie,this),U={fromAttrs:Bn(X,this),toAttrs:X,duration:fe,easing:Se,repeat:Tr,callback:Be,pauseCallback:Yt,resumeCallback:ft,delay:ar,startTime:Tt.getTime(),id:(0,I.uniqueId)(),onFrame:Re,pathFormatted:!1};Dt.length>0?Dt=Hn(Dt,U):Tt.addAnimator(this),Dt.push(U),this.set("animations",Dt),this.set("_pause",{isPaused:!1})}},et.prototype.stopAnimate=function(W){var J=this;W===void 0&&(W=!0);var Tt=this.get("animations");(0,I.each)(Tt,function(Dt){W&&(Dt.onFrame?J.attr(Dt.onFrame(1)):J.attr(Dt.toAttrs)),Dt.callback&&Dt.callback()}),this.set("animating",!1),this.set("animations",[])},et.prototype.pauseAnimate=function(){var W=this.get("timeline"),J=this.get("animations"),Tt=W.getTime();return(0,I.each)(J,function(Dt){Dt._paused=!0,Dt._pauseTime=Tt,Dt.pauseCallback&&Dt.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:Tt}),this},et.prototype.resumeAnimate=function(){var W=this.get("timeline"),J=W.getTime(),Tt=this.get("animations"),Dt=this.get("_pause").pauseTime;return(0,I.each)(Tt,function(ie){ie.startTime=ie.startTime+(J-Dt),ie._paused=!1,ie._pauseTime=null,ie.resumeCallback&&ie.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",Tt),this},et.prototype.emitDelegation=function(W,J){var Tt=this,Dt=J.propagationPath,ie=this.getEvents(),fe;W==="mouseenter"?fe=J.fromShape:W==="mouseleave"&&(fe=J.toShape);for(var he=function(Ve){var ar=Dt[Ve],Re=ar.get("name");if(Re){if((ar.isGroup()||ar.isCanvas&&ar.isCanvas())&&fe&&Zt(ar,fe))return"break";(0,I.isArray)(Re)?(0,I.each)(Re,function(Tr){Tt.emitDelegateEvent(ar,Tr,J)}):Se.emitDelegateEvent(ar,Re,J)}},Se=this,ke=0;ke<Dt.length;ke++){var Be=he(ke);if(Be==="break")break}},et.prototype.emitDelegateEvent=function(W,J,Tt){var Dt=this.getEvents(),ie=J+jr+Tt.type;(Dt[ie]||Dt[Qr])&&(Tt.name=ie,Tt.currentTarget=W,Tt.delegateTarget=this,Tt.delegateObject=W.get("delegateObject"),this.emit(ie,Tt))},et.prototype.translate=function(W,J){W===void 0&&(W=0),J===void 0&&(J=0);var Tt=this.getMatrix(),Dt=or(Tt,[["t",W,J]]);return this.setMatrix(Dt),this},et.prototype.move=function(W,J){var Tt=this.attr("x")||0,Dt=this.attr("y")||0;return this.translate(W-Tt,J-Dt),this},et.prototype.moveTo=function(W,J){return this.move(W,J)},et.prototype.scale=function(W,J){var Tt=this.getMatrix(),Dt=or(Tt,[["s",W,J||W]]);return this.setMatrix(Dt),this},et.prototype.rotate=function(W){var J=this.getMatrix(),Tt=or(J,[["r",W]]);return this.setMatrix(Tt),this},et.prototype.rotateAtStart=function(W){var J=this.attr(),Tt=J.x,Dt=J.y,ie=this.getMatrix(),fe=or(ie,[["t",-Tt,-Dt],["r",W],["t",Tt,Dt]]);return this.setMatrix(fe),this},et.prototype.rotateAtPoint=function(W,J,Tt){var Dt=this.getMatrix(),ie=or(Dt,[["t",-W,-J],["r",Tt],["t",W,J]]);return this.setMatrix(ie),this},et}(ge),Jn=yi,Ci={},Mi="_INDEX";function Fr(xt,et){if(xt.set("canvas",et),xt.isGroup()){var W=xt.get("children");W.length&&W.forEach(function(J){Fr(J,et)})}}function oi(xt,et){if(xt.set("timeline",et),xt.isGroup()){var W=xt.get("children");W.length&&W.forEach(function(J){oi(J,et)})}}function Oi(xt,et){var W=xt.getChildren();return W.indexOf(et)>=0}function ci(xt,et,W){W===void 0&&(W=!0),W?et.destroy():(et.set("parent",null),et.set("canvas",null)),gi(xt.getChildren(),et)}function Mn(xt){return function(et,W){var J=xt(et,W);return J===0?et[Mi]-W[Mi]:J}}var vi=function(xt){ae(et,xt);function et(){return xt!==null&&xt.apply(this,arguments)||this}return et.prototype.isCanvas=function(){return!1},et.prototype.getBBox=function(){var W=Infinity,J=-Infinity,Tt=Infinity,Dt=-Infinity,ie=[],fe=[],he=this.getChildren().filter(function(ke){return ke.get("visible")&&(!ke.isGroup()||ke.isGroup()&&ke.getChildren().length>0)});he.length>0?((0,I.each)(he,function(ke){var Be=ke.getBBox();ie.push(Be.minX,Be.maxX),fe.push(Be.minY,Be.maxY)}),W=(0,I.min)(ie),J=(0,I.max)(ie),Tt=(0,I.min)(fe),Dt=(0,I.max)(fe)):(W=0,J=0,Tt=0,Dt=0);var Se={x:W,y:Tt,minX:W,minY:Tt,maxX:J,maxY:Dt,width:J-W,height:Dt-Tt};return Se},et.prototype.getCanvasBBox=function(){var W=Infinity,J=-Infinity,Tt=Infinity,Dt=-Infinity,ie=[],fe=[],he=this.getChildren().filter(function(ke){return ke.get("visible")&&(!ke.isGroup()||ke.isGroup()&&ke.getChildren().length>0)});he.length>0?((0,I.each)(he,function(ke){var Be=ke.getCanvasBBox();ie.push(Be.minX,Be.maxX),fe.push(Be.minY,Be.maxY)}),W=(0,I.min)(ie),J=(0,I.max)(ie),Tt=(0,I.min)(fe),Dt=(0,I.max)(fe)):(W=0,J=0,Tt=0,Dt=0);var Se={x:W,y:Tt,minX:W,minY:Tt,maxX:J,maxY:Dt,width:J-W,height:Dt-Tt};return Se},et.prototype.getDefaultCfg=function(){var W=xt.prototype.getDefaultCfg.call(this);return W.children=[],W},et.prototype.onAttrChange=function(W,J,Tt){if(xt.prototype.onAttrChange.call(this,W,J,Tt),W==="matrix"){var Dt=this.getTotalMatrix();this._applyChildrenMarix(Dt)}},et.prototype.applyMatrix=function(W){var J=this.getTotalMatrix();xt.prototype.applyMatrix.call(this,W);var Tt=this.getTotalMatrix();Tt!==J&&this._applyChildrenMarix(Tt)},et.prototype._applyChildrenMarix=function(W){var J=this.getChildren();(0,I.each)(J,function(Tt){Tt.applyMatrix(W)})},et.prototype.addShape=function(){for(var W=[],J=0;J<arguments.length;J++)W[J]=arguments[J];var Tt=W[0],Dt=W[1];(0,I.isObject)(Tt)?Dt=Tt:Dt.type=Tt;var ie=Ci[Dt.type];ie||(ie=(0,I.upperFirst)(Dt.type),Ci[Dt.type]=ie);var fe=this.getShapeBase(),he=new fe[ie](Dt);return this.add(he),he},et.prototype.addGroup=function(){for(var W=[],J=0;J<arguments.length;J++)W[J]=arguments[J];var Tt=W[0],Dt=W[1],ie;if((0,I.isFunction)(Tt))Dt?ie=new Tt(Dt):ie=new Tt({parent:this});else{var fe=Tt||{},he=this.getGroupBase();ie=new he(fe)}return this.add(ie),ie},et.prototype.getCanvas=function(){var W;return this.isCanvas()?W=this:W=this.get("canvas"),W},et.prototype.getShape=function(W,J,Tt){if(!ne(this))return null;var Dt=this.getChildren(),ie;if(this.isCanvas())ie=this._findShape(Dt,W,J,Tt);else{var fe=[W,J,1];fe=this.invertFromMatrix(fe),this.isClipped(fe[0],fe[1])||(ie=this._findShape(Dt,fe[0],fe[1],Tt))}return ie},et.prototype._findShape=function(W,J,Tt,Dt){for(var ie=null,fe=W.length-1;fe>=0;fe--){var he=W[fe];if(ne(he)&&(he.isGroup()?ie=he.getShape(J,Tt,Dt):he.isHit(J,Tt)&&(ie=he)),ie)break}return ie},et.prototype.add=function(W){var J=this.getCanvas(),Tt=this.getChildren(),Dt=this.get("timeline"),ie=W.getParent();ie&&ci(ie,W,!1),W.set("parent",this),J&&Fr(W,J),Dt&&oi(W,Dt),Tt.push(W),W.onCanvasChange("add"),this._applyElementMatrix(W)},et.prototype._applyElementMatrix=function(W){var J=this.getTotalMatrix();J&&W.applyMatrix(J)},et.prototype.getChildren=function(){return this.get("children")},et.prototype.sort=function(){var W=this.getChildren();(0,I.each)(W,function(J,Tt){return J[Mi]=Tt,J}),W.sort(Mn(function(J,Tt){return J.get("zIndex")-Tt.get("zIndex")})),this.onCanvasChange("sort")},et.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var W=this.getChildren(),J=W.length-1;J>=0;J--)W[J].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},et.prototype.destroy=function(){this.get("destroyed")||(this.clear(),xt.prototype.destroy.call(this))},et.prototype.getFirst=function(){return this.getChildByIndex(0)},et.prototype.getLast=function(){var W=this.getChildren();return this.getChildByIndex(W.length-1)},et.prototype.getChildByIndex=function(W){var J=this.getChildren();return J[W]},et.prototype.getCount=function(){var W=this.getChildren();return W.length},et.prototype.contain=function(W){var J=this.getChildren();return J.indexOf(W)>-1},et.prototype.removeChild=function(W,J){J===void 0&&(J=!0),this.contain(W)&&W.remove(J)},et.prototype.findAll=function(W){var J=[],Tt=this.getChildren();return(0,I.each)(Tt,function(Dt){W(Dt)&&J.push(Dt),Dt.isGroup()&&(J=J.concat(Dt.findAll(W)))}),J},et.prototype.find=function(W){var J=null,Tt=this.getChildren();return(0,I.each)(Tt,function(Dt){if(W(Dt)?J=Dt:Dt.isGroup()&&(J=Dt.find(W)),J)return!1}),J},et.prototype.findById=function(W){return this.find(function(J){return J.get("id")===W})},et.prototype.findByClassName=function(W){return this.find(function(J){return J.get("className")===W})},et.prototype.findAllByName=function(W){return this.findAll(function(J){return J.get("name")===W})},et}(Jn),Xi=vi,Ii=p(35374),si=p(42800),Zn=p(88122),Vi=p(13681),ua={};function Ft(xt){return ua[xt.toLowerCase()]||Vi[xt]}function At(xt,et){ua[xt.toLowerCase()]=et}var ht=function(xt){return["fill","stroke","fillStyle","strokeStyle"].includes(xt)},wt=function(xt){return/^[r,R,L,l]{1}[\s]*\(/.test(xt)},Xt=[1,0,0,0,1,0,0,0,1];function it(xt,et,W){var J={},Tt=et.fromAttrs,Dt=et.toAttrs;if(!xt.destroyed){var ie;for(var fe in Dt)if(!(0,I.isEqual)(Tt[fe],Dt[fe]))if(fe==="path"){var he=Dt[fe],Se=Tt[fe];he.length>Se.length?(he=A(Dt[fe]),Se=A(Tt[fe]),Se=f(Se,he),Se=jt(Se,he),et.fromAttrs.path=Se,et.toAttrs.path=he):et.pathFormatted||(he=A(Dt[fe]),Se=A(Tt[fe]),Se=jt(Se,he),et.fromAttrs.path=Se,et.toAttrs.path=he,et.pathFormatted=!0),J[fe]=[];for(var ke=0;ke<he.length;ke++){for(var Be=he[ke],Ve=Se[ke],ar=[],Re=0;Re<Be.length;Re++)(0,I.isNumber)(Be[Re])&&Ve&&(0,I.isNumber)(Ve[Re])?(ie=(0,si.Z)(Ve[Re],Be[Re]),ar.push(ie(W))):ar.push(Be[Re]);J[fe].push(ar)}}else if(fe==="matrix"){var Tr=(0,Zn.Z)(Tt[fe]||Xt,Dt[fe]||Xt),Yt=Tr(W);J[fe]=Yt}else ht(fe)&&wt(Dt[fe])?J[fe]=Dt[fe]:(0,I.isFunction)(Dt[fe])||(ie=(0,si.Z)(Tt[fe],Dt[fe]),J[fe]=ie(W));xt.attr(J)}}function mt(xt,et,W){var J=et.startTime,Tt=et.delay;if(W<J+Tt||et._paused)return!1;var Dt,ie=et.duration,fe=et.easing,he=Ft(fe);if(W=W-J-et.delay,et.repeat)Dt=W%ie/ie,Dt=he(Dt);else if(Dt=W/ie,Dt<1)Dt=he(Dt);else return et.onFrame?xt.attr(et.onFrame(1)):xt.attr(et.toAttrs),!0;if(et.onFrame){var Se=et.onFrame(Dt);xt.attr(Se)}else it(xt,et,Dt);return!1}var St=function(){function xt(et){this.animators=[],this.current=0,this.timer=null,this.canvas=et}return xt.prototype.initTimer=function(){var et=this,W=!1,J,Tt,Dt;this.timer=Ii.HT(function(ie){if(et.current=ie,et.animators.length>0){for(var fe=et.animators.length-1;fe>=0;fe--){if(J=et.animators[fe],J.destroyed){et.removeAnimator(fe);continue}if(!J.isAnimatePaused()){Tt=J.get("animations");for(var he=Tt.length-1;he>=0;he--)Dt=Tt[he],W=mt(J,Dt,ie),W&&(Tt.splice(he,1),W=!1,Dt.callback&&Dt.callback())}Tt.length===0&&et.removeAnimator(fe)}var Se=et.canvas.get("autoDraw");Se||et.canvas.draw()}})},xt.prototype.addAnimator=function(et){this.animators.push(et)},xt.prototype.removeAnimator=function(et){this.animators.splice(et,1)},xt.prototype.isAnimating=function(){return!!this.animators.length},xt.prototype.stop=function(){this.timer&&this.timer.stop()},xt.prototype.stopAllAnimations=function(et){et===void 0&&(et=!0),this.animators.forEach(function(W){W.stopAnimate(et)}),this.animators=[],this.canvas.draw()},xt.prototype.getTime=function(){return this.current},xt}(),Pt=St,Wt=40,Jt=0,de=":",Ee=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Fe(xt,et){for(var W in xt)if(xt.hasOwnProperty(W)&&W.indexOf(de+et)>=0)return!0;return!1}function me(xt,et,W){W.name=et,W.target=xt,W.currentTarget=xt,W.delegateTarget=xt,xt.emit(et,W)}function Xe(xt,et,W){if(W.bubbles){var J=void 0,Tt=!1;if(et==="mouseenter"?(J=W.fromShape,Tt=!0):et==="mouseleave"&&(Tt=!0,J=W.toShape),xt.isCanvas()&&Tt)return;if(J&&Zt(xt,J)){W.bubbles=!1;return}W.name=et,W.currentTarget=xt,W.delegateTarget=xt,xt.emit(et,W)}}var dr=function(){function xt(et){var W=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(J){var Tt=J.type;W._triggerEvent(Tt,J)},this._onDocumentMove=function(J){var Tt=W.canvas,Dt=Tt.get("el");if(Dt!==J.target&&(W.dragging||W.currentShape)){var ie=W._getPointInfo(J);W.dragging&&W._emitEvent("drag",J,ie,W.draggingShape)}},this._onDocumentMouseUp=function(J){var Tt=W.canvas,Dt=Tt.get("el");if(Dt!==J.target&&W.dragging){var ie=W._getPointInfo(J);W.draggingShape&&W._emitEvent("drop",J,ie,null),W._emitEvent("dragend",J,ie,W.draggingShape),W._afterDrag(W.draggingShape,ie,J)}},this.canvas=et.canvas}return xt.prototype.init=function(){this._bindEvents()},xt.prototype._bindEvents=function(){var et=this,W=this.canvas.get("el");(0,I.each)(Ee,function(J){W.addEventListener(J,et._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},xt.prototype._clearEvents=function(){var et=this,W=this.canvas.get("el");(0,I.each)(Ee,function(J){W.removeEventListener(J,et._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},xt.prototype._getEventObj=function(et,W,J,Tt,Dt,ie){var fe=new Vt(et,W);return fe.fromShape=Dt,fe.toShape=ie,fe.x=J.x,fe.y=J.y,fe.clientX=J.clientX,fe.clientY=J.clientY,fe.propagationPath.push(Tt),fe},xt.prototype._getShape=function(et,W){return this.canvas.getShape(et.x,et.y,W)},xt.prototype._getPointInfo=function(et){var W=this.canvas,J=W.getClientByEvent(et),Tt=W.getPointByEvent(et);return{x:Tt.x,y:Tt.y,clientX:J.x,clientY:J.y}},xt.prototype._triggerEvent=function(et,W){var J=this._getPointInfo(W),Tt=this._getShape(J,W),Dt=this["_on"+et],ie=!1;if(Dt)Dt.call(this,J,Tt,W);else{var fe=this.currentShape;et==="mouseenter"||et==="dragenter"||et==="mouseover"?(this._emitEvent(et,W,J,null,null,Tt),Tt&&this._emitEvent(et,W,J,Tt,null,Tt),et==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",W,J,null)):et==="mouseleave"||et==="dragleave"||et==="mouseout"?(ie=!0,fe&&this._emitEvent(et,W,J,fe,fe,null),this._emitEvent(et,W,J,null,fe,null),et==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",W,J,null)):this._emitEvent(et,W,J,Tt,null,null)}if(ie||(this.currentShape=Tt),Tt&&!Tt.get("destroyed")){var he=this.canvas,Se=he.get("el");Se.style.cursor=Tt.attr("cursor")||he.get("cursor")}},xt.prototype._onmousedown=function(et,W,J){J.button===Jt&&(this.mousedownShape=W,this.mousedownPoint=et,this.mousedownTimeStamp=J.timeStamp),this._emitEvent("mousedown",J,et,W,null,null)},xt.prototype._emitMouseoverEvents=function(et,W,J,Tt){var Dt=this.canvas.get("el");J!==Tt&&(J&&(this._emitEvent("mouseout",et,W,J,J,Tt),this._emitEvent("mouseleave",et,W,J,J,Tt),(!Tt||Tt.get("destroyed"))&&(Dt.style.cursor=this.canvas.get("cursor"))),Tt&&(this._emitEvent("mouseover",et,W,Tt,J,Tt),this._emitEvent("mouseenter",et,W,Tt,J,Tt)))},xt.prototype._emitDragoverEvents=function(et,W,J,Tt,Dt){Tt?(Tt!==J&&(J&&this._emitEvent("dragleave",et,W,J,J,Tt),this._emitEvent("dragenter",et,W,Tt,J,Tt)),Dt||this._emitEvent("dragover",et,W,Tt)):J&&this._emitEvent("dragleave",et,W,J,J,Tt),Dt&&this._emitEvent("dragover",et,W,Tt)},xt.prototype._afterDrag=function(et,W,J){et&&(et.set("capture",!0),this.draggingShape=null),this.dragging=!1;var Tt=this._getShape(W,J);Tt!==et&&this._emitMouseoverEvents(J,W,et,Tt),this.currentShape=Tt},xt.prototype._onmouseup=function(et,W,J){if(J.button===Jt){var Tt=this.draggingShape;this.dragging?(Tt&&this._emitEvent("drop",J,et,W),this._emitEvent("dragend",J,et,Tt),this._afterDrag(Tt,et,J)):(this._emitEvent("mouseup",J,et,W),W===this.mousedownShape&&this._emitEvent("click",J,et,W),this.mousedownShape=null,this.mousedownPoint=null)}},xt.prototype._ondragover=function(et,W,J){J.preventDefault();var Tt=this.currentShape;this._emitDragoverEvents(J,et,Tt,W,!0)},xt.prototype._onmousemove=function(et,W,J){var Tt=this.canvas,Dt=this.currentShape,ie=this.draggingShape;if(this.dragging)ie&&this._emitDragoverEvents(J,et,Dt,W,!1),this._emitEvent("drag",J,et,ie);else{var fe=this.mousedownPoint;if(fe){var he=this.mousedownShape,Se=J.timeStamp,ke=Se-this.mousedownTimeStamp,Be=fe.clientX-et.clientX,Ve=fe.clientY-et.clientY,ar=Be*Be+Ve*Ve;ke>120||ar>Wt?he&&he.get("draggable")?(ie=this.mousedownShape,ie.set("capture",!1),this.draggingShape=ie,this.dragging=!0,this._emitEvent("dragstart",J,et,ie),this.mousedownShape=null,this.mousedownPoint=null):!he&&Tt.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",J,et,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(J,et,Dt,W),this._emitEvent("mousemove",J,et,W)):(this._emitMouseoverEvents(J,et,Dt,W),this._emitEvent("mousemove",J,et,W))}else this._emitMouseoverEvents(J,et,Dt,W),this._emitEvent("mousemove",J,et,W)}},xt.prototype._emitEvent=function(et,W,J,Tt,Dt,ie){var fe=this._getEventObj(et,W,J,Tt,Dt,ie);if(Tt){fe.shape=Tt,me(Tt,et,fe);for(var he=Tt.getParent();he;)he.emitDelegation(et,fe),fe.propagationStopped||Xe(he,et,fe),fe.propagationPath.push(he),he=he.getParent()}else{var Se=this.canvas;me(Se,et,fe)}},xt.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},xt}(),mr=dr,Ar="px",sr=(0,Ae.detect)(),nr=sr&&sr.name==="firefox",Gr=function(xt){ae(et,xt);function et(W){var J=xt.call(this,W)||this;return J.initContainer(),J.initDom(),J.initEvents(),J.initTimeline(),J}return et.prototype.getDefaultCfg=function(){var W=xt.prototype.getDefaultCfg.call(this);return W.cursor="default",W.supportCSSTransform=!1,W},et.prototype.initContainer=function(){var W=this.get("container");(0,I.isString)(W)&&(W=document.getElementById(W),this.set("container",W))},et.prototype.initDom=function(){var W=this.createDom();this.set("el",W);var J=this.get("container");J.appendChild(W),this.setDOMSize(this.get("width"),this.get("height"))},et.prototype.initEvents=function(){var W=new mr({canvas:this});W.init(),this.set("eventController",W)},et.prototype.initTimeline=function(){var W=new Pt(this);this.set("timeline",W)},et.prototype.setDOMSize=function(W,J){var Tt=this.get("el");Si&&(Tt.style.width=W+Ar,Tt.style.height=J+Ar)},et.prototype.changeSize=function(W,J){this.setDOMSize(W,J),this.set("width",W),this.set("height",J),this.onCanvasChange("changeSize")},et.prototype.getRenderer=function(){return this.get("renderer")},et.prototype.getCursor=function(){return this.get("cursor")},et.prototype.setCursor=function(W){this.set("cursor",W);var J=this.get("el");Si&&J&&(J.style.cursor=W)},et.prototype.getPointByEvent=function(W){var J=this.get("supportCSSTransform");if(J){if(nr&&!(0,I.isNil)(W.layerX)&&W.layerX!==W.offsetX)return{x:W.layerX,y:W.layerY};if(!(0,I.isNil)(W.offsetX))return{x:W.offsetX,y:W.offsetY}}var Tt=this.getClientByEvent(W),Dt=Tt.x,ie=Tt.y;return this.getPointByClient(Dt,ie)},et.prototype.getClientByEvent=function(W){var J=W;return W.touches&&(W.type==="touchend"?J=W.changedTouches[0]:J=W.touches[0]),{x:J.clientX,y:J.clientY}},et.prototype.getPointByClient=function(W,J){var Tt=this.get("el"),Dt=Tt.getBoundingClientRect();return{x:W-Dt.left,y:J-Dt.top}},et.prototype.getClientByPoint=function(W,J){var Tt=this.get("el"),Dt=Tt.getBoundingClientRect();return{x:W+Dt.left,y:J+Dt.top}},et.prototype.draw=function(){},et.prototype.removeDom=function(){var W=this.get("el");W.parentNode.removeChild(W)},et.prototype.clearEvents=function(){var W=this.get("eventController");W.destroy()},et.prototype.isCanvas=function(){return!0},et.prototype.getParent=function(){return null},et.prototype.destroy=function(){var W=this.get("timeline");this.get("destroyed")||(this.clear(),W&&W.stop(),this.clearEvents(),this.removeDom(),xt.prototype.destroy.call(this))},et}(Xi),gn=Gr,vn=function(xt){ae(et,xt);function et(){return xt!==null&&xt.apply(this,arguments)||this}return et.prototype.isGroup=function(){return!0},et.prototype.isEntityGroup=function(){return!1},et.prototype.clone=function(){for(var W=xt.prototype.clone.call(this),J=this.getChildren(),Tt=0;Tt<J.length;Tt++){var Dt=J[Tt];W.add(Dt.clone())}return W},et}(Xi),Ln=vn,qn=function(xt){ae(et,xt);function et(W){return xt.call(this,W)||this}return et.prototype._isInBBox=function(W,J){var Tt=this.getBBox();return Tt.minX<=W&&Tt.maxX>=W&&Tt.minY<=J&&Tt.maxY>=J},et.prototype.afterAttrsChange=function(W){xt.prototype.afterAttrsChange.call(this,W),this.clearCacheBBox()},et.prototype.getBBox=function(){var W=this.cfg.bbox;return W||(W=this.calculateBBox(),this.set("bbox",W)),W},et.prototype.getCanvasBBox=function(){var W=this.cfg.canvasBBox;return W||(W=this.calculateCanvasBBox(),this.set("canvasBBox",W)),W},et.prototype.applyMatrix=function(W){xt.prototype.applyMatrix.call(this,W),this.set("canvasBBox",null)},et.prototype.calculateCanvasBBox=function(){var W=this.getBBox(),J=this.getTotalMatrix(),Tt=W.minX,Dt=W.minY,ie=W.maxX,fe=W.maxY;if(J){var he=vr(J,[W.minX,W.minY]),Se=vr(J,[W.maxX,W.minY]),ke=vr(J,[W.minX,W.maxY]),Be=vr(J,[W.maxX,W.maxY]);Tt=Math.min(he[0],Se[0],ke[0],Be[0]),ie=Math.max(he[0],Se[0],ke[0],Be[0]),Dt=Math.min(he[1],Se[1],ke[1],Be[1]),fe=Math.max(he[1],Se[1],ke[1],Be[1])}var Ve=this.attrs;if(Ve.shadowColor){var ar=Ve.shadowBlur,Re=ar===void 0?0:ar,Tr=Ve.shadowOffsetX,Yt=Tr===void 0?0:Tr,ft=Ve.shadowOffsetY,F=ft===void 0?0:ft,X=Tt-Re+Yt,U=ie+Re+Yt,gt=Dt-Re+F,kt=fe+Re+F;Tt=Math.min(Tt,X),ie=Math.max(ie,U),Dt=Math.min(Dt,gt),fe=Math.max(fe,kt)}return{x:Tt,y:Dt,minX:Tt,minY:Dt,maxX:ie,maxY:fe,width:ie-Tt,height:fe-Dt}},et.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},et.prototype.isClipShape=function(){return this.get("isClipShape")},et.prototype.isInShape=function(W,J){return!1},et.prototype.isOnlyHitBox=function(){return!1},et.prototype.isHit=function(W,J){var Tt=this.get("startArrowShape"),Dt=this.get("endArrowShape"),ie=[W,J,1];ie=this.invertFromMatrix(ie);var fe=ie[0],he=ie[1],Se=this._isInBBox(fe,he);return this.isOnlyHitBox()?Se:!!(Se&&!this.isClipped(fe,he)&&(this.isInShape(fe,he)||Tt&&Tt.isHit(fe,he)||Dt&&Dt.isHit(fe,he)))},et}(Jn),ki=qn,li=new Map;function Wn(xt,et){li.set(xt,et)}function ti(xt){return li.get(xt)}function ei(xt){var et=xt.attr(),W=et.x,J=et.y,Tt=et.width,Dt=et.height;return{x:W,y:J,width:Tt,height:Dt}}function Bi(xt){var et=xt.attr(),W=et.x,J=et.y,Tt=et.r;return{x:W-Tt,y:J-Tt,width:Tt*2,height:Tt*2}}var cn=p(89838);function Hi(xt,et){return!xt||!et?xt||et:{minX:Math.min(xt.minX,et.minX),minY:Math.min(xt.minY,et.minY),maxX:Math.max(xt.maxX,et.maxX),maxY:Math.max(xt.maxY,et.maxY)}}function ta(xt,et){var W=xt.get("startArrowShape"),J=xt.get("endArrowShape"),Tt=null,Dt=null;return W&&(Tt=W.getCanvasBBox(),et=Hi(et,Tt)),J&&(Dt=J.getCanvasBBox(),et=Hi(et,Dt)),et}function ui(xt){for(var et=xt.attr(),W=et.points,J=[],Tt=[],Dt=0;Dt<W.length;Dt++){var ie=W[Dt];J.push(ie[0]),Tt.push(ie[1])}var fe=cn.Util.getBBoxByArray(J,Tt),he=fe.x,Se=fe.y,ke=fe.width,Be=fe.height,Ve={minX:he,minY:Se,maxX:he+ke,maxY:Se+Be};return Ve=ta(xt,Ve),{x:Ve.minX,y:Ve.minY,width:Ve.maxX-Ve.minX,height:Ve.maxY-Ve.minY}}function pa(xt){for(var et=xt.attr(),W=et.points,J=[],Tt=[],Dt=0;Dt<W.length;Dt++){var ie=W[Dt];J.push(ie[0]),Tt.push(ie[1])}return cn.Util.getBBoxByArray(J,Tt)}var mi=null;function ea(){if(!mi){var xt=document.createElement("canvas");xt.width=1,xt.height=1,mi=xt.getContext("2d")}return mi}function fa(xt,et,W){var J=1;if((0,I.isString)(xt)&&(J=xt.split(`
`).length),J>1){var Tt=ha(et,W);return et*J+Tt*(J-1)}return et}function ha(xt,et){return et?et-xt:xt*.14}function Kn(xt,et){var W=ea(),J=0;if((0,I.isNil)(xt)||xt==="")return J;if(W.save(),W.font=et,(0,I.isString)(xt)&&xt.includes(`
`)){var Tt=xt.split(`
`);(0,I.each)(Tt,function(Dt){var ie=W.measureText(Dt).width;J<ie&&(J=ie)})}else J=W.measureText(xt).width;return W.restore(),J}function ga(xt){var et=xt.fontSize,W=xt.fontFamily,J=xt.fontWeight,Tt=xt.fontStyle,Dt=xt.fontVariant;return[Tt,Dt,J,et+"px",W].join(" ").trim()}function Di(xt){var et=xt.attr(),W=et.x,J=et.y,Tt=et.text,Dt=et.fontSize,ie=et.lineHeight,fe=et.font;fe||(fe=ga(et));var he=Kn(Tt,fe),Se;if(!he)Se={x:W,y:J,width:0,height:0};else{var ke=et.textAlign,Be=et.textBaseline,Ve=fa(Tt,Dt,ie),ar={x:W,y:J-Ve};ke&&(ke==="end"||ke==="right"?ar.x-=he:ke==="center"&&(ar.x-=he/2)),Be&&(Be==="top"?ar.y+=Ve:Be==="middle"&&(ar.y+=Ve/2)),Se={x:ar.x,y:ar.y,width:he,height:Ve}}return Se}var xi=p(57350);function xa(xt,et){for(var W=[],J=[],Tt=[],Dt=0;Dt<xt.length;Dt++){var ie=xt[Dt],fe=ie.currentPoint,he=ie.params,Se=ie.prePoint,ke=void 0;switch(ie.command){case"Q":ke=cn.Quad.box(Se[0],Se[1],he[1],he[2],he[3],he[4]);break;case"C":ke=cn.Cubic.box(Se[0],Se[1],he[1],he[2],he[3],he[4],he[5],he[6]);break;case"A":var Be=ie.arcParams;ke=cn.Arc.box(Be.cx,Be.cy,Be.rx,Be.ry,Be.xRotation,Be.startAngle,Be.endAngle);break;default:W.push(fe[0]),J.push(fe[1]);break}ke&&(ie.box=ke,W.push(ke.x,ke.x+ke.width),J.push(ke.y,ke.y+ke.height)),et&&(ie.command==="L"||ie.command==="M")&&ie.prePoint&&ie.nextPoint&&Tt.push(ie)}W=W.filter(function(ft){return!Number.isNaN(ft)&&ft!==Infinity&&ft!==-Infinity}),J=J.filter(function(ft){return!Number.isNaN(ft)&&ft!==Infinity&&ft!==-Infinity});var Ve=(0,I.min)(W),ar=(0,I.min)(J),Re=(0,I.max)(W),Tr=(0,I.max)(J);if(Tt.length===0)return{x:Ve,y:ar,width:Re-Ve,height:Tr-ar};for(var Dt=0;Dt<Tt.length;Dt++){var ie=Tt[Dt],fe=ie.currentPoint,Yt=void 0;fe[0]===Ve?(Yt=Wi(ie,et),Ve=Ve-Yt.xExtra):fe[0]===Re&&(Yt=Wi(ie,et),Re=Re+Yt.xExtra),fe[1]===ar?(Yt=Wi(ie,et),ar=ar-Yt.yExtra):fe[1]===Tr&&(Yt=Wi(ie,et),Tr=Tr+Yt.yExtra)}return{x:Ve,y:ar,width:Re-Ve,height:Tr-ar}}function Wi(xt,et){var W=xt.prePoint,J=xt.currentPoint,Tt=xt.nextPoint,Dt=Math.pow(J[0]-W[0],2)+Math.pow(J[1]-W[1],2),ie=Math.pow(J[0]-Tt[0],2)+Math.pow(J[1]-Tt[1],2),fe=Math.pow(W[0]-Tt[0],2)+Math.pow(W[1]-Tt[1],2),he=Math.acos((Dt+ie-fe)/(2*Math.sqrt(Dt)*Math.sqrt(ie)));if(!he||Math.sin(he)===0||(0,I.isNumberEqual)(he,0))return{xExtra:0,yExtra:0};var Se=Math.abs(Math.atan2(Tt[1]-J[1],Tt[0]-J[0])),ke=Math.abs(Math.atan2(Tt[0]-J[0],Tt[1]-J[1]));Se=Se>Math.PI/2?Math.PI-Se:Se,ke=ke>Math.PI/2?Math.PI-ke:ke;var Be={xExtra:Math.cos(he/2-Se)*(et/2*(1/Math.sin(he/2)))-et/2||0,yExtra:Math.cos(ke-he/2)*(et/2*(1/Math.sin(he/2)))-et/2||0};return Be}function Ra(xt){var et=xt.attr(),W=et.path,J=et.stroke,Tt=J?et.lineWidth:0,Dt=xt.get("segments")||(0,xi.path2Segments)(W),ie=xa(Dt,Tt),fe=ie.x,he=ie.y,Se=ie.width,ke=ie.height,Be={minX:fe,minY:he,maxX:fe+Se,maxY:he+ke};return Be=ta(xt,Be),{x:Be.minX,y:Be.minY,width:Be.maxX-Be.minX,height:Be.maxY-Be.minY}}function ba(xt){var et=xt.attr(),W=et.x1,J=et.y1,Tt=et.x2,Dt=et.y2,ie=Math.min(W,Tt),fe=Math.max(W,Tt),he=Math.min(J,Dt),Se=Math.max(J,Dt),ke={minX:ie,maxX:fe,minY:he,maxY:Se};return ke=ta(xt,ke),{x:ke.minX,y:ke.minY,width:ke.maxX-ke.minX,height:ke.maxY-ke.minY}}function So(xt){var et=xt.attr(),W=et.x,J=et.y,Tt=et.rx,Dt=et.ry;return{x:W-Tt,y:J-Dt,width:Tt*2,height:Dt*2}}Wn("rect",ei),Wn("image",ei),Wn("circle",Bi),Wn("marker",Bi),Wn("polyline",ui),Wn("polygon",pa),Wn("text",Di),Wn("path",Ra),Wn("line",ba),Wn("ellipse",So);var oo="0.5.11"},21885:function(Ct,S){"use strict";var p;p={value:!0};var b=function(){function I(P,O){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=P,this.name=P,this.originalEvent=O,this.timeStamp=O.timeStamp}return I.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},I.prototype.stopPropagation=function(){this.propagationStopped=!0},I.prototype.toString=function(){var P=this.type;return"[Event (type="+P+")]"},I.prototype.save=function(){},I.prototype.restore=function(){},I}();S.Z=b},19083:function(Ct,S,p){"use strict";var b;b={value:!0};var I=p(99519),P=p(29126),O=p(24818),L=p(15483),A=p(73074),_=p(94478),E=p(73906),g=function(w){I.__extends(d,w);function d(){return w!==null&&w.apply(this,arguments)||this}return d.prototype.getDefaultCfg=function(){var y=w.prototype.getDefaultCfg.call(this);return y.renderer="canvas",y.autoDraw=!0,y.localRefresh=!0,y.refreshElements=[],y.clipView=!0,y.quickHit=!1,y},d.prototype.onCanvasChange=function(y){(y==="attr"||y==="sort"||y==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},d.prototype.getShapeBase=function(){return L},d.prototype.getGroupBase=function(){return A.default},d.prototype.getPixelRatio=function(){var y=this.get("pixelRatio")||_.getPixelRatio();return y>=1?Math.ceil(y):1},d.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},d.prototype.createDom=function(){var y=document.createElement("canvas"),m=y.getContext("2d");return this.set("context",m),y},d.prototype.setDOMSize=function(y,m){w.prototype.setDOMSize.call(this,y,m);var C=this.get("context"),T=this.get("el"),B=this.getPixelRatio();T.width=B*y,T.height=B*m,B>1&&C.scale(B,B)},d.prototype.clear=function(){w.prototype.clear.call(this),this._clearFrame();var y=this.get("context"),m=this.get("el");y.clearRect(0,0,m.width,m.height)},d.prototype.getShape=function(y,m){var C;return this.get("quickHit")?C=O.getShape(this,y,m):C=w.prototype.getShape.call(this,y,m,null),C},d.prototype._getRefreshRegion=function(){var y=this.get("refreshElements"),m=this.getViewRange(),C;if(y.length&&y[0]===this)C=m;else if(C=E.getMergedRegion(y),C){C.minX=Math.floor(C.minX),C.minY=Math.floor(C.minY),C.maxX=Math.ceil(C.maxX),C.maxY=Math.ceil(C.maxY),C.maxY+=1;var T=this.get("clipView");T&&(C=E.mergeView(C,m))}return C},d.prototype.refreshElement=function(y){var m=this.get("refreshElements");m.push(y)},d.prototype._clearFrame=function(){var y=this.get("drawFrame");y&&(_.clearAnimationFrame(y),this.set("drawFrame",null),this.set("refreshElements",[]))},d.prototype.draw=function(){var y=this.get("drawFrame");this.get("autoDraw")&&y||this._startDraw()},d.prototype._drawAll=function(){var y=this.get("context"),m=this.get("el"),C=this.getChildren();y.clearRect(0,0,m.width,m.height),E.applyAttrsToContext(y,this),E.drawChildren(y,C),this.set("refreshElements",[])},d.prototype._drawRegion=function(){var y=this.get("context"),m=this.get("refreshElements"),C=this.getChildren(),T=this._getRefreshRegion();T?(y.clearRect(T.minX,T.minY,T.maxX-T.minX,T.maxY-T.minY),y.save(),y.beginPath(),y.rect(T.minX,T.minY,T.maxX-T.minX,T.maxY-T.minY),y.clip(),E.applyAttrsToContext(y,this),E.checkRefresh(this,C,T),E.drawChildren(y,C,T),y.restore()):m.length&&E.clearChanged(m),_.each(m,function(B){B.get("hasChanged")&&B.set("hasChanged",!1)}),this.set("refreshElements",[])},d.prototype._startDraw=function(){var y=this,m=this.get("drawFrame");m||(m=_.requestAnimationFrame(function(){y.get("localRefresh")?y._drawRegion():y._drawAll(),y.set("drawFrame",null)}),this.set("drawFrame",m))},d.prototype.skipDraw=function(){},d.prototype.removeDom=function(){var y=this.get("el");y.width=0,y.height=0,y.parentNode.removeChild(y)},d}(P.AbstractCanvas);S.Z=g},73074:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(99519),I=p(29126),P=p(15483),O=p(73906),L=p(49242),A=p(94478),_=function(E){b.__extends(g,E);function g(){return E!==null&&E.apply(this,arguments)||this}return g.prototype.onCanvasChange=function(w){O.refreshElement(this,w)},g.prototype.getShapeBase=function(){return P},g.prototype.getGroupBase=function(){return g},g.prototype._applyClip=function(w,d){d&&(w.save(),O.applyAttrsToContext(w,d),d.createPath(w),w.restore(),w.clip(),d._afterDraw())},g.prototype.cacheCanvasBBox=function(){var w=this.cfg.children,d=[],y=[];L.each(w,function(H){var st=H.cfg.cacheCanvasBBox;st&&H.cfg.isInView&&(d.push(st.minX,st.maxX),y.push(st.minY,st.maxY))});var m=null;if(d.length){var C=L.min(d),T=L.max(d),B=L.min(y),D=L.max(y);m={minX:C,minY:B,x:C,y:B,maxX:T,maxY:D,width:T-C,height:D-B};var Y=this.cfg.canvas;if(Y){var K=Y.getViewRange();this.set("isInView",A.intersectRect(m,K))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",m)},g.prototype.draw=function(w,d){var y=this.cfg.children,m=d?this.cfg.refresh:!0;y.length&&m&&(w.save(),O.applyAttrsToContext(w,this),this._applyClip(w,this.getClip()),O.drawChildren(w,y,d),w.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},g.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},g}(I.AbstractGroup);S.default=_},74460:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(99519),I=p(29126),P=p(94478),O=p(73906),L=p(29126),A=p(15483),_=p(73074),E=function(g){b.__extends(w,g);function w(){return g!==null&&g.apply(this,arguments)||this}return w.prototype.getDefaultAttrs=function(){var d=g.prototype.getDefaultAttrs.call(this);return b.__assign(b.__assign({},d),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},w.prototype.getShapeBase=function(){return A},w.prototype.getGroupBase=function(){return _.default},w.prototype.onCanvasChange=function(d){O.refreshElement(this,d)},w.prototype.calculateBBox=function(){var d=this.get("type"),y=this.getHitLineWidth(),m=L.getBBoxMethod(d),C=m(this),T=y/2,B=C.x-T,D=C.y-T,Y=C.x+C.width+T,K=C.y+C.height+T;return{x:B,minX:B,y:D,minY:D,width:C.width+y,height:C.height+y,maxX:Y,maxY:K}},w.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},w.prototype.isStroke=function(){return!!this.attrs.stroke},w.prototype._applyClip=function(d,y){y&&(d.save(),O.applyAttrsToContext(d,y),y.createPath(d),d.restore(),d.clip(),y._afterDraw())},w.prototype.draw=function(d,y){var m=this.cfg.clipShape;if(y){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var C=this.getCanvasBBox();if(!P.intersectRect(y,C)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}d.save(),O.applyAttrsToContext(d,this),this._applyClip(d,m),this.drawPath(d),d.restore(),this._afterDraw()},w.prototype.getCanvasViewBox=function(){var d=this.cfg.canvas;return d?d.getViewRange():null},w.prototype.cacheCanvasBBox=function(){var d=this.getCanvasViewBox();if(d){var y=this.getCanvasBBox(),m=P.intersectRect(y,d);this.set("isInView",m),m?this.set("cacheCanvasBBox",y):this.set("cacheCanvasBBox",null)}},w.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},w.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},w.prototype.drawPath=function(d){this.createPath(d),this.strokeAndFill(d),this.afterDrawPath(d)},w.prototype.fill=function(d){d.fill()},w.prototype.stroke=function(d){d.stroke()},w.prototype.strokeAndFill=function(d){var y=this.attrs,m=y.lineWidth,C=y.opacity,T=y.strokeOpacity,B=y.fillOpacity;this.isFill()&&(!P.isNil(B)&&B!==1?(d.globalAlpha=B,this.fill(d),d.globalAlpha=C):this.fill(d)),this.isStroke()&&m>0&&(!P.isNil(T)&&T!==1&&(d.globalAlpha=T),this.stroke(d)),this.afterDrawPath(d)},w.prototype.createPath=function(d){},w.prototype.afterDrawPath=function(d){},w.prototype.isInShape=function(d,y){var m=this.isStroke(),C=this.isFill(),T=this.getHitLineWidth();return this.isInStrokeOrPath(d,y,m,C,T)},w.prototype.isInStrokeOrPath=function(d,y,m,C,T){return!1},w.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var d=this.attrs;return d.lineWidth+d.lineAppendWidth},w}(I.AbstractShape);S.default=E},66778:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(99519),I=p(74460),P=p(94478),O=function(L){b.__extends(A,L);function A(){return L!==null&&L.apply(this,arguments)||this}return A.prototype.getDefaultAttrs=function(){var _=L.prototype.getDefaultAttrs.call(this);return b.__assign(b.__assign({},_),{x:0,y:0,r:0})},A.prototype.isInStrokeOrPath=function(_,E,g,w,d){var y=this.attr(),m=y.x,C=y.y,T=y.r,B=d/2,D=P.distance(m,C,_,E);return w&&g?D<=T+B:w?D<=T:g?D>=T-B&&D<=T+B:!1},A.prototype.createPath=function(_){var E=this.attr(),g=E.x,w=E.y,d=E.r;_.beginPath(),_.arc(g,w,d,0,Math.PI*2,!1),_.closePath()},A}(I.default);S.default=O},21421:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(99519),I=p(74460);function P(L,A,_,E){return L/(_*_)+A/(E*E)}var O=function(L){b.__extends(A,L);function A(){return L!==null&&L.apply(this,arguments)||this}return A.prototype.getDefaultAttrs=function(){var _=L.prototype.getDefaultAttrs.call(this);return b.__assign(b.__assign({},_),{x:0,y:0,rx:0,ry:0})},A.prototype.isInStrokeOrPath=function(_,E,g,w,d){var y=this.attr(),m=d/2,C=y.x,T=y.y,B=y.rx,D=y.ry,Y=(_-C)*(_-C),K=(E-T)*(E-T);return w&&g?P(Y,K,B+m,D+m)<=1:w?P(Y,K,B,D)<=1:g?P(Y,K,B-m,D-m)>=1&&P(Y,K,B+m,D+m)<=1:!1},A.prototype.createPath=function(_){var E=this.attr(),g=E.x,w=E.y,d=E.rx,y=E.ry;if(_.beginPath(),_.ellipse)_.ellipse(g,w,d,y,0,0,Math.PI*2,!1);else{var m=d>y?d:y,C=d>y?1:d/y,T=d>y?y/d:1;_.save(),_.translate(g,w),_.scale(C,T),_.arc(0,0,m,0,Math.PI*2),_.restore(),_.closePath()}},A}(I.default);S.default=O},89473:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(99519),I=p(74460),P=p(94478);function O(A){return A instanceof HTMLElement&&P.isString(A.nodeName)&&A.nodeName.toUpperCase()==="CANVAS"}var L=function(A){b.__extends(_,A);function _(){return A!==null&&A.apply(this,arguments)||this}return _.prototype.getDefaultAttrs=function(){var E=A.prototype.getDefaultAttrs.call(this);return b.__assign(b.__assign({},E),{x:0,y:0,width:0,height:0})},_.prototype.initAttrs=function(E){this._setImage(E.img)},_.prototype.isStroke=function(){return!1},_.prototype.isOnlyHitBox=function(){return!0},_.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var E=this.get("canvas");E?E.draw():this.createPath(this.get("context"))}},_.prototype._setImage=function(E){var g=this,w=this.attrs;if(P.isString(E)){var d=new Image;d.onload=function(){if(g.destroyed)return!1;g.attr("img",d),g.set("loading",!1),g._afterLoading();var y=g.get("callback");y&&y.call(g)},d.crossOrigin="Anonymous",d.src=E,this.set("loading",!0)}else E instanceof Image?(w.width||(w.width=E.width),w.height||(w.height=E.height)):O(E)&&(w.width||(w.width=Number(E.getAttribute("width"))),w.height||(w.height,Number(E.getAttribute("height"))))},_.prototype.onAttrChange=function(E,g,w){A.prototype.onAttrChange.call(this,E,g,w),E==="img"&&this._setImage(g)},_.prototype.createPath=function(E){if(this.get("loading")){this.set("toDraw",!0),this.set("context",E);return}var g=this.attr(),w=g.x,d=g.y,y=g.width,m=g.height,C=g.sx,T=g.sy,B=g.swidth,D=g.sheight,Y=g.img;(Y instanceof Image||O(Y))&&(!P.isNil(C)&&!P.isNil(T)&&!P.isNil(B)&&!P.isNil(D)?E.drawImage(Y,C,T,B,D,w,d,y,m):E.drawImage(Y,w,d,y,m))},_}(I.default);S.default=L},15483:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.Text=S.Rect=S.Polyline=S.Polygon=S.Path=S.Marker=S.Line=S.Image=S.Ellipse=S.Circle=S.Base=void 0;var b=p(74460);Object.defineProperty(S,"Base",{enumerable:!0,get:function(){return b.default}});var I=p(66778);Object.defineProperty(S,"Circle",{enumerable:!0,get:function(){return I.default}});var P=p(21421);Object.defineProperty(S,"Ellipse",{enumerable:!0,get:function(){return P.default}});var O=p(89473);Object.defineProperty(S,"Image",{enumerable:!0,get:function(){return O.default}});var L=p(32766);Object.defineProperty(S,"Line",{enumerable:!0,get:function(){return L.default}});var A=p(50796);Object.defineProperty(S,"Marker",{enumerable:!0,get:function(){return A.default}});var _=p(90780);Object.defineProperty(S,"Path",{enumerable:!0,get:function(){return _.default}});var E=p(51567);Object.defineProperty(S,"Polygon",{enumerable:!0,get:function(){return E.default}});var g=p(54423);Object.defineProperty(S,"Polyline",{enumerable:!0,get:function(){return g.default}});var w=p(83095);Object.defineProperty(S,"Rect",{enumerable:!0,get:function(){return w.default}});var d=p(17860);Object.defineProperty(S,"Text",{enumerable:!0,get:function(){return d.default}})},32766:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(99519),I=p(89838),P=p(74460),O=p(63131),L=p(87200),A=function(_){b.__extends(E,_);function E(){return _!==null&&_.apply(this,arguments)||this}return E.prototype.getDefaultAttrs=function(){var g=_.prototype.getDefaultAttrs.call(this);return b.__assign(b.__assign({},g),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},E.prototype.initAttrs=function(g){this.setArrow()},E.prototype.onAttrChange=function(g,w,d){_.prototype.onAttrChange.call(this,g,w,d),this.setArrow()},E.prototype.setArrow=function(){var g=this.attr(),w=g.x1,d=g.y1,y=g.x2,m=g.y2,C=g.startArrow,T=g.endArrow;C&&L.addStartArrow(this,g,y,m,w,d),T&&L.addEndArrow(this,g,w,d,y,m)},E.prototype.isInStrokeOrPath=function(g,w,d,y,m){if(!d||!m)return!1;var C=this.attr(),T=C.x1,B=C.y1,D=C.x2,Y=C.y2;return O.default(T,B,D,Y,m,g,w)},E.prototype.createPath=function(g){var w=this.attr(),d=w.x1,y=w.y1,m=w.x2,C=w.y2,T=w.startArrow,B=w.endArrow,D={dx:0,dy:0},Y={dx:0,dy:0};T&&T.d&&(D=L.getShortenOffset(d,y,m,C,w.startArrow.d)),B&&B.d&&(Y=L.getShortenOffset(d,y,m,C,w.endArrow.d)),g.beginPath(),g.moveTo(d+D.dx,y+D.dy),g.lineTo(m-Y.dx,C-Y.dy)},E.prototype.afterDrawPath=function(g){var w=this.get("startArrowShape"),d=this.get("endArrowShape");w&&w.draw(g),d&&d.draw(g)},E.prototype.getTotalLength=function(){var g=this.attr(),w=g.x1,d=g.y1,y=g.x2,m=g.y2;return I.Line.length(w,d,y,m)},E.prototype.getPoint=function(g){var w=this.attr(),d=w.x1,y=w.y1,m=w.x2,C=w.y2;return I.Line.pointAt(d,y,m,C,g)},E}(P.default);S.default=A},50796:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(99519),I=p(49242),P=p(57350),O=p(74460),L=p(94478),A=p(73906),_={circle:function(g,w,d){return[["M",g-d,w],["A",d,d,0,1,0,g+d,w],["A",d,d,0,1,0,g-d,w]]},square:function(g,w,d){return[["M",g-d,w-d],["L",g+d,w-d],["L",g+d,w+d],["L",g-d,w+d],["Z"]]},diamond:function(g,w,d){return[["M",g-d,w],["L",g,w-d],["L",g+d,w],["L",g,w+d],["Z"]]},triangle:function(g,w,d){var y=d*Math.sin(1/3*Math.PI);return[["M",g-d,w+y],["L",g,w-y],["L",g+d,w+y],["Z"]]},"triangle-down":function(g,w,d){var y=d*Math.sin(1/3*Math.PI);return[["M",g-d,w-y],["L",g+d,w-y],["L",g,w+y],["Z"]]}},E=function(g){b.__extends(w,g);function w(){return g!==null&&g.apply(this,arguments)||this}return w.prototype.initAttrs=function(d){this._resetParamsCache()},w.prototype._resetParamsCache=function(){this.set("paramsCache",{})},w.prototype.onAttrChange=function(d,y,m){g.prototype.onAttrChange.call(this,d,y,m),["symbol","x","y","r","radius"].indexOf(d)!==-1&&this._resetParamsCache()},w.prototype.isOnlyHitBox=function(){return!0},w.prototype._getR=function(d){return I.isNil(d.r)?d.radius:d.r},w.prototype._getPath=function(){var d=this.attr(),y=d.x,m=d.y,C=d.symbol||"circle",T=this._getR(d),B,D;if(L.isFunction(C))B=C,D=B(y,m,T),D=P.path2Absolute(D);else{if(B=w.Symbols[C],!B)return console.warn(C+" marker is not supported."),null;D=B(y,m,T)}return D},w.prototype.createPath=function(d){var y=this._getPath(),m=this.get("paramsCache");A.drawPath(this,d,{path:y},m)},w.Symbols=_,w}(O.default);S.default=E},90780:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(99519),I=p(89838),P=p(49242),O=p(74460),L=p(57350),A=p(73906),_=p(55978),E=p(4043),g=p(32460),w=p(87200);function d(m,C,T){for(var B=!1,D=0;D<m.length;D++){var Y=m[D];if(B=E.default(Y,C,T),B)break}return B}var y=function(m){b.__extends(C,m);function C(){return m!==null&&m.apply(this,arguments)||this}return C.prototype.getDefaultAttrs=function(){var T=m.prototype.getDefaultAttrs.call(this);return b.__assign(b.__assign({},T),{startArrow:!1,endArrow:!1})},C.prototype.initAttrs=function(T){this._setPathArr(T.path),this.setArrow()},C.prototype.onAttrChange=function(T,B,D){m.prototype.onAttrChange.call(this,T,B,D),T==="path"&&this._setPathArr(B),this.setArrow()},C.prototype._setPathArr=function(T){this.attrs.path=L.path2Absolute(T);var B=g.default.hasArc(T);this.set("hasArc",B),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},C.prototype.getSegments=function(){var T=this.get("segements");return T||(T=L.path2Segments(this.attr("path")),this.set("segments",T)),T},C.prototype.setArrow=function(){var T=this.attr(),B=T.startArrow,D=T.endArrow;if(B){var Y=this.getStartTangent();w.addStartArrow(this,T,Y[0][0],Y[0][1],Y[1][0],Y[1][1])}if(D){var Y=this.getEndTangent();w.addEndArrow(this,T,Y[0][0],Y[0][1],Y[1][0],Y[1][1])}},C.prototype.isInStrokeOrPath=function(T,B,D,Y,K){var H=this.getSegments(),st=this.get("hasArc"),pt=!1;if(D){var ct=this.getTotalLength();pt=g.default.isPointInStroke(H,K,T,B,ct)}if(!pt&&Y)if(st)pt=_.default(this,T,B);else{var Ot=this.attr("path"),Rt=g.default.extractPolygons(Ot);pt=d(Rt.polygons,T,B)||d(Rt.polylines,T,B)}return pt},C.prototype.createPath=function(T){var B=this.attr(),D=this.get("paramsCache");A.drawPath(this,T,B,D)},C.prototype.afterDrawPath=function(T){var B=this.get("startArrowShape"),D=this.get("endArrowShape");B&&B.draw(T),D&&D.draw(T)},C.prototype.getTotalLength=function(){var T=this.get("totalLength");return P.isNil(T)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):T},C.prototype.getPoint=function(T){var B=this.get("tCache");B||(this._calculateCurve(),this._setTcache(),B=this.get("tCache"));var D,Y,K=this.get("curve");if(!B||B.length===0)return K?{x:K[0][1],y:K[0][2]}:null;P.each(B,function(ct,Ot){T>=ct[0]&&T<=ct[1]&&(D=(T-ct[0])/(ct[1]-ct[0]),Y=Ot)});var H=K[Y];if(P.isNil(H)||P.isNil(Y))return null;var st=H.length,pt=K[Y+1];return I.Cubic.pointAt(H[st-2],H[st-1],pt[1],pt[2],pt[3],pt[4],pt[5],pt[6],D)},C.prototype._calculateCurve=function(){var T=this.attr().path;this.set("curve",g.default.pathToCurve(T))},C.prototype._setTcache=function(){var T=0,B=0,D=[],Y,K,H,st,pt=this.get("curve");if(!!pt){if(P.each(pt,function(ct,Ot){H=pt[Ot+1],st=ct.length,H&&(T+=I.Cubic.length(ct[st-2],ct[st-1],H[1],H[2],H[3],H[4],H[5],H[6])||0)}),this.set("totalLength",T),T===0){this.set("tCache",[]);return}P.each(pt,function(ct,Ot){H=pt[Ot+1],st=ct.length,H&&(Y=[],Y[0]=B/T,K=I.Cubic.length(ct[st-2],ct[st-1],H[1],H[2],H[3],H[4],H[5],H[6]),B+=K||0,Y[1]=B/T,D.push(Y))}),this.set("tCache",D)}},C.prototype.getStartTangent=function(){var T=this.getSegments(),B;if(T.length>1){var D=T[0].currentPoint,Y=T[1].currentPoint,K=T[1].startTangent;B=[],K?(B.push([D[0]-K[0],D[1]-K[1]]),B.push([D[0],D[1]])):(B.push([Y[0],Y[1]]),B.push([D[0],D[1]]))}return B},C.prototype.getEndTangent=function(){var T=this.getSegments(),B=T.length,D;if(B>1){var Y=T[B-2].currentPoint,K=T[B-1].currentPoint,H=T[B-1].endTangent;D=[],H?(D.push([K[0]-H[0],K[1]-H[1]]),D.push([K[0],K[1]])):(D.push([Y[0],Y[1]]),D.push([K[0],K[1]]))}return D},C}(O.default);S.default=y},51567:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(99519),I=p(74460),P=p(70625),O=p(4043),L=function(A){b.__extends(_,A);function _(){return A!==null&&A.apply(this,arguments)||this}return _.prototype.isInStrokeOrPath=function(E,g,w,d,y){var m=this.attr().points,C=!1;return w&&(C=P.default(m,y,E,g,!0)),!C&&d&&(C=O.default(m,E,g)),C},_.prototype.createPath=function(E){var g=this.attr(),w=g.points;if(!(w.length<2)){E.beginPath();for(var d=0;d<w.length;d++){var y=w[d];d===0?E.moveTo(y[0],y[1]):E.lineTo(y[0],y[1])}E.closePath()}},_}(I.default);S.default=L},54423:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(99519),I=p(89838),P=p(89838),O=p(49242),L=p(74460),A=p(70625),_=p(87200),E=function(g){b.__extends(w,g);function w(){return g!==null&&g.apply(this,arguments)||this}return w.prototype.getDefaultAttrs=function(){var d=g.prototype.getDefaultAttrs.call(this);return b.__assign(b.__assign({},d),{startArrow:!1,endArrow:!1})},w.prototype.initAttrs=function(d){this.setArrow()},w.prototype.onAttrChange=function(d,y,m){g.prototype.onAttrChange.call(this,d,y,m),this.setArrow(),["points"].indexOf(d)!==-1&&this._resetCache()},w.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},w.prototype.setArrow=function(){var d=this.attr(),y=this.attrs,m=y.points,C=y.startArrow,T=y.endArrow,B=m.length,D=m[0][0],Y=m[0][1],K=m[B-1][0],H=m[B-1][1];C&&_.addStartArrow(this,d,m[1][0],m[1][1],D,Y),T&&_.addEndArrow(this,d,m[B-2][0],m[B-2][1],K,H)},w.prototype.isFill=function(){return!1},w.prototype.isInStrokeOrPath=function(d,y,m,C,T){if(!m||!T)return!1;var B=this.attr().points;return A.default(B,T,d,y,!1)},w.prototype.isStroke=function(){return!0},w.prototype.createPath=function(d){var y=this.attr(),m=y.points,C=y.startArrow,T=y.endArrow,B=m.length;if(!(m.length<2)){var D=m[0][0],Y=m[0][1],K=m[B-1][0],H=m[B-1][1];if(C&&C.d){var st=_.getShortenOffset(D,Y,m[1][0],m[1][1],C.d);D+=st.dx,Y+=st.dy}if(T&&T.d){var st=_.getShortenOffset(m[B-2][0],m[B-2][1],K,H,T.d);K-=st.dx,H-=st.dy}d.beginPath(),d.moveTo(D,Y);for(var pt=0;pt<B-1;pt++){var ct=m[pt];d.lineTo(ct[0],ct[1])}d.lineTo(K,H)}},w.prototype.afterDrawPath=function(d){var y=this.get("startArrowShape"),m=this.get("endArrowShape");y&&y.draw(d),m&&m.draw(d)},w.prototype.getTotalLength=function(){var d=this.attr().points,y=this.get("totalLength");return O.isNil(y)?(this.set("totalLength",P.Polyline.length(d)),this.get("totalLength")):y},w.prototype.getPoint=function(d){var y=this.attr().points,m=this.get("tCache");m||(this._setTcache(),m=this.get("tCache"));var C,T;return O.each(m,function(B,D){d>=B[0]&&d<=B[1]&&(C=(d-B[0])/(B[1]-B[0]),T=D)}),I.Line.pointAt(y[T][0],y[T][1],y[T+1][0],y[T+1][1],C)},w.prototype._setTcache=function(){var d=this.attr().points;if(!(!d||d.length===0)){var y=this.getTotalLength();if(!(y<=0)){var m=0,C=[],T,B;O.each(d,function(D,Y){d[Y+1]&&(T=[],T[0]=m/y,B=I.Line.length(D[0],D[1],d[Y+1][0],d[Y+1][1]),m+=B,T[1]=m/y,C.push(T))}),this.set("tCache",C)}}},w.prototype.getStartTangent=function(){var d=this.attr().points,y=[];return y.push([d[1][0],d[1][1]]),y.push([d[0][0],d[0][1]]),y},w.prototype.getEndTangent=function(){var d=this.attr().points,y=d.length-1,m=[];return m.push([d[y-1][0],d[y-1][1]]),m.push([d[y][0],d[y][1]]),m},w}(L.default);S.default=E},83095:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(99519),I=p(74460),P=p(62948),O=p(94478),L=p(47946),A=p(19626),_=p(55978),E=function(g){b.__extends(w,g);function w(){return g!==null&&g.apply(this,arguments)||this}return w.prototype.getDefaultAttrs=function(){var d=g.prototype.getDefaultAttrs.call(this);return b.__assign(b.__assign({},d),{x:0,y:0,width:0,height:0,radius:0})},w.prototype.isInStrokeOrPath=function(d,y,m,C,T){var B=this.attr(),D=B.x,Y=B.y,K=B.width,H=B.height,st=B.radius;if(st){var ct=!1;return m&&(ct=A.default(D,Y,K,H,st,T,d,y)),!ct&&C&&(ct=_.default(this,d,y)),ct}else{var pt=T/2;if(C&&m)return O.inBox(D-pt,Y-pt,K+pt,H+pt,d,y);if(C)return O.inBox(D,Y,K,H,d,y);if(m)return L.default(D,Y,K,H,T,d,y)}},w.prototype.createPath=function(d){var y=this.attr(),m=y.x,C=y.y,T=y.width,B=y.height,D=y.radius;if(d.beginPath(),D===0)d.rect(m,C,T,B);else{var Y=P.parseRadius(D),K=Y[0],H=Y[1],st=Y[2],pt=Y[3];d.moveTo(m+K,C),d.lineTo(m+T-H,C),H!==0&&d.arc(m+T-H,C+H,H,-Math.PI/2,0),d.lineTo(m+T,C+B-st),st!==0&&d.arc(m+T-st,C+B-st,st,0,Math.PI/2),d.lineTo(m+pt,C+B),pt!==0&&d.arc(m+pt,C+B-pt,pt,Math.PI/2,Math.PI),d.lineTo(m,C+K),K!==0&&d.arc(m+K,C+K,K,Math.PI,Math.PI*1.5),d.closePath()}},w}(I.default);S.default=E},17860:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(99519),I=p(74460),P=p(94478),O=p(29126),L=function(A){b.__extends(_,A);function _(){return A!==null&&A.apply(this,arguments)||this}return _.prototype.getDefaultAttrs=function(){var E=A.prototype.getDefaultAttrs.call(this);return b.__assign(b.__assign({},E),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},_.prototype.isOnlyHitBox=function(){return!0},_.prototype.initAttrs=function(E){this._assembleFont(),E.text&&this._setText(E.text)},_.prototype._assembleFont=function(){var E=this.attrs;E.font=O.assembleFont(E)},_.prototype._setText=function(E){var g=null;P.isString(E)&&E.indexOf(`
`)!==-1&&(g=E.split(`
`)),this.set("textArr",g)},_.prototype.onAttrChange=function(E,g,w){A.prototype.onAttrChange.call(this,E,g,w),E.startsWith("font")&&this._assembleFont(),E==="text"&&this._setText(g)},_.prototype._getSpaceingY=function(){var E=this.attrs,g=E.lineHeight,w=E.fontSize*1;return g?g-w:w*.14},_.prototype._drawTextArr=function(E,g,w){var d=this.attrs,y=d.textBaseline,m=d.x,C=d.y,T=d.fontSize*1,B=this._getSpaceingY(),D=O.getTextHeight(d.text,d.fontSize,d.lineHeight),Y;P.each(g,function(K,H){Y=C+H*(B+T)-D+T,y==="middle"&&(Y+=D-T-(D-T)/2),y==="top"&&(Y+=D-T),P.isNil(K)||(w?E.fillText(K,m,Y):E.strokeText(K,m,Y))})},_.prototype._drawText=function(E,g){var w=this.attr(),d=w.x,y=w.y,m=this.get("textArr");if(m)this._drawTextArr(E,m,g);else{var C=w.text;P.isNil(C)||(g?E.fillText(C,d,y):E.strokeText(C,d,y))}},_.prototype.strokeAndFill=function(E){var g=this.attrs,w=g.lineWidth,d=g.opacity,y=g.strokeOpacity,m=g.fillOpacity;this.isStroke()&&w>0&&(!P.isNil(y)&&y!==1&&(E.globalAlpha=d),this.stroke(E)),this.isFill()&&(!P.isNil(m)&&m!==1?(E.globalAlpha=m,this.fill(E),E.globalAlpha=d):this.fill(E)),this.afterDrawPath(E)},_.prototype.fill=function(E){this._drawText(E,!0)},_.prototype.stroke=function(E){this._drawText(E,!1)},_}(I.default);S.default=L},56921:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(94478);function I(A){return Math.sqrt(A[0]*A[0]+A[1]*A[1])}function P(A,_){return I(A)*I(_)?(A[0]*_[0]+A[1]*_[1])/(I(A)*I(_)):1}function O(A,_){return(A[0]*_[1]<A[1]*_[0]?-1:1)*Math.acos(P(A,_))}function L(A,_){var E=_[1],g=_[2],w=b.mod(b.toRadian(_[3]),Math.PI*2),d=_[4],y=_[5],m=A[0],C=A[1],T=_[6],B=_[7],D=Math.cos(w)*(m-T)/2+Math.sin(w)*(C-B)/2,Y=-1*Math.sin(w)*(m-T)/2+Math.cos(w)*(C-B)/2,K=D*D/(E*E)+Y*Y/(g*g);K>1&&(E*=Math.sqrt(K),g*=Math.sqrt(K));var H=E*E*(Y*Y)+g*g*(D*D),st=H?Math.sqrt((E*E*(g*g)-H)/H):1;d===y&&(st*=-1),isNaN(st)&&(st=0);var pt=g?st*E*Y/g:0,ct=E?st*-g*D/E:0,Ot=(m+T)/2+Math.cos(w)*pt-Math.sin(w)*ct,Rt=(C+B)/2+Math.sin(w)*pt+Math.cos(w)*ct,Qt=[(D-pt)/E,(Y-ct)/g],Gt=[(-1*D-pt)/E,(-1*Y-ct)/g],Z=O([1,0],Qt),nt=O(Qt,Gt);return P(Qt,Gt)<=-1&&(nt=Math.PI),P(Qt,Gt)>=1&&(nt=0),y===0&&nt>0&&(nt=nt-2*Math.PI),y===1&&nt<0&&(nt=nt+2*Math.PI),{cx:Ot,cy:Rt,rx:b.isSamePoint(A,[T,B])?0:E,ry:b.isSamePoint(A,[T,B])?0:g,startAngle:Z,endAngle:Z+nt,xRotation:w,arcFlag:d,sweepFlag:y}}S.default=L},87200:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.addEndArrow=S.addStartArrow=S.getShortenOffset=void 0;var b=p(99519),I=p(15483),P=Math.sin,O=Math.cos,L=Math.atan2,A=Math.PI;function _(y,m,C,T,B,D,Y){var K=m.stroke,H=m.lineWidth,st=C-B,pt=T-D,ct=L(pt,st),Ot=new I.Path({type:"path",canvas:y.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*O(A/6)+","+10*P(A/6)+" L0,0 L"+10*O(A/6)+",-"+10*P(A/6),stroke:K,lineWidth:H}});Ot.translate(B,D),Ot.rotateAtPoint(B,D,ct),y.set(Y?"startArrowShape":"endArrowShape",Ot)}function E(y,m,C,T,B,D,Y){var K=m.startArrow,H=m.endArrow,st=m.stroke,pt=m.lineWidth,ct=Y?K:H,Ot=ct.d,Rt=ct.fill,Qt=ct.stroke,Gt=ct.lineWidth,Z=b.__rest(ct,["d","fill","stroke","lineWidth"]),nt=C-B,Q=T-D,dt=L(Q,nt);Ot&&(B=B-O(dt)*Ot,D=D-P(dt)*Ot);var lt=new I.Path({type:"path",canvas:y.get("canvas"),isArrowShape:!0,attrs:b.__assign(b.__assign({},Z),{stroke:Qt||st,lineWidth:Gt||pt,fill:Rt})});lt.translate(B,D),lt.rotateAtPoint(B,D,dt),y.set(Y?"startArrowShape":"endArrowShape",lt)}function g(y,m,C,T,B){var D=L(T-m,C-y);return{dx:O(D)*B,dy:P(D)*B}}S.getShortenOffset=g;function w(y,m,C,T,B,D){typeof m.startArrow=="object"?E(y,m,C,T,B,D,!0):m.startArrow?_(y,m,C,T,B,D,!0):y.set("startArrowShape",null)}S.addStartArrow=w;function d(y,m,C,T,B,D){typeof m.endArrow=="object"?E(y,m,C,T,B,D,!1):m.endArrow?_(y,m,C,T,B,D,!1):y.set("startArrowShape",null)}S.addEndArrow=d},73906:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.mergeView=S.getMergedRegion=S.getRefreshRegion=S.refreshElement=S.drawPath=S.clearChanged=S.checkChildrenRefresh=S.checkRefresh=S.drawChildren=S.applyAttrsToContext=void 0;var b=p(49242),I=p(62948),P=p(56921),O=p(94478),L=p(87200),A={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function _(K,H){var st=H.attr();for(var pt in st){var ct=st[pt],Ot=A[pt]?A[pt]:pt;Ot==="matrix"&&ct?K.transform(ct[0],ct[1],ct[3],ct[4],ct[6],ct[7]):Ot==="lineDash"&&K.setLineDash?b.isArray(ct)&&K.setLineDash(ct):(Ot==="strokeStyle"||Ot==="fillStyle"?ct=I.parseStyle(K,H,ct):Ot==="globalAlpha"&&(ct=ct*K.globalAlpha),K[Ot]=ct)}}S.applyAttrsToContext=_;function E(K,H,st){for(var pt=0;pt<H.length;pt++){var ct=H[pt];ct.cfg.visible?ct.draw(K,st):ct.skipDraw()}}S.drawChildren=E;function g(K,H,st){var pt=K.get("refreshElements");b.each(pt,function(ct){if(ct!==K)for(var Ot=ct.cfg.parent;Ot&&Ot!==K&&!Ot.cfg.refresh;)Ot.cfg.refresh=!0,Ot=Ot.cfg.parent}),pt[0]===K?y(H,st):w(H,st)}S.checkRefresh=g;function w(K,H){for(var st=0;st<K.length;st++){var pt=K[st];if(pt.cfg.visible)if(pt.cfg.hasChanged)pt.cfg.refresh=!0,pt.isGroup()&&y(pt.cfg.children,H);else if(pt.cfg.refresh)pt.isGroup()&&w(pt.cfg.children,H);else{var ct=m(pt,H);pt.cfg.refresh=ct,ct&&pt.isGroup()&&w(pt.cfg.children,H)}}}S.checkChildrenRefresh=w;function d(K){for(var H=0;H<K.length;H++){var st=K[H];st.cfg.hasChanged=!1,st.isGroup()&&!st.destroyed&&d(st.cfg.children)}}S.clearChanged=d;function y(K,H){for(var st=0;st<K.length;st++){var pt=K[st];pt.cfg.refresh=!0,pt.isGroup()&&y(pt.get("children"),H)}}function m(K,H){var st=K.cfg.cacheCanvasBBox,pt=K.cfg.isInView&&st&&O.intersectRect(st,H);return pt}function C(K,H,st,pt){var ct=st.path,Ot=st.startArrow,Rt=st.endArrow;if(!!ct){var Qt=[0,0],Gt=[0,0],Z={dx:0,dy:0};H.beginPath();for(var nt=0;nt<ct.length;nt++){var Q=ct[nt],dt=Q[0];if(nt===0&&Ot&&Ot.d){var lt=K.getStartTangent();Z=L.getShortenOffset(lt[0][0],lt[0][1],lt[1][0],lt[1][1],Ot.d)}else if(nt===ct.length-2&&ct[nt+1][0]==="Z"&&Rt&&Rt.d){var z=ct[nt+1];if(z[0]==="Z"){var lt=K.getEndTangent();Z=L.getShortenOffset(lt[0][0],lt[0][1],lt[1][0],lt[1][1],Rt.d)}}else if(nt===ct.length-1&&Rt&&Rt.d&&ct[0]!=="Z"){var lt=K.getEndTangent();Z=L.getShortenOffset(lt[0][0],lt[0][1],lt[1][0],lt[1][1],Rt.d)}var $=Z.dx,j=Z.dy;switch(dt){case"M":H.moveTo(Q[1]-$,Q[2]-j),Gt=[Q[1],Q[2]];break;case"L":H.lineTo(Q[1]-$,Q[2]-j);break;case"Q":H.quadraticCurveTo(Q[1],Q[2],Q[3]-$,Q[4]-j);break;case"C":H.bezierCurveTo(Q[1],Q[2],Q[3],Q[4],Q[5]-$,Q[6]-j);break;case"A":{var f=void 0;pt?(f=pt[nt],f||(f=P.default(Qt,Q),pt[nt]=f)):f=P.default(Qt,Q);var yt=f.cx,_t=f.cy,jt=f.rx,qt=f.ry,Vt=f.startAngle,re=f.endAngle,ae=f.xRotation,Nt=f.sweepFlag;if(H.ellipse)H.ellipse(yt,_t,jt,qt,ae,Vt,re,1-Nt);else{var Lt=jt>qt?jt:qt,bt=jt>qt?1:jt/qt,at=jt>qt?qt/jt:1;H.translate(yt,_t),H.rotate(ae),H.scale(bt,at),H.arc(0,0,Lt,Vt,re,1-Nt),H.scale(1/bt,1/at),H.rotate(-ae),H.translate(-yt,-_t)}break}case"Z":H.closePath();break;default:break}if(dt==="Z")Qt=Gt;else{var rt=Q.length;Qt=[Q[rt-2],Q[rt-1]]}}}}S.drawPath=C;function T(K,H){var st=K.get("canvas");st&&(H==="remove"&&(K._cacheCanvasBBox=K.get("cacheCanvasBBox")),K.get("hasChanged")||(K.set("hasChanged",!0),K.cfg.parent&&K.cfg.parent.get("hasChanged")||(st.refreshElement(K,H,st),st.get("autoDraw")&&st.draw())))}S.refreshElement=T;function B(K){var H;if(K.destroyed)H=K._cacheCanvasBBox;else{var st=K.get("cacheCanvasBBox"),pt=st&&!!(st.width&&st.height),ct=K.getCanvasBBox(),Ot=ct&&!!(ct.width&&ct.height);pt&&Ot?H=O.mergeRegion(st,ct):pt?H=st:Ot&&(H=ct)}return H}S.getRefreshRegion=B;function D(K){if(!K.length)return null;var H=[],st=[],pt=[],ct=[];return b.each(K,function(Ot){var Rt=B(Ot);Rt&&(H.push(Rt.minX),st.push(Rt.minY),pt.push(Rt.maxX),ct.push(Rt.maxY))}),{minX:b.min(H),minY:b.min(st),maxX:b.max(pt),maxY:b.max(ct)}}S.getMergedRegion=D;function Y(K,H){return!K||!H||!O.intersectRect(K,H)?null:{minX:Math.max(K.minX,H.minX),minY:Math.max(K.minY,H.minY),maxX:Math.min(K.maxX,H.maxX),maxY:Math.min(K.maxY,H.maxY)}}S.mergeView=Y},24818:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.getShape=void 0;var b=p(29126);function I(A,_){if(_){var E=b.invert(_);return b.multiplyVec2(E,A)}return A}function P(A,_,E){var g=A.getTotalMatrix();if(g){var w=I([_,E,1],g),d=w[0],y=w[1];return[d,y]}return[_,E]}function O(A,_,E){if(A.isCanvas&&A.isCanvas())return!0;if(!b.isAllowCapture(A)||A.cfg.isInView===!1)return!1;if(A.cfg.clipShape){var g=P(A,_,E),w=g[0],d=g[1];if(A.isClipped(w,d))return!1}var y=A.cfg.cacheCanvasBBox||A.getCanvasBBox();return _>=y.minX&&_<=y.maxX&&E>=y.minY&&E<=y.maxY}function L(A,_,E){if(!O(A,_,E))return null;for(var g=null,w=A.getChildren(),d=w.length,y=d-1;y>=0;y--){var m=w[y];if(m.isGroup())g=L(m,_,E);else if(O(m,_,E)){var C=m,T=P(m,_,E),B=T[0],D=T[1];C.isInShape(B,D)&&(g=m)}if(g)break}return g}S.getShape=L},55978:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(29126);function I(P,O,L){var A=b.getOffScreenContext();return P.createPath(A),A.isPointInPath(O,L)}S.default=I},4043:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var p=1e-6;function b(O){return Math.abs(O)<p?0:O<0?-1:1}function I(O,L,A){return(A[0]-O[0])*(L[1]-O[1])==(L[0]-O[0])*(A[1]-O[1])&&Math.min(O[0],L[0])<=A[0]&&A[0]<=Math.max(O[0],L[0])&&Math.min(O[1],L[1])<=A[1]&&A[1]<=Math.max(O[1],L[1])}function P(O,L,A){var _=!1,E=O.length;if(E<=2)return!1;for(var g=0;g<E;g++){var w=O[g],d=O[(g+1)%E];if(I(w,d,[L,A]))return!0;b(w[1]-A)>0!=b(d[1]-A)>0&&b(L-(A-w[1])*(w[0]-d[0])/(w[1]-d[1])-w[0])<0&&(_=!_)}return _}S.default=P},37311:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(94478);function I(P,O,L,A,_,E,g,w){var d=(Math.atan2(w-O,g-P)+Math.PI*2)%(Math.PI*2);if(d<A||d>_)return!1;var y={x:P+L*Math.cos(d),y:O+L*Math.sin(d)};return b.distance(y.x,y.y,g,w)<=E/2}S.default=I},63131:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(89838);function I(P,O,L,A,_,E,g){var w=Math.min(P,L),d=Math.max(P,L),y=Math.min(O,A),m=Math.max(O,A),C=_/2;return E>=w-C&&E<=d+C&&g>=y-C&&g<=m+C?b.Line.pointToLine(P,O,L,A,E,g)<=_/2:!1}S.default=I},70625:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(63131);function I(P,O,L,A,_){var E=P.length;if(E<2)return!1;for(var g=0;g<E-1;g++){var w=P[g][0],d=P[g][1],y=P[g+1][0],m=P[g+1][1];if(b.default(w,d,y,m,O,L,A))return!0}if(_){var C=P[0],T=P[E-1];if(b.default(C[0],C[1],T[0],T[1],O,L,A))return!0}return!1}S.default=I},19626:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(63131),I=p(37311);function P(O,L,A,_,E,g,w,d){var y=g/2;return b.default(O+E,L,O+A-E,L,g,w,d)||b.default(O+A,L+E,O+A,L+_-E,g,w,d)||b.default(O+A-E,L+_,O+E,L+_,g,w,d)||b.default(O,L+_-E,O,L+E,g,w,d)||I.default(O+A-E,L+E,E,1.5*Math.PI,2*Math.PI,g,w,d)||I.default(O+A-E,L+_-E,E,0,.5*Math.PI,g,w,d)||I.default(O+E,L+_-E,E,.5*Math.PI,Math.PI,g,w,d)||I.default(O+E,L+E,E,Math.PI,1.5*Math.PI,g,w,d)}S.default=P},47946:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(94478);function I(P,O,L,A,_,E,g){var w=_/2;return b.inBox(P-w,O-w,L,_,E,g)||b.inBox(P+L-w,O-w,_,A,E,g)||b.inBox(P+w,O+A-w,L,_,E,g)||b.inBox(P-w,O+w,_,A,E,g)}S.default=I},62948:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.parseRadius=S.parseStyle=S.parsePattern=S.parseRadialGradient=S.parseLineGradient=void 0;var b=p(94478),I=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,P=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,O=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,L=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function A(y,m){var C=y.match(L);b.each(C,function(T){var B=T.split(":");m.addColorStop(B[0],B[1])})}function _(y,m,C){var T=I.exec(C),B=parseFloat(T[1])%360*(Math.PI/180),D=T[2],Y=m.getBBox(),K,H;B>=0&&B<1/2*Math.PI?(K={x:Y.minX,y:Y.minY},H={x:Y.maxX,y:Y.maxY}):1/2*Math.PI<=B&&B<Math.PI?(K={x:Y.maxX,y:Y.minY},H={x:Y.minX,y:Y.maxY}):Math.PI<=B&&B<3/2*Math.PI?(K={x:Y.maxX,y:Y.maxY},H={x:Y.minX,y:Y.minY}):(K={x:Y.minX,y:Y.maxY},H={x:Y.maxX,y:Y.minY});var st=Math.tan(B),pt=st*st,ct=(H.x-K.x+st*(H.y-K.y))/(pt+1)+K.x,Ot=st*(H.x-K.x+st*(H.y-K.y))/(pt+1)+K.y,Rt=y.createLinearGradient(K.x,K.y,ct,Ot);return A(D,Rt),Rt}S.parseLineGradient=_;function E(y,m,C){var T=P.exec(C),B=parseFloat(T[1]),D=parseFloat(T[2]),Y=parseFloat(T[3]),K=T[4];if(Y===0){var H=K.match(L);return H[H.length-1].split(":")[1]}var st=m.getBBox(),pt=st.maxX-st.minX,ct=st.maxY-st.minY,Ot=Math.sqrt(pt*pt+ct*ct)/2,Rt=y.createRadialGradient(st.minX+pt*B,st.minY+ct*D,0,st.minX+pt/2,st.minY+ct/2,Y*Ot);return A(K,Rt),Rt}S.parseRadialGradient=E;function g(y,m,C){if(m.get("patternSource")&&m.get("patternSource")===C)return m.get("pattern");var T,B,D=O.exec(C),Y=D[1],K=D[2];function H(){T=y.createPattern(B,Y),m.set("pattern",T),m.set("patternSource",C)}switch(Y){case"a":Y="repeat";break;case"x":Y="repeat-x";break;case"y":Y="repeat-y";break;case"n":Y="no-repeat";break;default:Y="no-repeat"}return B=new Image,K.match(/^data:/i)||(B.crossOrigin="Anonymous"),B.src=K,B.complete?H():(B.onload=H,B.src=B.src),T}S.parsePattern=g;function w(y,m,C){var T=m.getBBox();if(isNaN(T.x)||isNaN(T.y)||isNaN(T.width)||isNaN(T.height))return C;if(b.isString(C)){if(C[1]==="("||C[2]==="("){if(C[0]==="l")return _(y,m,C);if(C[0]==="r")return E(y,m,C);if(C[0]==="p")return g(y,m,C)}return C}if(C instanceof CanvasPattern)return C}S.parseStyle=w;function d(y){var m=0,C=0,T=0,B=0;return b.isArray(y)?y.length===1?m=C=T=B=y[0]:y.length===2?(m=T=y[0],C=B=y[1]):y.length===3?(m=y[0],C=B=y[1],T=y[2]):(m=y[0],C=y[1],T=y[2],B=y[3]):m=C=T=B=y,[m,C,T,B]}S.parseRadius=d},32460:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(99519),I=p(29126),P=p(89838),O=p(89838),L=p(56379),A=p(77160),_=p(94478),E=p(63131),g=p(37311),w=L.ext.transform;function d(C){for(var T=!1,B=C.length,D=0;D<B;D++){var Y=C[D],K=Y[0];if(K==="C"||K==="A"||K==="Q"){T=!0;break}}return T}function y(C,T,B,D,Y){for(var K=!1,H=T/2,st=0;st<C.length;st++){var pt=C[st],ct=pt.currentPoint,Ot=pt.params,Rt=pt.prePoint,Qt=pt.box;if(!(Qt&&!_.inBox(Qt.x-H,Qt.y-H,Qt.width+T,Qt.height+T,B,D))){switch(pt.command){case"L":case"Z":K=E.default(Rt[0],Rt[1],ct[0],ct[1],T,B,D);break;case"Q":var Gt=P.Quad.pointDistance(Rt[0],Rt[1],Ot[1],Ot[2],Ot[3],Ot[4],B,D);K=Gt<=T/2;break;case"C":var Z=O.Cubic.pointDistance(Rt[0],Rt[1],Ot[1],Ot[2],Ot[3],Ot[4],Ot[5],Ot[6],B,D,Y);K=Z<=T/2;break;case"A":var nt=pt.arcParams,Q=nt.cx,dt=nt.cy,lt=nt.rx,z=nt.ry,$=nt.startAngle,j=nt.endAngle,f=nt.xRotation,yt=[B,D,1],_t=lt>z?lt:z,jt=lt>z?1:lt/z,qt=lt>z?z/lt:1,Vt=w(null,[["t",-Q,-dt],["r",-f],["s",1/jt,1/qt]]);A.transformMat3(yt,yt,Vt),K=g.default(0,0,_t,$,j,T,yt[0],yt[1]);break;default:break}if(K)break}}return K}function m(C){for(var T=C.length,B=[],D=[],Y=[],K=0;K<T;K++){var H=C[K],st=H[0];st==="M"?(Y.length&&(D.push(Y),Y=[]),Y.push([H[1],H[2]])):st==="Z"?Y.length&&(B.push(Y),Y=[]):Y.push([H[1],H[2]])}return Y.length>0&&D.push(Y),{polygons:B,polylines:D}}S.default=b.__assign({hasArc:d,extractPolygons:m,isPointInStroke:y},I.PathUtil)},94478:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.clearAnimationFrame=S.requestAnimationFrame=S.isNumberEqual=S.mod=S.toRadian=S.each=S.isArray=S.isFunction=S.isString=S.isNil=S.isSamePoint=S.mergeRegion=S.intersectRect=S.inBox=S.distance=S.getPixelRatio=void 0;function b(){return window?window.devicePixelRatio:1}S.getPixelRatio=b;function I(E,g,w,d){var y=E-w,m=g-d;return Math.sqrt(y*y+m*m)}S.distance=I;function P(E,g,w,d,y,m){return y>=E&&y<=E+w&&m>=g&&m<=g+d}S.inBox=P;function O(E,g){return!(g.minX>E.maxX||g.maxX<E.minX||g.minY>E.maxY||g.maxY<E.minY)}S.intersectRect=O;function L(E,g){return!E||!g?E||g:{minX:Math.min(E.minX,g.minX),minY:Math.min(E.minY,g.minY),maxX:Math.max(E.maxX,g.maxX),maxY:Math.max(E.maxY,g.maxY)}}S.mergeRegion=L;function A(E,g){return E[0]===g[0]&&E[1]===g[1]}S.isSamePoint=A;var _=p(49242);Object.defineProperty(S,"isNil",{enumerable:!0,get:function(){return _.isNil}}),Object.defineProperty(S,"isString",{enumerable:!0,get:function(){return _.isString}}),Object.defineProperty(S,"isFunction",{enumerable:!0,get:function(){return _.isFunction}}),Object.defineProperty(S,"isArray",{enumerable:!0,get:function(){return _.isArray}}),Object.defineProperty(S,"each",{enumerable:!0,get:function(){return _.each}}),Object.defineProperty(S,"toRadian",{enumerable:!0,get:function(){return _.toRadian}}),Object.defineProperty(S,"mod",{enumerable:!0,get:function(){return _.mod}}),Object.defineProperty(S,"isNumberEqual",{enumerable:!0,get:function(){return _.isNumberEqual}}),Object.defineProperty(S,"requestAnimationFrame",{enumerable:!0,get:function(){return _.requestAnimationFrame}}),Object.defineProperty(S,"clearAnimationFrame",{enumerable:!0,get:function(){return _.clearAnimationFrame}})},56379:function(Ct,S,p){"use strict";p.r(S),p.d(S,{ext:function(){return b},mat3:function(){return I},vec2:function(){return P},vec3:function(){return O}});var b={};p.r(b),p.d(b,{angleTo:function(){return d},direction:function(){return w},leftRotate:function(){return A},leftScale:function(){return _},leftTranslate:function(){return L},transform:function(){return g},vertical:function(){return y}});var I=p(35600),P=p(31437),O=p(77160);function L(m,C,T){var B=[0,0,0,0,0,0,0,0,0];return I.fromTranslation(B,T),I.multiply(m,B,C)}function A(m,C,T){var B=[0,0,0,0,0,0,0,0,0];return I.fromRotation(B,T),I.multiply(m,B,C)}function _(m,C,T){var B=[0,0,0,0,0,0,0,0,0];return I.fromScaling(B,T),I.multiply(m,B,C)}function E(m,C,T){return I.multiply(m,T,C)}function g(m,C){for(var T=m?[].concat(m):[1,0,0,0,1,0,0,0,1],B=0,D=C.length;B<D;B++){var Y=C[B];switch(Y[0]){case"t":L(T,T,[Y[1],Y[2]]);break;case"s":_(T,T,[Y[1],Y[2]]);break;case"r":A(T,T,Y[1]);break;case"m":E(T,T,Y[1]);break;default:break}}return T}function w(m,C){return m[0]*C[1]-C[0]*m[1]}function d(m,C,T){var B=P.angle(m,C),D=w(m,C)>=0;return T?D?Math.PI*2-B:B:D?B:Math.PI*2-B}function y(m,C,T){return T?(m[0]=C[1],m[1]=-1*C[0]):(m[0]=-1*C[1],m[1]=C[0]),m}},99519:function(Ct,S,p){"use strict";p.r(S),p.d(S,{__extends:function(){return I},__assign:function(){return P},__rest:function(){return O},__decorate:function(){return L},__param:function(){return A},__metadata:function(){return _},__awaiter:function(){return E},__generator:function(){return g},__createBinding:function(){return w},__exportStar:function(){return d},__values:function(){return y},__read:function(){return m},__spread:function(){return C},__spreadArrays:function(){return T},__spreadArray:function(){return B},__await:function(){return D},__asyncGenerator:function(){return Y},__asyncDelegator:function(){return K},__asyncValues:function(){return H},__makeTemplateObject:function(){return st},__importStar:function(){return ct},__importDefault:function(){return Ot},__classPrivateFieldGet:function(){return Rt},__classPrivateFieldSet:function(){return Qt},__classPrivateFieldIn:function(){return Gt}});var b=function(Z,nt){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,dt){Q.__proto__=dt}||function(Q,dt){for(var lt in dt)Object.prototype.hasOwnProperty.call(dt,lt)&&(Q[lt]=dt[lt])},b(Z,nt)};function I(Z,nt){if(typeof nt!="function"&&nt!==null)throw new TypeError("Class extends value "+String(nt)+" is not a constructor or null");b(Z,nt);function Q(){this.constructor=Z}Z.prototype=nt===null?Object.create(nt):(Q.prototype=nt.prototype,new Q)}var P=function(){return P=Object.assign||function(nt){for(var Q,dt=1,lt=arguments.length;dt<lt;dt++){Q=arguments[dt];for(var z in Q)Object.prototype.hasOwnProperty.call(Q,z)&&(nt[z]=Q[z])}return nt},P.apply(this,arguments)};function O(Z,nt){var Q={};for(var dt in Z)Object.prototype.hasOwnProperty.call(Z,dt)&&nt.indexOf(dt)<0&&(Q[dt]=Z[dt]);if(Z!=null&&typeof Object.getOwnPropertySymbols=="function")for(var lt=0,dt=Object.getOwnPropertySymbols(Z);lt<dt.length;lt++)nt.indexOf(dt[lt])<0&&Object.prototype.propertyIsEnumerable.call(Z,dt[lt])&&(Q[dt[lt]]=Z[dt[lt]]);return Q}function L(Z,nt,Q,dt){var lt=arguments.length,z=lt<3?nt:dt===null?dt=Object.getOwnPropertyDescriptor(nt,Q):dt,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")z=Reflect.decorate(Z,nt,Q,dt);else for(var j=Z.length-1;j>=0;j--)($=Z[j])&&(z=(lt<3?$(z):lt>3?$(nt,Q,z):$(nt,Q))||z);return lt>3&&z&&Object.defineProperty(nt,Q,z),z}function A(Z,nt){return function(Q,dt){nt(Q,dt,Z)}}function _(Z,nt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(Z,nt)}function E(Z,nt,Q,dt){function lt(z){return z instanceof Q?z:new Q(function($){$(z)})}return new(Q||(Q=Promise))(function(z,$){function j(_t){try{yt(dt.next(_t))}catch(jt){$(jt)}}function f(_t){try{yt(dt.throw(_t))}catch(jt){$(jt)}}function yt(_t){_t.done?z(_t.value):lt(_t.value).then(j,f)}yt((dt=dt.apply(Z,nt||[])).next())})}function g(Z,nt){var Q={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},dt,lt,z,$;return $={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&($[Symbol.iterator]=function(){return this}),$;function j(yt){return function(_t){return f([yt,_t])}}function f(yt){if(dt)throw new TypeError("Generator is already executing.");for(;Q;)try{if(dt=1,lt&&(z=yt[0]&2?lt.return:yt[0]?lt.throw||((z=lt.return)&&z.call(lt),0):lt.next)&&!(z=z.call(lt,yt[1])).done)return z;switch(lt=0,z&&(yt=[yt[0]&2,z.value]),yt[0]){case 0:case 1:z=yt;break;case 4:return Q.label++,{value:yt[1],done:!1};case 5:Q.label++,lt=yt[1],yt=[0];continue;case 7:yt=Q.ops.pop(),Q.trys.pop();continue;default:if(z=Q.trys,!(z=z.length>0&&z[z.length-1])&&(yt[0]===6||yt[0]===2)){Q=0;continue}if(yt[0]===3&&(!z||yt[1]>z[0]&&yt[1]<z[3])){Q.label=yt[1];break}if(yt[0]===6&&Q.label<z[1]){Q.label=z[1],z=yt;break}if(z&&Q.label<z[2]){Q.label=z[2],Q.ops.push(yt);break}z[2]&&Q.ops.pop(),Q.trys.pop();continue}yt=nt.call(Z,Q)}catch(_t){yt=[6,_t],lt=0}finally{dt=z=0}if(yt[0]&5)throw yt[1];return{value:yt[0]?yt[1]:void 0,done:!0}}}var w=Object.create?function(Z,nt,Q,dt){dt===void 0&&(dt=Q);var lt=Object.getOwnPropertyDescriptor(nt,Q);(!lt||("get"in lt?!nt.__esModule:lt.writable||lt.configurable))&&(lt={enumerable:!0,get:function(){return nt[Q]}}),Object.defineProperty(Z,dt,lt)}:function(Z,nt,Q,dt){dt===void 0&&(dt=Q),Z[dt]=nt[Q]};function d(Z,nt){for(var Q in Z)Q!=="default"&&!Object.prototype.hasOwnProperty.call(nt,Q)&&w(nt,Z,Q)}function y(Z){var nt=typeof Symbol=="function"&&Symbol.iterator,Q=nt&&Z[nt],dt=0;if(Q)return Q.call(Z);if(Z&&typeof Z.length=="number")return{next:function(){return Z&&dt>=Z.length&&(Z=void 0),{value:Z&&Z[dt++],done:!Z}}};throw new TypeError(nt?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(Z,nt){var Q=typeof Symbol=="function"&&Z[Symbol.iterator];if(!Q)return Z;var dt=Q.call(Z),lt,z=[],$;try{for(;(nt===void 0||nt-- >0)&&!(lt=dt.next()).done;)z.push(lt.value)}catch(j){$={error:j}}finally{try{lt&&!lt.done&&(Q=dt.return)&&Q.call(dt)}finally{if($)throw $.error}}return z}function C(){for(var Z=[],nt=0;nt<arguments.length;nt++)Z=Z.concat(m(arguments[nt]));return Z}function T(){for(var Z=0,nt=0,Q=arguments.length;nt<Q;nt++)Z+=arguments[nt].length;for(var dt=Array(Z),lt=0,nt=0;nt<Q;nt++)for(var z=arguments[nt],$=0,j=z.length;$<j;$++,lt++)dt[lt]=z[$];return dt}function B(Z,nt,Q){if(Q||arguments.length===2)for(var dt=0,lt=nt.length,z;dt<lt;dt++)(z||!(dt in nt))&&(z||(z=Array.prototype.slice.call(nt,0,dt)),z[dt]=nt[dt]);return Z.concat(z||Array.prototype.slice.call(nt))}function D(Z){return this instanceof D?(this.v=Z,this):new D(Z)}function Y(Z,nt,Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var dt=Q.apply(Z,nt||[]),lt,z=[];return lt={},$("next"),$("throw"),$("return"),lt[Symbol.asyncIterator]=function(){return this},lt;function $(qt){dt[qt]&&(lt[qt]=function(Vt){return new Promise(function(re,ae){z.push([qt,Vt,re,ae])>1||j(qt,Vt)})})}function j(qt,Vt){try{f(dt[qt](Vt))}catch(re){jt(z[0][3],re)}}function f(qt){qt.value instanceof D?Promise.resolve(qt.value.v).then(yt,_t):jt(z[0][2],qt)}function yt(qt){j("next",qt)}function _t(qt){j("throw",qt)}function jt(qt,Vt){qt(Vt),z.shift(),z.length&&j(z[0][0],z[0][1])}}function K(Z){var nt,Q;return nt={},dt("next"),dt("throw",function(lt){throw lt}),dt("return"),nt[Symbol.iterator]=function(){return this},nt;function dt(lt,z){nt[lt]=Z[lt]?function($){return(Q=!Q)?{value:D(Z[lt]($)),done:lt==="return"}:z?z($):$}:z}}function H(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var nt=Z[Symbol.asyncIterator],Q;return nt?nt.call(Z):(Z=typeof y=="function"?y(Z):Z[Symbol.iterator](),Q={},dt("next"),dt("throw"),dt("return"),Q[Symbol.asyncIterator]=function(){return this},Q);function dt(z){Q[z]=Z[z]&&function($){return new Promise(function(j,f){$=Z[z]($),lt(j,f,$.done,$.value)})}}function lt(z,$,j,f){Promise.resolve(f).then(function(yt){z({value:yt,done:j})},$)}}function st(Z,nt){return Object.defineProperty?Object.defineProperty(Z,"raw",{value:nt}):Z.raw=nt,Z}var pt=Object.create?function(Z,nt){Object.defineProperty(Z,"default",{enumerable:!0,value:nt})}:function(Z,nt){Z.default=nt};function ct(Z){if(Z&&Z.__esModule)return Z;var nt={};if(Z!=null)for(var Q in Z)Q!=="default"&&Object.prototype.hasOwnProperty.call(Z,Q)&&w(nt,Z,Q);return pt(nt,Z),nt}function Ot(Z){return Z&&Z.__esModule?Z:{default:Z}}function Rt(Z,nt,Q,dt){if(Q==="a"&&!dt)throw new TypeError("Private accessor was defined without a getter");if(typeof nt=="function"?Z!==nt||!dt:!nt.has(Z))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Q==="m"?dt:Q==="a"?dt.call(Z):dt?dt.value:nt.get(Z)}function Qt(Z,nt,Q,dt,lt){if(dt==="m")throw new TypeError("Private method is not writable");if(dt==="a"&&!lt)throw new TypeError("Private accessor was defined without a setter");if(typeof nt=="function"?Z!==nt||!lt:!nt.has(Z))throw new TypeError("Cannot write private member to an object whose class did not declare it");return dt==="a"?lt.call(Z,Q):lt?lt.value=Q:nt.set(Z,Q),Q}function Gt(Z,nt){if(nt===null||typeof nt!="object"&&typeof nt!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof Z=="function"?nt===Z:Z.has(nt)}},19270:function(Ct,S,p){"use strict";var b;b={value:!0};var I=p(76789),P=p(29126),O=p(91995),L=p(49171),A=p(84092),_=p(84745),E=p(8198),g=p(36629),w=p(88330),d=function(y){I.__extends(m,y);function m(C){return y.call(this,I.__assign(I.__assign({},C),{autoDraw:!0,renderer:"svg"}))||this}return m.prototype.getShapeBase=function(){return E},m.prototype.getGroupBase=function(){return g.default},m.prototype.getShape=function(C,T,B){var D=B.target||B.srcElement;if(!O.SHAPE_TO_TAGS[D.tagName]){for(var Y=D.parentNode;Y&&!O.SHAPE_TO_TAGS[Y.tagName];)Y=Y.parentNode;D=Y}return this.find(function(K){return K.get("el")===D})},m.prototype.createDom=function(){var C=_.createSVGElement("svg"),T=new w.default(C);return C.setAttribute("width",""+this.get("width")),C.setAttribute("height",""+this.get("height")),this.set("context",T),C},m.prototype.onCanvasChange=function(C){var T=this.get("context"),B=this.get("el");if(C==="sort"){var D=this.get("children");D&&D.length&&_.sortDom(this,function(K,H){return D.indexOf(K)-D.indexOf(H)?1:0})}else if(C==="clear"){if(B){B.innerHTML="";var Y=T.el;Y.innerHTML="",B.appendChild(Y)}}else C==="matrix"?A.setTransform(this):C==="clip"?A.setClip(this,T):C==="changeSize"&&(B.setAttribute("width",""+this.get("width")),B.setAttribute("height",""+this.get("height")))},m.prototype.draw=function(){var C=this.get("context"),T=this.getChildren();A.setClip(this,C),T.length&&L.drawChildren(C,T)},m}(P.AbstractCanvas);S.Z=d},91995:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.EVENTS=S.SVG_ATTR_MAP=S.SHAPE_TO_TAGS=void 0,S.SHAPE_TO_TAGS={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},S.SVG_ATTR_MAP={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},S.EVENTS=["click","mousedown","mouseup","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","wheel"]},14232:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(49242),I=p(84745),P=function(){function O(L,A){this.cfg={};var _=I.createSVGElement("marker"),E=b.uniqueId("marker_");_.setAttribute("id",E);var g=I.createSVGElement("path");g.setAttribute("stroke",L.stroke||"none"),g.setAttribute("fill",L.fill||"none"),_.appendChild(g),_.setAttribute("overflow","visible"),_.setAttribute("orient","auto-start-reverse"),this.el=_,this.child=g,this.id=E;var w=L[A==="marker-start"?"startArrow":"endArrow"];return this.stroke=L.stroke||"#000",w===!0?this._setDefaultPath(A,g):(this.cfg=w,this._setMarker(L.lineWidth,g)),this}return O.prototype.match=function(){return!1},O.prototype._setDefaultPath=function(L,A){var _=this.el;A.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),_.setAttribute("refX",""+10*Math.cos(Math.PI/6)),_.setAttribute("refY",""+5)},O.prototype._setMarker=function(L,A){var _=this.el,E=this.cfg.path,g=this.cfg.d;b.isArray(E)&&(E=E.map(function(w){return w.join(" ")}).join("")),A.setAttribute("d",E),_.appendChild(A),g&&_.setAttribute("refX",""+g/L)},O.prototype.update=function(L){var A=this.child;A.attr?A.attr("fill",L):A.setAttribute("fill",L)},O}();S.default=P},32439:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(49242),I=p(84745),P=function(){function O(L){this.type="clip",this.cfg={};var A=I.createSVGElement("clipPath");this.el=A,this.id=b.uniqueId("clip_"),A.id=this.id;var _=L.cfg.el;return A.appendChild(_),this.cfg=L,this}return O.prototype.match=function(){return!1},O.prototype.remove=function(){var L=this.el;L.parentNode.removeChild(L)},O}();S.default=P},90362:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(49242),I=p(84745),P=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,O=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,L=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function A(w){var d=w.match(L);if(!d)return"";var y="";return d.sort(function(m,C){return m=m.split(":"),C=C.split(":"),Number(m[0])-Number(C[0])}),b.each(d,function(m){m=m.split(":"),y+='<stop offset="'+m[0]+'" stop-color="'+m[1]+'"></stop>'}),y}function _(w,d){var y=P.exec(w),m=b.mod(b.toRadian(parseFloat(y[1])),Math.PI*2),C=y[2],T,B;m>=0&&m<.5*Math.PI?(T={x:0,y:0},B={x:1,y:1}):.5*Math.PI<=m&&m<Math.PI?(T={x:1,y:0},B={x:0,y:1}):Math.PI<=m&&m<1.5*Math.PI?(T={x:1,y:1},B={x:0,y:0}):(T={x:0,y:1},B={x:1,y:0});var D=Math.tan(m),Y=D*D,K=(B.x-T.x+D*(B.y-T.y))/(Y+1)+T.x,H=D*(B.x-T.x+D*(B.y-T.y))/(Y+1)+T.y;d.setAttribute("x1",T.x),d.setAttribute("y1",T.y),d.setAttribute("x2",K),d.setAttribute("y2",H),d.innerHTML=A(C)}function E(w,d){var y=O.exec(w),m=parseFloat(y[1]),C=parseFloat(y[2]),T=parseFloat(y[3]),B=y[4];d.setAttribute("cx",m),d.setAttribute("cy",C),d.setAttribute("r",T),d.innerHTML=A(B)}var g=function(){function w(d){this.cfg={};var y=null,m=b.uniqueId("gradient_");return d.toLowerCase()[0]==="l"?(y=I.createSVGElement("linearGradient"),_(d,y)):(y=I.createSVGElement("radialGradient"),E(d,y)),y.setAttribute("id",m),this.el=y,this.id=m,this.cfg=d,this}return w.prototype.match=function(d,y){return this.cfg===y},w}();S.default=g},88330:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(49242),I=p(90362),P=p(50375),O=p(14232),L=p(32439),A=p(99365),_=p(84745),E=function(){function g(w){var d=_.createSVGElement("defs"),y=b.uniqueId("defs_");d.id=y,w.appendChild(d),this.children=[],this.defaultArrow={},this.el=d,this.canvas=w}return g.prototype.find=function(w,d){for(var y=this.children,m=null,C=0;C<y.length;C++)if(y[C].match(w,d)){m=y[C].id;break}return m},g.prototype.findById=function(w){for(var d=this.children,y=null,m=0;m<d.length;m++)if(d[m].id===w){y=d[m];break}return y},g.prototype.add=function(w){this.children.push(w),w.canvas=this.canvas,w.parent=this},g.prototype.getDefaultArrow=function(w,d){var y=w.stroke||w.strokeStyle;if(this.defaultArrow[y])return this.defaultArrow[y].id;var m=new O.default(w,d);return this.defaultArrow[y]=m,this.el.appendChild(m.el),this.add(m),m.id},g.prototype.addGradient=function(w){var d=new I.default(w);return this.el.appendChild(d.el),this.add(d),d.id},g.prototype.addArrow=function(w,d){var y=new O.default(w,d);return this.el.appendChild(y.el),this.add(y),y.id},g.prototype.addShadow=function(w){var d=new P.default(w);return this.el.appendChild(d.el),this.add(d),d.id},g.prototype.addPattern=function(w){var d=new A.default(w);return this.el.appendChild(d.el),this.add(d),d.id},g.prototype.addClip=function(w){var d=new L.default(w);return this.el.appendChild(d.el),this.add(d),d.id},g}();S.default=E},99365:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(49242),I=p(84745),P=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,O=function(){function L(A){this.cfg={};var _=I.createSVGElement("pattern");_.setAttribute("patternUnits","userSpaceOnUse");var E=I.createSVGElement("image");_.appendChild(E);var g=b.uniqueId("pattern_");_.id=g,this.el=_,this.id=g,this.cfg=A;var w=P.exec(A),d=w[2];E.setAttribute("href",d);var y=new Image;d.match(/^data:/i)||(y.crossOrigin="Anonymous"),y.src=d;function m(){_.setAttribute("width",""+y.width),_.setAttribute("height",""+y.height)}return y.complete?m():(y.onload=m,y.src=y.src),this}return L.prototype.match=function(A,_){return this.cfg===_},L}();S.default=O},50375:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(49242),I=p(84745),P={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},O={x:"-40%",y:"-40%",width:"200%",height:"200%"},L=function(){function A(_){this.type="filter",this.cfg={},this.type="filter";var E=I.createSVGElement("filter");return b.each(O,function(g,w){E.setAttribute(w,g)}),this.el=E,this.id=b.uniqueId("filter_"),this.el.id=this.id,this.cfg=_,this._parseShadow(_,E),this}return A.prototype.match=function(_,E){if(this.type!==_)return!1;var g=!0,w=this.cfg;return b.each(Object.keys(w),function(d){if(w[d]!==E[d])return g=!1,!1}),g},A.prototype.update=function(_,E){var g=this.cfg;return g[P[_]]=E,this._parseShadow(g,this.el),this},A.prototype._parseShadow=function(_,E){var g=`<feDropShadow
      dx="`+(_.dx||0)+`"
      dy="`+(_.dy||0)+`"
      stdDeviation="`+(_.blur?_.blur/10:0)+`"
      flood-color="`+(_.color?_.color:"#000")+`"
      flood-opacity="`+(_.opacity?_.opacity:1)+`"
      />`;E.innerHTML=g},A}();S.default=L},36629:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(76789),I=p(29126),P=p(49242),O=p(8198),L=p(49171),A=p(84092),_=p(91995),E=p(84745),g=function(w){b.__extends(d,w);function d(){return w!==null&&w.apply(this,arguments)||this}return d.prototype.isEntityGroup=function(){return!0},d.prototype.createDom=function(){var y=E.createSVGElement("g");this.set("el",y);var m=this.getParent();if(m){var C=m.get("el");C||(C=m.createDom(),m.set("el",C)),C.appendChild(y)}return y},d.prototype.afterAttrsChange=function(y){w.prototype.afterAttrsChange.call(this,y);var m=this.get("canvas");if(m&&m.get("autoDraw")){var C=m.get("context");this.createPath(C,y)}},d.prototype.onCanvasChange=function(y){L.refreshElement(this,y)},d.prototype.getShapeBase=function(){return O},d.prototype.getGroupBase=function(){return d},d.prototype.draw=function(y){var m=this.getChildren(),C=this.get("el");this.get("destroyed")?C&&C.parentNode.removeChild(C):(C||this.createDom(),A.setClip(this,y),this.createPath(y),m.length&&L.drawChildren(y,m))},d.prototype.createPath=function(y,m){var C=this.attr(),T=this.get("el");P.each(m||C,function(B,D){_.SVG_ATTR_MAP[D]&&T.setAttribute(_.SVG_ATTR_MAP[D],B)}),A.setTransform(this)},d}(I.AbstractGroup);S.default=g},5666:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(76789),I=p(29126),P=p(84092),O=p(84745),L=p(49171),A=p(91995),_=p(8198),E=p(36629),g=p(29126),w=function(d){b.__extends(y,d);function y(){var m=d!==null&&d.apply(this,arguments)||this;return m.type="svg",m.canFill=!1,m.canStroke=!1,m}return y.prototype.getDefaultAttrs=function(){var m=d.prototype.getDefaultAttrs.call(this);return b.__assign(b.__assign({},m),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},y.prototype.afterAttrsChange=function(m){d.prototype.afterAttrsChange.call(this,m);var C=this.get("canvas");if(C&&C.get("autoDraw")){var T=C.get("context");this.draw(T,m)}},y.prototype.getShapeBase=function(){return _},y.prototype.getGroupBase=function(){return E.default},y.prototype.onCanvasChange=function(m){L.refreshElement(this,m)},y.prototype.calculateBBox=function(){var m=this.get("el"),C=null;if(m)C=m.getBBox();else{var T=g.getBBoxMethod(this.get("type"));T&&(C=T(this))}if(C){var B=C.x,D=C.y,Y=C.width,K=C.height,H=this.getHitLineWidth(),st=H/2,pt=B-st,ct=D-st,Ot=B+Y+st,Rt=D+K+st;return{x:pt,y:ct,minX:pt,minY:ct,maxX:Ot,maxY:Rt,width:Y+H,height:K+H}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},y.prototype.isFill=function(){var m=this.attr(),C=m.fill,T=m.fillStyle;return(C||T||this.isClipShape())&&this.canFill},y.prototype.isStroke=function(){var m=this.attr(),C=m.stroke,T=m.strokeStyle;return(C||T)&&this.canStroke},y.prototype.draw=function(m,C){var T=this.get("el");this.get("destroyed")?T&&T.parentNode.removeChild(T):(T||O.createDom(this),P.setClip(this,m),this.createPath(m,C),this.shadow(m,C),this.strokeAndFill(m,C),this.transform(C))},y.prototype.createPath=function(m,C){},y.prototype.strokeAndFill=function(m,C){var T=C||this.attr(),B=T.fill,D=T.fillStyle,Y=T.stroke,K=T.strokeStyle,H=T.fillOpacity,st=T.strokeOpacity,pt=T.lineWidth,ct=this.get("el");this.canFill&&(C?"fill"in T?this._setColor(m,"fill",B):"fillStyle"in T&&this._setColor(m,"fill",D):this._setColor(m,"fill",B||D),H&&ct.setAttribute(A.SVG_ATTR_MAP.fillOpacity,H)),this.canStroke&&pt>0&&(C?"stroke"in T?this._setColor(m,"stroke",Y):"strokeStyle"in T&&this._setColor(m,"stroke",K):this._setColor(m,"stroke",Y||K),st&&ct.setAttribute(A.SVG_ATTR_MAP.strokeOpacity,st),pt&&ct.setAttribute(A.SVG_ATTR_MAP.lineWidth,pt))},y.prototype._setColor=function(m,C,T){var B=this.get("el");if(!T){B.setAttribute(A.SVG_ATTR_MAP[C],"none");return}if(T=T.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(T)){var D=m.find("gradient",T);D||(D=m.addGradient(T)),B.setAttribute(A.SVG_ATTR_MAP[C],"url(#"+D+")")}else if(/^[p,P]{1}[\s]*\(/.test(T)){var D=m.find("pattern",T);D||(D=m.addPattern(T)),B.setAttribute(A.SVG_ATTR_MAP[C],"url(#"+D+")")}else B.setAttribute(A.SVG_ATTR_MAP[C],T)},y.prototype.shadow=function(m,C){var T=this.attr(),B=C||T,D=B.shadowOffsetX,Y=B.shadowOffsetY,K=B.shadowBlur,H=B.shadowColor;(D||Y||K||H)&&P.setShadow(this,m)},y.prototype.transform=function(m){var C=this.attr(),T=(m||C).matrix;T&&P.setTransform(this)},y.prototype.isInShape=function(m,C){return this.isPointInPath(m,C)},y.prototype.isPointInPath=function(m,C){var T=this.get("el"),B=this.get("canvas"),D=B.get("el").getBoundingClientRect(),Y=m+D.left,K=C+D.top,H=document.elementFromPoint(Y,K);return!!(H&&H.isEqualNode(T))},y.prototype.getHitLineWidth=function(){var m=this.attrs,C=m.lineWidth,T=m.lineAppendWidth;return this.isStroke()?C+T:0},y}(I.AbstractShape);S.default=w},41310:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(76789),I=p(49242),P=p(91995),O=p(5666),L=function(A){b.__extends(_,A);function _(){var E=A!==null&&A.apply(this,arguments)||this;return E.type="circle",E.canFill=!0,E.canStroke=!0,E}return _.prototype.getDefaultAttrs=function(){var E=A.prototype.getDefaultAttrs.call(this);return b.__assign(b.__assign({},E),{x:0,y:0,r:0})},_.prototype.createPath=function(E,g){var w=this.attr(),d=this.get("el");I.each(g||w,function(y,m){m==="x"||m==="y"?d.setAttribute("c"+m,y):P.SVG_ATTR_MAP[m]&&d.setAttribute(P.SVG_ATTR_MAP[m],y)})},_}(O.default);S.default=L},88800:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(76789),I=p(49242),P=p(91995),O=p(5666),L=function(A){b.__extends(_,A);function _(){var E=A!==null&&A.apply(this,arguments)||this;return E.type="dom",E.canFill=!1,E.canStroke=!1,E}return _.prototype.createPath=function(E,g){var w=this.attr(),d=this.get("el");if(I.each(g||w,function(T,B){P.SVG_ATTR_MAP[B]&&d.setAttribute(P.SVG_ATTR_MAP[B],T)}),typeof w.html=="function"){var y=w.html.call(this,w);if(y instanceof Element||y instanceof HTMLDocument){for(var m=d.childNodes,C=m.length-1;C>=0;C--)d.removeChild(m[C]);d.appendChild(y)}else d.innerHTML=y}else d.innerHTML=w.html},_}(O.default);S.default=L},62927:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(76789),I=p(49242),P=p(91995),O=p(5666),L=function(A){b.__extends(_,A);function _(){var E=A!==null&&A.apply(this,arguments)||this;return E.type="ellipse",E.canFill=!0,E.canStroke=!0,E}return _.prototype.getDefaultAttrs=function(){var E=A.prototype.getDefaultAttrs.call(this);return b.__assign(b.__assign({},E),{x:0,y:0,rx:0,ry:0})},_.prototype.createPath=function(E,g){var w=this.attr(),d=this.get("el");I.each(g||w,function(y,m){m==="x"||m==="y"?d.setAttribute("c"+m,y):P.SVG_ATTR_MAP[m]&&d.setAttribute(P.SVG_ATTR_MAP[m],y)})},_}(O.default);S.default=L},78076:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(76789),I=p(49242),P=p(91995),O=p(5666),L=function(A){b.__extends(_,A);function _(){var E=A!==null&&A.apply(this,arguments)||this;return E.type="image",E.canFill=!1,E.canStroke=!1,E}return _.prototype.getDefaultAttrs=function(){var E=A.prototype.getDefaultAttrs.call(this);return b.__assign(b.__assign({},E),{x:0,y:0,width:0,height:0})},_.prototype.createPath=function(E,g){var w=this,d=this.attr(),y=this.get("el");I.each(g||d,function(m,C){C==="img"?w._setImage(d.img):P.SVG_ATTR_MAP[C]&&y.setAttribute(P.SVG_ATTR_MAP[C],m)})},_.prototype.setAttr=function(E,g){this.attrs[E]=g,E==="img"&&this._setImage(g)},_.prototype._setImage=function(E){var g=this.attr(),w=this.get("el");if(I.isString(E))w.setAttribute("href",E);else if(E instanceof window.Image)g.width||(w.setAttribute("width",E.width),this.attr("width",E.width)),g.height||(w.setAttribute("height",E.height),this.attr("height",E.height)),w.setAttribute("href",E.src);else if(E instanceof HTMLElement&&I.isString(E.nodeName)&&E.nodeName.toUpperCase()==="CANVAS")w.setAttribute("href",E.toDataURL());else if(E instanceof ImageData){var d=document.createElement("canvas");d.setAttribute("width",""+E.width),d.setAttribute("height",""+E.height),d.getContext("2d").putImageData(E,0,0),g.width||(w.setAttribute("width",""+E.width),this.attr("width",E.width)),g.height||(w.setAttribute("height",""+E.height),this.attr("height",E.height)),w.setAttribute("href",d.toDataURL())}},_}(O.default);S.default=L},8198:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(5666);Object.defineProperty(S,"Base",{enumerable:!0,get:function(){return b.default}});var I=p(41310);Object.defineProperty(S,"Circle",{enumerable:!0,get:function(){return I.default}});var P=p(88800);Object.defineProperty(S,"Dom",{enumerable:!0,get:function(){return P.default}});var O=p(62927);Object.defineProperty(S,"Ellipse",{enumerable:!0,get:function(){return O.default}});var L=p(78076);Object.defineProperty(S,"Image",{enumerable:!0,get:function(){return L.default}});var A=p(22059);Object.defineProperty(S,"Line",{enumerable:!0,get:function(){return A.default}});var _=p(62116);Object.defineProperty(S,"Marker",{enumerable:!0,get:function(){return _.default}});var E=p(49582);Object.defineProperty(S,"Path",{enumerable:!0,get:function(){return E.default}});var g=p(17498);Object.defineProperty(S,"Polygon",{enumerable:!0,get:function(){return g.default}});var w=p(67478);Object.defineProperty(S,"Polyline",{enumerable:!0,get:function(){return w.default}});var d=p(79705);Object.defineProperty(S,"Rect",{enumerable:!0,get:function(){return d.default}});var y=p(61622);Object.defineProperty(S,"Text",{enumerable:!0,get:function(){return y.default}})},22059:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(76789),I=p(89838),P=p(49242),O=p(91995),L=p(5666),A=function(_){b.__extends(E,_);function E(){var g=_!==null&&_.apply(this,arguments)||this;return g.type="line",g.canFill=!1,g.canStroke=!0,g}return E.prototype.getDefaultAttrs=function(){var g=_.prototype.getDefaultAttrs.call(this);return b.__assign(b.__assign({},g),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},E.prototype.createPath=function(g,w){var d=this.attr(),y=this.get("el");P.each(w||d,function(m,C){if(C==="startArrow"||C==="endArrow")if(m){var T=P.isObject(m)?g.addArrow(d,O.SVG_ATTR_MAP[C]):g.getDefaultArrow(d,O.SVG_ATTR_MAP[C]);y.setAttribute(O.SVG_ATTR_MAP[C],"url(#"+T+")")}else y.removeAttribute(O.SVG_ATTR_MAP[C]);else O.SVG_ATTR_MAP[C]&&y.setAttribute(O.SVG_ATTR_MAP[C],m)})},E.prototype.getTotalLength=function(){var g=this.attr(),w=g.x1,d=g.y1,y=g.x2,m=g.y2;return I.Line.length(w,d,y,m)},E.prototype.getPoint=function(g){var w=this.attr(),d=w.x1,y=w.y1,m=w.x2,C=w.y2;return I.Line.pointAt(d,y,m,C,g)},E}(L.default);S.default=A},62116:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(76789),I=p(49242),P=p(5666),O=p(56205),L=function(A){b.__extends(_,A);function _(){var E=A!==null&&A.apply(this,arguments)||this;return E.type="marker",E.canFill=!0,E.canStroke=!0,E}return _.prototype.createPath=function(E){var g=this.get("el");g.setAttribute("d",this._assembleMarker())},_.prototype._assembleMarker=function(){var E=this._getPath();return I.isArray(E)?E.map(function(g){return g.join(" ")}).join(""):E},_.prototype._getPath=function(){var E=this.attr(),g=E.x,w=E.y,d=E.r||E.radius,y=E.symbol||"circle",m;return I.isFunction(y)?m=y:m=O.default.get(y),m?m(g,w,d):(console.warn(m+" symbol is not exist."),null)},_.symbolsFactory=O.default,_}(P.default);S.default=L},56205:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var p={circle:function(b,I,P){return[["M",b,I],["m",-P,0],["a",P,P,0,1,0,P*2,0],["a",P,P,0,1,0,-P*2,0]]},square:function(b,I,P){return[["M",b-P,I-P],["L",b+P,I-P],["L",b+P,I+P],["L",b-P,I+P],["Z"]]},diamond:function(b,I,P){return[["M",b-P,I],["L",b,I-P],["L",b+P,I],["L",b,I+P],["Z"]]},triangle:function(b,I,P){var O=P*Math.sin(1/3*Math.PI);return[["M",b-P,I+O],["L",b,I-O],["L",b+P,I+O],["z"]]},triangleDown:function(b,I,P){var O=P*Math.sin(1/3*Math.PI);return[["M",b-P,I-O],["L",b+P,I-O],["L",b,I+O],["Z"]]}};S.default={get:function(b){return p[b]},register:function(b,I){p[b]=I},remove:function(b){delete p[b]},getAll:function(){return p}}},49582:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(76789),I=p(49242),P=p(91995),O=p(5666),L=function(A){b.__extends(_,A);function _(){var E=A!==null&&A.apply(this,arguments)||this;return E.type="path",E.canFill=!0,E.canStroke=!0,E}return _.prototype.getDefaultAttrs=function(){var E=A.prototype.getDefaultAttrs.call(this);return b.__assign(b.__assign({},E),{startArrow:!1,endArrow:!1})},_.prototype.createPath=function(E,g){var w=this,d=this.attr(),y=this.get("el");I.each(g||d,function(m,C){if(C==="path"&&I.isArray(m))y.setAttribute("d",w._formatPath(m));else if(C==="startArrow"||C==="endArrow")if(m){var T=I.isObject(m)?E.addArrow(d,P.SVG_ATTR_MAP[C]):E.getDefaultArrow(d,P.SVG_ATTR_MAP[C]);y.setAttribute(P.SVG_ATTR_MAP[C],"url(#"+T+")")}else y.removeAttribute(P.SVG_ATTR_MAP[C]);else P.SVG_ATTR_MAP[C]&&y.setAttribute(P.SVG_ATTR_MAP[C],m)})},_.prototype._formatPath=function(E){var g=E.map(function(w){return w.join(" ")}).join("");return~g.indexOf("NaN")?"":g},_.prototype.getTotalLength=function(){var E=this.get("el");return E?E.getTotalLength():null},_.prototype.getPoint=function(E){var g=this.get("el"),w=this.getTotalLength();if(w===0)return null;var d=g?g.getPointAtLength(E*w):null;return d?{x:d.x,y:d.y}:null},_}(O.default);S.default=L},17498:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(76789),I=p(49242),P=p(91995),O=p(5666),L=function(A){b.__extends(_,A);function _(){var E=A!==null&&A.apply(this,arguments)||this;return E.type="polygon",E.canFill=!0,E.canStroke=!0,E}return _.prototype.createPath=function(E,g){var w=this.attr(),d=this.get("el");I.each(g||w,function(y,m){m==="points"&&I.isArray(y)&&y.length>=2?d.setAttribute("points",y.map(function(C){return C[0]+","+C[1]}).join(" ")):P.SVG_ATTR_MAP[m]&&d.setAttribute(P.SVG_ATTR_MAP[m],y)})},_}(O.default);S.default=L},67478:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(76789),I=p(89838),P=p(89838),O=p(49242),L=p(91995),A=p(5666),_=function(E){b.__extends(g,E);function g(){var w=E!==null&&E.apply(this,arguments)||this;return w.type="polyline",w.canFill=!0,w.canStroke=!0,w}return g.prototype.getDefaultAttrs=function(){var w=E.prototype.getDefaultAttrs.call(this);return b.__assign(b.__assign({},w),{startArrow:!1,endArrow:!1})},g.prototype.onAttrChange=function(w,d,y){E.prototype.onAttrChange.call(this,w,d,y),["points"].indexOf(w)!==-1&&this._resetCache()},g.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},g.prototype.createPath=function(w,d){var y=this.attr(),m=this.get("el");O.each(d||y,function(C,T){T==="points"&&O.isArray(C)&&C.length>=2?m.setAttribute("points",C.map(function(B){return B[0]+","+B[1]}).join(" ")):L.SVG_ATTR_MAP[T]&&m.setAttribute(L.SVG_ATTR_MAP[T],C)})},g.prototype.getTotalLength=function(){var w=this.attr().points,d=this.get("totalLength");return O.isNil(d)?(this.set("totalLength",I.Polyline.length(w)),this.get("totalLength")):d},g.prototype.getPoint=function(w){var d=this.attr().points,y=this.get("tCache");y||(this._setTcache(),y=this.get("tCache"));var m,C;return O.each(y,function(T,B){w>=T[0]&&w<=T[1]&&(m=(w-T[0])/(T[1]-T[0]),C=B)}),P.Line.pointAt(d[C][0],d[C][1],d[C+1][0],d[C+1][1],m)},g.prototype._setTcache=function(){var w=this.attr().points;if(!(!w||w.length===0)){var d=this.getTotalLength();if(!(d<=0)){var y=0,m=[],C,T;O.each(w,function(B,D){w[D+1]&&(C=[],C[0]=y/d,T=P.Line.length(B[0],B[1],w[D+1][0],w[D+1][1]),y+=T,C[1]=y/d,m.push(C))}),this.set("tCache",m)}}},g.prototype.getStartTangent=function(){var w=this.attr().points,d=[];return d.push([w[1][0],w[1][1]]),d.push([w[0][0],w[0][1]]),d},g.prototype.getEndTangent=function(){var w=this.attr().points,d=w.length-1,y=[];return y.push([w[d-1][0],w[d-1][1]]),y.push([w[d][0],w[d][1]]),y},g}(A.default);S.default=_},79705:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(76789),I=p(49242),P=p(5666),O=p(91995),L=p(19544),A=function(_){b.__extends(E,_);function E(){var g=_!==null&&_.apply(this,arguments)||this;return g.type="rect",g.canFill=!0,g.canStroke=!0,g}return E.prototype.getDefaultAttrs=function(){var g=_.prototype.getDefaultAttrs.call(this);return b.__assign(b.__assign({},g),{x:0,y:0,width:0,height:0,radius:0})},E.prototype.createPath=function(g,w){var d=this,y=this.attr(),m=this.get("el"),C=!1,T=["x","y","width","height","radius"];I.each(w||y,function(B,D){T.indexOf(D)!==-1&&!C?(m.setAttribute("d",d._assembleRect(y)),C=!0):T.indexOf(D)===-1&&O.SVG_ATTR_MAP[D]&&m.setAttribute(O.SVG_ATTR_MAP[D],B)})},E.prototype._assembleRect=function(g){var w=g.x,d=g.y,y=g.width,m=g.height,C=g.radius;if(!C)return"M "+w+","+d+" l "+y+",0 l 0,"+m+" l"+-y+" 0 z";var T=L.parseRadius(C);I.isArray(C)?C.length===1?T.r1=T.r2=T.r3=T.r4=C[0]:C.length===2?(T.r1=T.r3=C[0],T.r2=T.r4=C[1]):C.length===3?(T.r1=C[0],T.r2=T.r4=C[1],T.r3=C[2]):(T.r1=C[0],T.r2=C[1],T.r3=C[2],T.r4=C[3]):T.r1=T.r2=T.r3=T.r4=C;var B=[["M "+(w+T.r1)+","+d],["l "+(y-T.r1-T.r2)+",0"],["a "+T.r2+","+T.r2+",0,0,1,"+T.r2+","+T.r2],["l 0,"+(m-T.r2-T.r3)],["a "+T.r3+","+T.r3+",0,0,1,"+-T.r3+","+T.r3],["l "+(T.r3+T.r4-y)+",0"],["a "+T.r4+","+T.r4+",0,0,1,"+-T.r4+","+-T.r4],["l 0,"+(T.r4+T.r1-m)],["a "+T.r1+","+T.r1+",0,0,1,"+T.r1+","+-T.r1],["z"]];return B.join(" ")},E}(P.default);S.default=A},61622:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(76789),I=p(49242),P=p(43631),O=p(84092),L=p(91995),A=p(5666),_=.3,E={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},g={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},w={left:"left",start:"left",center:"middle",right:"end",end:"end"},d=function(y){b.__extends(m,y);function m(){var C=y!==null&&y.apply(this,arguments)||this;return C.type="text",C.canFill=!0,C.canStroke=!0,C}return m.prototype.getDefaultAttrs=function(){var C=y.prototype.getDefaultAttrs.call(this);return b.__assign(b.__assign({},C),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},m.prototype.createPath=function(C,T){var B=this,D=this.attr(),Y=this.get("el");this._setFont(),I.each(T||D,function(K,H){H==="text"?B._setText(""+K):H==="matrix"&&K?O.setTransform(B):L.SVG_ATTR_MAP[H]&&Y.setAttribute(L.SVG_ATTR_MAP[H],K)}),Y.setAttribute("paint-order","stroke"),Y.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},m.prototype._setFont=function(){var C=this.get("el"),T=this.attr(),B=T.textBaseline,D=T.textAlign,Y=P.detect();Y&&Y.name==="firefox"?C.setAttribute("dominant-baseline",g[B]||"alphabetic"):C.setAttribute("alignment-baseline",E[B]||"baseline"),C.setAttribute("text-anchor",w[D]||"left")},m.prototype._setText=function(C){var T=this.get("el"),B=this.attr(),D=B.x,Y=B.textBaseline,K=Y===void 0?"bottom":Y;if(!C)T.innerHTML="";else if(~C.indexOf(`
`)){var H=C.split(`
`),st=H.length-1,pt="";I.each(H,function(ct,Ot){Ot===0?K==="alphabetic"?pt+='<tspan x="'+D+'" dy="'+-st+'em">'+ct+"</tspan>":K==="top"?pt+='<tspan x="'+D+'" dy="0.9em">'+ct+"</tspan>":K==="middle"?pt+='<tspan x="'+D+'" dy="'+-(st-1)/2+'em">'+ct+"</tspan>":K==="bottom"?pt+='<tspan x="'+D+'" dy="-'+(st+_)+'em">'+ct+"</tspan>":K==="hanging"&&(pt+='<tspan x="'+D+'" dy="'+(-(st-1)-_)+'em">'+ct+"</tspan>"):pt+='<tspan x="'+D+'" dy="1em">'+ct+"</tspan>"}),T.innerHTML=pt}else T.innerHTML=C},m}(A.default);S.default=d},84745:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.moveTo=S.sortDom=S.createDom=S.createSVGElement=void 0;var b=p(49242),I=p(91995);function P(_){return document.createElementNS("http://www.w3.org/2000/svg",_)}S.createSVGElement=P;function O(_){var E=I.SHAPE_TO_TAGS[_.type],g=_.getParent();if(!E)throw new Error("the type "+_.type+" is not supported by svg");var w=P(E);if(_.get("id")&&(w.id=_.get("id")),_.set("el",w),_.set("attrs",{}),g){var d=g.get("el");d||(d=g.createDom(),g.set("el",d)),d.appendChild(w)}return w}S.createDom=O;function L(_,E){var g=_.get("el"),w=b.toArray(g.children).sort(E),d=document.createDocumentFragment();w.forEach(function(y){d.appendChild(y)}),g.appendChild(d)}S.sortDom=L;function A(_,E){var g=_.parentNode,w=Array.from(g.childNodes).filter(function(C){return C.nodeType===1&&C.nodeName.toLowerCase()!=="defs"}),d=w[E],y=w.indexOf(_);if(d){if(y>E)g.insertBefore(_,d);else if(y<E){var m=w[E+1];m?g.insertBefore(_,m):g.appendChild(_)}}else g.appendChild(_)}S.moveTo=A},49171:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.refreshElement=S.drawChildren=void 0;var b=p(84092),I=p(84745);function P(L,A){A.forEach(function(_){_.draw(L)})}S.drawChildren=P;function O(L,A){var _=L.get("canvas");if(_&&_.get("autoDraw")){var E=_.get("context"),g=L.getParent(),w=g?g.getChildren():[_],d=L.get("el");if(A==="remove"){var y=L.get("isClipShape");if(y){var m=d&&d.parentNode,C=m&&m.parentNode;m&&C&&C.removeChild(m)}else d&&d.parentNode&&d.parentNode.removeChild(d)}else if(A==="show")d.setAttribute("visibility","visible");else if(A==="hide")d.setAttribute("visibility","hidden");else if(A==="zIndex")I.moveTo(d,w.indexOf(L));else if(A==="sort"){var T=L.get("children");T&&T.length&&I.sortDom(L,function(B,D){return T.indexOf(B)-T.indexOf(D)?1:0})}else A==="clear"?d&&(d.innerHTML=""):A==="matrix"?b.setTransform(L):A==="clip"?b.setClip(L,E):A==="attr"||A==="add"&&L.draw(E)}}S.refreshElement=O},19544:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.parsePath=S.parseRadius=void 0;var b=p(49242),I=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,P=/[^\s,]+/gi;function O(A){var _=0,E=0,g=0,w=0;return b.isArray(A)?A.length===1?_=E=g=w=A[0]:A.length===2?(_=g=A[0],E=w=A[1]):A.length===3?(_=A[0],E=w=A[1],g=A[2]):(_=A[0],E=A[1],g=A[2],w=A[3]):_=E=g=w=A,{r1:_,r2:E,r3:g,r4:w}}S.parseRadius=O;function L(A){if(A=A||[],b.isArray(A))return A;if(b.isString(A))return A=A.match(I),b.each(A,function(_,E){if(_=_.match(P),_[0].length>1){var g=_[0].charAt(0);_.splice(1,0,_[0].substr(1)),_[0]=g}b.each(_,function(w,d){isNaN(w)||(_[d]=+w)}),A[E]=_}),A}S.parsePath=L},84092:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.setClip=S.setTransform=S.setShadow=void 0;var b=p(84745);function I(L,A){var _=L.cfg.el,E=L.attr(),g={dx:E.shadowOffsetX,dy:E.shadowOffsetY,blur:E.shadowBlur,color:E.shadowColor};if(!g.dx&&!g.dy&&!g.blur&&!g.color)_.removeAttribute("filter");else{var w=A.find("filter",g);w||(w=A.addShadow(g)),_.setAttribute("filter","url(#"+w+")")}}S.setShadow=I;function P(L){var A=L.attr().matrix;if(A){for(var _=L.cfg.el,E=[],g=0;g<9;g+=3)E.push(A[g]+","+A[g+1]);E=E.join(","),E.indexOf("NaN")===-1?_.setAttribute("transform","matrix("+E+")"):console.warn("invalid matrix:",A)}}S.setTransform=P;function O(L,A){var _=L.getClip(),E=L.get("el");if(!_)E.removeAttribute("clip-path");else if(_&&!E.hasAttribute("clip-path")){b.createDom(_),_.createPath(A);var g=A.addClip(_);E.setAttribute("clip-path","url(#"+g+")")}}S.setClip=O},76789:function(Ct,S,p){"use strict";p.r(S),p.d(S,{__extends:function(){return I},__assign:function(){return P},__rest:function(){return O},__decorate:function(){return L},__param:function(){return A},__metadata:function(){return _},__awaiter:function(){return E},__generator:function(){return g},__createBinding:function(){return w},__exportStar:function(){return d},__values:function(){return y},__read:function(){return m},__spread:function(){return C},__spreadArrays:function(){return T},__spreadArray:function(){return B},__await:function(){return D},__asyncGenerator:function(){return Y},__asyncDelegator:function(){return K},__asyncValues:function(){return H},__makeTemplateObject:function(){return st},__importStar:function(){return ct},__importDefault:function(){return Ot},__classPrivateFieldGet:function(){return Rt},__classPrivateFieldSet:function(){return Qt},__classPrivateFieldIn:function(){return Gt}});var b=function(Z,nt){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,dt){Q.__proto__=dt}||function(Q,dt){for(var lt in dt)Object.prototype.hasOwnProperty.call(dt,lt)&&(Q[lt]=dt[lt])},b(Z,nt)};function I(Z,nt){if(typeof nt!="function"&&nt!==null)throw new TypeError("Class extends value "+String(nt)+" is not a constructor or null");b(Z,nt);function Q(){this.constructor=Z}Z.prototype=nt===null?Object.create(nt):(Q.prototype=nt.prototype,new Q)}var P=function(){return P=Object.assign||function(nt){for(var Q,dt=1,lt=arguments.length;dt<lt;dt++){Q=arguments[dt];for(var z in Q)Object.prototype.hasOwnProperty.call(Q,z)&&(nt[z]=Q[z])}return nt},P.apply(this,arguments)};function O(Z,nt){var Q={};for(var dt in Z)Object.prototype.hasOwnProperty.call(Z,dt)&&nt.indexOf(dt)<0&&(Q[dt]=Z[dt]);if(Z!=null&&typeof Object.getOwnPropertySymbols=="function")for(var lt=0,dt=Object.getOwnPropertySymbols(Z);lt<dt.length;lt++)nt.indexOf(dt[lt])<0&&Object.prototype.propertyIsEnumerable.call(Z,dt[lt])&&(Q[dt[lt]]=Z[dt[lt]]);return Q}function L(Z,nt,Q,dt){var lt=arguments.length,z=lt<3?nt:dt===null?dt=Object.getOwnPropertyDescriptor(nt,Q):dt,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")z=Reflect.decorate(Z,nt,Q,dt);else for(var j=Z.length-1;j>=0;j--)($=Z[j])&&(z=(lt<3?$(z):lt>3?$(nt,Q,z):$(nt,Q))||z);return lt>3&&z&&Object.defineProperty(nt,Q,z),z}function A(Z,nt){return function(Q,dt){nt(Q,dt,Z)}}function _(Z,nt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(Z,nt)}function E(Z,nt,Q,dt){function lt(z){return z instanceof Q?z:new Q(function($){$(z)})}return new(Q||(Q=Promise))(function(z,$){function j(_t){try{yt(dt.next(_t))}catch(jt){$(jt)}}function f(_t){try{yt(dt.throw(_t))}catch(jt){$(jt)}}function yt(_t){_t.done?z(_t.value):lt(_t.value).then(j,f)}yt((dt=dt.apply(Z,nt||[])).next())})}function g(Z,nt){var Q={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},dt,lt,z,$;return $={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&($[Symbol.iterator]=function(){return this}),$;function j(yt){return function(_t){return f([yt,_t])}}function f(yt){if(dt)throw new TypeError("Generator is already executing.");for(;Q;)try{if(dt=1,lt&&(z=yt[0]&2?lt.return:yt[0]?lt.throw||((z=lt.return)&&z.call(lt),0):lt.next)&&!(z=z.call(lt,yt[1])).done)return z;switch(lt=0,z&&(yt=[yt[0]&2,z.value]),yt[0]){case 0:case 1:z=yt;break;case 4:return Q.label++,{value:yt[1],done:!1};case 5:Q.label++,lt=yt[1],yt=[0];continue;case 7:yt=Q.ops.pop(),Q.trys.pop();continue;default:if(z=Q.trys,!(z=z.length>0&&z[z.length-1])&&(yt[0]===6||yt[0]===2)){Q=0;continue}if(yt[0]===3&&(!z||yt[1]>z[0]&&yt[1]<z[3])){Q.label=yt[1];break}if(yt[0]===6&&Q.label<z[1]){Q.label=z[1],z=yt;break}if(z&&Q.label<z[2]){Q.label=z[2],Q.ops.push(yt);break}z[2]&&Q.ops.pop(),Q.trys.pop();continue}yt=nt.call(Z,Q)}catch(_t){yt=[6,_t],lt=0}finally{dt=z=0}if(yt[0]&5)throw yt[1];return{value:yt[0]?yt[1]:void 0,done:!0}}}var w=Object.create?function(Z,nt,Q,dt){dt===void 0&&(dt=Q);var lt=Object.getOwnPropertyDescriptor(nt,Q);(!lt||("get"in lt?!nt.__esModule:lt.writable||lt.configurable))&&(lt={enumerable:!0,get:function(){return nt[Q]}}),Object.defineProperty(Z,dt,lt)}:function(Z,nt,Q,dt){dt===void 0&&(dt=Q),Z[dt]=nt[Q]};function d(Z,nt){for(var Q in Z)Q!=="default"&&!Object.prototype.hasOwnProperty.call(nt,Q)&&w(nt,Z,Q)}function y(Z){var nt=typeof Symbol=="function"&&Symbol.iterator,Q=nt&&Z[nt],dt=0;if(Q)return Q.call(Z);if(Z&&typeof Z.length=="number")return{next:function(){return Z&&dt>=Z.length&&(Z=void 0),{value:Z&&Z[dt++],done:!Z}}};throw new TypeError(nt?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(Z,nt){var Q=typeof Symbol=="function"&&Z[Symbol.iterator];if(!Q)return Z;var dt=Q.call(Z),lt,z=[],$;try{for(;(nt===void 0||nt-- >0)&&!(lt=dt.next()).done;)z.push(lt.value)}catch(j){$={error:j}}finally{try{lt&&!lt.done&&(Q=dt.return)&&Q.call(dt)}finally{if($)throw $.error}}return z}function C(){for(var Z=[],nt=0;nt<arguments.length;nt++)Z=Z.concat(m(arguments[nt]));return Z}function T(){for(var Z=0,nt=0,Q=arguments.length;nt<Q;nt++)Z+=arguments[nt].length;for(var dt=Array(Z),lt=0,nt=0;nt<Q;nt++)for(var z=arguments[nt],$=0,j=z.length;$<j;$++,lt++)dt[lt]=z[$];return dt}function B(Z,nt,Q){if(Q||arguments.length===2)for(var dt=0,lt=nt.length,z;dt<lt;dt++)(z||!(dt in nt))&&(z||(z=Array.prototype.slice.call(nt,0,dt)),z[dt]=nt[dt]);return Z.concat(z||Array.prototype.slice.call(nt))}function D(Z){return this instanceof D?(this.v=Z,this):new D(Z)}function Y(Z,nt,Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var dt=Q.apply(Z,nt||[]),lt,z=[];return lt={},$("next"),$("throw"),$("return"),lt[Symbol.asyncIterator]=function(){return this},lt;function $(qt){dt[qt]&&(lt[qt]=function(Vt){return new Promise(function(re,ae){z.push([qt,Vt,re,ae])>1||j(qt,Vt)})})}function j(qt,Vt){try{f(dt[qt](Vt))}catch(re){jt(z[0][3],re)}}function f(qt){qt.value instanceof D?Promise.resolve(qt.value.v).then(yt,_t):jt(z[0][2],qt)}function yt(qt){j("next",qt)}function _t(qt){j("throw",qt)}function jt(qt,Vt){qt(Vt),z.shift(),z.length&&j(z[0][0],z[0][1])}}function K(Z){var nt,Q;return nt={},dt("next"),dt("throw",function(lt){throw lt}),dt("return"),nt[Symbol.iterator]=function(){return this},nt;function dt(lt,z){nt[lt]=Z[lt]?function($){return(Q=!Q)?{value:D(Z[lt]($)),done:lt==="return"}:z?z($):$}:z}}function H(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var nt=Z[Symbol.asyncIterator],Q;return nt?nt.call(Z):(Z=typeof y=="function"?y(Z):Z[Symbol.iterator](),Q={},dt("next"),dt("throw"),dt("return"),Q[Symbol.asyncIterator]=function(){return this},Q);function dt(z){Q[z]=Z[z]&&function($){return new Promise(function(j,f){$=Z[z]($),lt(j,f,$.done,$.value)})}}function lt(z,$,j,f){Promise.resolve(f).then(function(yt){z({value:yt,done:j})},$)}}function st(Z,nt){return Object.defineProperty?Object.defineProperty(Z,"raw",{value:nt}):Z.raw=nt,Z}var pt=Object.create?function(Z,nt){Object.defineProperty(Z,"default",{enumerable:!0,value:nt})}:function(Z,nt){Z.default=nt};function ct(Z){if(Z&&Z.__esModule)return Z;var nt={};if(Z!=null)for(var Q in Z)Q!=="default"&&Object.prototype.hasOwnProperty.call(Z,Q)&&w(nt,Z,Q);return pt(nt,Z),nt}function Ot(Z){return Z&&Z.__esModule?Z:{default:Z}}function Rt(Z,nt,Q,dt){if(Q==="a"&&!dt)throw new TypeError("Private accessor was defined without a getter");if(typeof nt=="function"?Z!==nt||!dt:!nt.has(Z))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Q==="m"?dt:Q==="a"?dt.call(Z):dt?dt.value:nt.get(Z)}function Qt(Z,nt,Q,dt,lt){if(dt==="m")throw new TypeError("Private method is not writable");if(dt==="a"&&!lt)throw new TypeError("Private accessor was defined without a setter");if(typeof nt=="function"?Z!==nt||!lt:!nt.has(Z))throw new TypeError("Cannot write private member to an object whose class did not declare it");return dt==="a"?lt.call(Z,Q):lt?lt.value=Q:nt.set(Z,Q),Q}function Gt(Z,nt){if(nt===null||typeof nt!="object"&&typeof nt!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof Z=="function"?nt===Z:Z.has(nt)}},27549:function(Ct,S,p){"use strict";var b;b={value:!0};var I=p(7802);S.wO=I.default;var P=p(89193);b=P.default;var O=p(98543);b=O.default;var L=p(34532);S.vs=L.default},7802:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(31502);b.translate=function(I,P,O){var L=new Array(9);return b.fromTranslation(L,O),b.multiply(I,L,P)},b.rotate=function(I,P,O){var L=new Array(9);return b.fromRotation(L,O),b.multiply(I,L,P)},b.scale=function(I,P,O){var L=new Array(9);return b.fromScaling(L,O),b.multiply(I,L,P)},b.transform=function(I,P){for(var O=[].concat(I),L=0,A=P.length;L<A;L++){var _=P[L];switch(_[0]){case"t":b.translate(O,O,[_[1],_[2]]);break;case"s":b.scale(O,O,[_[1],_[2]]);break;case"r":b.rotate(O,O,_[1]);break;default:break}}return O},S.default=b},34532:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(49242),I=p(7802);S.default=function(P,O){var L=P?b.clone(P):[1,0,0,0,1,0,0,0,1];return b.each(O,function(A){switch(A[0]){case"t":I.default.translate(L,L,[A[1],A[2]]);break;case"s":I.default.scale(L,L,[A[1],A[2]]);break;case"r":I.default.rotate(L,L,A[1]);break;case"m":I.default.multiply(L,L,A[1]);break;default:return!1}}),L}},89193:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(76172),I=p(49242);b.angle=function(P,O){var L=b.dot(P,O)/(b.length(P)*b.length(O));return Math.acos(I.clamp(L,-1,1))},b.direction=function(P,O){return P[0]*O[1]-O[0]*P[1]},b.angleTo=function(P,O,L){var A=b.angle(P,O),_=b.direction(P,O)>=0;return L?_?Math.PI*2-A:A:_?A:Math.PI*2-A},b.vertical=function(P,O,L){return L?(P[0]=O[1],P[1]=-1*O[0]):(P[0]=-1*O[1],P[1]=O[0]),P},S.default=b},98543:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(88395);S.default=b},74988:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.setMatrixArrayType=P,S.toRadian=L,S.equals=A;var p=S.EPSILON=1e-6,b=S.ARRAY_TYPE=typeof Float32Array!="undefined"?Float32Array:Array,I=S.RANDOM=Math.random;function P(_){S.ARRAY_TYPE=b=_}var O=Math.PI/180;function L(_){return _*O}function A(_,E){return Math.abs(_-E)<=p*Math.max(1,Math.abs(_),Math.abs(E))}},31502:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.sub=S.mul=void 0,S.create=O,S.fromMat4=L,S.clone=A,S.copy=_,S.fromValues=E,S.set=g,S.identity=w,S.transpose=d,S.invert=y,S.adjoint=m,S.determinant=C,S.multiply=T,S.translate=B,S.rotate=D,S.scale=Y,S.fromTranslation=K,S.fromRotation=H,S.fromScaling=st,S.fromMat2d=pt,S.fromQuat=ct,S.normalFromMat4=Ot,S.projection=Rt,S.str=Qt,S.frob=Gt,S.add=Z,S.subtract=nt,S.multiplyScalar=Q,S.multiplyScalarAndAdd=dt,S.exactEquals=lt,S.equals=z;var b=p(74988),I=P(b);function P(f){if(f&&f.__esModule)return f;var yt={};if(f!=null)for(var _t in f)Object.prototype.hasOwnProperty.call(f,_t)&&(yt[_t]=f[_t]);return yt.default=f,yt}function O(){var f=new I.ARRAY_TYPE(9);return I.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[5]=0,f[6]=0,f[7]=0),f[0]=1,f[4]=1,f[8]=1,f}function L(f,yt){return f[0]=yt[0],f[1]=yt[1],f[2]=yt[2],f[3]=yt[4],f[4]=yt[5],f[5]=yt[6],f[6]=yt[8],f[7]=yt[9],f[8]=yt[10],f}function A(f){var yt=new I.ARRAY_TYPE(9);return yt[0]=f[0],yt[1]=f[1],yt[2]=f[2],yt[3]=f[3],yt[4]=f[4],yt[5]=f[5],yt[6]=f[6],yt[7]=f[7],yt[8]=f[8],yt}function _(f,yt){return f[0]=yt[0],f[1]=yt[1],f[2]=yt[2],f[3]=yt[3],f[4]=yt[4],f[5]=yt[5],f[6]=yt[6],f[7]=yt[7],f[8]=yt[8],f}function E(f,yt,_t,jt,qt,Vt,re,ae,Nt){var Lt=new I.ARRAY_TYPE(9);return Lt[0]=f,Lt[1]=yt,Lt[2]=_t,Lt[3]=jt,Lt[4]=qt,Lt[5]=Vt,Lt[6]=re,Lt[7]=ae,Lt[8]=Nt,Lt}function g(f,yt,_t,jt,qt,Vt,re,ae,Nt,Lt){return f[0]=yt,f[1]=_t,f[2]=jt,f[3]=qt,f[4]=Vt,f[5]=re,f[6]=ae,f[7]=Nt,f[8]=Lt,f}function w(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=1,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f}function d(f,yt){if(f===yt){var _t=yt[1],jt=yt[2],qt=yt[5];f[1]=yt[3],f[2]=yt[6],f[3]=_t,f[5]=yt[7],f[6]=jt,f[7]=qt}else f[0]=yt[0],f[1]=yt[3],f[2]=yt[6],f[3]=yt[1],f[4]=yt[4],f[5]=yt[7],f[6]=yt[2],f[7]=yt[5],f[8]=yt[8];return f}function y(f,yt){var _t=yt[0],jt=yt[1],qt=yt[2],Vt=yt[3],re=yt[4],ae=yt[5],Nt=yt[6],Lt=yt[7],bt=yt[8],at=bt*re-ae*Lt,rt=-bt*Vt+ae*Nt,vt=Lt*Vt-re*Nt,tt=_t*at+jt*rt+qt*vt;return tt?(tt=1/tt,f[0]=at*tt,f[1]=(-bt*jt+qt*Lt)*tt,f[2]=(ae*jt-qt*re)*tt,f[3]=rt*tt,f[4]=(bt*_t-qt*Nt)*tt,f[5]=(-ae*_t+qt*Vt)*tt,f[6]=vt*tt,f[7]=(-Lt*_t+jt*Nt)*tt,f[8]=(re*_t-jt*Vt)*tt,f):null}function m(f,yt){var _t=yt[0],jt=yt[1],qt=yt[2],Vt=yt[3],re=yt[4],ae=yt[5],Nt=yt[6],Lt=yt[7],bt=yt[8];return f[0]=re*bt-ae*Lt,f[1]=qt*Lt-jt*bt,f[2]=jt*ae-qt*re,f[3]=ae*Nt-Vt*bt,f[4]=_t*bt-qt*Nt,f[5]=qt*Vt-_t*ae,f[6]=Vt*Lt-re*Nt,f[7]=jt*Nt-_t*Lt,f[8]=_t*re-jt*Vt,f}function C(f){var yt=f[0],_t=f[1],jt=f[2],qt=f[3],Vt=f[4],re=f[5],ae=f[6],Nt=f[7],Lt=f[8];return yt*(Lt*Vt-re*Nt)+_t*(-Lt*qt+re*ae)+jt*(Nt*qt-Vt*ae)}function T(f,yt,_t){var jt=yt[0],qt=yt[1],Vt=yt[2],re=yt[3],ae=yt[4],Nt=yt[5],Lt=yt[6],bt=yt[7],at=yt[8],rt=_t[0],vt=_t[1],tt=_t[2],q=_t[3],Et=_t[4],It=_t[5],Kt=_t[6],ue=_t[7],we=_t[8];return f[0]=rt*jt+vt*re+tt*Lt,f[1]=rt*qt+vt*ae+tt*bt,f[2]=rt*Vt+vt*Nt+tt*at,f[3]=q*jt+Et*re+It*Lt,f[4]=q*qt+Et*ae+It*bt,f[5]=q*Vt+Et*Nt+It*at,f[6]=Kt*jt+ue*re+we*Lt,f[7]=Kt*qt+ue*ae+we*bt,f[8]=Kt*Vt+ue*Nt+we*at,f}function B(f,yt,_t){var jt=yt[0],qt=yt[1],Vt=yt[2],re=yt[3],ae=yt[4],Nt=yt[5],Lt=yt[6],bt=yt[7],at=yt[8],rt=_t[0],vt=_t[1];return f[0]=jt,f[1]=qt,f[2]=Vt,f[3]=re,f[4]=ae,f[5]=Nt,f[6]=rt*jt+vt*re+Lt,f[7]=rt*qt+vt*ae+bt,f[8]=rt*Vt+vt*Nt+at,f}function D(f,yt,_t){var jt=yt[0],qt=yt[1],Vt=yt[2],re=yt[3],ae=yt[4],Nt=yt[5],Lt=yt[6],bt=yt[7],at=yt[8],rt=Math.sin(_t),vt=Math.cos(_t);return f[0]=vt*jt+rt*re,f[1]=vt*qt+rt*ae,f[2]=vt*Vt+rt*Nt,f[3]=vt*re-rt*jt,f[4]=vt*ae-rt*qt,f[5]=vt*Nt-rt*Vt,f[6]=Lt,f[7]=bt,f[8]=at,f}function Y(f,yt,_t){var jt=_t[0],qt=_t[1];return f[0]=jt*yt[0],f[1]=jt*yt[1],f[2]=jt*yt[2],f[3]=qt*yt[3],f[4]=qt*yt[4],f[5]=qt*yt[5],f[6]=yt[6],f[7]=yt[7],f[8]=yt[8],f}function K(f,yt){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=1,f[5]=0,f[6]=yt[0],f[7]=yt[1],f[8]=1,f}function H(f,yt){var _t=Math.sin(yt),jt=Math.cos(yt);return f[0]=jt,f[1]=_t,f[2]=0,f[3]=-_t,f[4]=jt,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f}function st(f,yt){return f[0]=yt[0],f[1]=0,f[2]=0,f[3]=0,f[4]=yt[1],f[5]=0,f[6]=0,f[7]=0,f[8]=1,f}function pt(f,yt){return f[0]=yt[0],f[1]=yt[1],f[2]=0,f[3]=yt[2],f[4]=yt[3],f[5]=0,f[6]=yt[4],f[7]=yt[5],f[8]=1,f}function ct(f,yt){var _t=yt[0],jt=yt[1],qt=yt[2],Vt=yt[3],re=_t+_t,ae=jt+jt,Nt=qt+qt,Lt=_t*re,bt=jt*re,at=jt*ae,rt=qt*re,vt=qt*ae,tt=qt*Nt,q=Vt*re,Et=Vt*ae,It=Vt*Nt;return f[0]=1-at-tt,f[3]=bt-It,f[6]=rt+Et,f[1]=bt+It,f[4]=1-Lt-tt,f[7]=vt-q,f[2]=rt-Et,f[5]=vt+q,f[8]=1-Lt-at,f}function Ot(f,yt){var _t=yt[0],jt=yt[1],qt=yt[2],Vt=yt[3],re=yt[4],ae=yt[5],Nt=yt[6],Lt=yt[7],bt=yt[8],at=yt[9],rt=yt[10],vt=yt[11],tt=yt[12],q=yt[13],Et=yt[14],It=yt[15],Kt=_t*ae-jt*re,ue=_t*Nt-qt*re,we=_t*Lt-Vt*re,Ye=jt*Nt-qt*ae,te=jt*Lt-Vt*ae,pe=qt*Lt-Vt*Nt,Te=bt*q-at*tt,ze=bt*Et-rt*tt,ur=bt*It-vt*tt,Ze=at*Et-rt*q,pr=at*It-vt*q,Pr=rt*It-vt*Et,Or=Kt*Pr-ue*pr+we*Ze+Ye*ur-te*ze+pe*Te;return Or?(Or=1/Or,f[0]=(ae*Pr-Nt*pr+Lt*Ze)*Or,f[1]=(Nt*ur-re*Pr-Lt*ze)*Or,f[2]=(re*pr-ae*ur+Lt*Te)*Or,f[3]=(qt*pr-jt*Pr-Vt*Ze)*Or,f[4]=(_t*Pr-qt*ur+Vt*ze)*Or,f[5]=(jt*ur-_t*pr-Vt*Te)*Or,f[6]=(q*pe-Et*te+It*Ye)*Or,f[7]=(Et*we-tt*pe-It*ue)*Or,f[8]=(tt*te-q*we+It*Kt)*Or,f):null}function Rt(f,yt,_t){return f[0]=2/yt,f[1]=0,f[2]=0,f[3]=0,f[4]=-2/_t,f[5]=0,f[6]=-1,f[7]=1,f[8]=1,f}function Qt(f){return"mat3("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+", "+f[4]+", "+f[5]+", "+f[6]+", "+f[7]+", "+f[8]+")"}function Gt(f){return Math.sqrt(Math.pow(f[0],2)+Math.pow(f[1],2)+Math.pow(f[2],2)+Math.pow(f[3],2)+Math.pow(f[4],2)+Math.pow(f[5],2)+Math.pow(f[6],2)+Math.pow(f[7],2)+Math.pow(f[8],2))}function Z(f,yt,_t){return f[0]=yt[0]+_t[0],f[1]=yt[1]+_t[1],f[2]=yt[2]+_t[2],f[3]=yt[3]+_t[3],f[4]=yt[4]+_t[4],f[5]=yt[5]+_t[5],f[6]=yt[6]+_t[6],f[7]=yt[7]+_t[7],f[8]=yt[8]+_t[8],f}function nt(f,yt,_t){return f[0]=yt[0]-_t[0],f[1]=yt[1]-_t[1],f[2]=yt[2]-_t[2],f[3]=yt[3]-_t[3],f[4]=yt[4]-_t[4],f[5]=yt[5]-_t[5],f[6]=yt[6]-_t[6],f[7]=yt[7]-_t[7],f[8]=yt[8]-_t[8],f}function Q(f,yt,_t){return f[0]=yt[0]*_t,f[1]=yt[1]*_t,f[2]=yt[2]*_t,f[3]=yt[3]*_t,f[4]=yt[4]*_t,f[5]=yt[5]*_t,f[6]=yt[6]*_t,f[7]=yt[7]*_t,f[8]=yt[8]*_t,f}function dt(f,yt,_t,jt){return f[0]=yt[0]+_t[0]*jt,f[1]=yt[1]+_t[1]*jt,f[2]=yt[2]+_t[2]*jt,f[3]=yt[3]+_t[3]*jt,f[4]=yt[4]+_t[4]*jt,f[5]=yt[5]+_t[5]*jt,f[6]=yt[6]+_t[6]*jt,f[7]=yt[7]+_t[7]*jt,f[8]=yt[8]+_t[8]*jt,f}function lt(f,yt){return f[0]===yt[0]&&f[1]===yt[1]&&f[2]===yt[2]&&f[3]===yt[3]&&f[4]===yt[4]&&f[5]===yt[5]&&f[6]===yt[6]&&f[7]===yt[7]&&f[8]===yt[8]}function z(f,yt){var _t=f[0],jt=f[1],qt=f[2],Vt=f[3],re=f[4],ae=f[5],Nt=f[6],Lt=f[7],bt=f[8],at=yt[0],rt=yt[1],vt=yt[2],tt=yt[3],q=yt[4],Et=yt[5],It=yt[6],Kt=yt[7],ue=yt[8];return Math.abs(_t-at)<=I.EPSILON*Math.max(1,Math.abs(_t),Math.abs(at))&&Math.abs(jt-rt)<=I.EPSILON*Math.max(1,Math.abs(jt),Math.abs(rt))&&Math.abs(qt-vt)<=I.EPSILON*Math.max(1,Math.abs(qt),Math.abs(vt))&&Math.abs(Vt-tt)<=I.EPSILON*Math.max(1,Math.abs(Vt),Math.abs(tt))&&Math.abs(re-q)<=I.EPSILON*Math.max(1,Math.abs(re),Math.abs(q))&&Math.abs(ae-Et)<=I.EPSILON*Math.max(1,Math.abs(ae),Math.abs(Et))&&Math.abs(Nt-It)<=I.EPSILON*Math.max(1,Math.abs(Nt),Math.abs(It))&&Math.abs(Lt-Kt)<=I.EPSILON*Math.max(1,Math.abs(Lt),Math.abs(Kt))&&Math.abs(bt-ue)<=I.EPSILON*Math.max(1,Math.abs(bt),Math.abs(ue))}var $=S.mul=T,j=S.sub=nt},76172:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.forEach=S.sqrLen=S.sqrDist=S.dist=S.div=S.mul=S.sub=S.len=void 0,S.create=O,S.clone=L,S.fromValues=A,S.copy=_,S.set=E,S.add=g,S.subtract=w,S.multiply=d,S.divide=y,S.ceil=m,S.floor=C,S.min=T,S.max=B,S.round=D,S.scale=Y,S.scaleAndAdd=K,S.distance=H,S.squaredDistance=st,S.length=pt,S.squaredLength=ct,S.negate=Ot,S.inverse=Rt,S.normalize=Qt,S.dot=Gt,S.cross=Z,S.lerp=nt,S.random=Q,S.transformMat2=dt,S.transformMat2d=lt,S.transformMat3=z,S.transformMat4=$,S.rotate=j,S.angle=f,S.str=yt,S.exactEquals=_t,S.equals=jt;var b=p(74988),I=P(b);function P(rt){if(rt&&rt.__esModule)return rt;var vt={};if(rt!=null)for(var tt in rt)Object.prototype.hasOwnProperty.call(rt,tt)&&(vt[tt]=rt[tt]);return vt.default=rt,vt}function O(){var rt=new I.ARRAY_TYPE(2);return I.ARRAY_TYPE!=Float32Array&&(rt[0]=0,rt[1]=0),rt}function L(rt){var vt=new I.ARRAY_TYPE(2);return vt[0]=rt[0],vt[1]=rt[1],vt}function A(rt,vt){var tt=new I.ARRAY_TYPE(2);return tt[0]=rt,tt[1]=vt,tt}function _(rt,vt){return rt[0]=vt[0],rt[1]=vt[1],rt}function E(rt,vt,tt){return rt[0]=vt,rt[1]=tt,rt}function g(rt,vt,tt){return rt[0]=vt[0]+tt[0],rt[1]=vt[1]+tt[1],rt}function w(rt,vt,tt){return rt[0]=vt[0]-tt[0],rt[1]=vt[1]-tt[1],rt}function d(rt,vt,tt){return rt[0]=vt[0]*tt[0],rt[1]=vt[1]*tt[1],rt}function y(rt,vt,tt){return rt[0]=vt[0]/tt[0],rt[1]=vt[1]/tt[1],rt}function m(rt,vt){return rt[0]=Math.ceil(vt[0]),rt[1]=Math.ceil(vt[1]),rt}function C(rt,vt){return rt[0]=Math.floor(vt[0]),rt[1]=Math.floor(vt[1]),rt}function T(rt,vt,tt){return rt[0]=Math.min(vt[0],tt[0]),rt[1]=Math.min(vt[1],tt[1]),rt}function B(rt,vt,tt){return rt[0]=Math.max(vt[0],tt[0]),rt[1]=Math.max(vt[1],tt[1]),rt}function D(rt,vt){return rt[0]=Math.round(vt[0]),rt[1]=Math.round(vt[1]),rt}function Y(rt,vt,tt){return rt[0]=vt[0]*tt,rt[1]=vt[1]*tt,rt}function K(rt,vt,tt,q){return rt[0]=vt[0]+tt[0]*q,rt[1]=vt[1]+tt[1]*q,rt}function H(rt,vt){var tt=vt[0]-rt[0],q=vt[1]-rt[1];return Math.sqrt(tt*tt+q*q)}function st(rt,vt){var tt=vt[0]-rt[0],q=vt[1]-rt[1];return tt*tt+q*q}function pt(rt){var vt=rt[0],tt=rt[1];return Math.sqrt(vt*vt+tt*tt)}function ct(rt){var vt=rt[0],tt=rt[1];return vt*vt+tt*tt}function Ot(rt,vt){return rt[0]=-vt[0],rt[1]=-vt[1],rt}function Rt(rt,vt){return rt[0]=1/vt[0],rt[1]=1/vt[1],rt}function Qt(rt,vt){var tt=vt[0],q=vt[1],Et=tt*tt+q*q;return Et>0&&(Et=1/Math.sqrt(Et),rt[0]=vt[0]*Et,rt[1]=vt[1]*Et),rt}function Gt(rt,vt){return rt[0]*vt[0]+rt[1]*vt[1]}function Z(rt,vt,tt){var q=vt[0]*tt[1]-vt[1]*tt[0];return rt[0]=rt[1]=0,rt[2]=q,rt}function nt(rt,vt,tt,q){var Et=vt[0],It=vt[1];return rt[0]=Et+q*(tt[0]-Et),rt[1]=It+q*(tt[1]-It),rt}function Q(rt,vt){vt=vt||1;var tt=I.RANDOM()*2*Math.PI;return rt[0]=Math.cos(tt)*vt,rt[1]=Math.sin(tt)*vt,rt}function dt(rt,vt,tt){var q=vt[0],Et=vt[1];return rt[0]=tt[0]*q+tt[2]*Et,rt[1]=tt[1]*q+tt[3]*Et,rt}function lt(rt,vt,tt){var q=vt[0],Et=vt[1];return rt[0]=tt[0]*q+tt[2]*Et+tt[4],rt[1]=tt[1]*q+tt[3]*Et+tt[5],rt}function z(rt,vt,tt){var q=vt[0],Et=vt[1];return rt[0]=tt[0]*q+tt[3]*Et+tt[6],rt[1]=tt[1]*q+tt[4]*Et+tt[7],rt}function $(rt,vt,tt){var q=vt[0],Et=vt[1];return rt[0]=tt[0]*q+tt[4]*Et+tt[12],rt[1]=tt[1]*q+tt[5]*Et+tt[13],rt}function j(rt,vt,tt,q){var Et=vt[0]-tt[0],It=vt[1]-tt[1],Kt=Math.sin(q),ue=Math.cos(q);return rt[0]=Et*ue-It*Kt+tt[0],rt[1]=Et*Kt+It*ue+tt[1],rt}function f(rt,vt){var tt=rt[0],q=rt[1],Et=vt[0],It=vt[1],Kt=tt*tt+q*q;Kt>0&&(Kt=1/Math.sqrt(Kt));var ue=Et*Et+It*It;ue>0&&(ue=1/Math.sqrt(ue));var we=(tt*Et+q*It)*Kt*ue;return we>1?0:we<-1?Math.PI:Math.acos(we)}function yt(rt){return"vec2("+rt[0]+", "+rt[1]+")"}function _t(rt,vt){return rt[0]===vt[0]&&rt[1]===vt[1]}function jt(rt,vt){var tt=rt[0],q=rt[1],Et=vt[0],It=vt[1];return Math.abs(tt-Et)<=I.EPSILON*Math.max(1,Math.abs(tt),Math.abs(Et))&&Math.abs(q-It)<=I.EPSILON*Math.max(1,Math.abs(q),Math.abs(It))}var qt=S.len=pt,Vt=S.sub=w,re=S.mul=d,ae=S.div=y,Nt=S.dist=H,Lt=S.sqrDist=st,bt=S.sqrLen=ct,at=S.forEach=function(){var rt=O();return function(vt,tt,q,Et,It,Kt){var ue=void 0,we=void 0;for(tt||(tt=2),q||(q=0),Et?we=Math.min(Et*tt+q,vt.length):we=vt.length,ue=q;ue<we;ue+=tt)rt[0]=vt[ue],rt[1]=vt[ue+1],It(rt,rt,Kt),vt[ue]=rt[0],vt[ue+1]=rt[1];return vt}}()},88395:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.forEach=S.sqrLen=S.len=S.sqrDist=S.dist=S.div=S.mul=S.sub=void 0,S.create=O,S.clone=L,S.length=A,S.fromValues=_,S.copy=E,S.set=g,S.add=w,S.subtract=d,S.multiply=y,S.divide=m,S.ceil=C,S.floor=T,S.min=B,S.max=D,S.round=Y,S.scale=K,S.scaleAndAdd=H,S.distance=st,S.squaredDistance=pt,S.squaredLength=ct,S.negate=Ot,S.inverse=Rt,S.normalize=Qt,S.dot=Gt,S.cross=Z,S.lerp=nt,S.hermite=Q,S.bezier=dt,S.random=lt,S.transformMat4=z,S.transformMat3=$,S.transformQuat=j,S.rotateX=f,S.rotateY=yt,S.rotateZ=_t,S.angle=jt,S.str=qt,S.exactEquals=Vt,S.equals=re;var b=p(74988),I=P(b);function P(q){if(q&&q.__esModule)return q;var Et={};if(q!=null)for(var It in q)Object.prototype.hasOwnProperty.call(q,It)&&(Et[It]=q[It]);return Et.default=q,Et}function O(){var q=new I.ARRAY_TYPE(3);return I.ARRAY_TYPE!=Float32Array&&(q[0]=0,q[1]=0,q[2]=0),q}function L(q){var Et=new I.ARRAY_TYPE(3);return Et[0]=q[0],Et[1]=q[1],Et[2]=q[2],Et}function A(q){var Et=q[0],It=q[1],Kt=q[2];return Math.sqrt(Et*Et+It*It+Kt*Kt)}function _(q,Et,It){var Kt=new I.ARRAY_TYPE(3);return Kt[0]=q,Kt[1]=Et,Kt[2]=It,Kt}function E(q,Et){return q[0]=Et[0],q[1]=Et[1],q[2]=Et[2],q}function g(q,Et,It,Kt){return q[0]=Et,q[1]=It,q[2]=Kt,q}function w(q,Et,It){return q[0]=Et[0]+It[0],q[1]=Et[1]+It[1],q[2]=Et[2]+It[2],q}function d(q,Et,It){return q[0]=Et[0]-It[0],q[1]=Et[1]-It[1],q[2]=Et[2]-It[2],q}function y(q,Et,It){return q[0]=Et[0]*It[0],q[1]=Et[1]*It[1],q[2]=Et[2]*It[2],q}function m(q,Et,It){return q[0]=Et[0]/It[0],q[1]=Et[1]/It[1],q[2]=Et[2]/It[2],q}function C(q,Et){return q[0]=Math.ceil(Et[0]),q[1]=Math.ceil(Et[1]),q[2]=Math.ceil(Et[2]),q}function T(q,Et){return q[0]=Math.floor(Et[0]),q[1]=Math.floor(Et[1]),q[2]=Math.floor(Et[2]),q}function B(q,Et,It){return q[0]=Math.min(Et[0],It[0]),q[1]=Math.min(Et[1],It[1]),q[2]=Math.min(Et[2],It[2]),q}function D(q,Et,It){return q[0]=Math.max(Et[0],It[0]),q[1]=Math.max(Et[1],It[1]),q[2]=Math.max(Et[2],It[2]),q}function Y(q,Et){return q[0]=Math.round(Et[0]),q[1]=Math.round(Et[1]),q[2]=Math.round(Et[2]),q}function K(q,Et,It){return q[0]=Et[0]*It,q[1]=Et[1]*It,q[2]=Et[2]*It,q}function H(q,Et,It,Kt){return q[0]=Et[0]+It[0]*Kt,q[1]=Et[1]+It[1]*Kt,q[2]=Et[2]+It[2]*Kt,q}function st(q,Et){var It=Et[0]-q[0],Kt=Et[1]-q[1],ue=Et[2]-q[2];return Math.sqrt(It*It+Kt*Kt+ue*ue)}function pt(q,Et){var It=Et[0]-q[0],Kt=Et[1]-q[1],ue=Et[2]-q[2];return It*It+Kt*Kt+ue*ue}function ct(q){var Et=q[0],It=q[1],Kt=q[2];return Et*Et+It*It+Kt*Kt}function Ot(q,Et){return q[0]=-Et[0],q[1]=-Et[1],q[2]=-Et[2],q}function Rt(q,Et){return q[0]=1/Et[0],q[1]=1/Et[1],q[2]=1/Et[2],q}function Qt(q,Et){var It=Et[0],Kt=Et[1],ue=Et[2],we=It*It+Kt*Kt+ue*ue;return we>0&&(we=1/Math.sqrt(we),q[0]=Et[0]*we,q[1]=Et[1]*we,q[2]=Et[2]*we),q}function Gt(q,Et){return q[0]*Et[0]+q[1]*Et[1]+q[2]*Et[2]}function Z(q,Et,It){var Kt=Et[0],ue=Et[1],we=Et[2],Ye=It[0],te=It[1],pe=It[2];return q[0]=ue*pe-we*te,q[1]=we*Ye-Kt*pe,q[2]=Kt*te-ue*Ye,q}function nt(q,Et,It,Kt){var ue=Et[0],we=Et[1],Ye=Et[2];return q[0]=ue+Kt*(It[0]-ue),q[1]=we+Kt*(It[1]-we),q[2]=Ye+Kt*(It[2]-Ye),q}function Q(q,Et,It,Kt,ue,we){var Ye=we*we,te=Ye*(2*we-3)+1,pe=Ye*(we-2)+we,Te=Ye*(we-1),ze=Ye*(3-2*we);return q[0]=Et[0]*te+It[0]*pe+Kt[0]*Te+ue[0]*ze,q[1]=Et[1]*te+It[1]*pe+Kt[1]*Te+ue[1]*ze,q[2]=Et[2]*te+It[2]*pe+Kt[2]*Te+ue[2]*ze,q}function dt(q,Et,It,Kt,ue,we){var Ye=1-we,te=Ye*Ye,pe=we*we,Te=te*Ye,ze=3*we*te,ur=3*pe*Ye,Ze=pe*we;return q[0]=Et[0]*Te+It[0]*ze+Kt[0]*ur+ue[0]*Ze,q[1]=Et[1]*Te+It[1]*ze+Kt[1]*ur+ue[1]*Ze,q[2]=Et[2]*Te+It[2]*ze+Kt[2]*ur+ue[2]*Ze,q}function lt(q,Et){Et=Et||1;var It=I.RANDOM()*2*Math.PI,Kt=I.RANDOM()*2-1,ue=Math.sqrt(1-Kt*Kt)*Et;return q[0]=Math.cos(It)*ue,q[1]=Math.sin(It)*ue,q[2]=Kt*Et,q}function z(q,Et,It){var Kt=Et[0],ue=Et[1],we=Et[2],Ye=It[3]*Kt+It[7]*ue+It[11]*we+It[15];return Ye=Ye||1,q[0]=(It[0]*Kt+It[4]*ue+It[8]*we+It[12])/Ye,q[1]=(It[1]*Kt+It[5]*ue+It[9]*we+It[13])/Ye,q[2]=(It[2]*Kt+It[6]*ue+It[10]*we+It[14])/Ye,q}function $(q,Et,It){var Kt=Et[0],ue=Et[1],we=Et[2];return q[0]=Kt*It[0]+ue*It[3]+we*It[6],q[1]=Kt*It[1]+ue*It[4]+we*It[7],q[2]=Kt*It[2]+ue*It[5]+we*It[8],q}function j(q,Et,It){var Kt=It[0],ue=It[1],we=It[2],Ye=It[3],te=Et[0],pe=Et[1],Te=Et[2],ze=ue*Te-we*pe,ur=we*te-Kt*Te,Ze=Kt*pe-ue*te,pr=ue*Ze-we*ur,Pr=we*ze-Kt*Ze,Or=Kt*ur-ue*ze,nn=Ye*2;return ze*=nn,ur*=nn,Ze*=nn,pr*=2,Pr*=2,Or*=2,q[0]=te+ze+pr,q[1]=pe+ur+Pr,q[2]=Te+Ze+Or,q}function f(q,Et,It,Kt){var ue=[],we=[];return ue[0]=Et[0]-It[0],ue[1]=Et[1]-It[1],ue[2]=Et[2]-It[2],we[0]=ue[0],we[1]=ue[1]*Math.cos(Kt)-ue[2]*Math.sin(Kt),we[2]=ue[1]*Math.sin(Kt)+ue[2]*Math.cos(Kt),q[0]=we[0]+It[0],q[1]=we[1]+It[1],q[2]=we[2]+It[2],q}function yt(q,Et,It,Kt){var ue=[],we=[];return ue[0]=Et[0]-It[0],ue[1]=Et[1]-It[1],ue[2]=Et[2]-It[2],we[0]=ue[2]*Math.sin(Kt)+ue[0]*Math.cos(Kt),we[1]=ue[1],we[2]=ue[2]*Math.cos(Kt)-ue[0]*Math.sin(Kt),q[0]=we[0]+It[0],q[1]=we[1]+It[1],q[2]=we[2]+It[2],q}function _t(q,Et,It,Kt){var ue=[],we=[];return ue[0]=Et[0]-It[0],ue[1]=Et[1]-It[1],ue[2]=Et[2]-It[2],we[0]=ue[0]*Math.cos(Kt)-ue[1]*Math.sin(Kt),we[1]=ue[0]*Math.sin(Kt)+ue[1]*Math.cos(Kt),we[2]=ue[2],q[0]=we[0]+It[0],q[1]=we[1]+It[1],q[2]=we[2]+It[2],q}function jt(q,Et){var It=_(q[0],q[1],q[2]),Kt=_(Et[0],Et[1],Et[2]);Qt(It,It),Qt(Kt,Kt);var ue=Gt(It,Kt);return ue>1?0:ue<-1?Math.PI:Math.acos(ue)}function qt(q){return"vec3("+q[0]+", "+q[1]+", "+q[2]+")"}function Vt(q,Et){return q[0]===Et[0]&&q[1]===Et[1]&&q[2]===Et[2]}function re(q,Et){var It=q[0],Kt=q[1],ue=q[2],we=Et[0],Ye=Et[1],te=Et[2];return Math.abs(It-we)<=I.EPSILON*Math.max(1,Math.abs(It),Math.abs(we))&&Math.abs(Kt-Ye)<=I.EPSILON*Math.max(1,Math.abs(Kt),Math.abs(Ye))&&Math.abs(ue-te)<=I.EPSILON*Math.max(1,Math.abs(ue),Math.abs(te))}var ae=S.sub=d,Nt=S.mul=y,Lt=S.div=m,bt=S.dist=st,at=S.sqrDist=pt,rt=S.len=A,vt=S.sqrLen=ct,tt=S.forEach=function(){var q=O();return function(Et,It,Kt,ue,we,Ye){var te=void 0,pe=void 0;for(It||(It=3),Kt||(Kt=0),ue?pe=Math.min(ue*It+Kt,Et.length):pe=Et.length,te=Kt;te<pe;te+=It)q[0]=Et[te],q[1]=Et[te+1],q[2]=Et[te+2],we(q,q,Ye),Et[te]=q[0],Et[te+1]=q[1],Et[te+2]=q[2];return Et}}()},92640:function(Ct,S,p){function b(g,w){g.prototype=Object.create(w.prototype),g.prototype.constructor=g,g.__proto__=w}var I=p(4905),P=p(90390),O=p(30130),L=p(22965),A=function(g){b(w,g);function w(){return g.apply(this,arguments)||this}var d=w.prototype;return d.execute=function(){var m=this;return O(m.rootNode,m.options,P)},w}(I),_={};function E(g,w){return w=L.assign({},_,w),new A(g,w).execute()}Ct.exports=E},34542:function(Ct,S,p){function b(g,w){g.prototype=Object.create(w.prototype),g.prototype.constructor=g,g.__proto__=w}var I=p(4905),P=p(37133),O=p(30130),L=p(22965),A=function(g){b(w,g);function w(){return g.apply(this,arguments)||this}var d=w.prototype;return d.execute=function(){var m=this;return m.rootNode.width=0,O(m.rootNode,m.options,P)},w}(I),_={};function E(g,w){return w=L.assign({},_,w),new A(g,w).execute()}Ct.exports=E},57088:function(Ct,S,p){function b(d,y){d.prototype=Object.create(y.prototype),d.prototype.constructor=d,d.__proto__=y}var I=p(4905),P=p(10568),O=p(59286),L=p(22965),A=["LR","RL","H"],_=A[0],E=function(d){b(y,d);function y(){return d.apply(this,arguments)||this}var m=y.prototype;return m.execute=function(){var T=this,B=T.options,D=T.rootNode;B.isHorizontal=!0;var Y=B.indent,K=Y===void 0?20:Y,H=B.dropCap,st=H===void 0?!0:H,pt=B.direction||_;if(pt&&A.indexOf(pt)===-1)throw new TypeError("Invalid direction: "+pt);if(pt===A[0])P(D,K,st);else if(pt===A[1])P(D,K,st),D.right2left();else if(pt===A[2]){var ct=O(D,B),Ot=ct.left,Rt=ct.right;P(Ot,K,st),Ot.right2left(),P(Rt,K,st);var Qt=Ot.getBoundingBox();Rt.translate(Qt.width,0),D.x=Rt.x-D.width/2}return D},y}(I),g={};function w(d,y){return y=L.assign({},g,y),new E(d,y).execute()}Ct.exports=w},77201:function(Ct,S,p){var b={compactBox:p(92640),dendrogram:p(34542),indented:p(57088),mindmap:p(1355)};Ct.exports=b},4905:function(Ct,S,p){var b=p(27249),I=function(){function P(L,A){A===void 0&&(A={});var _=this;_.options=A,_.rootNode=b(L,A)}var O=P.prototype;return O.execute=function(){throw new Error("please override this method")},P}();Ct.exports=I},37133:function(Ct,S,p){var b=p(22965);function I(L,A){L===void 0&&(L=0),A===void 0&&(A=[]);var _=this;_.x=_.y=0,_.leftChild=_.rightChild=null,_.height=0,_.children=A}var P={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function O(L,A,_){_?(A.x=L.x,A.y=L.y):(A.x=L.y,A.y=L.x),L.children.forEach(function(E,g){O(E,A.children[g],_)})}Ct.exports=function(L,A){A===void 0&&(A={}),A=b.assign({},P,A);var _=0;function E(m){if(!m)return null;m.width=0,m.depth&&m.depth>_&&(_=m.depth);var C=m.children,T=C.length,B=new I(m.height,[]);return C.forEach(function(D,Y){var K=E(D);B.children.push(K),Y===0&&(B.leftChild=K),Y===T-1&&(B.rightChild=K)}),B.originNode=m,B.isLeaf=m.isLeaf(),B}function g(m){if(m.isLeaf||m.children.length===0)m.drawingDepth=_;else{var C=m.children.map(function(B){return g(B)}),T=Math.min.apply(null,C);m.drawingDepth=T-1}return m.drawingDepth}var w;function d(m){m.x=m.drawingDepth*A.rankSep,m.isLeaf?(m.y=0,w&&(m.y=w.y+w.height+A.nodeSep,m.originNode.parent!==w.originNode.parent&&(m.y+=A.subTreeSep)),w=m):(m.children.forEach(function(C){d(C)}),m.y=(m.leftChild.y+m.rightChild.y)/2)}var y=E(L);return g(y),d(y),O(y,L,A.isHorizontal),L}},30130:function(Ct,S,p){var b=p(59286),I=["LR","RL","TB","BT","H","V"],P=["LR","RL","H"],O=function(_){return P.indexOf(_)>-1},L=I[0];Ct.exports=function(A,_,E){var g=_.direction||L;if(_.isHorizontal=O(g),g&&I.indexOf(g)===-1)throw new TypeError("Invalid direction: "+g);if(g===I[0])E(A,_);else if(g===I[1])E(A,_),A.right2left();else if(g===I[2])E(A,_);else if(g===I[3])E(A,_),A.bottom2top();else if(g===I[4]||g===I[5]){var w=b(A,_),d=w.left,y=w.right;E(d,_),E(y,_),_.isHorizontal?d.right2left():d.bottom2top(),y.translate(d.x-y.x,d.y-y.y),A.x=d.x,A.y=y.y;var m=A.getBoundingBox();_.isHorizontal?m.top<0&&A.translate(0,-m.top):m.left<0&&A.translate(-m.left,0)}var C=_.fixedRoot;return C===void 0&&(C=!0),C&&A.translate(-(A.x+A.width/2+A.hgap),-(A.y+A.height/2+A.vgap)),A}},27249:function(Ct,S,p){var b=p(22965),I=18,P=I*2,O=I,L={getId:function(g){return g.id||g.name},getPreH:function(g){return g.preH||0},getPreV:function(g){return g.preV||0},getHGap:function(g){return g.hgap||O},getVGap:function(g){return g.vgap||O},getChildren:function(g){return g.children},getHeight:function(g){return g.height||P},getWidth:function(g){var w=g.label||" ";return g.width||w.split("").length*I}};function A(E,g){var w=this;if(w.vgap=w.hgap=0,E instanceof A)return E;w.data=E;var d=g.getHGap(E),y=g.getVGap(E);return w.preH=g.getPreH(E),w.preV=g.getPreV(E),w.width=g.getWidth(E),w.height=g.getHeight(E),w.width+=w.preH,w.height+=w.preV,w.id=g.getId(E),w.x=w.y=0,w.depth=0,w.children||(w.children=[]),w.addGap(d,y),w}b.assign(A.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(g,w){var d=this;d.hgap+=g,d.vgap+=w,d.width+=2*g,d.height+=2*w},eachNode:function(g){for(var w=this,d=[w],y;y=d.shift();)g(y),d=y.children.concat(d)},DFTraverse:function(g){this.eachNode(g)},BFTraverse:function(g){for(var w=this,d=[w],y;y=d.shift();)g(y),d=d.concat(y.children)},getBoundingBox:function(){var g={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(w){g.left=Math.min(g.left,w.x),g.top=Math.min(g.top,w.y),g.width=Math.max(g.width,w.x+w.width),g.height=Math.max(g.height,w.y+w.height)}),g},translate:function(g,w){g===void 0&&(g=0),w===void 0&&(w=0),this.eachNode(function(d){d.x+=g,d.y+=w,d.x+=d.preH,d.y+=d.preV})},right2left:function(){var g=this,w=g.getBoundingBox();g.eachNode(function(d){d.x=d.x-(d.x-w.left)*2-d.width}),g.translate(w.width,0)},bottom2top:function(){var g=this,w=g.getBoundingBox();g.eachNode(function(d){d.y=d.y-(d.y-w.top)*2-d.height}),g.translate(0,w.height)}});function _(E,g,w){g===void 0&&(g={}),g=b.assign({},L,g);var d=new A(E,g),y=[d],m;if(!w&&!E.collapsed){for(;m=y.shift();)if(!m.data.collapsed){var C=g.getChildren(m.data),T=C?C.length:0;if(m.children=new Array(T),C&&T)for(var B=0;B<T;B++){var D=new A(C[B],g);m.children[B]=D,y.push(D),D.parent=m,D.depth=m.depth+1}}}return d}Ct.exports=_},10568:function(Ct){function S(p,b,I,P){var O=typeof I=="function"?I(p):I*p.depth;if(!P)try{if(p.id===p.parent.children[0].id){p.x+=O,p.y=b?b.y:0;return}}catch(L){}p.x+=O,p.y=b?b.y+b.height:0}Ct.exports=function(p,b,I){var P=null;p.eachNode(function(O){S(O,P,b,I),P=O})}},24461:function(Ct,S,p){var b=p(22965);function I(L,A){var _=0;return L.children.length?L.children.forEach(function(E){_+=I(E,A)}):_=L.height,L._subTreeSep=A.getSubTreeSep(L.data),L.totalHeight=Math.max(L.height,_)+2*L._subTreeSep,L.totalHeight}function P(L){var A=L.children,_=A.length;if(_){A.forEach(function(m){P(m)});var E=A[0],g=A[_-1],w=g.y-E.y+g.height,d=0;if(A.forEach(function(m){d+=m.totalHeight}),w>L.height)L.y=E.y+w/2-L.height/2;else if(A.length!==1||L.height>d){var y=L.y+(L.height-w)/2-E.y;A.forEach(function(m){m.translate(0,y)})}else L.y=(E.y+E.height/2+g.y+g.height/2)/2-L.height/2}}var O={getSubTreeSep:function(){return 0}};Ct.exports=function(L,A){A===void 0&&(A={}),A=b.assign({},O,A),L.parent={x:0,width:0,height:0,y:0},L.BFTraverse(function(_){_.x=_.parent.x+_.parent.width}),L.parent=null,I(L,A),L.startY=0,L.y=L.totalHeight/2-L.height/2,L.eachNode(function(_){var E=_.children,g=E.length;if(g){var w=E[0];if(w.startY=_.startY+_._subTreeSep,g===1)w.y=_.y+_.height/2-w.height/2;else{w.y=w.startY+w.totalHeight/2-w.height/2;for(var d=1;d<g;d++){var y=E[d];y.startY=E[d-1].startY+E[d-1].totalHeight,y.y=y.startY+y.totalHeight/2-y.height/2}}}}),P(L)}},90390:function(Ct){function S(L,A,_,E){E===void 0&&(E=[]);var g=this;g.w=L||0,g.h=A||0,g.y=_||0,g.x=0,g.c=E||[],g.cs=E.length,g.prelim=0,g.mod=0,g.shift=0,g.change=0,g.tl=null,g.tr=null,g.el=null,g.er=null,g.msel=0,g.mser=0}S.fromNode=function(L,A){if(!L)return null;var _=[];return L.children.forEach(function(E){_.push(S.fromNode(E,A))}),A?new S(L.height,L.width,L.x,_):new S(L.width,L.height,L.y,_)};function p(L,A,_){_?L.y+=A:L.x+=A,L.children.forEach(function(E){p(E,A,_)})}function b(L,A){var _=A?L.y:L.x;return L.children.forEach(function(E){_=Math.min(b(E,A),_)}),_}function I(L,A){var _=b(L,A);p(L,-_,A)}function P(L,A,_){_?A.y=L.x:A.x=L.x,L.c.forEach(function(E,g){P(E,A.children[g],_)})}function O(L,A,_){_===void 0&&(_=0),A?(L.x=_,_+=L.width):(L.y=_,_+=L.height),L.children.forEach(function(E){O(E,A,_)})}Ct.exports=function(L,A){A===void 0&&(A={});var _=A.isHorizontal;function E(ct){if(ct.cs===0){g(ct);return}E(ct.c[0]);for(var Ot=st(C(ct.c[0].el),0,null),Rt=1;Rt<ct.cs;++Rt){E(ct.c[Rt]);var Qt=C(ct.c[Rt].er);w(ct,Rt,Ot),Ot=st(Qt,Rt,Ot)}D(ct),g(ct)}function g(ct){ct.cs===0?(ct.el=ct,ct.er=ct,ct.msel=ct.mser=0):(ct.el=ct.c[0].el,ct.msel=ct.c[0].msel,ct.er=ct.c[ct.cs-1].er,ct.mser=ct.c[ct.cs-1].mser)}function w(ct,Ot,Rt){for(var Qt=ct.c[Ot-1],Gt=Qt.mod,Z=ct.c[Ot],nt=Z.mod;Qt!==null&&Z!==null;){C(Qt)>Rt.low&&(Rt=Rt.nxt);var Q=Gt+Qt.prelim+Qt.w-(nt+Z.prelim);Q>0&&(nt+=Q,d(ct,Ot,Rt.index,Q));var dt=C(Qt),lt=C(Z);dt<=lt&&(Qt=m(Qt),Qt!==null&&(Gt+=Qt.mod)),dt>=lt&&(Z=y(Z),Z!==null&&(nt+=Z.mod))}!Qt&&!!Z?T(ct,Ot,Z,nt):!!Qt&&!Z&&B(ct,Ot,Qt,Gt)}function d(ct,Ot,Rt,Qt){ct.c[Ot].mod+=Qt,ct.c[Ot].msel+=Qt,ct.c[Ot].mser+=Qt,K(ct,Ot,Rt,Qt)}function y(ct){return ct.cs===0?ct.tl:ct.c[0]}function m(ct){return ct.cs===0?ct.tr:ct.c[ct.cs-1]}function C(ct){return ct.y+ct.h}function T(ct,Ot,Rt,Qt){var Gt=ct.c[0].el;Gt.tl=Rt;var Z=Qt-Rt.mod-ct.c[0].msel;Gt.mod+=Z,Gt.prelim-=Z,ct.c[0].el=ct.c[Ot].el,ct.c[0].msel=ct.c[Ot].msel}function B(ct,Ot,Rt,Qt){var Gt=ct.c[Ot].er;Gt.tr=Rt;var Z=Qt-Rt.mod-ct.c[Ot].mser;Gt.mod+=Z,Gt.prelim-=Z,ct.c[Ot].er=ct.c[Ot-1].er,ct.c[Ot].mser=ct.c[Ot-1].mser}function D(ct){ct.prelim=(ct.c[0].prelim+ct.c[0].mod+ct.c[ct.cs-1].mod+ct.c[ct.cs-1].prelim+ct.c[ct.cs-1].w)/2-ct.w/2}function Y(ct,Ot){Ot+=ct.mod,ct.x=ct.prelim+Ot,H(ct);for(var Rt=0;Rt<ct.cs;Rt++)Y(ct.c[Rt],Ot)}function K(ct,Ot,Rt,Qt){if(Rt!==Ot-1){var Gt=Ot-Rt;ct.c[Rt+1].shift+=Qt/Gt,ct.c[Ot].shift-=Qt/Gt,ct.c[Ot].change-=Qt-Qt/Gt}}function H(ct){for(var Ot=0,Rt=0,Qt=0;Qt<ct.cs;Qt++)Ot+=ct.c[Qt].shift,Rt+=Ot+ct.c[Qt].change,ct.c[Qt].mod+=Rt}function st(ct,Ot,Rt){for(;Rt!==null&&ct>=Rt.low;)Rt=Rt.nxt;return{low:ct,index:Ot,nxt:Rt}}O(L,_);var pt=S.fromNode(L,_);return E(pt),Y(pt,0),P(pt,L,_),I(L,_),L}},59286:function(Ct,S,p){var b=p(27249);Ct.exports=function(I,P){for(var O=b(I.data,P,!0),L=b(I.data,P,!0),A=I.children.length,_=Math.round(A/2),E=P.getSide||function(y,m){return m<_?"right":"left"},g=0;g<A;g++){var w=I.children[g],d=E(w,g);d==="right"?L.children.push(w):O.children.push(w)}return O.eachNode(function(y){y.isRoot()||(y.side="left")}),L.eachNode(function(y){y.isRoot()||(y.side="right")}),{left:O,right:L}}},1355:function(Ct,S,p){function b(g,w){g.prototype=Object.create(w.prototype),g.prototype.constructor=g,g.__proto__=w}var I=p(4905),P=p(24461),O=p(30130),L=p(22965),A=function(g){b(w,g);function w(){return g.apply(this,arguments)||this}var d=w.prototype;return d.execute=function(){var m=this;return O(m.rootNode,m.options,P)},w}(I),_={};function E(g,w){return w=L.assign({},_,w),new A(g,w).execute()}Ct.exports=E},22965:function(Ct,S,p){var b=p(49242),I=b.mix;Ct.exports={assign:I}},31506:function(Ct,S,p){"use strict";p.r(S),p.d(S,{leftTranslate:function(){return P},leftRotate:function(){return O},leftScale:function(){return L},transform:function(){return _},direction:function(){return E},angleTo:function(){return g},vertical:function(){return w}});var b=p(35600),I=p(31437);function P(d,y,m){var C=[0,0,0,0,0,0,0,0,0];return b.fromTranslation(C,m),b.multiply(d,C,y)}function O(d,y,m){var C=[0,0,0,0,0,0,0,0,0];return b.fromRotation(C,m),b.multiply(d,C,y)}function L(d,y,m){var C=[0,0,0,0,0,0,0,0,0];return b.fromScaling(C,m),b.multiply(d,C,y)}function A(d,y,m){return b.multiply(d,m,y)}function _(d,y){for(var m=d?[].concat(d):[1,0,0,0,1,0,0,0,1],C=0,T=y.length;C<T;C++){var B=y[C];switch(B[0]){case"t":P(m,m,[B[1],B[2]]);break;case"s":L(m,m,[B[1],B[2]]);break;case"r":O(m,m,B[1]);break;case"m":A(m,m,B[1]);break;default:break}}return m}function E(d,y){return d[0]*y[1]-y[0]*d[1]}function g(d,y,m){var C=I.angle(d,y),T=E(d,y)>=0;return m?T?Math.PI*2-C:C:T?C:Math.PI*2-C}function w(d,y,m){return m?(d[0]=y[1],d[1]=-1*y[0]):(d[0]=-1*y[1],d[1]=y[0]),d}},43567:function(Ct,S,p){"use strict";p.r(S),p.d(S,{mat3:function(){return b},vec2:function(){return I},vec3:function(){return P},ext:function(){return O}});var b=p(35600),I=p(31437),P=p(77160),O=p(31506)},57350:function(Ct,S,p){"use strict";p.r(S),p.d(S,{catmullRom2Bezier:function(){return g},fillPath:function(){return m},fillPathByDiff:function(){return B},formatPath:function(){return K},getArcParams:function(){return te},getLineIntersect:function(){return ur},isPointInPolygon:function(){return Or},isPolygonsIntersect:function(){return Si},parsePath:function(){return L},parsePathArray:function(){return It},parsePathString:function(){return Ot},path2Absolute:function(){return Gt},path2Curve:function(){return _t},path2Segments:function(){return Te},pathIntersection:function(){return q},reactPath:function(){return H}});var b=p(49242),I=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,P=/[^\s\,]+/ig;function O(Zt){var ne=Zt||[];if((0,b.isArray)(ne))return ne;if((0,b.isString)(ne))return ne=ne.match(I),(0,b.each)(ne,function(ve,ge){if(ve=ve.match(P),ve[0].length>1){var Ae=ve[0].charAt(0);ve.splice(1,0,ve[0].substr(1)),ve[0]=Ae}(0,b.each)(ve,function(Pe,Ie){isNaN(Pe)||(ve[Ie]=+Pe)}),ne[ge]=ve}),ne}var L=O,A=p(31437);function _(Zt,ne,ve,ge){var Ae=[],Pe=!!ge,Ie,De,Ce,er,je,fr,Sr;if(Pe){Ce=ge[0],er=ge[1];for(var hr=0,gr=Zt.length;hr<gr;hr+=1){var vr=Zt[hr];Ce=A.min([0,0],Ce,vr),er=A.max([0,0],er,vr)}}for(var hr=0,Cr=Zt.length;hr<Cr;hr+=1){var vr=Zt[hr];if(hr===0&&!ve)Sr=vr;else if(hr===Cr-1&&!ve)fr=vr,Ae.push(Sr),Ae.push(fr);else{var or=[hr?hr-1:Cr-1,hr-1][ve?0:1];Ie=Zt[or],De=Zt[ve?(hr+1)%Cr:hr+1];var Ir=[0,0];Ir=A.sub(Ir,De,Ie),Ir=A.scale(Ir,Ir,ne);var Wr=A.distance(vr,Ie),Nr=A.distance(vr,De),jr=Wr+Nr;jr!==0&&(Wr/=jr,Nr/=jr);var Qr=A.scale([0,0],Ir,-Wr),Zr=A.scale([0,0],Ir,Nr);fr=A.add([0,0],vr,Qr),je=A.add([0,0],vr,Zr),je=A.min([0,0],je,A.max([0,0],De,vr)),je=A.max([0,0],je,A.min([0,0],De,vr)),Qr=A.sub([0,0],je,vr),Qr=A.scale([0,0],Qr,-Wr/Nr),fr=A.add([0,0],vr,Qr),fr=A.min([0,0],fr,A.max([0,0],Ie,vr)),fr=A.max([0,0],fr,A.min([0,0],Ie,vr)),Zr=A.sub([0,0],vr,fr),Zr=A.scale([0,0],Zr,Nr/Wr),je=A.add([0,0],vr,Zr),Pe&&(fr=A.max([0,0],fr,Ce),fr=A.min([0,0],fr,er),je=A.max([0,0],je,Ce),je=A.min([0,0],je,er)),Ae.push(Sr),Ae.push(fr),Sr=je}}return ve&&Ae.push(Ae.shift()),Ae}function E(Zt,ne,ve){ne===void 0&&(ne=!1),ve===void 0&&(ve=[[0,0],[1,1]]);for(var ge=!!ne,Ae=[],Pe=0,Ie=Zt.length;Pe<Ie;Pe+=2)Ae.push([Zt[Pe],Zt[Pe+1]]);for(var De=_(Ae,.4,ge,ve),Ce=Ae.length,er=[],je,fr,Sr,Pe=0;Pe<Ce-1;Pe+=1)je=De[Pe*2],fr=De[Pe*2+1],Sr=Ae[Pe+1],er.push(["C",je[0],je[1],fr[0],fr[1],Sr[0],Sr[1]]);return ge&&(je=De[Ce],fr=De[Ce+1],Sr=Ae[0],er.push(["C",je[0],je[1],fr[0],fr[1],Sr[0],Sr[1]])),er}var g=E;function w(Zt,ne){var ve=[],ge=[];function Ae(Pe,Ie){if(Pe.length===1)ve.push(Pe[0]),ge.push(Pe[0]);else{for(var De=[],Ce=0;Ce<Pe.length-1;Ce++)Ce===0&&ve.push(Pe[0]),Ce===Pe.length-2&&ge.push(Pe[Ce+1]),De[Ce]=[(1-Ie)*Pe[Ce][0]+Ie*Pe[Ce+1][0],(1-Ie)*Pe[Ce][1]+Ie*Pe[Ce+1][1]];Ae(De,Ie)}}return Zt.length&&Ae(Zt,ne),{left:ve,right:ge.reverse()}}function d(Zt,ne,ve){var ge=[[Zt[1],Zt[2]]];ve=ve||2;var Ae=[];ne[0]==="A"?(ge.push(ne[6]),ge.push(ne[7])):ne[0]==="C"?(ge.push([ne[1],ne[2]]),ge.push([ne[3],ne[4]]),ge.push([ne[5],ne[6]])):ne[0]==="S"||ne[0]==="Q"?(ge.push([ne[1],ne[2]]),ge.push([ne[3],ne[4]])):ge.push([ne[1],ne[2]]);for(var Pe=ge,Ie=1/ve,De=0;De<ve-1;De++){var Ce=Ie/(1-Ie*De),er=w(Pe,Ce);Ae.push(er.left),Pe=er.right}Ae.push(Pe);var je=Ae.map(function(fr){var Sr=[];return fr.length===4&&(Sr.push("C"),Sr=Sr.concat(fr[2])),fr.length>=3&&(fr.length===3&&Sr.push("Q"),Sr=Sr.concat(fr[1])),fr.length===2&&Sr.push("L"),Sr=Sr.concat(fr[fr.length-1]),Sr});return je}function y(Zt,ne,ve){if(ve===1)return[[].concat(Zt)];var ge=[];if(ne[0]==="L"||ne[0]==="C"||ne[0]==="Q")ge=ge.concat(d(Zt,ne,ve));else{var Ae=[].concat(Zt);Ae[0]==="M"&&(Ae[0]="L");for(var Pe=0;Pe<=ve-1;Pe++)ge.push(Ae)}return ge}function m(Zt,ne){if(Zt.length===1)return Zt;var ve=Zt.length-1,ge=ne.length-1,Ae=ve/ge,Pe=[];if(Zt.length===1&&Zt[0][0]==="M"){for(var Ie=0;Ie<ge-ve;Ie++)Zt.push(Zt[0]);return Zt}for(var Ie=0;Ie<ge;Ie++){var De=Math.floor(Ae*Ie);Pe[De]=(Pe[De]||0)+1}var Ce=Pe.reduce(function(er,je,fr){return fr===ve?er.concat(Zt[ve]):er.concat(y(Zt[fr],Zt[fr+1],je))},[]);return Ce.unshift(Zt[0]),(ne[ge]==="Z"||ne[ge]==="z")&&Ce.push("Z"),Ce}function C(Zt,ne,ve){var ge=null,Ae=ve;return ne<Ae&&(Ae=ne,ge="add"),Zt<Ae&&(Ae=Zt,ge="del"),{type:ge,min:Ae}}var T=function(Zt,ne){var ve=Zt.length,ge=ne.length,Ae,Pe,Ie=0;if(ve===0||ge===0)return null;for(var De=[],Ce=0;Ce<=ve;Ce++)De[Ce]=[],De[Ce][0]={min:Ce};for(var er=0;er<=ge;er++)De[0][er]={min:er};for(var Ce=1;Ce<=ve;Ce++){Ae=Zt[Ce-1];for(var er=1;er<=ge;er++){Pe=ne[er-1],(0,b.isEqual)(Ae,Pe)?Ie=0:Ie=1;var je=De[Ce-1][er].min+1,fr=De[Ce][er-1].min+1,Sr=De[Ce-1][er-1].min+Ie;De[Ce][er]=C(je,fr,Sr)}}return De};function B(Zt,ne){var ve=T(Zt,ne),ge=Zt.length,Ae=ne.length,Pe=[],Ie=1,De=1;if(ve[ge][Ae]!==ge){for(var Ce=1;Ce<=ge;Ce++){var er=ve[Ce][Ce].min;De=Ce;for(var je=Ie;je<=Ae;je++)ve[Ce][je].min<er&&(er=ve[Ce][je].min,De=je);Ie=De,ve[Ce][Ie].type&&Pe.push({index:Ce-1,type:ve[Ce][Ie].type})}for(var Ce=Pe.length-1;Ce>=0;Ce--)Ie=Pe[Ce].index,Pe[Ce].type==="add"?Zt.splice(Ie,0,[].concat(Zt[Ie])):Zt.splice(Ie,1)}if(ge=Zt.length,ge<Ae)for(var Ce=0;Ce<Ae-ge;Ce++)Zt[ge-1][0]==="z"||Zt[ge-1][0]==="Z"?Zt.splice(ge-2,0,Zt[ge-2]):Zt.push(Zt[ge-1]);return Zt}function D(Zt){var ne=[];switch(Zt[0]){case"M":ne.push([Zt[1],Zt[2]]);break;case"L":ne.push([Zt[1],Zt[2]]);break;case"A":ne.push([Zt[6],Zt[7]]);break;case"Q":ne.push([Zt[3],Zt[4]]),ne.push([Zt[1],Zt[2]]);break;case"T":ne.push([Zt[1],Zt[2]]);break;case"C":ne.push([Zt[5],Zt[6]]),ne.push([Zt[1],Zt[2]]),ne.push([Zt[3],Zt[4]]);break;case"S":ne.push([Zt[3],Zt[4]]),ne.push([Zt[1],Zt[2]]);break;case"H":ne.push([Zt[1],Zt[1]]);break;case"V":ne.push([Zt[1],Zt[1]]);break;default:}return ne}function Y(Zt,ne,ve){for(var ge=[].concat(Zt),Ae,Pe=1/(ve+1),Ie=D(ne)[0],De=1;De<=ve;De++)Pe*=De,Ae=Math.floor(Zt.length*Pe),Ae===0?ge.unshift([Ie[0]*Pe+Zt[Ae][0]*(1-Pe),Ie[1]*Pe+Zt[Ae][1]*(1-Pe)]):ge.splice(Ae,0,[Ie[0]*Pe+Zt[Ae][0]*(1-Pe),Ie[1]*Pe+Zt[Ae][1]*(1-Pe)]);return ge}function K(Zt,ne){if(Zt.length<=1)return Zt;for(var ve,ge=0;ge<ne.length;ge++)if(Zt[ge][0]!==ne[ge][0])switch(ve=D(Zt[ge]),ne[ge][0]){case"M":Zt[ge]=["M"].concat(ve[0]);break;case"L":Zt[ge]=["L"].concat(ve[0]);break;case"A":Zt[ge]=[].concat(ne[ge]),Zt[ge][6]=ve[0][0],Zt[ge][7]=ve[0][1];break;case"Q":if(ve.length<2)if(ge>0)ve=Y(ve,Zt[ge-1],1);else{Zt[ge]=ne[ge];break}Zt[ge]=["Q"].concat(ve.reduce(function(Ae,Pe){return Ae.concat(Pe)},[]));break;case"T":Zt[ge]=["T"].concat(ve[0]);break;case"C":if(ve.length<3)if(ge>0)ve=Y(ve,Zt[ge-1],2);else{Zt[ge]=ne[ge];break}Zt[ge]=["C"].concat(ve.reduce(function(Ae,Pe){return Ae.concat(Pe)},[]));break;case"S":if(ve.length<2)if(ge>0)ve=Y(ve,Zt[ge-1],1);else{Zt[ge]=ne[ge];break}Zt[ge]=["S"].concat(ve.reduce(function(Ae,Pe){return Ae.concat(Pe)},[]));break;default:Zt[ge]=ne[ge]}return Zt}function H(Zt,ne,ve,ge,Ae){return Ae?[["M",+Zt+ +Ae,ne],["l",ve-Ae*2,0],["a",Ae,Ae,0,0,1,Ae,Ae],["l",0,ge-Ae*2],["a",Ae,Ae,0,0,1,-Ae,Ae],["l",Ae*2-ve,0],["a",Ae,Ae,0,0,1,-Ae,-Ae],["l",0,Ae*2-ge],["a",Ae,Ae,0,0,1,Ae,-Ae],["z"]]:[["M",Zt,ne],["l",ve,0],["l",0,ge],["l",-ve,0],["z"]]}var st=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,pt=new RegExp("([a-z])["+st+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+st+"]*,?["+st+"]*)+)","ig"),ct=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+st+"]*,?["+st+"]*","ig");function Ot(Zt){if(!Zt)return null;if((0,b.isArray)(Zt))return Zt;var ne={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},ve=[];return String(Zt).replace(pt,function(ge,Ae,Pe){var Ie=[],De=Ae.toLowerCase();if(Pe.replace(ct,function(Ce,er){er&&Ie.push(+er)}),De==="m"&&Ie.length>2&&(ve.push([Ae].concat(Ie.splice(0,2))),De="l",Ae=Ae==="m"?"l":"L"),De==="o"&&Ie.length===1&&ve.push([Ae,Ie[0]]),De==="r")ve.push([Ae].concat(Ie));else for(;Ie.length>=ne[De]&&(ve.push([Ae].concat(Ie.splice(0,ne[De]))),!!ne[De]););return""}),ve}var Rt=/[a-z]/;function Qt(Zt,ne){return[ne[0]+(ne[0]-Zt[0]),ne[1]+(ne[1]-Zt[1])]}function Gt(Zt){var ne=Ot(Zt);if(!ne||!ne.length)return[["M",0,0]];for(var ve=!1,ge=0;ge<ne.length;ge++){var Ae=ne[ge][0];if(Rt.test(Ae)||["V","H","T","S"].indexOf(Ae)>=0){ve=!0;break}}if(!ve)return ne;var Pe=[],Ie=0,De=0,Ce=0,er=0,je=0,fr,Sr,hr=ne[0];(hr[0]==="M"||hr[0]==="m")&&(Ie=+hr[1],De=+hr[2],Ce=Ie,er=De,je++,Pe[0]=["M",Ie,De]);for(var ge=je,gr=ne.length;ge<gr;ge++){var vr=ne[ge],Cr=Pe[ge-1],or=[],Ae=vr[0],Ir=Ae.toUpperCase();if(Ae!==Ir)switch(or[0]=Ir,Ir){case"A":or[1]=vr[1],or[2]=vr[2],or[3]=vr[3],or[4]=vr[4],or[5]=vr[5],or[6]=+vr[6]+Ie,or[7]=+vr[7]+De;break;case"V":or[1]=+vr[1]+De;break;case"H":or[1]=+vr[1]+Ie;break;case"M":Ce=+vr[1]+Ie,er=+vr[2]+De,or[1]=Ce,or[2]=er;break;default:for(var Wr=1,Nr=vr.length;Wr<Nr;Wr++)or[Wr]=+vr[Wr]+(Wr%2?Ie:De)}else or=ne[ge];switch(Ir){case"Z":Ie=+Ce,De=+er;break;case"H":Ie=or[1],or=["L",Ie,De];break;case"V":De=or[1],or=["L",Ie,De];break;case"T":Ie=or[1],De=or[2];var jr=Qt([Cr[1],Cr[2]],[Cr[3],Cr[4]]);or=["Q",jr[0],jr[1],Ie,De];break;case"S":Ie=or[or.length-2],De=or[or.length-1];var Qr=Cr.length,Zr=Qt([Cr[Qr-4],Cr[Qr-3]],[Cr[Qr-2],Cr[Qr-1]]);or=["C",Zr[0],Zr[1],or[1],or[2],Ie,De];break;case"M":Ce=or[or.length-2],er=or[or.length-1];break;default:Ie=or[or.length-2],De=or[or.length-1]}Pe.push(or)}return Pe}var Z=Math.PI*2,nt=function(Zt,ne,ve,ge,Ae,Pe,Ie){var De=Zt.x,Ce=Zt.y;De*=ne,Ce*=ve;var er=ge*De-Ae*Ce,je=Ae*De+ge*Ce;return{x:er+Pe,y:je+Ie}},Q=function(Zt,ne){var ve=ne===1.5707963267948966?.551915024494:ne===-1.5707963267948966?-.551915024494:4/3*Math.tan(ne/4),ge=Math.cos(Zt),Ae=Math.sin(Zt),Pe=Math.cos(Zt+ne),Ie=Math.sin(Zt+ne);return[{x:ge-Ae*ve,y:Ae+ge*ve},{x:Pe+Ie*ve,y:Ie-Pe*ve},{x:Pe,y:Ie}]},dt=function(Zt,ne,ve,ge){var Ae=Zt*ge-ne*ve<0?-1:1,Pe=Zt*ve+ne*ge;return Pe>1&&(Pe=1),Pe<-1&&(Pe=-1),Ae*Math.acos(Pe)},lt=function(Zt,ne,ve,ge,Ae,Pe,Ie,De,Ce,er,je,fr){var Sr=Math.pow(Ae,2),hr=Math.pow(Pe,2),gr=Math.pow(je,2),vr=Math.pow(fr,2),Cr=Sr*hr-Sr*vr-hr*gr;Cr<0&&(Cr=0),Cr/=Sr*vr+hr*gr,Cr=Math.sqrt(Cr)*(Ie===De?-1:1);var or=Cr*Ae/Pe*fr,Ir=Cr*-Pe/Ae*je,Wr=er*or-Ce*Ir+(Zt+ve)/2,Nr=Ce*or+er*Ir+(ne+ge)/2,jr=(je-or)/Ae,Qr=(fr-Ir)/Pe,Zr=(-je-or)/Ae,Bn=(-fr-Ir)/Pe,hn=dt(1,0,jr,Qr),Hn=dt(jr,Qr,Zr,Bn);return De===0&&Hn>0&&(Hn-=Z),De===1&&Hn<0&&(Hn+=Z),[Wr,Nr,hn,Hn]},z=function(Zt){var ne=Zt.px,ve=Zt.py,ge=Zt.cx,Ae=Zt.cy,Pe=Zt.rx,Ie=Zt.ry,De=Zt.xAxisRotation,Ce=De===void 0?0:De,er=Zt.largeArcFlag,je=er===void 0?0:er,fr=Zt.sweepFlag,Sr=fr===void 0?0:fr,hr=[];if(Pe===0||Ie===0)return[{x1:0,y1:0,x2:0,y2:0,x:ge,y:Ae}];var gr=Math.sin(Ce*Z/360),vr=Math.cos(Ce*Z/360),Cr=vr*(ne-ge)/2+gr*(ve-Ae)/2,or=-gr*(ne-ge)/2+vr*(ve-Ae)/2;if(Cr===0&&or===0)return[{x1:0,y1:0,x2:0,y2:0,x:ge,y:Ae}];Pe=Math.abs(Pe),Ie=Math.abs(Ie);var Ir=Math.pow(Cr,2)/Math.pow(Pe,2)+Math.pow(or,2)/Math.pow(Ie,2);Ir>1&&(Pe*=Math.sqrt(Ir),Ie*=Math.sqrt(Ir));var Wr=lt(ne,ve,ge,Ae,Pe,Ie,je,Sr,gr,vr,Cr,or),Nr=Wr[0],jr=Wr[1],Qr=Wr[2],Zr=Wr[3],Bn=Math.abs(Zr)/(Z/4);Math.abs(1-Bn)<1e-7&&(Bn=1);var hn=Math.max(Math.ceil(Bn),1);Zr/=hn;for(var Hn=0;Hn<hn;Hn++)hr.push(Q(Qr,Zr)),Qr+=Zr;return hr.map(function(yi){var Jn=nt(yi[0],Pe,Ie,vr,gr,Nr,jr),Ci=Jn.x,Mi=Jn.y,Fr=nt(yi[1],Pe,Ie,vr,gr,Nr,jr),oi=Fr.x,Oi=Fr.y,ci=nt(yi[2],Pe,Ie,vr,gr,Nr,jr),Mn=ci.x,vi=ci.y;return{x1:Ci,y1:Mi,x2:oi,y2:Oi,x:Mn,y:vi}})};function $(Zt,ne,ve,ge,Ae,Pe,Ie,De,Ce){var er=z({px:Zt,py:ne,cx:De,cy:Ce,rx:ve,ry:ge,xAxisRotation:Ae,largeArcFlag:Pe,sweepFlag:Ie});return er.reduce(function(je,fr){var Sr=fr.x1,hr=fr.y1,gr=fr.x2,vr=fr.y2,Cr=fr.x,or=fr.y;return je.push(Sr,hr,gr,vr,Cr,or),je},[])}function j(Zt,ne,ve,ge,Ae,Pe){var Ie=1/3,De=2/3;return[Ie*Zt+De*ve,Ie*ne+De*ge,Ie*Ae+De*ve,Ie*Pe+De*ge,Ae,Pe]}function f(Zt,ne,ve,ge){return[Zt,ne,ve,ge,ve,ge]}function yt(Zt,ne){"TQ".indexOf(Zt[0])<0&&(ne.qx=null,ne.qy=null);var ve=Zt.slice(1),ge=ve[0],Ae=ve[1];switch(Zt[0]){case"M":return ne.x=ge,ne.y=Ae,Zt;case"A":return["C"].concat($.apply(0,[ne.x1,ne.y1].concat(Zt.slice(1))));case"Q":return ne.qx=ge,ne.qy=Ae,["C"].concat(j.apply(0,[ne.x1,ne.y1].concat(Zt.slice(1))));case"L":return["C"].concat(f(ne.x1,ne.y1,Zt[1],Zt[2]));case"H":return["C"].concat(f(ne.x1,ne.y1,Zt[1],ne.y1));case"V":return["C"].concat(f(ne.x1,ne.y1,ne.x1,Zt[1]));case"Z":return["C"].concat(f(ne.x1,ne.y1,ne.x,ne.y));default:}return Zt}function _t(Zt,ne){ne===void 0&&(ne=!1);for(var ve=Gt(Zt),ge={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},Ae=[],Pe="",Ie=ve.length,De,Ce,er=[],je=0;je<Ie;je+=1)ve[je]&&(Pe=ve[je][0]),Ae[je]=Pe,ve[je]=yt(ve[je],ge),jt(ve,Ae,je),Ie=ve.length,Pe==="Z"&&er.push(je),De=ve[je],Ce=De.length,ge.x1=+De[Ce-2],ge.y1=+De[Ce-1],ge.x2=+De[Ce-4]||ge.x1,ge.y2=+De[Ce-3]||ge.y1;return ne?[ve,er]:ve}function jt(Zt,ne,ve){if(Zt[ve].length>7){Zt[ve].shift();for(var ge=Zt[ve],Ae=ve;ge.length;)ne[ve]="A",Zt.splice(Ae+=1,0,["C"].concat(ge.splice(0,6)));Zt.splice(ve,1)}}var qt=function(Zt,ne,ve,ge,Ae){var Pe=-3*ne+9*ve-9*ge+3*Ae,Ie=Zt*Pe+6*ne-12*ve+6*ge;return Zt*Ie-3*ne+3*ve},Vt=function(Zt,ne,ve,ge,Ae,Pe,Ie,De,Ce){Ce===null&&(Ce=1),Ce=Ce>1?1:Ce<0?0:Ce;for(var er=Ce/2,je=12,fr=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Sr=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],hr=0,gr=0;gr<je;gr++){var vr=er*fr[gr]+er,Cr=qt(vr,Zt,ve,Ae,Ie),or=qt(vr,ne,ge,Pe,De),Ir=Cr*Cr+or*or;hr+=Sr[gr]*Math.sqrt(Ir)}return er*hr},re=function(Zt,ne,ve,ge,Ae,Pe,Ie,De){for(var Ce=[],er=[[],[]],je,fr,Sr,hr,gr=0;gr<2;++gr){if(gr===0?(fr=6*Zt-12*ve+6*Ae,je=-3*Zt+9*ve-9*Ae+3*Ie,Sr=3*ve-3*Zt):(fr=6*ne-12*ge+6*Pe,je=-3*ne+9*ge-9*Pe+3*De,Sr=3*ge-3*ne),Math.abs(je)<1e-12){if(Math.abs(fr)<1e-12)continue;hr=-Sr/fr,hr>0&&hr<1&&Ce.push(hr);continue}var vr=fr*fr-4*Sr*je,Cr=Math.sqrt(vr);if(!(vr<0)){var or=(-fr+Cr)/(2*je);or>0&&or<1&&Ce.push(or);var Ir=(-fr-Cr)/(2*je);Ir>0&&Ir<1&&Ce.push(Ir)}}for(var Wr=Ce.length,Nr=Wr,jr;Wr--;)hr=Ce[Wr],jr=1-hr,er[0][Wr]=jr*jr*jr*Zt+3*jr*jr*hr*ve+3*jr*hr*hr*Ae+hr*hr*hr*Ie,er[1][Wr]=jr*jr*jr*ne+3*jr*jr*hr*ge+3*jr*hr*hr*Pe+hr*hr*hr*De;return er[0][Nr]=Zt,er[1][Nr]=ne,er[0][Nr+1]=Ie,er[1][Nr+1]=De,er[0].length=er[1].length=Nr+2,{min:{x:Math.min.apply(0,er[0]),y:Math.min.apply(0,er[1])},max:{x:Math.max.apply(0,er[0]),y:Math.max.apply(0,er[1])}}},ae=function(Zt,ne,ve,ge,Ae,Pe,Ie,De){if(!(Math.max(Zt,ve)<Math.min(Ae,Ie)||Math.min(Zt,ve)>Math.max(Ae,Ie)||Math.max(ne,ge)<Math.min(Pe,De)||Math.min(ne,ge)>Math.max(Pe,De))){var Ce=(Zt*ge-ne*ve)*(Ae-Ie)-(Zt-ve)*(Ae*De-Pe*Ie),er=(Zt*ge-ne*ve)*(Pe-De)-(ne-ge)*(Ae*De-Pe*Ie),je=(Zt-ve)*(Pe-De)-(ne-ge)*(Ae-Ie);if(!!je){var fr=Ce/je,Sr=er/je,hr=+fr.toFixed(2),gr=+Sr.toFixed(2);if(!(hr<+Math.min(Zt,ve).toFixed(2)||hr>+Math.max(Zt,ve).toFixed(2)||hr<+Math.min(Ae,Ie).toFixed(2)||hr>+Math.max(Ae,Ie).toFixed(2)||gr<+Math.min(ne,ge).toFixed(2)||gr>+Math.max(ne,ge).toFixed(2)||gr<+Math.min(Pe,De).toFixed(2)||gr>+Math.max(Pe,De).toFixed(2)))return{x:fr,y:Sr}}}},Nt=function(Zt,ne,ve){return ne>=Zt.x&&ne<=Zt.x+Zt.width&&ve>=Zt.y&&ve<=Zt.y+Zt.height},Lt=function(Zt,ne,ve,ge){return Zt===null&&(Zt=ne=ve=ge=0),ne===null&&(ne=Zt.y,ve=Zt.width,ge=Zt.height,Zt=Zt.x),{x:Zt,y:ne,width:ve,w:ve,height:ge,h:ge,x2:Zt+ve,y2:ne+ge,cx:Zt+ve/2,cy:ne+ge/2,r1:Math.min(ve,ge)/2,r2:Math.max(ve,ge)/2,r0:Math.sqrt(ve*ve+ge*ge)/2,path:H(Zt,ne,ve,ge),vb:[Zt,ne,ve,ge].join(" ")}},bt=function(Zt,ne){return Zt=Lt(Zt),ne=Lt(ne),Nt(ne,Zt.x,Zt.y)||Nt(ne,Zt.x2,Zt.y)||Nt(ne,Zt.x,Zt.y2)||Nt(ne,Zt.x2,Zt.y2)||Nt(Zt,ne.x,ne.y)||Nt(Zt,ne.x2,ne.y)||Nt(Zt,ne.x,ne.y2)||Nt(Zt,ne.x2,ne.y2)||(Zt.x<ne.x2&&Zt.x>ne.x||ne.x<Zt.x2&&ne.x>Zt.x)&&(Zt.y<ne.y2&&Zt.y>ne.y||ne.y<Zt.y2&&ne.y>Zt.y)},at=function(Zt,ne,ve,ge,Ae,Pe,Ie,De){(0,b.isArray)(Zt)||(Zt=[Zt,ne,ve,ge,Ae,Pe,Ie,De]);var Ce=re.apply(null,Zt);return Lt(Ce.min.x,Ce.min.y,Ce.max.x-Ce.min.x,Ce.max.y-Ce.min.y)},rt=function(Zt,ne,ve,ge,Ae,Pe,Ie,De,Ce){var er=1-Ce,je=Math.pow(er,3),fr=Math.pow(er,2),Sr=Ce*Ce,hr=Sr*Ce,gr=je*Zt+fr*3*Ce*ve+er*3*Ce*Ce*Ae+hr*Ie,vr=je*ne+fr*3*Ce*ge+er*3*Ce*Ce*Pe+hr*De,Cr=Zt+2*Ce*(ve-Zt)+Sr*(Ae-2*ve+Zt),or=ne+2*Ce*(ge-ne)+Sr*(Pe-2*ge+ne),Ir=ve+2*Ce*(Ae-ve)+Sr*(Ie-2*Ae+ve),Wr=ge+2*Ce*(Pe-ge)+Sr*(De-2*Pe+ge),Nr=er*Zt+Ce*ve,jr=er*ne+Ce*ge,Qr=er*Ae+Ce*Ie,Zr=er*Pe+Ce*De,Bn=90-Math.atan2(Cr-Ir,or-Wr)*180/Math.PI;return{x:gr,y:vr,m:{x:Cr,y:or},n:{x:Ir,y:Wr},start:{x:Nr,y:jr},end:{x:Qr,y:Zr},alpha:Bn}},vt=function(Zt,ne,ve){var ge=at(Zt),Ae=at(ne);if(!bt(ge,Ae))return ve?0:[];for(var Pe=Vt.apply(0,Zt),Ie=Vt.apply(0,ne),De=~~(Pe/8),Ce=~~(Ie/8),er=[],je=[],fr={},Sr=ve?0:[],hr=0;hr<De+1;hr++){var gr=rt.apply(0,Zt.concat(hr/De));er.push({x:gr.x,y:gr.y,t:hr/De})}for(var hr=0;hr<Ce+1;hr++){var gr=rt.apply(0,ne.concat(hr/Ce));je.push({x:gr.x,y:gr.y,t:hr/Ce})}for(var hr=0;hr<De;hr++)for(var vr=0;vr<Ce;vr++){var Cr=er[hr],or=er[hr+1],Ir=je[vr],Wr=je[vr+1],Nr=Math.abs(or.x-Cr.x)<.001?"y":"x",jr=Math.abs(Wr.x-Ir.x)<.001?"y":"x",Qr=ae(Cr.x,Cr.y,or.x,or.y,Ir.x,Ir.y,Wr.x,Wr.y);if(Qr){if(fr[Qr.x.toFixed(4)]===Qr.y.toFixed(4))continue;fr[Qr.x.toFixed(4)]=Qr.y.toFixed(4);var Zr=Cr.t+Math.abs((Qr[Nr]-Cr[Nr])/(or[Nr]-Cr[Nr]))*(or.t-Cr.t),Bn=Ir.t+Math.abs((Qr[jr]-Ir[jr])/(Wr[jr]-Ir[jr]))*(Wr.t-Ir.t);Zr>=0&&Zr<=1&&Bn>=0&&Bn<=1&&(ve?Sr++:Sr.push({x:Qr.x,y:Qr.y,t1:Zr,t2:Bn}))}}return Sr},tt=function(Zt,ne,ve){Zt=_t(Zt),ne=_t(ne);for(var ge,Ae,Pe,Ie,De,Ce,er,je,fr,Sr,hr=ve?0:[],gr=0,vr=Zt.length;gr<vr;gr++){var Cr=Zt[gr];if(Cr[0]==="M")ge=De=Cr[1],Ae=Ce=Cr[2];else{Cr[0]==="C"?(fr=[ge,Ae].concat(Cr.slice(1)),ge=fr[6],Ae=fr[7]):(fr=[ge,Ae,ge,Ae,De,Ce,De,Ce],ge=De,Ae=Ce);for(var or=0,Ir=ne.length;or<Ir;or++){var Wr=ne[or];if(Wr[0]==="M")Pe=er=Wr[1],Ie=je=Wr[2];else{Wr[0]==="C"?(Sr=[Pe,Ie].concat(Wr.slice(1)),Pe=Sr[6],Ie=Sr[7]):(Sr=[Pe,Ie,Pe,Ie,er,je,er,je],Pe=er,Ie=je);var Nr=vt(fr,Sr,ve);if(ve)hr+=Nr;else{for(var jr=0,Qr=Nr.length;jr<Qr;jr++)Nr[jr].segment1=gr,Nr[jr].segment2=or,Nr[jr].bez1=fr,Nr[jr].bez2=Sr;hr=hr.concat(Nr)}}}}}return hr};function q(Zt,ne){return tt(Zt,ne)}var Et=/,?([a-z]),?/gi;function It(Zt){return Zt.join(",").replace(Et,"$1")}function Kt(Zt){return Math.sqrt(Zt[0]*Zt[0]+Zt[1]*Zt[1])}function ue(Zt,ne){return Kt(Zt)*Kt(ne)?(Zt[0]*ne[0]+Zt[1]*ne[1])/(Kt(Zt)*Kt(ne)):1}function we(Zt,ne){return(Zt[0]*ne[1]<Zt[1]*ne[0]?-1:1)*Math.acos(ue(Zt,ne))}function Ye(Zt,ne){return Zt[0]===ne[0]&&Zt[1]===ne[1]}function te(Zt,ne){var ve=ne[1],ge=ne[2],Ae=(0,b.mod)((0,b.toRadian)(ne[3]),Math.PI*2),Pe=ne[4],Ie=ne[5],De=Zt[0],Ce=Zt[1],er=ne[6],je=ne[7],fr=Math.cos(Ae)*(De-er)/2+Math.sin(Ae)*(Ce-je)/2,Sr=-1*Math.sin(Ae)*(De-er)/2+Math.cos(Ae)*(Ce-je)/2,hr=fr*fr/(ve*ve)+Sr*Sr/(ge*ge);hr>1&&(ve*=Math.sqrt(hr),ge*=Math.sqrt(hr));var gr=ve*ve*(Sr*Sr)+ge*ge*(fr*fr),vr=gr?Math.sqrt((ve*ve*(ge*ge)-gr)/gr):1;Pe===Ie&&(vr*=-1),isNaN(vr)&&(vr=0);var Cr=ge?vr*ve*Sr/ge:0,or=ve?vr*-ge*fr/ve:0,Ir=(De+er)/2+Math.cos(Ae)*Cr-Math.sin(Ae)*or,Wr=(Ce+je)/2+Math.sin(Ae)*Cr+Math.cos(Ae)*or,Nr=[(fr-Cr)/ve,(Sr-or)/ge],jr=[(-1*fr-Cr)/ve,(-1*Sr-or)/ge],Qr=we([1,0],Nr),Zr=we(Nr,jr);return ue(Nr,jr)<=-1&&(Zr=Math.PI),ue(Nr,jr)>=1&&(Zr=0),Ie===0&&Zr>0&&(Zr=Zr-2*Math.PI),Ie===1&&Zr<0&&(Zr=Zr+2*Math.PI),{cx:Ir,cy:Wr,rx:Ye(Zt,[er,je])?0:ve,ry:Ye(Zt,[er,je])?0:ge,startAngle:Qr,endAngle:Qr+Zr,xRotation:Ae,arcFlag:Pe,sweepFlag:Ie}}function pe(Zt,ne){return[ne[0]+(ne[0]-Zt[0]),ne[1]+(ne[1]-Zt[1])]}function Te(Zt){Zt=L(Zt);for(var ne=[],ve=null,ge=null,Ae=null,Pe=0,Ie=Zt.length,De=0;De<Ie;De++){var Ce=Zt[De];ge=Zt[De+1];var er=Ce[0],je={command:er,prePoint:ve,params:Ce,startTangent:null,endTangent:null};switch(er){case"M":Ae=[Ce[1],Ce[2]],Pe=De;break;case"A":var fr=te(ve,Ce);je.arcParams=fr;break;default:break}if(er==="Z")ve=Ae,ge=Zt[Pe+1];else{var Sr=Ce.length;ve=[Ce[Sr-2],Ce[Sr-1]]}ge&&ge[0]==="Z"&&(ge=Zt[Pe],ne[Pe]&&(ne[Pe].prePoint=ve)),je.currentPoint=ve,ne[Pe]&&Ye(ve,ne[Pe].currentPoint)&&(ne[Pe].prePoint=je.prePoint);var hr=ge?[ge[ge.length-2],ge[ge.length-1]]:null;je.nextPoint=hr;var gr=je.prePoint;if(["L","H","V"].includes(er))je.startTangent=[gr[0]-ve[0],gr[1]-ve[1]],je.endTangent=[ve[0]-gr[0],ve[1]-gr[1]];else if(er==="Q"){var vr=[Ce[1],Ce[2]];je.startTangent=[gr[0]-vr[0],gr[1]-vr[1]],je.endTangent=[ve[0]-vr[0],ve[1]-vr[1]]}else if(er==="T"){var Cr=ne[De-1],vr=pe(Cr.currentPoint,gr);Cr.command==="Q"?(je.command="Q",je.startTangent=[gr[0]-vr[0],gr[1]-vr[1]],je.endTangent=[ve[0]-vr[0],ve[1]-vr[1]]):(je.command="TL",je.startTangent=[gr[0]-ve[0],gr[1]-ve[1]],je.endTangent=[ve[0]-gr[0],ve[1]-gr[1]])}else if(er==="C"){var or=[Ce[1],Ce[2]],Ir=[Ce[3],Ce[4]];je.startTangent=[gr[0]-or[0],gr[1]-or[1]],je.endTangent=[ve[0]-Ir[0],ve[1]-Ir[1]],je.startTangent[0]===0&&je.startTangent[1]===0&&(je.startTangent=[or[0]-Ir[0],or[1]-Ir[1]]),je.endTangent[0]===0&&je.endTangent[1]===0&&(je.endTangent=[Ir[0]-or[0],Ir[1]-or[1]])}else if(er==="S"){var Cr=ne[De-1],or=pe(Cr.currentPoint,gr),Ir=[Ce[1],Ce[2]];Cr.command==="C"?(je.command="C",je.startTangent=[gr[0]-or[0],gr[1]-or[1]],je.endTangent=[ve[0]-Ir[0],ve[1]-Ir[1]]):(je.command="SQ",je.startTangent=[gr[0]-Ir[0],gr[1]-Ir[1]],je.endTangent=[ve[0]-Ir[0],ve[1]-Ir[1]])}else if(er==="A"){var Wr=.001,Nr=je.arcParams||{},jr=Nr.cx,Qr=jr===void 0?0:jr,Zr=Nr.cy,Bn=Zr===void 0?0:Zr,hn=Nr.rx,Hn=hn===void 0?0:hn,yi=Nr.ry,Jn=yi===void 0?0:yi,Ci=Nr.sweepFlag,Mi=Ci===void 0?0:Ci,Fr=Nr.startAngle,oi=Fr===void 0?0:Fr,Oi=Nr.endAngle,ci=Oi===void 0?0:Oi;Mi===0&&(Wr*=-1);var Mn=Hn*Math.cos(oi-Wr)+Qr,vi=Jn*Math.sin(oi-Wr)+Bn;je.startTangent=[Mn-Ae[0],vi-Ae[1]];var Xi=Hn*Math.cos(oi+ci+Wr)+Qr,Ii=Jn*Math.sin(oi+ci-Wr)+Bn;je.endTangent=[gr[0]-Xi,gr[1]-Ii]}ne.push(je)}return ne}var ze=function(Zt,ne,ve){return Zt>=ne&&Zt<=ve};function ur(Zt,ne,ve,ge){var Ae=.001,Pe={x:ve.x-Zt.x,y:ve.y-Zt.y},Ie={x:ne.x-Zt.x,y:ne.y-Zt.y},De={x:ge.x-ve.x,y:ge.y-ve.y},Ce=Ie.x*De.y-Ie.y*De.x,er=Ce*Ce,je=Ie.x*Ie.x+Ie.y*Ie.y,fr=De.x*De.x+De.y*De.y,Sr=null;if(er>Ae*je*fr){var hr=(Pe.x*De.y-Pe.y*De.x)/Ce,gr=(Pe.x*Ie.y-Pe.y*Ie.x)/Ce;ze(hr,0,1)&&ze(gr,0,1)&&(Sr={x:Zt.x+hr*Ie.x,y:Zt.y+hr*Ie.y})}return Sr}var Ze=1e-6;function pr(Zt){return Math.abs(Zt)<Ze?0:Zt<0?-1:1}function Pr(Zt,ne,ve){return(ve[0]-Zt[0])*(ne[1]-Zt[1])==(ne[0]-Zt[0])*(ve[1]-Zt[1])&&Math.min(Zt[0],ne[0])<=ve[0]&&ve[0]<=Math.max(Zt[0],ne[0])&&Math.min(Zt[1],ne[1])<=ve[1]&&ve[1]<=Math.max(Zt[1],ne[1])}function Or(Zt,ne,ve){var ge=!1,Ae=Zt.length;if(Ae<=2)return!1;for(var Pe=0;Pe<Ae;Pe++){var Ie=Zt[Pe],De=Zt[(Pe+1)%Ae];if(Pr(Ie,De,[ne,ve]))return!0;pr(Ie[1]-ve)>0!=pr(De[1]-ve)>0&&pr(ne-(ve-Ie[1])*(Ie[0]-De[0])/(Ie[1]-De[1])-Ie[0])<0&&(ge=!ge)}return ge}function nn(Zt){for(var ne=[],ve=Zt.length,ge=0;ge<ve-1;ge++){var Ae=Zt[ge],Pe=Zt[ge+1];ne.push({from:{x:Ae[0],y:Ae[1]},to:{x:Pe[0],y:Pe[1]}})}if(ne.length>1){var Ie=Zt[0],De=Zt[ve-1];ne.push({from:{x:De[0],y:De[1]},to:{x:Ie[0],y:Ie[1]}})}return ne}function kn(Zt,ne){var ve=!1;return(0,b.each)(Zt,function(ge){if(ur(ge.from,ge.to,ne.from,ne.to))return ve=!0,!1}),ve}function ii(Zt){var ne=Zt.map(function(ge){return ge[0]}),ve=Zt.map(function(ge){return ge[1]});return{minX:Math.min.apply(null,ne),maxX:Math.max.apply(null,ne),minY:Math.min.apply(null,ve),maxY:Math.max.apply(null,ve)}}function gi(Zt,ne){return!(ne.minX>Zt.maxX||ne.maxX<Zt.minX||ne.minY>Zt.maxY||ne.maxY<Zt.minY)}function Si(Zt,ne){if(Zt.length<2||ne.length<2)return!1;var ve=ii(Zt),ge=ii(ne);if(!gi(ve,ge))return!1;var Ae=!1;if((0,b.each)(ne,function(Ce){if(Or(Zt,Ce[0],Ce[1]))return Ae=!0,!1}),Ae||((0,b.each)(Zt,function(Ce){if(Or(ne,Ce[0],Ce[1]))return Ae=!0,!1}),Ae))return!0;var Pe=nn(Zt),Ie=nn(ne),De=!1;return(0,b.each)(Ie,function(Ce){if(kn(Pe,Ce))return De=!0,!1}),De}},84023:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.isSamePoint=void 0;var b=p(49242);function I(_){return Math.sqrt(_[0]*_[0]+_[1]*_[1])}function P(_,E){return I(_)*I(E)?(_[0]*E[0]+_[1]*E[1])/(I(_)*I(E)):1}function O(_,E){return(_[0]*E[1]<_[1]*E[0]?-1:1)*Math.acos(P(_,E))}function L(_,E){return _[0]===E[0]&&_[1]===E[1]}S.isSamePoint=L;function A(_,E){var g=E[1],w=E[2],d=(0,b.mod)((0,b.toRadian)(E[3]),Math.PI*2),y=E[4],m=E[5],C=_[0],T=_[1],B=E[6],D=E[7],Y=Math.cos(d)*(C-B)/2+Math.sin(d)*(T-D)/2,K=-1*Math.sin(d)*(C-B)/2+Math.cos(d)*(T-D)/2,H=Y*Y/(g*g)+K*K/(w*w);H>1&&(g*=Math.sqrt(H),w*=Math.sqrt(H));var st=g*g*(K*K)+w*w*(Y*Y),pt=st?Math.sqrt((g*g*(w*w)-st)/st):1;y===m&&(pt*=-1),isNaN(pt)&&(pt=0);var ct=w?pt*g*K/w:0,Ot=g?pt*-w*Y/g:0,Rt=(C+B)/2+Math.cos(d)*ct-Math.sin(d)*Ot,Qt=(T+D)/2+Math.sin(d)*ct+Math.cos(d)*Ot,Gt=[(Y-ct)/g,(K-Ot)/w],Z=[(-1*Y-ct)/g,(-1*K-Ot)/w],nt=O([1,0],Gt),Q=O(Gt,Z);return P(Gt,Z)<=-1&&(Q=Math.PI),P(Gt,Z)>=1&&(Q=0),m===0&&Q>0&&(Q=Q-2*Math.PI),m===1&&Q<0&&(Q=Q+2*Math.PI),{cx:Rt,cy:Qt,rx:L(_,[B,D])?0:g,ry:L(_,[B,D])?0:w,startAngle:nt,endAngle:nt+Q,xRotation:d,arcFlag:y,sweepFlag:m}}S.default=A},21528:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var p=function(I,P,O){return I>=P&&I<=O};function b(I,P,O,L){var A=.001,_={x:O.x-I.x,y:O.y-I.y},E={x:P.x-I.x,y:P.y-I.y},g={x:L.x-O.x,y:L.y-O.y},w=E.x*g.y-E.y*g.x,d=w*w,y=E.x*E.x+E.y*E.y,m=g.x*g.x+g.y*g.y,C=null;if(d>A*y*m){var T=(_.x*g.y-_.y*g.x)/w,B=(_.x*E.y-_.y*E.x)/w;p(T,0,1)&&p(B,0,1)&&(C={x:I.x+T*E.x,y:I.y+T*E.y})}return C}S.default=b},70146:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(66957),I=p(21528),P=p(49242);function O(g){for(var w=[],d=g.length,y=0;y<d-1;y++){var m=g[y],C=g[y+1];w.push({from:{x:m[0],y:m[1]},to:{x:C[0],y:C[1]}})}if(w.length>1){var T=g[0],B=g[d-1];w.push({from:{x:B[0],y:B[1]},to:{x:T[0],y:T[1]}})}return w}function L(g,w){var d=!1;return(0,P.each)(g,function(y){if((0,I.default)(y.from,y.to,w.from,w.to))return d=!0,!1}),d}function A(g){var w=g.map(function(y){return y[0]}),d=g.map(function(y){return y[1]});return{minX:Math.min.apply(null,w),maxX:Math.max.apply(null,w),minY:Math.min.apply(null,d),maxY:Math.max.apply(null,d)}}function _(g,w){return!(w.minX>g.maxX||w.maxX<g.minX||w.minY>g.maxY||w.maxY<g.minY)}function E(g,w){if(g.length<2||w.length<2)return!1;var d=A(g),y=A(w);if(!_(d,y))return!1;var m=!1;if((0,P.each)(w,function(D){if((0,b.default)(g,D[0],D[1]))return m=!0,!1}),m||((0,P.each)(g,function(D){if((0,b.default)(w,D[0],D[1]))return m=!0,!1}),m))return!0;var C=O(g),T=O(w),B=!1;return(0,P.each)(T,function(D){if(L(C,D))return B=!0,!1}),B}S.default=E},28498:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(49242),I=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,P=new RegExp("([a-z])["+I+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+I+"]*,?["+I+"]*)+)","ig"),O=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+I+"]*,?["+I+"]*","ig");function L(A){if(!A)return null;if((0,b.isArray)(A))return A;var _={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},E=[];return String(A).replace(P,function(g,w,d){var y=[],m=w.toLowerCase();if(d.replace(O,function(C,T){T&&y.push(+T)}),m==="m"&&y.length>2&&(E.push([w].concat(y.splice(0,2))),m="l",w=w==="m"?"l":"L"),m==="o"&&y.length===1&&E.push([w,y[0]]),m==="r")E.push([w].concat(y));else for(;y.length>=_[m]&&(E.push([w].concat(y.splice(0,_[m]))),!!_[m]););return""}),E}S.default=L},80315:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(49242),I=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,P=/[^\s\,]+/ig;function O(L){var A=L||[];if((0,b.isArray)(A))return A;if((0,b.isString)(A))return A=A.match(I),(0,b.each)(A,function(_,E){if(_=_.match(P),_[0].length>1){var g=_[0].charAt(0);_.splice(1,0,_[0].substr(1)),_[0]=g}(0,b.each)(_,function(w,d){isNaN(w)||(_[d]=+w)}),A[E]=_}),A}S.default=O},74479:function(Ct,S,p){"use strict";var b;b={value:!0};var I=p(28498),P=/[a-z]/;function O(A,_){return[_[0]+(_[0]-A[0]),_[1]+(_[1]-A[1])]}function L(A){var _=(0,I.default)(A);if(!_||!_.length)return[["M",0,0]];for(var E=!1,g=0;g<_.length;g++){var w=_[g][0];if(P.test(w)||["V","H","T","S"].indexOf(w)>=0){E=!0;break}}if(!E)return _;var d=[],y=0,m=0,C=0,T=0,B=0,D,Y,K=_[0];(K[0]==="M"||K[0]==="m")&&(y=+K[1],m=+K[2],C=y,T=m,B++,d[0]=["M",y,m]);for(var g=B,H=_.length;g<H;g++){var st=_[g],pt=d[g-1],ct=[],w=st[0],Ot=w.toUpperCase();if(w!==Ot)switch(ct[0]=Ot,Ot){case"A":ct[1]=st[1],ct[2]=st[2],ct[3]=st[3],ct[4]=st[4],ct[5]=st[5],ct[6]=+st[6]+y,ct[7]=+st[7]+m;break;case"V":ct[1]=+st[1]+m;break;case"H":ct[1]=+st[1]+y;break;case"M":C=+st[1]+y,T=+st[2]+m,ct[1]=C,ct[2]=T;break;default:for(var Rt=1,Qt=st.length;Rt<Qt;Rt++)ct[Rt]=+st[Rt]+(Rt%2?y:m)}else ct=_[g];switch(Ot){case"Z":y=+C,m=+T;break;case"H":y=ct[1],ct=["L",y,m];break;case"V":m=ct[1],ct=["L",y,m];break;case"T":y=ct[1],m=ct[2];var Gt=O([pt[1],pt[2]],[pt[3],pt[4]]);ct=["Q",Gt[0],Gt[1],y,m];break;case"S":y=ct[ct.length-2],m=ct[ct.length-1];var Z=pt.length,nt=O([pt[Z-4],pt[Z-3]],[pt[Z-2],pt[Z-1]]);ct=["C",nt[0],nt[1],ct[1],ct[2],y,m];break;case"M":C=ct[ct.length-2],T=ct[ct.length-1];break;default:y=ct[ct.length-2],m=ct[ct.length-1]}d.push(ct)}return d}S.Z=L},49274:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(84023),I=p(84023),P=p(80315);function O(A,_){return[_[0]+(_[0]-A[0]),_[1]+(_[1]-A[1])]}function L(A){A=(0,P.default)(A);for(var _=[],E=null,g=null,w=null,d=0,y=A.length,m=0;m<y;m++){var C=A[m];g=A[m+1];var T=C[0],B={command:T,prePoint:E,params:C,startTangent:null,endTangent:null};switch(T){case"M":w=[C[1],C[2]],d=m;break;case"A":var D=(0,b.default)(E,C);B.arcParams=D;break;default:break}if(T==="Z")E=w,g=A[d+1];else{var Y=C.length;E=[C[Y-2],C[Y-1]]}g&&g[0]==="Z"&&(g=A[d],_[d]&&(_[d].prePoint=E)),B.currentPoint=E,_[d]&&(0,I.isSamePoint)(E,_[d].currentPoint)&&(_[d].prePoint=B.prePoint);var K=g?[g[g.length-2],g[g.length-1]]:null;B.nextPoint=K;var H=B.prePoint;if(["L","H","V"].includes(T))B.startTangent=[H[0]-E[0],H[1]-E[1]],B.endTangent=[E[0]-H[0],E[1]-H[1]];else if(T==="Q"){var st=[C[1],C[2]];B.startTangent=[H[0]-st[0],H[1]-st[1]],B.endTangent=[E[0]-st[0],E[1]-st[1]]}else if(T==="T"){var pt=_[m-1],st=O(pt.currentPoint,H);pt.command==="Q"?(B.command="Q",B.startTangent=[H[0]-st[0],H[1]-st[1]],B.endTangent=[E[0]-st[0],E[1]-st[1]]):(B.command="TL",B.startTangent=[H[0]-E[0],H[1]-E[1]],B.endTangent=[E[0]-H[0],E[1]-H[1]])}else if(T==="C"){var ct=[C[1],C[2]],Ot=[C[3],C[4]];B.startTangent=[H[0]-ct[0],H[1]-ct[1]],B.endTangent=[E[0]-Ot[0],E[1]-Ot[1]],B.startTangent[0]===0&&B.startTangent[1]===0&&(B.startTangent=[ct[0]-Ot[0],ct[1]-Ot[1]]),B.endTangent[0]===0&&B.endTangent[1]===0&&(B.endTangent=[Ot[0]-ct[0],Ot[1]-ct[1]])}else if(T==="S"){var pt=_[m-1],ct=O(pt.currentPoint,H),Ot=[C[1],C[2]];pt.command==="C"?(B.command="C",B.startTangent=[H[0]-ct[0],H[1]-ct[1]],B.endTangent=[E[0]-Ot[0],E[1]-Ot[1]]):(B.command="SQ",B.startTangent=[H[0]-Ot[0],H[1]-Ot[1]],B.endTangent=[E[0]-Ot[0],E[1]-Ot[1]])}else if(T==="A"){var Rt=.001,Qt=B.arcParams||{},Gt=Qt.cx,Z=Gt===void 0?0:Gt,nt=Qt.cy,Q=nt===void 0?0:nt,dt=Qt.rx,lt=dt===void 0?0:dt,z=Qt.ry,$=z===void 0?0:z,j=Qt.sweepFlag,f=j===void 0?0:j,yt=Qt.startAngle,_t=yt===void 0?0:yt,jt=Qt.endAngle,qt=jt===void 0?0:jt;f===0&&(Rt*=-1);var Vt=lt*Math.cos(_t-Rt)+Z,re=$*Math.sin(_t-Rt)+Q;B.startTangent=[Vt-w[0],re-w[1]];var ae=lt*Math.cos(_t+qt+Rt)+Z,Nt=$*Math.sin(_t+qt-Rt)+Q;B.endTangent=[H[0]-ae,H[1]-Nt]}_.push(B)}return _}S.default=L},66957:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var p=1e-6;function b(O){return Math.abs(O)<p?0:O<0?-1:1}function I(O,L,A){return(A[0]-O[0])*(L[1]-O[1])==(L[0]-O[0])*(A[1]-O[1])&&Math.min(O[0],L[0])<=A[0]&&A[0]<=Math.max(O[0],L[0])&&Math.min(O[1],L[1])<=A[1]&&A[1]<=Math.max(O[1],L[1])}function P(O,L,A){var _=!1,E=O.length;if(E<=2)return!1;for(var g=0;g<E;g++){var w=O[g],d=O[(g+1)%E];if(I(w,d,[L,A]))return!0;b(w[1]-A)>0!=b(d[1]-A)>0&&b(L-(A-w[1])*(w[0]-d[0])/(w[1]-d[1])-w[0])<0&&(_=!_)}return _}S.default=P},2443:function(Ct,S,p){"use strict";p.r(S),p.d(S,{Category:function(){return j},Identity:function(){return ve},Linear:function(){return Kt},Log:function(){return ze},Pow:function(){return Ze},Quantile:function(){return ii},Quantize:function(){return nn},Scale:function(){return A},Time:function(){return Pr},TimeCat:function(){return tt},getScale:function(){return Si},getTickMethod:function(){return P},registerScale:function(){return Zt},registerTickMethod:function(){return O}});var b=p(49242),I={};function P(it){return I[it]}function O(it,mt){I[it]=mt}var L=function(){function it(mt){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=mt,this.initCfg(),this.init()}return it.prototype.translate=function(mt){return mt},it.prototype.change=function(mt){(0,b.assign)(this.__cfg__,mt),this.init()},it.prototype.clone=function(){return this.constructor(this.__cfg__)},it.prototype.getTicks=function(){var mt=this;return(0,b.map)(this.ticks,function(St,Pt){return(0,b.isObject)(St)?St:{text:mt.getText(St,Pt),tickValue:St,value:mt.scale(St)}})},it.prototype.getText=function(mt,St){var Pt=this.formatter,Wt=Pt?Pt(mt,St):mt;return(0,b.isNil)(Wt)||!(0,b.isFunction)(Wt.toString)?"":Wt.toString()},it.prototype.getConfig=function(mt){return this.__cfg__[mt]},it.prototype.init=function(){(0,b.assign)(this,this.__cfg__),this.setDomain(),(0,b.isEmpty)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},it.prototype.initCfg=function(){},it.prototype.setDomain=function(){},it.prototype.calculateTicks=function(){var mt=this.tickMethod,St=[];if((0,b.isString)(mt)){var Pt=P(mt);if(!Pt)throw new Error("There is no method to to calculate ticks!");St=Pt(this)}else(0,b.isFunction)(mt)&&(St=mt(this));return St},it.prototype.rangeMin=function(){return this.range[0]},it.prototype.rangeMax=function(){return this.range[1]},it.prototype.calcPercent=function(mt,St,Pt){return(0,b.isNumber)(mt)?(mt-St)/(Pt-St):NaN},it.prototype.calcValue=function(mt,St,Pt){return St+mt*(Pt-St)},it}(),A=L,_=function(it,mt){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(St,Pt){St.__proto__=Pt}||function(St,Pt){for(var Wt in Pt)Object.prototype.hasOwnProperty.call(Pt,Wt)&&(St[Wt]=Pt[Wt])},_(it,mt)};function E(it,mt){if(typeof mt!="function"&&mt!==null)throw new TypeError("Class extends value "+String(mt)+" is not a constructor or null");_(it,mt);function St(){this.constructor=it}it.prototype=mt===null?Object.create(mt):(St.prototype=mt.prototype,new St)}var g=function(){return g=Object.assign||function(mt){for(var St,Pt=1,Wt=arguments.length;Pt<Wt;Pt++){St=arguments[Pt];for(var Jt in St)Object.prototype.hasOwnProperty.call(St,Jt)&&(mt[Jt]=St[Jt])}return mt},g.apply(this,arguments)};function w(it,mt){var St={};for(var Pt in it)Object.prototype.hasOwnProperty.call(it,Pt)&&mt.indexOf(Pt)<0&&(St[Pt]=it[Pt]);if(it!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Wt=0,Pt=Object.getOwnPropertySymbols(it);Wt<Pt.length;Wt++)mt.indexOf(Pt[Wt])<0&&Object.prototype.propertyIsEnumerable.call(it,Pt[Wt])&&(St[Pt[Wt]]=it[Pt[Wt]]);return St}function d(it,mt,St,Pt){var Wt=arguments.length,Jt=Wt<3?mt:Pt===null?Pt=Object.getOwnPropertyDescriptor(mt,St):Pt,de;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Jt=Reflect.decorate(it,mt,St,Pt);else for(var Ee=it.length-1;Ee>=0;Ee--)(de=it[Ee])&&(Jt=(Wt<3?de(Jt):Wt>3?de(mt,St,Jt):de(mt,St))||Jt);return Wt>3&&Jt&&Object.defineProperty(mt,St,Jt),Jt}function y(it,mt){return function(St,Pt){mt(St,Pt,it)}}function m(it,mt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(it,mt)}function C(it,mt,St,Pt){function Wt(Jt){return Jt instanceof St?Jt:new St(function(de){de(Jt)})}return new(St||(St=Promise))(function(Jt,de){function Ee(Xe){try{me(Pt.next(Xe))}catch(dr){de(dr)}}function Fe(Xe){try{me(Pt.throw(Xe))}catch(dr){de(dr)}}function me(Xe){Xe.done?Jt(Xe.value):Wt(Xe.value).then(Ee,Fe)}me((Pt=Pt.apply(it,mt||[])).next())})}function T(it,mt){var St={label:0,sent:function(){if(Jt[0]&1)throw Jt[1];return Jt[1]},trys:[],ops:[]},Pt,Wt,Jt,de;return de={next:Ee(0),throw:Ee(1),return:Ee(2)},typeof Symbol=="function"&&(de[Symbol.iterator]=function(){return this}),de;function Ee(me){return function(Xe){return Fe([me,Xe])}}function Fe(me){if(Pt)throw new TypeError("Generator is already executing.");for(;St;)try{if(Pt=1,Wt&&(Jt=me[0]&2?Wt.return:me[0]?Wt.throw||((Jt=Wt.return)&&Jt.call(Wt),0):Wt.next)&&!(Jt=Jt.call(Wt,me[1])).done)return Jt;switch(Wt=0,Jt&&(me=[me[0]&2,Jt.value]),me[0]){case 0:case 1:Jt=me;break;case 4:return St.label++,{value:me[1],done:!1};case 5:St.label++,Wt=me[1],me=[0];continue;case 7:me=St.ops.pop(),St.trys.pop();continue;default:if(Jt=St.trys,!(Jt=Jt.length>0&&Jt[Jt.length-1])&&(me[0]===6||me[0]===2)){St=0;continue}if(me[0]===3&&(!Jt||me[1]>Jt[0]&&me[1]<Jt[3])){St.label=me[1];break}if(me[0]===6&&St.label<Jt[1]){St.label=Jt[1],Jt=me;break}if(Jt&&St.label<Jt[2]){St.label=Jt[2],St.ops.push(me);break}Jt[2]&&St.ops.pop(),St.trys.pop();continue}me=mt.call(it,St)}catch(Xe){me=[6,Xe],Wt=0}finally{Pt=Jt=0}if(me[0]&5)throw me[1];return{value:me[0]?me[1]:void 0,done:!0}}}var B=Object.create?function(it,mt,St,Pt){Pt===void 0&&(Pt=St);var Wt=Object.getOwnPropertyDescriptor(mt,St);(!Wt||("get"in Wt?!mt.__esModule:Wt.writable||Wt.configurable))&&(Wt={enumerable:!0,get:function(){return mt[St]}}),Object.defineProperty(it,Pt,Wt)}:function(it,mt,St,Pt){Pt===void 0&&(Pt=St),it[Pt]=mt[St]};function D(it,mt){for(var St in it)St!=="default"&&!Object.prototype.hasOwnProperty.call(mt,St)&&B(mt,it,St)}function Y(it){var mt=typeof Symbol=="function"&&Symbol.iterator,St=mt&&it[mt],Pt=0;if(St)return St.call(it);if(it&&typeof it.length=="number")return{next:function(){return it&&Pt>=it.length&&(it=void 0),{value:it&&it[Pt++],done:!it}}};throw new TypeError(mt?"Object is not iterable.":"Symbol.iterator is not defined.")}function K(it,mt){var St=typeof Symbol=="function"&&it[Symbol.iterator];if(!St)return it;var Pt=St.call(it),Wt,Jt=[],de;try{for(;(mt===void 0||mt-- >0)&&!(Wt=Pt.next()).done;)Jt.push(Wt.value)}catch(Ee){de={error:Ee}}finally{try{Wt&&!Wt.done&&(St=Pt.return)&&St.call(Pt)}finally{if(de)throw de.error}}return Jt}function H(){for(var it=[],mt=0;mt<arguments.length;mt++)it=it.concat(K(arguments[mt]));return it}function st(){for(var it=0,mt=0,St=arguments.length;mt<St;mt++)it+=arguments[mt].length;for(var Pt=Array(it),Wt=0,mt=0;mt<St;mt++)for(var Jt=arguments[mt],de=0,Ee=Jt.length;de<Ee;de++,Wt++)Pt[Wt]=Jt[de];return Pt}function pt(it,mt,St){if(St||arguments.length===2)for(var Pt=0,Wt=mt.length,Jt;Pt<Wt;Pt++)(Jt||!(Pt in mt))&&(Jt||(Jt=Array.prototype.slice.call(mt,0,Pt)),Jt[Pt]=mt[Pt]);return it.concat(Jt||Array.prototype.slice.call(mt))}function ct(it){return this instanceof ct?(this.v=it,this):new ct(it)}function Ot(it,mt,St){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pt=St.apply(it,mt||[]),Wt,Jt=[];return Wt={},de("next"),de("throw"),de("return"),Wt[Symbol.asyncIterator]=function(){return this},Wt;function de(mr){Pt[mr]&&(Wt[mr]=function(Ar){return new Promise(function(sr,nr){Jt.push([mr,Ar,sr,nr])>1||Ee(mr,Ar)})})}function Ee(mr,Ar){try{Fe(Pt[mr](Ar))}catch(sr){dr(Jt[0][3],sr)}}function Fe(mr){mr.value instanceof ct?Promise.resolve(mr.value.v).then(me,Xe):dr(Jt[0][2],mr)}function me(mr){Ee("next",mr)}function Xe(mr){Ee("throw",mr)}function dr(mr,Ar){mr(Ar),Jt.shift(),Jt.length&&Ee(Jt[0][0],Jt[0][1])}}function Rt(it){var mt,St;return mt={},Pt("next"),Pt("throw",function(Wt){throw Wt}),Pt("return"),mt[Symbol.iterator]=function(){return this},mt;function Pt(Wt,Jt){mt[Wt]=it[Wt]?function(de){return(St=!St)?{value:ct(it[Wt](de)),done:Wt==="return"}:Jt?Jt(de):de}:Jt}}function Qt(it){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var mt=it[Symbol.asyncIterator],St;return mt?mt.call(it):(it=typeof Y=="function"?Y(it):it[Symbol.iterator](),St={},Pt("next"),Pt("throw"),Pt("return"),St[Symbol.asyncIterator]=function(){return this},St);function Pt(Jt){St[Jt]=it[Jt]&&function(de){return new Promise(function(Ee,Fe){de=it[Jt](de),Wt(Ee,Fe,de.done,de.value)})}}function Wt(Jt,de,Ee,Fe){Promise.resolve(Fe).then(function(me){Jt({value:me,done:Ee})},de)}}function Gt(it,mt){return Object.defineProperty?Object.defineProperty(it,"raw",{value:mt}):it.raw=mt,it}var Z=Object.create?function(it,mt){Object.defineProperty(it,"default",{enumerable:!0,value:mt})}:function(it,mt){it.default=mt};function nt(it){if(it&&it.__esModule)return it;var mt={};if(it!=null)for(var St in it)St!=="default"&&Object.prototype.hasOwnProperty.call(it,St)&&B(mt,it,St);return Z(mt,it),mt}function Q(it){return it&&it.__esModule?it:{default:it}}function dt(it,mt,St,Pt){if(St==="a"&&!Pt)throw new TypeError("Private accessor was defined without a getter");if(typeof mt=="function"?it!==mt||!Pt:!mt.has(it))throw new TypeError("Cannot read private member from an object whose class did not declare it");return St==="m"?Pt:St==="a"?Pt.call(it):Pt?Pt.value:mt.get(it)}function lt(it,mt,St,Pt,Wt){if(Pt==="m")throw new TypeError("Private method is not writable");if(Pt==="a"&&!Wt)throw new TypeError("Private accessor was defined without a setter");if(typeof mt=="function"?it!==mt||!Wt:!mt.has(it))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Pt==="a"?Wt.call(it,St):Wt?Wt.value=St:mt.set(it,St),St}function z(it,mt){if(mt===null||typeof mt!="object"&&typeof mt!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof it=="function"?mt===it:it.has(mt)}var $=function(it){E(mt,it);function mt(){var St=it!==null&&it.apply(this,arguments)||this;return St.type="cat",St.isCategory=!0,St}return mt.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var St=0;St<this.values.length;St++)this.translateIndexMap.set(this.values[St],St)}},mt.prototype.translate=function(St){this.buildIndexMap();var Pt=this.translateIndexMap.get(St);return Pt===void 0&&(Pt=(0,b.isNumber)(St)?St:NaN),Pt},mt.prototype.scale=function(St){var Pt=this.translate(St),Wt=this.calcPercent(Pt,this.min,this.max);return this.calcValue(Wt,this.rangeMin(),this.rangeMax())},mt.prototype.invert=function(St){var Pt=this.max-this.min,Wt=this.calcPercent(St,this.rangeMin(),this.rangeMax()),Jt=Math.round(Pt*Wt)+this.min;return Jt<this.min||Jt>this.max?NaN:this.values[Jt]},mt.prototype.getText=function(St){for(var Pt=[],Wt=1;Wt<arguments.length;Wt++)Pt[Wt-1]=arguments[Wt];var Jt=St;return(0,b.isNumber)(St)&&!this.values.includes(St)&&(Jt=this.values[Jt]),it.prototype.getText.apply(this,st([Jt],Pt))},mt.prototype.initCfg=function(){this.tickMethod="cat"},mt.prototype.setDomain=function(){if((0,b.isNil)(this.getConfig("min"))&&(this.min=0),(0,b.isNil)(this.getConfig("max"))){var St=this.values.length;this.max=St>1?St-1:St}this.translateIndexMap&&(this.translateIndexMap=void 0)},mt}(A),j=$,f=p(19432);function yt(it){return function(mt,St,Pt,Wt){for(var Jt=(0,b.isNil)(Pt)?0:Pt,de=(0,b.isNil)(Wt)?mt.length:Wt;Jt<de;){var Ee=Jt+de>>>1;it(mt[Ee])>St?de=Ee:Jt=Ee+1}return Jt}}var _t="format";function jt(it,mt){var St=f[_t]||f.default[_t];return St(it,mt)}function qt(it){return(0,b.isString)(it)&&(it.indexOf("T")>0?it=new Date(it).getTime():it=new Date(it.replace(/-/gi,"/")).getTime()),(0,b.isDate)(it)&&(it=it.getTime()),it}var Vt=1e3,re=60*Vt,ae=60*re,Nt=24*ae,Lt=Nt*31,bt=Nt*365,at=[["HH:mm:ss",Vt],["HH:mm:ss",Vt*10],["HH:mm:ss",Vt*30],["HH:mm",re],["HH:mm",re*10],["HH:mm",re*30],["HH",ae],["HH",ae*6],["HH",ae*12],["YYYY-MM-DD",Nt],["YYYY-MM-DD",Nt*4],["YYYY-WW",Nt*7],["YYYY-MM",Lt],["YYYY-MM",Lt*4],["YYYY-MM",Lt*6],["YYYY",Nt*380]];function rt(it,mt,St){var Pt=(mt-it)/St,Wt=yt(function(de){return de[1]})(at,Pt)-1,Jt=at[Wt];return Wt<0?Jt=at[0]:Wt>=at.length&&(Jt=(0,b.last)(at)),Jt}var vt=function(it){E(mt,it);function mt(){var St=it!==null&&it.apply(this,arguments)||this;return St.type="timeCat",St}return mt.prototype.translate=function(St){St=qt(St);var Pt=this.values.indexOf(St);return Pt===-1&&((0,b.isNumber)(St)&&St<this.values.length?Pt=St:Pt=NaN),Pt},mt.prototype.getText=function(St,Pt){var Wt=this.translate(St);if(Wt>-1){var Jt=this.values[Wt],de=this.formatter;return Jt=de?de(Jt,Pt):jt(Jt,this.mask),Jt}return St},mt.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},mt.prototype.setDomain=function(){var St=this.values;(0,b.each)(St,function(Pt,Wt){St[Wt]=qt(Pt)}),St.sort(function(Pt,Wt){return Pt-Wt}),it.prototype.setDomain.call(this)},mt}(j),tt=vt,q=function(it){E(mt,it);function mt(){var St=it!==null&&it.apply(this,arguments)||this;return St.isContinuous=!0,St}return mt.prototype.scale=function(St){if((0,b.isNil)(St))return NaN;var Pt=this.rangeMin(),Wt=this.rangeMax(),Jt=this.max,de=this.min;if(Jt===de)return Pt;var Ee=this.getScalePercent(St);return Pt+Ee*(Wt-Pt)},mt.prototype.init=function(){it.prototype.init.call(this);var St=this.ticks,Pt=(0,b.head)(St),Wt=(0,b.last)(St);Pt<this.min&&(this.min=Pt),Wt>this.max&&(this.max=Wt),(0,b.isNil)(this.minLimit)||(this.min=Pt),(0,b.isNil)(this.maxLimit)||(this.max=Wt)},mt.prototype.setDomain=function(){var St=(0,b.getRange)(this.values),Pt=St.min,Wt=St.max;(0,b.isNil)(this.min)&&(this.min=Pt),(0,b.isNil)(this.max)&&(this.max=Wt),this.min>this.max&&(this.min=Pt,this.max=Wt)},mt.prototype.calculateTicks=function(){var St=this,Pt=it.prototype.calculateTicks.call(this);return this.nice||(Pt=(0,b.filter)(Pt,function(Wt){return Wt>=St.min&&Wt<=St.max})),Pt},mt.prototype.getScalePercent=function(St){var Pt=this.max,Wt=this.min;return(St-Wt)/(Pt-Wt)},mt.prototype.getInvertPercent=function(St){return(St-this.rangeMin())/(this.rangeMax()-this.rangeMin())},mt}(A),Et=q,It=function(it){E(mt,it);function mt(){var St=it!==null&&it.apply(this,arguments)||this;return St.type="linear",St.isLinear=!0,St}return mt.prototype.invert=function(St){var Pt=this.getInvertPercent(St);return this.min+Pt*(this.max-this.min)},mt.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},mt}(Et),Kt=It;function ue(it,mt){var St=Math.E,Pt;return mt>=0?Pt=Math.pow(St,Math.log(mt)/it):Pt=Math.pow(St,Math.log(-mt)/it)*-1,Pt}function we(it,mt){return it===1?1:Math.log(mt)/Math.log(it)}function Ye(it,mt,St){(0,b.isNil)(St)&&(St=Math.max.apply(null,it));var Pt=St;return(0,b.each)(it,function(Wt){Wt>0&&Wt<Pt&&(Pt=Wt)}),Pt===St&&(Pt=St/mt),Pt>1&&(Pt=1),Pt}function te(it){var mt=it.toString().split(/[eE]/),St=(mt[0].split(".")[1]||"").length-+(mt[1]||0);return St>0?St:0}function pe(it,mt){var St=te(it),Pt=te(mt),Wt=Math.pow(10,Math.max(St,Pt));return(it*Wt+mt*Wt)/Wt}var Te=function(it){E(mt,it);function mt(){var St=it!==null&&it.apply(this,arguments)||this;return St.type="log",St}return mt.prototype.invert=function(St){var Pt=this.base,Wt=we(Pt,this.max),Jt=this.rangeMin(),de=this.rangeMax()-Jt,Ee,Fe=this.positiveMin;if(Fe){if(St===0)return 0;Ee=we(Pt,Fe/Pt);var me=1/(Wt-Ee)*de;if(St<me)return St/me*Fe}else Ee=we(Pt,this.min);var Xe=(St-Jt)/de,dr=Xe*(Wt-Ee)+Ee;return Math.pow(Pt,dr)},mt.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},mt.prototype.setDomain=function(){it.prototype.setDomain.call(this);var St=this.min;if(St<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");St===0&&(this.positiveMin=Ye(this.values,this.base,this.max))},mt.prototype.getScalePercent=function(St){var Pt=this.max,Wt=this.min;if(Pt===Wt||St<=0)return 0;var Jt=this.base,de=this.positiveMin;de&&(Wt=de*1/Jt);var Ee;return St<de?Ee=St/de/(we(Jt,Pt)-we(Jt,Wt)):Ee=(we(Jt,St)-we(Jt,Wt))/(we(Jt,Pt)-we(Jt,Wt)),Ee},mt}(Et),ze=Te,ur=function(it){E(mt,it);function mt(){var St=it!==null&&it.apply(this,arguments)||this;return St.type="pow",St}return mt.prototype.invert=function(St){var Pt=this.getInvertPercent(St),Wt=this.exponent,Jt=ue(Wt,this.max),de=ue(Wt,this.min),Ee=Pt*(Jt-de)+de,Fe=Ee>=0?1:-1;return Math.pow(Ee,Wt)*Fe},mt.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},mt.prototype.getScalePercent=function(St){var Pt=this.max,Wt=this.min;if(Pt===Wt)return 0;var Jt=this.exponent,de=(ue(Jt,St)-ue(Jt,Wt))/(ue(Jt,Pt)-ue(Jt,Wt));return de},mt}(Et),Ze=ur,pr=function(it){E(mt,it);function mt(){var St=it!==null&&it.apply(this,arguments)||this;return St.type="time",St}return mt.prototype.getText=function(St,Pt){var Wt=this.translate(St),Jt=this.formatter;return Jt?Jt(Wt,Pt):jt(Wt,this.mask)},mt.prototype.scale=function(St){var Pt=St;return((0,b.isString)(Pt)||(0,b.isDate)(Pt))&&(Pt=this.translate(Pt)),it.prototype.scale.call(this,Pt)},mt.prototype.translate=function(St){return qt(St)},mt.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},mt.prototype.setDomain=function(){var St=this.values,Pt=this.getConfig("min"),Wt=this.getConfig("max");if((!(0,b.isNil)(Pt)||!(0,b.isNumber)(Pt))&&(this.min=this.translate(this.min)),(!(0,b.isNil)(Wt)||!(0,b.isNumber)(Wt))&&(this.max=this.translate(this.max)),St&&St.length){var Jt=[],de=Infinity,Ee=de,Fe=0;(0,b.each)(St,function(me){var Xe=qt(me);if(isNaN(Xe))throw new TypeError("Invalid Time: "+me+" in time scale!");de>Xe?(Ee=de,de=Xe):Ee>Xe&&(Ee=Xe),Fe<Xe&&(Fe=Xe),Jt.push(Xe)}),St.length>1&&(this.minTickInterval=Ee-de),(0,b.isNil)(Pt)&&(this.min=de),(0,b.isNil)(Wt)&&(this.max=Fe)}},mt}(Kt),Pr=pr,Or=function(it){E(mt,it);function mt(){var St=it!==null&&it.apply(this,arguments)||this;return St.type="quantize",St}return mt.prototype.invert=function(St){var Pt=this.ticks,Wt=Pt.length,Jt=this.getInvertPercent(St),de=Math.floor(Jt*(Wt-1));if(de>=Wt-1)return(0,b.last)(Pt);if(de<0)return(0,b.head)(Pt);var Ee=Pt[de],Fe=Pt[de+1],me=de/(Wt-1),Xe=(de+1)/(Wt-1);return Ee+(Jt-me)/(Xe-me)*(Fe-Ee)},mt.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},mt.prototype.calculateTicks=function(){var St=it.prototype.calculateTicks.call(this);return this.nice||((0,b.last)(St)!==this.max&&St.push(this.max),(0,b.head)(St)!==this.min&&St.unshift(this.min)),St},mt.prototype.getScalePercent=function(St){var Pt=this.ticks;if(St<(0,b.head)(Pt))return 0;if(St>(0,b.last)(Pt))return 1;var Wt=0;return(0,b.each)(Pt,function(Jt,de){if(St>=Jt)Wt=de;else return!1}),Wt/(Pt.length-1)},mt}(Et),nn=Or,kn=function(it){E(mt,it);function mt(){var St=it!==null&&it.apply(this,arguments)||this;return St.type="quantile",St}return mt.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},mt}(nn),ii=kn,gi={};function Si(it){return gi[it]}function Zt(it,mt){if(Si(it))throw new Error("type '"+it+"' existed.");gi[it]=mt}var ne=function(it){E(mt,it);function mt(){var St=it!==null&&it.apply(this,arguments)||this;return St.type="identity",St.isIdentity=!0,St}return mt.prototype.calculateTicks=function(){return this.values},mt.prototype.scale=function(St){return this.values[0]!==St&&(0,b.isNumber)(St)?St:this.range[0]},mt.prototype.invert=function(St){var Pt=this.range;return St<Pt[0]||St>Pt[1]?NaN:this.values[0]},mt}(A),ve=ne;function ge(it){var mt=it.values,St=it.tickInterval,Pt=it.tickCount,Wt=it.showLast;if((0,b.isNumber)(St)){var Jt=(0,b.filter)(mt,function(sr,nr){return nr%St==0}),de=(0,b.last)(mt);return Wt&&(0,b.last)(Jt)!==de&&Jt.push(de),Jt}var Ee=mt.length,Fe=it.min,me=it.max;if((0,b.isNil)(Fe)&&(Fe=0),(0,b.isNil)(me)&&(me=mt.length-1),!(0,b.isNumber)(Pt)||Pt>=Ee)return mt.slice(Fe,me+1);if(Pt<=0||me<=0)return[];for(var Xe=Pt===1?Ee:Math.floor(Ee/(Pt-1)),dr=[],mr=Fe,Ar=0;Ar<Pt&&!(mr>=me);Ar++)mr=Math.min(Fe+Ar*Xe,me),Ar===Pt-1&&Wt?dr.push(mt[me]):dr.push(mt[mr]);return dr}function Ae(it){var mt=it.min,St=it.max,Pt=it.nice,Wt=it.tickCount,Jt=new er;return Jt.domain([mt,St]),Pt&&Jt.nice(Wt),Jt.ticks(Wt)}var Pe=5,Ie=Math.sqrt(50),De=Math.sqrt(10),Ce=Math.sqrt(2),er=function(){function it(){this._domain=[0,1]}return it.prototype.domain=function(mt){return mt?(this._domain=Array.from(mt,Number),this):this._domain.slice()},it.prototype.nice=function(mt){var St,Pt;mt===void 0&&(mt=Pe);var Wt=this._domain.slice(),Jt=0,de=this._domain.length-1,Ee=this._domain[Jt],Fe=this._domain[de],me;return Fe<Ee&&(St=[Fe,Ee],Ee=St[0],Fe=St[1],Pt=[de,Jt],Jt=Pt[0],de=Pt[1]),me=fr(Ee,Fe,mt),me>0?(Ee=Math.floor(Ee/me)*me,Fe=Math.ceil(Fe/me)*me,me=fr(Ee,Fe,mt)):me<0&&(Ee=Math.ceil(Ee*me)/me,Fe=Math.floor(Fe*me)/me,me=fr(Ee,Fe,mt)),me>0?(Wt[Jt]=Math.floor(Ee/me)*me,Wt[de]=Math.ceil(Fe/me)*me,this.domain(Wt)):me<0&&(Wt[Jt]=Math.ceil(Ee*me)/me,Wt[de]=Math.floor(Fe*me)/me,this.domain(Wt)),this},it.prototype.ticks=function(mt){return mt===void 0&&(mt=Pe),je(this._domain[0],this._domain[this._domain.length-1],mt||Pe)},it}();function je(it,mt,St){var Pt,Wt=-1,Jt,de,Ee;if(mt=+mt,it=+it,St=+St,it===mt&&St>0)return[it];if((Pt=mt<it)&&(Jt=it,it=mt,mt=Jt),(Ee=fr(it,mt,St))===0||!isFinite(Ee))return[];if(Ee>0)for(it=Math.ceil(it/Ee),mt=Math.floor(mt/Ee),de=new Array(Jt=Math.ceil(mt-it+1));++Wt<Jt;)de[Wt]=(it+Wt)*Ee;else for(it=Math.floor(it*Ee),mt=Math.ceil(mt*Ee),de=new Array(Jt=Math.ceil(it-mt+1));++Wt<Jt;)de[Wt]=(it-Wt)/Ee;return Pt&&de.reverse(),de}function fr(it,mt,St){var Pt=(mt-it)/Math.max(0,St),Wt=Math.floor(Math.log(Pt)/Math.LN10),Jt=Pt/Math.pow(10,Wt);return Wt>=0?(Jt>=Ie?10:Jt>=De?5:Jt>=Ce?2:1)*Math.pow(10,Wt):-Math.pow(10,-Wt)/(Jt>=Ie?10:Jt>=De?5:Jt>=Ce?2:1)}function Sr(it,mt,St){var Pt;return St==="ceil"?Pt=Math.ceil(it/mt):St==="floor"?Pt=Math.floor(it/mt):Pt=Math.round(it/mt),Pt*mt}function hr(it,mt,St){var Pt=Sr(it,St,"floor"),Wt=Sr(mt,St,"ceil");Pt=(0,b.fixedBase)(Pt,St),Wt=(0,b.fixedBase)(Wt,St);for(var Jt=[],de=Math.max((Wt-Pt)/(Math.pow(2,12)-1),St),Ee=Pt;Ee<=Wt;Ee=Ee+de){var Fe=(0,b.fixedBase)(Ee,de);Jt.push(Fe)}return{min:Pt,max:Wt,ticks:Jt}}function gr(it,mt,St){var Pt,Wt=it.minLimit,Jt=it.maxLimit,de=it.min,Ee=it.max,Fe=it.tickCount,me=Fe===void 0?5:Fe,Xe=(0,b.isNil)(Wt)?(0,b.isNil)(mt)?de:mt:Wt,dr=(0,b.isNil)(Jt)?(0,b.isNil)(St)?Ee:St:Jt;if(Xe>dr&&(Pt=[Xe,dr],dr=Pt[0],Xe=Pt[1]),me<=2)return[Xe,dr];for(var mr=(dr-Xe)/(me-1),Ar=[],sr=0;sr<me;sr++)Ar.push(Xe+mr*sr);return Ar}function vr(it){var mt=it.min,St=it.max,Pt=it.tickInterval,Wt=it.minLimit,Jt=it.maxLimit,de=Ae(it);return!(0,b.isNil)(Wt)||!(0,b.isNil)(Jt)?gr(it,(0,b.head)(de),(0,b.last)(de)):Pt?hr(mt,St,Pt).ticks:de}function Cr(it){return Math.abs(it)<1e-15?it:parseFloat(it.toFixed(15))}var or=[1,5,2,2.5,4,3],Ir=null,Wr=Number.EPSILON*100;function Nr(it,mt){return(it%mt+mt)%mt}function jr(it){return Math.round(it*1e12)/1e12}function Qr(it,mt,St,Pt,Wt,Jt){var de=(0,b.size)(mt),Ee=(0,b.indexOf)(mt,it),Fe=0,me=Nr(Pt,Jt);return(me<Wr||Jt-me<Wr)&&Pt<=0&&Wt>=0&&(Fe=1),1-Ee/(de-1)-St+Fe}function Zr(it,mt,St){var Pt=(0,b.size)(mt),Wt=(0,b.indexOf)(mt,it),Jt=1;return 1-Wt/(Pt-1)-St+Jt}function Bn(it,mt,St,Pt,Wt,Jt){var de=(it-1)/(Jt-Wt),Ee=(mt-1)/(Math.max(Jt,Pt)-Math.min(St,Wt));return 2-Math.max(de/Ee,Ee/de)}function hn(it,mt){return it>=mt?2-(it-1)/(mt-1):1}function Hn(it,mt,St,Pt){var Wt=mt-it;return 1-.5*(Math.pow(mt-Pt,2)+Math.pow(it-St,2))/Math.pow(.1*Wt,2)}function yi(it,mt,St){var Pt=mt-it;if(St>Pt){var Wt=(St-Pt)/2;return 1-Math.pow(Wt,2)/Math.pow(.1*Pt,2)}return 1}function Jn(){return 1}function Ci(it,mt,St,Pt,Wt,Jt){St===void 0&&(St=5),Pt===void 0&&(Pt=!0),Wt===void 0&&(Wt=or),Jt===void 0&&(Jt=[.25,.2,.5,.05]);var de=St<0?0:Math.round(St);if(Number.isNaN(it)||Number.isNaN(mt)||typeof it!="number"||typeof mt!="number"||!de)return{min:0,max:0,ticks:[]};if(mt-it<1e-15||de===1)return{min:it,max:mt,ticks:[it]};if(mt-it>1e148){var Ee=St||5,Fe=(mt-it)/Ee;return{min:it,max:mt,ticks:Array(Ee).fill(null).map(function(ga,Di){return Cr(it+Fe*Di)})}}for(var me={score:-2,lmin:0,lmax:0,lstep:0},Xe=1;Xe<Infinity;){for(var dr=0;dr<Wt.length;dr+=1){var mr=Wt[dr],Ar=Zr(mr,Wt,Xe);if(Jt[0]*Ar+Jt[1]+Jt[2]+Jt[3]<me.score){Xe=Infinity;break}for(var sr=2;sr<Infinity;){var nr=hn(sr,de);if(Jt[0]*Ar+Jt[1]+Jt[2]*nr+Jt[3]<me.score)break;for(var Gr=(mt-it)/(sr+1)/Xe/mr,gn=Math.ceil(Math.log10(Gr));gn<Infinity;){var vn=Xe*mr*Math.pow(10,gn),Ln=yi(it,mt,vn*(sr-1));if(Jt[0]*Ar+Jt[1]*Ln+Jt[2]*nr+Jt[3]<me.score)break;var qn=Math.floor(mt/vn)*Xe-(sr-1)*Xe,ki=Math.ceil(it/vn)*Xe;if(qn<=ki)for(var Ee=ki-qn,li=0;li<=Ee;li+=1){var Wn=qn+li,ti=Wn*(vn/Xe),ei=ti+vn*(sr-1),Bi=vn,cn=Qr(mr,Wt,Xe,ti,ei,Bi),Hi=Hn(it,mt,ti,ei),ta=Bn(sr,de,it,mt,ti,ei),ui=Jn(),pa=Jt[0]*cn+Jt[1]*Hi+Jt[2]*ta+Jt[3]*ui;pa>me.score&&(!Pt||ti<=it&&ei>=mt)&&(me.lmin=ti,me.lmax=ei,me.lstep=Bi,me.score=pa)}gn+=1}sr+=1}}Xe+=1}var mi=Cr(me.lmax),ea=Cr(me.lmin),fa=Cr(me.lstep),ha=Math.floor(jr((mi-ea)/fa))+1,Kn=new Array(ha);Kn[0]=Cr(ea);for(var dr=1;dr<ha;dr++)Kn[dr]=Cr(Kn[dr-1]+fa);return{min:Math.min(it,(0,b.head)(Kn)),max:Math.max(mt,(0,b.last)(Kn)),ticks:Kn}}function Mi(it){var mt=it.min,St=it.max,Pt=it.tickCount,Wt=it.nice,Jt=it.tickInterval,de=it.minLimit,Ee=it.maxLimit,Fe=Ci(mt,St,Pt,Wt).ticks;return!(0,b.isNil)(de)||!(0,b.isNil)(Ee)?gr(it,(0,b.head)(Fe),(0,b.last)(Fe)):Jt?hr(mt,St,Jt).ticks:Fe}function Fr(it){var mt=it.base,St=it.tickCount,Pt=it.min,Wt=it.max,Jt=it.values,de,Ee=we(mt,Wt);if(Pt>0)de=Math.floor(we(mt,Pt));else{var Fe=Ye(Jt,mt,Wt);de=Math.floor(we(mt,Fe))}for(var me=Ee-de,Xe=Math.ceil(me/St),dr=[],mr=de;mr<Ee+Xe;mr=mr+Xe)dr.push(Math.pow(mt,mr));return Pt<=0&&dr.unshift(0),dr}function oi(it,mt,St){if(St===void 0&&(St=5),it===mt)return{max:mt,min:it,ticks:[it]};var Pt=St<0?0:Math.round(St);if(Pt===0)return{max:mt,min:it,ticks:[]};var Wt=1.5,Jt=.5+1.5*Wt,de=mt-it,Ee=de/Pt,Fe=Math.pow(10,Math.floor(Math.log10(Ee))),me=Fe;2*Fe-Ee<Wt*(Ee-me)&&(me=2*Fe,5*Fe-Ee<Jt*(Ee-me)&&(me=5*Fe,10*Fe-Ee<Wt*(Ee-me)&&(me=10*Fe)));for(var Xe=Math.ceil(mt/me),dr=Math.floor(it/me),mr=Math.max(Xe*me,mt),Ar=Math.min(dr*me,it),sr=Math.floor((mr-Ar)/me)+1,nr=new Array(sr),Gr=0;Gr<sr;Gr++)nr[Gr]=Cr(Ar+Gr*me);return{min:Ar,max:mr,ticks:nr}}function Oi(it){var mt=it.exponent,St=it.tickCount,Pt=Math.ceil(ue(mt,it.max)),Wt=Math.floor(ue(mt,it.min)),Jt=oi(Wt,Pt,St).ticks;return Jt.map(function(de){var Ee=de>=0?1:-1;return Math.pow(de,mt)*Ee})}function ci(it,mt){var St=it.length*mt;return mt===1?it[it.length-1]:mt===0?it[0]:St%1!=0?it[Math.ceil(St)-1]:it.length%2==0?(it[St-1]+it[St])/2:it[St]}function Mn(it){var mt=it.tickCount,St=it.values;if(!St||!St.length)return[];for(var Pt=St.slice().sort(function(Ee,Fe){return Ee-Fe}),Wt=[],Jt=0;Jt<mt;Jt++){var de=Jt/(mt-1);Wt.push(ci(Pt,de))}return Wt}function vi(it){var mt=it.min,St=it.max,Pt=it.tickCount,Wt=it.tickInterval,Jt=it.minLimit,de=it.maxLimit,Ee=oi(mt,St,Pt).ticks;return!(0,b.isNil)(Jt)||!(0,b.isNil)(de)?gr(it,(0,b.head)(Ee),(0,b.last)(Ee)):Wt?hr(mt,St,Wt).ticks:Ee}function Xi(it){var mt=it.min,St=it.max,Pt=it.minTickInterval,Wt=it.tickInterval,Jt=it.tickCount;if(Wt)Jt=Math.ceil((St-mt)/Wt);else{Wt=rt(mt,St,Jt)[1];var de=(St-mt)/Wt,Ee=de/Jt;Ee>1&&(Wt=Wt*Math.ceil(Ee)),Pt&&Wt<Pt&&(Wt=Pt)}Wt=Math.max(Math.floor((St-mt)/(Math.pow(2,12)-1)),Wt);for(var Fe=[],me=mt;me<St+Wt;me+=Wt)Fe.push(me);return Fe}function Ii(it){var mt=ge(g({showLast:!0},it));return mt}function si(it){return new Date(it).getFullYear()}function Zn(it){return new Date(it,0,1).getTime()}function Vi(it){return new Date(it).getMonth()}function ua(it,mt){var St=si(it),Pt=si(mt),Wt=Vi(it),Jt=Vi(mt);return(Pt-St)*12+(Jt-Wt)%12}function Ft(it,mt){return new Date(it,mt,1).getTime()}function At(it,mt){return Math.ceil((mt-it)/Nt)}function ht(it,mt){return Math.ceil((mt-it)/ae)}function wt(it,mt){return Math.ceil((mt-it)/(60*1e3))}function Xt(it){var mt=it.min,St=it.max,Pt=it.minTickInterval,Wt=it.tickCount,Jt=it.tickInterval,de=[];Jt||(Jt=(St-mt)/Wt,Pt&&Jt<Pt&&(Jt=Pt)),Jt=Math.max(Math.floor((St-mt)/(Math.pow(2,12)-1)),Jt);var Ee=si(mt);if(Jt>bt)for(var Fe=si(St),me=Math.ceil(Jt/bt),Xe=Ee;Xe<=Fe+me;Xe=Xe+me)de.push(Zn(Xe));else if(Jt>Lt)for(var dr=Math.ceil(Jt/Lt),mr=Vi(mt),Ar=ua(mt,St),Xe=0;Xe<=Ar+dr;Xe=Xe+dr)de.push(Ft(Ee,Xe+mr));else if(Jt>Nt)for(var sr=new Date(mt),nr=sr.getFullYear(),Gr=sr.getMonth(),gn=sr.getDate(),vn=Math.ceil(Jt/Nt),Ln=At(mt,St),Xe=0;Xe<Ln+vn;Xe=Xe+vn)de.push(new Date(nr,Gr,gn+Xe).getTime());else if(Jt>ae)for(var sr=new Date(mt),nr=sr.getFullYear(),Gr=sr.getMonth(),vn=sr.getDate(),qn=sr.getHours(),ki=Math.ceil(Jt/ae),li=ht(mt,St),Xe=0;Xe<=li+ki;Xe=Xe+ki)de.push(new Date(nr,Gr,vn,qn+Xe).getTime());else if(Jt>re)for(var Wn=wt(mt,St),ti=Math.ceil(Jt/re),Xe=0;Xe<=Wn+ti;Xe=Xe+ti)de.push(mt+Xe*re);else{var ei=Jt;ei<Vt&&(ei=Vt);for(var Bi=Math.floor(mt/Vt)*Vt,cn=Math.ceil((St-mt)/Vt),Hi=Math.ceil(ei/Vt),Xe=0;Xe<cn+Hi;Xe=Xe+Hi)de.push(Bi+Xe*Vt)}return de.length>=512&&console.warn("Notice: current ticks length("+de.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+Jt+") is too small, increase the value to solve the problem!"),de}O("cat",ge),O("time-cat",Ii),O("wilkinson-extended",Mi),O("r-pretty",vi),O("time",Xi),O("time-pretty",Xt),O("log",Fr),O("pow",Oi),O("quantile",Mn),O("d3-linear",vr),Zt("cat",j),Zt("category",j),Zt("identity",ve),Zt("linear",Kt),Zt("log",ze),Zt("pow",Ze),Zt("time",Pr),Zt("timeCat",tt),Zt("quantize",nn),Zt("quantile",ii)},49242:function(Ct,S,p){"use strict";p.r(S),p.d(S,{Cache:function(){return sn},assign:function(){return Di},augment:function(){return xa},clamp:function(){return hr},clearAnimationFrame:function(){return Kn},clone:function(){return Ra},contains:function(){return O},debounce:function(){return So},deepMix:function(){return J},difference:function(){return E},each:function(){return Y},endsWith:function(){return Pr},every:function(){return nn},extend:function(){return Dt},filter:function(){return A},find:function(){return Z},findIndex:function(){return Q},firstValue:function(){return lt},fixedBase:function(){return vr},flatten:function(){return $},flattenDeep:function(){return f},forIn:function(){return Ft},get:function(){return F},getEllipsisText:function(){return on},getRange:function(){return qt},getType:function(){return sr},getWrapBehavior:function(){return Ae},group:function(){return ve},groupBy:function(){return Zt},groupToMap:function(){return ne},has:function(){return At},hasKey:function(){return ht},hasValue:function(){return it},head:function(){return Te},identity:function(){return Ue},includes:function(){return O},indexOf:function(){return fe},isArguments:function(){return Gr},isArray:function(){return T},isArrayLike:function(){return I},isBoolean:function(){return vn},isDate:function(){return qn},isDecimal:function(){return Wr},isElement:function(){return fa},isEmpty:function(){return ke},isEqual:function(){return Ve},isEqualWith:function(){return ar},isError:function(){return li},isEven:function(){return jr},isFinite:function(){return Wn},isFunction:function(){return y},isInteger:function(){return Zr},isMatch:function(){return pt},isNegative:function(){return hn},isNil:function(){return C},isNull:function(){return ei},isNumber:function(){return or},isNumberEqual:function(){return yi},isObject:function(){return B},isObjectLike:function(){return Ot},isOdd:function(){return Ci},isPlainObject:function(){return Qt},isPositive:function(){return Fr},isPrototype:function(){return Hi},isRegExp:function(){return ui},isString:function(){return It},isType:function(){return d},isUndefined:function(){return mi},keys:function(){return H},last:function(){return ze},lowerCase:function(){return Pt},lowerFirst:function(){return Jt},map:function(){return Tr},mapValues:function(){return ft},max:function(){return yt},maxBy:function(){return oi},measureTextWidth:function(){return kr},memoize:function(){return oo},min:function(){return _t},minBy:function(){return Oi},mix:function(){return Di},mod:function(){return Mn},noop:function(){return Le},number2color:function(){return er},omit:function(){return kt},parseRadius:function(){return fr},pick:function(){return gt},pull:function(){return Lt},pullAt:function(){return rt},reduce:function(){return tt},remove:function(){return Et},requestAnimationFrame:function(){return ha},set:function(){return X},size:function(){return Je},some:function(){return ii},sortBy:function(){return ue},startsWith:function(){return Ze},substitute:function(){return Ee},throttle:function(){return Ht},toArray:function(){return se},toDegree:function(){return Ii},toInteger:function(){return si},toRadian:function(){return ua},toString:function(){return mt},union:function(){return te},uniq:function(){return we},uniqueId:function(){return Me},upperCase:function(){return me},upperFirst:function(){return dr},values:function(){return Xt},valuesOfKey:function(){return pe},wrapBehavior:function(){return Ie}});var b=function(Bt){return Bt!==null&&typeof Bt!="function"&&isFinite(Bt.length)},I=b,P=function(Bt,oe){return I(Bt)?Bt.indexOf(oe)>-1:!1},O=P,L=function(Bt,oe){if(!I(Bt))return Bt;for(var be=[],_e=0;_e<Bt.length;_e++){var He=Bt[_e];oe(He,_e)&&be.push(He)}return be},A=L,_=function(Bt,oe){return oe===void 0&&(oe=[]),A(Bt,function(be){return!O(oe,be)})},E=_,g={}.toString,w=function(Bt,oe){return g.call(Bt)==="[object "+oe+"]"},d=w,y=function(Bt){return d(Bt,"Function")},m=function(Bt){return Bt==null},C=m,T=function(Bt){return Array.isArray?Array.isArray(Bt):d(Bt,"Array")},B=function(Bt){var oe=typeof Bt;return Bt!==null&&oe==="object"||oe==="function"};function D(Bt,oe){if(!!Bt){var be;if(T(Bt))for(var _e=0,He=Bt.length;_e<He&&(be=oe(Bt[_e],_e),be!==!1);_e++);else if(B(Bt)){for(var cr in Bt)if(Bt.hasOwnProperty(cr)&&(be=oe(Bt[cr],cr),be===!1))break}}}var Y=D,K=Object.keys?function(Bt){return Object.keys(Bt)}:function(Bt){var oe=[];return Y(Bt,function(be,_e){y(Bt)&&_e==="prototype"||oe.push(_e)}),oe},H=K;function st(Bt,oe){var be=H(oe),_e=be.length;if(C(Bt))return!_e;for(var He=0;He<_e;He+=1){var cr=be[He];if(oe[cr]!==Bt[cr]||!(cr in Bt))return!1}return!0}var pt=st,ct=function(Bt){return typeof Bt=="object"&&Bt!==null},Ot=ct,Rt=function(Bt){if(!Ot(Bt)||!d(Bt,"Object"))return!1;if(Object.getPrototypeOf(Bt)===null)return!0;for(var oe=Bt;Object.getPrototypeOf(oe)!==null;)oe=Object.getPrototypeOf(oe);return Object.getPrototypeOf(Bt)===oe},Qt=Rt;function Gt(Bt,oe){if(!T(Bt))return null;var be;if(y(oe)&&(be=oe),Qt(oe)&&(be=function(He){return pt(He,oe)}),be){for(var _e=0;_e<Bt.length;_e+=1)if(be(Bt[_e]))return Bt[_e]}return null}var Z=Gt;function nt(Bt,oe,be){be===void 0&&(be=0);for(var _e=be;_e<Bt.length;_e++)if(oe(Bt[_e],_e))return _e;return-1}var Q=nt,dt=function(Bt,oe){for(var be=null,_e=0;_e<Bt.length;_e++){var He=Bt[_e],cr=He[oe];if(!C(cr)){T(cr)?be=cr[0]:be=cr;break}}return be},lt=dt,z=function(Bt){if(!T(Bt))return[];for(var oe=[],be=0;be<Bt.length;be++)oe=oe.concat(Bt[be]);return oe},$=z,j=function(Bt,oe){if(oe===void 0&&(oe=[]),!T(Bt))oe.push(Bt);else for(var be=0;be<Bt.length;be+=1)j(Bt[be],oe);return oe},f=j,yt=function(Bt){if(!!T(Bt))return Bt.reduce(function(oe,be){return Math.max(oe,be)},Bt[0])},_t=function(Bt){if(!!T(Bt))return Bt.reduce(function(oe,be){return Math.min(oe,be)},Bt[0])},jt=function(Bt){var oe=Bt.filter(function(Hr){return!isNaN(Hr)});if(!oe.length)return{min:0,max:0};if(T(Bt[0])){for(var be=[],_e=0;_e<Bt.length;_e++)be=be.concat(Bt[_e]);oe=be}var He=yt(oe),cr=_t(oe);return{min:cr,max:He}},qt=jt,Vt=Array.prototype,re=Vt.splice,ae=Vt.indexOf,Nt=function(Bt){for(var oe=[],be=1;be<arguments.length;be++)oe[be-1]=arguments[be];for(var _e=0;_e<oe.length;_e++)for(var He=oe[_e],cr=-1;(cr=ae.call(Bt,He))>-1;)re.call(Bt,cr,1);return Bt},Lt=Nt,bt=Array.prototype.splice,at=function(oe,be){if(!I(oe))return[];for(var _e=oe?be.length:0,He=_e-1;_e--;){var cr=void 0,Hr=be[_e];(_e===He||Hr!==cr)&&(cr=Hr,bt.call(oe,Hr,1))}return oe},rt=at,vt=function(Bt,oe,be){if(!T(Bt)&&!Qt(Bt))return Bt;var _e=be;return Y(Bt,function(He,cr){_e=oe(_e,He,cr)}),_e},tt=vt,q=function(Bt,oe){var be=[];if(!I(Bt))return be;for(var _e=-1,He=[],cr=Bt.length;++_e<cr;){var Hr=Bt[_e];oe(Hr,_e,Bt)&&(be.push(Hr),He.push(_e))}return rt(Bt,He),be},Et=q,It=function(Bt){return d(Bt,"String")};function Kt(Bt,oe){var be;if(y(oe))be=function(He,cr){return oe(He)-oe(cr)};else{var _e=[];It(oe)?_e.push(oe):T(oe)&&(_e=oe),be=function(He,cr){for(var Hr=0;Hr<_e.length;Hr+=1){var mn=_e[Hr];if(He[mn]>cr[mn])return 1;if(He[mn]<cr[mn])return-1}return 0}}return Bt.sort(be),Bt}var ue=Kt;function we(Bt,oe){oe===void 0&&(oe=new Map);var be=[];if(Array.isArray(Bt))for(var _e=0,He=Bt.length;_e<He;_e++){var cr=Bt[_e];oe.has(cr)||(be.push(cr),oe.set(cr,!0))}return be}var Ye=function(){for(var Bt=[],oe=0;oe<arguments.length;oe++)Bt[oe]=arguments[oe];return we([].concat.apply([],Bt))},te=Ye,pe=function(Bt,oe){for(var be=[],_e={},He=0;He<Bt.length;He++){var cr=Bt[He],Hr=cr[oe];if(!C(Hr)){T(Hr)||(Hr=[Hr]);for(var mn=0;mn<Hr.length;mn++){var fi=Hr[mn];_e[fi]||(be.push(fi),_e[fi]=!0)}}}return be};function Te(Bt){if(I(Bt))return Bt[0]}function ze(Bt){if(I(Bt)){var oe=Bt;return oe[oe.length-1]}}function ur(Bt,oe){return T(Bt)||It(Bt)?Bt[0]===oe:!1}var Ze=ur;function pr(Bt,oe){return T(Bt)||It(Bt)?Bt[Bt.length-1]===oe:!1}var Pr=pr,Or=function(Bt,oe){for(var be=0;be<Bt.length;be++)if(!oe(Bt[be],be))return!1;return!0},nn=Or,kn=function(Bt,oe){for(var be=0;be<Bt.length;be++)if(oe(Bt[be],be))return!0;return!1},ii=kn,gi=Object.prototype.hasOwnProperty;function Si(Bt,oe){if(!oe||!T(Bt))return{};for(var be={},_e=y(oe)?oe:function(mn){return mn[oe]},He,cr=0;cr<Bt.length;cr++){var Hr=Bt[cr];He=_e(Hr),gi.call(be,He)?be[He].push(Hr):be[He]=[Hr]}return be}var Zt=Si;function ne(Bt,oe){if(!oe)return{0:Bt};if(!y(oe)){var be=T(oe)?oe:oe.replace(/\s+/g,"").split("*");oe=function(_e){for(var He="_",cr=0,Hr=be.length;cr<Hr;cr++)He+=_e[be[cr]]&&_e[be[cr]].toString();return He}}return Zt(Bt,oe)}var ve=function(Bt,oe){if(!oe)return[Bt];var be=ne(Bt,oe),_e=[];for(var He in be)_e.push(be[He]);return _e};function ge(Bt,oe){return Bt["_wrap_"+oe]}var Ae=ge;function Pe(Bt,oe){if(Bt["_wrap_"+oe])return Bt["_wrap_"+oe];var be=function(_e){Bt[oe](_e)};return Bt["_wrap_"+oe]=be,be}var Ie=Pe,De={};function Ce(Bt){var oe=De[Bt];if(!oe){for(var be=Bt.toString(16),_e=be.length;_e<6;_e++)be="0"+be;oe="#"+be,De[Bt]=oe}return oe}var er=Ce;function je(Bt){var oe=0,be=0,_e=0,He=0;return T(Bt)?Bt.length===1?oe=be=_e=He=Bt[0]:Bt.length===2?(oe=_e=Bt[0],be=He=Bt[1]):Bt.length===3?(oe=Bt[0],be=He=Bt[1],_e=Bt[2]):(oe=Bt[0],be=Bt[1],_e=Bt[2],He=Bt[3]):oe=be=_e=He=Bt,{r1:oe,r2:be,r3:_e,r4:He}}var fr=je,Sr=function(Bt,oe,be){return Bt<oe?oe:Bt>be?be:Bt},hr=Sr,gr=function(Bt,oe){var be=oe.toString(),_e=be.indexOf(".");if(_e===-1)return Math.round(Bt);var He=be.substr(_e+1).length;return He>20&&(He=20),parseFloat(Bt.toFixed(He))},vr=gr,Cr=function(Bt){return d(Bt,"Number")},or=Cr,Ir=function(Bt){return or(Bt)&&Bt%1!=0},Wr=Ir,Nr=function(Bt){return or(Bt)&&Bt%2==0},jr=Nr,Qr=Number.isInteger?Number.isInteger:function(Bt){return or(Bt)&&Bt%1==0},Zr=Qr,Bn=function(Bt){return or(Bt)&&Bt<0},hn=Bn,Hn=1e-5;function yi(Bt,oe,be){return be===void 0&&(be=Hn),Math.abs(Bt-oe)<be}var Jn=function(Bt){return or(Bt)&&Bt%2!=0},Ci=Jn,Mi=function(Bt){return or(Bt)&&Bt>0},Fr=Mi,oi=function(Bt,oe){if(!!T(Bt)){for(var be,_e=-Infinity,He=0;He<Bt.length;He++){var cr=Bt[He],Hr=y(oe)?oe(cr):cr[oe];Hr>_e&&(be=cr,_e=Hr)}return be}},Oi=function(Bt,oe){if(!!T(Bt)){for(var be,_e=Infinity,He=0;He<Bt.length;He++){var cr=Bt[He],Hr=y(oe)?oe(cr):cr[oe];Hr<_e&&(be=cr,_e=Hr)}return be}},ci=function(Bt,oe){return(Bt%oe+oe)%oe},Mn=ci,vi=180/Math.PI,Xi=function(Bt){return vi*Bt},Ii=Xi,si=parseInt,Zn=Math.PI/180,Vi=function(Bt){return Zn*Bt},ua=Vi,Ft=Y,At=function(Bt,oe){return Bt.hasOwnProperty(oe)},ht=At,wt=Object.values?function(Bt){return Object.values(Bt)}:function(Bt){var oe=[];return Y(Bt,function(be,_e){y(Bt)&&_e==="prototype"||oe.push(be)}),oe},Xt=wt,it=function(Bt,oe){return O(Xt(Bt),oe)},mt=function(Bt){return C(Bt)?"":Bt.toString()},St=function(Bt){return mt(Bt).toLowerCase()},Pt=St,Wt=function(Bt){var oe=mt(Bt);return oe.charAt(0).toLowerCase()+oe.substring(1)},Jt=Wt;function de(Bt,oe){return!Bt||!oe?Bt:Bt.replace(/\\?\{([^{}]+)\}/g,function(be,_e){return be.charAt(0)==="\\"?be.slice(1):oe[_e]===void 0?"":oe[_e]})}var Ee=de,Fe=function(Bt){return mt(Bt).toUpperCase()},me=Fe,Xe=function(Bt){var oe=mt(Bt);return oe.charAt(0).toUpperCase()+oe.substring(1)},dr=Xe,mr={}.toString,Ar=function(Bt){return mr.call(Bt).replace(/^\[object /,"").replace(/]$/,"")},sr=Ar,nr=function(Bt){return d(Bt,"Arguments")},Gr=nr,gn=function(Bt){return d(Bt,"Boolean")},vn=gn,Ln=function(Bt){return d(Bt,"Date")},qn=Ln,ki=function(Bt){return d(Bt,"Error")},li=ki;function Wn(Bt){return or(Bt)&&isFinite(Bt)}var ti=function(Bt){return Bt===null},ei=ti,Bi=Object.prototype,cn=function(Bt){var oe=Bt&&Bt.constructor,be=typeof oe=="function"&&oe.prototype||Bi;return Bt===be},Hi=cn,ta=function(Bt){return d(Bt,"RegExp")},ui=ta,pa=function(Bt){return Bt===void 0},mi=pa,ea=function(Bt){return Bt instanceof Element||Bt instanceof HTMLDocument},fa=ea;function ha(Bt){var oe=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(be){return setTimeout(be,16)};return oe(Bt)}function Kn(Bt){var oe=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;oe(Bt)}function ga(Bt,oe){for(var be in oe)oe.hasOwnProperty(be)&&be!=="constructor"&&oe[be]!==void 0&&(Bt[be]=oe[be])}function Di(Bt,oe,be,_e){return oe&&ga(Bt,oe),be&&ga(Bt,be),_e&&ga(Bt,_e),Bt}var xi=function(){for(var Bt=[],oe=0;oe<arguments.length;oe++)Bt[oe]=arguments[oe];for(var be=Bt[0],_e=1;_e<Bt.length;_e++){var He=Bt[_e];y(He)&&(He=He.prototype),Di(be.prototype,He)}},xa=xi,Wi=function(Bt){if(typeof Bt!="object"||Bt===null)return Bt;var oe;if(T(Bt)){oe=[];for(var be=0,_e=Bt.length;be<_e;be++)typeof Bt[be]=="object"&&Bt[be]!=null?oe[be]=Wi(Bt[be]):oe[be]=Bt[be]}else{oe={};for(var He in Bt)typeof Bt[He]=="object"&&Bt[He]!=null?oe[He]=Wi(Bt[He]):oe[He]=Bt[He]}return oe},Ra=Wi;function ba(Bt,oe,be){var _e;return function(){var He=this,cr=arguments,Hr=function(){_e=null,be||Bt.apply(He,cr)},mn=be&&!_e;clearTimeout(_e),_e=setTimeout(Hr,oe),mn&&Bt.apply(He,cr)}}var So=ba,oo=function(Bt,oe){if(!y(Bt))throw new TypeError("Expected a function");var be=function(){for(var _e=[],He=0;He<arguments.length;He++)_e[He]=arguments[He];var cr=oe?oe.apply(this,_e):_e[0],Hr=be.cache;if(Hr.has(cr))return Hr.get(cr);var mn=Bt.apply(this,_e);return Hr.set(cr,mn),mn};return be.cache=new Map,be},xt=5;function et(Bt,oe,be,_e){be=be||0,_e=_e||xt;for(var He in oe)if(oe.hasOwnProperty(He)){var cr=oe[He];cr!==null&&Qt(cr)?(Qt(Bt[He])||(Bt[He]={}),be<_e?et(Bt[He],cr,be+1,_e):Bt[He]=oe[He]):T(cr)?(Bt[He]=[],Bt[He]=Bt[He].concat(cr)):cr!==void 0&&(Bt[He]=cr)}}var W=function(Bt){for(var oe=[],be=1;be<arguments.length;be++)oe[be-1]=arguments[be];for(var _e=0;_e<oe.length;_e+=1)et(Bt,oe[_e]);return Bt},J=W,Tt=function(Bt,oe,be,_e){y(oe)||(be=oe,oe=Bt,Bt=function(){});var He=Object.create?function(Hr,mn){return Object.create(Hr,{constructor:{value:mn}})}:function(Hr,mn){function fi(){}fi.prototype=Hr;var Ei=new fi;return Ei.constructor=mn,Ei},cr=He(oe.prototype,Bt);return Bt.prototype=Di(cr,Bt.prototype),Bt.superclass=He(oe.prototype,oe),Di(cr,be),Di(Bt,_e),Bt},Dt=Tt,ie=function(Bt,oe){if(!I(Bt))return-1;var be=Array.prototype.indexOf;if(be)return be.call(Bt,oe);for(var _e=-1,He=0;He<Bt.length;He++)if(Bt[He]===oe){_e=He;break}return _e},fe=ie,he=Object.prototype.hasOwnProperty;function Se(Bt){if(C(Bt))return!0;if(I(Bt))return!Bt.length;var oe=sr(Bt);if(oe==="Map"||oe==="Set")return!Bt.size;if(Hi(Bt))return!Object.keys(Bt).length;for(var be in Bt)if(he.call(Bt,be))return!1;return!0}var ke=Se,Be=function(Bt,oe){if(Bt===oe)return!0;if(!Bt||!oe||It(Bt)||It(oe))return!1;if(I(Bt)||I(oe)){if(Bt.length!==oe.length)return!1;for(var be=!0,_e=0;_e<Bt.length&&(be=Be(Bt[_e],oe[_e]),!!be);_e++);return be}if(Ot(Bt)||Ot(oe)){var He=Object.keys(Bt),cr=Object.keys(oe);if(He.length!==cr.length)return!1;for(var be=!0,_e=0;_e<He.length&&(be=Be(Bt[He[_e]],oe[He[_e]]),!!be);_e++);return be}return!1},Ve=Be,ar=function(Bt,oe,be){return y(be)?!!be(Bt,oe):Ve(Bt,oe)},Re=function(Bt,oe){if(!I(Bt))return Bt;for(var be=[],_e=0;_e<Bt.length;_e++){var He=Bt[_e];be.push(oe(He,_e))}return be},Tr=Re,Yt=function(Bt){return Bt},ft=function(Bt,oe){oe===void 0&&(oe=Yt);var be={};return B(Bt)&&!C(Bt)&&Object.keys(Bt).forEach(function(_e){be[_e]=oe(Bt[_e],_e)}),be},F=function(Bt,oe,be){for(var _e=0,He=It(oe)?oe.split("."):oe;Bt&&_e<He.length;)Bt=Bt[He[_e++]];return Bt===void 0||_e<He.length?be:Bt},X=function(Bt,oe,be){var _e=Bt,He=It(oe)?oe.split("."):oe;return He.forEach(function(cr,Hr){Hr<He.length-1?(B(_e[cr])||(_e[cr]=or(He[Hr+1])?[]:{}),_e=_e[cr]):_e[cr]=be}),Bt},U=Object.prototype.hasOwnProperty,gt=function(Bt,oe){if(Bt===null||!Qt(Bt))return{};var be={};return Y(oe,function(_e){U.call(Bt,_e)&&(be[_e]=Bt[_e])}),be},kt=function(Bt,oe){return tt(Bt,function(be,_e,He){return oe.includes(He)||(be[He]=_e),be},{})},Ht=function(Bt,oe,be){var _e,He,cr,Hr,mn=0;be||(be={});var fi=function(){mn=be.leading===!1?0:Date.now(),_e=null,Hr=Bt.apply(He,cr),_e||(He=cr=null)},Ei=function(){var ra=Date.now();!mn&&be.leading===!1&&(mn=ra);var Co=oe-(ra-mn);return He=this,cr=arguments,Co<=0||Co>oe?(_e&&(clearTimeout(_e),_e=null),mn=ra,Hr=Bt.apply(He,cr),_e||(He=cr=null)):!_e&&be.trailing!==!1&&(_e=setTimeout(fi,Co)),Hr};return Ei.cancel=function(){clearTimeout(_e),mn=0,_e=He=cr=null},Ei},se=function(Bt){return I(Bt)?Array.prototype.slice.call(Bt):[]},ce={},Me=function(Bt){return Bt=Bt||"g",ce[Bt]?ce[Bt]+=1:ce[Bt]=1,Bt+ce[Bt]},Le=function(){},Ue=function(Bt){return Bt};function Je(Bt){return C(Bt)?0:I(Bt)?Bt.length:Object.keys(Bt).length}var xr=p(37067),Yr,kr=oo(function(Bt,oe){oe===void 0&&(oe={});var be=oe.fontSize,_e=oe.fontFamily,He=oe.fontWeight,cr=oe.fontStyle,Hr=oe.fontVariant;return Yr||(Yr=document.createElement("canvas").getContext("2d")),Yr.font=[cr,Hr,He,be+"px",_e].join(" "),Yr.measureText(It(Bt)?Bt:"").width},function(Bt,oe){return oe===void 0&&(oe={}),(0,xr.__spreadArrays)([Bt],Xt(oe)).join("")}),on=function(Bt,oe,be,_e){_e===void 0&&(_e="...");var He=16,cr=kr(_e,be),Hr=It(Bt)?Bt:mt(Bt),mn=oe,fi=[],Ei,ra;if(kr(Bt,be)<=oe)return Bt;for(;Ei=Hr.substr(0,He),ra=kr(Ei,be),!(ra+cr>mn&&ra>mn);)if(fi.push(Ei),mn-=ra,Hr=Hr.substr(He),!Hr)return fi.join("");for(;Ei=Hr.substr(0,1),ra=kr(Ei,be),!(ra+cr>mn);)if(fi.push(Ei),mn-=ra,Hr=Hr.substr(1),!Hr)return fi.join("");return""+fi.join("")+_e},un=function(){function Bt(){this.map={}}return Bt.prototype.has=function(oe){return this.map[oe]!==void 0},Bt.prototype.get=function(oe,be){var _e=this.map[oe];return _e===void 0?be:_e},Bt.prototype.set=function(oe,be){this.map[oe]=be},Bt.prototype.clear=function(){this.map={}},Bt.prototype.delete=function(oe){delete this.map[oe]},Bt.prototype.size=function(){return Object.keys(this.map).length},Bt}(),sn=un},99581:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(66974),I=p(46812),P=function(){for(var O=[],L=0;L<arguments.length;L++)O[L]=arguments[L];for(var A=O[0],_=1;_<O.length;_++){var E=O[_];I.default(E)&&(E=E.prototype),b.default(A.prototype,E)}};S.default=P},68039:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var p=function(){function b(){this.map={}}return b.prototype.has=function(I){return this.map[I]!==void 0},b.prototype.get=function(I,P){var O=this.map[I];return O===void 0?P:O},b.prototype.set=function(I,P){this.map[I]=P},b.prototype.clear=function(){this.map={}},b.prototype.delete=function(I){delete this.map[I]},b.prototype.size=function(){return Object.keys(this.map).length},b}();S.default=p},37339:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var p=function(b,I,P){return b<I?I:b>P?P:b};S.default=p},35755:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});function p(b){var I=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;I(b)}S.default=p},8289:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(66631),I=function(P){if(typeof P!="object"||P===null)return P;var O;if(b.default(P)){O=[];for(var L=0,A=P.length;L<A;L++)typeof P[L]=="object"&&P[L]!=null?O[L]=I(P[L]):O[L]=P[L]}else{O={};for(var _ in P)typeof P[_]=="object"&&P[_]!=null?O[_]=I(P[_]):O[_]=P[_]}return O};S.default=I},75349:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(48102),I=function(P,O){return b.default(P)?P.indexOf(O)>-1:!1};S.default=I},79663:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});function p(b,I,P){var O;return function(){var L=this,A=arguments,_=function(){O=null,P||b.apply(L,A)},E=P&&!O;clearTimeout(O),O=setTimeout(_,I),E&&b.apply(L,A)}}S.default=p},90497:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(66631),I=p(15907),P=5;function O(A,_,E,g){E=E||0,g=g||P;for(var w in _)if(_.hasOwnProperty(w)){var d=_[w];d!==null&&I.default(d)?(I.default(A[w])||(A[w]={}),E<g?O(A[w],d,E+1,g):A[w]=_[w]):b.default(d)?(A[w]=[],A[w]=A[w].concat(d)):d!==void 0&&(A[w]=d)}}var L=function(A){for(var _=[],E=1;E<arguments.length;E++)_[E-1]=arguments[E];for(var g=0;g<_.length;g+=1)O(A,_[g]);return A};S.default=L},25430:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(40007),I=p(75349),P=function(O,L){return L===void 0&&(L=[]),b.default(O,function(A){return!I.default(L,A)})};S.default=P},27154:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(66631),I=p(33643);function P(O,L){if(!!O){var A;if(b.default(O))for(var _=0,E=O.length;_<E&&(A=L(O[_],_),A!==!1);_++);else if(I.default(O)){for(var g in O)if(O.hasOwnProperty(g)&&(A=L(O[g],g),A===!1))break}}}S.default=P},61846:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(66631),I=p(21830);function P(O,L){return b.default(O)||I.default(O)?O[O.length-1]===L:!1}S.default=P},8153:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var p=function(b,I){for(var P=0;P<b.length;P++)if(!I(b[P],P))return!1;return!0};S.default=p},13829:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(66974),I=p(46812),P=function(O,L,A,_){I.default(L)||(A=L,L=O,O=function(){});var E=Object.create?function(w,d){return Object.create(w,{constructor:{value:d}})}:function(w,d){function y(){}y.prototype=w;var m=new y;return m.constructor=d,m},g=E(L.prototype,O);return O.prototype=b.default(g,O.prototype),O.superclass=E(L.prototype,L),b.default(g,A),b.default(O,_),O};S.default=P},40007:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(48102),I=function(P,O){if(!b.default(P))return P;for(var L=[],A=0;A<P.length;A++){var _=P[A];O(_,A)&&L.push(_)}return L};S.default=I},90871:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});function p(b,I,P){P===void 0&&(P=0);for(var O=P;O<b.length;O++)if(I(b[O],O))return O;return-1}S.default=p},32114:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(46812),I=p(20253),P=p(66631),O=p(15907);function L(A,_){if(!P.default(A))return null;var E;if(b.default(_)&&(E=_),O.default(_)&&(E=function(w){return I.default(w,_)}),E){for(var g=0;g<A.length;g+=1)if(E(A[g]))return A[g]}return null}S.default=L},84521:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(73890),I=p(66631),P=function(O,L){for(var A=null,_=0;_<O.length;_++){var E=O[_],g=E[L];if(!b.default(g)){I.default(g)?A=g[0]:A=g;break}}return A};S.default=P},14266:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var p=function(b,I){var P=I.toString(),O=P.indexOf(".");if(O===-1)return Math.round(b);var L=P.substr(O+1).length;return L>20&&(L=20),parseFloat(b.toFixed(L))};S.default=p},61917:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(66631),I=function(P,O){if(O===void 0&&(O=[]),!b.default(P))O.push(P);else for(var L=0;L<P.length;L+=1)I(P[L],O);return O};S.default=I},30267:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(66631),I=function(P){if(!b.default(P))return[];for(var O=[],L=0;L<P.length;L++)O=O.concat(P[L]);return O};S.default=I},8361:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(27154);S.default=b.default},65616:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(21830),I=p(78127),P=p(13754);S.default=function(O,L,A,_){_===void 0&&(_="...");var E=16,g=P.default(_,A),w=b.default(O)?O:I.default(O),d=L,y=[],m,C;if(P.default(O,A)<=L)return O;for(;m=w.substr(0,E),C=P.default(m,A),!(C+g>d&&C>d);)if(y.push(m),d-=C,w=w.substr(E),!w)return y.join("");for(;m=w.substr(0,1),C=P.default(m,A),!(C+g>d);)if(y.push(m),d-=C,w=w.substr(1),!w)return y.join("");return""+y.join("")+_}},83236:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(66631),I=p(14705),P=p(45356),O=function(L){var A=L.filter(function(d){return!isNaN(d)});if(!A.length)return{min:0,max:0};if(b.default(L[0])){for(var _=[],E=0;E<L.length;E++)_=_.concat(L[E]);A=_}var g=I.default(A),w=P.default(A);return{min:w,max:g}};S.default=O},89175:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var p={}.toString,b=function(I){return p.call(I).replace(/^\[object /,"").replace(/]$/,"")};S.default=b},71668:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});function p(b,I){return b["_wrap_"+I]}S.default=p},58070:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(21830);S.default=function(I,P,O){for(var L=0,A=b.default(P)?P.split("."):P;I&&L<A.length;)I=I[A[L++]];return I===void 0||L<A.length?O:I}},54544:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(66631),I=p(46812),P=Object.prototype.hasOwnProperty;function O(L,A){if(!A||!b.default(L))return{};for(var _={},E=I.default(A)?A:function(y){return y[A]},g,w=0;w<L.length;w++){var d=L[w];g=E(d),P.call(_,g)?_[g].push(d):_[g]=[d]}return _}S.default=O},64725:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(66631),I=p(46812),P=p(54544);function O(L,A){if(!A)return{0:L};if(!I.default(A)){var _=b.default(A)?A:A.replace(/\s+/g,"").split("*");A=function(E){for(var g="_",w=0,d=_.length;w<d;w++)g+=E[_[w]]&&E[_[w]].toString();return g}}return P.default(L,A)}S.default=O},93597:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(64725);S.default=function(I,P){if(!P)return[I];var O=b.default(I,P),L=[];for(var A in O)L.push(O[A]);return L}},53138:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(57921);S.default=b.default},99969:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(75349),I=p(91161);S.default=function(P,O){return b.default(I.default(P),O)}},57921:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.default=function(p,b){return p.hasOwnProperty(b)}},41169:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(48102);function I(P){if(b.default(P))return P[0]}S.default=I},80870:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.default=function(p){return p}},40035:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(48102),I=function(P,O){if(!b.default(P))return-1;var L=Array.prototype.indexOf;if(L)return L.call(P,O);for(var A=-1,_=0;_<P.length;_++)if(P[_]===O){A=_;break}return A};S.default=I},50229:function(Ct,S,p){"use strict";var b;b={value:!0};var I=p(75349);b={enumerable:!0,get:function(){return I.default}},b={enumerable:!0,get:function(){return I.default}};var P=p(25430);b={enumerable:!0,get:function(){return P.default}};var O=p(32114);b={enumerable:!0,get:function(){return O.default}};var L=p(90871);b={enumerable:!0,get:function(){return L.default}};var A=p(84521);b={enumerable:!0,get:function(){return A.default}};var _=p(30267);b={enumerable:!0,get:function(){return _.default}};var E=p(61917);b={enumerable:!0,get:function(){return E.default}};var g=p(83236);b={enumerable:!0,get:function(){return g.default}};var w=p(5220);b={enumerable:!0,get:function(){return w.default}};var d=p(50779);b={enumerable:!0,get:function(){return d.default}};var y=p(13847);b={enumerable:!0,get:function(){return y.default}};var m=p(89757);b={enumerable:!0,get:function(){return m.default}};var C=p(27599);b={enumerable:!0,get:function(){return C.default}};var T=p(58632);b={enumerable:!0,get:function(){return T.default}};var B=p(12619);b={enumerable:!0,get:function(){return B.default}};var D=p(29208);b={enumerable:!0,get:function(){return D.default}};var Y=p(41169);b={enumerable:!0,get:function(){return Y.default}};var K=p(95145);b={enumerable:!0,get:function(){return K.default}};var H=p(680);b={enumerable:!0,get:function(){return H.default}};var st=p(61846);b={enumerable:!0,get:function(){return st.default}};var pt=p(40007);b={enumerable:!0,get:function(){return pt.default}};var ct=p(8153);b={enumerable:!0,get:function(){return ct.default}};var Ot=p(58175);b={enumerable:!0,get:function(){return Ot.default}};var Rt=p(93597);b={enumerable:!0,get:function(){return Rt.default}};var Qt=p(54544);b={enumerable:!0,get:function(){return Qt.default}};var Gt=p(64725);b={enumerable:!0,get:function(){return Gt.default}};var Z=p(71668);b={enumerable:!0,get:function(){return Z.default}};var nt=p(61262);Object.defineProperty(S,"Ko",{enumerable:!0,get:function(){return nt.default}});var Q=p(45145);b={enumerable:!0,get:function(){return Q.default}};var dt=p(85418);b={enumerable:!0,get:function(){return dt.default}};var lt=p(37339);b={enumerable:!0,get:function(){return lt.default}};var z=p(14266);b={enumerable:!0,get:function(){return z.default}};var $=p(51008);b={enumerable:!0,get:function(){return $.default}};var j=p(45420);b={enumerable:!0,get:function(){return j.default}};var f=p(68221);b={enumerable:!0,get:function(){return f.default}};var yt=p(58706);b={enumerable:!0,get:function(){return yt.default}};var _t=p(39984);b={enumerable:!0,get:function(){return _t.default}};var jt=p(32705);b={enumerable:!0,get:function(){return jt.default}};var qt=p(75732);b={enumerable:!0,get:function(){return qt.default}};var Vt=p(14705);b={enumerable:!0,get:function(){return Vt.default}};var re=p(38935);b={enumerable:!0,get:function(){return re.default}};var ae=p(45356);b={enumerable:!0,get:function(){return ae.default}};var Nt=p(89857);b={enumerable:!0,get:function(){return Nt.default}};var Lt=p(5253);b={enumerable:!0,get:function(){return Lt.default}};var bt=p(2119);b={enumerable:!0,get:function(){return bt.default}};var at=p(23196);b={enumerable:!0,get:function(){return at.default}};var rt=p(9217);b={enumerable:!0,get:function(){return rt.default}};var vt=p(8361);b={enumerable:!0,get:function(){return vt.default}};var tt=p(57921);b={enumerable:!0,get:function(){return tt.default}};var q=p(53138);b={enumerable:!0,get:function(){return q.default}};var Et=p(99969);b={enumerable:!0,get:function(){return Et.default}};var It=p(85050);b={enumerable:!0,get:function(){return It.default}};var Kt=p(20253);b={enumerable:!0,get:function(){return Kt.default}};var ue=p(91161);b={enumerable:!0,get:function(){return ue.default}};var we=p(88362);b={enumerable:!0,get:function(){return we.default}};var Ye=p(56095);b={enumerable:!0,get:function(){return Ye.default}};var te=p(35541);b={enumerable:!0,get:function(){return te.default}};var pe=p(72660);b={enumerable:!0,get:function(){return pe.default}};var Te=p(85260);b={enumerable:!0,get:function(){return Te.default}};var ze=p(89175);b={enumerable:!0,get:function(){return ze.default}};var ur=p(55039);b={enumerable:!0,get:function(){return ur.default}};var Ze=p(66631);b={enumerable:!0,get:function(){return Ze.default}};var pr=p(48102);b={enumerable:!0,get:function(){return pr.default}};var Pr=p(25873);b={enumerable:!0,get:function(){return Pr.default}};var Or=p(79396);b={enumerable:!0,get:function(){return Or.default}};var nn=p(56418);b={enumerable:!0,get:function(){return nn.default}};var kn=p(46812);b={enumerable:!0,get:function(){return kn.default}};var ii=p(73420);b={enumerable:!0,get:function(){return ii.default}};var gi=p(73890);b={enumerable:!0,get:function(){return gi.default}};var Si=p(85497);b={enumerable:!0,get:function(){return Si.default}};var Zt=p(16185);b={enumerable:!0,get:function(){return Zt.default}};var ne=p(33643);b={enumerable:!0,get:function(){return ne.default}};var ve=p(70441);b={enumerable:!0,get:function(){return ve.default}};var ge=p(15907);b={enumerable:!0,get:function(){return ge.default}};var Ae=p(26296);b={enumerable:!0,get:function(){return Ae.default}};var Pe=p(7877);b={enumerable:!0,get:function(){return Pe.default}};var Ie=p(21830);Object.defineProperty(S,"HD",{enumerable:!0,get:function(){return Ie.default}});var De=p(44235);b={enumerable:!0,get:function(){return De.default}};var Ce=p(25523);b={enumerable:!0,get:function(){return Ce.default}};var er=p(58417);b={enumerable:!0,get:function(){return er.default}};var je=p(98229);b={enumerable:!0,get:function(){return je.default}};var fr=p(35755);b={enumerable:!0,get:function(){return fr.default}};var Sr=p(99581);b={enumerable:!0,get:function(){return Sr.default}};var hr=p(8289);Object.defineProperty(S,"d9",{enumerable:!0,get:function(){return hr.default}});var gr=p(79663);b={enumerable:!0,get:function(){return gr.default}};var vr=p(99834);b={enumerable:!0,get:function(){return vr.default}};var Cr=p(90497);Object.defineProperty(S,"b$",{enumerable:!0,get:function(){return Cr.default}});var or=p(27154);Object.defineProperty(S,"S6",{enumerable:!0,get:function(){return or.default}});var Ir=p(13829);b={enumerable:!0,get:function(){return Ir.default}};var Wr=p(40035);b={enumerable:!0,get:function(){return Wr.default}};var Nr=p(64029);b={enumerable:!0,get:function(){return Nr.default}};var jr=p(212);b={enumerable:!0,get:function(){return jr.default}};var Qr=p(18112);b={enumerable:!0,get:function(){return Qr.default}};var Zr=p(92693);b={enumerable:!0,get:function(){return Zr.default}};var Bn=p(53497);b={enumerable:!0,get:function(){return Bn.default}};var hn=p(66974);b={enumerable:!0,get:function(){return hn.default}},b={enumerable:!0,get:function(){return hn.default}};var Hn=p(58070);b={enumerable:!0,get:function(){return Hn.default}};var yi=p(64119);b={enumerable:!0,get:function(){return yi.default}};var Jn=p(24263);b={enumerable:!0,get:function(){return Jn.default}};var Ci=p(14179);b={enumerable:!0,get:function(){return Ci.default}};var Mi=p(60979);b={enumerable:!0,get:function(){return Mi.default}};var Fr=p(66668);b={enumerable:!0,get:function(){return Fr.default}};var oi=p(78127);b={enumerable:!0,get:function(){return oi.default}};var Oi=p(67250);b={enumerable:!0,get:function(){return Oi.default}};var ci=p(26851);b={enumerable:!0,get:function(){return ci.default}};var Mn=p(80870);b={enumerable:!0,get:function(){return Mn.default}};var vi=p(30597);b={enumerable:!0,get:function(){return vi.default}};var Xi=p(13754);b={enumerable:!0,get:function(){return Xi.default}};var Ii=p(65616);b={enumerable:!0,get:function(){return Ii.default}};var si=p(68039);b={enumerable:!0,get:function(){return si.default}}},55039:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(44235),I=function(P){return b.default(P,"Arguments")};S.default=I},48102:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var p=function(b){return b!==null&&typeof b!="function"&&isFinite(b.length)};S.default=p},66631:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(44235);S.default=function(I){return Array.isArray?Array.isArray(I):b.default(I,"Array")}},25873:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(44235),I=function(P){return b.default(P,"Boolean")};S.default=I},79396:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(44235),I=function(P){return b.default(P,"Date")};S.default=I},51008:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(16185),I=function(P){return b.default(P)&&P%1!=0};S.default=I},58417:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var p=function(b){return b instanceof Element||b instanceof HTMLDocument};S.default=p},64029:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(73890),I=p(48102),P=p(89175),O=p(26296),L=Object.prototype.hasOwnProperty;function A(_){if(b.default(_))return!0;if(I.default(_))return!_.length;var E=P.default(_);if(E==="Map"||E==="Set")return!_.size;if(O.default(_))return!Object.keys(_).length;for(var g in _)if(L.call(_,g))return!1;return!0}S.default=A},18112:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(46812),I=p(212);S.default=function(P,O,L){return b.default(L)?!!L(P,O):I.default(P,O)}},212:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(70441),I=p(48102),P=p(21830),O=function(L,A){if(L===A)return!0;if(!L||!A||P.default(L)||P.default(A))return!1;if(I.default(L)||I.default(A)){if(L.length!==A.length)return!1;for(var _=!0,E=0;E<L.length&&(_=O(L[E],A[E]),!!_);E++);return _}if(b.default(L)||b.default(A)){var g=Object.keys(L),w=Object.keys(A);if(g.length!==w.length)return!1;for(var _=!0,E=0;E<g.length&&(_=O(L[g[E]],A[g[E]]),!!_);E++);return _}return!1};S.default=O},56418:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(44235),I=function(P){return b.default(P,"Error")};S.default=I},45420:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(16185),I=function(P){return b.default(P)&&P%2==0};S.default=I},73420:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(16185);function I(P){return b.default(P)&&isFinite(P)}S.default=I},46812:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(44235);S.default=function(I){return b.default(I,"Function")}},68221:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(16185),I=Number.isInteger?Number.isInteger:function(P){return b.default(P)&&P%1==0};S.default=I},20253:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(73890),I=p(85050);function P(O,L){var A=I.default(L),_=A.length;if(b.default(O))return!_;for(var E=0;E<_;E+=1){var g=A[E];if(L[g]!==O[g]||!(g in O))return!1}return!0}S.default=P},58706:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(16185),I=function(P){return b.default(P)&&P<0};S.default=I},73890:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var p=function(b){return b==null};S.default=p},85497:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var p=function(b){return b===null};S.default=p},39984:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var p=1e-5;function b(I,P,O){return O===void 0&&(O=p),Math.abs(I-P)<O}S.default=b},16185:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(44235),I=function(P){return b.default(P,"Number")};S.default=I},70441:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var p=function(b){return typeof b=="object"&&b!==null};S.default=p},33643:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.default=function(p){var b=typeof p;return p!==null&&b==="object"||b==="function"}},32705:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(16185),I=function(P){return b.default(P)&&P%2!=0};S.default=I},15907:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(70441),I=p(44235),P=function(O){if(!b.default(O)||!I.default(O,"Object"))return!1;if(Object.getPrototypeOf(O)===null)return!0;for(var L=O;Object.getPrototypeOf(L)!==null;)L=Object.getPrototypeOf(L);return Object.getPrototypeOf(O)===L};S.default=P},75732:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(16185),I=function(P){return b.default(P)&&P>0};S.default=I},26296:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var p=Object.prototype,b=function(I){var P=I&&I.constructor,O=typeof P=="function"&&P.prototype||p;return I===O};S.default=b},7877:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(44235),I=function(P){return b.default(P,"RegExp")};S.default=I},21830:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(44235);S.default=function(I){return b.default(I,"String")}},44235:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var p={}.toString,b=function(I,P){return p.call(I)==="[object "+P+"]"};S.default=b},25523:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var p=function(b){return b===void 0};S.default=p},85050:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(27154),I=p(46812),P=Object.keys?function(O){return Object.keys(O)}:function(O){var L=[];return b.default(O,function(A,_){I.default(O)&&_==="prototype"||L.push(_)}),L};S.default=P},95145:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(48102);function I(P){if(b.default(P)){var O=P;return O[O.length-1]}}S.default=I},88362:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(78127),I=function(P){return b.default(P).toLowerCase()};S.default=I},56095:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(78127),I=function(P){var O=b.default(P);return O.charAt(0).toLowerCase()+O.substring(1)};S.default=I},53497:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(73890),I=p(33643),P=function(O){return O};S.default=function(O,L){L===void 0&&(L=P);var A={};return I.default(O)&&!b.default(O)&&Object.keys(O).forEach(function(_){A[_]=L(O[_],_)}),A}},92693:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(48102),I=function(P,O){if(!b.default(P))return P;for(var L=[],A=0;A<P.length;A++){var _=P[A];L.push(O(_,A))}return L};S.default=I},38935:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(66631),I=p(46812);S.default=function(P,O){if(!!b.default(P)){for(var L,A=-Infinity,_=0;_<P.length;_++){var E=P[_],g=I.default(O)?O(E):E[O];g>A&&(L=E,A=g)}return L}}},14705:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(66631);S.default=function(I){if(!!b.default(I))return I.reduce(function(P,O){return Math.max(P,O)},I[0])}},13754:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(37067),I=p(91161),P=p(99834),O=p(21830),L;S.default=P.default(function(A,_){_===void 0&&(_={});var E=_.fontSize,g=_.fontFamily,w=_.fontWeight,d=_.fontStyle,y=_.fontVariant;return L||(L=document.createElement("canvas").getContext("2d")),L.font=[d,y,w,E+"px",g].join(" "),L.measureText(O.default(A)?A:"").width},function(A,_){return _===void 0&&(_={}),b.__spreadArrays([A],I.default(_)).join("")})},99834:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(46812);S.default=function(I,P){if(!b.default(I))throw new TypeError("Expected a function");var O=function(){for(var L=[],A=0;A<arguments.length;A++)L[A]=arguments[A];var _=P?P.apply(this,L):L[0],E=O.cache;if(E.has(_))return E.get(_);var g=I.apply(this,L);return E.set(_,g),g};return O.cache=new Map,O}},89857:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(66631),I=p(46812);S.default=function(P,O){if(!!b.default(P)){for(var L,A=Infinity,_=0;_<P.length;_++){var E=P[_],g=I.default(O)?O(E):E[O];g<A&&(L=E,A=g)}return L}}},45356:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(66631);S.default=function(I){if(!!b.default(I))return I.reduce(function(P,O){return Math.min(P,O)},I[0])}},66974:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});function p(I,P){for(var O in P)P.hasOwnProperty(O)&&O!=="constructor"&&P[O]!==void 0&&(I[O]=P[O])}function b(I,P,O,L){return P&&p(I,P),O&&p(I,O),L&&p(I,L),I}S.default=b},5253:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var p=function(b,I){return(b%I+I)%I};S.default=p},26851:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.default=function(){}},45145:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var p={};function b(I){var P=p[I];if(!P){for(var O=I.toString(16),L=O.length;L<6;L++)O="0"+O;P="#"+O,p[I]=P}return P}S.default=b},14179:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(13847);S.default=function(I,P){return b.default(I,function(O,L,A){return P.includes(A)||(O[A]=L),O},{})}},85418:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(66631);function I(P){var O=0,L=0,A=0,_=0;return b.default(P)?P.length===1?O=L=A=_=P[0]:P.length===2?(O=A=P[0],L=_=P[1]):P.length===3?(O=P[0],L=_=P[1],A=P[2]):(O=P[0],L=P[1],A=P[2],_=P[3]):O=L=A=_=P,{r1:O,r2:L,r3:A,r4:_}}S.default=I},24263:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(27154),I=p(15907),P=Object.prototype.hasOwnProperty;S.default=function(O,L){if(O===null||!I.default(O))return{};var A={};return b.default(L,function(_){P.call(O,_)&&(A[_]=O[_])}),A}},50779:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(48102),I=Array.prototype.splice,P=function(L,A){if(!b.default(L))return[];for(var _=L?A.length:0,E=_-1;_--;){var g=void 0,w=A[_];(_===E||w!==g)&&(g=w,I.call(L,w,1))}return L};S.default=P},5220:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var p=Array.prototype,b=p.splice,I=p.indexOf,P=function(O){for(var L=[],A=1;A<arguments.length;A++)L[A-1]=arguments[A];for(var _=0;_<L.length;_++)for(var E=L[_],g=-1;(g=I.call(O,E))>-1;)b.call(O,g,1);return O};S.default=P},13847:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(27154),I=p(66631),P=p(15907),O=function(L,A,_){if(!I.default(L)&&!P.default(L))return L;var E=_;return b.default(L,function(g,w){E=A(E,g,w)}),E};S.default=O},89757:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(48102),I=p(50779),P=function(O,L){var A=[];if(!b.default(O))return A;for(var _=-1,E=[],g=O.length;++_<g;){var w=O[_];L(w,_,O)&&(A.push(w),E.push(_))}return I.default(O,E),A};S.default=P},98229:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});function p(b){var I=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(P){return setTimeout(P,16)};return I(b)}S.default=p},64119:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(33643),I=p(21830),P=p(16185);S.default=function(O,L,A){var _=O,E=I.default(L)?L.split("."):L;return E.forEach(function(g,w){w<E.length-1?(b.default(_[g])||(_[g]=P.default(E[w+1])?[]:{}),_=_[g]):_[g]=A}),O}},30597:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(73890),I=p(48102);function P(O){return b.default(O)?0:I.default(O)?O.length:Object.keys(O).length}S.default=P},58175:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var p=function(b,I){for(var P=0;P<b.length;P++)if(I(b[P],P))return!0;return!1};S.default=p},27599:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(66631),I=p(21830),P=p(46812);function O(L,A){var _;if(P.default(A))_=function(g,w){return A(g)-A(w)};else{var E=[];I.default(A)?E.push(A):b.default(A)&&(E=A),_=function(g,w){for(var d=0;d<E.length;d+=1){var y=E[d];if(g[y]>w[y])return 1;if(g[y]<w[y])return-1}return 0}}return L.sort(_),L}S.default=O},680:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(66631),I=p(21830);function P(O,L){return b.default(O)||I.default(O)?O[0]===L:!1}S.default=P},35541:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});function p(b,I){return!b||!I?b:b.replace(/\\?\{([^{}]+)\}/g,function(P,O){return P.charAt(0)==="\\"?P.slice(1):I[O]===void 0?"":I[O]})}S.default=p},60979:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.default=function(p,b,I){var P,O,L,A,_=0;I||(I={});var E=function(){_=I.leading===!1?0:Date.now(),P=null,A=p.apply(O,L),P||(O=L=null)},g=function(){var w=Date.now();!_&&I.leading===!1&&(_=w);var d=b-(w-_);return O=this,L=arguments,d<=0||d>b?(P&&(clearTimeout(P),P=null),_=w,A=p.apply(O,L),P||(O=L=null)):!P&&I.trailing!==!1&&(P=setTimeout(E,d)),A};return g.cancel=function(){clearTimeout(P),_=0,P=O=L=null},g}},66668:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(48102);S.default=function(I){return b.default(I)?Array.prototype.slice.call(I):[]}},2119:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var p=180/Math.PI,b=function(I){return p*I};S.default=b},23196:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.default=parseInt},9217:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var p=Math.PI/180,b=function(I){return p*I};S.default=b},78127:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(73890);S.default=function(I){return b.default(I)?"":I.toString()}},58632:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(12619),I=function(){for(var P=[],O=0;O<arguments.length;O++)P[O]=arguments[O];return b.default([].concat.apply([],P))};S.default=I},12619:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});function p(b,I){I===void 0&&(I=new Map);var P=[];if(Array.isArray(b))for(var O=0,L=b.length;O<L;O++){var A=b[O];I.has(A)||(P.push(A),I.set(A,!0))}return P}S.default=p},67250:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var p={};S.default=function(b){return b=b||"g",p[b]?p[b]+=1:p[b]=1,b+p[b]}},72660:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(78127),I=function(P){return b.default(P).toUpperCase()};S.default=I},85260:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(78127),I=function(P){var O=b.default(P);return O.charAt(0).toUpperCase()+O.substring(1)};S.default=I},29208:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(66631),I=p(73890);S.default=function(P,O){for(var L=[],A={},_=0;_<P.length;_++){var E=P[_],g=E[O];if(!I.default(g)){b.default(g)||(g=[g]);for(var w=0;w<g.length;w++){var d=g[w];A[d]||(L.push(d),A[d]=!0)}}}return L}},91161:function(Ct,S,p){"use strict";Object.defineProperty(S,"__esModule",{value:!0});var b=p(27154),I=p(46812),P=Object.values?function(O){return Object.values(O)}:function(O){var L=[];return b.default(O,function(A,_){I.default(O)&&_==="prototype"||L.push(A)}),L};S.default=P},61262:function(Ct,S){"use strict";Object.defineProperty(S,"__esModule",{value:!0});function p(b,I){if(b["_wrap_"+I])return b["_wrap_"+I];var P=function(O){b[I](O)};return b["_wrap_"+I]=P,P}S.default=p},37067:function(Ct,S,p){"use strict";p.r(S),p.d(S,{__extends:function(){return I},__assign:function(){return P},__rest:function(){return O},__decorate:function(){return L},__param:function(){return A},__metadata:function(){return _},__awaiter:function(){return E},__generator:function(){return g},__createBinding:function(){return w},__exportStar:function(){return d},__values:function(){return y},__read:function(){return m},__spread:function(){return C},__spreadArrays:function(){return T},__spreadArray:function(){return B},__await:function(){return D},__asyncGenerator:function(){return Y},__asyncDelegator:function(){return K},__asyncValues:function(){return H},__makeTemplateObject:function(){return st},__importStar:function(){return ct},__importDefault:function(){return Ot},__classPrivateFieldGet:function(){return Rt},__classPrivateFieldSet:function(){return Qt},__classPrivateFieldIn:function(){return Gt}});var b=function(Z,nt){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,dt){Q.__proto__=dt}||function(Q,dt){for(var lt in dt)Object.prototype.hasOwnProperty.call(dt,lt)&&(Q[lt]=dt[lt])},b(Z,nt)};function I(Z,nt){if(typeof nt!="function"&&nt!==null)throw new TypeError("Class extends value "+String(nt)+" is not a constructor or null");b(Z,nt);function Q(){this.constructor=Z}Z.prototype=nt===null?Object.create(nt):(Q.prototype=nt.prototype,new Q)}var P=function(){return P=Object.assign||function(nt){for(var Q,dt=1,lt=arguments.length;dt<lt;dt++){Q=arguments[dt];for(var z in Q)Object.prototype.hasOwnProperty.call(Q,z)&&(nt[z]=Q[z])}return nt},P.apply(this,arguments)};function O(Z,nt){var Q={};for(var dt in Z)Object.prototype.hasOwnProperty.call(Z,dt)&&nt.indexOf(dt)<0&&(Q[dt]=Z[dt]);if(Z!=null&&typeof Object.getOwnPropertySymbols=="function")for(var lt=0,dt=Object.getOwnPropertySymbols(Z);lt<dt.length;lt++)nt.indexOf(dt[lt])<0&&Object.prototype.propertyIsEnumerable.call(Z,dt[lt])&&(Q[dt[lt]]=Z[dt[lt]]);return Q}function L(Z,nt,Q,dt){var lt=arguments.length,z=lt<3?nt:dt===null?dt=Object.getOwnPropertyDescriptor(nt,Q):dt,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")z=Reflect.decorate(Z,nt,Q,dt);else for(var j=Z.length-1;j>=0;j--)($=Z[j])&&(z=(lt<3?$(z):lt>3?$(nt,Q,z):$(nt,Q))||z);return lt>3&&z&&Object.defineProperty(nt,Q,z),z}function A(Z,nt){return function(Q,dt){nt(Q,dt,Z)}}function _(Z,nt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(Z,nt)}function E(Z,nt,Q,dt){function lt(z){return z instanceof Q?z:new Q(function($){$(z)})}return new(Q||(Q=Promise))(function(z,$){function j(_t){try{yt(dt.next(_t))}catch(jt){$(jt)}}function f(_t){try{yt(dt.throw(_t))}catch(jt){$(jt)}}function yt(_t){_t.done?z(_t.value):lt(_t.value).then(j,f)}yt((dt=dt.apply(Z,nt||[])).next())})}function g(Z,nt){var Q={label:0,sent:function(){if(z[0]&1)throw z[1];return z[1]},trys:[],ops:[]},dt,lt,z,$;return $={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&($[Symbol.iterator]=function(){return this}),$;function j(yt){return function(_t){return f([yt,_t])}}function f(yt){if(dt)throw new TypeError("Generator is already executing.");for(;Q;)try{if(dt=1,lt&&(z=yt[0]&2?lt.return:yt[0]?lt.throw||((z=lt.return)&&z.call(lt),0):lt.next)&&!(z=z.call(lt,yt[1])).done)return z;switch(lt=0,z&&(yt=[yt[0]&2,z.value]),yt[0]){case 0:case 1:z=yt;break;case 4:return Q.label++,{value:yt[1],done:!1};case 5:Q.label++,lt=yt[1],yt=[0];continue;case 7:yt=Q.ops.pop(),Q.trys.pop();continue;default:if(z=Q.trys,!(z=z.length>0&&z[z.length-1])&&(yt[0]===6||yt[0]===2)){Q=0;continue}if(yt[0]===3&&(!z||yt[1]>z[0]&&yt[1]<z[3])){Q.label=yt[1];break}if(yt[0]===6&&Q.label<z[1]){Q.label=z[1],z=yt;break}if(z&&Q.label<z[2]){Q.label=z[2],Q.ops.push(yt);break}z[2]&&Q.ops.pop(),Q.trys.pop();continue}yt=nt.call(Z,Q)}catch(_t){yt=[6,_t],lt=0}finally{dt=z=0}if(yt[0]&5)throw yt[1];return{value:yt[0]?yt[1]:void 0,done:!0}}}var w=Object.create?function(Z,nt,Q,dt){dt===void 0&&(dt=Q);var lt=Object.getOwnPropertyDescriptor(nt,Q);(!lt||("get"in lt?!nt.__esModule:lt.writable||lt.configurable))&&(lt={enumerable:!0,get:function(){return nt[Q]}}),Object.defineProperty(Z,dt,lt)}:function(Z,nt,Q,dt){dt===void 0&&(dt=Q),Z[dt]=nt[Q]};function d(Z,nt){for(var Q in Z)Q!=="default"&&!Object.prototype.hasOwnProperty.call(nt,Q)&&w(nt,Z,Q)}function y(Z){var nt=typeof Symbol=="function"&&Symbol.iterator,Q=nt&&Z[nt],dt=0;if(Q)return Q.call(Z);if(Z&&typeof Z.length=="number")return{next:function(){return Z&&dt>=Z.length&&(Z=void 0),{value:Z&&Z[dt++],done:!Z}}};throw new TypeError(nt?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(Z,nt){var Q=typeof Symbol=="function"&&Z[Symbol.iterator];if(!Q)return Z;var dt=Q.call(Z),lt,z=[],$;try{for(;(nt===void 0||nt-- >0)&&!(lt=dt.next()).done;)z.push(lt.value)}catch(j){$={error:j}}finally{try{lt&&!lt.done&&(Q=dt.return)&&Q.call(dt)}finally{if($)throw $.error}}return z}function C(){for(var Z=[],nt=0;nt<arguments.length;nt++)Z=Z.concat(m(arguments[nt]));return Z}function T(){for(var Z=0,nt=0,Q=arguments.length;nt<Q;nt++)Z+=arguments[nt].length;for(var dt=Array(Z),lt=0,nt=0;nt<Q;nt++)for(var z=arguments[nt],$=0,j=z.length;$<j;$++,lt++)dt[lt]=z[$];return dt}function B(Z,nt,Q){if(Q||arguments.length===2)for(var dt=0,lt=nt.length,z;dt<lt;dt++)(z||!(dt in nt))&&(z||(z=Array.prototype.slice.call(nt,0,dt)),z[dt]=nt[dt]);return Z.concat(z||Array.prototype.slice.call(nt))}function D(Z){return this instanceof D?(this.v=Z,this):new D(Z)}function Y(Z,nt,Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var dt=Q.apply(Z,nt||[]),lt,z=[];return lt={},$("next"),$("throw"),$("return"),lt[Symbol.asyncIterator]=function(){return this},lt;function $(qt){dt[qt]&&(lt[qt]=function(Vt){return new Promise(function(re,ae){z.push([qt,Vt,re,ae])>1||j(qt,Vt)})})}function j(qt,Vt){try{f(dt[qt](Vt))}catch(re){jt(z[0][3],re)}}function f(qt){qt.value instanceof D?Promise.resolve(qt.value.v).then(yt,_t):jt(z[0][2],qt)}function yt(qt){j("next",qt)}function _t(qt){j("throw",qt)}function jt(qt,Vt){qt(Vt),z.shift(),z.length&&j(z[0][0],z[0][1])}}function K(Z){var nt,Q;return nt={},dt("next"),dt("throw",function(lt){throw lt}),dt("return"),nt[Symbol.iterator]=function(){return this},nt;function dt(lt,z){nt[lt]=Z[lt]?function($){return(Q=!Q)?{value:D(Z[lt]($)),done:lt==="return"}:z?z($):$}:z}}function H(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var nt=Z[Symbol.asyncIterator],Q;return nt?nt.call(Z):(Z=typeof y=="function"?y(Z):Z[Symbol.iterator](),Q={},dt("next"),dt("throw"),dt("return"),Q[Symbol.asyncIterator]=function(){return this},Q);function dt(z){Q[z]=Z[z]&&function($){return new Promise(function(j,f){$=Z[z]($),lt(j,f,$.done,$.value)})}}function lt(z,$,j,f){Promise.resolve(f).then(function(yt){z({value:yt,done:j})},$)}}function st(Z,nt){return Object.defineProperty?Object.defineProperty(Z,"raw",{value:nt}):Z.raw=nt,Z}var pt=Object.create?function(Z,nt){Object.defineProperty(Z,"default",{enumerable:!0,value:nt})}:function(Z,nt){Z.default=nt};function ct(Z){if(Z&&Z.__esModule)return Z;var nt={};if(Z!=null)for(var Q in Z)Q!=="default"&&Object.prototype.hasOwnProperty.call(Z,Q)&&w(nt,Z,Q);return pt(nt,Z),nt}function Ot(Z){return Z&&Z.__esModule?Z:{default:Z}}function Rt(Z,nt,Q,dt){if(Q==="a"&&!dt)throw new TypeError("Private accessor was defined without a getter");if(typeof nt=="function"?Z!==nt||!dt:!nt.has(Z))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Q==="m"?dt:Q==="a"?dt.call(Z):dt?dt.value:nt.get(Z)}function Qt(Z,nt,Q,dt,lt){if(dt==="m")throw new TypeError("Private method is not writable");if(dt==="a"&&!lt)throw new TypeError("Private accessor was defined without a setter");if(typeof nt=="function"?Z!==nt||!lt:!nt.has(Z))throw new TypeError("Cannot write private member to an object whose class did not declare it");return dt==="a"?lt.call(Z,Q):lt?lt.value=Q:nt.set(Z,Q),Q}function Gt(Z,nt){if(nt===null||typeof nt!="object"&&typeof nt!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof Z=="function"?nt===Z:Z.has(nt)}},60153:function(Ct,S,p){"use strict";p.r(S),p.d(S,{__extends:function(){return I},__assign:function(){return P},__rest:function(){return O},__decorate:function(){return L},__param:function(){return A},__metadata:function(){return _},__awaiter:function(){return E},__generator:function(){return g},__createBinding:function(){return w},__exportStar:function(){return d},__values:function(){return y},__read:function(){return m},__spread:function(){return C},__spreadArrays:function(){return T},__await:function(){return B},__asyncGenerator:function(){return D},__asyncDelegator:function(){return Y},__asyncValues:function(){return K},__makeTemplateObject:function(){return H},__importStar:function(){return st},__importDefault:function(){return pt},__classPrivateFieldGet:function(){return ct},__classPrivateFieldSet:function(){return Ot}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var b=function(Qt,Gt){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,nt){Z.__proto__=nt}||function(Z,nt){for(var Q in nt)nt.hasOwnProperty(Q)&&(Z[Q]=nt[Q])},b(Qt,Gt)};function I(Rt,Qt){b(Rt,Qt);function Gt(){this.constructor=Rt}Rt.prototype=Qt===null?Object.create(Qt):(Gt.prototype=Qt.prototype,new Gt)}var P=function(){return P=Object.assign||function(Gt){for(var Z,nt=1,Q=arguments.length;nt<Q;nt++){Z=arguments[nt];for(var dt in Z)Object.prototype.hasOwnProperty.call(Z,dt)&&(Gt[dt]=Z[dt])}return Gt},P.apply(this,arguments)};function O(Rt,Qt){var Gt={};for(var Z in Rt)Object.prototype.hasOwnProperty.call(Rt,Z)&&Qt.indexOf(Z)<0&&(Gt[Z]=Rt[Z]);if(Rt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var nt=0,Z=Object.getOwnPropertySymbols(Rt);nt<Z.length;nt++)Qt.indexOf(Z[nt])<0&&Object.prototype.propertyIsEnumerable.call(Rt,Z[nt])&&(Gt[Z[nt]]=Rt[Z[nt]]);return Gt}function L(Rt,Qt,Gt,Z){var nt=arguments.length,Q=nt<3?Qt:Z===null?Z=Object.getOwnPropertyDescriptor(Qt,Gt):Z,dt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Q=Reflect.decorate(Rt,Qt,Gt,Z);else for(var lt=Rt.length-1;lt>=0;lt--)(dt=Rt[lt])&&(Q=(nt<3?dt(Q):nt>3?dt(Qt,Gt,Q):dt(Qt,Gt))||Q);return nt>3&&Q&&Object.defineProperty(Qt,Gt,Q),Q}function A(Rt,Qt){return function(Gt,Z){Qt(Gt,Z,Rt)}}function _(Rt,Qt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(Rt,Qt)}function E(Rt,Qt,Gt,Z){function nt(Q){return Q instanceof Gt?Q:new Gt(function(dt){dt(Q)})}return new(Gt||(Gt=Promise))(function(Q,dt){function lt(j){try{$(Z.next(j))}catch(f){dt(f)}}function z(j){try{$(Z.throw(j))}catch(f){dt(f)}}function $(j){j.done?Q(j.value):nt(j.value).then(lt,z)}$((Z=Z.apply(Rt,Qt||[])).next())})}function g(Rt,Qt){var Gt={label:0,sent:function(){if(Q[0]&1)throw Q[1];return Q[1]},trys:[],ops:[]},Z,nt,Q,dt;return dt={next:lt(0),throw:lt(1),return:lt(2)},typeof Symbol=="function"&&(dt[Symbol.iterator]=function(){return this}),dt;function lt($){return function(j){return z([$,j])}}function z($){if(Z)throw new TypeError("Generator is already executing.");for(;Gt;)try{if(Z=1,nt&&(Q=$[0]&2?nt.return:$[0]?nt.throw||((Q=nt.return)&&Q.call(nt),0):nt.next)&&!(Q=Q.call(nt,$[1])).done)return Q;switch(nt=0,Q&&($=[$[0]&2,Q.value]),$[0]){case 0:case 1:Q=$;break;case 4:return Gt.label++,{value:$[1],done:!1};case 5:Gt.label++,nt=$[1],$=[0];continue;case 7:$=Gt.ops.pop(),Gt.trys.pop();continue;default:if(Q=Gt.trys,!(Q=Q.length>0&&Q[Q.length-1])&&($[0]===6||$[0]===2)){Gt=0;continue}if($[0]===3&&(!Q||$[1]>Q[0]&&$[1]<Q[3])){Gt.label=$[1];break}if($[0]===6&&Gt.label<Q[1]){Gt.label=Q[1],Q=$;break}if(Q&&Gt.label<Q[2]){Gt.label=Q[2],Gt.ops.push($);break}Q[2]&&Gt.ops.pop(),Gt.trys.pop();continue}$=Qt.call(Rt,Gt)}catch(j){$=[6,j],nt=0}finally{Z=Q=0}if($[0]&5)throw $[1];return{value:$[0]?$[1]:void 0,done:!0}}}function w(Rt,Qt,Gt,Z){Z===void 0&&(Z=Gt),Rt[Z]=Qt[Gt]}function d(Rt,Qt){for(var Gt in Rt)Gt!=="default"&&!Qt.hasOwnProperty(Gt)&&(Qt[Gt]=Rt[Gt])}function y(Rt){var Qt=typeof Symbol=="function"&&Symbol.iterator,Gt=Qt&&Rt[Qt],Z=0;if(Gt)return Gt.call(Rt);if(Rt&&typeof Rt.length=="number")return{next:function(){return Rt&&Z>=Rt.length&&(Rt=void 0),{value:Rt&&Rt[Z++],done:!Rt}}};throw new TypeError(Qt?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(Rt,Qt){var Gt=typeof Symbol=="function"&&Rt[Symbol.iterator];if(!Gt)return Rt;var Z=Gt.call(Rt),nt,Q=[],dt;try{for(;(Qt===void 0||Qt-- >0)&&!(nt=Z.next()).done;)Q.push(nt.value)}catch(lt){dt={error:lt}}finally{try{nt&&!nt.done&&(Gt=Z.return)&&Gt.call(Z)}finally{if(dt)throw dt.error}}return Q}function C(){for(var Rt=[],Qt=0;Qt<arguments.length;Qt++)Rt=Rt.concat(m(arguments[Qt]));return Rt}function T(){for(var Rt=0,Qt=0,Gt=arguments.length;Qt<Gt;Qt++)Rt+=arguments[Qt].length;for(var Z=Array(Rt),nt=0,Qt=0;Qt<Gt;Qt++)for(var Q=arguments[Qt],dt=0,lt=Q.length;dt<lt;dt++,nt++)Z[nt]=Q[dt];return Z}function B(Rt){return this instanceof B?(this.v=Rt,this):new B(Rt)}function D(Rt,Qt,Gt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Z=Gt.apply(Rt,Qt||[]),nt,Q=[];return nt={},dt("next"),dt("throw"),dt("return"),nt[Symbol.asyncIterator]=function(){return this},nt;function dt(yt){Z[yt]&&(nt[yt]=function(_t){return new Promise(function(jt,qt){Q.push([yt,_t,jt,qt])>1||lt(yt,_t)})})}function lt(yt,_t){try{z(Z[yt](_t))}catch(jt){f(Q[0][3],jt)}}function z(yt){yt.value instanceof B?Promise.resolve(yt.value.v).then($,j):f(Q[0][2],yt)}function $(yt){lt("next",yt)}function j(yt){lt("throw",yt)}function f(yt,_t){yt(_t),Q.shift(),Q.length&&lt(Q[0][0],Q[0][1])}}function Y(Rt){var Qt,Gt;return Qt={},Z("next"),Z("throw",function(nt){throw nt}),Z("return"),Qt[Symbol.iterator]=function(){return this},Qt;function Z(nt,Q){Qt[nt]=Rt[nt]?function(dt){return(Gt=!Gt)?{value:B(Rt[nt](dt)),done:nt==="return"}:Q?Q(dt):dt}:Q}}function K(Rt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Qt=Rt[Symbol.asyncIterator],Gt;return Qt?Qt.call(Rt):(Rt=typeof y=="function"?y(Rt):Rt[Symbol.iterator](),Gt={},Z("next"),Z("throw"),Z("return"),Gt[Symbol.asyncIterator]=function(){return this},Gt);function Z(Q){Gt[Q]=Rt[Q]&&function(dt){return new Promise(function(lt,z){dt=Rt[Q](dt),nt(lt,z,dt.done,dt.value)})}}function nt(Q,dt,lt,z){Promise.resolve(z).then(function($){Q({value:$,done:lt})},dt)}}function H(Rt,Qt){return Object.defineProperty?Object.defineProperty(Rt,"raw",{value:Qt}):Rt.raw=Qt,Rt}function st(Rt){if(Rt&&Rt.__esModule)return Rt;var Qt={};if(Rt!=null)for(var Gt in Rt)Object.hasOwnProperty.call(Rt,Gt)&&(Qt[Gt]=Rt[Gt]);return Qt.default=Rt,Qt}function pt(Rt){return Rt&&Rt.__esModule?Rt:{default:Rt}}function ct(Rt,Qt){if(!Qt.has(Rt))throw new TypeError("attempted to get private field on non-instance");return Qt.get(Rt)}function Ot(Rt,Qt,Gt){if(!Qt.has(Rt))throw new TypeError("attempted to set private field on non-instance");return Qt.set(Rt,Gt),Gt}},8874:function(Ct){"use strict";Ct.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},19818:function(Ct,S,p){var b=p(8874),I=p(86851),P=Object.hasOwnProperty,O=Object.create(null);for(var L in b)P.call(b,L)&&(O[b[L]]=L);var A=Ct.exports={to:{},get:{}};A.get=function(g){var w=g.substring(0,3).toLowerCase(),d,y;switch(w){case"hsl":d=A.get.hsl(g),y="hsl";break;case"hwb":d=A.get.hwb(g),y="hwb";break;default:d=A.get.rgb(g),y="rgb";break}return d?{model:y,value:d}:null},A.get.rgb=function(g){if(!g)return null;var w=/^#([a-f0-9]{3,4})$/i,d=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,y=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,m=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,C=/^(\w+)$/,T=[0,0,0,1],B,D,Y;if(B=g.match(d)){for(Y=B[2],B=B[1],D=0;D<3;D++){var K=D*2;T[D]=parseInt(B.slice(K,K+2),16)}Y&&(T[3]=parseInt(Y,16)/255)}else if(B=g.match(w)){for(B=B[1],Y=B[3],D=0;D<3;D++)T[D]=parseInt(B[D]+B[D],16);Y&&(T[3]=parseInt(Y+Y,16)/255)}else if(B=g.match(y)){for(D=0;D<3;D++)T[D]=parseInt(B[D+1],0);B[4]&&(B[5]?T[3]=parseFloat(B[4])*.01:T[3]=parseFloat(B[4]))}else if(B=g.match(m)){for(D=0;D<3;D++)T[D]=Math.round(parseFloat(B[D+1])*2.55);B[4]&&(B[5]?T[3]=parseFloat(B[4])*.01:T[3]=parseFloat(B[4]))}else return(B=g.match(C))?B[1]==="transparent"?[0,0,0,0]:P.call(b,B[1])?(T=b[B[1]],T[3]=1,T):null:null;for(D=0;D<3;D++)T[D]=_(T[D],0,255);return T[3]=_(T[3],0,1),T},A.get.hsl=function(g){if(!g)return null;var w=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,d=g.match(w);if(d){var y=parseFloat(d[4]),m=(parseFloat(d[1])%360+360)%360,C=_(parseFloat(d[2]),0,100),T=_(parseFloat(d[3]),0,100),B=_(isNaN(y)?1:y,0,1);return[m,C,T,B]}return null},A.get.hwb=function(g){if(!g)return null;var w=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,d=g.match(w);if(d){var y=parseFloat(d[4]),m=(parseFloat(d[1])%360+360)%360,C=_(parseFloat(d[2]),0,100),T=_(parseFloat(d[3]),0,100),B=_(isNaN(y)?1:y,0,1);return[m,C,T,B]}return null},A.to.hex=function(){var g=I(arguments);return"#"+E(g[0])+E(g[1])+E(g[2])+(g[3]<1?E(Math.round(g[3]*255)):"")},A.to.rgb=function(){var g=I(arguments);return g.length<4||g[3]===1?"rgb("+Math.round(g[0])+", "+Math.round(g[1])+", "+Math.round(g[2])+")":"rgba("+Math.round(g[0])+", "+Math.round(g[1])+", "+Math.round(g[2])+", "+g[3]+")"},A.to.rgb.percent=function(){var g=I(arguments),w=Math.round(g[0]/255*100),d=Math.round(g[1]/255*100),y=Math.round(g[2]/255*100);return g.length<4||g[3]===1?"rgb("+w+"%, "+d+"%, "+y+"%)":"rgba("+w+"%, "+d+"%, "+y+"%, "+g[3]+")"},A.to.hsl=function(){var g=I(arguments);return g.length<4||g[3]===1?"hsl("+g[0]+", "+g[1]+"%, "+g[2]+"%)":"hsla("+g[0]+", "+g[1]+"%, "+g[2]+"%, "+g[3]+")"},A.to.hwb=function(){var g=I(arguments),w="";return g.length>=4&&g[3]!==1&&(w=", "+g[3]),"hwb("+g[0]+", "+g[1]+"%, "+g[2]+"%"+w+")"},A.to.keyword=function(g){return O[g.slice(0,3)]};function _(g,w,d){return Math.min(Math.max(w,g),d)}function E(g){var w=Math.round(g).toString(16).toUpperCase();return w.length<2?"0"+w:w}},6767:function(Ct,S,p){"use strict";var b=p(19818),I=p(80978),P=[].slice,O=["keyword","gray","hex"],L={};Object.keys(I).forEach(function(C){L[P.call(I[C].labels).sort().join("")]=C});var A={};function _(C,T){if(!(this instanceof _))return new _(C,T);if(T&&T in O&&(T=null),T&&!(T in I))throw new Error("Unknown model: "+T);var B,D;if(C==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(C instanceof _)this.model=C.model,this.color=C.color.slice(),this.valpha=C.valpha;else if(typeof C=="string"){var Y=b.get(C);if(Y===null)throw new Error("Unable to parse color from string: "+C);this.model=Y.model,D=I[this.model].channels,this.color=Y.value.slice(0,D),this.valpha=typeof Y.value[D]=="number"?Y.value[D]:1}else if(C.length){this.model=T||"rgb",D=I[this.model].channels;var K=P.call(C,0,D);this.color=m(K,D),this.valpha=typeof C[D]=="number"?C[D]:1}else if(typeof C=="number")C&=16777215,this.model="rgb",this.color=[C>>16&255,C>>8&255,C&255],this.valpha=1;else{this.valpha=1;var H=Object.keys(C);"alpha"in C&&(H.splice(H.indexOf("alpha"),1),this.valpha=typeof C.alpha=="number"?C.alpha:0);var st=H.sort().join("");if(!(st in L))throw new Error("Unable to parse color from object: "+JSON.stringify(C));this.model=L[st];var pt=I[this.model].labels,ct=[];for(B=0;B<pt.length;B++)ct.push(C[pt[B]]);this.color=m(ct)}if(A[this.model])for(D=I[this.model].channels,B=0;B<D;B++){var Ot=A[this.model][B];Ot&&(this.color[B]=Ot(this.color[B]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}_.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(C){var T=this.model in b.to?this:this.rgb();T=T.round(typeof C=="number"?C:1);var B=T.valpha===1?T.color:T.color.concat(this.valpha);return b.to[T.model](B)},percentString:function(C){var T=this.rgb().round(typeof C=="number"?C:1),B=T.valpha===1?T.color:T.color.concat(this.valpha);return b.to.rgb.percent(B)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var C={},T=I[this.model].channels,B=I[this.model].labels,D=0;D<T;D++)C[B[D]]=this.color[D];return this.valpha!==1&&(C.alpha=this.valpha),C},unitArray:function(){var C=this.rgb().color;return C[0]/=255,C[1]/=255,C[2]/=255,this.valpha!==1&&C.push(this.valpha),C},unitObject:function(){var C=this.rgb().object();return C.r/=255,C.g/=255,C.b/=255,this.valpha!==1&&(C.alpha=this.valpha),C},round:function(C){return C=Math.max(C||0,0),new _(this.color.map(g(C)).concat(this.valpha),this.model)},alpha:function(C){return arguments.length?new _(this.color.concat(Math.max(0,Math.min(1,C))),this.model):this.valpha},red:w("rgb",0,d(255)),green:w("rgb",1,d(255)),blue:w("rgb",2,d(255)),hue:w(["hsl","hsv","hsl","hwb","hcg"],0,function(C){return(C%360+360)%360}),saturationl:w("hsl",1,d(100)),lightness:w("hsl",2,d(100)),saturationv:w("hsv",1,d(100)),value:w("hsv",2,d(100)),chroma:w("hcg",1,d(100)),gray:w("hcg",2,d(100)),white:w("hwb",1,d(100)),wblack:w("hwb",2,d(100)),cyan:w("cmyk",0,d(100)),magenta:w("cmyk",1,d(100)),yellow:w("cmyk",2,d(100)),black:w("cmyk",3,d(100)),x:w("xyz",0,d(100)),y:w("xyz",1,d(100)),z:w("xyz",2,d(100)),l:w("lab",0,d(100)),a:w("lab",1),b:w("lab",2),keyword:function(C){return arguments.length?new _(C):I[this.model].keyword(this.color)},hex:function(C){return arguments.length?new _(C):b.to.hex(this.rgb().round().color)},rgbNumber:function(){var C=this.rgb().color;return(C[0]&255)<<16|(C[1]&255)<<8|C[2]&255},luminosity:function(){for(var C=this.rgb().color,T=[],B=0;B<C.length;B++){var D=C[B]/255;T[B]=D<=.03928?D/12.92:Math.pow((D+.055)/1.055,2.4)}return .2126*T[0]+.7152*T[1]+.0722*T[2]},contrast:function(C){var T=this.luminosity(),B=C.luminosity();return T>B?(T+.05)/(B+.05):(B+.05)/(T+.05)},level:function(C){var T=this.contrast(C);return T>=7.1?"AAA":T>=4.5?"AA":""},isDark:function(){var C=this.rgb().color,T=(C[0]*299+C[1]*587+C[2]*114)/1e3;return T<128},isLight:function(){return!this.isDark()},negate:function(){for(var C=this.rgb(),T=0;T<3;T++)C.color[T]=255-C.color[T];return C},lighten:function(C){var T=this.hsl();return T.color[2]+=T.color[2]*C,T},darken:function(C){var T=this.hsl();return T.color[2]-=T.color[2]*C,T},saturate:function(C){var T=this.hsl();return T.color[1]+=T.color[1]*C,T},desaturate:function(C){var T=this.hsl();return T.color[1]-=T.color[1]*C,T},whiten:function(C){var T=this.hwb();return T.color[1]+=T.color[1]*C,T},blacken:function(C){var T=this.hwb();return T.color[2]+=T.color[2]*C,T},grayscale:function(){var C=this.rgb().color,T=C[0]*.3+C[1]*.59+C[2]*.11;return _.rgb(T,T,T)},fade:function(C){return this.alpha(this.valpha-this.valpha*C)},opaquer:function(C){return this.alpha(this.valpha+this.valpha*C)},rotate:function(C){var T=this.hsl(),B=T.color[0];return B=(B+C)%360,B=B<0?360+B:B,T.color[0]=B,T},mix:function(C,T){if(!C||!C.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof C);var B=C.rgb(),D=this.rgb(),Y=T===void 0?.5:T,K=2*Y-1,H=B.alpha()-D.alpha(),st=((K*H==-1?K:(K+H)/(1+K*H))+1)/2,pt=1-st;return _.rgb(st*B.red()+pt*D.red(),st*B.green()+pt*D.green(),st*B.blue()+pt*D.blue(),B.alpha()*Y+D.alpha()*(1-Y))}},Object.keys(I).forEach(function(C){if(O.indexOf(C)===-1){var T=I[C].channels;_.prototype[C]=function(){if(this.model===C)return new _(this);if(arguments.length)return new _(arguments,C);var B=typeof arguments[T]=="number"?T:this.valpha;return new _(y(I[this.model][C].raw(this.color)).concat(B),C)},_[C]=function(B){return typeof B=="number"&&(B=m(P.call(arguments),T)),new _(B,C)}}});function E(C,T){return Number(C.toFixed(T))}function g(C){return function(T){return E(T,C)}}function w(C,T,B){return C=Array.isArray(C)?C:[C],C.forEach(function(D){(A[D]||(A[D]=[]))[T]=B}),C=C[0],function(D){var Y;return arguments.length?(B&&(D=B(D)),Y=this[C](),Y.color[T]=D,Y):(Y=this[C]().color[T],B&&(Y=B(Y)),Y)}}function d(C){return function(T){return Math.max(0,Math.min(C,T))}}function y(C){return Array.isArray(C)?C:[C]}function m(C,T){for(var B=0;B<T;B++)typeof C[B]!="number"&&(C[B]=0);return C}Ct.exports=_},12956:function(Ct,S,p){var b=p(58900),I={};for(var P in b)b.hasOwnProperty(P)&&(I[b[P]]=P);var O=Ct.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var L in O)if(O.hasOwnProperty(L)){if(!("channels"in O[L]))throw new Error("missing channels property: "+L);if(!("labels"in O[L]))throw new Error("missing channel labels property: "+L);if(O[L].labels.length!==O[L].channels)throw new Error("channel and label counts mismatch: "+L);var A=O[L].channels,_=O[L].labels;delete O[L].channels,delete O[L].labels,Object.defineProperty(O[L],"channels",{value:A}),Object.defineProperty(O[L],"labels",{value:_})}O.rgb.hsl=function(g){var w=g[0]/255,d=g[1]/255,y=g[2]/255,m=Math.min(w,d,y),C=Math.max(w,d,y),T=C-m,B,D,Y;return C===m?B=0:w===C?B=(d-y)/T:d===C?B=2+(y-w)/T:y===C&&(B=4+(w-d)/T),B=Math.min(B*60,360),B<0&&(B+=360),Y=(m+C)/2,C===m?D=0:Y<=.5?D=T/(C+m):D=T/(2-C-m),[B,D*100,Y*100]},O.rgb.hsv=function(g){var w,d,y,m,C,T=g[0]/255,B=g[1]/255,D=g[2]/255,Y=Math.max(T,B,D),K=Y-Math.min(T,B,D),H=function(st){return(Y-st)/6/K+1/2};return K===0?m=C=0:(C=K/Y,w=H(T),d=H(B),y=H(D),T===Y?m=y-d:B===Y?m=1/3+w-y:D===Y&&(m=2/3+d-w),m<0?m+=1:m>1&&(m-=1)),[m*360,C*100,Y*100]},O.rgb.hwb=function(g){var w=g[0],d=g[1],y=g[2],m=O.rgb.hsl(g)[0],C=1/255*Math.min(w,Math.min(d,y));return y=1-1/255*Math.max(w,Math.max(d,y)),[m,C*100,y*100]},O.rgb.cmyk=function(g){var w=g[0]/255,d=g[1]/255,y=g[2]/255,m,C,T,B;return B=Math.min(1-w,1-d,1-y),m=(1-w-B)/(1-B)||0,C=(1-d-B)/(1-B)||0,T=(1-y-B)/(1-B)||0,[m*100,C*100,T*100,B*100]};function E(g,w){return Math.pow(g[0]-w[0],2)+Math.pow(g[1]-w[1],2)+Math.pow(g[2]-w[2],2)}O.rgb.keyword=function(g){var w=I[g];if(w)return w;var d=Infinity,y;for(var m in b)if(b.hasOwnProperty(m)){var C=b[m],T=E(g,C);T<d&&(d=T,y=m)}return y},O.keyword.rgb=function(g){return b[g]},O.rgb.xyz=function(g){var w=g[0]/255,d=g[1]/255,y=g[2]/255;w=w>.04045?Math.pow((w+.055)/1.055,2.4):w/12.92,d=d>.04045?Math.pow((d+.055)/1.055,2.4):d/12.92,y=y>.04045?Math.pow((y+.055)/1.055,2.4):y/12.92;var m=w*.4124+d*.3576+y*.1805,C=w*.2126+d*.7152+y*.0722,T=w*.0193+d*.1192+y*.9505;return[m*100,C*100,T*100]},O.rgb.lab=function(g){var w=O.rgb.xyz(g),d=w[0],y=w[1],m=w[2],C,T,B;return d/=95.047,y/=100,m/=108.883,d=d>.008856?Math.pow(d,1/3):7.787*d+16/116,y=y>.008856?Math.pow(y,1/3):7.787*y+16/116,m=m>.008856?Math.pow(m,1/3):7.787*m+16/116,C=116*y-16,T=500*(d-y),B=200*(y-m),[C,T,B]},O.hsl.rgb=function(g){var w=g[0]/360,d=g[1]/100,y=g[2]/100,m,C,T,B,D;if(d===0)return D=y*255,[D,D,D];y<.5?C=y*(1+d):C=y+d-y*d,m=2*y-C,B=[0,0,0];for(var Y=0;Y<3;Y++)T=w+1/3*-(Y-1),T<0&&T++,T>1&&T--,6*T<1?D=m+(C-m)*6*T:2*T<1?D=C:3*T<2?D=m+(C-m)*(2/3-T)*6:D=m,B[Y]=D*255;return B},O.hsl.hsv=function(g){var w=g[0],d=g[1]/100,y=g[2]/100,m=d,C=Math.max(y,.01),T,B;return y*=2,d*=y<=1?y:2-y,m*=C<=1?C:2-C,B=(y+d)/2,T=y===0?2*m/(C+m):2*d/(y+d),[w,T*100,B*100]},O.hsv.rgb=function(g){var w=g[0]/60,d=g[1]/100,y=g[2]/100,m=Math.floor(w)%6,C=w-Math.floor(w),T=255*y*(1-d),B=255*y*(1-d*C),D=255*y*(1-d*(1-C));switch(y*=255,m){case 0:return[y,D,T];case 1:return[B,y,T];case 2:return[T,y,D];case 3:return[T,B,y];case 4:return[D,T,y];case 5:return[y,T,B]}},O.hsv.hsl=function(g){var w=g[0],d=g[1]/100,y=g[2]/100,m=Math.max(y,.01),C,T,B;return B=(2-d)*y,C=(2-d)*m,T=d*m,T/=C<=1?C:2-C,T=T||0,B/=2,[w,T*100,B*100]},O.hwb.rgb=function(g){var w=g[0]/360,d=g[1]/100,y=g[2]/100,m=d+y,C,T,B,D;m>1&&(d/=m,y/=m),C=Math.floor(6*w),T=1-y,B=6*w-C,(C&1)!=0&&(B=1-B),D=d+B*(T-d);var Y,K,H;switch(C){default:case 6:case 0:Y=T,K=D,H=d;break;case 1:Y=D,K=T,H=d;break;case 2:Y=d,K=T,H=D;break;case 3:Y=d,K=D,H=T;break;case 4:Y=D,K=d,H=T;break;case 5:Y=T,K=d,H=D;break}return[Y*255,K*255,H*255]},O.cmyk.rgb=function(g){var w=g[0]/100,d=g[1]/100,y=g[2]/100,m=g[3]/100,C,T,B;return C=1-Math.min(1,w*(1-m)+m),T=1-Math.min(1,d*(1-m)+m),B=1-Math.min(1,y*(1-m)+m),[C*255,T*255,B*255]},O.xyz.rgb=function(g){var w=g[0]/100,d=g[1]/100,y=g[2]/100,m,C,T;return m=w*3.2406+d*-1.5372+y*-.4986,C=w*-.9689+d*1.8758+y*.0415,T=w*.0557+d*-.204+y*1.057,m=m>.0031308?1.055*Math.pow(m,1/2.4)-.055:m*12.92,C=C>.0031308?1.055*Math.pow(C,1/2.4)-.055:C*12.92,T=T>.0031308?1.055*Math.pow(T,1/2.4)-.055:T*12.92,m=Math.min(Math.max(0,m),1),C=Math.min(Math.max(0,C),1),T=Math.min(Math.max(0,T),1),[m*255,C*255,T*255]},O.xyz.lab=function(g){var w=g[0],d=g[1],y=g[2],m,C,T;return w/=95.047,d/=100,y/=108.883,w=w>.008856?Math.pow(w,1/3):7.787*w+16/116,d=d>.008856?Math.pow(d,1/3):7.787*d+16/116,y=y>.008856?Math.pow(y,1/3):7.787*y+16/116,m=116*d-16,C=500*(w-d),T=200*(d-y),[m,C,T]},O.lab.xyz=function(g){var w=g[0],d=g[1],y=g[2],m,C,T;C=(w+16)/116,m=d/500+C,T=C-y/200;var B=Math.pow(C,3),D=Math.pow(m,3),Y=Math.pow(T,3);return C=B>.008856?B:(C-16/116)/7.787,m=D>.008856?D:(m-16/116)/7.787,T=Y>.008856?Y:(T-16/116)/7.787,m*=95.047,C*=100,T*=108.883,[m,C,T]},O.lab.lch=function(g){var w=g[0],d=g[1],y=g[2],m,C,T;return m=Math.atan2(y,d),C=m*360/2/Math.PI,C<0&&(C+=360),T=Math.sqrt(d*d+y*y),[w,T,C]},O.lch.lab=function(g){var w=g[0],d=g[1],y=g[2],m,C,T;return T=y/360*2*Math.PI,m=d*Math.cos(T),C=d*Math.sin(T),[w,m,C]},O.rgb.ansi16=function(g){var w=g[0],d=g[1],y=g[2],m=1 in arguments?arguments[1]:O.rgb.hsv(g)[2];if(m=Math.round(m/50),m===0)return 30;var C=30+(Math.round(y/255)<<2|Math.round(d/255)<<1|Math.round(w/255));return m===2&&(C+=60),C},O.hsv.ansi16=function(g){return O.rgb.ansi16(O.hsv.rgb(g),g[2])},O.rgb.ansi256=function(g){var w=g[0],d=g[1],y=g[2];if(w===d&&d===y)return w<8?16:w>248?231:Math.round((w-8)/247*24)+232;var m=16+36*Math.round(w/255*5)+6*Math.round(d/255*5)+Math.round(y/255*5);return m},O.ansi16.rgb=function(g){var w=g%10;if(w===0||w===7)return g>50&&(w+=3.5),w=w/10.5*255,[w,w,w];var d=(~~(g>50)+1)*.5,y=(w&1)*d*255,m=(w>>1&1)*d*255,C=(w>>2&1)*d*255;return[y,m,C]},O.ansi256.rgb=function(g){if(g>=232){var w=(g-232)*10+8;return[w,w,w]}g-=16;var d,y=Math.floor(g/36)/5*255,m=Math.floor((d=g%36)/6)/5*255,C=d%6/5*255;return[y,m,C]},O.rgb.hex=function(g){var w=((Math.round(g[0])&255)<<16)+((Math.round(g[1])&255)<<8)+(Math.round(g[2])&255),d=w.toString(16).toUpperCase();return"000000".substring(d.length)+d},O.hex.rgb=function(g){var w=g.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!w)return[0,0,0];var d=w[0];w[0].length===3&&(d=d.split("").map(function(B){return B+B}).join(""));var y=parseInt(d,16),m=y>>16&255,C=y>>8&255,T=y&255;return[m,C,T]},O.rgb.hcg=function(g){var w=g[0]/255,d=g[1]/255,y=g[2]/255,m=Math.max(Math.max(w,d),y),C=Math.min(Math.min(w,d),y),T=m-C,B,D;return T<1?B=C/(1-T):B=0,T<=0?D=0:m===w?D=(d-y)/T%6:m===d?D=2+(y-w)/T:D=4+(w-d)/T+4,D/=6,D%=1,[D*360,T*100,B*100]},O.hsl.hcg=function(g){var w=g[1]/100,d=g[2]/100,y=1,m=0;return d<.5?y=2*w*d:y=2*w*(1-d),y<1&&(m=(d-.5*y)/(1-y)),[g[0],y*100,m*100]},O.hsv.hcg=function(g){var w=g[1]/100,d=g[2]/100,y=w*d,m=0;return y<1&&(m=(d-y)/(1-y)),[g[0],y*100,m*100]},O.hcg.rgb=function(g){var w=g[0]/360,d=g[1]/100,y=g[2]/100;if(d===0)return[y*255,y*255,y*255];var m=[0,0,0],C=w%1*6,T=C%1,B=1-T,D=0;switch(Math.floor(C)){case 0:m[0]=1,m[1]=T,m[2]=0;break;case 1:m[0]=B,m[1]=1,m[2]=0;break;case 2:m[0]=0,m[1]=1,m[2]=T;break;case 3:m[0]=0,m[1]=B,m[2]=1;break;case 4:m[0]=T,m[1]=0,m[2]=1;break;default:m[0]=1,m[1]=0,m[2]=B}return D=(1-d)*y,[(d*m[0]+D)*255,(d*m[1]+D)*255,(d*m[2]+D)*255]},O.hcg.hsv=function(g){var w=g[1]/100,d=g[2]/100,y=w+d*(1-w),m=0;return y>0&&(m=w/y),[g[0],m*100,y*100]},O.hcg.hsl=function(g){var w=g[1]/100,d=g[2]/100,y=d*(1-w)+.5*w,m=0;return y>0&&y<.5?m=w/(2*y):y>=.5&&y<1&&(m=w/(2*(1-y))),[g[0],m*100,y*100]},O.hcg.hwb=function(g){var w=g[1]/100,d=g[2]/100,y=w+d*(1-w);return[g[0],(y-w)*100,(1-y)*100]},O.hwb.hcg=function(g){var w=g[1]/100,d=g[2]/100,y=1-d,m=y-w,C=0;return m<1&&(C=(y-m)/(1-m)),[g[0],m*100,C*100]},O.apple.rgb=function(g){return[g[0]/65535*255,g[1]/65535*255,g[2]/65535*255]},O.rgb.apple=function(g){return[g[0]/255*65535,g[1]/255*65535,g[2]/255*65535]},O.gray.rgb=function(g){return[g[0]/100*255,g[0]/100*255,g[0]/100*255]},O.gray.hsl=O.gray.hsv=function(g){return[0,0,g[0]]},O.gray.hwb=function(g){return[0,100,g[0]]},O.gray.cmyk=function(g){return[0,0,0,g[0]]},O.gray.lab=function(g){return[g[0],0,0]},O.gray.hex=function(g){var w=Math.round(g[0]/100*255)&255,d=(w<<16)+(w<<8)+w,y=d.toString(16).toUpperCase();return"000000".substring(y.length)+y},O.rgb.gray=function(g){var w=(g[0]+g[1]+g[2])/3;return[w/255*100]}},80978:function(Ct,S,p){var b=p(12956),I=p(87774),P={},O=Object.keys(b);function L(_){var E=function(g){return g==null?g:(arguments.length>1&&(g=Array.prototype.slice.call(arguments)),_(g))};return"conversion"in _&&(E.conversion=_.conversion),E}function A(_){var E=function(g){if(g==null)return g;arguments.length>1&&(g=Array.prototype.slice.call(arguments));var w=_(g);if(typeof w=="object")for(var d=w.length,y=0;y<d;y++)w[y]=Math.round(w[y]);return w};return"conversion"in _&&(E.conversion=_.conversion),E}O.forEach(function(_){P[_]={},Object.defineProperty(P[_],"channels",{value:b[_].channels}),Object.defineProperty(P[_],"labels",{value:b[_].labels});var E=I(_),g=Object.keys(E);g.forEach(function(w){var d=E[w];P[_][w]=A(d),P[_][w].raw=L(d)})}),Ct.exports=P},87774:function(Ct,S,p){var b=p(12956);function I(){for(var A={},_=Object.keys(b),E=_.length,g=0;g<E;g++)A[_[g]]={distance:-1,parent:null};return A}function P(A){var _=I(),E=[A];for(_[A].distance=0;E.length;)for(var g=E.pop(),w=Object.keys(b[g]),d=w.length,y=0;y<d;y++){var m=w[y],C=_[m];C.distance===-1&&(C.distance=_[g].distance+1,C.parent=g,E.unshift(m))}return _}function O(A,_){return function(E){return _(A(E))}}function L(A,_){for(var E=[_[A].parent,A],g=b[_[A].parent][A],w=_[A].parent;_[w].parent;)E.unshift(_[w].parent),g=O(b[_[w].parent][w],g),w=_[w].parent;return g.conversion=E,g}Ct.exports=function(A){for(var _=P(A),E={},g=Object.keys(_),w=g.length,d=0;d<w;d++){var y=g[d],m=_[y];m.parent!==null&&(E[y]=L(y,_))}return E}},58900:function(Ct){"use strict";Ct.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},68716:function(Ct,S,p){"use strict";p.d(S,{yD:function(){return b},_e:function(){return I},tw:function(){return P}});function b(O){return O*O*O}function I(O){return--O*O*O+1}function P(O){return((O*=2)<=1?O*O*O:(O-=2)*O*O+2)/2}},13681:function(Ct,S,p){"use strict";p.r(S),p.d(S,{easeBack:function(){return _t},easeBackIn:function(){return f},easeBackInOut:function(){return _t},easeBackOut:function(){return yt},easeBounce:function(){return z},easeBounceIn:function(){return lt},easeBounceInOut:function(){return $},easeBounceOut:function(){return z},easeCircle:function(){return st},easeCircleIn:function(){return K},easeCircleInOut:function(){return st},easeCircleOut:function(){return H},easeCubic:function(){return L.tw},easeCubicIn:function(){return L.yD},easeCubicInOut:function(){return L.tw},easeCubicOut:function(){return L._e},easeElastic:function(){return ae},easeElasticIn:function(){return re},easeElasticInOut:function(){return Nt},easeElasticOut:function(){return ae},easeExp:function(){return Y},easeExpIn:function(){return B},easeExpInOut:function(){return Y},easeExpOut:function(){return D},easeLinear:function(){return b},easePoly:function(){return g},easePolyIn:function(){return _},easePolyInOut:function(){return g},easePolyOut:function(){return E},easeQuad:function(){return O},easeQuadIn:function(){return I},easeQuadInOut:function(){return O},easeQuadOut:function(){return P},easeSin:function(){return C},easeSinIn:function(){return y},easeSinInOut:function(){return C},easeSinOut:function(){return m}});function b(Lt){return+Lt}function I(Lt){return Lt*Lt}function P(Lt){return Lt*(2-Lt)}function O(Lt){return((Lt*=2)<=1?Lt*Lt:--Lt*(2-Lt)+1)/2}var L=p(68716),A=3,_=function Lt(bt){bt=+bt;function at(rt){return Math.pow(rt,bt)}return at.exponent=Lt,at}(A),E=function Lt(bt){bt=+bt;function at(rt){return 1-Math.pow(1-rt,bt)}return at.exponent=Lt,at}(A),g=function Lt(bt){bt=+bt;function at(rt){return((rt*=2)<=1?Math.pow(rt,bt):2-Math.pow(2-rt,bt))/2}return at.exponent=Lt,at}(A),w=Math.PI,d=w/2;function y(Lt){return+Lt==1?1:1-Math.cos(Lt*d)}function m(Lt){return Math.sin(Lt*d)}function C(Lt){return(1-Math.cos(w*Lt))/2}function T(Lt){return(Math.pow(2,-10*Lt)-.0009765625)*1.0009775171065494}function B(Lt){return T(1-+Lt)}function D(Lt){return 1-T(Lt)}function Y(Lt){return((Lt*=2)<=1?T(1-Lt):2-T(Lt-1))/2}function K(Lt){return 1-Math.sqrt(1-Lt*Lt)}function H(Lt){return Math.sqrt(1- --Lt*Lt)}function st(Lt){return((Lt*=2)<=1?1-Math.sqrt(1-Lt*Lt):Math.sqrt(1-(Lt-=2)*Lt)+1)/2}var pt=4/11,ct=6/11,Ot=8/11,Rt=3/4,Qt=9/11,Gt=10/11,Z=15/16,nt=21/22,Q=63/64,dt=1/pt/pt;function lt(Lt){return 1-z(1-Lt)}function z(Lt){return(Lt=+Lt)<pt?dt*Lt*Lt:Lt<Ot?dt*(Lt-=ct)*Lt+Rt:Lt<Gt?dt*(Lt-=Qt)*Lt+Z:dt*(Lt-=nt)*Lt+Q}function $(Lt){return((Lt*=2)<=1?1-z(1-Lt):z(Lt-1)+1)/2}var j=1.70158,f=function Lt(bt){bt=+bt;function at(rt){return(rt=+rt)*rt*(bt*(rt-1)+rt)}return at.overshoot=Lt,at}(j),yt=function Lt(bt){bt=+bt;function at(rt){return--rt*rt*((rt+1)*bt+rt)+1}return at.overshoot=Lt,at}(j),_t=function Lt(bt){bt=+bt;function at(rt){return((rt*=2)<1?rt*rt*((bt+1)*rt-bt):(rt-=2)*rt*((bt+1)*rt+bt)+2)/2}return at.overshoot=Lt,at}(j),jt=2*Math.PI,qt=1,Vt=.3,re=function Lt(bt,at){var rt=Math.asin(1/(bt=Math.max(1,bt)))*(at/=jt);function vt(tt){return bt*T(- --tt)*Math.sin((rt-tt)/at)}return vt.amplitude=function(tt){return Lt(tt,at*jt)},vt.period=function(tt){return Lt(bt,tt)},vt}(qt,Vt),ae=function Lt(bt,at){var rt=Math.asin(1/(bt=Math.max(1,bt)))*(at/=jt);function vt(tt){return 1-bt*T(tt=+tt)*Math.sin((tt+rt)/at)}return vt.amplitude=function(tt){return Lt(tt,at*jt)},vt.period=function(tt){return Lt(bt,tt)},vt}(qt,Vt),Nt=function Lt(bt,at){var rt=Math.asin(1/(bt=Math.max(1,bt)))*(at/=jt);function vt(tt){return((tt=tt*2-1)<0?bt*T(-tt)*Math.sin((rt-tt)/at):2-bt*T(tt)*Math.sin((rt+tt)/at))/2}return vt.amplitude=function(tt){return Lt(tt,at*jt)},vt.period=function(tt){return Lt(bt,tt)},vt}(qt,Vt)},88122:function(Ct,S,p){"use strict";p.d(S,{Z:function(){return P},M:function(){return O}});var b=p(42800),I=p(67896);function P(L,A){return((0,I.v)(A)?I.Z:O)(L,A)}function O(L,A){var _=A?A.length:0,E=L?Math.min(_,L.length):0,g=new Array(E),w=new Array(_),d;for(d=0;d<E;++d)g[d]=(0,b.Z)(L[d],A[d]);for(;d<_;++d)w[d]=A[d];return function(y){for(d=0;d<E;++d)w[d]=g[d](y);return w}}},67896:function(Ct,S,p){"use strict";p.d(S,{Z:function(){return b},v:function(){return I}});function b(P,O){O||(O=[]);var L=P?Math.min(O.length,P.length):0,A=O.slice(),_;return function(E){for(_=0;_<L;++_)A[_]=P[_]*(1-E)+O[_]*E;return A}}function I(P){return ArrayBuffer.isView(P)&&!(P instanceof DataView)}},42800:function(Ct,S,p){"use strict";p.d(S,{Z:function(){return Ye}});function b(te,pe,Te){te.prototype=pe.prototype=Te,Te.constructor=te}function I(te,pe){var Te=Object.create(te.prototype);for(var ze in pe)Te[ze]=pe[ze];return Te}function P(){}var O=.7,L=1/O,A="\\s*([+-]?\\d+)\\s*",_="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",E="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",g=/^#([0-9a-f]{3,8})$/,w=new RegExp("^rgb\\("+[A,A,A]+"\\)$"),d=new RegExp("^rgb\\("+[E,E,E]+"\\)$"),y=new RegExp("^rgba\\("+[A,A,A,_]+"\\)$"),m=new RegExp("^rgba\\("+[E,E,E,_]+"\\)$"),C=new RegExp("^hsl\\("+[_,E,E]+"\\)$"),T=new RegExp("^hsla\\("+[_,E,E,_]+"\\)$"),B={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};b(P,H,{copy:function(te){return Object.assign(new this.constructor,this,te)},displayable:function(){return this.rgb().displayable()},hex:D,formatHex:D,formatHsl:Y,formatRgb:K,toString:K});function D(){return this.rgb().formatHex()}function Y(){return Q(this).formatHsl()}function K(){return this.rgb().formatRgb()}function H(te){var pe,Te;return te=(te+"").trim().toLowerCase(),(pe=g.exec(te))?(Te=pe[1].length,pe=parseInt(pe[1],16),Te===6?st(pe):Te===3?new Rt(pe>>8&15|pe>>4&240,pe>>4&15|pe&240,(pe&15)<<4|pe&15,1):Te===8?pt(pe>>24&255,pe>>16&255,pe>>8&255,(pe&255)/255):Te===4?pt(pe>>12&15|pe>>8&240,pe>>8&15|pe>>4&240,pe>>4&15|pe&240,((pe&15)<<4|pe&15)/255):null):(pe=w.exec(te))?new Rt(pe[1],pe[2],pe[3],1):(pe=d.exec(te))?new Rt(pe[1]*255/100,pe[2]*255/100,pe[3]*255/100,1):(pe=y.exec(te))?pt(pe[1],pe[2],pe[3],pe[4]):(pe=m.exec(te))?pt(pe[1]*255/100,pe[2]*255/100,pe[3]*255/100,pe[4]):(pe=C.exec(te))?nt(pe[1],pe[2]/100,pe[3]/100,1):(pe=T.exec(te))?nt(pe[1],pe[2]/100,pe[3]/100,pe[4]):B.hasOwnProperty(te)?st(B[te]):te==="transparent"?new Rt(NaN,NaN,NaN,0):null}function st(te){return new Rt(te>>16&255,te>>8&255,te&255,1)}function pt(te,pe,Te,ze){return ze<=0&&(te=pe=Te=NaN),new Rt(te,pe,Te,ze)}function ct(te){return te instanceof P||(te=H(te)),te?(te=te.rgb(),new Rt(te.r,te.g,te.b,te.opacity)):new Rt}function Ot(te,pe,Te,ze){return arguments.length===1?ct(te):new Rt(te,pe,Te,ze==null?1:ze)}function Rt(te,pe,Te,ze){this.r=+te,this.g=+pe,this.b=+Te,this.opacity=+ze}b(Rt,Ot,I(P,{brighter:function(te){return te=te==null?L:Math.pow(L,te),new Rt(this.r*te,this.g*te,this.b*te,this.opacity)},darker:function(te){return te=te==null?O:Math.pow(O,te),new Rt(this.r*te,this.g*te,this.b*te,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Qt,formatHex:Qt,formatRgb:Gt,toString:Gt}));function Qt(){return"#"+Z(this.r)+Z(this.g)+Z(this.b)}function Gt(){var te=this.opacity;return te=isNaN(te)?1:Math.max(0,Math.min(1,te)),(te===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(te===1?")":", "+te+")")}function Z(te){return te=Math.max(0,Math.min(255,Math.round(te)||0)),(te<16?"0":"")+te.toString(16)}function nt(te,pe,Te,ze){return ze<=0?te=pe=Te=NaN:Te<=0||Te>=1?te=pe=NaN:pe<=0&&(te=NaN),new lt(te,pe,Te,ze)}function Q(te){if(te instanceof lt)return new lt(te.h,te.s,te.l,te.opacity);if(te instanceof P||(te=H(te)),!te)return new lt;if(te instanceof lt)return te;te=te.rgb();var pe=te.r/255,Te=te.g/255,ze=te.b/255,ur=Math.min(pe,Te,ze),Ze=Math.max(pe,Te,ze),pr=NaN,Pr=Ze-ur,Or=(Ze+ur)/2;return Pr?(pe===Ze?pr=(Te-ze)/Pr+(Te<ze)*6:Te===Ze?pr=(ze-pe)/Pr+2:pr=(pe-Te)/Pr+4,Pr/=Or<.5?Ze+ur:2-Ze-ur,pr*=60):Pr=Or>0&&Or<1?0:pr,new lt(pr,Pr,Or,te.opacity)}function dt(te,pe,Te,ze){return arguments.length===1?Q(te):new lt(te,pe,Te,ze==null?1:ze)}function lt(te,pe,Te,ze){this.h=+te,this.s=+pe,this.l=+Te,this.opacity=+ze}b(lt,dt,I(P,{brighter:function(te){return te=te==null?L:Math.pow(L,te),new lt(this.h,this.s,this.l*te,this.opacity)},darker:function(te){return te=te==null?O:Math.pow(O,te),new lt(this.h,this.s,this.l*te,this.opacity)},rgb:function(){var te=this.h%360+(this.h<0)*360,pe=isNaN(te)||isNaN(this.s)?0:this.s,Te=this.l,ze=Te+(Te<.5?Te:1-Te)*pe,ur=2*Te-ze;return new Rt(z(te>=240?te-240:te+120,ur,ze),z(te,ur,ze),z(te<120?te+240:te-120,ur,ze),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var te=this.opacity;return te=isNaN(te)?1:Math.max(0,Math.min(1,te)),(te===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(te===1?")":", "+te+")")}}));function z(te,pe,Te){return(te<60?pe+(Te-pe)*te/60:te<180?Te:te<240?pe+(Te-pe)*(240-te)/60:pe)*255}function $(te,pe,Te,ze,ur){var Ze=te*te,pr=Ze*te;return((1-3*te+3*Ze-pr)*pe+(4-6*Ze+3*pr)*Te+(1+3*te+3*Ze-3*pr)*ze+pr*ur)/6}function j(te){var pe=te.length-1;return function(Te){var ze=Te<=0?Te=0:Te>=1?(Te=1,pe-1):Math.floor(Te*pe),ur=te[ze],Ze=te[ze+1],pr=ze>0?te[ze-1]:2*ur-Ze,Pr=ze<pe-1?te[ze+2]:2*Ze-ur;return $((Te-ze/pe)*pe,pr,ur,Ze,Pr)}}function f(te){var pe=te.length;return function(Te){var ze=Math.floor(((Te%=1)<0?++Te:Te)*pe),ur=te[(ze+pe-1)%pe],Ze=te[ze%pe],pr=te[(ze+1)%pe],Pr=te[(ze+2)%pe];return $((Te-ze/pe)*pe,ur,Ze,pr,Pr)}}function yt(te){return function(){return te}}function _t(te,pe){return function(Te){return te+Te*pe}}function jt(te,pe,Te){return te=Math.pow(te,Te),pe=Math.pow(pe,Te)-te,Te=1/Te,function(ze){return Math.pow(te+ze*pe,Te)}}function qt(te,pe){var Te=pe-te;return Te?_t(te,Te>180||Te<-180?Te-360*Math.round(Te/360):Te):constant(isNaN(te)?pe:te)}function Vt(te){return(te=+te)==1?re:function(pe,Te){return Te-pe?jt(pe,Te,te):yt(isNaN(pe)?Te:pe)}}function re(te,pe){var Te=pe-te;return Te?_t(te,Te):yt(isNaN(te)?pe:te)}var ae=function te(pe){var Te=Vt(pe);function ze(ur,Ze){var pr=Te((ur=Ot(ur)).r,(Ze=Ot(Ze)).r),Pr=Te(ur.g,Ze.g),Or=Te(ur.b,Ze.b),nn=re(ur.opacity,Ze.opacity);return function(kn){return ur.r=pr(kn),ur.g=Pr(kn),ur.b=Or(kn),ur.opacity=nn(kn),ur+""}}return ze.gamma=te,ze}(1);function Nt(te){return function(pe){var Te=pe.length,ze=new Array(Te),ur=new Array(Te),Ze=new Array(Te),pr,Pr;for(pr=0;pr<Te;++pr)Pr=Ot(pe[pr]),ze[pr]=Pr.r||0,ur[pr]=Pr.g||0,Ze[pr]=Pr.b||0;return ze=te(ze),ur=te(ur),Ze=te(Ze),Pr.opacity=1,function(Or){return Pr.r=ze(Or),Pr.g=ur(Or),Pr.b=Ze(Or),Pr+""}}}var Lt=Nt(j),bt=Nt(f),at=p(88122);function rt(te,pe){var Te=new Date;return te=+te,pe=+pe,function(ze){return Te.setTime(te*(1-ze)+pe*ze),Te}}function vt(te,pe){return te=+te,pe=+pe,function(Te){return te*(1-Te)+pe*Te}}function tt(te,pe){var Te={},ze={},ur;(te===null||typeof te!="object")&&(te={}),(pe===null||typeof pe!="object")&&(pe={});for(ur in pe)ur in te?Te[ur]=Ye(te[ur],pe[ur]):ze[ur]=pe[ur];return function(Ze){for(ur in Te)ze[ur]=Te[ur](Ze);return ze}}var q=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Et=new RegExp(q.source,"g");function It(te){return function(){return te}}function Kt(te){return function(pe){return te(pe)+""}}function ue(te,pe){var Te=q.lastIndex=Et.lastIndex=0,ze,ur,Ze,pr=-1,Pr=[],Or=[];for(te=te+"",pe=pe+"";(ze=q.exec(te))&&(ur=Et.exec(pe));)(Ze=ur.index)>Te&&(Ze=pe.slice(Te,Ze),Pr[pr]?Pr[pr]+=Ze:Pr[++pr]=Ze),(ze=ze[0])===(ur=ur[0])?Pr[pr]?Pr[pr]+=ur:Pr[++pr]=ur:(Pr[++pr]=null,Or.push({i:pr,x:vt(ze,ur)})),Te=Et.lastIndex;return Te<pe.length&&(Ze=pe.slice(Te),Pr[pr]?Pr[pr]+=Ze:Pr[++pr]=Ze),Pr.length<2?Or[0]?Kt(Or[0].x):It(pe):(pe=Or.length,function(nn){for(var kn=0,ii;kn<pe;++kn)Pr[(ii=Or[kn]).i]=ii.x(nn);return Pr.join("")})}var we=p(67896);function Ye(te,pe){var Te=typeof pe,ze;return pe==null||Te==="boolean"?yt(pe):(Te==="number"?vt:Te==="string"?(ze=H(pe))?(pe=ze,ae):ue:pe instanceof H?ae:pe instanceof Date?rt:(0,we.v)(pe)?we.Z:Array.isArray(pe)?at.M:typeof pe.valueOf!="function"&&typeof pe.toString!="function"||isNaN(pe)?tt:vt)(te,pe)}},56645:function(Ct,S){(function(p,b){b(S)})(this,function(p){"use strict";function b(Gt,Z){return I(Gt)||P(Gt,Z)||O()}function I(Gt){if(Array.isArray(Gt))return Gt}function P(Gt,Z){var nt=[],Q=!0,dt=!1,lt=void 0;try{for(var z=Gt[Symbol.iterator](),$;!(Q=($=z.next()).done)&&(nt.push($.value),!(Z&&nt.length===Z));Q=!0);}catch(j){dt=!0,lt=j}finally{try{!Q&&z.return!=null&&z.return()}finally{if(dt)throw lt}}return nt}function O(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function L(Gt,Z,nt,Q){Gt=Gt.filter(function(Vt,re){var ae=Z(Vt,re),Nt=nt(Vt,re);return ae!=null&&isFinite(ae)&&Nt!=null&&isFinite(Nt)}),Q&&Gt.sort(function(Vt,re){return Z(Vt)-Z(re)});for(var dt=Gt.length,lt=new Float64Array(dt),z=new Float64Array(dt),$=0,j=0,f,yt,_t,jt=0;jt<dt;)_t=Gt[jt],lt[jt]=f=+Z(_t,jt,Gt),z[jt]=yt=+nt(_t,jt,Gt),++jt,$+=(f-$)/jt,j+=(yt-j)/jt;for(var qt=0;qt<dt;++qt)lt[qt]-=$,z[qt]-=j;return[lt,z,$,j]}function A(Gt,Z,nt,Q){for(var dt=0,lt=0,z=Gt.length;lt<z;lt++){var $=Gt[lt],j=+Z($,lt,Gt),f=+nt($,lt,Gt);j!=null&&isFinite(j)&&f!=null&&isFinite(f)&&Q(j,f,dt++)}}function _(Gt,Z,nt,Q,dt){var lt=0,z=0;return A(Gt,Z,nt,function($,j){var f=j-dt($),yt=j-Q;lt+=f*f,z+=yt*yt}),1-lt/z}function E(Gt){return Math.atan2(Gt[1][1]-Gt[0][1],Gt[1][0]-Gt[0][0])*180/Math.PI}function g(Gt){return[(Gt[0][0]+Gt[1][0])/2,(Gt[0][1]+Gt[1][1])/2]}function w(Gt,Z,nt){for(var Q=Math.log(Z-Gt)*Math.LOG10E+1|0,dt=1*Math.pow(10,-Q/2-1),lt=1e4,z=[j(Gt),j(Z)],$=0;f(z)&&$<lt;);return z;function j(yt){return[yt,nt(yt)]}function f(yt){$++;for(var _t=yt.length,jt=!1,qt=0;qt<_t-1;qt++){var Vt=yt[qt],re=yt[qt+1],ae=g([Vt,re]),Nt=j(ae[0]),Lt=E([Vt,ae]),bt=E([Vt,Nt]),at=Math.abs(Lt-bt);at>dt&&(yt.splice(qt+1,0,Nt),jt=!0)}return jt}}function d(Gt,Z,nt,Q){var dt=Q-Gt*Gt,lt=Math.abs(dt)<1e-24?0:(nt-Gt*Z)/dt,z=Z-lt*Gt;return[z,lt]}function y(){var Gt=function(lt){return lt[0]},Z=function(lt){return lt[1]},nt;function Q(dt){var lt=0,z=0,$=0,j=0,f=0,yt=0,_t=nt?+nt[0]:Infinity,jt=nt?+nt[1]:-Infinity;A(dt,Gt,Z,function(bt,at){var rt=Math.log(at),vt=bt*at;++lt,z+=(at-z)/lt,j+=(vt-j)/lt,yt+=(bt*vt-yt)/lt,$+=(at*rt-$)/lt,f+=(vt*rt-f)/lt,nt||(bt<_t&&(_t=bt),bt>jt&&(jt=bt))});var qt=d(j/z,$/z,f/z,yt/z),Vt=b(qt,2),re=Vt[0],ae=Vt[1];re=Math.exp(re);var Nt=function(at){return re*Math.exp(ae*at)},Lt=w(_t,jt,Nt);return Lt.a=re,Lt.b=ae,Lt.predict=Nt,Lt.rSquared=_(dt,Gt,Z,z,Nt),Lt}return Q.domain=function(dt){return arguments.length?(nt=dt,Q):nt},Q.x=function(dt){return arguments.length?(Gt=dt,Q):Gt},Q.y=function(dt){return arguments.length?(Z=dt,Q):Z},Q}function m(){var Gt=function(lt){return lt[0]},Z=function(lt){return lt[1]},nt;function Q(dt){var lt=0,z=0,$=0,j=0,f=0,yt=nt?+nt[0]:Infinity,_t=nt?+nt[1]:-Infinity;A(dt,Gt,Z,function(Lt,bt){++lt,z+=(Lt-z)/lt,$+=(bt-$)/lt,j+=(Lt*bt-j)/lt,f+=(Lt*Lt-f)/lt,nt||(Lt<yt&&(yt=Lt),Lt>_t&&(_t=Lt))});var jt=d(z,$,j,f),qt=b(jt,2),Vt=qt[0],re=qt[1],ae=function(bt){return re*bt+Vt},Nt=[[yt,ae(yt)],[_t,ae(_t)]];return Nt.a=re,Nt.b=Vt,Nt.predict=ae,Nt.rSquared=_(dt,Gt,Z,$,ae),Nt}return Q.domain=function(dt){return arguments.length?(nt=dt,Q):nt},Q.x=function(dt){return arguments.length?(Gt=dt,Q):Gt},Q.y=function(dt){return arguments.length?(Z=dt,Q):Z},Q}function C(Gt){Gt.sort(function(nt,Q){return nt-Q});var Z=Gt.length/2;return Z%1==0?(Gt[Z-1]+Gt[Z])/2:Gt[Math.floor(Z)]}var T=2,B=1e-12;function D(){var Gt=function(lt){return lt[0]},Z=function(lt){return lt[1]},nt=.3;function Q(dt){for(var lt=L(dt,Gt,Z,!0),z=b(lt,4),$=z[0],j=z[1],f=z[2],yt=z[3],_t=$.length,jt=Math.max(2,~~(nt*_t)),qt=new Float64Array(_t),Vt=new Float64Array(_t),re=new Float64Array(_t).fill(1),ae=-1;++ae<=T;){for(var Nt=[0,jt-1],Lt=0;Lt<_t;++Lt){for(var bt=$[Lt],at=Nt[0],rt=Nt[1],vt=bt-$[at]>$[rt]-bt?at:rt,tt=0,q=0,Et=0,It=0,Kt=0,ue=1/Math.abs($[vt]-bt||1),we=at;we<=rt;++we){var Ye=$[we],te=j[we],pe=Y(Math.abs(bt-Ye)*ue)*re[we],Te=Ye*pe;tt+=pe,q+=Te,Et+=te*pe,It+=te*Te,Kt+=Ye*Te}var ze=d(q/tt,Et/tt,It/tt,Kt/tt),ur=b(ze,2),Ze=ur[0],pr=ur[1];qt[Lt]=Ze+pr*bt,Vt[Lt]=Math.abs(j[Lt]-qt[Lt]),K($,Lt+1,Nt)}if(ae===T)break;var Pr=C(Vt);if(Math.abs(Pr)<B)break;for(var Or=0,nn,kn;Or<_t;++Or)nn=Vt[Or]/(6*Pr),re[Or]=nn>=1?B:(kn=1-nn*nn)*kn}return H($,qt,f,yt)}return Q.bandwidth=function(dt){return arguments.length?(nt=dt,Q):nt},Q.x=function(dt){return arguments.length?(Gt=dt,Q):Gt},Q.y=function(dt){return arguments.length?(Z=dt,Q):Z},Q}function Y(Gt){return(Gt=1-Gt*Gt*Gt)*Gt*Gt}function K(Gt,Z,nt){var Q=Gt[Z],dt=nt[0],lt=nt[1]+1;if(!(lt>=Gt.length))for(;Z>dt&&Gt[lt]-Q<=Q-Gt[dt];)nt[0]=++dt,nt[1]=lt,++lt}function H(Gt,Z,nt,Q){for(var dt=Gt.length,lt=[],z=0,$=0,j=[],f;z<dt;++z)f=Gt[z]+nt,j[0]===f?j[1]+=(Z[z]-j[1])/++$:($=0,j[1]+=Q,j=[f,Z[z]],lt.push(j));return j[1]+=Q,lt}function st(){var Gt=function(z){return z[0]},Z=function(z){return z[1]},nt=Math.E,Q;function dt(lt){var z=0,$=0,j=0,f=0,yt=0,_t=Q?+Q[0]:Infinity,jt=Q?+Q[1]:-Infinity,qt=Math.log(nt);A(lt,Gt,Z,function(at,rt){var vt=Math.log(at)/qt;++z,$+=(vt-$)/z,j+=(rt-j)/z,f+=(vt*rt-f)/z,yt+=(vt*vt-yt)/z,Q||(at<_t&&(_t=at),at>jt&&(jt=at))});var Vt=d($,j,f,yt),re=b(Vt,2),ae=re[0],Nt=re[1],Lt=function(rt){return Nt*Math.log(rt)/qt+ae},bt=w(_t,jt,Lt);return bt.a=Nt,bt.b=ae,bt.predict=Lt,bt.rSquared=_(lt,Gt,Z,j,Lt),bt}return dt.domain=function(lt){return arguments.length?(Q=lt,dt):Q},dt.x=function(lt){return arguments.length?(Gt=lt,dt):Gt},dt.y=function(lt){return arguments.length?(Z=lt,dt):Z},dt.base=function(lt){return arguments.length?(nt=lt,dt):nt},dt}function pt(){var Gt=function(lt){return lt[0]},Z=function(lt){return lt[1]},nt;function Q(dt){var lt=L(dt,Gt,Z),z=b(lt,4),$=z[0],j=z[1],f=z[2],yt=z[3],_t=$.length,jt=0,qt=0,Vt=0,re=0,ae=0,Nt,Lt,bt,at;for(Nt=0;Nt<_t;)Lt=$[Nt],bt=j[Nt++],at=Lt*Lt,jt+=(at-jt)/Nt,qt+=(at*Lt-qt)/Nt,Vt+=(at*at-Vt)/Nt,re+=(Lt*bt-re)/Nt,ae+=(at*bt-ae)/Nt;var rt=0,vt=0,tt=nt?+nt[0]:Infinity,q=nt?+nt[1]:-Infinity;A(dt,Gt,Z,function(pe,Te){vt++,rt+=(Te-rt)/vt,nt||(pe<tt&&(tt=pe),pe>q&&(q=pe))});var Et=Vt-jt*jt,It=jt*Et-qt*qt,Kt=(ae*jt-re*qt)/It,ue=(re*Et-ae*qt)/It,we=-Kt*jt,Ye=function(Te){return Te=Te-f,Kt*Te*Te+ue*Te+we+yt},te=w(tt,q,Ye);return te.a=Kt,te.b=ue-2*Kt*f,te.c=we-ue*f+Kt*f*f+yt,te.predict=Ye,te.rSquared=_(dt,Gt,Z,rt,Ye),te}return Q.domain=function(dt){return arguments.length?(nt=dt,Q):nt},Q.x=function(dt){return arguments.length?(Gt=dt,Q):Gt},Q.y=function(dt){return arguments.length?(Z=dt,Q):Z},Q}function ct(){var Gt=function(z){return z[0]},Z=function(z){return z[1]},nt=3,Q;function dt(lt){if(nt===1){var z=m().x(Gt).y(Z).domain(Q)(lt);return z.coefficients=[z.b,z.a],delete z.a,delete z.b,z}if(nt===2){var $=pt().x(Gt).y(Z).domain(Q)(lt);return $.coefficients=[$.c,$.b,$.a],delete $.a,delete $.b,delete $.c,$}var j=L(lt,Gt,Z),f=b(j,4),yt=f[0],_t=f[1],jt=f[2],qt=f[3],Vt=yt.length,re=[],ae=[],Nt=nt+1,Lt=0,bt=0,at=Q?+Q[0]:Infinity,rt=Q?+Q[1]:-Infinity;A(lt,Gt,Z,function(Ye,te){++bt,Lt+=(te-Lt)/bt,Q||(Ye<at&&(at=Ye),Ye>rt&&(rt=Ye))});var vt,tt,q,Et,It;for(vt=0;vt<Nt;++vt){for(q=0,Et=0;q<Vt;++q)Et+=Math.pow(yt[q],vt)*_t[q];for(re.push(Et),It=new Float64Array(Nt),tt=0;tt<Nt;++tt){for(q=0,Et=0;q<Vt;++q)Et+=Math.pow(yt[q],vt+tt);It[tt]=Et}ae.push(It)}ae.push(re);var Kt=Rt(ae),ue=function(te){te-=jt;var pe=qt+Kt[0]+Kt[1]*te+Kt[2]*te*te;for(vt=3;vt<Nt;++vt)pe+=Kt[vt]*Math.pow(te,vt);return pe},we=w(at,rt,ue);return we.coefficients=Ot(Nt,Kt,-jt,qt),we.predict=ue,we.rSquared=_(lt,Gt,Z,Lt,ue),we}return dt.domain=function(lt){return arguments.length?(Q=lt,dt):Q},dt.x=function(lt){return arguments.length?(Gt=lt,dt):Gt},dt.y=function(lt){return arguments.length?(Z=lt,dt):Z},dt.order=function(lt){return arguments.length?(nt=lt,dt):nt},dt}function Ot(Gt,Z,nt,Q){var dt=Array(Gt),lt,z,$,j;for(lt=0;lt<Gt;++lt)dt[lt]=0;for(lt=Gt-1;lt>=0;--lt)for($=Z[lt],j=1,dt[lt]+=$,z=1;z<=lt;++z)j*=(lt+1-z)/z,dt[lt-z]+=$*Math.pow(nt,z)*j;return dt[0]+=Q,dt}function Rt(Gt){var Z=Gt.length-1,nt=[],Q,dt,lt,z,$;for(Q=0;Q<Z;++Q){for(z=Q,dt=Q+1;dt<Z;++dt)Math.abs(Gt[Q][dt])>Math.abs(Gt[Q][z])&&(z=dt);for(lt=Q;lt<Z+1;++lt)$=Gt[lt][Q],Gt[lt][Q]=Gt[lt][z],Gt[lt][z]=$;for(dt=Q+1;dt<Z;++dt)for(lt=Z;lt>=Q;lt--)Gt[lt][dt]-=Gt[lt][Q]*Gt[Q][dt]/Gt[Q][Q]}for(dt=Z-1;dt>=0;--dt){for($=0,lt=dt+1;lt<Z;++lt)$+=Gt[lt][dt]*nt[lt];nt[dt]=(Gt[Z][dt]-$)/Gt[dt][dt]}return nt}function Qt(){var Gt=function(lt){return lt[0]},Z=function(lt){return lt[1]},nt;function Q(dt){var lt=0,z=0,$=0,j=0,f=0,yt=0,_t=nt?+nt[0]:Infinity,jt=nt?+nt[1]:-Infinity;A(dt,Gt,Z,function(bt,at){var rt=Math.log(bt),vt=Math.log(at);++lt,z+=(rt-z)/lt,$+=(vt-$)/lt,j+=(rt*vt-j)/lt,f+=(rt*rt-f)/lt,yt+=(at-yt)/lt,nt||(bt<_t&&(_t=bt),bt>jt&&(jt=bt))});var qt=d(z,$,j,f),Vt=b(qt,2),re=Vt[0],ae=Vt[1];re=Math.exp(re);var Nt=function(at){return re*Math.pow(at,ae)},Lt=w(_t,jt,Nt);return Lt.a=re,Lt.b=ae,Lt.predict=Nt,Lt.rSquared=_(dt,Gt,Z,yt,Nt),Lt}return Q.domain=function(dt){return arguments.length?(nt=dt,Q):nt},Q.x=function(dt){return arguments.length?(Gt=dt,Q):Gt},Q.y=function(dt){return arguments.length?(Z=dt,Q):Z},Q}p.regressionExp=y,p.regressionLinear=m,p.regressionLoess=D,p.regressionLog=st,p.regressionPoly=ct,p.regressionPow=Qt,p.regressionQuad=pt,Object.defineProperty(p,"__esModule",{value:!0})})},35374:function(Ct,S,p){"use strict";p.d(S,{HT:function(){return T}});var b=0,I=0,P=0,O=1e3,L,A,_=0,E=0,g=0,w=typeof performance=="object"&&performance.now?performance:Date,d=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(st){setTimeout(st,17)};function y(){return E||(d(m),E=w.now()+g)}function m(){E=0}function C(){this._call=this._time=this._next=null}C.prototype=T.prototype={constructor:C,restart:function(st,pt,ct){if(typeof st!="function")throw new TypeError("callback is not a function");ct=(ct==null?y():+ct)+(pt==null?0:+pt),!this._next&&A!==this&&(A?A._next=this:L=this,A=this),this._call=st,this._time=ct,H()},stop:function(){this._call&&(this._call=null,this._time=Infinity,H())}};function T(st,pt,ct){var Ot=new C;return Ot.restart(st,pt,ct),Ot}function B(){y(),++b;for(var st=L,pt;st;)(pt=E-st._time)>=0&&st._call.call(null,pt),st=st._next;--b}function D(){E=(_=w.now())+g,b=I=0;try{B()}finally{b=0,K(),E=0}}function Y(){var st=w.now(),pt=st-_;pt>O&&(g-=pt,_=st)}function K(){for(var st,pt=L,ct,Ot=Infinity;pt;)pt._call?(Ot>pt._time&&(Ot=pt._time),st=pt,pt=pt._next):(ct=pt._next,pt._next=null,pt=st?st._next=ct:L=ct);A=st,H(Ot)}function H(st){if(!b){I&&(I=clearTimeout(I));var pt=st-E;pt>24?(st<Infinity&&(I=setTimeout(D,st-w.now()-g)),P&&(P=clearInterval(P))):(P||(_=w.now(),P=setInterval(Y,O)),b=1,d(D))}}},70681:function(Ct,S,p){Ct.exports={graphlib:p(70574),layout:p(98123),debug:p(27570),util:{time:p(11138).time,notime:p(11138).notime},version:p(88177)}},92188:function(Ct,S,p){"use strict";var b=p(38436),I=p(74079);Ct.exports={run:P,undo:L};function P(A){var _=A.graph().acyclicer==="greedy"?I(A,E(A)):O(A);b.forEach(_,function(g){var w=A.edge(g);A.removeEdge(g),w.forwardName=g.name,w.reversed=!0,A.setEdge(g.w,g.v,w,b.uniqueId("rev"))});function E(g){return function(w){return g.edge(w).weight}}}function O(A){var _=[],E={},g={};function w(d){b.has(g,d)||(g[d]=!0,E[d]=!0,b.forEach(A.outEdges(d),function(y){b.has(E,y.w)?_.push(y):w(y.w)}),delete E[d])}return b.forEach(A.nodes(),w),_}function L(A){b.forEach(A.edges(),function(_){var E=A.edge(_);if(E.reversed){A.removeEdge(_);var g=E.forwardName;delete E.reversed,delete E.forwardName,A.setEdge(_.w,_.v,E,g)}})}},61133:function(Ct,S,p){var b=p(38436),I=p(11138);Ct.exports=P;function P(L){function A(_){var E=L.children(_),g=L.node(_);if(E.length&&b.forEach(E,A),b.has(g,"minRank")){g.borderLeft=[],g.borderRight=[];for(var w=g.minRank,d=g.maxRank+1;w<d;++w)O(L,"borderLeft","_bl",_,g,w),O(L,"borderRight","_br",_,g,w)}}b.forEach(L.children(),A)}function O(L,A,_,E,g,w){var d={width:0,height:0,rank:w,borderType:A},y=g[A][w-1],m=I.addDummyNode(L,"border",d,_);g[A][w]=m,L.setParent(m,E),y&&L.setEdge(y,m,{weight:1})}},53258:function(Ct,S,p){"use strict";var b=p(38436);Ct.exports={adjust:I,undo:P};function I(w){var d=w.graph().rankdir.toLowerCase();(d==="lr"||d==="rl")&&O(w)}function P(w){var d=w.graph().rankdir.toLowerCase();(d==="bt"||d==="rl")&&A(w),(d==="lr"||d==="rl")&&(E(w),O(w))}function O(w){b.forEach(w.nodes(),function(d){L(w.node(d))}),b.forEach(w.edges(),function(d){L(w.edge(d))})}function L(w){var d=w.width;w.width=w.height,w.height=d}function A(w){b.forEach(w.nodes(),function(d){_(w.node(d))}),b.forEach(w.edges(),function(d){var y=w.edge(d);b.forEach(y.points,_),b.has(y,"y")&&_(y)})}function _(w){w.y=-w.y}function E(w){b.forEach(w.nodes(),function(d){g(w.node(d))}),b.forEach(w.edges(),function(d){var y=w.edge(d);b.forEach(y.points,g),b.has(y,"x")&&g(y)})}function g(w){var d=w.x;w.x=w.y,w.y=d}},77822:function(Ct){Ct.exports=S;function S(){var I={};I._next=I._prev=I,this._sentinel=I}S.prototype.dequeue=function(){var I=this._sentinel,P=I._prev;if(P!==I)return p(P),P},S.prototype.enqueue=function(I){var P=this._sentinel;I._prev&&I._next&&p(I),I._next=P._next,P._next._prev=I,P._next=I,I._prev=P},S.prototype.toString=function(){for(var I=[],P=this._sentinel,O=P._prev;O!==P;)I.push(JSON.stringify(O,b)),O=O._prev;return"["+I.join(", ")+"]"};function p(I){I._prev._next=I._next,I._next._prev=I._prev,delete I._next,delete I._prev}function b(I,P){if(I!=="_next"&&I!=="_prev")return P}},27570:function(Ct,S,p){var b=p(38436),I=p(11138),P=p(70574).Graph;Ct.exports={debugOrdering:O};function O(L){var A=I.buildLayerMatrix(L),_=new P({compound:!0,multigraph:!0}).setGraph({});return b.forEach(L.nodes(),function(E){_.setNode(E,{label:E}),_.setParent(E,"layer"+L.node(E).rank)}),b.forEach(L.edges(),function(E){_.setEdge(E.v,E.w,{},E.name)}),b.forEach(A,function(E,g){var w="layer"+g;_.setNode(w,{rank:"same"}),b.reduce(E,function(d,y){return _.setEdge(d,y,{style:"invis"}),y})}),_}},70574:function(Ct,S,p){var b;try{b=p(28282)}catch(I){}b||(b=window.graphlib),Ct.exports=b},74079:function(Ct,S,p){var b=p(38436),I=p(70574).Graph,P=p(77822);Ct.exports=L;var O=b.constant(1);function L(w,d){if(w.nodeCount()<=1)return[];var y=E(w,d||O),m=A(y.graph,y.buckets,y.zeroIdx);return b.flatten(b.map(m,function(C){return w.outEdges(C.v,C.w)}),!0)}function A(w,d,y){for(var m=[],C=d[d.length-1],T=d[0],B;w.nodeCount();){for(;B=T.dequeue();)_(w,d,y,B);for(;B=C.dequeue();)_(w,d,y,B);if(w.nodeCount()){for(var D=d.length-2;D>0;--D)if(B=d[D].dequeue(),B){m=m.concat(_(w,d,y,B,!0));break}}}return m}function _(w,d,y,m,C){var T=C?[]:void 0;return b.forEach(w.inEdges(m.v),function(B){var D=w.edge(B),Y=w.node(B.v);C&&T.push({v:B.v,w:B.w}),Y.out-=D,g(d,y,Y)}),b.forEach(w.outEdges(m.v),function(B){var D=w.edge(B),Y=B.w,K=w.node(Y);K.in-=D,g(d,y,K)}),w.removeNode(m.v),T}function E(w,d){var y=new I,m=0,C=0;b.forEach(w.nodes(),function(D){y.setNode(D,{v:D,in:0,out:0})}),b.forEach(w.edges(),function(D){var Y=y.edge(D.v,D.w)||0,K=d(D),H=Y+K;y.setEdge(D.v,D.w,H),C=Math.max(C,y.node(D.v).out+=K),m=Math.max(m,y.node(D.w).in+=K)});var T=b.range(C+m+3).map(function(){return new P}),B=m+1;return b.forEach(y.nodes(),function(D){g(T,B,y.node(D))}),{graph:y,buckets:T,zeroIdx:B}}function g(w,d,y){y.out?y.in?w[y.out-y.in+d].enqueue(y):w[w.length-1].enqueue(y):w[0].enqueue(y)}},98123:function(Ct,S,p){"use strict";var b=p(38436),I=p(92188),P=p(45995),O=p(78093),L=p(11138).normalizeRanks,A=p(24219),_=p(11138).removeEmptyRanks,E=p(72981),g=p(61133),w=p(53258),d=p(53408),y=p(17873),m=p(11138),C=p(70574).Graph;Ct.exports=T;function T(Vt,re){var ae=re&&re.debugTiming?m.time:m.notime;ae("layout",function(){var Nt=ae("  buildLayoutGraph",function(){return Qt(Vt)});ae("  runLayout",function(){B(Nt,ae)}),ae("  updateInputGraph",function(){D(Vt,Nt)})})}function B(Vt,re){re("    makeSpaceForEdgeLabels",function(){Gt(Vt)}),re("    removeSelfEdges",function(){f(Vt)}),re("    acyclic",function(){I.run(Vt)}),re("    nestingGraph.run",function(){E.run(Vt)}),re("    rank",function(){O(m.asNonCompoundGraph(Vt))}),re("    injectEdgeLabelProxies",function(){Z(Vt)}),re("    removeEmptyRanks",function(){_(Vt)}),re("    nestingGraph.cleanup",function(){E.cleanup(Vt)}),re("    normalizeRanks",function(){L(Vt)}),re("    assignRankMinMax",function(){nt(Vt)}),re("    removeEdgeLabelProxies",function(){Q(Vt)}),re("    normalize.run",function(){P.run(Vt)}),re("    parentDummyChains",function(){A(Vt)}),re("    addBorderSegments",function(){g(Vt)}),re("    order",function(){d(Vt)}),re("    insertSelfEdges",function(){yt(Vt)}),re("    adjustCoordinateSystem",function(){w.adjust(Vt)}),re("    position",function(){y(Vt)}),re("    positionSelfEdges",function(){_t(Vt)}),re("    removeBorderNodes",function(){j(Vt)}),re("    normalize.undo",function(){P.undo(Vt)}),re("    fixupEdgeLabelCoords",function(){z(Vt)}),re("    undoCoordinateSystem",function(){w.undo(Vt)}),re("    translateGraph",function(){dt(Vt)}),re("    assignNodeIntersects",function(){lt(Vt)}),re("    reversePoints",function(){$(Vt)}),re("    acyclic.undo",function(){I.undo(Vt)})}function D(Vt,re){b.forEach(Vt.nodes(),function(ae){var Nt=Vt.node(ae),Lt=re.node(ae);Nt&&(Nt.x=Lt.x,Nt.y=Lt.y,re.children(ae).length&&(Nt.width=Lt.width,Nt.height=Lt.height))}),b.forEach(Vt.edges(),function(ae){var Nt=Vt.edge(ae),Lt=re.edge(ae);Nt.points=Lt.points,b.has(Lt,"x")&&(Nt.x=Lt.x,Nt.y=Lt.y)}),Vt.graph().width=re.graph().width,Vt.graph().height=re.graph().height}var Y=["nodesep","edgesep","ranksep","marginx","marginy"],K={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},H=["acyclicer","ranker","rankdir","align"],st=["width","height"],pt={width:0,height:0},ct=["minlen","weight","width","height","labeloffset"],Ot={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Rt=["labelpos"];function Qt(Vt){var re=new C({multigraph:!0,compound:!0}),ae=qt(Vt.graph());return re.setGraph(b.merge({},K,jt(ae,Y),b.pick(ae,H))),b.forEach(Vt.nodes(),function(Nt){var Lt=qt(Vt.node(Nt));re.setNode(Nt,b.defaults(jt(Lt,st),pt)),re.setParent(Nt,Vt.parent(Nt))}),b.forEach(Vt.edges(),function(Nt){var Lt=qt(Vt.edge(Nt));re.setEdge(Nt,b.merge({},Ot,jt(Lt,ct),b.pick(Lt,Rt)))}),re}function Gt(Vt){var re=Vt.graph();re.ranksep/=2,b.forEach(Vt.edges(),function(ae){var Nt=Vt.edge(ae);Nt.minlen*=2,Nt.labelpos.toLowerCase()!=="c"&&(re.rankdir==="TB"||re.rankdir==="BT"?Nt.width+=Nt.labeloffset:Nt.height+=Nt.labeloffset)})}function Z(Vt){b.forEach(Vt.edges(),function(re){var ae=Vt.edge(re);if(ae.width&&ae.height){var Nt=Vt.node(re.v),Lt=Vt.node(re.w),bt={rank:(Lt.rank-Nt.rank)/2+Nt.rank,e:re};m.addDummyNode(Vt,"edge-proxy",bt,"_ep")}})}function nt(Vt){var re=0;b.forEach(Vt.nodes(),function(ae){var Nt=Vt.node(ae);Nt.borderTop&&(Nt.minRank=Vt.node(Nt.borderTop).rank,Nt.maxRank=Vt.node(Nt.borderBottom).rank,re=b.max(re,Nt.maxRank))}),Vt.graph().maxRank=re}function Q(Vt){b.forEach(Vt.nodes(),function(re){var ae=Vt.node(re);ae.dummy==="edge-proxy"&&(Vt.edge(ae.e).labelRank=ae.rank,Vt.removeNode(re))})}function dt(Vt){var re=Number.POSITIVE_INFINITY,ae=0,Nt=Number.POSITIVE_INFINITY,Lt=0,bt=Vt.graph(),at=bt.marginx||0,rt=bt.marginy||0;function vt(tt){var q=tt.x,Et=tt.y,It=tt.width,Kt=tt.height;re=Math.min(re,q-It/2),ae=Math.max(ae,q+It/2),Nt=Math.min(Nt,Et-Kt/2),Lt=Math.max(Lt,Et+Kt/2)}b.forEach(Vt.nodes(),function(tt){vt(Vt.node(tt))}),b.forEach(Vt.edges(),function(tt){var q=Vt.edge(tt);b.has(q,"x")&&vt(q)}),re-=at,Nt-=rt,b.forEach(Vt.nodes(),function(tt){var q=Vt.node(tt);q.x-=re,q.y-=Nt}),b.forEach(Vt.edges(),function(tt){var q=Vt.edge(tt);b.forEach(q.points,function(Et){Et.x-=re,Et.y-=Nt}),b.has(q,"x")&&(q.x-=re),b.has(q,"y")&&(q.y-=Nt)}),bt.width=ae-re+at,bt.height=Lt-Nt+rt}function lt(Vt){b.forEach(Vt.edges(),function(re){var ae=Vt.edge(re),Nt=Vt.node(re.v),Lt=Vt.node(re.w),bt,at;ae.points?(bt=ae.points[0],at=ae.points[ae.points.length-1]):(ae.points=[],bt=Lt,at=Nt),ae.points.unshift(m.intersectRect(Nt,bt)),ae.points.push(m.intersectRect(Lt,at))})}function z(Vt){b.forEach(Vt.edges(),function(re){var ae=Vt.edge(re);if(b.has(ae,"x"))switch((ae.labelpos==="l"||ae.labelpos==="r")&&(ae.width-=ae.labeloffset),ae.labelpos){case"l":ae.x-=ae.width/2+ae.labeloffset;break;case"r":ae.x+=ae.width/2+ae.labeloffset;break}})}function $(Vt){b.forEach(Vt.edges(),function(re){var ae=Vt.edge(re);ae.reversed&&ae.points.reverse()})}function j(Vt){b.forEach(Vt.nodes(),function(re){if(Vt.children(re).length){var ae=Vt.node(re),Nt=Vt.node(ae.borderTop),Lt=Vt.node(ae.borderBottom),bt=Vt.node(b.last(ae.borderLeft)),at=Vt.node(b.last(ae.borderRight));ae.width=Math.abs(at.x-bt.x),ae.height=Math.abs(Lt.y-Nt.y),ae.x=bt.x+ae.width/2,ae.y=Nt.y+ae.height/2}}),b.forEach(Vt.nodes(),function(re){Vt.node(re).dummy==="border"&&Vt.removeNode(re)})}function f(Vt){b.forEach(Vt.edges(),function(re){if(re.v===re.w){var ae=Vt.node(re.v);ae.selfEdges||(ae.selfEdges=[]),ae.selfEdges.push({e:re,label:Vt.edge(re)}),Vt.removeEdge(re)}})}function yt(Vt){var re=m.buildLayerMatrix(Vt);b.forEach(re,function(ae){var Nt=0;b.forEach(ae,function(Lt,bt){var at=Vt.node(Lt);at.order=bt+Nt,b.forEach(at.selfEdges,function(rt){m.addDummyNode(Vt,"selfedge",{width:rt.label.width,height:rt.label.height,rank:at.rank,order:bt+ ++Nt,e:rt.e,label:rt.label},"_se")}),delete at.selfEdges})})}function _t(Vt){b.forEach(Vt.nodes(),function(re){var ae=Vt.node(re);if(ae.dummy==="selfedge"){var Nt=Vt.node(ae.e.v),Lt=Nt.x+Nt.width/2,bt=Nt.y,at=ae.x-Lt,rt=Nt.height/2;Vt.setEdge(ae.e,ae.label),Vt.removeNode(re),ae.label.points=[{x:Lt+2*at/3,y:bt-rt},{x:Lt+5*at/6,y:bt-rt},{x:Lt+at,y:bt},{x:Lt+5*at/6,y:bt+rt},{x:Lt+2*at/3,y:bt+rt}],ae.label.x=ae.x,ae.label.y=ae.y}})}function jt(Vt,re){return b.mapValues(b.pick(Vt,re),Number)}function qt(Vt){var re={};return b.forEach(Vt,function(ae,Nt){re[Nt.toLowerCase()]=ae}),re}},38436:function(Ct,S,p){var b;try{b={cloneDeep:p(50361),constant:p(75703),defaults:p(91747),each:p(66073),filter:p(63105),find:p(13311),flatten:p(85564),forEach:p(84486),forIn:p(62620),has:p(18721),isUndefined:p(52353),last:p(10928),map:p(35161),mapValues:p(66604),max:p(6162),merge:p(82492),min:p(53632),minBy:p(22762),now:p(7771),pick:p(78718),range:p(96026),reduce:p(54061),sortBy:p(89734),uniqueId:p(73955),values:p(52628),zipObject:p(7287)}}catch(I){}b||(b=window._),Ct.exports=b},72981:function(Ct,S,p){var b=p(38436),I=p(11138);Ct.exports={run:P,cleanup:_};function P(E){var g=I.addDummyNode(E,"root",{},"_root"),w=L(E),d=b.max(b.values(w))-1,y=2*d+1;E.graph().nestingRoot=g,b.forEach(E.edges(),function(C){E.edge(C).minlen*=y});var m=A(E)+1;b.forEach(E.children(),function(C){O(E,g,y,m,d,w,C)}),E.graph().nodeRankFactor=y}function O(E,g,w,d,y,m,C){var T=E.children(C);if(!T.length){C!==g&&E.setEdge(g,C,{weight:0,minlen:w});return}var B=I.addBorderNode(E,"_bt"),D=I.addBorderNode(E,"_bb"),Y=E.node(C);E.setParent(B,C),Y.borderTop=B,E.setParent(D,C),Y.borderBottom=D,b.forEach(T,function(K){O(E,g,w,d,y,m,K);var H=E.node(K),st=H.borderTop?H.borderTop:K,pt=H.borderBottom?H.borderBottom:K,ct=H.borderTop?d:2*d,Ot=st!==pt?1:y-m[C]+1;E.setEdge(B,st,{weight:ct,minlen:Ot,nestingEdge:!0}),E.setEdge(pt,D,{weight:ct,minlen:Ot,nestingEdge:!0})}),E.parent(C)||E.setEdge(g,B,{weight:0,minlen:y+m[C]})}function L(E){var g={};function w(d,y){var m=E.children(d);m&&m.length&&b.forEach(m,function(C){w(C,y+1)}),g[d]=y}return b.forEach(E.children(),function(d){w(d,1)}),g}function A(E){return b.reduce(E.edges(),function(g,w){return g+E.edge(w).weight},0)}function _(E){var g=E.graph();E.removeNode(g.nestingRoot),delete g.nestingRoot,b.forEach(E.edges(),function(w){var d=E.edge(w);d.nestingEdge&&E.removeEdge(w)})}},45995:function(Ct,S,p){"use strict";var b=p(38436),I=p(11138);Ct.exports={run:P,undo:L};function P(A){A.graph().dummyChains=[],b.forEach(A.edges(),function(_){O(A,_)})}function O(A,_){var E=_.v,g=A.node(E).rank,w=_.w,d=A.node(w).rank,y=_.name,m=A.edge(_),C=m.labelRank;if(d!==g+1){A.removeEdge(_);var T,B,D;for(D=0,++g;g<d;++D,++g)m.points=[],B={width:0,height:0,edgeLabel:m,edgeObj:_,rank:g},T=I.addDummyNode(A,"edge",B,"_d"),g===C&&(B.width=m.width,B.height=m.height,B.dummy="edge-label",B.labelpos=m.labelpos),A.setEdge(E,T,{weight:m.weight},y),D===0&&A.graph().dummyChains.push(T),E=T;A.setEdge(E,w,{weight:m.weight},y)}}function L(A){b.forEach(A.graph().dummyChains,function(_){var E=A.node(_),g=E.edgeLabel,w;for(A.setEdge(E.edgeObj,g);E.dummy;)w=A.successors(_)[0],A.removeNode(_),g.points.push({x:E.x,y:E.y}),E.dummy==="edge-label"&&(g.x=E.x,g.y=E.y,g.width=E.width,g.height=E.height),_=w,E=A.node(_)})}},55093:function(Ct,S,p){var b=p(38436);Ct.exports=I;function I(P,O,L){var A={},_;b.forEach(L,function(E){for(var g=P.parent(E),w,d;g;){if(w=P.parent(g),w?(d=A[w],A[w]=g):(d=_,_=g),d&&d!==g){O.setEdge(d,g);return}g=w}})}},35439:function(Ct,S,p){var b=p(38436);Ct.exports=I;function I(P,O){return b.map(O,function(L){var A=P.inEdges(L);if(A.length){var _=b.reduce(A,function(E,g){var w=P.edge(g),d=P.node(g.v);return{sum:E.sum+w.weight*d.order,weight:E.weight+w.weight}},{sum:0,weight:0});return{v:L,barycenter:_.sum/_.weight,weight:_.weight}}else return{v:L}})}},23128:function(Ct,S,p){var b=p(38436),I=p(70574).Graph;Ct.exports=P;function P(L,A,_){var E=O(L),g=new I({compound:!0}).setGraph({root:E}).setDefaultNodeLabel(function(w){return L.node(w)});return b.forEach(L.nodes(),function(w){var d=L.node(w),y=L.parent(w);(d.rank===A||d.minRank<=A&&A<=d.maxRank)&&(g.setNode(w),g.setParent(w,y||E),b.forEach(L[_](w),function(m){var C=m.v===w?m.w:m.v,T=g.edge(C,w),B=b.isUndefined(T)?0:T.weight;g.setEdge(C,w,{weight:L.edge(m).weight+B})}),b.has(d,"minRank")&&g.setNode(w,{borderLeft:d.borderLeft[A],borderRight:d.borderRight[A]}))}),g}function O(L){for(var A;L.hasNode(A=b.uniqueId("_root")););return A}},56630:function(Ct,S,p){"use strict";var b=p(38436);Ct.exports=I;function I(O,L){for(var A=0,_=1;_<L.length;++_)A+=P(O,L[_-1],L[_]);return A}function P(O,L,A){for(var _=b.zipObject(A,b.map(A,function(m,C){return C})),E=b.flatten(b.map(L,function(m){return b.sortBy(b.map(O.outEdges(m),function(C){return{pos:_[C.w],weight:O.edge(C).weight}}),"pos")}),!0),g=1;g<A.length;)g<<=1;var w=2*g-1;g-=1;var d=b.map(new Array(w),function(){return 0}),y=0;return b.forEach(E.forEach(function(m){var C=m.pos+g;d[C]+=m.weight;for(var T=0;C>0;)C%2&&(T+=d[C+1]),C=C-1>>1,d[C]+=m.weight;y+=m.weight*T})),y}},53408:function(Ct,S,p){"use strict";var b=p(38436),I=p(2588),P=p(56630),O=p(61026),L=p(23128),A=p(55093),_=p(70574).Graph,E=p(11138);Ct.exports=g;function g(m){var C=E.maxRank(m),T=w(m,b.range(1,C+1),"inEdges"),B=w(m,b.range(C-1,-1,-1),"outEdges"),D=I(m);y(m,D);for(var Y=Number.POSITIVE_INFINITY,K,H=0,st=0;st<4;++H,++st){d(H%2?T:B,H%4>=2),D=E.buildLayerMatrix(m);var pt=P(m,D);pt<Y&&(st=0,K=b.cloneDeep(D),Y=pt)}y(m,K)}function w(m,C,T){return b.map(C,function(B){return L(m,B,T)})}function d(m,C){var T=new _;b.forEach(m,function(B){var D=B.graph().root,Y=O(B,D,T,C);b.forEach(Y.vs,function(K,H){B.node(K).order=H}),A(B,T,Y.vs)})}function y(m,C){b.forEach(C,function(T){b.forEach(T,function(B,D){m.node(B).order=D})})}},2588:function(Ct,S,p){"use strict";var b=p(38436);Ct.exports=I;function I(P){var O={},L=b.filter(P.nodes(),function(w){return!P.children(w).length}),A=b.max(b.map(L,function(w){return P.node(w).rank})),_=b.map(b.range(A+1),function(){return[]});function E(w){if(!b.has(O,w)){O[w]=!0;var d=P.node(w);_[d.rank].push(w),b.forEach(P.successors(w),E)}}var g=b.sortBy(L,function(w){return P.node(w).rank});return b.forEach(g,E),_}},83678:function(Ct,S,p){"use strict";var b=p(38436);Ct.exports=I;function I(L,A){var _={};b.forEach(L,function(g,w){var d=_[g.v]={indegree:0,in:[],out:[],vs:[g.v],i:w};b.isUndefined(g.barycenter)||(d.barycenter=g.barycenter,d.weight=g.weight)}),b.forEach(A.edges(),function(g){var w=_[g.v],d=_[g.w];!b.isUndefined(w)&&!b.isUndefined(d)&&(d.indegree++,w.out.push(_[g.w]))});var E=b.filter(_,function(g){return!g.indegree});return P(E)}function P(L){var A=[];function _(w){return function(d){d.merged||(b.isUndefined(d.barycenter)||b.isUndefined(w.barycenter)||d.barycenter>=w.barycenter)&&O(w,d)}}function E(w){return function(d){d.in.push(w),--d.indegree==0&&L.push(d)}}for(;L.length;){var g=L.pop();A.push(g),b.forEach(g.in.reverse(),_(g)),b.forEach(g.out,E(g))}return b.map(b.filter(A,function(w){return!w.merged}),function(w){return b.pick(w,["vs","i","barycenter","weight"])})}function O(L,A){var _=0,E=0;L.weight&&(_+=L.barycenter*L.weight,E+=L.weight),A.weight&&(_+=A.barycenter*A.weight,E+=A.weight),L.vs=A.vs.concat(L.vs),L.barycenter=_/E,L.weight=E,L.i=Math.min(A.i,L.i),A.merged=!0}},61026:function(Ct,S,p){var b=p(38436),I=p(35439),P=p(83678),O=p(87304);Ct.exports=L;function L(E,g,w,d){var y=E.children(g),m=E.node(g),C=m?m.borderLeft:void 0,T=m?m.borderRight:void 0,B={};C&&(y=b.filter(y,function(pt){return pt!==C&&pt!==T}));var D=I(E,y);b.forEach(D,function(pt){if(E.children(pt.v).length){var ct=L(E,pt.v,w,d);B[pt.v]=ct,b.has(ct,"barycenter")&&_(pt,ct)}});var Y=P(D,w);A(Y,B);var K=O(Y,d);if(C&&(K.vs=b.flatten([C,K.vs,T],!0),E.predecessors(C).length)){var H=E.node(E.predecessors(C)[0]),st=E.node(E.predecessors(T)[0]);b.has(K,"barycenter")||(K.barycenter=0,K.weight=0),K.barycenter=(K.barycenter*K.weight+H.order+st.order)/(K.weight+2),K.weight+=2}return K}function A(E,g){b.forEach(E,function(w){w.vs=b.flatten(w.vs.map(function(d){return g[d]?g[d].vs:d}),!0)})}function _(E,g){b.isUndefined(E.barycenter)?(E.barycenter=g.barycenter,E.weight=g.weight):(E.barycenter=(E.barycenter*E.weight+g.barycenter*g.weight)/(E.weight+g.weight),E.weight+=g.weight)}},87304:function(Ct,S,p){var b=p(38436),I=p(11138);Ct.exports=P;function P(A,_){var E=I.partition(A,function(B){return b.has(B,"barycenter")}),g=E.lhs,w=b.sortBy(E.rhs,function(B){return-B.i}),d=[],y=0,m=0,C=0;g.sort(L(!!_)),C=O(d,w,C),b.forEach(g,function(B){C+=B.vs.length,d.push(B.vs),y+=B.barycenter*B.weight,m+=B.weight,C=O(d,w,C)});var T={vs:b.flatten(d,!0)};return m&&(T.barycenter=y/m,T.weight=m),T}function O(A,_,E){for(var g;_.length&&(g=b.last(_)).i<=E;)_.pop(),A.push(g.vs),E++;return E}function L(A){return function(_,E){return _.barycenter<E.barycenter?-1:_.barycenter>E.barycenter?1:A?E.i-_.i:_.i-E.i}}},24219:function(Ct,S,p){var b=p(38436);Ct.exports=I;function I(L){var A=O(L);b.forEach(L.graph().dummyChains,function(_){for(var E=L.node(_),g=E.edgeObj,w=P(L,A,g.v,g.w),d=w.path,y=w.lca,m=0,C=d[m],T=!0;_!==g.w;){if(E=L.node(_),T){for(;(C=d[m])!==y&&L.node(C).maxRank<E.rank;)m++;C===y&&(T=!1)}if(!T){for(;m<d.length-1&&L.node(C=d[m+1]).minRank<=E.rank;)m++;C=d[m]}L.setParent(_,C),_=L.successors(_)[0]}})}function P(L,A,_,E){var g=[],w=[],d=Math.min(A[_].low,A[E].low),y=Math.max(A[_].lim,A[E].lim),m,C;m=_;do m=L.parent(m),g.push(m);while(m&&(A[m].low>d||y>A[m].lim));for(C=m,m=E;(m=L.parent(m))!==C;)w.push(m);return{path:g.concat(w.reverse()),lca:C}}function O(L){var A={},_=0;function E(g){var w=_;b.forEach(L.children(g),E),A[g]={low:w,lim:_++}}return b.forEach(L.children(),E),A}},3573:function(Ct,S,p){"use strict";var b=p(38436),I=p(70574).Graph,P=p(11138);Ct.exports={positionX:T,findType1Conflicts:O,findType2Conflicts:L,addConflict:_,hasConflict:E,verticalAlignment:g,horizontalCompaction:w,alignCoordinates:m,findSmallestWidthAlignment:y,balance:C};function O(Y,K){var H={};function st(pt,ct){var Ot=0,Rt=0,Qt=pt.length,Gt=b.last(ct);return b.forEach(ct,function(Z,nt){var Q=A(Y,Z),dt=Q?Y.node(Q).order:Qt;(Q||Z===Gt)&&(b.forEach(ct.slice(Rt,nt+1),function(lt){b.forEach(Y.predecessors(lt),function(z){var $=Y.node(z),j=$.order;(j<Ot||dt<j)&&!($.dummy&&Y.node(lt).dummy)&&_(H,z,lt)})}),Rt=nt+1,Ot=dt)}),ct}return b.reduce(K,st),H}function L(Y,K){var H={};function st(ct,Ot,Rt,Qt,Gt){var Z;b.forEach(b.range(Ot,Rt),function(nt){Z=ct[nt],Y.node(Z).dummy&&b.forEach(Y.predecessors(Z),function(Q){var dt=Y.node(Q);dt.dummy&&(dt.order<Qt||dt.order>Gt)&&_(H,Q,Z)})})}function pt(ct,Ot){var Rt=-1,Qt,Gt=0;return b.forEach(Ot,function(Z,nt){if(Y.node(Z).dummy==="border"){var Q=Y.predecessors(Z);Q.length&&(Qt=Y.node(Q[0]).order,st(Ot,Gt,nt,Rt,Qt),Gt=nt,Rt=Qt)}st(Ot,Gt,Ot.length,Qt,ct.length)}),Ot}return b.reduce(K,pt),H}function A(Y,K){if(Y.node(K).dummy)return b.find(Y.predecessors(K),function(H){return Y.node(H).dummy})}function _(Y,K,H){if(K>H){var st=K;K=H,H=st}var pt=Y[K];pt||(Y[K]=pt={}),pt[H]=!0}function E(Y,K,H){if(K>H){var st=K;K=H,H=st}return b.has(Y[K],H)}function g(Y,K,H,st){var pt={},ct={},Ot={};return b.forEach(K,function(Rt){b.forEach(Rt,function(Qt,Gt){pt[Qt]=Qt,ct[Qt]=Qt,Ot[Qt]=Gt})}),b.forEach(K,function(Rt){var Qt=-1;b.forEach(Rt,function(Gt){var Z=st(Gt);if(Z.length){Z=b.sortBy(Z,function(z){return Ot[z]});for(var nt=(Z.length-1)/2,Q=Math.floor(nt),dt=Math.ceil(nt);Q<=dt;++Q){var lt=Z[Q];ct[Gt]===Gt&&Qt<Ot[lt]&&!E(H,Gt,lt)&&(ct[lt]=Gt,ct[Gt]=pt[Gt]=pt[lt],Qt=Ot[lt])}}})}),{root:pt,align:ct}}function w(Y,K,H,st,pt){var ct={},Ot=d(Y,K,H,pt),Rt=pt?"borderLeft":"borderRight";function Qt(nt,Q){for(var dt=Ot.nodes(),lt=dt.pop(),z={};lt;)z[lt]?nt(lt):(z[lt]=!0,dt.push(lt),dt=dt.concat(Q(lt))),lt=dt.pop()}function Gt(nt){ct[nt]=Ot.inEdges(nt).reduce(function(Q,dt){return Math.max(Q,ct[dt.v]+Ot.edge(dt))},0)}function Z(nt){var Q=Ot.outEdges(nt).reduce(function(lt,z){return Math.min(lt,ct[z.w]-Ot.edge(z))},Number.POSITIVE_INFINITY),dt=Y.node(nt);Q!==Number.POSITIVE_INFINITY&&dt.borderType!==Rt&&(ct[nt]=Math.max(ct[nt],Q))}return Qt(Gt,Ot.predecessors.bind(Ot)),Qt(Z,Ot.successors.bind(Ot)),b.forEach(st,function(nt){ct[nt]=ct[H[nt]]}),ct}function d(Y,K,H,st){var pt=new I,ct=Y.graph(),Ot=B(ct.nodesep,ct.edgesep,st);return b.forEach(K,function(Rt){var Qt;b.forEach(Rt,function(Gt){var Z=H[Gt];if(pt.setNode(Z),Qt){var nt=H[Qt],Q=pt.edge(nt,Z);pt.setEdge(nt,Z,Math.max(Ot(Y,Gt,Qt),Q||0))}Qt=Gt})}),pt}function y(Y,K){return b.minBy(b.values(K),function(H){var st=Number.NEGATIVE_INFINITY,pt=Number.POSITIVE_INFINITY;return b.forIn(H,function(ct,Ot){var Rt=D(Y,Ot)/2;st=Math.max(ct+Rt,st),pt=Math.min(ct-Rt,pt)}),st-pt})}function m(Y,K){var H=b.values(K),st=b.min(H),pt=b.max(H);b.forEach(["u","d"],function(ct){b.forEach(["l","r"],function(Ot){var Rt=ct+Ot,Qt=Y[Rt],Gt;if(Qt!==K){var Z=b.values(Qt);Gt=Ot==="l"?st-b.min(Z):pt-b.max(Z),Gt&&(Y[Rt]=b.mapValues(Qt,function(nt){return nt+Gt}))}})})}function C(Y,K){return b.mapValues(Y.ul,function(H,st){if(K)return Y[K.toLowerCase()][st];var pt=b.sortBy(b.map(Y,st));return(pt[1]+pt[2])/2})}function T(Y){var K=P.buildLayerMatrix(Y),H=b.merge(O(Y,K),L(Y,K)),st={},pt;b.forEach(["u","d"],function(Ot){pt=Ot==="u"?K:b.values(K).reverse(),b.forEach(["l","r"],function(Rt){Rt==="r"&&(pt=b.map(pt,function(nt){return b.values(nt).reverse()}));var Qt=(Ot==="u"?Y.predecessors:Y.successors).bind(Y),Gt=g(Y,pt,H,Qt),Z=w(Y,pt,Gt.root,Gt.align,Rt==="r");Rt==="r"&&(Z=b.mapValues(Z,function(nt){return-nt})),st[Ot+Rt]=Z})});var ct=y(Y,st);return m(st,ct),C(st,Y.graph().align)}function B(Y,K,H){return function(st,pt,ct){var Ot=st.node(pt),Rt=st.node(ct),Qt=0,Gt;if(Qt+=Ot.width/2,b.has(Ot,"labelpos"))switch(Ot.labelpos.toLowerCase()){case"l":Gt=-Ot.width/2;break;case"r":Gt=Ot.width/2;break}if(Gt&&(Qt+=H?Gt:-Gt),Gt=0,Qt+=(Ot.dummy?K:Y)/2,Qt+=(Rt.dummy?K:Y)/2,Qt+=Rt.width/2,b.has(Rt,"labelpos"))switch(Rt.labelpos.toLowerCase()){case"l":Gt=Rt.width/2;break;case"r":Gt=-Rt.width/2;break}return Gt&&(Qt+=H?Gt:-Gt),Gt=0,Qt}}function D(Y,K){return Y.node(K).width}},17873:function(Ct,S,p){"use strict";var b=p(38436),I=p(11138),P=p(3573).positionX;Ct.exports=O;function O(A){A=I.asNonCompoundGraph(A),L(A),b.forEach(P(A),function(_,E){A.node(E).x=_})}function L(A){var _=I.buildLayerMatrix(A),E=A.graph().ranksep,g=0;b.forEach(_,function(w){var d=b.max(b.map(w,function(y){return A.node(y).height}));b.forEach(w,function(y){A.node(y).y=g+d/2}),g+=d+E})}},20300:function(Ct,S,p){"use strict";var b=p(38436),I=p(70574).Graph,P=p(76681).slack;Ct.exports=O;function O(E){var g=new I({directed:!1}),w=E.nodes()[0],d=E.nodeCount();g.setNode(w,{});for(var y,m;L(g,E)<d;)y=A(g,E),m=g.hasNode(y.v)?P(E,y):-P(E,y),_(g,E,m);return g}function L(E,g){function w(d){b.forEach(g.nodeEdges(d),function(y){var m=y.v,C=d===m?y.w:m;!E.hasNode(C)&&!P(g,y)&&(E.setNode(C,{}),E.setEdge(d,C,{}),w(C))})}return b.forEach(E.nodes(),w),E.nodeCount()}function A(E,g){return b.minBy(g.edges(),function(w){if(E.hasNode(w.v)!==E.hasNode(w.w))return P(g,w)})}function _(E,g,w){b.forEach(E.nodes(),function(d){g.node(d).rank+=w})}},78093:function(Ct,S,p){"use strict";var b=p(76681),I=b.longestPath,P=p(20300),O=p(42472);Ct.exports=L;function L(g){switch(g.graph().ranker){case"network-simplex":E(g);break;case"tight-tree":_(g);break;case"longest-path":A(g);break;default:E(g)}}var A=I;function _(g){I(g),P(g)}function E(g){O(g)}},42472:function(Ct,S,p){"use strict";var b=p(38436),I=p(20300),P=p(76681).slack,O=p(76681).longestPath,L=p(70574).alg.preorder,A=p(70574).alg.postorder,_=p(11138).simplify;Ct.exports=E,E.initLowLimValues=y,E.initCutValues=g,E.calcCutValue=d,E.leaveEdge=C,E.enterEdge=T,E.exchangeEdges=B;function E(H){H=_(H),O(H);var st=I(H);y(st),g(st,H);for(var pt,ct;pt=C(st);)ct=T(st,H,pt),B(st,H,pt,ct)}function g(H,st){var pt=A(H,H.nodes());pt=pt.slice(0,pt.length-1),b.forEach(pt,function(ct){w(H,st,ct)})}function w(H,st,pt){var ct=H.node(pt),Ot=ct.parent;H.edge(pt,Ot).cutvalue=d(H,st,pt)}function d(H,st,pt){var ct=H.node(pt),Ot=ct.parent,Rt=!0,Qt=st.edge(pt,Ot),Gt=0;return Qt||(Rt=!1,Qt=st.edge(Ot,pt)),Gt=Qt.weight,b.forEach(st.nodeEdges(pt),function(Z){var nt=Z.v===pt,Q=nt?Z.w:Z.v;if(Q!==Ot){var dt=nt===Rt,lt=st.edge(Z).weight;if(Gt+=dt?lt:-lt,Y(H,pt,Q)){var z=H.edge(pt,Q).cutvalue;Gt+=dt?-z:z}}}),Gt}function y(H,st){arguments.length<2&&(st=H.nodes()[0]),m(H,{},1,st)}function m(H,st,pt,ct,Ot){var Rt=pt,Qt=H.node(ct);return st[ct]=!0,b.forEach(H.neighbors(ct),function(Gt){b.has(st,Gt)||(pt=m(H,st,pt,Gt,ct))}),Qt.low=Rt,Qt.lim=pt++,Ot?Qt.parent=Ot:delete Qt.parent,pt}function C(H){return b.find(H.edges(),function(st){return H.edge(st).cutvalue<0})}function T(H,st,pt){var ct=pt.v,Ot=pt.w;st.hasEdge(ct,Ot)||(ct=pt.w,Ot=pt.v);var Rt=H.node(ct),Qt=H.node(Ot),Gt=Rt,Z=!1;Rt.lim>Qt.lim&&(Gt=Qt,Z=!0);var nt=b.filter(st.edges(),function(Q){return Z===K(H,H.node(Q.v),Gt)&&Z!==K(H,H.node(Q.w),Gt)});return b.minBy(nt,function(Q){return P(st,Q)})}function B(H,st,pt,ct){var Ot=pt.v,Rt=pt.w;H.removeEdge(Ot,Rt),H.setEdge(ct.v,ct.w,{}),y(H),g(H,st),D(H,st)}function D(H,st){var pt=b.find(H.nodes(),function(Ot){return!st.node(Ot).parent}),ct=L(H,pt);ct=ct.slice(1),b.forEach(ct,function(Ot){var Rt=H.node(Ot).parent,Qt=st.edge(Ot,Rt),Gt=!1;Qt||(Qt=st.edge(Rt,Ot),Gt=!0),st.node(Ot).rank=st.node(Rt).rank+(Gt?Qt.minlen:-Qt.minlen)})}function Y(H,st,pt){return H.hasEdge(st,pt)}function K(H,st,pt){return pt.low<=st.lim&&st.lim<=pt.lim}},76681:function(Ct,S,p){"use strict";var b=p(38436);Ct.exports={longestPath:I,slack:P};function I(O){var L={};function A(_){var E=O.node(_);if(b.has(L,_))return E.rank;L[_]=!0;var g=b.min(b.map(O.outEdges(_),function(w){return A(w.w)-O.edge(w).minlen}));return(g===Number.POSITIVE_INFINITY||g===void 0||g===null)&&(g=0),E.rank=g}b.forEach(O.sources(),A)}function P(O,L){return O.node(L.w).rank-O.node(L.v).rank-O.edge(L).minlen}},11138:function(Ct,S,p){"use strict";var b=p(38436),I=p(70574).Graph;Ct.exports={addDummyNode:P,simplify:O,asNonCompoundGraph:L,successorWeights:A,predecessorWeights:_,intersectRect:E,buildLayerMatrix:g,normalizeRanks:w,removeEmptyRanks:d,addBorderNode:y,maxRank:m,partition:C,time:T,notime:B};function P(D,Y,K,H){var st;do st=b.uniqueId(H);while(D.hasNode(st));return K.dummy=Y,D.setNode(st,K),st}function O(D){var Y=new I().setGraph(D.graph());return b.forEach(D.nodes(),function(K){Y.setNode(K,D.node(K))}),b.forEach(D.edges(),function(K){var H=Y.edge(K.v,K.w)||{weight:0,minlen:1},st=D.edge(K);Y.setEdge(K.v,K.w,{weight:H.weight+st.weight,minlen:Math.max(H.minlen,st.minlen)})}),Y}function L(D){var Y=new I({multigraph:D.isMultigraph()}).setGraph(D.graph());return b.forEach(D.nodes(),function(K){D.children(K).length||Y.setNode(K,D.node(K))}),b.forEach(D.edges(),function(K){Y.setEdge(K,D.edge(K))}),Y}function A(D){var Y=b.map(D.nodes(),function(K){var H={};return b.forEach(D.outEdges(K),function(st){H[st.w]=(H[st.w]||0)+D.edge(st).weight}),H});return b.zipObject(D.nodes(),Y)}function _(D){var Y=b.map(D.nodes(),function(K){var H={};return b.forEach(D.inEdges(K),function(st){H[st.v]=(H[st.v]||0)+D.edge(st).weight}),H});return b.zipObject(D.nodes(),Y)}function E(D,Y){var K=D.x,H=D.y,st=Y.x-K,pt=Y.y-H,ct=D.width/2,Ot=D.height/2;if(!st&&!pt)throw new Error("Not possible to find intersection inside of the rectangle");var Rt,Qt;return Math.abs(pt)*ct>Math.abs(st)*Ot?(pt<0&&(Ot=-Ot),Rt=Ot*st/pt,Qt=Ot):(st<0&&(ct=-ct),Rt=ct,Qt=ct*pt/st),{x:K+Rt,y:H+Qt}}function g(D){var Y=b.map(b.range(m(D)+1),function(){return[]});return b.forEach(D.nodes(),function(K){var H=D.node(K),st=H.rank;b.isUndefined(st)||(Y[st][H.order]=K)}),Y}function w(D){var Y=b.min(b.map(D.nodes(),function(K){return D.node(K).rank}));b.forEach(D.nodes(),function(K){var H=D.node(K);b.has(H,"rank")&&(H.rank-=Y)})}function d(D){var Y=b.min(b.map(D.nodes(),function(pt){return D.node(pt).rank})),K=[];b.forEach(D.nodes(),function(pt){var ct=D.node(pt).rank-Y;K[ct]||(K[ct]=[]),K[ct].push(pt)});var H=0,st=D.graph().nodeRankFactor;b.forEach(K,function(pt,ct){b.isUndefined(pt)&&ct%st!=0?--H:H&&b.forEach(pt,function(Ot){D.node(Ot).rank+=H})})}function y(D,Y,K,H){var st={width:0,height:0};return arguments.length>=4&&(st.rank=K,st.order=H),P(D,"border",st,Y)}function m(D){return b.max(b.map(D.nodes(),function(Y){var K=D.node(Y).rank;if(!b.isUndefined(K))return K}))}function C(D,Y){var K={lhs:[],rhs:[]};return b.forEach(D,function(H){Y(H)?K.lhs.push(H):K.rhs.push(H)}),K}function T(D,Y){var K=b.now();try{return Y()}finally{console.log(D+" time: "+(b.now()-K)+"ms")}}function B(D,Y){return Y()}},88177:function(Ct){Ct.exports="0.8.5"},43631:function(Ct,S,p){"use strict";p.r(S),p.d(S,{BrowserInfo:function(){return P},NodeInfo:function(){return O},SearchBotDeviceInfo:function(){return L},BotInfo:function(){return A},ReactNativeInfo:function(){return _},detect:function(){return m},browserName:function(){return T},parseUserAgent:function(){return B},detectOS:function(){return D},getNodeVersion:function(){return Y}});var b=p(34155),I=function(H,st,pt){if(pt||arguments.length===2)for(var ct=0,Ot=st.length,Rt;ct<Ot;ct++)(Rt||!(ct in st))&&(Rt||(Rt=Array.prototype.slice.call(st,0,ct)),Rt[ct]=st[ct]);return H.concat(Rt||Array.prototype.slice.call(st))},P=function(){function H(st,pt,ct){this.name=st,this.version=pt,this.os=ct,this.type="browser"}return H}(),O=function(){function H(st){this.version=st,this.type="node",this.name="node",this.os=b.platform}return H}(),L=function(){function H(st,pt,ct,Ot){this.name=st,this.version=pt,this.os=ct,this.bot=Ot,this.type="bot-device"}return H}(),A=function(){function H(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return H}(),_=function(){function H(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return H}(),E=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,g=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,w=3,d=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",E]],y=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function m(H){return H?B(H):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new _:typeof navigator!="undefined"?B(navigator.userAgent):Y()}function C(H){return H!==""&&d.reduce(function(st,pt){var ct=pt[0],Ot=pt[1];if(st)return st;var Rt=Ot.exec(H);return!!Rt&&[ct,Rt]},!1)}function T(H){var st=C(H);return st?st[0]:null}function B(H){var st=C(H);if(!st)return null;var pt=st[0],ct=st[1];if(pt==="searchbot")return new A;var Ot=ct[1]&&ct[1].split(".").join("_").split("_").slice(0,3);Ot?Ot.length<w&&(Ot=I(I([],Ot,!0),K(w-Ot.length),!0)):Ot=[];var Rt=Ot.join("."),Qt=D(H),Gt=g.exec(H);return Gt&&Gt[1]?new L(pt,Rt,Qt,Gt[1]):new P(pt,Rt,Qt)}function D(H){for(var st=0,pt=y.length;st<pt;st++){var ct=y[st],Ot=ct[0],Rt=ct[1],Qt=Rt.exec(H);if(Qt)return Ot}return null}function Y(){var H=typeof b!="undefined"&&b.version;return H?new O(b.version.slice(1)):null}function K(H){for(var st=[],pt=0;pt<H;pt++)st.push("0");return st}},19432:function(Ct,S,p){"use strict";p.r(S),p.d(S,{assign:function(){return w},format:function(){return nt},parse:function(){return Q},defaultI18n:function(){return T},setGlobalDateI18n:function(){return D},setGlobalDateMasks:function(){return Z}});var b=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,I="\\d\\d?",P="\\d\\d",O="\\d{3}",L="\\d{4}",A="[^\\s]+",_=/\[([^]*?)\]/gm;function E(lt,z){for(var $=[],j=0,f=lt.length;j<f;j++)$.push(lt[j].substr(0,z));return $}var g=function(lt){return function(z,$){var j=$[lt].map(function(yt){return yt.toLowerCase()}),f=j.indexOf(z.toLowerCase());return f>-1?f:null}};function w(lt){for(var z=[],$=1;$<arguments.length;$++)z[$-1]=arguments[$];for(var j=0,f=z;j<f.length;j++){var yt=f[j];for(var _t in yt)lt[_t]=yt[_t]}return lt}var d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],y=["January","February","March","April","May","June","July","August","September","October","November","December"],m=E(y,3),C=E(d,3),T={dayNamesShort:C,dayNames:d,monthNamesShort:m,monthNames:y,amPm:["am","pm"],DoFn:function(lt){return lt+["th","st","nd","rd"][lt%10>3?0:(lt-lt%10!=10?1:0)*lt%10]}},B=w({},T),D=function(lt){return B=w(B,lt)},Y=function(lt){return lt.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},K=function(lt,z){for(z===void 0&&(z=2),lt=String(lt);lt.length<z;)lt="0"+lt;return lt},H={D:function(lt){return String(lt.getDate())},DD:function(lt){return K(lt.getDate())},Do:function(lt,z){return z.DoFn(lt.getDate())},d:function(lt){return String(lt.getDay())},dd:function(lt){return K(lt.getDay())},ddd:function(lt,z){return z.dayNamesShort[lt.getDay()]},dddd:function(lt,z){return z.dayNames[lt.getDay()]},M:function(lt){return String(lt.getMonth()+1)},MM:function(lt){return K(lt.getMonth()+1)},MMM:function(lt,z){return z.monthNamesShort[lt.getMonth()]},MMMM:function(lt,z){return z.monthNames[lt.getMonth()]},YY:function(lt){return K(String(lt.getFullYear()),4).substr(2)},YYYY:function(lt){return K(lt.getFullYear(),4)},h:function(lt){return String(lt.getHours()%12||12)},hh:function(lt){return K(lt.getHours()%12||12)},H:function(lt){return String(lt.getHours())},HH:function(lt){return K(lt.getHours())},m:function(lt){return String(lt.getMinutes())},mm:function(lt){return K(lt.getMinutes())},s:function(lt){return String(lt.getSeconds())},ss:function(lt){return K(lt.getSeconds())},S:function(lt){return String(Math.round(lt.getMilliseconds()/100))},SS:function(lt){return K(Math.round(lt.getMilliseconds()/10),2)},SSS:function(lt){return K(lt.getMilliseconds(),3)},a:function(lt,z){return lt.getHours()<12?z.amPm[0]:z.amPm[1]},A:function(lt,z){return lt.getHours()<12?z.amPm[0].toUpperCase():z.amPm[1].toUpperCase()},ZZ:function(lt){var z=lt.getTimezoneOffset();return(z>0?"-":"+")+K(Math.floor(Math.abs(z)/60)*100+Math.abs(z)%60,4)},Z:function(lt){var z=lt.getTimezoneOffset();return(z>0?"-":"+")+K(Math.floor(Math.abs(z)/60),2)+":"+K(Math.abs(z)%60,2)}},st=function(lt){return+lt-1},pt=[null,I],ct=[null,A],Ot=["isPm",A,function(lt,z){var $=lt.toLowerCase();return $===z.amPm[0]?0:$===z.amPm[1]?1:null}],Rt=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(lt){var z=(lt+"").match(/([+-]|\d\d)/gi);if(z){var $=+z[1]*60+parseInt(z[2],10);return z[0]==="+"?$:-$}return 0}],Qt={D:["day",I],DD:["day",P],Do:["day",I+A,function(lt){return parseInt(lt,10)}],M:["month",I,st],MM:["month",P,st],YY:["year",P,function(lt){var z=new Date,$=+(""+z.getFullYear()).substr(0,2);return+(""+(+lt>68?$-1:$)+lt)}],h:["hour",I,void 0,"isPm"],hh:["hour",P,void 0,"isPm"],H:["hour",I],HH:["hour",P],m:["minute",I],mm:["minute",P],s:["second",I],ss:["second",P],YYYY:["year",L],S:["millisecond","\\d",function(lt){return+lt*100}],SS:["millisecond",P,function(lt){return+lt*10}],SSS:["millisecond",O],d:pt,dd:pt,ddd:ct,dddd:ct,MMM:["month",A,g("monthNamesShort")],MMMM:["month",A,g("monthNames")],a:Ot,A:Ot,ZZ:Rt,Z:Rt},Gt={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},Z=function(lt){return w(Gt,lt)},nt=function(lt,z,$){if(z===void 0&&(z=Gt.default),$===void 0&&($={}),typeof lt=="number"&&(lt=new Date(lt)),Object.prototype.toString.call(lt)!=="[object Date]"||isNaN(lt.getTime()))throw new Error("Invalid Date pass to format");z=Gt[z]||z;var j=[];z=z.replace(_,function(yt,_t){return j.push(_t),"@@@"});var f=w(w({},B),$);return z=z.replace(b,function(yt){return H[yt](lt,f)}),z.replace(/@@@/g,function(){return j.shift()})};function Q(lt,z,$){if($===void 0&&($={}),typeof z!="string")throw new Error("Invalid format in fecha parse");if(z=Gt[z]||z,lt.length>1e3)return null;var j=new Date,f={year:j.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},yt=[],_t=[],jt=z.replace(_,function(Et,It){return _t.push(Y(It)),"@@@"}),qt={},Vt={};jt=Y(jt).replace(b,function(Et){var It=Qt[Et],Kt=It[0],ue=It[1],we=It[3];if(qt[Kt])throw new Error("Invalid format. "+Kt+" specified twice in format");return qt[Kt]=!0,we&&(Vt[we]=!0),yt.push(It),"("+ue+")"}),Object.keys(Vt).forEach(function(Et){if(!qt[Et])throw new Error("Invalid format. "+Et+" is required in specified format")}),jt=jt.replace(/@@@/g,function(){return _t.shift()});var re=lt.match(new RegExp(jt,"i"));if(!re)return null;for(var ae=w(w({},B),$),Nt=1;Nt<re.length;Nt++){var Lt=yt[Nt-1],bt=Lt[0],at=Lt[2],rt=at?at(re[Nt],ae):+re[Nt];if(rt==null)return null;f[bt]=rt}f.isPm===1&&f.hour!=null&&+f.hour!=12?f.hour=+f.hour+12:f.isPm===0&&+f.hour==12&&(f.hour=0);var vt;if(f.timezoneOffset==null){vt=new Date(f.year,f.month,f.day,f.hour,f.minute,f.second,f.millisecond);for(var tt=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],Nt=0,q=tt.length;Nt<q;Nt++)if(qt[tt[Nt][0]]&&f[tt[Nt][0]]!==vt[tt[Nt][1]]())return null}else if(vt=new Date(Date.UTC(f.year,f.month,f.day,f.hour,f.minute-f.timezoneOffset,f.second,f.millisecond)),f.month>11||f.month<0||f.day>31||f.day<1||f.hour>23||f.hour<0||f.minute>59||f.minute<0||f.second>59||f.second<0)return null;return vt}var dt={format:nt,parse:Q,defaultI18n:T,setGlobalDateI18n:D,setGlobalDateMasks:Z};S.default=dt},49685:function(Ct,S,p){"use strict";p.d(S,{Ib:function(){return b},WT:function(){return I},FD:function(){return P}});var b=1e-6,I=typeof Float32Array!="undefined"?Float32Array:Array,P=Math.random;function O(E){I=E}var L=Math.PI/180;function A(E){return E*L}function _(E,g){return Math.abs(E-g)<=b*Math.max(1,Math.abs(E),Math.abs(g))}Math.hypot||(Math.hypot=function(){for(var E=0,g=arguments.length;g--;)E+=arguments[g]*arguments[g];return Math.sqrt(E)})},35600:function(Ct,S,p){"use strict";p.r(S),p.d(S,{create:function(){return I},fromMat4:function(){return P},clone:function(){return O},copy:function(){return L},fromValues:function(){return A},set:function(){return _},identity:function(){return E},transpose:function(){return g},invert:function(){return w},adjoint:function(){return d},determinant:function(){return y},multiply:function(){return m},translate:function(){return C},rotate:function(){return T},scale:function(){return B},fromTranslation:function(){return D},fromRotation:function(){return Y},fromScaling:function(){return K},fromMat2d:function(){return H},fromQuat:function(){return st},normalFromMat4:function(){return pt},projection:function(){return ct},str:function(){return Ot},frob:function(){return Rt},add:function(){return Qt},subtract:function(){return Gt},multiplyScalar:function(){return Z},multiplyScalarAndAdd:function(){return nt},exactEquals:function(){return Q},equals:function(){return dt},mul:function(){return lt},sub:function(){return z}});var b=p(49685);function I(){var $=new b.WT(9);return b.WT!=Float32Array&&($[1]=0,$[2]=0,$[3]=0,$[5]=0,$[6]=0,$[7]=0),$[0]=1,$[4]=1,$[8]=1,$}function P($,j){return $[0]=j[0],$[1]=j[1],$[2]=j[2],$[3]=j[4],$[4]=j[5],$[5]=j[6],$[6]=j[8],$[7]=j[9],$[8]=j[10],$}function O($){var j=new b.WT(9);return j[0]=$[0],j[1]=$[1],j[2]=$[2],j[3]=$[3],j[4]=$[4],j[5]=$[5],j[6]=$[6],j[7]=$[7],j[8]=$[8],j}function L($,j){return $[0]=j[0],$[1]=j[1],$[2]=j[2],$[3]=j[3],$[4]=j[4],$[5]=j[5],$[6]=j[6],$[7]=j[7],$[8]=j[8],$}function A($,j,f,yt,_t,jt,qt,Vt,re){var ae=new b.WT(9);return ae[0]=$,ae[1]=j,ae[2]=f,ae[3]=yt,ae[4]=_t,ae[5]=jt,ae[6]=qt,ae[7]=Vt,ae[8]=re,ae}function _($,j,f,yt,_t,jt,qt,Vt,re,ae){return $[0]=j,$[1]=f,$[2]=yt,$[3]=_t,$[4]=jt,$[5]=qt,$[6]=Vt,$[7]=re,$[8]=ae,$}function E($){return $[0]=1,$[1]=0,$[2]=0,$[3]=0,$[4]=1,$[5]=0,$[6]=0,$[7]=0,$[8]=1,$}function g($,j){if($===j){var f=j[1],yt=j[2],_t=j[5];$[1]=j[3],$[2]=j[6],$[3]=f,$[5]=j[7],$[6]=yt,$[7]=_t}else $[0]=j[0],$[1]=j[3],$[2]=j[6],$[3]=j[1],$[4]=j[4],$[5]=j[7],$[6]=j[2],$[7]=j[5],$[8]=j[8];return $}function w($,j){var f=j[0],yt=j[1],_t=j[2],jt=j[3],qt=j[4],Vt=j[5],re=j[6],ae=j[7],Nt=j[8],Lt=Nt*qt-Vt*ae,bt=-Nt*jt+Vt*re,at=ae*jt-qt*re,rt=f*Lt+yt*bt+_t*at;return rt?(rt=1/rt,$[0]=Lt*rt,$[1]=(-Nt*yt+_t*ae)*rt,$[2]=(Vt*yt-_t*qt)*rt,$[3]=bt*rt,$[4]=(Nt*f-_t*re)*rt,$[5]=(-Vt*f+_t*jt)*rt,$[6]=at*rt,$[7]=(-ae*f+yt*re)*rt,$[8]=(qt*f-yt*jt)*rt,$):null}function d($,j){var f=j[0],yt=j[1],_t=j[2],jt=j[3],qt=j[4],Vt=j[5],re=j[6],ae=j[7],Nt=j[8];return $[0]=qt*Nt-Vt*ae,$[1]=_t*ae-yt*Nt,$[2]=yt*Vt-_t*qt,$[3]=Vt*re-jt*Nt,$[4]=f*Nt-_t*re,$[5]=_t*jt-f*Vt,$[6]=jt*ae-qt*re,$[7]=yt*re-f*ae,$[8]=f*qt-yt*jt,$}function y($){var j=$[0],f=$[1],yt=$[2],_t=$[3],jt=$[4],qt=$[5],Vt=$[6],re=$[7],ae=$[8];return j*(ae*jt-qt*re)+f*(-ae*_t+qt*Vt)+yt*(re*_t-jt*Vt)}function m($,j,f){var yt=j[0],_t=j[1],jt=j[2],qt=j[3],Vt=j[4],re=j[5],ae=j[6],Nt=j[7],Lt=j[8],bt=f[0],at=f[1],rt=f[2],vt=f[3],tt=f[4],q=f[5],Et=f[6],It=f[7],Kt=f[8];return $[0]=bt*yt+at*qt+rt*ae,$[1]=bt*_t+at*Vt+rt*Nt,$[2]=bt*jt+at*re+rt*Lt,$[3]=vt*yt+tt*qt+q*ae,$[4]=vt*_t+tt*Vt+q*Nt,$[5]=vt*jt+tt*re+q*Lt,$[6]=Et*yt+It*qt+Kt*ae,$[7]=Et*_t+It*Vt+Kt*Nt,$[8]=Et*jt+It*re+Kt*Lt,$}function C($,j,f){var yt=j[0],_t=j[1],jt=j[2],qt=j[3],Vt=j[4],re=j[5],ae=j[6],Nt=j[7],Lt=j[8],bt=f[0],at=f[1];return $[0]=yt,$[1]=_t,$[2]=jt,$[3]=qt,$[4]=Vt,$[5]=re,$[6]=bt*yt+at*qt+ae,$[7]=bt*_t+at*Vt+Nt,$[8]=bt*jt+at*re+Lt,$}function T($,j,f){var yt=j[0],_t=j[1],jt=j[2],qt=j[3],Vt=j[4],re=j[5],ae=j[6],Nt=j[7],Lt=j[8],bt=Math.sin(f),at=Math.cos(f);return $[0]=at*yt+bt*qt,$[1]=at*_t+bt*Vt,$[2]=at*jt+bt*re,$[3]=at*qt-bt*yt,$[4]=at*Vt-bt*_t,$[5]=at*re-bt*jt,$[6]=ae,$[7]=Nt,$[8]=Lt,$}function B($,j,f){var yt=f[0],_t=f[1];return $[0]=yt*j[0],$[1]=yt*j[1],$[2]=yt*j[2],$[3]=_t*j[3],$[4]=_t*j[4],$[5]=_t*j[5],$[6]=j[6],$[7]=j[7],$[8]=j[8],$}function D($,j){return $[0]=1,$[1]=0,$[2]=0,$[3]=0,$[4]=1,$[5]=0,$[6]=j[0],$[7]=j[1],$[8]=1,$}function Y($,j){var f=Math.sin(j),yt=Math.cos(j);return $[0]=yt,$[1]=f,$[2]=0,$[3]=-f,$[4]=yt,$[5]=0,$[6]=0,$[7]=0,$[8]=1,$}function K($,j){return $[0]=j[0],$[1]=0,$[2]=0,$[3]=0,$[4]=j[1],$[5]=0,$[6]=0,$[7]=0,$[8]=1,$}function H($,j){return $[0]=j[0],$[1]=j[1],$[2]=0,$[3]=j[2],$[4]=j[3],$[5]=0,$[6]=j[4],$[7]=j[5],$[8]=1,$}function st($,j){var f=j[0],yt=j[1],_t=j[2],jt=j[3],qt=f+f,Vt=yt+yt,re=_t+_t,ae=f*qt,Nt=yt*qt,Lt=yt*Vt,bt=_t*qt,at=_t*Vt,rt=_t*re,vt=jt*qt,tt=jt*Vt,q=jt*re;return $[0]=1-Lt-rt,$[3]=Nt-q,$[6]=bt+tt,$[1]=Nt+q,$[4]=1-ae-rt,$[7]=at-vt,$[2]=bt-tt,$[5]=at+vt,$[8]=1-ae-Lt,$}function pt($,j){var f=j[0],yt=j[1],_t=j[2],jt=j[3],qt=j[4],Vt=j[5],re=j[6],ae=j[7],Nt=j[8],Lt=j[9],bt=j[10],at=j[11],rt=j[12],vt=j[13],tt=j[14],q=j[15],Et=f*Vt-yt*qt,It=f*re-_t*qt,Kt=f*ae-jt*qt,ue=yt*re-_t*Vt,we=yt*ae-jt*Vt,Ye=_t*ae-jt*re,te=Nt*vt-Lt*rt,pe=Nt*tt-bt*rt,Te=Nt*q-at*rt,ze=Lt*tt-bt*vt,ur=Lt*q-at*vt,Ze=bt*q-at*tt,pr=Et*Ze-It*ur+Kt*ze+ue*Te-we*pe+Ye*te;return pr?(pr=1/pr,$[0]=(Vt*Ze-re*ur+ae*ze)*pr,$[1]=(re*Te-qt*Ze-ae*pe)*pr,$[2]=(qt*ur-Vt*Te+ae*te)*pr,$[3]=(_t*ur-yt*Ze-jt*ze)*pr,$[4]=(f*Ze-_t*Te+jt*pe)*pr,$[5]=(yt*Te-f*ur-jt*te)*pr,$[6]=(vt*Ye-tt*we+q*ue)*pr,$[7]=(tt*Kt-rt*Ye-q*It)*pr,$[8]=(rt*we-vt*Kt+q*Et)*pr,$):null}function ct($,j,f){return $[0]=2/j,$[1]=0,$[2]=0,$[3]=0,$[4]=-2/f,$[5]=0,$[6]=-1,$[7]=1,$[8]=1,$}function Ot($){return"mat3("+$[0]+", "+$[1]+", "+$[2]+", "+$[3]+", "+$[4]+", "+$[5]+", "+$[6]+", "+$[7]+", "+$[8]+")"}function Rt($){return Math.hypot($[0],$[1],$[2],$[3],$[4],$[5],$[6],$[7],$[8])}function Qt($,j,f){return $[0]=j[0]+f[0],$[1]=j[1]+f[1],$[2]=j[2]+f[2],$[3]=j[3]+f[3],$[4]=j[4]+f[4],$[5]=j[5]+f[5],$[6]=j[6]+f[6],$[7]=j[7]+f[7],$[8]=j[8]+f[8],$}function Gt($,j,f){return $[0]=j[0]-f[0],$[1]=j[1]-f[1],$[2]=j[2]-f[2],$[3]=j[3]-f[3],$[4]=j[4]-f[4],$[5]=j[5]-f[5],$[6]=j[6]-f[6],$[7]=j[7]-f[7],$[8]=j[8]-f[8],$}function Z($,j,f){return $[0]=j[0]*f,$[1]=j[1]*f,$[2]=j[2]*f,$[3]=j[3]*f,$[4]=j[4]*f,$[5]=j[5]*f,$[6]=j[6]*f,$[7]=j[7]*f,$[8]=j[8]*f,$}function nt($,j,f,yt){return $[0]=j[0]+f[0]*yt,$[1]=j[1]+f[1]*yt,$[2]=j[2]+f[2]*yt,$[3]=j[3]+f[3]*yt,$[4]=j[4]+f[4]*yt,$[5]=j[5]+f[5]*yt,$[6]=j[6]+f[6]*yt,$[7]=j[7]+f[7]*yt,$[8]=j[8]+f[8]*yt,$}function Q($,j){return $[0]===j[0]&&$[1]===j[1]&&$[2]===j[2]&&$[3]===j[3]&&$[4]===j[4]&&$[5]===j[5]&&$[6]===j[6]&&$[7]===j[7]&&$[8]===j[8]}function dt($,j){var f=$[0],yt=$[1],_t=$[2],jt=$[3],qt=$[4],Vt=$[5],re=$[6],ae=$[7],Nt=$[8],Lt=j[0],bt=j[1],at=j[2],rt=j[3],vt=j[4],tt=j[5],q=j[6],Et=j[7],It=j[8];return Math.abs(f-Lt)<=b.Ib*Math.max(1,Math.abs(f),Math.abs(Lt))&&Math.abs(yt-bt)<=b.Ib*Math.max(1,Math.abs(yt),Math.abs(bt))&&Math.abs(_t-at)<=b.Ib*Math.max(1,Math.abs(_t),Math.abs(at))&&Math.abs(jt-rt)<=b.Ib*Math.max(1,Math.abs(jt),Math.abs(rt))&&Math.abs(qt-vt)<=b.Ib*Math.max(1,Math.abs(qt),Math.abs(vt))&&Math.abs(Vt-tt)<=b.Ib*Math.max(1,Math.abs(Vt),Math.abs(tt))&&Math.abs(re-q)<=b.Ib*Math.max(1,Math.abs(re),Math.abs(q))&&Math.abs(ae-Et)<=b.Ib*Math.max(1,Math.abs(ae),Math.abs(Et))&&Math.abs(Nt-It)<=b.Ib*Math.max(1,Math.abs(Nt),Math.abs(It))}var lt=m,z=Gt},31437:function(Ct,S,p){"use strict";p.r(S),p.d(S,{create:function(){return I},clone:function(){return P},fromValues:function(){return O},copy:function(){return L},set:function(){return A},add:function(){return _},subtract:function(){return E},multiply:function(){return g},divide:function(){return w},ceil:function(){return d},floor:function(){return y},min:function(){return m},max:function(){return C},round:function(){return T},scale:function(){return B},scaleAndAdd:function(){return D},distance:function(){return Y},squaredDistance:function(){return K},length:function(){return H},squaredLength:function(){return st},negate:function(){return pt},inverse:function(){return ct},normalize:function(){return Ot},dot:function(){return Rt},cross:function(){return Qt},lerp:function(){return Gt},random:function(){return Z},transformMat2:function(){return nt},transformMat2d:function(){return Q},transformMat3:function(){return dt},transformMat4:function(){return lt},rotate:function(){return z},angle:function(){return $},zero:function(){return j},str:function(){return f},exactEquals:function(){return yt},equals:function(){return _t},len:function(){return jt},sub:function(){return qt},mul:function(){return Vt},div:function(){return re},dist:function(){return ae},sqrDist:function(){return Nt},sqrLen:function(){return Lt},forEach:function(){return bt}});var b=p(49685);function I(){var at=new b.WT(2);return b.WT!=Float32Array&&(at[0]=0,at[1]=0),at}function P(at){var rt=new b.WT(2);return rt[0]=at[0],rt[1]=at[1],rt}function O(at,rt){var vt=new b.WT(2);return vt[0]=at,vt[1]=rt,vt}function L(at,rt){return at[0]=rt[0],at[1]=rt[1],at}function A(at,rt,vt){return at[0]=rt,at[1]=vt,at}function _(at,rt,vt){return at[0]=rt[0]+vt[0],at[1]=rt[1]+vt[1],at}function E(at,rt,vt){return at[0]=rt[0]-vt[0],at[1]=rt[1]-vt[1],at}function g(at,rt,vt){return at[0]=rt[0]*vt[0],at[1]=rt[1]*vt[1],at}function w(at,rt,vt){return at[0]=rt[0]/vt[0],at[1]=rt[1]/vt[1],at}function d(at,rt){return at[0]=Math.ceil(rt[0]),at[1]=Math.ceil(rt[1]),at}function y(at,rt){return at[0]=Math.floor(rt[0]),at[1]=Math.floor(rt[1]),at}function m(at,rt,vt){return at[0]=Math.min(rt[0],vt[0]),at[1]=Math.min(rt[1],vt[1]),at}function C(at,rt,vt){return at[0]=Math.max(rt[0],vt[0]),at[1]=Math.max(rt[1],vt[1]),at}function T(at,rt){return at[0]=Math.round(rt[0]),at[1]=Math.round(rt[1]),at}function B(at,rt,vt){return at[0]=rt[0]*vt,at[1]=rt[1]*vt,at}function D(at,rt,vt,tt){return at[0]=rt[0]+vt[0]*tt,at[1]=rt[1]+vt[1]*tt,at}function Y(at,rt){var vt=rt[0]-at[0],tt=rt[1]-at[1];return Math.hypot(vt,tt)}function K(at,rt){var vt=rt[0]-at[0],tt=rt[1]-at[1];return vt*vt+tt*tt}function H(at){var rt=at[0],vt=at[1];return Math.hypot(rt,vt)}function st(at){var rt=at[0],vt=at[1];return rt*rt+vt*vt}function pt(at,rt){return at[0]=-rt[0],at[1]=-rt[1],at}function ct(at,rt){return at[0]=1/rt[0],at[1]=1/rt[1],at}function Ot(at,rt){var vt=rt[0],tt=rt[1],q=vt*vt+tt*tt;return q>0&&(q=1/Math.sqrt(q)),at[0]=rt[0]*q,at[1]=rt[1]*q,at}function Rt(at,rt){return at[0]*rt[0]+at[1]*rt[1]}function Qt(at,rt,vt){var tt=rt[0]*vt[1]-rt[1]*vt[0];return at[0]=at[1]=0,at[2]=tt,at}function Gt(at,rt,vt,tt){var q=rt[0],Et=rt[1];return at[0]=q+tt*(vt[0]-q),at[1]=Et+tt*(vt[1]-Et),at}function Z(at,rt){rt=rt||1;var vt=b.FD()*2*Math.PI;return at[0]=Math.cos(vt)*rt,at[1]=Math.sin(vt)*rt,at}function nt(at,rt,vt){var tt=rt[0],q=rt[1];return at[0]=vt[0]*tt+vt[2]*q,at[1]=vt[1]*tt+vt[3]*q,at}function Q(at,rt,vt){var tt=rt[0],q=rt[1];return at[0]=vt[0]*tt+vt[2]*q+vt[4],at[1]=vt[1]*tt+vt[3]*q+vt[5],at}function dt(at,rt,vt){var tt=rt[0],q=rt[1];return at[0]=vt[0]*tt+vt[3]*q+vt[6],at[1]=vt[1]*tt+vt[4]*q+vt[7],at}function lt(at,rt,vt){var tt=rt[0],q=rt[1];return at[0]=vt[0]*tt+vt[4]*q+vt[12],at[1]=vt[1]*tt+vt[5]*q+vt[13],at}function z(at,rt,vt,tt){var q=rt[0]-vt[0],Et=rt[1]-vt[1],It=Math.sin(tt),Kt=Math.cos(tt);return at[0]=q*Kt-Et*It+vt[0],at[1]=q*It+Et*Kt+vt[1],at}function $(at,rt){var vt=at[0],tt=at[1],q=rt[0],Et=rt[1],It=Math.sqrt(vt*vt+tt*tt)*Math.sqrt(q*q+Et*Et),Kt=It&&(vt*q+tt*Et)/It;return Math.acos(Math.min(Math.max(Kt,-1),1))}function j(at){return at[0]=0,at[1]=0,at}function f(at){return"vec2("+at[0]+", "+at[1]+")"}function yt(at,rt){return at[0]===rt[0]&&at[1]===rt[1]}function _t(at,rt){var vt=at[0],tt=at[1],q=rt[0],Et=rt[1];return Math.abs(vt-q)<=b.Ib*Math.max(1,Math.abs(vt),Math.abs(q))&&Math.abs(tt-Et)<=b.Ib*Math.max(1,Math.abs(tt),Math.abs(Et))}var jt=H,qt=E,Vt=g,re=w,ae=Y,Nt=K,Lt=st,bt=function(){var at=I();return function(rt,vt,tt,q,Et,It){var Kt,ue;for(vt||(vt=2),tt||(tt=0),q?ue=Math.min(q*vt+tt,rt.length):ue=rt.length,Kt=tt;Kt<ue;Kt+=vt)at[0]=rt[Kt],at[1]=rt[Kt+1],Et(at,at,It),rt[Kt]=at[0],rt[Kt+1]=at[1];return rt}}()},77160:function(Ct,S,p){"use strict";p.r(S),p.d(S,{create:function(){return I},clone:function(){return P},length:function(){return O},fromValues:function(){return L},copy:function(){return A},set:function(){return _},add:function(){return E},subtract:function(){return g},multiply:function(){return w},divide:function(){return d},ceil:function(){return y},floor:function(){return m},min:function(){return C},max:function(){return T},round:function(){return B},scale:function(){return D},scaleAndAdd:function(){return Y},distance:function(){return K},squaredDistance:function(){return H},squaredLength:function(){return st},negate:function(){return pt},inverse:function(){return ct},normalize:function(){return Ot},dot:function(){return Rt},cross:function(){return Qt},lerp:function(){return Gt},hermite:function(){return Z},bezier:function(){return nt},random:function(){return Q},transformMat4:function(){return dt},transformMat3:function(){return lt},transformQuat:function(){return z},rotateX:function(){return $},rotateY:function(){return j},rotateZ:function(){return f},angle:function(){return yt},zero:function(){return _t},str:function(){return jt},exactEquals:function(){return qt},equals:function(){return Vt},sub:function(){return re},mul:function(){return ae},div:function(){return Nt},dist:function(){return Lt},sqrDist:function(){return bt},len:function(){return at},sqrLen:function(){return rt},forEach:function(){return vt}});var b=p(49685);function I(){var tt=new b.WT(3);return b.WT!=Float32Array&&(tt[0]=0,tt[1]=0,tt[2]=0),tt}function P(tt){var q=new b.WT(3);return q[0]=tt[0],q[1]=tt[1],q[2]=tt[2],q}function O(tt){var q=tt[0],Et=tt[1],It=tt[2];return Math.hypot(q,Et,It)}function L(tt,q,Et){var It=new b.WT(3);return It[0]=tt,It[1]=q,It[2]=Et,It}function A(tt,q){return tt[0]=q[0],tt[1]=q[1],tt[2]=q[2],tt}function _(tt,q,Et,It){return tt[0]=q,tt[1]=Et,tt[2]=It,tt}function E(tt,q,Et){return tt[0]=q[0]+Et[0],tt[1]=q[1]+Et[1],tt[2]=q[2]+Et[2],tt}function g(tt,q,Et){return tt[0]=q[0]-Et[0],tt[1]=q[1]-Et[1],tt[2]=q[2]-Et[2],tt}function w(tt,q,Et){return tt[0]=q[0]*Et[0],tt[1]=q[1]*Et[1],tt[2]=q[2]*Et[2],tt}function d(tt,q,Et){return tt[0]=q[0]/Et[0],tt[1]=q[1]/Et[1],tt[2]=q[2]/Et[2],tt}function y(tt,q){return tt[0]=Math.ceil(q[0]),tt[1]=Math.ceil(q[1]),tt[2]=Math.ceil(q[2]),tt}function m(tt,q){return tt[0]=Math.floor(q[0]),tt[1]=Math.floor(q[1]),tt[2]=Math.floor(q[2]),tt}function C(tt,q,Et){return tt[0]=Math.min(q[0],Et[0]),tt[1]=Math.min(q[1],Et[1]),tt[2]=Math.min(q[2],Et[2]),tt}function T(tt,q,Et){return tt[0]=Math.max(q[0],Et[0]),tt[1]=Math.max(q[1],Et[1]),tt[2]=Math.max(q[2],Et[2]),tt}function B(tt,q){return tt[0]=Math.round(q[0]),tt[1]=Math.round(q[1]),tt[2]=Math.round(q[2]),tt}function D(tt,q,Et){return tt[0]=q[0]*Et,tt[1]=q[1]*Et,tt[2]=q[2]*Et,tt}function Y(tt,q,Et,It){return tt[0]=q[0]+Et[0]*It,tt[1]=q[1]+Et[1]*It,tt[2]=q[2]+Et[2]*It,tt}function K(tt,q){var Et=q[0]-tt[0],It=q[1]-tt[1],Kt=q[2]-tt[2];return Math.hypot(Et,It,Kt)}function H(tt,q){var Et=q[0]-tt[0],It=q[1]-tt[1],Kt=q[2]-tt[2];return Et*Et+It*It+Kt*Kt}function st(tt){var q=tt[0],Et=tt[1],It=tt[2];return q*q+Et*Et+It*It}function pt(tt,q){return tt[0]=-q[0],tt[1]=-q[1],tt[2]=-q[2],tt}function ct(tt,q){return tt[0]=1/q[0],tt[1]=1/q[1],tt[2]=1/q[2],tt}function Ot(tt,q){var Et=q[0],It=q[1],Kt=q[2],ue=Et*Et+It*It+Kt*Kt;return ue>0&&(ue=1/Math.sqrt(ue)),tt[0]=q[0]*ue,tt[1]=q[1]*ue,tt[2]=q[2]*ue,tt}function Rt(tt,q){return tt[0]*q[0]+tt[1]*q[1]+tt[2]*q[2]}function Qt(tt,q,Et){var It=q[0],Kt=q[1],ue=q[2],we=Et[0],Ye=Et[1],te=Et[2];return tt[0]=Kt*te-ue*Ye,tt[1]=ue*we-It*te,tt[2]=It*Ye-Kt*we,tt}function Gt(tt,q,Et,It){var Kt=q[0],ue=q[1],we=q[2];return tt[0]=Kt+It*(Et[0]-Kt),tt[1]=ue+It*(Et[1]-ue),tt[2]=we+It*(Et[2]-we),tt}function Z(tt,q,Et,It,Kt,ue){var we=ue*ue,Ye=we*(2*ue-3)+1,te=we*(ue-2)+ue,pe=we*(ue-1),Te=we*(3-2*ue);return tt[0]=q[0]*Ye+Et[0]*te+It[0]*pe+Kt[0]*Te,tt[1]=q[1]*Ye+Et[1]*te+It[1]*pe+Kt[1]*Te,tt[2]=q[2]*Ye+Et[2]*te+It[2]*pe+Kt[2]*Te,tt}function nt(tt,q,Et,It,Kt,ue){var we=1-ue,Ye=we*we,te=ue*ue,pe=Ye*we,Te=3*ue*Ye,ze=3*te*we,ur=te*ue;return tt[0]=q[0]*pe+Et[0]*Te+It[0]*ze+Kt[0]*ur,tt[1]=q[1]*pe+Et[1]*Te+It[1]*ze+Kt[1]*ur,tt[2]=q[2]*pe+Et[2]*Te+It[2]*ze+Kt[2]*ur,tt}function Q(tt,q){q=q||1;var Et=b.FD()*2*Math.PI,It=b.FD()*2-1,Kt=Math.sqrt(1-It*It)*q;return tt[0]=Math.cos(Et)*Kt,tt[1]=Math.sin(Et)*Kt,tt[2]=It*q,tt}function dt(tt,q,Et){var It=q[0],Kt=q[1],ue=q[2],we=Et[3]*It+Et[7]*Kt+Et[11]*ue+Et[15];return we=we||1,tt[0]=(Et[0]*It+Et[4]*Kt+Et[8]*ue+Et[12])/we,tt[1]=(Et[1]*It+Et[5]*Kt+Et[9]*ue+Et[13])/we,tt[2]=(Et[2]*It+Et[6]*Kt+Et[10]*ue+Et[14])/we,tt}function lt(tt,q,Et){var It=q[0],Kt=q[1],ue=q[2];return tt[0]=It*Et[0]+Kt*Et[3]+ue*Et[6],tt[1]=It*Et[1]+Kt*Et[4]+ue*Et[7],tt[2]=It*Et[2]+Kt*Et[5]+ue*Et[8],tt}function z(tt,q,Et){var It=Et[0],Kt=Et[1],ue=Et[2],we=Et[3],Ye=q[0],te=q[1],pe=q[2],Te=Kt*pe-ue*te,ze=ue*Ye-It*pe,ur=It*te-Kt*Ye,Ze=Kt*ur-ue*ze,pr=ue*Te-It*ur,Pr=It*ze-Kt*Te,Or=we*2;return Te*=Or,ze*=Or,ur*=Or,Ze*=2,pr*=2,Pr*=2,tt[0]=Ye+Te+Ze,tt[1]=te+ze+pr,tt[2]=pe+ur+Pr,tt}function $(tt,q,Et,It){var Kt=[],ue=[];return Kt[0]=q[0]-Et[0],Kt[1]=q[1]-Et[1],Kt[2]=q[2]-Et[2],ue[0]=Kt[0],ue[1]=Kt[1]*Math.cos(It)-Kt[2]*Math.sin(It),ue[2]=Kt[1]*Math.sin(It)+Kt[2]*Math.cos(It),tt[0]=ue[0]+Et[0],tt[1]=ue[1]+Et[1],tt[2]=ue[2]+Et[2],tt}function j(tt,q,Et,It){var Kt=[],ue=[];return Kt[0]=q[0]-Et[0],Kt[1]=q[1]-Et[1],Kt[2]=q[2]-Et[2],ue[0]=Kt[2]*Math.sin(It)+Kt[0]*Math.cos(It),ue[1]=Kt[1],ue[2]=Kt[2]*Math.cos(It)-Kt[0]*Math.sin(It),tt[0]=ue[0]+Et[0],tt[1]=ue[1]+Et[1],tt[2]=ue[2]+Et[2],tt}function f(tt,q,Et,It){var Kt=[],ue=[];return Kt[0]=q[0]-Et[0],Kt[1]=q[1]-Et[1],Kt[2]=q[2]-Et[2],ue[0]=Kt[0]*Math.cos(It)-Kt[1]*Math.sin(It),ue[1]=Kt[0]*Math.sin(It)+Kt[1]*Math.cos(It),ue[2]=Kt[2],tt[0]=ue[0]+Et[0],tt[1]=ue[1]+Et[1],tt[2]=ue[2]+Et[2],tt}function yt(tt,q){var Et=tt[0],It=tt[1],Kt=tt[2],ue=q[0],we=q[1],Ye=q[2],te=Math.sqrt(Et*Et+It*It+Kt*Kt),pe=Math.sqrt(ue*ue+we*we+Ye*Ye),Te=te*pe,ze=Te&&Rt(tt,q)/Te;return Math.acos(Math.min(Math.max(ze,-1),1))}function _t(tt){return tt[0]=0,tt[1]=0,tt[2]=0,tt}function jt(tt){return"vec3("+tt[0]+", "+tt[1]+", "+tt[2]+")"}function qt(tt,q){return tt[0]===q[0]&&tt[1]===q[1]&&tt[2]===q[2]}function Vt(tt,q){var Et=tt[0],It=tt[1],Kt=tt[2],ue=q[0],we=q[1],Ye=q[2];return Math.abs(Et-ue)<=b.Ib*Math.max(1,Math.abs(Et),Math.abs(ue))&&Math.abs(It-we)<=b.Ib*Math.max(1,Math.abs(It),Math.abs(we))&&Math.abs(Kt-Ye)<=b.Ib*Math.max(1,Math.abs(Kt),Math.abs(Ye))}var re=g,ae=w,Nt=d,Lt=K,bt=H,at=O,rt=st,vt=function(){var tt=I();return function(q,Et,It,Kt,ue,we){var Ye,te;for(Et||(Et=3),It||(It=0),Kt?te=Math.min(Kt*Et+It,q.length):te=q.length,Ye=It;Ye<te;Ye+=Et)tt[0]=q[Ye],tt[1]=q[Ye+1],tt[2]=q[Ye+2],ue(tt,tt,we),q[Ye]=tt[0],q[Ye+1]=tt[1],q[Ye+2]=tt[2];return q}}()},28282:function(Ct,S,p){var b=p(82354);Ct.exports={Graph:b.Graph,json:p(28974),alg:p(12440),version:b.version}},2842:function(Ct,S,p){var b=p(89126);Ct.exports=I;function I(P){var O={},L=[],A;function _(E){b.has(O,E)||(O[E]=!0,A.push(E),b.each(P.successors(E),_),b.each(P.predecessors(E),_))}return b.each(P.nodes(),function(E){A=[],_(E),A.length&&L.push(A)}),L}},53984:function(Ct,S,p){var b=p(89126);Ct.exports=I;function I(O,L,A){b.isArray(L)||(L=[L]);var _=(O.isDirected()?O.successors:O.neighbors).bind(O),E=[],g={};return b.each(L,function(w){if(!O.hasNode(w))throw new Error("Graph does not have node: "+w);P(O,w,A==="post",g,_,E)}),E}function P(O,L,A,_,E,g){b.has(_,L)||(_[L]=!0,A||g.push(L),b.each(E(L),function(w){P(O,w,A,_,E,g)}),A&&g.push(L))}},84847:function(Ct,S,p){var b=p(63763),I=p(89126);Ct.exports=P;function P(O,L,A){return I.transform(O.nodes(),function(_,E){_[E]=b(O,E,L,A)},{})}},63763:function(Ct,S,p){var b=p(89126),I=p(75639);Ct.exports=O;var P=b.constant(1);function O(A,_,E,g){return L(A,String(_),E||P,g||function(w){return A.outEdges(w)})}function L(A,_,E,g){var w={},d=new I,y,m,C=function(T){var B=T.v!==y?T.v:T.w,D=w[B],Y=E(T),K=m.distance+Y;if(Y<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+T+" Weight: "+Y);K<D.distance&&(D.distance=K,D.predecessor=y,d.decrease(B,K))};for(A.nodes().forEach(function(T){var B=T===_?0:Number.POSITIVE_INFINITY;w[T]={distance:B},d.add(T,B)});d.size()>0&&(y=d.removeMin(),m=w[y],m.distance!==Number.POSITIVE_INFINITY);)g(y).forEach(C);return w}},9096:function(Ct,S,p){var b=p(89126),I=p(5023);Ct.exports=P;function P(O){return b.filter(I(O),function(L){return L.length>1||L.length===1&&O.hasEdge(L[0],L[0])})}},38924:function(Ct,S,p){var b=p(89126);Ct.exports=P;var I=b.constant(1);function P(L,A,_){return O(L,A||I,_||function(E){return L.outEdges(E)})}function O(L,A,_){var E={},g=L.nodes();return g.forEach(function(w){E[w]={},E[w][w]={distance:0},g.forEach(function(d){w!==d&&(E[w][d]={distance:Number.POSITIVE_INFINITY})}),_(w).forEach(function(d){var y=d.v===w?d.w:d.v,m=A(d);E[w][y]={distance:m,predecessor:w}})}),g.forEach(function(w){var d=E[w];g.forEach(function(y){var m=E[y];g.forEach(function(C){var T=m[w],B=d[C],D=m[C],Y=T.distance+B.distance;Y<D.distance&&(D.distance=Y,D.predecessor=B.predecessor)})})}),E}},12440:function(Ct,S,p){Ct.exports={components:p(2842),dijkstra:p(63763),dijkstraAll:p(84847),findCycles:p(9096),floydWarshall:p(38924),isAcyclic:p(62707),postorder:p(58828),preorder:p(92648),prim:p(80514),tarjan:p(5023),topsort:p(2166)}},62707:function(Ct,S,p){var b=p(2166);Ct.exports=I;function I(P){try{b(P)}catch(O){if(O instanceof b.CycleException)return!1;throw O}return!0}},58828:function(Ct,S,p){var b=p(53984);Ct.exports=I;function I(P,O){return b(P,O,"post")}},92648:function(Ct,S,p){var b=p(53984);Ct.exports=I;function I(P,O){return b(P,O,"pre")}},80514:function(Ct,S,p){var b=p(89126),I=p(30771),P=p(75639);Ct.exports=O;function O(L,A){var _=new I,E={},g=new P,w;function d(m){var C=m.v===w?m.w:m.v,T=g.priority(C);if(T!==void 0){var B=A(m);B<T&&(E[C]=w,g.decrease(C,B))}}if(L.nodeCount()===0)return _;b.each(L.nodes(),function(m){g.add(m,Number.POSITIVE_INFINITY),_.setNode(m)}),g.decrease(L.nodes()[0],0);for(var y=!1;g.size()>0;){if(w=g.removeMin(),b.has(E,w))_.setEdge(w,E[w]);else{if(y)throw new Error("Input graph is not connected: "+L);y=!0}L.nodeEdges(w).forEach(d)}return _}},5023:function(Ct,S,p){var b=p(89126);Ct.exports=I;function I(P){var O=0,L=[],A={},_=[];function E(g){var w=A[g]={onStack:!0,lowlink:O,index:O++};if(L.push(g),P.successors(g).forEach(function(m){b.has(A,m)?A[m].onStack&&(w.lowlink=Math.min(w.lowlink,A[m].index)):(E(m),w.lowlink=Math.min(w.lowlink,A[m].lowlink))}),w.lowlink===w.index){var d=[],y;do y=L.pop(),A[y].onStack=!1,d.push(y);while(g!==y);_.push(d)}}return P.nodes().forEach(function(g){b.has(A,g)||E(g)}),_}},2166:function(Ct,S,p){var b=p(89126);Ct.exports=I,I.CycleException=P;function I(O){var L={},A={},_=[];function E(g){if(b.has(A,g))throw new P;b.has(L,g)||(A[g]=!0,L[g]=!0,b.each(O.predecessors(g),E),delete A[g],_.push(g))}if(b.each(O.sinks(),E),b.size(L)!==O.nodeCount())throw new P;return _}function P(){}P.prototype=new Error},75639:function(Ct,S,p){var b=p(89126);Ct.exports=I;function I(){this._arr=[],this._keyIndices={}}I.prototype.size=function(){return this._arr.length},I.prototype.keys=function(){return this._arr.map(function(P){return P.key})},I.prototype.has=function(P){return b.has(this._keyIndices,P)},I.prototype.priority=function(P){var O=this._keyIndices[P];if(O!==void 0)return this._arr[O].priority},I.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},I.prototype.add=function(P,O){var L=this._keyIndices;if(P=String(P),!b.has(L,P)){var A=this._arr,_=A.length;return L[P]=_,A.push({key:P,priority:O}),this._decrease(_),!0}return!1},I.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var P=this._arr.pop();return delete this._keyIndices[P.key],this._heapify(0),P.key},I.prototype.decrease=function(P,O){var L=this._keyIndices[P];if(O>this._arr[L].priority)throw new Error("New priority is greater than current priority. Key: "+P+" Old: "+this._arr[L].priority+" New: "+O);this._arr[L].priority=O,this._decrease(L)},I.prototype._heapify=function(P){var O=this._arr,L=2*P,A=L+1,_=P;L<O.length&&(_=O[L].priority<O[_].priority?L:_,A<O.length&&(_=O[A].priority<O[_].priority?A:_),_!==P&&(this._swap(P,_),this._heapify(_)))},I.prototype._decrease=function(P){for(var O=this._arr,L=O[P].priority,A;P!==0&&(A=P>>1,!(O[A].priority<L));)this._swap(P,A),P=A},I.prototype._swap=function(P,O){var L=this._arr,A=this._keyIndices,_=L[P],E=L[O];L[P]=E,L[O]=_,A[E.key]=P,A[_.key]=O}},30771:function(Ct,S,p){"use strict";var b=p(89126);Ct.exports=L;var I="\0",P="\0",O="";function L(d){this._isDirected=b.has(d,"directed")?d.directed:!0,this._isMultigraph=b.has(d,"multigraph")?d.multigraph:!1,this._isCompound=b.has(d,"compound")?d.compound:!1,this._label=void 0,this._defaultNodeLabelFn=b.constant(void 0),this._defaultEdgeLabelFn=b.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[P]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}L.prototype._nodeCount=0,L.prototype._edgeCount=0,L.prototype.isDirected=function(){return this._isDirected},L.prototype.isMultigraph=function(){return this._isMultigraph},L.prototype.isCompound=function(){return this._isCompound},L.prototype.setGraph=function(d){return this._label=d,this},L.prototype.graph=function(){return this._label},L.prototype.setDefaultNodeLabel=function(d){return b.isFunction(d)||(d=b.constant(d)),this._defaultNodeLabelFn=d,this},L.prototype.nodeCount=function(){return this._nodeCount},L.prototype.nodes=function(){return b.keys(this._nodes)},L.prototype.sources=function(){var d=this;return b.filter(this.nodes(),function(y){return b.isEmpty(d._in[y])})},L.prototype.sinks=function(){var d=this;return b.filter(this.nodes(),function(y){return b.isEmpty(d._out[y])})},L.prototype.setNodes=function(d,y){var m=arguments,C=this;return b.each(d,function(T){m.length>1?C.setNode(T,y):C.setNode(T)}),this},L.prototype.setNode=function(d,y){return b.has(this._nodes,d)?(arguments.length>1&&(this._nodes[d]=y),this):(this._nodes[d]=arguments.length>1?y:this._defaultNodeLabelFn(d),this._isCompound&&(this._parent[d]=P,this._children[d]={},this._children[P][d]=!0),this._in[d]={},this._preds[d]={},this._out[d]={},this._sucs[d]={},++this._nodeCount,this)},L.prototype.node=function(d){return this._nodes[d]},L.prototype.hasNode=function(d){return b.has(this._nodes,d)},L.prototype.removeNode=function(d){var y=this;if(b.has(this._nodes,d)){var m=function(C){y.removeEdge(y._edgeObjs[C])};delete this._nodes[d],this._isCompound&&(this._removeFromParentsChildList(d),delete this._parent[d],b.each(this.children(d),function(C){y.setParent(C)}),delete this._children[d]),b.each(b.keys(this._in[d]),m),delete this._in[d],delete this._preds[d],b.each(b.keys(this._out[d]),m),delete this._out[d],delete this._sucs[d],--this._nodeCount}return this},L.prototype.setParent=function(d,y){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(b.isUndefined(y))y=P;else{y+="";for(var m=y;!b.isUndefined(m);m=this.parent(m))if(m===d)throw new Error("Setting "+y+" as parent of "+d+" would create a cycle");this.setNode(y)}return this.setNode(d),this._removeFromParentsChildList(d),this._parent[d]=y,this._children[y][d]=!0,this},L.prototype._removeFromParentsChildList=function(d){delete this._children[this._parent[d]][d]},L.prototype.parent=function(d){if(this._isCompound){var y=this._parent[d];if(y!==P)return y}},L.prototype.children=function(d){if(b.isUndefined(d)&&(d=P),this._isCompound){var y=this._children[d];if(y)return b.keys(y)}else{if(d===P)return this.nodes();if(this.hasNode(d))return[]}},L.prototype.predecessors=function(d){var y=this._preds[d];if(y)return b.keys(y)},L.prototype.successors=function(d){var y=this._sucs[d];if(y)return b.keys(y)},L.prototype.neighbors=function(d){var y=this.predecessors(d);if(y)return b.union(y,this.successors(d))},L.prototype.isLeaf=function(d){var y;return this.isDirected()?y=this.successors(d):y=this.neighbors(d),y.length===0},L.prototype.filterNodes=function(d){var y=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});y.setGraph(this.graph());var m=this;b.each(this._nodes,function(B,D){d(D)&&y.setNode(D,B)}),b.each(this._edgeObjs,function(B){y.hasNode(B.v)&&y.hasNode(B.w)&&y.setEdge(B,m.edge(B))});var C={};function T(B){var D=m.parent(B);return D===void 0||y.hasNode(D)?(C[B]=D,D):D in C?C[D]:T(D)}return this._isCompound&&b.each(y.nodes(),function(B){y.setParent(B,T(B))}),y},L.prototype.setDefaultEdgeLabel=function(d){return b.isFunction(d)||(d=b.constant(d)),this._defaultEdgeLabelFn=d,this},L.prototype.edgeCount=function(){return this._edgeCount},L.prototype.edges=function(){return b.values(this._edgeObjs)},L.prototype.setPath=function(d,y){var m=this,C=arguments;return b.reduce(d,function(T,B){return C.length>1?m.setEdge(T,B,y):m.setEdge(T,B),B}),this},L.prototype.setEdge=function(){var d,y,m,C,T=!1,B=arguments[0];typeof B=="object"&&B!==null&&"v"in B?(d=B.v,y=B.w,m=B.name,arguments.length===2&&(C=arguments[1],T=!0)):(d=B,y=arguments[1],m=arguments[3],arguments.length>2&&(C=arguments[2],T=!0)),d=""+d,y=""+y,b.isUndefined(m)||(m=""+m);var D=E(this._isDirected,d,y,m);if(b.has(this._edgeLabels,D))return T&&(this._edgeLabels[D]=C),this;if(!b.isUndefined(m)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(d),this.setNode(y),this._edgeLabels[D]=T?C:this._defaultEdgeLabelFn(d,y,m);var Y=g(this._isDirected,d,y,m);return d=Y.v,y=Y.w,Object.freeze(Y),this._edgeObjs[D]=Y,A(this._preds[y],d),A(this._sucs[d],y),this._in[y][D]=Y,this._out[d][D]=Y,this._edgeCount++,this},L.prototype.edge=function(d,y,m){var C=arguments.length===1?w(this._isDirected,arguments[0]):E(this._isDirected,d,y,m);return this._edgeLabels[C]},L.prototype.hasEdge=function(d,y,m){var C=arguments.length===1?w(this._isDirected,arguments[0]):E(this._isDirected,d,y,m);return b.has(this._edgeLabels,C)},L.prototype.removeEdge=function(d,y,m){var C=arguments.length===1?w(this._isDirected,arguments[0]):E(this._isDirected,d,y,m),T=this._edgeObjs[C];return T&&(d=T.v,y=T.w,delete this._edgeLabels[C],delete this._edgeObjs[C],_(this._preds[y],d),_(this._sucs[d],y),delete this._in[y][C],delete this._out[d][C],this._edgeCount--),this},L.prototype.inEdges=function(d,y){var m=this._in[d];if(m){var C=b.values(m);return y?b.filter(C,function(T){return T.v===y}):C}},L.prototype.outEdges=function(d,y){var m=this._out[d];if(m){var C=b.values(m);return y?b.filter(C,function(T){return T.w===y}):C}},L.prototype.nodeEdges=function(d,y){var m=this.inEdges(d,y);if(m)return m.concat(this.outEdges(d,y))};function A(d,y){d[y]?d[y]++:d[y]=1}function _(d,y){--d[y]||delete d[y]}function E(d,y,m,C){var T=""+y,B=""+m;if(!d&&T>B){var D=T;T=B,B=D}return T+O+B+O+(b.isUndefined(C)?I:C)}function g(d,y,m,C){var T=""+y,B=""+m;if(!d&&T>B){var D=T;T=B,B=D}var Y={v:T,w:B};return C&&(Y.name=C),Y}function w(d,y){return E(d,y.v,y.w,y.name)}},82354:function(Ct,S,p){Ct.exports={Graph:p(30771),version:p(49631)}},28974:function(Ct,S,p){var b=p(89126),I=p(30771);Ct.exports={write:P,read:A};function P(_){var E={options:{directed:_.isDirected(),multigraph:_.isMultigraph(),compound:_.isCompound()},nodes:O(_),edges:L(_)};return b.isUndefined(_.graph())||(E.value=b.clone(_.graph())),E}function O(_){return b.map(_.nodes(),function(E){var g=_.node(E),w=_.parent(E),d={v:E};return b.isUndefined(g)||(d.value=g),b.isUndefined(w)||(d.parent=w),d})}function L(_){return b.map(_.edges(),function(E){var g=_.edge(E),w={v:E.v,w:E.w};return b.isUndefined(E.name)||(w.name=E.name),b.isUndefined(g)||(w.value=g),w})}function A(_){var E=new I(_.options).setGraph(_.value);return b.each(_.nodes,function(g){E.setNode(g.v,g.value),g.parent&&E.setParent(g.v,g.parent)}),b.each(_.edges,function(g){E.setEdge({v:g.v,w:g.w,name:g.name},g.value)}),E}},89126:function(Ct,S,p){var b;try{b={clone:p(66678),constant:p(75703),each:p(66073),filter:p(63105),has:p(18721),isArray:p(1469),isEmpty:p(41609),isFunction:p(23560),isUndefined:p(52353),keys:p(3674),map:p(35161),reduce:p(54061),size:p(84238),transform:p(68718),union:p(93386),values:p(52628)}}catch(I){}b||(b=window._),Ct.exports=b},49631:function(Ct){Ct.exports="2.1.8"},38186:function(Ct){var S=[],p=[],b="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function I(O,L){if(L=L||{},O===void 0)throw new Error(b);var A=L.prepend===!0?"prepend":"append",_=L.container!==void 0?L.container:document.querySelector("head"),E=S.indexOf(_);E===-1&&(E=S.push(_)-1,p[E]={});var g;return p[E]!==void 0&&p[E][A]!==void 0?g=p[E][A]:(g=p[E][A]=P(),A==="prepend"?_.insertBefore(g,_.childNodes[0]):_.appendChild(g)),O.charCodeAt(0)===65279&&(O=O.substr(1,O.length)),g.styleSheet?g.styleSheet.cssText+=O:g.textContent+=O,g}function P(){var O=document.createElement("style");return O.setAttribute("type","text/css"),O}Ct.exports=I,Ct.exports.insertCss=I},47443:function(Ct,S,p){var b=p(42118);function I(P,O){var L=P==null?0:P.length;return!!L&&b(P,O,0)>-1}Ct.exports=I},1196:function(Ct){function S(p,b,I){for(var P=-1,O=p==null?0:p.length;++P<O;)if(I(b,p[P]))return!0;return!1}Ct.exports=S},62663:function(Ct){function S(p,b,I,P){var O=-1,L=p==null?0:p.length;for(P&&L&&(I=p[++O]);++O<L;)I=b(I,p[O],O,p);return I}Ct.exports=S},48983:function(Ct,S,p){var b=p(40371),I=b("length");Ct.exports=I},56029:function(Ct,S,p){var b=p(33448);function I(P,O,L){for(var A=-1,_=P.length;++A<_;){var E=P[A],g=O(E);if(g!=null&&(w===void 0?g===g&&!b(g):L(g,w)))var w=g,d=E}return d}Ct.exports=I},80760:function(Ct,S,p){var b=p(89881);function I(P,O){var L=[];return b(P,function(A,_,E){O(A,_,E)&&L.push(A)}),L}Ct.exports=I},41848:function(Ct){function S(p,b,I,P){for(var O=p.length,L=I+(P?1:-1);P?L--:++L<O;)if(b(p[L],L,p))return L;return-1}Ct.exports=S},21078:function(Ct,S,p){var b=p(62488),I=p(37285);function P(O,L,A,_,E){var g=-1,w=O.length;for(A||(A=I),E||(E=[]);++g<w;){var d=O[g];L>0&&A(d)?L>1?P(d,L-1,A,_,E):b(E,d):_||(E[E.length]=d)}return E}Ct.exports=P},53325:function(Ct){function S(p,b){return p>b}Ct.exports=S},78565:function(Ct){var S=Object.prototype,p=S.hasOwnProperty;function b(I,P){return I!=null&&p.call(I,P)}Ct.exports=b},42118:function(Ct,S,p){var b=p(41848),I=p(62722),P=p(42351);function O(L,A,_){return A===A?P(L,A,_):b(L,I,_)}Ct.exports=O},62722:function(Ct){function S(p){return p!==p}Ct.exports=S},70433:function(Ct){function S(p,b){return p<b}Ct.exports=S},82689:function(Ct,S,p){var b=p(29932),I=p(97786),P=p(67206),O=p(69199),L=p(71131),A=p(7518),_=p(85022),E=p(6557),g=p(1469);function w(d,y,m){y.length?y=b(y,function(B){return g(B)?function(D){return I(D,B.length===1?B[0]:B)}:B}):y=[E];var C=-1;y=b(y,A(P));var T=O(d,function(B,D,Y){var K=b(y,function(H){return H(B)});return{criteria:K,index:++C,value:B}});return L(T,function(B,D){return _(B,D,m)})}Ct.exports=w},25970:function(Ct,S,p){var b=p(63012),I=p(79095);function P(O,L){return b(O,L,function(A,_){return I(O,_)})}Ct.exports=P},63012:function(Ct,S,p){var b=p(97786),I=p(10611),P=p(71811);function O(L,A,_){for(var E=-1,g=A.length,w={};++E<g;){var d=A[E],y=b(L,d);_(y,d)&&I(w,P(d,L),y)}return w}Ct.exports=O},40098:function(Ct){var S=Math.ceil,p=Math.max;function b(I,P,O,L){for(var A=-1,_=p(S((P-I)/(O||1)),0),E=Array(_);_--;)E[L?_:++A]=I,I+=O;return E}Ct.exports=b},10107:function(Ct){function S(p,b,I,P,O){return O(p,function(L,A,_){I=P?(P=!1,L):b(I,L,A,_)}),I}Ct.exports=S},10611:function(Ct,S,p){var b=p(34865),I=p(71811),P=p(65776),O=p(13218),L=p(40327);function A(_,E,g,w){if(!O(_))return _;E=I(E,_);for(var d=-1,y=E.length,m=y-1,C=_;C!=null&&++d<y;){var T=L(E[d]),B=g;if(T==="__proto__"||T==="constructor"||T==="prototype")return _;if(d!=m){var D=C[T];B=w?w(D,T,C):void 0,B===void 0&&(B=O(D)?D:P(E[d+1])?[]:{})}b(C,T,B),C=C[T]}return _}Ct.exports=A},71131:function(Ct){function S(p,b){var I=p.length;for(p.sort(b);I--;)p[I]=p[I].value;return p}Ct.exports=S},45652:function(Ct,S,p){var b=p(88668),I=p(47443),P=p(1196),O=p(74757),L=p(23593),A=p(21814),_=200;function E(g,w,d){var y=-1,m=I,C=g.length,T=!0,B=[],D=B;if(d)T=!1,m=P;else if(C>=_){var Y=w?null:L(g);if(Y)return A(Y);T=!1,m=O,D=new b}else D=w?[]:B;t:for(;++y<C;){var K=g[y],H=w?w(K):K;if(K=d||K!==0?K:0,T&&H===H){for(var st=D.length;st--;)if(D[st]===H)continue t;w&&D.push(H),B.push(K)}else m(D,H,d)||(D!==B&&D.push(H),B.push(K))}return B}Ct.exports=E},47415:function(Ct,S,p){var b=p(29932);function I(P,O){return b(O,function(L){return P[L]})}Ct.exports=I},1757:function(Ct){function S(p,b,I){for(var P=-1,O=p.length,L=b.length,A={};++P<O;){var _=P<L?b[P]:void 0;I(A,p[P],_)}return A}Ct.exports=S},26393:function(Ct,S,p){var b=p(33448);function I(P,O){if(P!==O){var L=P!==void 0,A=P===null,_=P===P,E=b(P),g=O!==void 0,w=O===null,d=O===O,y=b(O);if(!w&&!y&&!E&&P>O||E&&g&&d&&!w&&!y||A&&g&&d||!L&&d||!_)return 1;if(!A&&!E&&!y&&P<O||y&&L&&_&&!A&&!E||w&&L&&_||!g&&_||!d)return-1}return 0}Ct.exports=I},85022:function(Ct,S,p){var b=p(26393);function I(P,O,L){for(var A=-1,_=P.criteria,E=O.criteria,g=_.length,w=L.length;++A<g;){var d=b(_[A],E[A]);if(d){if(A>=w)return d;var y=L[A];return d*(y=="desc"?-1:1)}}return P.index-O.index}Ct.exports=I},67740:function(Ct,S,p){var b=p(67206),I=p(98612),P=p(3674);function O(L){return function(A,_,E){var g=Object(A);if(!I(A)){var w=b(_,3);A=P(A),_=function(y){return w(g[y],y,g)}}var d=L(A,_,E);return d>-1?g[w?A[d]:d]:void 0}}Ct.exports=O},47445:function(Ct,S,p){var b=p(40098),I=p(16612),P=p(18601);function O(L){return function(A,_,E){return E&&typeof E!="number"&&I(A,_,E)&&(_=E=void 0),A=P(A),_===void 0?(_=A,A=0):_=P(_),E=E===void 0?A<_?1:-1:P(E),b(A,_,E,L)}}Ct.exports=O},23593:function(Ct,S,p){var b=p(58525),I=p(50308),P=p(21814),O=1/0,L=b&&1/P(new b([,-0]))[1]==O?function(A){return new b(A)}:I;Ct.exports=L},99021:function(Ct,S,p){var b=p(85564),I=p(45357),P=p(30061);function O(L){return P(I(L,void 0,b),L+"")}Ct.exports=O},62689:function(Ct){var S="\\ud800-\\udfff",p="\\u0300-\\u036f",b="\\ufe20-\\ufe2f",I="\\u20d0-\\u20ff",P=p+b+I,O="\\ufe0e\\ufe0f",L="\\u200d",A=RegExp("["+L+S+P+O+"]");function _(E){return A.test(E)}Ct.exports=_},37285:function(Ct,S,p){var b=p(62705),I=p(35694),P=p(1469),O=b?b.isConcatSpreadable:void 0;function L(A){return P(A)||I(A)||!!(O&&A&&A[O])}Ct.exports=L},42351:function(Ct){function S(p,b,I){for(var P=I-1,O=p.length;++P<O;)if(p[P]===b)return P;return-1}Ct.exports=S},88016:function(Ct,S,p){var b=p(48983),I=p(62689),P=p(21903);function O(L){return I(L)?P(L):b(L)}Ct.exports=O},21903:function(Ct){var S="\\ud800-\\udfff",p="\\u0300-\\u036f",b="\\ufe20-\\ufe2f",I="\\u20d0-\\u20ff",P=p+b+I,O="\\ufe0e\\ufe0f",L="["+S+"]",A="["+P+"]",_="\\ud83c[\\udffb-\\udfff]",E="(?:"+A+"|"+_+")",g="[^"+S+"]",w="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",y="\\u200d",m=E+"?",C="["+O+"]?",T="(?:"+y+"(?:"+[g,w,d].join("|")+")"+C+m+")*",B=C+m+T,D="(?:"+[g+A+"?",A,w,d,L].join("|")+")",Y=RegExp(_+"(?="+_+")|"+D+B,"g");function K(H){for(var st=Y.lastIndex=0;Y.test(H);)++st;return st}Ct.exports=K},66678:function(Ct,S,p){var b=p(85990),I=4;function P(O){return b(O,I)}Ct.exports=P},91747:function(Ct,S,p){var b=p(5976),I=p(77813),P=p(16612),O=p(81704),L=Object.prototype,A=L.hasOwnProperty,_=b(function(E,g){E=Object(E);var w=-1,d=g.length,y=d>2?g[2]:void 0;for(y&&P(g[0],g[1],y)&&(d=1);++w<d;)for(var m=g[w],C=O(m),T=-1,B=C.length;++T<B;){var D=C[T],Y=E[D];(Y===void 0||I(Y,L[D])&&!A.call(E,D))&&(E[D]=m[D])}return E});Ct.exports=_},63105:function(Ct,S,p){var b=p(34963),I=p(80760),P=p(67206),O=p(1469);function L(A,_){var E=O(A)?b:I;return E(A,P(_,3))}Ct.exports=L},13311:function(Ct,S,p){var b=p(67740),I=p(30998),P=b(I);Ct.exports=P},30998:function(Ct,S,p){var b=p(41848),I=p(67206),P=p(40554),O=Math.max;function L(A,_,E){var g=A==null?0:A.length;if(!g)return-1;var w=E==null?0:P(E);return w<0&&(w=O(g+w,0)),b(A,I(_,3),w)}Ct.exports=L},85564:function(Ct,S,p){var b=p(21078);function I(P){var O=P==null?0:P.length;return O?b(P,1):[]}Ct.exports=I},62620:function(Ct,S,p){var b=p(28483),I=p(54290),P=p(81704);function O(L,A){return L==null?L:b(L,I(A),P)}Ct.exports=O},18721:function(Ct,S,p){var b=p(78565),I=p(222);function P(O,L){return O!=null&&I(O,L,b)}Ct.exports=P},41609:function(Ct,S,p){var b=p(280),I=p(64160),P=p(35694),O=p(1469),L=p(98612),A=p(78264),_=p(25726),E=p(36719),g="[object Map]",w="[object Set]",d=Object.prototype,y=d.hasOwnProperty;function m(C){if(C==null)return!0;if(L(C)&&(O(C)||typeof C=="string"||typeof C.splice=="function"||A(C)||E(C)||P(C)))return!C.length;var T=I(C);if(T==g||T==w)return!C.size;if(_(C))return!b(C).length;for(var B in C)if(y.call(C,B))return!1;return!0}Ct.exports=m},52353:function(Ct){function S(p){return p===void 0}Ct.exports=S},10928:function(Ct){function S(p){var b=p==null?0:p.length;return b?p[b-1]:void 0}Ct.exports=S},66604:function(Ct,S,p){var b=p(89465),I=p(47816),P=p(67206);function O(L,A){var _={};return A=P(A,3),I(L,function(E,g,w){b(_,g,A(E,g,w))}),_}Ct.exports=O},6162:function(Ct,S,p){var b=p(56029),I=p(53325),P=p(6557);function O(L){return L&&L.length?b(L,P,I):void 0}Ct.exports=O},53632:function(Ct,S,p){var b=p(56029),I=p(70433),P=p(6557);function O(L){return L&&L.length?b(L,P,I):void 0}Ct.exports=O},22762:function(Ct,S,p){var b=p(56029),I=p(67206),P=p(70433);function O(L,A){return L&&L.length?b(L,I(A,2),P):void 0}Ct.exports=O},50308:function(Ct){function S(){}Ct.exports=S},78718:function(Ct,S,p){var b=p(25970),I=p(99021),P=I(function(O,L){return O==null?{}:b(O,L)});Ct.exports=P},96026:function(Ct,S,p){var b=p(47445),I=b();Ct.exports=I},54061:function(Ct,S,p){var b=p(62663),I=p(89881),P=p(67206),O=p(10107),L=p(1469);function A(_,E,g){var w=L(_)?b:O,d=arguments.length<3;return w(_,P(E,4),g,d,I)}Ct.exports=A},84238:function(Ct,S,p){var b=p(280),I=p(64160),P=p(98612),O=p(47037),L=p(88016),A="[object Map]",_="[object Set]";function E(g){if(g==null)return 0;if(P(g))return O(g)?L(g):g.length;var w=I(g);return w==A||w==_?g.size:b(g).length}Ct.exports=E},89734:function(Ct,S,p){var b=p(21078),I=p(82689),P=p(5976),O=p(16612),L=P(function(A,_){if(A==null)return[];var E=_.length;return E>1&&O(A,_[0],_[1])?_=[]:E>2&&O(_[0],_[1],_[2])&&(_=[_[0]]),I(A,b(_,1),[])});Ct.exports=L},18601:function(Ct,S,p){var b=p(14841),I=1/0,P=17976931348623157e292;function O(L){if(!L)return L===0?L:0;if(L=b(L),L===I||L===-I){var A=L<0?-1:1;return A*P}return L===L?L:0}Ct.exports=O},40554:function(Ct,S,p){var b=p(18601);function I(P){var O=b(P),L=O%1;return O===O?L?O-L:O:0}Ct.exports=I},68718:function(Ct,S,p){var b=p(77412),I=p(3118),P=p(47816),O=p(67206),L=p(85924),A=p(1469),_=p(78264),E=p(23560),g=p(13218),w=p(36719);function d(y,m,C){var T=A(y),B=T||_(y)||w(y);if(m=O(m,4),C==null){var D=y&&y.constructor;B?C=T?new D:[]:g(y)?C=E(D)?I(L(y)):{}:C={}}return(B?b:P)(y,function(Y,K,H){return m(C,Y,K,H)}),C}Ct.exports=d},93386:function(Ct,S,p){var b=p(21078),I=p(5976),P=p(45652),O=p(29246),L=I(function(A){return P(b(A,1,O,!0))});Ct.exports=L},73955:function(Ct,S,p){var b=p(79833),I=0;function P(O){var L=++I;return b(O)+L}Ct.exports=P},52628:function(Ct,S,p){var b=p(47415),I=p(3674);function P(O){return O==null?[]:b(O,I(O))}Ct.exports=P},7287:function(Ct,S,p){var b=p(34865),I=p(1757);function P(O,L){return I(O||[],L||[],b)}Ct.exports=P},92077:function(Ct,S,p){var b,I;/*! @preserve
* numeral.js
* version : 2.0.6
* author : Adam Draper
* license : MIT
* http://adamwdraper.github.com/Numeral-js/
*/(function(P,O){b=O,I=typeof b=="function"?b.call(S,p,S,Ct):b,I!==void 0&&(Ct.exports=I)})(this,function(){var P,O,L="2.0.6",A={},_={},E={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},g={currentLocale:E.currentLocale,zeroFormat:E.zeroFormat,nullFormat:E.nullFormat,defaultFormat:E.defaultFormat,scalePercentBy100:E.scalePercentBy100};function w(d,y){this._input=d,this._value=y}return P=function(d){var y,m,C,T;if(P.isNumeral(d))y=d.value();else if(d===0||typeof d=="undefined")y=0;else if(d===null||O.isNaN(d))y=null;else if(typeof d=="string")if(g.zeroFormat&&d===g.zeroFormat)y=0;else if(g.nullFormat&&d===g.nullFormat||!d.replace(/[^0-9]+/g,"").length)y=null;else{for(m in A)if(T=typeof A[m].regexps.unformat=="function"?A[m].regexps.unformat():A[m].regexps.unformat,T&&d.match(T)){C=A[m].unformat;break}C=C||P._.stringToNumber,y=C(d)}else y=Number(d)||null;return new w(d,y)},P.version=L,P.isNumeral=function(d){return d instanceof w},P._=O={numberToFormat:function(d,y,m){var C=_[P.options.currentLocale],T=!1,B=!1,D=0,Y="",K=1e12,H=1e9,st=1e6,pt=1e3,ct="",Ot=!1,Rt,Qt,Gt,Z,nt,Q,dt,lt,z,$;if(d=d||0,Qt=Math.abs(d),P._.includes(y,"(")?(T=!0,y=y.replace(/[\(|\)]/g,"")):(P._.includes(y,"+")||P._.includes(y,"-"))&&(lt=P._.includes(y,"+")?y.indexOf("+"):d<0?y.indexOf("-"):-1,y=y.replace(/[\+|\-]/g,"")),P._.includes(y,"a")&&(Rt=y.match(/a(k|m|b|t)?/),Rt=Rt?Rt[1]:!1,P._.includes(y," a")&&(Y=" "),y=y.replace(new RegExp(Y+"a[kmbt]?"),""),Qt>=K&&!Rt||Rt==="t"?(Y+=C.abbreviations.trillion,d=d/K):Qt<K&&Qt>=H&&!Rt||Rt==="b"?(Y+=C.abbreviations.billion,d=d/H):Qt<H&&Qt>=st&&!Rt||Rt==="m"?(Y+=C.abbreviations.million,d=d/st):(Qt<st&&Qt>=pt&&!Rt||Rt==="k")&&(Y+=C.abbreviations.thousand,d=d/pt)),P._.includes(y,"[.]")&&(B=!0,y=y.replace("[.]",".")),Q=d.toString().split(".")[0],dt=y.split(".")[1],z=y.indexOf(","),D=(y.split(".")[0].split(",")[0].match(/0/g)||[]).length,dt?(P._.includes(dt,"[")?(dt=dt.replace("]",""),dt=dt.split("["),ct=P._.toFixed(d,dt[0].length+dt[1].length,m,dt[1].length)):ct=P._.toFixed(d,dt.length,m),Q=ct.split(".")[0],P._.includes(ct,".")?ct=C.delimiters.decimal+ct.split(".")[1]:ct="",B&&Number(ct.slice(1))===0&&(ct="")):Q=P._.toFixed(d,0,m),Y&&!Rt&&Number(Q)>=1e3&&Y!==C.abbreviations.trillion)switch(Q=String(Number(Q)/1e3),Y){case C.abbreviations.thousand:Y=C.abbreviations.million;break;case C.abbreviations.million:Y=C.abbreviations.billion;break;case C.abbreviations.billion:Y=C.abbreviations.trillion;break}if(P._.includes(Q,"-")&&(Q=Q.slice(1),Ot=!0),Q.length<D)for(var j=D-Q.length;j>0;j--)Q="0"+Q;return z>-1&&(Q=Q.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+C.delimiters.thousands)),y.indexOf(".")===0&&(Q=""),$=Q+ct+(Y||""),T?$=(T&&Ot?"(":"")+$+(T&&Ot?")":""):lt>=0?$=lt===0?(Ot?"-":"+")+$:$+(Ot?"-":"+"):Ot&&($="-"+$),$},stringToNumber:function(d){var y=_[g.currentLocale],m=d,C={thousand:3,million:6,billion:9,trillion:12},T,B,D,Y;if(g.zeroFormat&&d===g.zeroFormat)B=0;else if(g.nullFormat&&d===g.nullFormat||!d.replace(/[^0-9]+/g,"").length)B=null;else{B=1,y.delimiters.decimal!=="."&&(d=d.replace(/\./g,"").replace(y.delimiters.decimal,"."));for(T in C)if(Y=new RegExp("[^a-zA-Z]"+y.abbreviations[T]+"(?:\\)|(\\"+y.currency.symbol+")?(?:\\))?)?$"),m.match(Y)){B*=Math.pow(10,C[T]);break}B*=(d.split("-").length+Math.min(d.split("(").length-1,d.split(")").length-1))%2?1:-1,d=d.replace(/[^0-9\.]+/g,""),B*=Number(d)}return B},isNaN:function(d){return typeof d=="number"&&isNaN(d)},includes:function(d,y){return d.indexOf(y)!==-1},insert:function(d,y,m){return d.slice(0,m)+y+d.slice(m)},reduce:function(d,y){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof y!="function")throw new TypeError(y+" is not a function");var m=Object(d),C=m.length>>>0,T=0,B;if(arguments.length===3)B=arguments[2];else{for(;T<C&&!(T in m);)T++;if(T>=C)throw new TypeError("Reduce of empty array with no initial value");B=m[T++]}for(;T<C;T++)T in m&&(B=y(B,m[T],T,m));return B},multiplier:function(d){var y=d.toString().split(".");return y.length<2?1:Math.pow(10,y[1].length)},correctionFactor:function(){var d=Array.prototype.slice.call(arguments);return d.reduce(function(y,m){var C=O.multiplier(m);return y>C?y:C},1)},toFixed:function(d,y,m,C){var T=d.toString().split("."),B=y-(C||0),D,Y,K,H;return T.length===2?D=Math.min(Math.max(T[1].length,B),y):D=B,K=Math.pow(10,D),H=(m(d+"e+"+D)/K).toFixed(D),C>y-D&&(Y=new RegExp("\\.?0{1,"+(C-(y-D))+"}$"),H=H.replace(Y,"")),H}},P.options=g,P.formats=A,P.locales=_,P.locale=function(d){return d&&(g.currentLocale=d.toLowerCase()),g.currentLocale},P.localeData=function(d){if(!d)return _[g.currentLocale];if(d=d.toLowerCase(),!_[d])throw new Error("Unknown locale : "+d);return _[d]},P.reset=function(){for(var d in E)g[d]=E[d]},P.zeroFormat=function(d){g.zeroFormat=typeof d=="string"?d:null},P.nullFormat=function(d){g.nullFormat=typeof d=="string"?d:null},P.defaultFormat=function(d){g.defaultFormat=typeof d=="string"?d:"0.0"},P.register=function(d,y,m){if(y=y.toLowerCase(),this[d+"s"][y])throw new TypeError(y+" "+d+" already registered.");return this[d+"s"][y]=m,m},P.validate=function(d,y){var m,C,T,B,D,Y,K,H;if(typeof d!="string"&&(d+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",d)),d=d.trim(),d.match(/^\d+$/))return!0;if(d==="")return!1;try{K=P.localeData(y)}catch(st){K=P.localeData(P.locale())}return T=K.currency.symbol,D=K.abbreviations,m=K.delimiters.decimal,K.delimiters.thousands==="."?C="\\.":C=K.delimiters.thousands,H=d.match(/^[^\d]+/),H!==null&&(d=d.substr(1),H[0]!==T)||(H=d.match(/[^\d]+$/),H!==null&&(d=d.slice(0,-1),H[0]!==D.thousand&&H[0]!==D.million&&H[0]!==D.billion&&H[0]!==D.trillion))?!1:(Y=new RegExp(C+"{2}"),d.match(/[^\d.,]/g)?!1:(B=d.split(m),B.length>2?!1:B.length<2?!!B[0].match(/^\d+.*\d$/)&&!B[0].match(Y):B[0].length===1?!!B[0].match(/^\d+$/)&&!B[0].match(Y)&&!!B[1].match(/^\d+$/):!!B[0].match(/^\d+.*\d$/)&&!B[0].match(Y)&&!!B[1].match(/^\d+$/)))},P.fn=w.prototype={clone:function(){return P(this)},format:function(d,y){var m=this._value,C=d||g.defaultFormat,T,B,D;if(y=y||Math.round,m===0&&g.zeroFormat!==null)B=g.zeroFormat;else if(m===null&&g.nullFormat!==null)B=g.nullFormat;else{for(T in A)if(C.match(A[T].regexps.format)){D=A[T].format;break}D=D||P._.numberToFormat,B=D(m,C,y)}return B},value:function(){return this._value},input:function(){return this._input},set:function(d){return this._value=Number(d),this},add:function(d){var y=O.correctionFactor.call(null,this._value,d);function m(C,T,B,D){return C+Math.round(y*T)}return this._value=O.reduce([this._value,d],m,0)/y,this},subtract:function(d){var y=O.correctionFactor.call(null,this._value,d);function m(C,T,B,D){return C-Math.round(y*T)}return this._value=O.reduce([d],m,Math.round(this._value*y))/y,this},multiply:function(d){function y(m,C,T,B){var D=O.correctionFactor(m,C);return Math.round(m*D)*Math.round(C*D)/Math.round(D*D)}return this._value=O.reduce([this._value,d],y,1),this},divide:function(d){function y(m,C,T,B){var D=O.correctionFactor(m,C);return Math.round(m*D)/Math.round(C*D)}return this._value=O.reduce([this._value,d],y),this},difference:function(d){return Math.abs(P(this._value).subtract(d).value())}},P.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(d){var y=d%10;return~~(d%100/10)==1?"th":y===1?"st":y===2?"nd":y===3?"rd":"th"},currency:{symbol:"$"}}),function(){P.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(d,y,m){var C=P._.includes(y," BPS")?" ":"",T;return d=d*1e4,y=y.replace(/\s?BPS/,""),T=P._.numberToFormat(d,y,m),P._.includes(T,")")?(T=T.split(""),T.splice(-1,0,C+"BPS"),T=T.join("")):T=T+C+"BPS",T},unformat:function(d){return+(P._.stringToNumber(d)*1e-4).toFixed(15)}})}(),function(){var d={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},y={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},m=d.suffixes.concat(y.suffixes.filter(function(T){return d.suffixes.indexOf(T)<0})),C=m.join("|");C="("+C.replace("B","B(?!PS)")+")",P.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(C)},format:function(T,B,D){var Y,K=P._.includes(B,"ib")?y:d,H=P._.includes(B," b")||P._.includes(B," ib")?" ":"",st,pt,ct;for(B=B.replace(/\s?i?b/,""),st=0;st<=K.suffixes.length;st++)if(pt=Math.pow(K.base,st),ct=Math.pow(K.base,st+1),T===null||T===0||T>=pt&&T<ct){H+=K.suffixes[st],pt>0&&(T=T/pt);break}return Y=P._.numberToFormat(T,B,D),Y+H},unformat:function(T){var B=P._.stringToNumber(T),D,Y;if(B){for(D=d.suffixes.length-1;D>=0;D--){if(P._.includes(T,d.suffixes[D])){Y=Math.pow(d.base,D);break}if(P._.includes(T,y.suffixes[D])){Y=Math.pow(y.base,D);break}}B*=Y||1}return B}})}(),function(){P.register("format","currency",{regexps:{format:/(\$)/},format:function(d,y,m){var C=P.locales[P.options.currentLocale],T={before:y.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:y.match(/([\+|\-|\)|\s|\$]*)$/)[0]},B,D,Y;for(y=y.replace(/\s?\$\s?/,""),B=P._.numberToFormat(d,y,m),d>=0?(T.before=T.before.replace(/[\-\(]/,""),T.after=T.after.replace(/[\-\)]/,"")):d<0&&!P._.includes(T.before,"-")&&!P._.includes(T.before,"(")&&(T.before="-"+T.before),Y=0;Y<T.before.length;Y++)switch(D=T.before[Y],D){case"$":B=P._.insert(B,C.currency.symbol,Y);break;case" ":B=P._.insert(B," ",Y+C.currency.symbol.length-1);break}for(Y=T.after.length-1;Y>=0;Y--)switch(D=T.after[Y],D){case"$":B=Y===T.after.length-1?B+C.currency.symbol:P._.insert(B,C.currency.symbol,-(T.after.length-(1+Y)));break;case" ":B=Y===T.after.length-1?B+" ":P._.insert(B," ",-(T.after.length-(1+Y)+C.currency.symbol.length-1));break}return B}})}(),function(){P.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(d,y,m){var C,T=typeof d=="number"&&!P._.isNaN(d)?d.toExponential():"0e+0",B=T.split("e");return y=y.replace(/e[\+|\-]{1}0/,""),C=P._.numberToFormat(Number(B[0]),y,m),C+"e"+B[1]},unformat:function(d){var y=P._.includes(d,"e+")?d.split("e+"):d.split("e-"),m=Number(y[0]),C=Number(y[1]);C=P._.includes(d,"e-")?C*=-1:C;function T(B,D,Y,K){var H=P._.correctionFactor(B,D),st=B*H*(D*H)/(H*H);return st}return P._.reduce([m,Math.pow(10,C)],T,1)}})}(),function(){P.register("format","ordinal",{regexps:{format:/(o)/},format:function(d,y,m){var C=P.locales[P.options.currentLocale],T,B=P._.includes(y," o")?" ":"";return y=y.replace(/\s?o/,""),B+=C.ordinal(d),T=P._.numberToFormat(d,y,m),T+B}})}(),function(){P.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(d,y,m){var C=P._.includes(y," %")?" ":"",T;return P.options.scalePercentBy100&&(d=d*100),y=y.replace(/\s?\%/,""),T=P._.numberToFormat(d,y,m),P._.includes(T,")")?(T=T.split(""),T.splice(-1,0,C+"%"),T=T.join("")):T=T+C+"%",T},unformat:function(d){var y=P._.stringToNumber(d);return P.options.scalePercentBy100?y*.01:y}})}(),function(){P.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(d,y,m){var C=Math.floor(d/60/60),T=Math.floor((d-C*60*60)/60),B=Math.round(d-C*60*60-T*60);return C+":"+(T<10?"0"+T:T)+":"+(B<10?"0"+B:B)},unformat:function(d){var y=d.split(":"),m=0;return y.length===3?(m=m+Number(y[0])*60*60,m=m+Number(y[1])*60,m=m+Number(y[2])):y.length===2&&(m=m+Number(y[0])*60,m=m+Number(y[1])),Number(m)}})}(),P})},86851:function(Ct,S,p){"use strict";var b=p(89594),I=Array.prototype.concat,P=Array.prototype.slice,O=Ct.exports=function(A){for(var _=[],E=0,g=A.length;E<g;E++){var w=A[E];b(w)?_=I.call(_,P.call(w)):_.push(w)}return _};O.wrap=function(L){return function(){return L(O(arguments))}}},89594:function(Ct){Ct.exports=function(p){return!p||typeof p=="string"?!1:p instanceof Array||Array.isArray(p)||p.length>=0&&(p.splice instanceof Function||Object.getOwnPropertyDescriptor(p,p.length-1)&&p.constructor.name!=="String")}},91496:function(Ct){typeof Object.create=="function"?Ct.exports=function(p,b){p.super_=b,p.prototype=Object.create(b.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}})}:Ct.exports=function(p,b){p.super_=b;var I=function(){};I.prototype=b.prototype,p.prototype=new I,p.prototype.constructor=p}},20384:function(Ct){Ct.exports=function(p){return p&&typeof p=="object"&&typeof p.copy=="function"&&typeof p.fill=="function"&&typeof p.readUInt8=="function"}},89539:function(Ct,S,p){var b=p(34155),I=Object.getOwnPropertyDescriptors||function(jt){for(var qt=Object.keys(jt),Vt={},re=0;re<qt.length;re++)Vt[qt[re]]=Object.getOwnPropertyDescriptor(jt,qt[re]);return Vt},P=/%[sdj%]/g;S.format=function(_t){if(!st(_t)){for(var jt=[],qt=0;qt<arguments.length;qt++)jt.push(A(arguments[qt]));return jt.join(" ")}for(var qt=1,Vt=arguments,re=Vt.length,ae=String(_t).replace(P,function(Lt){if(Lt==="%%")return"%";if(qt>=re)return Lt;switch(Lt){case"%s":return String(Vt[qt++]);case"%d":return Number(Vt[qt++]);case"%j":try{return JSON.stringify(Vt[qt++])}catch(bt){return"[Circular]"}default:return Lt}}),Nt=Vt[qt];qt<re;Nt=Vt[++qt])Y(Nt)||!Rt(Nt)?ae+=" "+Nt:ae+=" "+A(Nt);return ae},S.deprecate=function(_t,jt){if(typeof b!="undefined"&&b.noDeprecation===!0)return _t;if(typeof b=="undefined")return function(){return S.deprecate(_t,jt).apply(this,arguments)};var qt=!1;function Vt(){if(!qt){if(b.throwDeprecation)throw new Error(jt);b.traceDeprecation?console.trace(jt):console.error(jt),qt=!0}return _t.apply(this,arguments)}return Vt};var O={},L;S.debuglog=function(_t){if(ct(L)&&(L={NODE_ENV:"production"}.NODE_DEBUG||""),_t=_t.toUpperCase(),!O[_t])if(new RegExp("\\b"+_t+"\\b","i").test(L)){var jt=b.pid;O[_t]=function(){var qt=S.format.apply(S,arguments);console.error("%s %d: %s",_t,jt,qt)}}else O[_t]=function(){};return O[_t]};function A(_t,jt){var qt={seen:[],stylize:E};return arguments.length>=3&&(qt.depth=arguments[2]),arguments.length>=4&&(qt.colors=arguments[3]),D(jt)?qt.showHidden=jt:jt&&S._extend(qt,jt),ct(qt.showHidden)&&(qt.showHidden=!1),ct(qt.depth)&&(qt.depth=2),ct(qt.colors)&&(qt.colors=!1),ct(qt.customInspect)&&(qt.customInspect=!0),qt.colors&&(qt.stylize=_),w(qt,_t,qt.depth)}S.inspect=A,A.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},A.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function _(_t,jt){var qt=A.styles[jt];return qt?"["+A.colors[qt][0]+"m"+_t+"["+A.colors[qt][1]+"m":_t}function E(_t,jt){return _t}function g(_t){var jt={};return _t.forEach(function(qt,Vt){jt[qt]=!0}),jt}function w(_t,jt,qt){if(_t.customInspect&&jt&&Z(jt.inspect)&&jt.inspect!==S.inspect&&!(jt.constructor&&jt.constructor.prototype===jt)){var Vt=jt.inspect(qt,_t);return st(Vt)||(Vt=w(_t,Vt,qt)),Vt}var re=d(_t,jt);if(re)return re;var ae=Object.keys(jt),Nt=g(ae);if(_t.showHidden&&(ae=Object.getOwnPropertyNames(jt)),Gt(jt)&&(ae.indexOf("message")>=0||ae.indexOf("description")>=0))return y(jt);if(ae.length===0){if(Z(jt)){var Lt=jt.name?": "+jt.name:"";return _t.stylize("[Function"+Lt+"]","special")}if(Ot(jt))return _t.stylize(RegExp.prototype.toString.call(jt),"regexp");if(Qt(jt))return _t.stylize(Date.prototype.toString.call(jt),"date");if(Gt(jt))return y(jt)}var bt="",at=!1,rt=["{","}"];if(B(jt)&&(at=!0,rt=["[","]"]),Z(jt)){var vt=jt.name?": "+jt.name:"";bt=" [Function"+vt+"]"}if(Ot(jt)&&(bt=" "+RegExp.prototype.toString.call(jt)),Qt(jt)&&(bt=" "+Date.prototype.toUTCString.call(jt)),Gt(jt)&&(bt=" "+y(jt)),ae.length===0&&(!at||jt.length==0))return rt[0]+bt+rt[1];if(qt<0)return Ot(jt)?_t.stylize(RegExp.prototype.toString.call(jt),"regexp"):_t.stylize("[Object]","special");_t.seen.push(jt);var tt;return at?tt=m(_t,jt,qt,Nt,ae):tt=ae.map(function(q){return C(_t,jt,qt,Nt,q,at)}),_t.seen.pop(),T(tt,bt,rt)}function d(_t,jt){if(ct(jt))return _t.stylize("undefined","undefined");if(st(jt)){var qt="'"+JSON.stringify(jt).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return _t.stylize(qt,"string")}if(H(jt))return _t.stylize(""+jt,"number");if(D(jt))return _t.stylize(""+jt,"boolean");if(Y(jt))return _t.stylize("null","null")}function y(_t){return"["+Error.prototype.toString.call(_t)+"]"}function m(_t,jt,qt,Vt,re){for(var ae=[],Nt=0,Lt=jt.length;Nt<Lt;++Nt)$(jt,String(Nt))?ae.push(C(_t,jt,qt,Vt,String(Nt),!0)):ae.push("");return re.forEach(function(bt){bt.match(/^\d+$/)||ae.push(C(_t,jt,qt,Vt,bt,!0))}),ae}function C(_t,jt,qt,Vt,re,ae){var Nt,Lt,bt;if(bt=Object.getOwnPropertyDescriptor(jt,re)||{value:jt[re]},bt.get?bt.set?Lt=_t.stylize("[Getter/Setter]","special"):Lt=_t.stylize("[Getter]","special"):bt.set&&(Lt=_t.stylize("[Setter]","special")),$(Vt,re)||(Nt="["+re+"]"),Lt||(_t.seen.indexOf(bt.value)<0?(Y(qt)?Lt=w(_t,bt.value,null):Lt=w(_t,bt.value,qt-1),Lt.indexOf(`
`)>-1&&(ae?Lt=Lt.split(`
`).map(function(at){return"  "+at}).join(`
`).substr(2):Lt=`
`+Lt.split(`
`).map(function(at){return"   "+at}).join(`
`))):Lt=_t.stylize("[Circular]","special")),ct(Nt)){if(ae&&re.match(/^\d+$/))return Lt;Nt=JSON.stringify(""+re),Nt.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Nt=Nt.substr(1,Nt.length-2),Nt=_t.stylize(Nt,"name")):(Nt=Nt.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Nt=_t.stylize(Nt,"string"))}return Nt+": "+Lt}function T(_t,jt,qt){var Vt=0,re=_t.reduce(function(ae,Nt){return Vt++,Nt.indexOf(`
`)>=0&&Vt++,ae+Nt.replace(/\u001b\[\d\d?m/g,"").length+1},0);return re>60?qt[0]+(jt===""?"":jt+`
 `)+" "+_t.join(`,
  `)+" "+qt[1]:qt[0]+jt+" "+_t.join(", ")+" "+qt[1]}function B(_t){return Array.isArray(_t)}S.isArray=B;function D(_t){return typeof _t=="boolean"}S.isBoolean=D;function Y(_t){return _t===null}S.isNull=Y;function K(_t){return _t==null}S.isNullOrUndefined=K;function H(_t){return typeof _t=="number"}S.isNumber=H;function st(_t){return typeof _t=="string"}S.isString=st;function pt(_t){return typeof _t=="symbol"}S.isSymbol=pt;function ct(_t){return _t===void 0}S.isUndefined=ct;function Ot(_t){return Rt(_t)&&Q(_t)==="[object RegExp]"}S.isRegExp=Ot;function Rt(_t){return typeof _t=="object"&&_t!==null}S.isObject=Rt;function Qt(_t){return Rt(_t)&&Q(_t)==="[object Date]"}S.isDate=Qt;function Gt(_t){return Rt(_t)&&(Q(_t)==="[object Error]"||_t instanceof Error)}S.isError=Gt;function Z(_t){return typeof _t=="function"}S.isFunction=Z;function nt(_t){return _t===null||typeof _t=="boolean"||typeof _t=="number"||typeof _t=="string"||typeof _t=="symbol"||typeof _t=="undefined"}S.isPrimitive=nt,S.isBuffer=p(20384);function Q(_t){return Object.prototype.toString.call(_t)}function dt(_t){return _t<10?"0"+_t.toString(10):_t.toString(10)}var lt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function z(){var _t=new Date,jt=[dt(_t.getHours()),dt(_t.getMinutes()),dt(_t.getSeconds())].join(":");return[_t.getDate(),lt[_t.getMonth()],jt].join(" ")}S.log=function(){console.log("%s - %s",z(),S.format.apply(S,arguments))},S.inherits=p(91496),S._extend=function(_t,jt){if(!jt||!Rt(jt))return _t;for(var qt=Object.keys(jt),Vt=qt.length;Vt--;)_t[qt[Vt]]=jt[qt[Vt]];return _t};function $(_t,jt){return Object.prototype.hasOwnProperty.call(_t,jt)}var j=typeof Symbol!="undefined"?Symbol("util.promisify.custom"):void 0;S.promisify=function(jt){if(typeof jt!="function")throw new TypeError('The "original" argument must be of type Function');if(j&&jt[j]){var qt=jt[j];if(typeof qt!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(qt,j,{value:qt,enumerable:!1,writable:!1,configurable:!0}),qt}function qt(){for(var Vt,re,ae=new Promise(function(bt,at){Vt=bt,re=at}),Nt=[],Lt=0;Lt<arguments.length;Lt++)Nt.push(arguments[Lt]);Nt.push(function(bt,at){bt?re(bt):Vt(at)});try{jt.apply(this,Nt)}catch(bt){re(bt)}return ae}return Object.setPrototypeOf(qt,Object.getPrototypeOf(jt)),j&&Object.defineProperty(qt,j,{value:qt,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(qt,I(jt))},S.promisify.custom=j;function f(_t,jt){if(!_t){var qt=new Error("Promise was rejected with a falsy value");qt.reason=_t,_t=qt}return jt(_t)}function yt(_t){if(typeof _t!="function")throw new TypeError('The "original" argument must be of type Function');function jt(){for(var qt=[],Vt=0;Vt<arguments.length;Vt++)qt.push(arguments[Vt]);var re=qt.pop();if(typeof re!="function")throw new TypeError("The last argument must be of type Function");var ae=this,Nt=function(){return re.apply(ae,arguments)};_t.apply(this,qt).then(function(Lt){b.nextTick(Nt,null,Lt)},function(Lt){b.nextTick(f,Lt,Nt)})}return Object.setPrototypeOf(jt,Object.getPrototypeOf(_t)),Object.defineProperties(jt,I(_t)),jt}S.callbackify=yt}}]);
